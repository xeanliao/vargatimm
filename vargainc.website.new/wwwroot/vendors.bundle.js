/*! For license information please see vendors.bundle.js.LICENSE.txt */
(self.webpackChunkvargainc_timm_website=self.webpackChunkvargainc_timm_website||[]).push([[216],{5479:(t,e,n)=>{var i=n(7057).yu;t.exports=function(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]],o=[t[2],t[1]];return i([[e,o,r,n,e]])}},3292:(t,e,n)=>{var i=n(5266).pZ;t.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return i(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},3664:(t,e,n)=>{var i=n(5266).pZ,r=n(7057).xm;t.exports=function(t){var e=0,n=0,o=0;return i(t,(function(t){e+=t[0],n+=t[1],o++}),!0),r([e/o,n/o])}},4167:(t,e,n)=>{var i=n(3292),r=n(5479);t.exports=function(t){return r(i(t))}},7057:t=>{function e(t,e){if(!t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}t.exports.xm=function(t,n){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if("number"!=typeof t[0]||"number"!=typeof t[1])throw new Error("Coordinates must numbers");return e({type:"Point",coordinates:t},n)},t.exports.yu=function(t,n){if(!t)throw new Error("No coordinates passed");for(var i=0;i<t.length;i++){var r=t[i];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<r[r.length-1].length;o++)if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:t},n)}},5266:t=>{t.exports.pZ=function t(e,n,i){var r,o,a,s,l,u,c,h,d,f,p=0,m=0,_="FeatureCollection"===e.type,g="Feature"===e.type,y=_?e.features.length:1;for(r=0;r<y;r++)for(c=(f="GeometryCollection"===(d=_?e.features[r].geometry:g?e.geometry:e).type)?d.geometries.length:1,s=0;s<c;s++)if(h=(u=f?d.geometries[s]:d).coordinates,p=!i||"Polygon"!==u.type&&"MultiPolygon"!==u.type?0:1,"Point"===u.type)n(h,m),m++;else if("LineString"===u.type||"MultiPoint"===u.type)for(o=0;o<h.length;o++)n(h[o],m),m++;else if("Polygon"===u.type||"MultiLineString"===u.type)for(o=0;o<h.length;o++)for(a=0;a<h[o].length-p;a++)n(h[o][a],m),m++;else if("MultiPolygon"===u.type)for(o=0;o<h.length;o++)for(a=0;a<h[o].length;a++)for(l=0;l<h[o][a].length-p;l++)n(h[o][a][l],m),m++;else{if("GeometryCollection"!==u.type)throw new Error("Unknown Geometry Type");for(o=0;o<u.geometries.length;o++)t(u.geometries[o],n,i)}}},2316:(t,e,n)=>{var i,r,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g,i=[n(1311),n(3609),e],void 0===(r=function(t,e,n){o.Backbone=function(t,e,n,i){var r=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,i){n.each(e,(function(e,r){n[r]&&(t.prototype[r]=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,r){return n[e](this[i],s(t,this),r)};case 4:return function(t,r,o){return n[e](this[i],s(t,this),r,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}}(e,r,i))}))},s=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?l(t):n.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},u=e.Events={},c=/\s+/,h=function(t,e,i,r,o){var a,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(a=n.keys(i);s<a.length;s++)e=h(t,e,a[s],i[a[s]],o)}else if(i&&c.test(i))for(a=i.split(c);s<a.length;s++)e=t(e,a[s],r,o);else e=t(e,i,r,o);return e};u.on=function(t,e,n){return d(this,t,e,n)};var d=function(t,e,n,i,r){return t._events=h(f,t._events||{},e,n,{context:i,ctx:t,listening:r}),r&&((t._listeners||(t._listeners={}))[r.id]=r),t};u.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[r];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[r]={obj:t,objId:r,id:s,listeningTo:o,count:0}}return d(t,e,i,this,a),this};var f=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),o=i.context,a=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:o,ctx:o||a,listening:s})}return t};u.off=function(t,e,n){return this._events?(this._events=h(p,this._events,t,e,{context:n,listeners:this._listeners}),this):this},u.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:n.keys(r),a=0;a<o.length;a++){var s=r[o[a]];if(!s)break;s.obj.off(e,i,this)}return this};var p=function(t,e,i,r){if(t){var o,a=0,s=r.context,l=r.listeners;if(e||i||s){for(var u=e?[e]:n.keys(t);a<u.length;a++){var c=t[e=u[a]];if(!c)break;for(var h=[],d=0;d<c.length;d++){var f=c[d];i&&i!==f.callback&&i!==f.callback._callback||s&&s!==f.context?h.push(f):(o=f.listening)&&0==--o.count&&(delete l[o.id],delete o.listeningTo[o.objId])}h.length?t[e]=h:delete t[e]}return t}for(var p=n.keys(l);a<p.length;a++)delete l[(o=l[p[a]]).id],delete o.listeningTo[o.objId]}};u.once=function(t,e,i){var r=h(m,{},t,e,n.bind(this.off,this));return"string"==typeof t&&null==i&&(e=void 0),this.on(r,e,i)},u.listenToOnce=function(t,e,i){var r=h(m,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,r)};var m=function(t,e,i,r){if(i){var o=t[e]=n.once((function(){r(e,o),i.apply(this,arguments)}));o._callback=i}return t};u.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return h(_,this._events,t,void 0,n),this};var _=function(t,e,n,i){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&g(r,i),o&&g(o,[e].concat(i))}return t},g=function(t,e){var n,i=-1,r=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}};u.bind=u.on,u.unbind=u.off,n.extend(e,u);var y=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,a=i.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,h=this._previousAttributes;for(var d in r)e=r[d],n.isEqual(u[d],e)||s.push(d),n.isEqual(h[d],e)?delete c[d]:c[d]=e,o?delete u[d]:u[d]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=i);for(var f=0;f<s.length;f++)this.trigger("change:"+s[f],this,u[s[f]],i)}if(l)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var o=t[r];n.isEqual(e[r],o)||(i[r]=o)}return!!n.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var r=t.parse?e.parse(n,t):n;if(!e.set(r,t))return!1;i&&i.call(t.context,e,n,t),e.trigger("sync",e,n,t)},O(this,t),this.sync("read",this,t)},save:function(t,e,i){var r;null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e;var o=(i=n.extend({validate:!0,parse:!0},i)).wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var a=this,s=i.success,l=this.attributes;i.success=function(t){a.attributes=l;var e=i.parse?a.parse(t,i):t;if(o&&(e=n.extend({},r,e)),e&&!a.set(e,i))return!1;s&&s.call(i.context,a,t,i),a.trigger("sync",a,t,i)},O(this,i),r&&o&&(this.attributes=n.extend({},l,r));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=r);var c=this.sync(u,this,i);return this.attributes=l,c},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){r&&o(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var a=!1;return this.isNew()?n.defer(t.success):(O(this,t),a=this.sync("delete",this,t)),r||o(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||R();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}}),a(y,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var v=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1},w=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),o=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<o;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+o+n]=r[i]};n.extend(v.prototype,u,{model:y,initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,b))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),i?r[0]:r},set:function(t,e){if(null!=t){(e=n.extend({},x,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!n.isArray(t);t=i?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,a,s=[],l=[],u=[],c=[],h={},d=e.add,f=e.merge,p=e.remove,m=!1,_=this.comparator&&null==r&&!1!==e.sort,g=n.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){o=t[a];var y=this.get(o);if(y){if(f&&o!==y){var v=this._isModel(o)?o.attributes:o;e.parse&&(v=y.parse(v,e)),y.set(v,e),u.push(y),_&&!m&&(m=y.hasChanged(g))}h[y.cid]||(h[y.cid]=!0,s.push(y)),t[a]=y}else d&&(o=t[a]=this._prepareModel(o,e))&&(l.push(o),this._addReference(o,e),h[o.cid]=!0,s.push(o))}if(p){for(a=0;a<this.length;a++)h[(o=this.models[a]).cid]||c.push(o);c.length&&this._removeModels(c,e)}var b=!1,M=!_&&d&&p;if(s.length&&M?(b=this.length!==s.length||n.some(this.models,(function(t,e){return t!==s[e]})),this.models.length=0,w(this.models,s,0),this.length=this.models.length):l.length&&(_&&(m=!0),w(this.models,l,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!e.silent){for(a=0;a<l.length;a++)null!=r&&(e.index=r+a),(o=l[a]).trigger("add",o,this,e);(m||b)&&this.trigger("sort",this,e),(l.length||c.length||u.length)&&(e.changes={added:l,removed:c,merged:u},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},O(this,t),this.sync("read",this,t)},create:function(t,e){var i=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,n){i&&r.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?n.clone(e):{}).collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var a=this.modelId(r.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}}),a(v,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var M=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,k)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];n.extend(M.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var r=e.match(T);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,r){var o=S[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||R()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",r.emulateJSON&&(a.data._method=o);var s=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var l=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,l&&l.call(r.context,t,e,n)};var u=r.xhr=e.ajax(n.extend(a,r));return i.trigger("request",i,u,r),u};var S={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,D=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,u,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return e.history.route(t,(function(n){var a=o._extractParameters(t,n);!1!==o.execute(r,a,i)&&(o.trigger.apply(o,["route:"+i].concat(a)),o.trigger("route",i,a),e.history.trigger("route",o,i,a))})),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(C,"(?:$1)?").replace(L,(function(t,e){return e?t:"([^/?]+)"})).replace(D,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,(function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null}))}});var P=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,F=/#.*$/;P.started=!1,n.extend(P.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(I,"")},start:function(t){if(P.started)throw new Error("Backbone.history has already been started");if(P.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(z,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!P.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(F,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new P;y.extend=v.extend=E.extend=M.extend=P.extend=function(t,e){var i,r=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e),i.prototype=n.create(r.prototype,t),i.prototype.constructor=i,i.__super__=r.prototype,i};var R=function(){throw new Error('A "url" property or function must be specified')},O=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e}(o,n,t,e)}.apply(e,i))||(t.exports=r)},6624:(t,e,n)=>{var i;i=function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){return r(e[a][1][t]||t)}),c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),i=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),i}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,e,n){"use strict";var i;try{throw new Error}catch(t){i=t}var r=t("./schedule"),o=t("./queue"),a=t("./util");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=r}function l(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function u(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function c(t){this._normalQueue._pushOne(t),this._queueTick()}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(s.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?l.call(this,t,e,n):this._schedule((function(){setTimeout((function(){t.call(e,n)}),100)}))},s.prototype.invoke=function(t,e,n){this._trampolineEnabled?u.call(this,t,e,n):this._schedule((function(){t.call(e,n)}))},s.prototype.settlePromises=function(t){this._trampolineEnabled?c.call(this,t):this._schedule((function(){t._settlePromises()}))}):(s.prototype.invokeLater=l,s.prototype.invoke=u,s.prototype.settlePromises=c),s.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),i=t.shift();e.call(n,i)}else e._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},e.exports=s,e.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){var r=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},l=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){r||(r=!0,t.prototype._propagateFrom=i.propagateFromFunction(),t.prototype._boundValue=i.boundValueFunction());var u=n(o),c=new t(e);c._propagateFrom(this,1);var h=this._target();if(c._setBoundTo(u),u instanceof t){var d={promiseRejectionQueued:!1,promise:c,target:h,bindingPromise:u};h._then(e,a,void 0,c,d),u._then(s,l,void 0,c,d),c._setOnCancel(u)}else c._resolveCallback(h);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var i;"undefined"!=typeof Promise&&(i=Promise);var r=t("./promise")();r.noConflict=function(){try{Promise===r&&(Promise=i)}catch(t){}return r},e.exports=r},{"./promise":22}],5:[function(t,e,n){"use strict";var i=Object.create;if(i){var r=i(null),o=i(null);r[" size"]=o[" size"]=0}e.exports=function(e){var n=t("./util"),i=n.canEvaluate;function r(t){return function(t,i){var r;if(null!=t&&(r=t[i]),"function"!=typeof r){var o="Object "+n.classString(t)+" has no method '"+n.toString(i)+"'";throw new e.TypeError(o)}return r}(t,this.pop()).apply(t,this)}function o(t){return t[this]}function a(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=a;else if(i){var n=(void 0)(t);e=null!==n?n:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o=t("./util"),a=o.tryCatch,s=o.errorObj,l=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var i=a(t).call(this._boundValue());i===s&&(this._attachExtraTrace(i.e),l.throwLater(i.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),i=t("./es5").keys,r=n.tryCatch,o=n.errorObj;return function(t,a,s){return function(l){var u=s._boundValue();t:for(var c=0;c<t.length;++c){var h=t[c];if(h===Error||null!=h&&h.prototype instanceof Error){if(l instanceof h)return r(a).call(u,l)}else if("function"==typeof h){var d=r(h).call(u,l);if(d===o)return d;if(d)return r(a).call(u,l)}else if(n.isObject(l)){for(var f=i(h),p=0;p<f.length;++p){var m=f[p];if(h[m]!=l[m])continue t}return r(a).call(u,l)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function i(){this._trace=new i.CapturedTrace(r())}function r(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},i.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},i.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},i.CapturedTrace=null,i.create=function(){if(e)return new i},i.deactivateLongStackTraces=function(){},i.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,l=t.prototype._promiseCreated;i.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=l,e=!1},e=!0,t.prototype._pushContext=i.prototype._pushContext,t.prototype._popContext=i.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},i}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){var i,r,o,a=e._getDomain,s=e._async,l=t("./errors").Warning,u=t("./util"),c=u.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,f=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,p=null,m=null,_=!1,g=!(0==u.env("BLUEBIRD_DEBUG")),y=!(0==u.env("BLUEBIRD_WARNINGS")||!g&&!u.env("BLUEBIRD_WARNINGS")),v=!(0==u.env("BLUEBIRD_LONG_STACK_TRACES")||!g&&!u.env("BLUEBIRD_LONG_STACK_TRACES")),x=0!=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(y||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},e.prototype._notifyUnhandledRejectionIsHandled=function(){U("rejectionHandled",i,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),U("unhandledRejection",r,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return Y(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=a();r="function"==typeof t?null===e?t:u.domainBind(e,t):void 0},e.onUnhandledRejectionHandled=function(t){var e=a();i="function"==typeof t?null===e?t:u.domainBind(e,t):void 0};var b=function(){};e.longStackTraces=function(){if(s.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!X.longStackTraces&&H()){var t=e.prototype._captureStackTrace,i=e.prototype._attachExtraTrace;X.longStackTraces=!0,b=function(){if(s.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=i,n.deactivateLongStackTraces(),s.enableTrampoline(),X.longStackTraces=!1},e.prototype._captureStackTrace=R,e.prototype._attachExtraTrace=O,n.activateLongStackTraces(),s.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return X.longStackTraces&&H()};var w=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return u.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!u.global.dispatchEvent(n)}}return"function"==typeof Event?(t=new Event("CustomEvent"),u.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!u.global.dispatchEvent(n)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!u.global.dispatchEvent(n)})}catch(t){}return function(){return!1}}(),M=u.isNode?function(){return process.emit.apply(process,arguments)}:u.global?function(t){var e="on"+t.toLowerCase(),n=u.global[e];return!!n&&(n.apply(u.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function T(t,e){return{promise:e}}var k={promiseCreated:T,promiseFulfilled:T,promiseRejected:T,promiseResolved:T,promiseCancelled:T,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:T},S=function(t){var e=!1;try{e=M.apply(null,arguments)}catch(t){s.throwLater(t),e=!0}var n=!1;try{n=w(t,k[t].apply(null,arguments))}catch(t){s.throwLater(t),n=!0}return n||e};function E(){return!1}function C(t,e,n){var i=this;try{t(e,n,(function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+u.toString(t));i._attachCancellationCallback(t)}))}catch(t){return t}}function L(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?u.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function D(){return this._onCancelField}function A(t){this._onCancelField=t}function P(){this._cancellationParent=void 0,this._onCancelField=void 0}function I(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}e.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&b()),"warnings"in t){var n=t.warnings;X.warnings=!!n,x=X.warnings,u.isObject(n)&&"wForgottenReturn"in n&&(x=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!X.cancellation){if(s.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=P,e.prototype._propagateFrom=I,e.prototype._onCancel=D,e.prototype._setOnCancel=A,e.prototype._attachCancellationCallback=L,e.prototype._execute=C,z=I,X.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!X.monitoring?(X.monitoring=!0,e.prototype._fireEvent=S):!t.monitoring&&X.monitoring&&(X.monitoring=!1,e.prototype._fireEvent=E)),e},e.prototype._fireEvent=E,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var z=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function F(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function R(){this._trace=new G(this._peekContext())}function O(t,e){if(c(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=B(t);u.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),u.notEnumerableProp(t,"__stackCleaned__",!0)}}}function Y(t,n,i){if(X.warnings){var r,o=new l(t);if(n)i._attachExtraTrace(o);else if(X.longStackTraces&&(r=e._peekContext()))r.attachExtraTrace(o);else{var a=B(o);o.stack=a.message+"\n"+a.stack.join("\n")}S("warning",o)||j(o,"",!0)}}function N(t){for(var e=[],n=0;n<t.length;++n){var i=t[n],r="    (No stack trace)"===i||p.test(i),o=r&&V(i);r&&!o&&(_&&" "!==i.charAt(0)&&(i="    "+i),e.push(i))}return e}function B(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var i=e[n];if("    (No stack trace)"===i||p.test(i))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:N(e)}}function j(t,e,n){if("undefined"!=typeof console){var i;if(u.isObject(t)){var r=t.stack;i=e+m(r,t)}else i=e+String(t);"function"==typeof o?o(i,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(i)}}function U(t,e,n,i){var r=!1;try{"function"==typeof e&&(r=!0,"rejectionHandled"===t?e(i):e(n,i))}catch(t){s.throwLater(t)}"unhandledRejection"===t?S(t,n,i)||r||j(n,"Unhandled rejection "):S(t,i)}function $(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():u.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function H(){return"function"==typeof Z}var V=function(){return!1},q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function W(t){var e=t.match(q);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function G(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Z(this,G),e>32&&this.uncycle()}u.inherits(G,Error),n.CapturedTrace=G,G.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},i=0,r=this;void 0!==r;++i)e.push(r),r=r._parent;for(i=(t=this._length=i)-1;i>=0;--i){var o=e[i].stack;void 0===n[o]&&(n[o]=i)}for(i=0;i<t;++i){var a=n[e[i].stack];if(void 0!==a&&a!==i){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[i]._parent=void 0,e[i]._length=1;var s=i>0?e[i-1]:this;a<t-1?(s._parent=e[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,u=i-2;u>=0;--u)e[u]._length=l,l++;return}}}},G.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=B(t),n=e.message,i=[e.stack],r=this;void 0!==r;)i.push(N(r.stack.split("\n"))),r=r._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var i=t[n],r=e.length-1,o=e[r],a=-1,s=i.length-1;s>=0;--s)if(i[s]===o){a=s;break}for(s=a;s>=0;--s){var l=i[s];if(e[r]!==l)break;e.pop(),r--}e=i}}(i),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(i),u.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,i)),u.notEnumerableProp(t,"__stackCleaned__",!0)}};var Z=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():$(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,p=t,m=e;var n=Error.captureStackTrace;return V=function(t){return h.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var i,r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return p=/@/,m=e,_=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){i="stack"in t}return!("stack"in r)&&i&&"number"==typeof Error.stackTraceLimit?(p=t,m=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6}):(m=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?$(e):e.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(o=function(t){console.warn(t)},u.isNode&&process.stderr.isTTY?o=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:u.isNode||"string"!=typeof(new Error).stack||(o=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var X={warnings:y,longStackTraces:!1,cancellation:!1,monitoring:!1};return v&&e.longStackTraces(),{longStackTraces:function(){return X.longStackTraces},warnings:function(){return X.warnings},cancellation:function(){return X.cancellation},monitoring:function(){return X.monitoring},propagateFromFunction:function(){return z},boundValueFunction:function(){return F},checkForgottenReturns:function(t,e,n,i,r){if(void 0===t&&null!==e&&x){if(void 0!==r&&r._returnedNonUndefined())return;if(0==(65535&i._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),l=N(s),u=l.length-1;u>=0;--u){var c=l[u];if(!d.test(c)){var h=c.match(f);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(l.length>0){var p=l[0];for(u=0;u<s.length;++u)if(s[u]===p){u>0&&(a="\n"+s[u-1]);break}}}var m="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;i._warn(m,!0,e)}},setBounds:function(t,e){if(H()){for(var n,i,r=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,l=0;l<r.length;++l)if(u=W(r[l])){n=u.fileName,a=u.line;break}for(l=0;l<o.length;++l){var u;if(u=W(o[l])){i=u.fileName,s=u.line;break}}a<0||s<0||!n||!i||n!==i||a>=s||(V=function(t){if(h.test(t))return!0;var e=W(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}},warn:Y,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),Y(n)},CapturedTrace:G,fireDomEvent:w,fireGlobalEvent:M}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],i=function(){throw e};return this.caught(t,i)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var i=arguments[1];i instanceof t&&i.suppressUnhandledRejections();var r=function(){return i};return this.caught(n,r)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,i=t.all;function r(){return i(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(r,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,i){return n(t,i,e,0)._then(r,void 0,void 0,t,void 0)},t.mapSeries=function(t,i){return n(t,i,e,e)}}},{}],12:[function(t,e,n){"use strict";var i,r,o=t("./es5"),a=o.freeze,s=t("./util"),l=s.inherits,u=s.notEnumerableProp;function c(t,e){function n(i){if(!(this instanceof n))return new n(i);u(this,"message","string"==typeof i?i:e),u(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}var h=c("Warning","warning"),d=c("CancellationError","cancellation error"),f=c("TimeoutError","timeout error"),p=c("AggregateError","aggregate error");try{i=TypeError,r=RangeError}catch(t){i=c("TypeError","type error"),r=c("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<m.length;++_)"function"==typeof Array.prototype[m[_]]&&(p.prototype[m[_]]=Array.prototype[m[_]]);o.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var g=0;function y(t){if(!(this instanceof y))return new y(t);u(this,"name","OperationalError"),u(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(u(this,"message",t.message),u(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}p.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",r=i.split("\n"),o=0;o<r.length;++o)r[o]=t+r[o];e+=(i=r.join("\n"))+"\n"}return g--,e},l(y,Error);var v=Error.__BluebirdErrorTypes__;v||(v=a({CancellationError:d,TimeoutError:f,OperationalError:y,RejectionError:y,AggregateError:p}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:v,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error,TypeError:i,RangeError:r,CancellationError:v.CancellationError,OperationalError:v.OperationalError,TimeoutError:v.TimeoutError,AggregateError:v.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var i=function(){"use strict";return void 0===this}();if(i)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return a}},isES5:i,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,i){return n(this,t,i,e)},t.filter=function(t,i,r){return n(t,i,r,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){var i=t("./util"),r=e.CancellationError,o=i.errorObj;function a(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function s(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function u(){return h.call(this,this.promise._target()._settledValue())}function c(t){if(!l(this,t))return o.e=t,o}function h(t){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var h=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),t);if(void 0!==h){i._setReturnedNonUndefined();var d=n(h,i);if(d instanceof e){if(null!=this.cancelPromise){if(d._isCancelled()){var f=new r("late cancellation observer");return i._attachExtraTrace(f),o.e=f,o}d.isPending()&&d._attachCancellationCallback(new s(this))}return d._then(u,c,void 0,this,void 0)}}}return i.isRejected()?(l(this),o.e=t,o):(l(this),t)}return a.prototype.isFinallyHandler=function(){return 0===this.type},s.prototype._resultCancelled=function(){l(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new a(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,h,h)},e.prototype.tap=function(t){return this._passThrough(t,1,h)},a}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=t("./errors").TypeError,l=t("./util"),u=l.errorObj,c=l.tryCatch,h=[];function d(t,n,r,o){if(a.cancellation()){var s=new e(i),l=this._finallyPromise=new e(i);this._promise=s.lastly((function(){return l})),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new e(i))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}l.inherits(d,o),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=c(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=c(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},d.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=c(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=c(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(t){var n=this._promise;if(t===u)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var i=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(i);var o=r(i,this._promise);if(o instanceof e||null!==(o=function(t,n,i){for(var o=0;o<n.length;++o){i._pushContext();var a=c(n[o])(t);if(i._popContext(),a===u){i._pushContext();var s=e.reject(u.e);return i._popContext(),s}var l=r(a,i);if(l instanceof e)return l}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",i)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,i=d,r=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new i(void 0,void 0,n,r),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("expecting a function but got "+l.classString(t));h.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=new d(t,this),r=i.promise();return i._run(e.spawn),r}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=e._getDomain,l=t("./util"),u=l.tryCatch,c=l.errorObj,h=e._async;function d(t,e,n,i){this.constructor$(t),this._promise._captureStackTrace();var r=s();this._callback=null===r?e:l.domainBind(r,e),this._preservedValues=i===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function f(t,n,r,o){if("function"!=typeof n)return i("expecting a function but got "+l.classString(n));var a=0;if(void 0!==r){if("object"!=typeof r||null===r)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(r)));if("number"!=typeof r.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(r.concurrency)));a=r.concurrency}return new d(t,n,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,o).promise()}l.inherits(d,n),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(t,n){var i=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(n<0){if(i[n=-1*n-1]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return i[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var h=this._promise,d=this._callback,f=h._boundValue();h._pushContext();var p=u(d).call(f,t,n,o),m=h._popContext();if(a.checkForgottenReturns(p,m,null!==s?"Promise.filter":"Promise.map",h),p===c)return this._reject(p.e),!0;var _=r(p,this._promise);if(_ instanceof e){var g=(_=_._target())._bitField;if(0==(50397184&g))return l>=1&&this._inFlight++,i[n]=_,_._proxy(this,-1*(n+1)),!1;if(0==(33554432&g))return 0!=(16777216&g)?(this._reject(_._reason()),!0):(this._cancel(),!0);p=_._value()}i[n]=p}return++this._totalResolved>=o&&(null!==s?this._filter(i,s):this._resolve(i),!0)},d.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var i=t.pop();this._promiseFulfilled(n[i],i)}},d.prototype._filter=function(t,e){for(var n=e.length,i=new Array(n),r=0,o=0;o<n;++o)t[o]&&(i[r++]=e[o]);i.length=r,this._resolve(i)},d.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return f(this,t,e,null)},e.map=function(t,e,n,i){return f(t,e,n,i)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var i=new e(n);i._captureStackTrace(),i._pushContext();var r=s(t).apply(this,arguments),a=i._popContext();return o.checkForgottenReturns(r,a,"Promise.method",i),i._resolveFromSyncValue(r),i}},e.attempt=e.try=function(t){if("function"!=typeof t)return r("expecting a function but got "+a.classString(t));var i,l=new e(n);if(l._captureStackTrace(),l._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],c=arguments[2];i=a.isArray(u)?s(t).apply(c,u):s(t).call(c,u)}else i=s(t)();var h=l._popContext();return o.checkForgottenReturns(i,h,"Promise.try",l),l._resolveFromSyncValue(i),l},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var i=t("./util"),r=i.maybeWrapAsError,o=t("./errors").OperationalError,a=t("./es5"),s=/^(?:name|message|stack|cause)$/;function l(t){var e;if(function(t){return t instanceof Error&&a.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=a.keys(t),r=0;r<n.length;++r){var l=n[r];s.test(l)||(e[l]=t[l])}return e}return i.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,i){if(null!==t){if(n){var o=l(r(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(i);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),i=e._async,r=n.tryCatch,o=n.errorObj;function a(t,e){if(!n.isArray(t))return s.call(this,t,e);var a=r(e).apply(this._boundValue(),[null].concat(t));a===o&&i.throwLater(a.e)}function s(t,e){var n=this._boundValue(),a=void 0===t?r(e).call(n,null):r(e).call(n,null,t);a===o&&i.throwLater(a.e)}function l(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var a=r(e).call(this._boundValue(),t);a===o&&i.throwLater(a.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=s;void 0!==e&&Object(e).spread&&(n=a),this._then(n,l,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){var n=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new C.PromiseInspection(this._target())},r=function(t){return C.reject(new f(t))};function o(){}var a,s={},l=t("./util");a=l.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},l.notEnumerableProp(C,"_getDomain",a);var u=t("./es5"),c=t("./async"),h=new c;u.defineProperty(C,"_async",{value:h});var d=t("./errors"),f=C.TypeError=d.TypeError;C.RangeError=d.RangeError;var p=C.CancellationError=d.CancellationError;C.TimeoutError=d.TimeoutError,C.OperationalError=d.OperationalError,C.RejectionError=d.OperationalError,C.AggregateError=d.AggregateError;var m=function(){},_={},g={},y=t("./thenables")(C,m),v=t("./promise_array")(C,m,y,r,o),x=t("./context")(C),b=x.create,w=t("./debuggability")(C,x),M=(w.CapturedTrace,t("./finally")(C,y)),T=t("./catch_filter")(g),k=t("./nodeback"),S=l.errorObj,E=l.tryCatch;function C(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==m&&(function(t,e){if("function"!=typeof e)throw new f("expecting a function but got "+l.classString(e));if(t.constructor!==C)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function L(t){this.promise._resolveCallback(t)}function D(t){this.promise._rejectCallback(t,!1)}function A(t){var e=new C(m);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return C.prototype.toString=function(){return"[object Promise]"},C.prototype.caught=C.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,i=new Array(e-1),o=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!l.isObject(a))return r("expecting an object but got A catch statement predicate "+l.classString(a));i[o++]=a}return i.length=o,t=arguments[n],this.then(void 0,T(i,t,this))}return this.then(void 0,t)},C.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},C.prototype.then=function(t,e){if(w.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+l.classString(t);arguments.length>1&&(n+=", "+l.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},C.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},C.prototype.spread=function(t){return"function"!=typeof t?r("expecting a function but got "+l.classString(t)):this.all()._then(t,void 0,void 0,_,void 0)},C.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},C.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new v(this).promise()},C.prototype.error=function(t){return this.caught(l.originatesFromRejection,t)},C.getNewLibraryCopy=e.exports,C.is=function(t){return t instanceof C},C.fromNode=C.fromCallback=function(t){var e=new C(m);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=E(t)(k(e,n));return i===S&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},C.all=function(t){return new v(t).promise()},C.cast=function(t){var e=y(t);return e instanceof C||((e=new C(m))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},C.resolve=C.fulfilled=C.cast,C.reject=C.rejected=function(t){var e=new C(m);return e._captureStackTrace(),e._rejectCallback(t,!0),e},C.setScheduler=function(t){if("function"!=typeof t)throw new f("expecting a function but got "+l.classString(t));return h.setScheduler(t)},C.prototype._then=function(t,e,n,i,r){var o=void 0!==r,s=o?r:new C(m),u=this._target(),c=u._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===i&&0!=(2097152&this._bitField)&&(i=0!=(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var d=a();if(0!=(50397184&c)){var f,_,g=u._settlePromiseCtx;0!=(33554432&c)?(_=u._rejectionHandler0,f=t):0!=(16777216&c)?(_=u._fulfillmentHandler0,f=e,u._unsetRejectionIsUnhandled()):(g=u._settlePromiseLateCancellationObserver,_=new p("late cancellation observer"),u._attachExtraTrace(_),f=e),h.invoke(g,u,{handler:null===d?f:"function"==typeof f&&l.domainBind(d,f),promise:s,receiver:i,value:_})}else u._addCallbacks(t,e,s,i,d);return s},C.prototype._length=function(){return 65535&this._bitField},C.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},C.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},C.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},C.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},C.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},C.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},C.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},C.prototype._isFinal=function(){return(4194304&this._bitField)>0},C.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},C.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},C.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},C.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},C.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==s)return void 0===e&&this._isBound()?this._boundValue():e},C.prototype._promiseAt=function(t){return this[4*t-4+2]},C.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},C.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},C.prototype._boundValue=function(){},C.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,i=t._promise0,r=t._receiverAt(0);void 0===r&&(r=s),this._addCallbacks(e,n,i,r,null)},C.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),r=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=s),this._addCallbacks(n,i,r,o,null)},C.prototype._addCallbacks=function(t,e,n,i,r){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=i,"function"==typeof t&&(this._fulfillmentHandler0=null===r?t:l.domainBind(r,t)),"function"==typeof e&&(this._rejectionHandler0=null===r?e:l.domainBind(r,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=i,"function"==typeof t&&(this[a+0]=null===r?t:l.domainBind(r,t)),"function"==typeof e&&(this[a+1]=null===r?e:l.domainBind(r,e))}return this._setLength(o+1),o},C.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},C.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(n(),!1);var i=y(t,this);if(!(i instanceof C))return this._fulfill(t);e&&this._propagateFrom(i,2);var r=i._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var l=new p("late cancellation observer");r._attachExtraTrace(l),this._reject(l)}}else this._reject(n())}},C.prototype._rejectCallback=function(t,e,n){var i=l.ensureErrorObject(t),r=i===t;if(!r&&!n&&w.warnings()){var o="a promise was rejected with a non-error: "+l.classString(t);this._warn(o,!0)}this._attachExtraTrace(i,!!e&&r),this._reject(t)},C.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,i=this._execute(t,(function(t){e._resolveCallback(t)}),(function(t){e._rejectCallback(t,n)}));n=!1,this._popContext(),void 0!==i&&e._rejectCallback(i,!0)},C.prototype._settlePromiseFromHandler=function(t,e,n,i){var r=i._bitField;if(0==(65536&r)){var o;i._pushContext(),e===_?n&&"number"==typeof n.length?o=E(t).apply(this._boundValue(),n):(o=S).e=new f("cannot .spread() a non-array: "+l.classString(n)):o=E(t).call(e,n);var a=i._popContext();0==(65536&(r=i._bitField))&&(o===g?i._reject(n):o===S?i._rejectCallback(o.e,!1):(w.checkForgottenReturns(o,a,"",i,this),i._resolveCallback(o)))}},C.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},C.prototype._followee=function(){return this._rejectionHandler0},C.prototype._setFollowee=function(t){this._rejectionHandler0=t},C.prototype._settlePromise=function(t,e,n,r){var a=t instanceof C,s=this._bitField,l=0!=(134217728&s);0!=(65536&s)?(a&&t._invokeInternalOnCancel(),n instanceof M&&n.isFinallyHandler()?(n.cancelPromise=t,E(e).call(n,r)===S&&t._reject(S.e)):e===i?t._fulfill(i.call(n)):n instanceof o?n._promiseCancelled(t):a||t instanceof v?t._cancel():n.cancel()):"function"==typeof e?a?(l&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof o?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):a&&(l&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(r):t._reject(r))},C.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,i=t.receiver,r=t.value;"function"==typeof e?n instanceof C?this._settlePromiseFromHandler(e,i,r,n):e.call(i,r,n):n instanceof C&&n._reject(r)},C.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},C.prototype._settlePromise0=function(t,e,n){var i=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,t,r,e)},C.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},C.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var i=n();return this._attachExtraTrace(i),this._reject(i)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():h.settlePromises(this))}},C.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,l.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},C.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var i=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,e)}},C.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var i=this._rejectionHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,e)}},C.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,t),this._fulfillPromises(e,i)}this._setLength(0)}this._clearCancellationData()},C.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},C.defer=C.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new C(m),resolve:L,reject:D}},l.notEnumerableProp(C,"_makeSelfResolutionError",n),t("./method")(C,m,y,r,w),t("./bind")(C,m,y,w),t("./cancel")(C,v,r,w),t("./direct_resolve")(C),t("./synchronous_inspection")(C),t("./join")(C,v,y,m,h,a),C.Promise=C,C.version="3.4.7",t("./map.js")(C,v,r,y,m,w),t("./call_get.js")(C),t("./using.js")(C,r,y,b,m,w),t("./timers.js")(C,m,w),t("./generators.js")(C,r,m,y,o,w),t("./nodeify.js")(C),t("./promisify.js")(C,m),t("./props.js")(C,v,y,r),t("./race.js")(C,m,y,r),t("./reduce.js")(C,v,r,y,m,w),t("./settle.js")(C,v,w),t("./some.js")(C,v,r),t("./filter.js")(C,m),t("./each.js")(C,m),t("./any.js")(C),l.toFastProperties(C),l.toFastProperties(C.prototype),A({a:1}),A({b:2}),A({c:3}),A(1),A((function(){})),A(void 0),A(!1),A(new C(m)),w.setBounds(c.firstLineError,l.lastLineError),C}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o){var a=t("./util");function s(t){var i=this._promise=new e(n);t instanceof e&&i._propagateFrom(t,3),i._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=i(this._values,this._promise);if(s instanceof e){var l=(s=s._target())._bitField;if(this._values=s,0==(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0==(33554432&l))return 0!=(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{}}}(o));else{var u=r("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(u,!1)}},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var r=this._promise,o=!1,a=null,s=0;s<n;++s){var l=i(t[s],r);a=l instanceof e?(l=l._target())._bitField:null,o?null!==a&&l.suppressUnhandledRejections():null!==a?0==(50397184&a)?(l._proxy(this,s),this._values[s]=l):o=0!=(33554432&a)?this._promiseFulfilled(l._value(),s):0!=(16777216&a)?this._promiseRejected(l._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(l,s)}o||r._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var i={},r=t("./util"),o=t("./nodeback"),a=r.withAppended,s=r.maybeWrapAsError,l=r.canEvaluate,u=t("./errors").TypeError,c={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(t){return r.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function f(t){return!h.test(t)}function p(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function m(t,e,n){var i=r.getDataPropertyOrDefault(t,e+n,c);return!!i&&p(i)}var _=l?void 0:function(t,l,u,c,h,d){var f=function(){return this}(),p=t;function m(){var r=l;l===i&&(r=this);var u=new e(n);u._captureStackTrace();var c="string"==typeof p&&this!==f?this[p]:t,h=o(u,d);try{c.apply(r,a(arguments,h))}catch(t){u._rejectCallback(s(t),!0,!0)}return u._isFateSealed()||u._setAsyncGuaranteed(),u}return"string"==typeof p&&(t=c),r.notEnumerableProp(m,"__isPromisified__",!0),m};function g(t,e,n,o,a){for(var s=new RegExp(e.replace(/([$])/,"\\$")+"$"),l=function(t,e,n,i){for(var o=r.inheritedDataKeys(t),a=[],s=0;s<o.length;++s){var l=o[s],c=t[l],h=i===d||d(l);"function"!=typeof c||p(c)||m(t,l,e)||!i(l,c,t,h)||a.push(l,c)}return function(t,e,n){for(var i=0;i<t.length;i+=2){var r=t[i];if(n.test(r))for(var o=r.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(a,e,n),a}(t,e,s,n),c=0,h=l.length;c<h;c+=2){var f=l[c],g=l[c+1],y=f+e;if(o===_)t[y]=_(f,i,f,g,e,a);else{var v=o(g,(function(){return _(f,i,f,g,e,a)}));r.notEnumerableProp(v,"__isPromisified__",!0),t[y]=v}}return r.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new u("expecting a function but got "+r.classString(t));if(p(t))return t;var n,o,a,s=(n=t,o=void 0===(e=Object(e)).context?i:e.context,a=!!e.multiArgs,_(n,o,void 0,n,null,a));return r.copyDescriptors(t,s,f),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,i=e.suffix;"string"!=typeof i&&(i="Async");var o=e.filter;"function"!=typeof o&&(o=d);var a=e.promisifier;if("function"!=typeof a&&(a=_),!r.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=r.inheritedDataKeys(t),l=0;l<s.length;++l){var c=t[s[l]];"constructor"!==s[l]&&r.isClass(c)&&(g(c.prototype,i,o,a,n),g(c,i,o,a,n))}return g(t,i,o,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o,a=t("./util"),s=a.isObject,l=t("./es5");"function"==typeof Map&&(o=Map);var u=function(){var t=0,e=0;function n(n,i){this[t]=n,this[t+e]=i,t++}return function(i){e=i.size,t=0;var r=new Array(2*i.size);return i.forEach(n,r),r}}();function c(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=u(t),n=!0;else{var i=l.keys(t),r=i.length;e=new Array(2*r);for(var a=0;a<r;++a){var s=i[a];e[a]=t[s],e[a+r]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function h(t){var n,o=i(t);return s(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new c(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(c,n),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,i=0;i<n;++i){var r=t[n+i],a=t[i];e.set(r,a)}return e}(this._values);else{n={};for(var i=this.length(),r=0,a=this.length();r<a;++r)n[this._values[r+i]]=this._values[r]}return this._resolve(n),!0}return!1},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return h(this)},e.props=function(t){return h(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype.push=function(t,e,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var r=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[r+0&o]=t,this[r+1&o]=e,this[r+2&o]=n,this._length=i},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,i,r){for(var o=0;o<r;++o)n[o+i]=t[o+0],t[o+0]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o=t("./util");function a(t,s){var l,u=i(t);if(u instanceof e)return(l=u).then((function(t){return a(t,l)}));if(null===(t=o.asArray(t)))return r("expecting an array or an iterable object but got "+o.classString(t));var c=new e(n);void 0!==s&&c._propagateFrom(s,3);for(var h=c._fulfill,d=c._reject,f=0,p=t.length;f<p;++f){var m=t[f];(void 0!==m||f in t)&&e.cast(m)._then(h,d,void 0,c,null)}return c}e.race=function(t){return a(t,void 0)},e.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=e._getDomain,l=t("./util"),u=l.tryCatch;function c(t,n,i,r){this.constructor$(t);var a=s();this._fn=null===a?n:l.domainBind(a,n),void 0!==i&&(i=e.resolve(i))._attachCancellationCallback(this),this._initialValue=i,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function d(t,e,n,r){return"function"!=typeof e?i("expecting a function but got "+l.classString(e)):new c(t,e,n,r).promise()}function f(t){this.accum=t,this.array._gotAccum(t);var n=r(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(t){var n,i=this.array,r=i._promise,o=u(i._fn);r._pushContext(),(n=void 0!==i._eachValues?o.call(r._boundValue(),t,this.index,this.length):o.call(r._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(i._currentCancellable=n);var s=r._popContext();return a.checkForgottenReturns(n,s,void 0!==i._eachValues?"Promise.each":"Promise.reduce",r),n}l.inherits(c,n),c.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},c.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},c.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},c.prototype._iterate=function(t){var n,i;this._values=t;var r=t.length;if(void 0!==this._initialValue?(n=this._initialValue,i=0):(n=e.resolve(t[0]),i=1),this._currentCancellable=n,!n.isRejected())for(;i<r;++i){var o={accum:null,value:t[i],index:i,length:r,array:this};n=n._then(f,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(h,h,void 0,n,this)},e.prototype.reduce=function(t,e){return d(this,t,e,null)},e.reduce=function(t,e,n,i){return d(t,e,n,i)}}},{"./util":36}],29:[function(t,e,i){"use strict";var r,o,a,s,l,u=t("./util"),c=u.getNativePromise();if(u.isNode&&"undefined"==typeof MutationObserver){var h=n.g.setImmediate,d=process.nextTick;r=u.isRecentNode?function(t){h.call(n.g,t)}:function(t){d.call(process,t)}}else if("function"==typeof c&&"function"==typeof c.resolve){var f=c.resolve();r=function(t){f.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(o=document.createElement("div"),a={attributes:!0},s=!1,l=document.createElement("div"),new MutationObserver((function(){o.classList.toggle("foo"),s=!1})).observe(l,a),function(t){var e=new MutationObserver((function(){e.disconnect(),t()}));e.observe(o,a),s||(s=!0,l.classList.toggle("foo"))});e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,n),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new r;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new r;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return i.deprecated(".settle()",".reflect()"),new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util"),o=t("./errors").RangeError,a=t("./errors").AggregateError,s=r.isArray,l={};function u(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(t,e){if((0|e)!==e||e<0)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new u(t),r=n.promise();return n.setHowMany(e),n.init(),r}r.inherits(u,n),u.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(t){this._howMany=t},u.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(t){this._values.push(t)},u.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return c(t,e)},e.prototype.some=function(t){return c(this,t)},e._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return r.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),i.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var i=t("./util"),r=i.errorObj,o=i.isObject,a={}.hasOwnProperty;return function(t,s){if(o(t)){if(t instanceof e)return t;var l=function(t){try{return function(t){return t.then}(t)}catch(t){return r.e=t,r}}(t);if(l===r){s&&s._pushContext();var u=e.reject(l.e);return s&&s._popContext(),u}if("function"==typeof l)return function(t){try{return a.call(t,"_promise0")}catch(t){return!1}}(t)?(u=new e(n),t._then(u._fulfill,u._reject,void 0,u,null),u):function(t,o,a){var s=new e(n),l=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var u=!0,c=i.tryCatch(o).call(t,(function(t){s&&(s._resolveCallback(t),s=null)}),(function(t){s&&(s._rejectCallback(t,u,!0),s=null)}));return u=!1,s&&c===r&&(s._rejectCallback(c.e,!0,!0),s=null),l}(t,l,s)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util"),o=e.TimeoutError;function a(t){this.handle=t}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,r){var o,l;return void 0!==r?(o=e.resolve(r)._then(s,null,null,t,void 0),i.cancellation()&&r instanceof e&&o._setOnCancel(r)):(o=new e(n),l=setTimeout((function(){o._fulfill()}),+t),i.cancellation()&&o._setOnCancel(new a(l)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function u(t){return clearTimeout(this.handle),t}function c(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return l(t,this)},e.prototype.timeout=function(t,e){var n,s;t=+t;var l=new a(setTimeout((function(){n.isPending()&&function(t,e,n){var i;i="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),r.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._reject(i),null!=n&&n.cancel()}(n,e,s)}),t));return i.cancellation()?(s=this.then(),(n=s._then(u,c,void 0,l,void 0))._setOnCancel(l)):n=this._then(u,c,void 0,l,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=t("./util"),l=t("./errors").TypeError,u=t("./util").inherits,c=s.errorObj,h=s.tryCatch,d={};function f(t){setTimeout((function(){throw t}),0)}function p(t,n){var r=0,a=t.length,s=new e(o);return function o(){if(r>=a)return s._fulfill();var l=function(t){var e=i(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[r++]);if(l instanceof e&&l._isDisposable()){try{l=i(l._getDisposer().tryDispose(n),t.promise)}catch(t){return f(t)}if(l instanceof e)return l._then(o,f,null,null,null)}o()}(),s}function m(t,e,n){this._data=t,this._promise=e,this._context=n}function _(t,e,n){this.constructor$(t,e,n)}function g(t){return m.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function y(t){this.length=t,this.promise=null,this[t-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},m.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=e!==d?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,i},m.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},u(_,m),_.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},y.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var i=this[n];i instanceof e&&i.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var r,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+s.classString(o));var l=!0;2===t&&Array.isArray(arguments[0])?(t=(r=arguments[0]).length,l=!1):(r=arguments,t--);for(var u=new y(t),d=0;d<t;++d){var f=r[d];if(m.isDisposer(f)){var _=f;(f=f.promise())._setDisposable(_)}else{var v=i(f);v instanceof e&&(f=v._then(g,null,null,{resources:u,index:d},void 0))}u[d]=f}var x=new Array(u.length);for(d=0;d<x.length;++d)x[d]=e.resolve(u[d]).reflect();var b=e.all(x).then((function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return c.e=n.error(),c;if(!n.isFulfilled())return void b.cancel();t[e]=n.value()}w._pushContext(),o=h(o);var i=l?o.apply(void 0,t):o(t),r=w._popContext();return a.checkForgottenReturns(i,r,"Promise.using",w),i})),w=b.lastly((function(){var t=new e.PromiseInspection(b);return p(u,t)}));return u.promise=w,w._setOnCancel(u),w},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new _(t,this,r());throw new l}}},{"./errors":12,"./util":36}],36:[function(t,e,i){"use strict";var r,o=t("./es5"),a="undefined"==typeof navigator,s={e:{}},l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:void 0!==this?this:null;function u(){try{var t=r;return r=null,t.apply(this,arguments)}catch(t){return s.e=t,s}}function c(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function h(t,e,n){if(c(t))return t;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,i),t}var d=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var i=[],r=Object.create(null);null!=t&&!e(t);){var a;try{a=n(t)}catch(t){return i}for(var s=0;s<a.length;++s){var l=a[s];if(!r[l]){r[l]=!0;var u=Object.getOwnPropertyDescriptor(t,l);null!=u&&null==u.get&&null==u.set&&i.push(l)}}t=o.getPrototypeOf(t)}return i}}var i={}.hasOwnProperty;return function(n){if(e(n))return[];var r=[];t:for(var o in n)if(i.call(n,o))r.push(o);else{for(var a=0;a<t.length;++a)if(i.call(t[a],o))continue t;r.push(o)}return r}}(),f=/this\s*\.\s*\S+\s*=/;var p=/^[a-z$_][a-z$_0-9]*$/i;function m(t){try{return t+""}catch(t){return"[no string representation]"}}function _(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function g(t){return _(t)&&o.propertyIsWritable(t,"stack")}var y="stack"in new Error?function(t){return g(t)?t:new Error(m(t))}:function(t){if(g(t))return t;try{throw new Error(m(t))}catch(t){return t}};function v(t){return{}.toString.call(t)}var x=function(t){return o.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var b="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],i=t[Symbol.iterator]();!(e=i.next()).done;)n.push(e.value);return n};x=function(t){return o.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?b(t):null}}var w="undefined"!=typeof process&&"[object process]"===v(process).toLowerCase(),M="undefined"!=typeof process&&void 0!==process.env;var T,k={isClass:function(t){try{if("function"==typeof t){var e=o.names(t.prototype),n=o.isES5&&e.length>1,i=e.length>0&&!(1===e.length&&"constructor"===e[0]),r=f.test(t+"")&&o.names(t).length>0;if(n||i||r)return!0}return!1}catch(t){return!1}},isIdentifier:function(t){return p.test(t)},inheritedDataKeys:d,getDataPropertyOrDefault:function(t,e,n){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:n:void 0},thrower:function(t){throw t},isArray:o.isArray,asArray:x,notEnumerableProp:h,isPrimitive:c,isObject:function(t){return"function"==typeof t||"object"==typeof t&&null!==t},isError:_,canEvaluate:a,errorObj:s,tryCatch:function(t){return r=t,u},inherits:function(t,e){var n={}.hasOwnProperty;function i(){for(var i in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,i)&&"$"!==i.charAt(i.length-1)&&(this[i+"$"]=e.prototype[i])}return i.prototype=e.prototype,t.prototype=new i,t.prototype},withAppended:function(t,e){var n,i=t.length,r=new Array(i+1);for(n=0;n<i;++n)r[n]=t[n];return r[n]=e,r},maybeWrapAsError:function(t){return c(t)?new Error(m(t)):t},toFastProperties:function(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t},filledRange:function(t,e,n){for(var i=new Array(t),r=0;r<t;++r)i[r]=e+r+n;return i},toString:m,canAttachTrace:g,ensureErrorObject:y,originatesFromRejection:function(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)},markAsOriginatingFromRejection:function(t){try{h(t,"isOperational",!0)}catch(t){}},classString:v,copyDescriptors:function(t,e,n){for(var i=o.names(t),r=0;r<i.length;++r){var a=i[r];if(n(a))try{o.defineProperty(e,a,o.getDescriptor(t,a))}catch(t){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:w,hasEnvVariables:M,env:function(t){return M?process.env[t]:void 0},global:l,getNativePromise:function(){if("function"==typeof Promise)try{var t=new Promise((function(){}));if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}},domainBind:function(t,e){return t.bind(e)}};k.isRecentNode=k.isNode&&(0===(T=process.versions.node.split(".").map(Number))[0]&&T[1]>10||T[0]>0),k.isNode&&k.toFastProperties(process);try{throw new Error}catch(t){k.lastLineError=t}e.exports=k},{"./es5":13}]},{},[4])(4)},t.exports=i(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)},4184:(t,e)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n))t.push(r.apply(null,n));else if("object"===o)for(var a in n)i.call(n,a)&&n[a]&&t.push(a)}}return t.join(" ")}t.exports?t.exports=r:void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},1667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},4566:function(t,e){!function(t){"use strict";var e=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},n=function(t){return 1===t.length&&(n=t,t=function(t,i){return e(n(t),i)}),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}};var n};var i=n(e),r=i.right,o=i.left,a=function(t){return null===t?NaN:+t},s=function(t,e){var n,i,r=t.length,o=0,s=0,l=-1,u=0;if(null==e)for(;++l<r;)isNaN(n=a(t[l]))||(s+=(i=n-o)*(n-(o+=i/++u)));else for(;++l<r;)isNaN(n=a(e(t[l],l,t)))||(s+=(i=n-o)*(n-(o+=i/++u)));if(u>1)return s/(u-1)},l=function(t,e){var n=s(t,e);return n?Math.sqrt(n):n},u=function(t,e){var n,i,r,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(i=t[o])&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=t[o])&&(n>i&&(n=i),r<i&&(r=i))}else{for(;++o<a;)if(null!=(i=e(t[o],o,t))&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=e(t[o],o,t))&&(n>i&&(n=i),r<i&&(r=i))}return[n,r]},c=Array.prototype,h=c.slice,d=c.map,f=function(t){return function(){return t}},p=function(t){return t},m=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o},_=Math.sqrt(50),g=Math.sqrt(10),y=Math.sqrt(2),v=function(t,e,n){var i=x(t,e,n);return m(Math.ceil(t/i)*i,Math.floor(e/i)*i+i/2,i)};function x(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=_?r*=10:o>=g?r*=5:o>=y&&(r*=2),e<t?-r:r}var b=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},w=function(t,e,n){if(null==n&&(n=a),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(r-o)}},M=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--a]=i[e];return n},T=function(t,e){var n,i,r=-1,o=t.length;if(null==e){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=e(t[r],r,t))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e(t[r],r,t))&&n>i&&(n=i)}return n},k=function(t){if(!(r=t.length))return[];for(var e=-1,n=T(t,S),i=new Array(n);++e<n;)for(var r,o=-1,a=i[e]=new Array(r);++o<r;)a[o]=t[o][e];return i};function S(t){return t.length}var E="$";function C(){}function L(t,e){var n=new C;if(t instanceof C)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,r=-1,o=t.length;if(null==e)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e(i=t[r],r,t),i)}else if(t)for(var a in t)n.set(a,t[a]);return n}C.prototype=L.prototype={constructor:C,has:function(t){return E+t in this},get:function(t){return this[E+t]},set:function(t,e){return this[E+t]=e,this},remove:function(t){var e=E+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===E&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===E&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===E&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===E&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===E&&++t;return t},empty:function(){for(var t in this)if(t[0]===E)return!1;return!0},each:function(t){for(var e in this)e[0]===E&&t(this[e],e.slice(1),this)}};function D(){return{}}function A(t,e,n){t[e]=n}function P(){return L()}function I(t,e,n){t.set(e,n)}function z(){}var F=L.prototype;function R(t,e){var n=new z;if(t instanceof z)t.each((function(t){n.add(t)}));else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}z.prototype=R.prototype={constructor:z,has:F.has,add:function(t){return this[E+(t+="")]=t,this},remove:F.remove,clear:F.clear,values:F.keys,size:F.size,empty:F.empty,each:F.each};var O=function(t,e){var n,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var r;if(null!=n)r=n,n=null;else do{n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r}while(!i||i>1);return t+e*r*Math.sqrt(-2*Math.log(i)/i)}},Y=function(t){return function(){for(var e=0,n=0;n<t;++n)e+=Math.random();return e}};function N(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function B(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var j=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),U=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),$=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),H=Math.PI,V=H/2;function q(t){return(1-Math.cos(H*t))/2}function W(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function G(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Z=4/11,X=7.5625;function K(t){return(t=+t)<Z?X*t*t:t<.7272727272727273?X*(t-=.5454545454545454)*t+.75:t<.9090909090909091?X*(t-=.8181818181818182)*t+.9375:X*(t-=.9545454545454546)*t+.984375}var J=1.70158,Q=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(J),tt=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(J),et=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(J),nt=2*Math.PI,it=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=nt);function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*nt)},r.period=function(n){return t(e,n)},r}(1,.3),rt=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=nt);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*nt)},r.period=function(n){return t(e,n)},r}(1,.3),ot=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=nt);function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*nt)},r.period=function(n){return t(e,n)},r}(1,.3),at=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function st(t,e){return t[0]-e[0]||t[1]-e[1]}function lt(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;++r){for(;i>1&&at(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}var ut=Math.PI,ct=2*ut,ht=1e-6,dt=ct-ht;function ft(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function pt(){return new ft}ft.prototype=pt.prototype={constructor:ft,moveTo:function(t,e){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(t,e){this._.push("L",this._x1=+t,",",this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._.push("Q",+t,",",+e,",",this._x1=+n,",",this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._.push("C",+t,",",+e,",",+n,",",+i,",",this._x1=+r,",",this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,s=n-t,l=i-e,u=o-t,c=a-e,h=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._.push("M",this._x1=t,",",this._y1=e);else if(h>ht)if(Math.abs(c*s-l*u)>ht&&r){var d=n-o,f=i-a,p=s*s+l*l,m=d*d+f*f,_=Math.sqrt(p),g=Math.sqrt(h),y=r*Math.tan((ut-Math.acos((p+h-m)/(2*_*g)))/2),v=y/g,x=y/_;Math.abs(v-1)>ht&&this._.push("L",t+v*u,",",e+v*c),this._.push("A",r,",",r,",0,0,",+(c*d>u*f),",",this._x1=t+x*s,",",this._y1=e+x*l)}else this._.push("L",this._x1=t,",",this._y1=e)},arc:function(t,e,n,i,r,o){t=+t,e=+e;var a=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+a,u=e+s,c=1^o,h=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._.push("M",l,",",u):(Math.abs(this._x1-l)>ht||Math.abs(this._y1-u)>ht)&&this._.push("L",l,",",u),n&&(h>dt?this._.push("A",n,",",n,",0,1,",c,",",t-a,",",e-s,"A",n,",",n,",0,1,",c,",",this._x1=l,",",this._y1=u):(h<0&&(h=h%ct+ct),this._.push("A",n,",",n,",0,",+(h>=ut),",",c,",",this._x1=t+n*Math.cos(r),",",this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e,"h",+n,"v",+i,"h",-n,"Z")},toString:function(){return this._.join("")}};function mt(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,a,s,l,u,c,h,d,f=t._root,p={data:i},m=t._x0,_=t._y0,g=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((u=e>=(o=(m+g)/2))?m=o:g=o,(c=n>=(a=(_+y)/2))?_=a:y=a,r=f,!(f=f[h=c<<1|u]))return r[h]=p,t;if(s=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===s&&n===l)return p.next=f,r?r[h]=p:t._root=p,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(u=e>=(o=(m+g)/2))?m=o:g=o,(c=n>=(a=(_+y)/2))?_=a:y=a}while((h=c<<1|u)==(d=(l>=a)<<1|s>=o));return r[d]=f,r[h]=p,t}var _t=function(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r};function gt(t){return t[0]}function yt(t){return t[1]}function vt(t,e,n){var i=new xt(null==e?gt:e,null==n?yt:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function xt(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function bt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var wt=vt.prototype=xt.prototype;wt.copy=function(){var t,e,n=new xt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=bt(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=bt(e));return n},wt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return mt(this.cover(e,n),e,n,t)},wt.addAll=function(t){var e,n,i,r,o=t.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(a[n]=i,s[n]=r,i<l&&(l=i),i>c&&(c=i),r<u&&(u=r),r>h&&(h=r));for(c<l&&(l=this._x0,c=this._x1),h<u&&(u=this._y0,h=this._y1),this.cover(l,u).cover(c,h),n=0;n<o;++n)mt(this,a[n],s[n],t[n]);return this},wt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{if(!(n>t||t>r||i>e||e>o))return this;var a,s,l=r-n,u=this._root;switch(s=(e<(i+o)/2)<<1|t<(n+r)/2){case 0:do{(a=new Array(4))[s]=u,u=a}while(o=i+(l*=2),t>(r=n+l)||e>o);break;case 1:do{(a=new Array(4))[s]=u,u=a}while(o=i+(l*=2),(n=r-l)>t||e>o);break;case 2:do{(a=new Array(4))[s]=u,u=a}while(i=o-(l*=2),t>(r=n+l)||i>e);break;case 3:do{(a=new Array(4))[s]=u,u=a}while(i=o-(l*=2),(n=r-l)>t||i>e)}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},wt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},wt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},wt.find=function(t,e,n){var i,r,o,a,s,l,u,c=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new _t(m,c,h,d,f)),null==n?n=1/0:(c=t-n,h=e-n,d=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(r=l.x0)>d||(o=l.y0)>f||(a=l.x1)<c||(s=l.y1)<h))if(m.length){var _=(r+a)/2,g=(o+s)/2;p.push(new _t(m[3],_,g,a,s),new _t(m[2],r,g,_,s),new _t(m[1],_,o,a,g),new _t(m[0],r,o,_,g)),(u=(e>=g)<<1|t>=_)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=t-+this._x.call(null,m.data),v=e-+this._y.call(null,m.data),x=y*y+v*v;if(x<n){var b=Math.sqrt(n=x);c=t-b,h=e-b,d=t+b,f=e+b,i=m.data}}return i},wt.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,r,o,a,s,l,u,c,h,d,f=this._root,p=this._x0,m=this._y0,_=this._x1,g=this._y1;if(!f)return this;if(f.length)for(;;){if((u=o>=(s=(p+_)/2))?p=s:_=s,(c=a>=(l=(m+g)/2))?m=l:g=l,e=f,!(f=f[h=c<<1|u]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(i=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=r,this)},wt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},wt.root=function(){return this._root},wt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},wt.visit=function(t){var e,n,i,r,o,a,s=[],l=this._root;for(l&&s.push(new _t(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,a=e.y1)&&l.length){var u=(i+o)/2,c=(r+a)/2;(n=l[3])&&s.push(new _t(n,u,c,o,a)),(n=l[2])&&s.push(new _t(n,i,c,u,a)),(n=l[1])&&s.push(new _t(n,u,r,o,c)),(n=l[0])&&s.push(new _t(n,i,r,u,c))}return this},wt.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new _t(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.y0,l=e.x1,u=e.y1,c=(a+l)/2,h=(s+u)/2;(o=r[0])&&n.push(new _t(o,a,s,c,h)),(o=r[1])&&n.push(new _t(o,c,s,l,h)),(o=r[2])&&n.push(new _t(o,a,h,c,u)),(o=r[3])&&n.push(new _t(o,c,h,l,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},wt.x=function(t){return arguments.length?(this._x=t,this):this._x},wt.y=function(t){return arguments.length?(this._y=t,this):this._y};var Mt=[].slice,Tt={};function kt(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function St(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,r=n[i];n[i]=Et(t,e),--t._waiting,++t._active,n=r.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Tt)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])Ct(t,e);else if(!t._data)throw e}}function Et(t,e){return function(n,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?Ct(t,n):(t._data[e]=i,t._waiting?St(t):Lt(t))))}}function Ct(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,Lt(t)}function Lt(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function Dt(t){return new kt(arguments.length?+t:1/0)}kt.prototype=Dt.prototype={constructor:kt,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var e=Mt.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),St(this),this},abort:function(){return null==this._error&&Ct(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},Lt(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,Lt(this),this}};var At=function(t){return function(){return t}},Pt=1e-12,It=Math.PI,zt=It/2,Ft=2*It;function Rt(t){return t.innerRadius}function Ot(t){return t.outerRadius}function Yt(t){return t.startAngle}function Nt(t){return t.endAngle}function Bt(t){return t&&t.padAngle}function jt(t){return t>=1?zt:t<=-1?-zt:Math.asin(t)}function Ut(t,e,n,i,r,o,a,s){var l=n-t,u=i-e,c=a-r,h=s-o,d=(c*(e-o)-h*(t-r))/(h*l-c*u);return[t+d*l,e+d*u]}function $t(t,e,n,i,r,o,a){var s=t-n,l=e-i,u=(a?o:-o)/Math.sqrt(s*s+l*l),c=u*l,h=-u*s,d=t+c,f=e+h,p=n+c,m=i+h,_=(d+p)/2,g=(f+m)/2,y=p-d,v=m-f,x=y*y+v*v,b=r-o,w=d*m-p*f,M=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*x-w*w)),T=(w*v-y*M)/x,k=(-w*y-v*M)/x,S=(w*v+y*M)/x,E=(-w*y+v*M)/x,C=T-_,L=k-g,D=S-_,A=E-g;return C*C+L*L>D*D+A*A&&(T=S,k=E),{cx:T,cy:k,x01:-c,y01:-h,x11:T*(r/b-1),y11:k*(r/b-1)}}function Ht(t){this._context=t}Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Vt=function(t){return new Ht(t)};function qt(t){return t[0]}function Wt(t){return t[1]}var Gt=function(){var t=qt,e=Wt,n=At(!0),i=null,r=Vt,o=null;function a(a){var s,l,u,c=a.length,h=!1;for(null==i&&(o=r(u=pt())),s=0;s<=c;++s)!(s<c&&n(l=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,s,a),+e(l,s,a));if(u)return o=null,u+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:At(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:At(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:At(!!t),a):n},a.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),a):r},a.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),a):i},a},Zt=function(){var t=qt,e=null,n=At(0),i=Wt,r=At(!0),o=null,a=Vt,s=null;function l(l){var u,c,h,d,f,p=l.length,m=!1,_=new Array(p),g=new Array(p);for(null==o&&(s=a(f=pt())),u=0;u<=p;++u){if(!(u<p&&r(d=l[u],u,l))===m)if(m=!m)c=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=c;--h)s.point(_[h],g[h]);s.lineEnd(),s.areaEnd()}m&&(_[u]=+t(d,u,l),g[u]=+n(d,u,l),s.point(e?+e(d,u,l):_[u],i?+i(d,u,l):g[u]))}if(f)return s=null,f+""||null}function u(){return Gt().defined(r).curve(a).context(o)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:At(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:At(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:At(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:At(+t),i=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:At(+t),l):n},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:At(+t),l):i},l.lineX0=l.lineY0=function(){return u().x(t).y(n)},l.lineY1=function(){return u().x(t).y(i)},l.lineX1=function(){return u().x(e).y(n)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:At(!!t),l):r},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l},Xt=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Kt=function(t){return t},Jt=te(Vt);function Qt(t){this._curve=t}function te(t){function e(e){return new Qt(t(e))}return e._curve=t,e}function ee(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(te(t)):e()._curve},t}Qt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var ne={draw:function(t,e){var n=Math.sqrt(e/It);t.moveTo(n,0),t.arc(0,0,n,0,Ft)}},ie={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},re=Math.sqrt(1/3),oe=2*re,ae={draw:function(t,e){var n=Math.sqrt(e/oe),i=n*re;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},se=Math.sin(It/10)/Math.sin(7*It/10),le=Math.sin(Ft/10)*se,ue=-Math.cos(Ft/10)*se,ce={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=le*n,r=ue*n;t.moveTo(0,-n),t.lineTo(i,r);for(var o=1;o<5;++o){var a=Ft*o/5,s=Math.cos(a),l=Math.sin(a);t.lineTo(l*n,-s*n),t.lineTo(s*i-l*r,l*i+s*r)}t.closePath()}},he={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},de=Math.sqrt(3),fe={draw:function(t,e){var n=-Math.sqrt(e/(3*de));t.moveTo(0,2*n),t.lineTo(-de*n,-n),t.lineTo(de*n,-n),t.closePath()}},pe=-.5,me=Math.sqrt(3)/2,_e=1/Math.sqrt(12),ge=3*(_e/2+1),ye={draw:function(t,e){var n=Math.sqrt(e/ge),i=n/2,r=n*_e,o=i,a=n*_e+n,s=-o,l=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(pe*i-me*r,me*i+pe*r),t.lineTo(pe*o-me*a,me*o+pe*a),t.lineTo(pe*s-me*l,me*s+pe*l),t.lineTo(pe*i+me*r,pe*r-me*i),t.lineTo(pe*o+me*a,pe*a-me*o),t.lineTo(pe*s+me*l,pe*l-me*s),t.closePath()}},ve=[ne,ie,ae,he,ce,fe,ye],xe=function(){};function be(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function we(t){this._context=t}we.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:be(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:be(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Me(t){this._context=t}Me.prototype={areaStart:xe,areaEnd:xe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:be(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Te(t){this._context=t}Te.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:be(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ke(t,e){this._basis=new we(t),this._beta=e}ke.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],a=t[n]-r,s=e[n]-o,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*a),this._beta*e[l]+(1-this._beta)*(o+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Se=function t(e){function n(t){return 1===e?new we(t):new ke(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Ee(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ce(t,e){this._context=t,this._k=(1-e)/6}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ee(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ee(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Le=function t(e){function n(t){return new Ce(t,e)}return n.tension=function(e){return t(+e)},n}(0);function De(t,e){this._context=t,this._k=(1-e)/6}De.prototype={areaStart:xe,areaEnd:xe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ee(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ae=function t(e){function n(t){return new De(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Pe(t,e){this._context=t,this._k=(1-e)/6}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ee(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ie=function t(e){function n(t){return new Pe(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ze(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Pt){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Pt){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/c,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function Fe(t,e){this._context=t,this._alpha=e}Fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ze(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Re=function t(e){function n(t){return e?new Fe(t,e):new Ce(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Oe(t,e){this._context=t,this._alpha=e}Oe.prototype={areaStart:xe,areaEnd:xe,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ze(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ye=function t(e){function n(t){return e?new Oe(t,e):new De(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ne(t,e){this._context=t,this._alpha=e}Ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ze(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Be=function t(e){function n(t){return e?new Ne(t,e):new Pe(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function je(t){this._context=t}je.prototype={areaStart:xe,areaEnd:xe,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Ue(t){return t<0?-1:1}function $e(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(Ue(o)+Ue(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function He(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ve(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,s=(o-i)/3;t._context.bezierCurveTo(i+s,r+s*e,o-s,a-s*n,o,a)}function qe(t){this._context=t}function We(t){this._context=new Ge(t)}function Ge(t){this._context=t}function Ze(t){this._context=t}function Xe(t){var e,n,i=t.length-1,r=new Array(i),o=new Array(i),a=new Array(i);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,a[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(r[i-1]=a[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ve(this,this._t0,He(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ve(this,He(this,n=$e(this,t,e)),n);break;default:Ve(this,this._t0,n=$e(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(We.prototype=Object.create(qe.prototype)).point=function(t,e){qe.prototype.point.call(this,e,t)},Ge.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}},Ze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Xe(t),r=Xe(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Ke(t,e){this._context=t,this._t=e}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Je=Array.prototype.slice,Qe=function(t,e){if((i=t.length)>1)for(var n,i,r=1,o=t[e[0]],a=o.length;r<i;++r){n=o,o=t[e[r]];for(var s=0;s<a;++s)o[s][1]+=o[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}},tn=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function en(t,e){return t[e]}var nn=function(t){var e=t.map(rn);return tn(t).sort((function(t,n){return e[t]-e[n]}))};function rn(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}var on=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function an(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function sn(){}var ln=.7,un=1/ln,cn=/^#([0-9a-f]{3})$/,hn=/^#([0-9a-f]{6})$/,dn=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,fn=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,pn=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,mn=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,_n=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,gn=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,yn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vn(t){var e;return t=(t+"").trim().toLowerCase(),(e=cn.exec(t))?new Tn((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=hn.exec(t))?xn(parseInt(e[1],16)):(e=dn.exec(t))?new Tn(e[1],e[2],e[3],1):(e=fn.exec(t))?new Tn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=pn.exec(t))?bn(e[1],e[2],e[3],e[4]):(e=mn.exec(t))?bn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=_n.exec(t))?kn(e[1],e[2]/100,e[3]/100,1):(e=gn.exec(t))?kn(e[1],e[2]/100,e[3]/100,e[4]):yn.hasOwnProperty(t)?xn(yn[t]):"transparent"===t?new Tn(NaN,NaN,NaN,0):null}function xn(t){return new Tn(t>>16&255,t>>8&255,255&t,1)}function bn(t,e,n,i){return i<=0&&(t=e=n=NaN),new Tn(t,e,n,i)}function wn(t){return t instanceof sn||(t=vn(t)),t?new Tn((t=t.rgb()).r,t.g,t.b,t.opacity):new Tn}function Mn(t,e,n,i){return 1===arguments.length?wn(t):new Tn(t,e,n,null==i?1:i)}function Tn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function kn(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Cn(t,e,n,i)}function Sn(t){if(t instanceof Cn)return new Cn(t.h,t.s,t.l,t.opacity);if(t instanceof sn||(t=vn(t)),!t)return new Cn;if(t instanceof Cn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Cn(a,s,l,t.opacity)}function En(t,e,n,i){return 1===arguments.length?Sn(t):new Cn(t,e,n,null==i?1:i)}function Cn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Ln(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}on(sn,vn,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),on(Tn,Mn,an(sn,{brighter:function(t){return t=null==t?un:Math.pow(un,t),new Tn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?ln:Math.pow(ln,t),new Tn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),on(Cn,En,an(sn,{brighter:function(t){return t=null==t?un:Math.pow(un,t),new Cn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ln:Math.pow(ln,t),new Cn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Tn(Ln(t>=240?t-240:t+120,r,i),Ln(t,r,i),Ln(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Dn=Math.PI/180,An=180/Math.PI,Pn=.95047,In=1.08883,zn=4/29,Fn=6/29,Rn=3*Fn*Fn;function On(t){if(t instanceof Nn)return new Nn(t.l,t.a,t.b,t.opacity);if(t instanceof qn){var e=t.h*Dn;return new Nn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Tn||(t=wn(t));var n=$n(t.r),i=$n(t.g),r=$n(t.b),o=Bn((.4124564*n+.3575761*i+.1804375*r)/Pn),a=Bn((.2126729*n+.7151522*i+.072175*r)/1);return new Nn(116*a-16,500*(o-a),200*(a-Bn((.0193339*n+.119192*i+.9503041*r)/In)),t.opacity)}function Yn(t,e,n,i){return 1===arguments.length?On(t):new Nn(t,e,n,null==i?1:i)}function Nn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Bn(t){return t>.008856451679035631?Math.pow(t,1/3):t/Rn+zn}function jn(t){return t>Fn?t*t*t:Rn*(t-zn)}function Un(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function $n(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Hn(t){if(t instanceof qn)return new qn(t.h,t.c,t.l,t.opacity);t instanceof Nn||(t=On(t));var e=Math.atan2(t.b,t.a)*An;return new qn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Vn(t,e,n,i){return 1===arguments.length?Hn(t):new qn(t,e,n,null==i?1:i)}function qn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}on(Nn,Yn,an(sn,{brighter:function(t){return new Nn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Nn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=1*jn(t),new Tn(Un(3.2404542*(e=Pn*jn(e))-1.5371385*t-.4985314*(n=In*jn(n))),Un(-.969266*e+1.8760108*t+.041556*n),Un(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),on(qn,Vn,an(sn,{brighter:function(t){return new qn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new qn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return On(this).rgb()}}));var Wn=-.14861,Gn=1.78277,Zn=-.29227,Xn=-.90649,Kn=1.97294,Jn=Kn*Xn,Qn=Kn*Gn,ti=Gn*Zn-Xn*Wn;function ei(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);t instanceof Tn||(t=wn(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(ti*i+Jn*e-Qn*n)/(ti+Jn-Qn),o=i-r,a=(Kn*(n-r)-Zn*o)/Xn,s=Math.sqrt(a*a+o*o)/(Kn*r*(1-r)),l=s?Math.atan2(a,o)*An-120:NaN;return new ii(l<0?l+360:l,s,r,t.opacity)}function ni(t,e,n,i){return 1===arguments.length?ei(t):new ii(t,e,n,null==i?1:i)}function ii(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ri(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}on(ii,ni,an(sn,{brighter:function(t){return t=null==t?un:Math.pow(un,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ln:Math.pow(ln,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Dn,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Tn(255*(e+n*(Wn*i+Gn*r)),255*(e+n*(Zn*i+Xn*r)),255*(e+n*(Kn*i)),this.opacity)}}));var oi=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,s=i<e-1?t[i+2]:2*o-r;return ri((n-i/e)*e,a,r,o,s)}},ai=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],a=t[(i+1)%e],s=t[(i+2)%e];return ri((n-i/e)*e,r,o,a,s)}},si=function(t){return function(){return t}};function li(t,e){return function(n){return t+n*e}}function ui(t,e){var n=e-t;return n?li(t,n>180||n<-180?n-360*Math.round(n/360):n):si(isNaN(t)?e:t)}function ci(t){return 1==(t=+t)?hi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):si(isNaN(e)?n:e)}}function hi(t,e){var n=e-t;return n?li(t,n):si(isNaN(t)?e:t)}var di=function t(e){var n=ci(e);function i(t,e){var i=n((t=Mn(t)).r,(e=Mn(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),a=n(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function fi(t){return function(e){var n,i,r=e.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=Mn(e[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=t(o),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=o(t),i.g=a(t),i.b=s(t),i+""}}}var pi=fi(oi),mi=fi(ai),_i=function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(i),a=new Array(i);for(n=0;n<r;++n)o[n]=Ei(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}},gi=function(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}},yi=function(t,e){return e-=t=+t,function(n){return t+e*n}},vi=function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Ei(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bi=new RegExp(xi.source,"g");var wi,Mi,Ti,ki,Si=function(t,e){var n,i,r,o=xi.lastIndex=bi.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=xi.exec(t))&&(i=bi.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:yi(n,i)})),o=bi.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})},Ei=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?si(e):("number"===i?yi:"string"===i?(n=vn(e))?(e=n,di):Si:e instanceof vn?di:e instanceof Date?gi:Array.isArray(e)?_i:isNaN(e)?vi:yi)(t,e)},Ci=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},Li=180/Math.PI,Di={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ai=function(t,e,n,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Li,skewX:Math.atan(l)*Li,scaleX:a,scaleY:s}};function Pi(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,i,r,o,a,s){if(t!==r||i!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:yi(t,r)},{i:l-2,x:yi(i,o)})}else(r||o)&&a.push("translate("+r+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:yi(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:yi(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,a.skewX,s,l),function(t,e,n,i,o,a){if(t!==n||e!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:yi(t,n)},{i:s-2,x:yi(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Ii=Pi((function(t){return"none"===t?Di:(wi||(wi=document.createElement("DIV"),Mi=document.documentElement,Ti=document.defaultView),wi.style.transform=t,t=Ti.getComputedStyle(Mi.appendChild(wi),null).getPropertyValue("transform"),Mi.removeChild(wi),t=t.slice(7,-1).split(","),Ai(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),zi=Pi((function(t){return null==t?Di:(ki||(ki=document.createElementNS("http://www.w3.org/2000/svg","g")),ki.setAttribute("transform",t),(t=ki.transform.baseVal.consolidate())?(t=t.matrix,Ai(t.a,t.b,t.c,t.d,t.e,t.f)):Di)}),", ",")",")"),Fi=Math.SQRT2;function Ri(t){return((t=Math.exp(t))+1/t)/2}var Oi=function(t,e){var n,i,r=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-r,h=l-o,d=c*c+h*h;if(d<1e-12)i=Math.log(u/a)/Fi,n=function(t){return[r+t*c,o+t*h,a*Math.exp(Fi*t*i)]};else{var f=Math.sqrt(d),p=(u*u-a*a+4*d)/(2*a*2*f),m=(u*u-a*a-4*d)/(2*u*2*f),_=Math.log(Math.sqrt(p*p+1)-p),g=Math.log(Math.sqrt(m*m+1)-m);i=(g-_)/Fi,n=function(t){var e=t*i,n=Ri(_),s=a/(2*f)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Fi*e+_)-function(t){return((t=Math.exp(t))-1/t)/2}(_));return[r+s*c,o+s*h,a*n/Ri(Fi*e+_)]}}return n.duration=1e3*i,n};function Yi(t){return function(e,n){var i=t((e=En(e)).h,(n=En(n)).h),r=hi(e.s,n.s),o=hi(e.l,n.l),a=hi(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=o(t),e.opacity=a(t),e+""}}}var Ni=Yi(ui),Bi=Yi(hi);function ji(t){return function(e,n){var i=t((e=Vn(e)).h,(n=Vn(n)).h),r=hi(e.c,n.c),o=hi(e.l,n.l),a=hi(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=o(t),e.opacity=a(t),e+""}}}var Ui=ji(ui),$i=ji(hi);function Hi(t){return function e(n){function i(e,i){var r=t((e=ni(e)).h,(i=ni(i)).h),o=hi(e.s,i.s),a=hi(e.l,i.l),s=hi(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}var Vi=Hi(ui),qi=Hi(hi),Wi={value:function(){}};function Gi(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new Zi(i)}function Zi(t){this._=t}function Xi(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Ki(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function Ji(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Wi,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}function Qi(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}")}Zi.prototype=Gi.prototype={constructor:Zi,on:function(t,e){var n,i=this._,r=Xi(t+"",i),o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=Ji(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Ji(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=r[o]).type)&&(n=Ki(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Zi(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var tr=function(t){var e=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function i(t,e){var i,r,o={},a={},s=[],l=t.length,u=0,c=0;function h(){if(u>=l)return a;if(r)return r=!1,o;var e,i=u;if(34===t.charCodeAt(i)){for(var s=i;s++<l;)if(34===t.charCodeAt(s)){if(34!==t.charCodeAt(s+1))break;++s}return u=s+2,13===(e=t.charCodeAt(s+1))?(r=!0,10===t.charCodeAt(s+2)&&++u):10===e&&(r=!0),t.slice(i+1,s).replace(/""/g,'"')}for(;u<l;){var c=1;if(10===(e=t.charCodeAt(u++)))r=!0;else if(13===e)r=!0,10===t.charCodeAt(u)&&(++u,++c);else if(e!==n)continue;return t.slice(i,u-c)}return t.slice(i)}for(;(i=h())!==a;){for(var d=[];i!==o&&i!==a;)d.push(i),i=h();e&&null==(d=e(d,c++))||s.push(d)}return s}function r(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}return{parse:function(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=Qi(t);return function(i,r){return e(n(i),r,t)}}(t,e):Qi(t)}));return o.columns=r,o},parseRows:i,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}(e)),[n.map(o).join(t)].concat(e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))).join("\n")},formatRows:function(t){return t.map(r).join("\n")}}},er=tr(","),nr=er.parse,ir=er.parseRows,rr=er.format,or=er.formatRows,ar=tr("\t"),sr=ar.parse,lr=ar.parseRows,ur=ar.format,cr=ar.formatRows,hr=function(t,e){var n,i,r,o,a=Gi("beforesend","progress","load","error"),s=L(),l=new XMLHttpRequest,u=null,c=null,h=0;function d(t){var e,i=l.status;if(!i&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||i>=200&&i<300||304===i){if(r)try{e=r.call(n,l)}catch(t){return void a.call("error",n,t)}else e=l;a.call("load",n,e)}else a.call("error",n,t)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=d:l.onreadystatechange=function(t){l.readyState>3&&d(t)},l.onprogress=function(t){a.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),n)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",n):i},responseType:function(t){return arguments.length?(o=t,n):o},timeout:function(t){return arguments.length?(h=+t,n):h},user:function(t){return arguments.length<1?u:(u=null==t?null:t+"",n)},password:function(t){return arguments.length<1?c:(c=null==t?null:t+"",n)},response:function(t){return r=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,r,d){return l.open(e,t,!0,u,c),null==i||s.has("accept")||s.set("accept",i+",*/*"),l.setRequestHeader&&s.each((function(t,e){l.setRequestHeader(e,t)})),null!=i&&l.overrideMimeType&&l.overrideMimeType(i),null!=o&&(l.responseType=o),h>0&&(l.timeout=h),null==d&&"function"==typeof r&&(d=r,r=null),null!=d&&1===d.length&&(d=function(t){return function(e,n){t(null==e?n:null)}}(d)),null!=d&&n.on("error",d).on("load",(function(t){d(null,t)})),a.call("beforesend",n,l),l.send(null==r?null:r),n},abort:function(){return l.abort(),n},on:function(){var t=a.on.apply(a,arguments);return t===a?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n};var dr=function(t,e){return function(n,i){var r=hr(n).mimeType(t).response(e);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return r.get(i)}return r}},fr=dr("text/html",(function(t){return document.createRange().createContextualFragment(t.responseText)})),pr=dr("application/json",(function(t){return JSON.parse(t.responseText)})),mr=dr("text/plain",(function(t){return t.responseText})),_r=dr("application/xml",(function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e})),gr=function(t,e){return function(n,i,r){arguments.length<3&&(r=i,i=null);var o=hr(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(yr(e,i=t)):i},o.row(i),r?o.get(r):o}};function yr(t,e){return function(n){return t(n.responseText,e)}}var vr,xr,br=gr("text/csv",nr),wr=gr("text/tab-separated-values",sr),Mr=0,Tr=0,kr=0,Sr=0,Er=0,Cr=0,Lr="object"==typeof performance&&performance.now?performance:Date,Dr="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};function Ar(){return Er||(Dr(Pr),Er=Lr.now()+Cr)}function Pr(){Er=0}function Ir(){this._call=this._time=this._next=null}function zr(t,e,n){var i=new Ir;return i.restart(t,e,n),i}function Fr(){Ar(),++Mr;for(var t,e=vr;e;)(t=Er-e._time)>=0&&e._call.call(null,t),e=e._next;--Mr}function Rr(){Er=(Sr=Lr.now())+Cr,Mr=Tr=0;try{Fr()}finally{Mr=0,function(){for(var t,e,n=vr,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:vr=e);xr=t,Yr(i)}(),Er=0}}function Or(){var t=Lr.now(),e=t-Sr;e>1e3&&(Cr-=e,Sr=t)}function Yr(t){if(!Mr){Tr&&(Tr=clearTimeout(Tr));var e=t-Er;e>24?(t<1/0&&(Tr=setTimeout(Rr,e)),kr&&(kr=clearInterval(kr))):(kr||(kr=setInterval(Or,1e3)),Mr=1,Dr(Rr))}}Ir.prototype=zr.prototype={constructor:Ir,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ar():+n)+(null==e?0:+e),this._next||xr===this||(xr?xr._next=this:vr=this,xr=this),this._call=t,this._time=n,Yr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yr())}};var Nr=function(t,e,n){var i=new Ir;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i},Br=new Date,jr=new Date;function Ur(t,e,n,i){function r(e){return t(e=new Date(+e)),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var a=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return a;do{a.push(new Date(+n))}while(e(n,o),t(n),n<i);return a},r.filter=function(n){return Ur((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return Br.setTime(+e),jr.setTime(+i),t(Br),t(jr),Math.floor(n(Br,jr))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var $r=Ur((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));$r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Ur((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):$r:null};var Hr=$r.range,Vr=1e3,qr=6e4,Wr=36e5,Gr=864e5,Zr=6048e5,Xr=Ur((function(t){t.setTime(Math.floor(t/Vr)*Vr)}),(function(t,e){t.setTime(+t+e*Vr)}),(function(t,e){return(e-t)/Vr}),(function(t){return t.getUTCSeconds()})),Kr=Xr.range,Jr=Ur((function(t){t.setTime(Math.floor(t/qr)*qr)}),(function(t,e){t.setTime(+t+e*qr)}),(function(t,e){return(e-t)/qr}),(function(t){return t.getMinutes()})),Qr=Jr.range,to=Ur((function(t){var e=t.getTimezoneOffset()*qr%Wr;e<0&&(e+=Wr),t.setTime(Math.floor((+t-e)/Wr)*Wr+e)}),(function(t,e){t.setTime(+t+e*Wr)}),(function(t,e){return(e-t)/Wr}),(function(t){return t.getHours()})),eo=to.range,no=Ur((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qr)/Gr}),(function(t){return t.getDate()-1})),io=no.range;function ro(t){return Ur((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*qr)/Zr}))}var oo=ro(0),ao=ro(1),so=ro(2),lo=ro(3),uo=ro(4),co=ro(5),ho=ro(6),fo=oo.range,po=ao.range,mo=so.range,_o=lo.range,go=uo.range,yo=co.range,vo=ho.range,xo=Ur((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),bo=xo.range,wo=Ur((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));wo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ur((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Mo=wo.range,To=Ur((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*qr)}),(function(t,e){return(e-t)/qr}),(function(t){return t.getUTCMinutes()})),ko=To.range,So=Ur((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*Wr)}),(function(t,e){return(e-t)/Wr}),(function(t){return t.getUTCHours()})),Eo=So.range,Co=Ur((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Gr}),(function(t){return t.getUTCDate()-1})),Lo=Co.range;function Do(t){return Ur((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Zr}))}var Ao=Do(0),Po=Do(1),Io=Do(2),zo=Do(3),Fo=Do(4),Ro=Do(5),Oo=Do(6),Yo=Ao.range,No=Po.range,Bo=Io.range,jo=zo.range,Uo=Fo.range,$o=Ro.range,Ho=Oo.range,Vo=Ur((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),qo=Vo.range,Wo=Ur((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Wo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ur((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Go,Zo=Wo.range,Xo=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},Ko=function(t){return(t=Xo(Math.abs(t)))?t[1]:NaN},Jo=function(t,e){var n=Xo(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},Qo={"":function(t,e){t:for(var n,i=(t=t.toPrecision(e)).length,r=1,o=-1;r<i;++r)switch(t[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Jo(100*t,e)},r:Jo,s:function(t,e){var n=Xo(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Go=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Xo(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},ta=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,ea=function(t){return new na(t)};function na(t){if(!(e=ta.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],l=!!e[7],u=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(l=!0,c="g"):Qo[c]||(c=""),(a||"0"===n&&"="===i)&&(a=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=o,this.zero=a,this.width=s,this.comma=l,this.precision=u,this.type=c}na.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var ia=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ra(t){return t}var oa,aa=function(t){var e,n,i=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,i){for(var r=t.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}):ra,r=t.currency,o=t.decimal;function a(t){var e=(t=ea(t)).fill,n=t.align,a=t.sign,s=t.symbol,l=t.zero,u=t.width,c=t.comma,h=t.precision,d=t.type,f="$"===s?r[0]:"#"===s&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",p="$"===s?r[1]:/[%p]/.test(d)?"%":"",m=Qo[d],_=!d||/[defgprs%]/.test(d);function g(t){var r,s,g,y=f,v=p;if("c"===d)v=m(t)+v,t="";else{var x=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=m(t,h),x)for(r=-1,s=t.length,x=!1;++r<s;)if(48<(g=t.charCodeAt(r))&&g<58||"x"===d&&96<g&&g<103||"X"===d&&64<g&&g<71){x=!0;break}if(y=(x?"("===a?a:"-":"-"===a||"("===a?"":a)+y,v=v+("s"===d?ia[8+Go/3]:"")+(x&&"("===a?")":""),_)for(r=-1,s=t.length;++r<s;)if(48>(g=t.charCodeAt(r))||g>57){v=(46===g?o+t.slice(r+1):t.slice(r))+v,t=t.slice(0,r);break}}c&&!l&&(t=i(t,1/0));var b=y.length+t.length+v.length,w=b<u?new Array(u-b+1).join(e):"";switch(c&&l&&(t=i(w+t,w.length?u-v.length:1/0),w=""),n){case"<":return y+t+v+w;case"=":return y+w+t+v;case"^":return w.slice(0,b=w.length>>1)+y+t+v+w.slice(b)}return w+y+t+v}return h=null==h?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),g.toString=function(){return t+""},g}return{format:a,formatPrefix:function(t,e){var n=a(((t=ea(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Ko(e)/3))),r=Math.pow(10,-i),o=ia[8+i/3];return function(t){return n(r*t)+o}}}};function sa(e){return oa=aa(e),t.format=oa.format,t.formatPrefix=oa.formatPrefix,oa}sa({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var la=function(t){return Math.max(0,-Ko(Math.abs(t)))},ua=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ko(e)/3)))-Ko(Math.abs(t)))},ca=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ko(e)-Ko(t))+1};function ha(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function da(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fa(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function pa(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=wa(r),c=Ma(r),h=wa(o),d=Ma(o),f=wa(a),p=Ma(a),m=wa(s),_=Ma(s),g=wa(l),y=Ma(l),v={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Ya,e:Ya,H:Na,I:Ba,j:ja,L:Ua,m:$a,M:Ha,p:function(t){return r[+(t.getHours()>=12)]},S:Va,U:qa,w:Wa,W:Ga,x:null,X:null,y:Za,Y:Xa,Z:Ka,"%":ds},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ja,e:Ja,H:Qa,I:ts,j:es,L:ns,m:is,M:rs,p:function(t){return r[+(t.getUTCHours()>=12)]},S:os,U:as,w:ss,W:ls,x:null,X:null,y:us,Y:cs,Z:hs,"%":ds},b={a:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=d[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=y[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=_[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return T(t,e,n,i)},d:Aa,e:Aa,H:Ia,I:Ia,j:Pa,L:Ra,m:Da,M:za,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=c[i[0].toLowerCase()],n+i[0].length):-1},S:Fa,U:ka,w:Ta,W:Sa,x:function(t,e,i){return T(t,n,e,i)},X:function(t,e,n){return T(t,i,e,n)},y:Ca,Y:Ea,Z:La,"%":Oa};function w(t,e){return function(n){var i,r,o,a=[],s=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(r=_a[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),a.push(i),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function M(t,e){return function(n){var i=fa(1900);if(T(i,t,n+="",0)!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var r="Z"in i?da(fa(i.y)).getUTCDay():e(fa(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(r+5)%7:i.w+7*i.U-(r+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,da(i)):e(i)}}function T(t,e,n,i){for(var r,o,a=0,s=e.length,l=n.length;a<s;){if(i>=l)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(o=b[r in _a?e.charAt(a++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=w(n,v),v.X=w(i,v),v.c=w(e,v),x.x=w(n,x),x.X=w(i,x),x.c=w(e,x),{format:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=M(t+="",ha);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=M(t,da);return e.toString=function(){return t},e}}}var ma,_a={"-":"",_:" ",0:"0"},ga=/^\s*\d+/,ya=/^%/,va=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function xa(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function ba(t){return t.replace(va,"\\$&")}function wa(t){return new RegExp("^(?:"+t.map(ba).join("|")+")","i")}function Ma(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Ta(t,e,n){var i=ga.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function ka(t,e,n){var i=ga.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Sa(t,e,n){var i=ga.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function Ea(t,e,n){var i=ga.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ca(t,e,n){var i=ga.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function La(t,e,n){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Da(t,e,n){var i=ga.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Aa(t,e,n){var i=ga.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Pa(t,e,n){var i=ga.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Ia(t,e,n){var i=ga.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function za(t,e,n){var i=ga.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Fa(t,e,n){var i=ga.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Ra(t,e,n){var i=ga.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Oa(t,e,n){var i=ya.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Ya(t,e){return xa(t.getDate(),e,2)}function Na(t,e){return xa(t.getHours(),e,2)}function Ba(t,e){return xa(t.getHours()%12||12,e,2)}function ja(t,e){return xa(1+no.count(wo(t),t),e,3)}function Ua(t,e){return xa(t.getMilliseconds(),e,3)}function $a(t,e){return xa(t.getMonth()+1,e,2)}function Ha(t,e){return xa(t.getMinutes(),e,2)}function Va(t,e){return xa(t.getSeconds(),e,2)}function qa(t,e){return xa(oo.count(wo(t),t),e,2)}function Wa(t){return t.getDay()}function Ga(t,e){return xa(ao.count(wo(t),t),e,2)}function Za(t,e){return xa(t.getFullYear()%100,e,2)}function Xa(t,e){return xa(t.getFullYear()%1e4,e,4)}function Ka(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xa(e/60|0,"0",2)+xa(e%60,"0",2)}function Ja(t,e){return xa(t.getUTCDate(),e,2)}function Qa(t,e){return xa(t.getUTCHours(),e,2)}function ts(t,e){return xa(t.getUTCHours()%12||12,e,2)}function es(t,e){return xa(1+Co.count(Wo(t),t),e,3)}function ns(t,e){return xa(t.getUTCMilliseconds(),e,3)}function is(t,e){return xa(t.getUTCMonth()+1,e,2)}function rs(t,e){return xa(t.getUTCMinutes(),e,2)}function os(t,e){return xa(t.getUTCSeconds(),e,2)}function as(t,e){return xa(Ao.count(Wo(t),t),e,2)}function ss(t){return t.getUTCDay()}function ls(t,e){return xa(Po.count(Wo(t),t),e,2)}function us(t,e){return xa(t.getUTCFullYear()%100,e,2)}function cs(t,e){return xa(t.getUTCFullYear()%1e4,e,4)}function hs(){return"+0000"}function ds(){return"%"}function fs(e){return ma=pa(e),t.timeFormat=ma.format,t.timeParse=ma.parse,t.utcFormat=ma.utcFormat,t.utcParse=ma.utcParse,ma}fs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ps="%Y-%m-%dT%H:%M:%S.%LZ";var ms=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(ps);var _s=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse(ps),gs=Array.prototype,ys=gs.map,vs=gs.slice,xs={name:"implicit"};function bs(t){var e=L(),n=[],i=xs;function r(r){var o=r+"",a=e.get(o);if(!a){if(i!==xs)return i;e.set(o,a=n.push(r))}return t[(a-1)%t.length]}return t=null==t?[]:vs.call(t),r.domain=function(t){if(!arguments.length)return n.slice();n=[],e=L();for(var i,o,a=-1,s=t.length;++a<s;)e.has(o=(i=t[a])+"")||e.set(o,n.push(i));return r},r.range=function(e){return arguments.length?(t=vs.call(e),r):t.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return bs().domain(n).range(t).unknown(i)},r}function ws(){var t,e,n=bs().unknown(void 0),i=n.domain,r=n.range,o=[0,1],a=!1,s=0,l=0,u=.5;function c(){var n=i().length,c=o[1]<o[0],h=o[c-0],d=o[1-c];t=(d-h)/Math.max(1,n-s+2*l),a&&(t=Math.floor(t)),h+=(d-h-t*(n-s))*u,e=t*(1-s),a&&(h=Math.round(h),e=Math.round(e));var f=m(n).map((function(e){return h+t*e}));return r(c?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),c()):i()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],c()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,c()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,c()):a},n.padding=function(t){return arguments.length?(s=l=Math.max(0,Math.min(1,t)),c()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),c()):s},n.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},n.copy=function(){return ws().domain(i()).range(o).round(a).paddingInner(s).paddingOuter(l).align(u)},c()}function Ms(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Ms(e())},t}var Ts=function(t){return function(){return t}},ks=function(t){return+t},Ss=[0,1];function Es(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ts(e)}function Cs(t,e,n,i){var r=t[0],o=t[1],a=e[0],s=e[1];return o<r?(r=n(o,r),a=i(s,a)):(r=n(r,o),a=i(a,s)),function(t){return a(r(t))}}function Ls(t,e,n,i){var o=Math.min(t.length,e.length)-1,a=new Array(o),s=new Array(o),l=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<o;)a[l]=n(t[l],t[l+1]),s[l]=i(e[l],e[l+1]);return function(e){var n=r(t,e,1,o)-1;return s[n](a[n](e))}}function Ds(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function As(t,e){var n,i,r,o=Ss,a=Ss,s=Ei,l=!1;function u(){return n=Math.min(o.length,a.length)>2?Ls:Cs,i=r=null,c}function c(e){return(i||(i=n(o,a,l?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}(t):t,s)))(+e)}return c.invert=function(t){return(r||(r=n(a,o,Es,l?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}(e):e)))(+t)},c.domain=function(t){return arguments.length?(o=ys.call(t,ks),u()):o.slice()},c.range=function(t){return arguments.length?(a=vs.call(t),u()):a.slice()},c.rangeRound=function(t){return a=vs.call(t),s=Ci,u()},c.clamp=function(t){return arguments.length?(l=!!t,u()):l},c.interpolate=function(t){return arguments.length?(s=t,u()):s},u()}function Ps(e){var n=e.domain;return e.ticks=function(t){var e=n();return v(e[0],e[e.length-1],null==t?10:t)},e.tickFormat=function(e,i){return function(e,n,i){var r,o=e[0],a=e[e.length-1],s=x(o,a,null==n?10:n);switch((i=ea(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(o),Math.abs(a));return null!=i.precision||isNaN(r=ua(s,l))||(i.precision=r),t.formatPrefix(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=ca(s,Math.max(Math.abs(o),Math.abs(a))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=la(s))||(i.precision=r-2*("%"===i.type))}return t.format(i)}(n(),e,i)},e.nice=function(t){var i=n(),r=i.length-1,o=null==t?10:t,a=i[0],s=i[r],l=x(a,s,o);return l&&(l=x(Math.floor(a/l)*l,Math.ceil(s/l)*l,o),i[0]=Math.floor(a/l)*l,i[r]=Math.ceil(s/l)*l,n(i)),e},e}var Is=function(t,e){var n,i=0,r=(t=t.slice()).length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t};function zs(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Ts(e)}function Fs(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function Rs(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Os(t){return 10===t?Rs:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Ys(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Ns(t){return function(e){return-t(-e)}}function Bs(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function js(){var t=1,e=As((function(e,n){return(n=Bs(n,t)-(e=Bs(e,t)))?function(i){return(Bs(i,t)-e)/n}:Ts(n)}),(function(e,n){return n=Bs(n,t)-(e=Bs(e,t)),function(i){return Bs(e+n*i,1/t)}})),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return Ds(e,js().exponent(t))},Ps(e)}var Us=1e3,$s=6e4,Hs=36e5,Vs=864e5,qs=2592e6,Ws=31536e6;function Gs(t){return new Date(t)}function Zs(t){return t instanceof Date?+t:+new Date(+t)}function Xs(t,e,i,r,o,a,s,l,u){var c=As(Es,yi),h=c.invert,d=c.domain,f=u(".%L"),p=u(":%S"),m=u("%I:%M"),_=u("%I %p"),g=u("%a %d"),y=u("%b %d"),v=u("%B"),b=u("%Y"),w=[[s,1,Us],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,$s],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,Hs],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,Vs],[r,2,1728e5],[i,1,6048e5],[e,1,qs],[e,3,7776e6],[t,1,Ws]];function M(n){return(s(n)<n?f:a(n)<n?p:o(n)<n?m:r(n)<n?_:e(n)<n?i(n)<n?g:y:t(n)<n?v:b)(n)}function T(e,i,r,o){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-i)/e,s=n((function(t){return t[2]})).right(w,a);s===w.length?(o=x(i/Ws,r/Ws,e),e=t):s?(o=(s=w[a/w[s-1][2]<w[s][2]/a?s-1:s])[1],e=s[0]):(o=x(i,r,e),e=l)}return null==o?e:e.every(o)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?d(ys.call(t,Zs)):d().map(Gs)},c.ticks=function(t,e){var n,i=d(),r=i[0],o=i[i.length-1],a=o<r;return a&&(n=r,r=o,o=n),n=(n=T(t,r,o,e))?n.range(r,o+1):[],a?n.reverse():n},c.tickFormat=function(t,e){return null==e?M:u(e)},c.nice=function(t,e){var n=d();return(t=T(t,n[0],n[n.length-1],e))?d(Is(n,t)):c},c.copy=function(){return Ds(c,Xs(t,e,i,r,o,a,s,l,u))},c}var Ks=function(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))},Js=Ks("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Qs=Ks("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),tl=Ks("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),el=Ks("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),nl=qi(ni(300,.5,0),ni(-240,.5,1)),il=qi(ni(-100,.75,.35),ni(80,1.5,.8)),rl=qi(ni(260,.75,.35),ni(80,1.5,.8)),ol=ni();function al(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var sl=al(Ks("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ll=al(Ks("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ul=al(Ks("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),cl=al(Ks("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var hl="http://www.w3.org/1999/xhtml",dl={svg:"http://www.w3.org/2000/svg",xhtml:hl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},fl=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),dl.hasOwnProperty(e)?{space:dl[e],local:t}:t};function pl(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hl&&e.documentElement.namespaceURI===hl?e.createElement(t):e.createElementNS(n,t)}}function ml(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var _l=function(t){var e=fl(t);return(e.local?ml:pl)(e)},gl=0;function yl(){return new vl}function vl(){this._="@"+(++gl).toString(36)}vl.prototype=yl.prototype={constructor:vl,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var xl=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var bl=document.documentElement;if(!bl.matches){var wl=bl.webkitMatchesSelector||bl.msMatchesSelector||bl.mozMatchesSelector||bl.oMatchesSelector;xl=function(t){return function(){return wl.call(this,t)}}}}var Ml=xl,Tl={};function kl(t,e,n){return t=Sl(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Sl(e,n,i){return function(r){var o=t.event;t.event=r;try{e.call(this,this.__data__,n,i)}finally{t.event=o}}}function El(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Cl(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function Ll(t,e,n){var i=Tl.hasOwnProperty(t.type)?kl:Sl;return function(r,o,a){var s,l=this.__on,u=i(e,o,a);if(l)for(var c=0,h=l.length;c<h;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Tl={mouseenter:"mouseover",mouseleave:"mouseout"}));function Dl(e,n,i,r){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,r)}finally{t.event=o}}var Al=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},Pl=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]},Il=function(t){var e=Al();return e.changedTouches&&(e=e.changedTouches[0]),Pl(t,e)};function zl(){}var Fl=function(t){return null==t?zl:function(){return this.querySelector(t)}};function Rl(){return[]}var Ol=function(t){return null==t?Rl:function(){return this.querySelectorAll(t)}},Yl=function(t){return new Array(t.length)};function Nl(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Nl.prototype={constructor:Nl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Bl(t,e,n,i,r,o){for(var a,s=0,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new Nl(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function jl(t,e,n,i,r,o,a){var s,l,u,c={},h=e.length,d=o.length,f=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(f[s]=u="$"+a.call(l,l.__data__,s,e),u in c?r[s]=l:c[u]=l);for(s=0;s<d;++s)(l=c[u="$"+a.call(t,o[s],s,o)])?(i[s]=l,l.__data__=o[s],c[u]=null):n[s]=new Nl(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&c[f[s]]===l&&(r[s]=l)}function Ul(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function $l(t){return function(){this.removeAttribute(t)}}function Hl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vl(t,e){return function(){this.setAttribute(t,e)}}function ql(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Wl(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Gl(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var Zl=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Xl(t){return function(){this.style.removeProperty(t)}}function Kl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Jl(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ql(t){return function(){delete this[t]}}function tu(t,e){return function(){this[t]=e}}function eu(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function nu(t){return t.trim().split(/^|\s+/)}function iu(t){return t.classList||new ru(t)}function ru(t){this._node=t,this._names=nu(t.getAttribute("class")||"")}function ou(t,e){for(var n=iu(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function au(t,e){for(var n=iu(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function su(t){return function(){ou(this,t)}}function lu(t){return function(){au(this,t)}}function uu(t,e){return function(){(e.apply(this,arguments)?ou:au)(this,t)}}ru.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function cu(){this.textContent=""}function hu(t){return function(){this.textContent=t}}function du(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function fu(){this.innerHTML=""}function pu(t){return function(){this.innerHTML=t}}function mu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function _u(){this.nextSibling&&this.parentNode.appendChild(this)}function gu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yu(){return null}function vu(){var t=this.parentNode;t&&t.removeChild(this)}function xu(t,e,n){var i=Zl(t),r=i.CustomEvent;r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function bu(t,e){return function(){return xu(this,t,e)}}function wu(t,e){return function(){return xu(this,t,e.apply(this,arguments))}}var Mu=[null];function Tu(t,e){this._groups=t,this._parents=e}function ku(){return new Tu([[document.documentElement]],Mu)}Tu.prototype=ku.prototype={constructor:Tu,select:function(t){"function"!=typeof t&&(t=Fl(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a,s=e[r],l=s.length,u=i[r]=new Array(l),c=0;c<l;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new Tu(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Ol(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),r.push(a));return new Tu(i,r)},filter:function(t){"function"!=typeof t&&(t=Ml(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new Tu(i,this._parents)},data:function(t,e){if(!t)return f=new Array(this.size()),u=-1,this.each((function(t){f[++u]=t})),f;var n=e?jl:Bl,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],h=r[u],d=h.length,f=t.call(c,c&&c.__data__,u,i),p=f.length,m=s[u]=new Array(p),_=a[u]=new Array(p);n(c,h,m,_,l[u]=new Array(d),f,e);for(var g,y,v=0,x=0;v<p;++v)if(g=m[v]){for(v>=x&&(x=v+1);!(y=_[x])&&++x<p;);g._next=y||null}}return(a=new Tu(a,i))._enter=s,a._exit=l,a},enter:function(){return new Tu(this._enter||this._groups.map(Yl),this._parents)},exit:function(){return new Tu(this._exit||this._groups.map(Yl),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,u=e[s],c=n[s],h=u.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<i;++s)a[s]=e[s];return new Tu(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&a!==i.nextSibling&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Ul);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,s=n[o],l=s.length,u=r[o]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new Tu(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=fl(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Hl:$l:"function"==typeof e?n.local?Gl:Wl:n.local?ql:Vl)(n,e))},style:function(t,e,n){var i;return arguments.length>1?this.each((null==e?Xl:"function"==typeof e?Jl:Kl)(t,e,null==n?"":n)):Zl(i=this.node()).getComputedStyle(i,null).getPropertyValue(t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ql:"function"==typeof e?eu:tu)(t,e)):this.node()[t]},classed:function(t,e){var n=nu(t+"");if(arguments.length<2){for(var i=iu(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?uu:e?su:lu)(n,e))},text:function(t){return arguments.length?this.each(null==t?cu:("function"==typeof t?du:hu)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?fu:("function"==typeof t?mu:pu)(t)):this.node().innerHTML},raise:function(){return this.each(_u)},lower:function(){return this.each(gu)},append:function(t){var e="function"==typeof t?t:_l(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:_l(t),i=null==e?yu:"function"==typeof e?e:Fl(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(vu)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=El(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Ll:Cl,null==n&&(n=!1),i=0;i<a;++i)this.each(s(o[i],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?wu:bu)(t,e))}};var Su=function(t){return"string"==typeof t?new Tu([[document.querySelector(t)]],[document.documentElement]):new Tu([[t]],Mu)},Eu=function(t,e,n){arguments.length<3&&(n=e,e=Al().changedTouches);for(var i,r=0,o=e?e.length:0;r<o;++r)if((i=e[r]).identifier===n)return Pl(t,i);return null},Cu=Gi("start","end","interrupt"),Lu=[],Du=function(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var u,c,h,d;if(1!==n.state)return l();for(u in r)if((d=r[u]).name===n.name){if(3===d.state)return Nr(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=6,d.timer.stop(),delete r[u])}if(Nr((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=d);i.length=c+1}}function s(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=zr(o,0,n.time)}(t,n,{name:e,index:i,group:r,on:Cu,tween:Lu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Au(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>0)throw new Error("too late");return n}function Pu(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>2)throw new Error("too late");return n}function Iu(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}var zu=function(t,e){var n,i,r,o=t.__transition,a=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[r]):a=!1;a&&delete t.__transition}};function Fu(t,e){var n,i;return function(){var r=Pu(this,t),o=r.tween;if(o!==n)for(var a=0,s=(i=n=o).length;a<s;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}function Ru(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Pu(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=s;break}l===u&&r.push(s)}o.tween=r}}function Ou(t,e,n){var i=t._id;return t.each((function(){var t=Pu(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Iu(t,i).value[e]}}var Yu=function(t,e){var n;return("number"==typeof e?yi:e instanceof vn?di:(n=vn(e))?(e=n,di):Si)(t,e)};function Nu(t){return function(){this.removeAttribute(t)}}function Bu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ju(t,e,n){var i,r;return function(){var o=this.getAttribute(t);return o===n?null:o===i?r:r=e(i=o,n)}}function Uu(t,e,n){var i,r;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===i?r:r=e(i=o,n)}}function $u(t,e,n){var i,r,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttribute(t))===s?null:a===i&&s===r?o:o=e(i=a,r=s);this.removeAttribute(t)}}function Hu(t,e,n){var i,r,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===s?null:a===i&&s===r?o:o=e(i=a,r=s);this.removeAttributeNS(t.space,t.local)}}function Vu(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}return n._value=e,n}function qu(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}return n._value=e,n}function Wu(t,e){return function(){Au(this,t).delay=+e.apply(this,arguments)}}function Gu(t,e){return e=+e,function(){Au(this,t).delay=e}}function Zu(t,e){return function(){Pu(this,t).duration=+e.apply(this,arguments)}}function Xu(t,e){return e=+e,function(){Pu(this,t).duration=e}}function Ku(t,e){if("function"!=typeof e)throw new Error;return function(){Pu(this,t).ease=e}}function Ju(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Au:Pu;return function(){var a=o(this,t),s=a.on;s!==i&&(r=(i=s).copy()).on(e,n),a.on=r}}var Qu=ku.prototype.constructor;function tc(t,e,n){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.style.setProperty(t,r(e),n)}}return i._value=e,i}var ec=0;function nc(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function ic(t){return ku().transition(t)}function rc(){return++ec}var oc=ku.prototype;nc.prototype=ic.prototype={constructor:nc,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Fl(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s,l,u=i[a],c=u.length,h=o[a]=new Array(c),d=0;d<c;++d)(s=u[d])&&(l=t.call(s,s.__data__,d,u))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,Du(h[d],e,n,d,h,Iu(s,n)));return new nc(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ol(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,u=i[s],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=t.call(l,l.__data__,h,u),p=Iu(l,n),m=0,_=f.length;m<_;++m)(d=f[m])&&Du(d,e,n,m,f,p);o.push(f),a.push(l)}return new nc(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=Ml(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new nc(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,u=e[s],c=n[s],h=u.length,d=a[s]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;s<i;++s)a[s]=e[s];return new nc(a,this._parents,this._name,this._id)},selection:function(){return new Qu(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=rc(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,u=0;u<l;++u)if(a=s[u]){var c=Iu(a,e);Du(a,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new nc(i,this._parents,t,n)},call:oc.call,nodes:oc.nodes,node:oc.node,size:oc.size,empty:oc.empty,each:oc.each,on:function(t,e){var n=this._id;return arguments.length<2?Iu(this.node(),n).on.on(t):this.each(Ju(n,t,e))},attr:function(t,e){var n=fl(t),i="transform"===n?zi:Yu;return this.attrTween(t,"function"==typeof e?(n.local?Hu:$u)(n,i,Ou(this,"attr."+t,e)):null==e?(n.local?Bu:Nu)(n):(n.local?Uu:ju)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=fl(t);return this.tween(n,(i.local?Vu:qu)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Ii:Yu;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=Zl(this).getComputedStyle(this,null),a=o.getPropertyValue(t),s=(this.style.removeProperty(t),o.getPropertyValue(t));return a===s?null:a===n&&s===i?r:r=e(n=a,i=s)}}(t,i)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var i,r,o;return function(){var a=Zl(this).getComputedStyle(this,null),s=a.getPropertyValue(t),l=n(this);return null==l&&(this.style.removeProperty(t),l=a.getPropertyValue(t)),s===l?null:s===i&&l===r?o:o=e(i=s,r=l)}}(t,i,Ou(this,"style."+t,e)):function(t,e,n){var i,r;return function(){var o=Zl(this).getComputedStyle(this,null).getPropertyValue(t);return o===n?null:o===i?r:r=e(i=o,n)}}(t,i,e),n)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,tc(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ou(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Iu(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?Fu:Ru)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Wu:Gu)(e,t)):Iu(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Zu:Xu)(e,t)):Iu(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Ku(e,t)):Iu(this.node(),e).ease}};var ac={time:null,delay:0,duration:250,ease:B};function sc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ac.time=Ar(),ac;return n}ku.prototype.interrupt=function(t){return this.each((function(){zu(this,t)}))},ku.prototype.transition=function(t){var e,n;t instanceof nc?(e=t._id,t=t._name):(e=rc(),(n=ac).time=Ar(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,u=0;u<l;++u)(a=s[u])&&Du(a,t,e,u,s,n||sc(a,e));return new nc(i,this._parents,t,e)};var lc=[null],uc=Array.prototype.slice,cc=function(t){return t},hc=1e-6;function dc(t,e,n){var i=t(n);return"translate("+(isFinite(i)?i:e(n))+",0)"}function fc(t,e,n){var i=t(n);return"translate(0,"+(isFinite(i)?i:e(n))+")"}function pc(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function mc(){return!this.__axis}function _c(t,e){var n=[],i=null,r=null,o=6,a=6,s=3;function l(l){var u,c=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,h=null==r?e.tickFormat?e.tickFormat.apply(e,n):cc:r,d=Math.max(o,0)+s,f=1===t||3===t?dc:fc,p=e.range(),m=p[0]+.5,_=p[p.length-1]+.5,g=(e.bandwidth?pc:cc)(e.copy()),y=l.selection?l.selection():l,v=y.selectAll(".domain").data([null]),x=y.selectAll(".tick").data(c,e).order(),b=x.exit(),w=x.enter().append("g").attr("class","tick"),M=x.select("line"),T=x.select("text"),k=1===t||4===t?-1:1,S=4===t||2===t?(u="x","y"):(u="y","x");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),x=x.merge(w),M=M.merge(w.append("line").attr("stroke","#000").attr(u+"2",k*o).attr(S+"1",.5).attr(S+"2",.5)),T=T.merge(w.append("text").attr("fill","#000").attr(u,k*d).attr(S,.5).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),l!==y&&(v=v.transition(l),x=x.transition(l),M=M.transition(l),T=T.transition(l),b=b.transition(l).attr("opacity",hc).attr("transform",(function(t){return f(g,this.parentNode.__axis||g,t)})),w.attr("opacity",hc).attr("transform",(function(t){return f(this.parentNode.__axis||g,g,t)}))),b.remove(),v.attr("d",4===t||2==t?"M"+k*a+","+m+"H0.5V"+_+"H"+k*a:"M"+m+","+k*a+"V0.5H"+_+"V"+k*a),x.attr("opacity",1).attr("transform",(function(t){return f(g,g,t)})),M.attr(u+"2",k*o),T.attr(u,k*d).text(h),y.filter(mc).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),y.each((function(){this.__axis=g}))}return l.scale=function(t){return arguments.length?(e=t,l):e},l.ticks=function(){return n=uc.call(arguments),l},l.tickArguments=function(t){return arguments.length?(n=null==t?[]:uc.call(t),l):n.slice()},l.tickValues=function(t){return arguments.length?(i=null==t?null:uc.call(t),l):i&&i.slice()},l.tickFormat=function(t){return arguments.length?(r=t,l):r},l.tickSize=function(t){return arguments.length?(o=a=+t,l):o},l.tickSizeInner=function(t){return arguments.length?(o=+t,l):o},l.tickSizeOuter=function(t){return arguments.length?(a=+t,l):a},l.tickPadding=function(t){return arguments.length?(s=+t,l):s},l}function gc(t,e){return t.parent===e.parent?1:2}function yc(t,e){return t+e.x}function vc(t,e){return Math.max(t,e.y)}function xc(t,e){var n,i,r,o,a,s=new Tc(t),l=+t.value&&(s.value=t.value),u=[s];for(null==e&&(e=bc);n=u.pop();)if(l&&(n.value=+n.data.value),(r=e(n.data))&&(a=r.length))for(n.children=new Array(a),o=a-1;o>=0;--o)u.push(i=n.children[o]=new Tc(r[o])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(Mc)}function bc(t){return t.children}function wc(t){t.data=t.data.data}function Mc(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Tc(t){this.data=t,this.depth=this.height=0,this.parent=null}function kc(t){this._=t,this.next=null}Tc.prototype=xc.prototype={constructor:Tc,each:function(t){var e,n,i,r,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(i=0,r=n.length;i<r;++i)a.push(n[i])}while(a.length);return this},eachAfter:function(t){for(var e,n,i,r=this,o=[r],a=[];r=o.pop();)if(a.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n]);for(;r=a.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return xc(this).eachBefore(wc)}};var Sc=function(t){return Cc(function(t){for(var e=(t=t.slice()).length,n=null,i=n;e;){var r=new kc(t[e-1]);i=i?i.next=r:n=r,t[void 0]=t[--e]}return{head:n,tail:i}}(t),[])};function Ec(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r-e.r;return r*r+1e-6>n*n+i*i}function Cc(t,e){var n,i,r,o=null,a=t.head;switch(e.length){case 1:n=function(t){return{x:t.x,y:t.y,r:t.r}}(e[0]);break;case 2:n=function(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,a=e.y,s=e.r,l=o-n,u=a-i,c=s-r,h=Math.sqrt(l*l+u*u);return{x:(n+o+l/h*c)/2,y:(i+a+u/h*c)/2,r:(h+r+s)/2}}(e[0],e[1]);break;case 3:n=function(t,e,n){var i=t.x,r=t.y,o=t.r,a=e.x,s=e.y,l=e.r,u=n.x,c=n.y,h=n.r,d=2*(i-a),f=2*(r-s),p=2*(l-o),m=i*i+r*r-o*o-a*a-s*s+l*l,_=2*(i-u),g=2*(r-c),y=2*(h-o),v=i*i+r*r-o*o-u*u-c*c+h*h,x=_*f-d*g,b=(f*v-g*m)/x-i,w=(g*p-f*y)/x,M=(_*m-d*v)/x-r,T=(d*y-_*p)/x,k=w*w+T*T-1,S=2*(b*w+M*T+o),E=b*b+M*M-o*o,C=(-S-Math.sqrt(S*S-4*k*E))/(2*k);return{x:b+w*C+i,y:M+T*C+r,r:C}}(e[0],e[1],e[2])}for(;a;)r=a._,i=a.next,n&&Ec(n,r)?o=a:(o?(t.tail=o,o.next=null):t.head=t.tail=null,e.push(r),n=Cc(t,e),e.pop(),t.head?(a.next=t.head,t.head=a):(a.next=null,t.head=t.tail=a),(o=t.tail).next=i),a=i;return t.tail=o,n}function Lc(t,e,n){var i=t.x,r=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-i,l=e.y-r,u=s*s+l*l;if(u){var c=.5+((a*=a)-(o*=o))/(2*u),h=Math.sqrt(Math.max(0,2*o*(a+u)-(a-=u)*a-o*o))/(2*u);n.x=i+c*s+h*l,n.y=r+c*l-h*s}else n.x=i+a,n.y=r}function Dc(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r>n*n+i*i}function Ac(t,e,n){var i=t.x-e,r=t.y-n;return i*i+r*r}function Pc(t){this._=t,this.next=null,this.previous=null}function Ic(t){if(!(r=t.length))return 0;var e,n,i,r;if((e=t[0]).x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;Lc(n,e,i=t[2]);var o,a,s,l,u,c,h,d=e.r*e.r,f=n.r*n.r,p=i.r*i.r,m=d+f+p,_=d*e.x+f*n.x+p*i.x,g=d*e.y+f*n.y+p*i.y;e=new Pc(e),n=new Pc(n),i=new Pc(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(s=3;s<r;++s){if(Lc(e._,n._,i=t[s]),i=new Pc(i),(u=e.previous)===(l=n.next)){if(Dc(l._,i._)){e=n,n=l,--s;continue t}}else{c=l._.r,h=u._.r;do{if(c<=h){if(Dc(l._,i._)){n=l,e.next=n,n.previous=e,--s;continue t}c+=(l=l.next)._.r}else{if(Dc(u._,i._)){(e=u).next=n,n.previous=e,--s;continue t}h+=(u=u.previous)._.r}}while(l!==u.next)}for(i.previous=e,i.next=n,e.next=n.previous=n=i,m+=p=i._.r*i._.r,_+=p*i._.x,g+=p*i._.y,d=Ac(e._,o=_/m,a=g/m);(i=i.next)!==n;)(p=Ac(i._,o,a))<d&&(e=i,d=p);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=Sc(e),s=0;s<r;++s)(e=t[s]).x-=i.x,e.y-=i.y;return i.r}function zc(t){return null==t?null:Fc(t)}function Fc(t){if("function"!=typeof t)throw new Error;return t}function Rc(){return 0}var Oc=function(t){return function(){return t}};function Yc(t){return Math.sqrt(t.value)}function Nc(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Bc(t,e){return function(n){if(i=n.children){var i,r,o,a=i.length,s=t(n)*e||0;if(s)for(r=0;r<a;++r)i[r].r+=s;if(o=Ic(i),s)for(r=0;r<a;++r)i[r].r-=s;n.r=o+s}}}function jc(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var Uc=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},$c=function(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,u=t.value&&(i-e)/t.value;++s<l;)(o=a[s]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*u},Hc={depth:-1},Vc={};function qc(t){return t.id}function Wc(t){return t.parentId}function Gc(t,e){return t.parent===e.parent?1:2}function Zc(t){var e=t.children;return e?e[0]:t.t}function Xc(t){var e=t.children;return e?e[e.length-1]:t.t}function Kc(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Jc(t,e,n){return t.a.parent===e.parent?t.a:n}function Qc(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Qc.prototype=Object.create(Tc.prototype);var th=function(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,u=t.value&&(r-n)/t.value;++s<l;)(o=a[s]).x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*u},eh=(1+Math.sqrt(5))/2;function nh(t,e,n,i,r,o){for(var a,s,l,u,c,h,d,f,p,m,_,g,y=[],v=e.children,x=0,b=v.length,w=e.value;x<b;){for(u=r-n,c=o-i,d=f=h=v[x].value,g=h*h*(_=Math.max(c/u,u/c)/(w*t)),m=Math.max(f/g,g/d),l=x+1;l<b;++l){if(h+=s=v[l].value,s<d&&(d=s),s>f&&(f=s),g=h*h*_,(p=Math.max(f/g,g/d))>m){h-=s;break}m=p}y.push(a={value:h,dice:u<c,children:v.slice(x,l)}),a.dice?$c(a,n,i,r,w?i+=c*h/w:o):th(a,n,i,w?n+=u*h/w:r,o),w-=h,x=l}return y}var ih=function t(e){function n(t,n,i,r,o){nh(e,t,n,i,r,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(eh),rh=function t(e){function n(t,n,i,r,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,l,u,c,h=-1,d=a.length,f=t.value;++h<d;){for(l=(s=a[h]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?$c(s,n,i,r,i+=(o-i)*s.value/f):th(s,n,i,n+=(r-n)*s.value/f,o),f-=s.value}else t._squarify=a=nh(e,t,n,i,r,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(eh),oh=function(t){return function(){return t}},ah=function(){return 1e-6*(Math.random()-.5)};function sh(t){return t.x+t.vx}function lh(t){return t.y+t.vy}function uh(t,e){return e}function ch(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function hh(t){return t.x}function dh(t){return t.y}var fh=Math.PI*(3-Math.sqrt(5));function ph(){t.event.stopImmediatePropagation()}var mh=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},_h=function(t){var e=t.document.documentElement,n=Su(t).on("dragstart.drag",mh,!0);"onselectstart"in e?n.on("selectstart.drag",mh,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function gh(t,e){var n=t.document.documentElement,i=Su(t).on("dragstart.drag",null);e&&(i.on("click.drag",mh,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var yh=function(t){return function(){return t}};function vh(t,e,n,i,r,o,a,s,l,u){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=a,this.dx=s,this.dy=l,this._=u}function xh(){return!t.event.button}function bh(){return this.parentNode}function wh(e){return null==e?{x:t.event.x,y:t.event.y}:e}vh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Mh=function(t){return function(){return t}};function Th(t){return t[0]}function kh(t){return t[1]}function Sh(){this._=null}function Eh(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ch(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Lh(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Dh(t){for(;t.L;)t=t.L;return t}function Ah(t,e,n,i){var r=[null,null],o=ed.push(r)-1;return r.left=t,r.right=e,n&&Ih(r,t,e,n),i&&Ih(r,e,t,i),Qh[t.index].halfedges.push(o),Qh[e.index].halfedges.push(o),r}function Ph(t,e,n){var i=[e,n];return i.left=t,i}function Ih(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function zh(t,e,n,i,r){var o,a=t[0],s=t[1],l=a[0],u=a[1],c=0,h=1,d=s[0]-l,f=s[1]-u;if(o=e-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<h&&(h=o)}if(o=n-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[l+c*d,u+c*f]),h<1&&(t[1]=[l+h*d,u+h*f]),!0)}}}}}function Fh(t,e,n,i,r){var o=t[1];if(o)return!0;var a,s,l=t[0],u=t.left,c=t.right,h=u[0],d=u[1],f=c[0],p=c[1],m=(h+f)/2,_=(d+p)/2;if(p===d){if(m<e||m>=i)return;if(h>f){if(l){if(l[1]>=r)return}else l=[m,n];o=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];o=[m,n]}}else if(s=_-(a=(h-f)/(p-d))*m,a<-1||a>1)if(h>f){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(d<p){if(l){if(l[0]>=i)return}else l=[e,a*e+s];o=[i,a*i+s]}else{if(l){if(l[0]<e)return}else l=[i,a*i+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function Rh(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Oh(t,e){return e[+(e.left!==t.site)]}function Yh(t,e){return e[+(e.left===t.site)]}Sh.prototype={constructor:Sh,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Dh(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Ch(this,n),n=(t=n).U),n.C=!1,i.C=!0,Lh(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Lh(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ch(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?Dh(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Ch(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Lh(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Ch(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Lh(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ch(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Lh(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Nh,Bh=[];function jh(){Eh(this),this.x=this.y=this.arc=this.site=this.cy=null}function Uh(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,u=i[1]-s,c=o[0]-a,h=o[1]-s,d=2*(l*h-u*c);if(!(d>=-id)){var f=l*l+u*u,p=c*c+h*h,m=(h*f-u*p)/d,_=(l*p-c*f)/d,g=Bh.pop()||new jh;g.arc=t,g.site=r,g.x=m+a,g.y=(g.cy=_+s)+Math.sqrt(m*m+_*_),t.circle=g;for(var y=null,v=td._;v;)if(g.y<v.y||g.y===v.y&&g.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}td.insert(y,g),y||(Nh=g)}}}}function $h(t){var e=t.circle;e&&(e.P||(Nh=e.N),td.remove(e),Bh.push(e),Eh(e),t.circle=null)}var Hh=[];function Vh(){Eh(this),this.edge=this.site=this.circle=null}function qh(t){var e=Hh.pop()||new Vh;return e.site=t,e}function Wh(t){$h(t),Jh.remove(t),Hh.push(t),Eh(t)}function Gh(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,s=[t];Wh(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<nd&&Math.abs(i-l.circle.cy)<nd;)o=l.P,s.unshift(l),Wh(l),l=o;s.unshift(l),$h(l);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<nd&&Math.abs(i-u.circle.cy)<nd;)a=u.N,s.push(u),Wh(u),u=a;s.push(u),$h(u);var c,h=s.length;for(c=1;c<h;++c)u=s[c],l=s[c-1],Ih(u.edge,l.site,u.site,r);l=s[0],(u=s[h-1]).edge=Ah(l.site,u.site,null,r),Uh(l),Uh(u)}function Zh(t){for(var e,n,i,r,o=t[0],a=t[1],s=Jh._;s;)if((i=Xh(s,a)-o)>nd)s=s.L;else{if(!((r=o-Kh(s,a))>nd)){i>-nd?(e=s.P,n=s):r>-nd?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Qh[t.index]={site:t,halfedges:[]}}(t);var l=qh(t);if(Jh.insert(e,l),e||n){if(e===n)return $h(e),n=qh(e.site),Jh.insert(l,n),l.edge=n.edge=Ah(e.site,l.site),Uh(e),void Uh(n);if(n){$h(e),$h(n);var u=e.site,c=u[0],h=u[1],d=t[0]-c,f=t[1]-h,p=n.site,m=p[0]-c,_=p[1]-h,g=2*(d*_-f*m),y=d*d+f*f,v=m*m+_*_,x=[(_*y-f*v)/g+c,(d*v-m*y)/g+h];Ih(n.edge,u,p,x),l.edge=Ah(u,t,null,x),n.edge=Ah(t,p,null,x),Uh(e),Uh(n)}else l.edge=Ah(e.site,l.site)}}function Xh(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],u=l-e;if(!u)return s;var c=s-i,h=1/o-1/u,d=c/u;return h?(-d+Math.sqrt(d*d-2*h*(c*c/(-2*u)-l+u/2+r-o/2)))/h+i:(i+s)/2}function Kh(t,e){var n=t.N;if(n)return Xh(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Jh,Qh,td,ed,nd=1e-6,id=1e-12;function rd(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function od(t,e){return e[1]-t[1]||e[0]-t[0]}function ad(t,e){var n,i,r,o=t.sort(od).pop();for(ed=[],Qh=new Array(t.length),Jh=new Sh,td=new Sh;;)if(r=Nh,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(Zh(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;Gh(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Qh.length;r<o;++r)if((t=Qh[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=Rh(t,ed[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<i;++n)s[n]=e[a[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],u=+e[1][1];(function(t,e,n,i){for(var r,o=ed.length;o--;)Fh(r=ed[o],t,e,n,i)&&zh(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>nd||Math.abs(r[0][1]-r[1][1])>nd)||delete ed[o]})(a,s,l,u),function(t,e,n,i){var r,o,a,s,l,u,c,h,d,f,p,m,_=Qh.length,g=!0;for(r=0;r<_;++r)if(o=Qh[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)ed[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)p=(f=Yh(o,ed[l[s]]))[0],m=f[1],h=(c=Oh(o,ed[l[++s%u]]))[0],d=c[1],(Math.abs(p-h)>nd||Math.abs(m-d)>nd)&&(l.splice(s,0,ed.push(Ph(a,f,Math.abs(p-t)<nd&&i-m>nd?[t,Math.abs(h-t)<nd?d:i]:Math.abs(m-i)<nd&&n-p>nd?[Math.abs(d-i)<nd?h:n,i]:Math.abs(p-n)<nd&&m-e>nd?[n,Math.abs(h-n)<nd?d:e]:Math.abs(m-e)<nd&&p-t>nd?[Math.abs(d-e)<nd?h:t,e]:null))-1),++u);u&&(g=!1)}if(g){var y,v,x,b=1/0;for(r=0,g=null;r<_;++r)(o=Qh[r])&&(x=(y=(a=o.site)[0]-t)*y+(v=a[1]-e)*v)<b&&(b=x,g=o);if(g){var w=[t,e],M=[t,i],T=[n,i],k=[n,e];g.halfedges.push(ed.push(Ph(a=g.site,w,M))-1,ed.push(Ph(a,M,T))-1,ed.push(Ph(a,T,k))-1,ed.push(Ph(a,k,w))-1)}}for(r=0;r<_;++r)(o=Qh[r])&&(o.halfedges.length||delete Qh[r])}(a,s,l,u)}this.edges=ed,this.cells=Qh,Jh=td=ed=Qh=null}ad.prototype={constructor:ad,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Oh(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){for(var r,o=n.site,a=n.halfedges,s=-1,l=a.length,u=e[a[l-1]],c=u.left===o?u.right:u.left;++s<l;)r=c,c=(u=e[a[s]]).left===o?u.right:u.left,r&&c&&i<r.index&&i<c.index&&rd(o,r,c)<0&&t.push([o.data,r.data,c.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){var i,r=this,o=r._found||0,a=r.cells[o]||r.cells[o=0],s=t-a.site[0],l=e-a.site[1],u=s*s+l*l;do{a=r.cells[i=o],o=null,a.halfedges.forEach((function(n){var i=r.edges[n],s=i.left;if(s!==a.site&&s||(s=i.right)){var l=t-s[0],c=e-s[1],h=l*l+c*c;h<u&&(u=h,o=s.index)}}))}while(null!==o);return r._found=i,null==n||u<=n*n?a.site:null}};var sd=function(t){return function(){return t}};function ld(t,e,n){this.target=t,this.type=e,this.transform=n}function ud(t,e,n){this.k=t,this.x=e,this.y=n}ud.prototype={constructor:ud,scale:function(t){return 1===t?this:new ud(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ud(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cd=new ud(1,0,0);function hd(t){return t.__zoom||cd}function dd(){t.event.stopImmediatePropagation()}hd.prototype=ud.prototype;var fd=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()};function pd(){return!t.event.button}function md(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function _d(){return this.__zoom||cd}var gd=function(t){return function(){return t}},yd=function(t,e,n){this.target=t,this.type=e,this.selection=n};function vd(){t.event.stopImmediatePropagation()}var xd=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},bd={name:"drag"},wd={name:"space"},Md={name:"handle"},Td={name:"center"},kd={name:"x",handles:["e","w"].map(Id),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Sd={name:"y",handles:["n","s"].map(Id),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ed={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Id),input:function(t){return t},output:function(t){return t}},Cd={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ld={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Dd={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ad={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Pd={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Id(t){return{type:t}}function zd(){return!t.event.button}function Fd(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Rd(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Od(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Yd(e){var n,i=Fd,r=zd,o=Gi(s,"start","brush","end"),a=6;function s(t){var n=t.property("__brush",d).selectAll(".overlay").data([Id("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Cd.overlay).merge(n).each((function(){var t=Rd(this).extent;Su(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),t.selectAll(".selection").data([Id("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Cd.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Cd[t.type]})),t.each(l).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",h)}function l(){var t=Su(this),e=Rd(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e){return t.__brush.emitter||new c(t,e)}function c(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function h(){if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return xd()}else if(n)return;if(r.apply(this,arguments)){var i,o,a,s,c,h,d,f,p,m,_,g,y,v=this,x=t.event.target.__data__.type,b="selection"===(t.event.metaKey?x="overlay":x)?bd:t.event.altKey?Td:Md,w=e===Sd?null:Ad[x],M=e===kd?null:Pd[x],T=Rd(v),k=T.extent,S=T.selection,E=k[0][0],C=k[0][1],L=k[1][0],D=k[1][1],A=w&&M&&t.event.shiftKey,P=Il(v),I=P,z=u(v,arguments).beforestart();"overlay"===x?T.selection=S=[[i=e===Sd?E:P[0],a=e===kd?C:P[1]],[c=e===Sd?L:i,d=e===kd?D:a]]:(i=S[0][0],a=S[0][1],c=S[1][0],d=S[1][1]),o=i,s=a,h=c,f=d;var F=Su(v).attr("pointer-events","none"),R=F.selectAll(".overlay").attr("cursor",Cd[x]);if(t.event.touches)F.on("touchmove.brush",Y,!0).on("touchend.brush touchcancel.brush",B,!0);else{var O=Su(t.event.view).on("keydown.brush",j,!0).on("keyup.brush",U,!0).on("mousemove.brush",Y,!0).on("mouseup.brush",B,!0);_h(t.event.view)}vd(),zu(v),l.call(v),z.start()}function Y(){var t=Il(v);!A||g||y||(Math.abs(t[0]-I[0])>Math.abs(t[1]-I[1])?y=!0:g=!0),I=t,_=!0,xd(),N()}function N(){var t;switch(p=I[0]-P[0],m=I[1]-P[1],b){case wd:case bd:w&&(p=Math.max(E-i,Math.min(L-c,p)),o=i+p,h=c+p),M&&(m=Math.max(C-a,Math.min(D-d,m)),s=a+m,f=d+m);break;case Md:w<0?(p=Math.max(E-i,Math.min(L-i,p)),o=i+p,h=c):w>0&&(p=Math.max(E-c,Math.min(L-c,p)),o=i,h=c+p),M<0?(m=Math.max(C-a,Math.min(D-a,m)),s=a+m,f=d):M>0&&(m=Math.max(C-d,Math.min(D-d,m)),s=a,f=d+m);break;case Td:w&&(o=Math.max(E,Math.min(L,i-p*w)),h=Math.max(E,Math.min(L,c+p*w))),M&&(s=Math.max(C,Math.min(D,a-m*M)),f=Math.max(C,Math.min(D,d+m*M)))}h<o&&(w*=-1,t=i,i=c,c=t,t=o,o=h,h=t,x in Ld&&R.attr("cursor",Cd[x=Ld[x]])),f<s&&(M*=-1,t=a,a=d,d=t,t=s,s=f,f=t,x in Dd&&R.attr("cursor",Cd[x=Dd[x]])),T.selection&&(S=T.selection),g&&(o=S[0][0],h=S[1][0]),y&&(s=S[0][1],f=S[1][1]),S[0][0]===o&&S[0][1]===s&&S[1][0]===h&&S[1][1]===f||(T.selection=[[o,s],[h,f]],l.call(v),z.brush())}function B(){if(vd(),t.event.touches){if(t.event.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),F.on("touchmove.brush touchend.brush touchcancel.brush",null)}else gh(t.event.view,_),O.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);F.attr("pointer-events","all"),R.attr("cursor",Cd.overlay),T.selection&&(S=T.selection),Od(S)&&(T.selection=null,l.call(v)),z.end()}function j(){switch(t.event.keyCode){case 16:A=w&&M;break;case 18:b===Md&&(w&&(c=h-p*w,i=o+p*w),M&&(d=f-m*M,a=s+m*M),b=Td,N());break;case 32:b!==Md&&b!==Td||(w<0?c=h-p:w>0&&(i=o-p),M<0?d=f-m:M>0&&(a=s-m),b=wd,R.attr("cursor",Cd.selection),N());break;default:return}xd()}function U(){switch(t.event.keyCode){case 16:A&&(g=y=A=!1,N());break;case 18:b===Td&&(w<0?c=h:w>0&&(i=o),M<0?d=f:M>0&&(a=s),b=Md,N());break;case 32:b===wd&&(t.event.altKey?(w&&(c=h-p*w,i=o+p*w),M&&(d=f-m*M,a=s+m*M),b=Td):(w<0?c=h:w>0&&(i=o),M<0?d=f:M>0&&(a=s),b=Md),R.attr("cursor",Cd[x]),N());break;default:return}xd()}}function d(){var t=this.__brush||{selection:null};return t.extent=i.apply(this,arguments),t.dim=e,t}return s.move=function(t,n){t.selection?t.on("start.brush",(function(){u(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){u(this,arguments).end()})).tween("brush",(function(){var t=this,i=t.__brush,r=u(t,arguments),o=i.selection,a=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=Ei(o,a);function c(e){i.selection=1===e&&Od(a)?null:s(e),l.call(t),r.brush()}return o&&a?c:c(1)})):t.each((function(){var t=this,i=arguments,r=t.__brush,o=e.input("function"==typeof n?n.apply(t,i):n,r.extent),a=u(t,i).beforestart();zu(t),r.selection=null==o||Od(o)?null:o,l.call(t),a.start().brush().end()}))},c.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Dl(new yd(s,t,e.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},s.extent=function(t){return arguments.length?(i="function"==typeof t?t:gd([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),s):i},s.filter=function(t){return arguments.length?(r="function"==typeof t?t:gd(!!t),s):r},s.handleSize=function(t){return arguments.length?(a=+t,s):a},s.on=function(){var t=o.on.apply(o,arguments);return t===o?s:t},s}var Nd=Math.cos,Bd=Math.sin,jd=Math.PI,Ud=jd/2,$d=2*jd,Hd=Math.max;function Vd(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var qd=Array.prototype.slice,Wd=function(t){return function(){return t}};function Gd(t){return t.source}function Zd(t){return t.target}function Xd(t){return t.radius}function Kd(t){return t.startAngle}function Jd(t){return t.endAngle}var Qd=function(){return new tf};function tf(){this.reset()}tf.prototype={constructor:tf,reset:function(){this.s=this.t=0},add:function(t){nf(ef,t,this.t),nf(this,ef.s,this.s),this.s?this.t+=ef.t:this.s=ef.t},valueOf:function(){return this.s}};var ef=new tf;function nf(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var rf=1e-6,of=Math.PI,af=of/2,sf=of/4,lf=2*of,uf=180/of,cf=of/180,hf=Math.abs,df=Math.atan,ff=Math.atan2,pf=Math.cos,mf=Math.ceil,_f=Math.exp,gf=Math.log,yf=Math.pow,vf=Math.sin,xf=Math.sign||function(t){return t>0?1:t<0?-1:0},bf=Math.sqrt,wf=Math.tan;function Mf(t){return t>1?0:t<-1?of:Math.acos(t)}function Tf(t){return t>1?af:t<-1?-af:Math.asin(t)}function kf(t){return(t=vf(t/2))*t}function Sf(){}function Ef(t,e){t&&Lf.hasOwnProperty(t.type)&&Lf[t.type](t,e)}var Cf={Feature:function(t,e){Ef(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Ef(n[i].geometry,e)}},Lf={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Df(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Df(n[i],e,0)},Polygon:function(t,e){Af(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Af(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Ef(n[i],e)}};function Df(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Af(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Df(t[n],e,1);e.polygonEnd()}var Pf,If,zf,Ff,Rf,Of=function(t,e){t&&Cf.hasOwnProperty(t.type)?Cf[t.type](t,e):Ef(t,e)},Yf=Qd(),Nf=Qd(),Bf={point:Sf,lineStart:Sf,lineEnd:Sf,polygonStart:function(){Yf.reset(),Bf.lineStart=jf,Bf.lineEnd=Uf},polygonEnd:function(){var t=+Yf;Nf.add(t<0?lf+t:t),this.lineStart=this.lineEnd=this.point=Sf},sphere:function(){Nf.add(lf)}};function jf(){Bf.point=$f}function Uf(){Hf(Pf,If)}function $f(t,e){Bf.point=Hf,Pf=t,If=e,zf=t*=cf,Ff=pf(e=(e*=cf)/2+sf),Rf=vf(e)}function Hf(t,e){var n=(t*=cf)-zf,i=n>=0?1:-1,r=i*n,o=pf(e=(e*=cf)/2+sf),a=vf(e),s=Rf*a,l=Ff*o+s*pf(r),u=s*i*vf(r);Yf.add(ff(u,l)),zf=t,Ff=o,Rf=a}var Vf,qf,Wf,Gf,Zf,Xf,Kf,Jf;function Qf(t){return[ff(t[1],t[0]),Tf(t[2])]}function tp(t){var e=t[0],n=t[1],i=pf(n);return[i*pf(e),i*vf(e),vf(n)]}function ep(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function np(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ip(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function rp(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function op(t){var e=bf(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var ap,sp,lp=Qd(),up={point:cp,lineStart:dp,lineEnd:fp,polygonStart:function(){up.point=pp,up.lineStart=mp,up.lineEnd=_p,lp.reset(),Bf.polygonStart()},polygonEnd:function(){Bf.polygonEnd(),up.point=cp,up.lineStart=dp,up.lineEnd=fp,Yf<0?(Vf=-(Wf=180),qf=-(Gf=90)):lp>rf?Gf=90:lp<-1e-6&&(qf=-90),sp[0]=Vf,sp[1]=Wf}};function cp(t,e){ap.push(sp=[Vf=t,Wf=t]),e<qf&&(qf=e),e>Gf&&(Gf=e)}function hp(t,e){var n=tp([t*cf,e*cf]);if(Jf){var i=np(Jf,n),r=np([i[1],-i[0],0],i);op(r),r=Qf(r);var o,a=t-Zf,s=a>0?1:-1,l=r[0]*uf*s,u=hf(a)>180;u^(s*Zf<l&&l<s*t)?(o=r[1]*uf)>Gf&&(Gf=o):u^(s*Zf<(l=(l+360)%360-180)&&l<s*t)?(o=-r[1]*uf)<qf&&(qf=o):(e<qf&&(qf=e),e>Gf&&(Gf=e)),u?t<Zf?gp(Vf,t)>gp(Vf,Wf)&&(Wf=t):gp(t,Wf)>gp(Vf,Wf)&&(Vf=t):Wf>=Vf?(t<Vf&&(Vf=t),t>Wf&&(Wf=t)):t>Zf?gp(Vf,t)>gp(Vf,Wf)&&(Wf=t):gp(t,Wf)>gp(Vf,Wf)&&(Vf=t)}else cp(t,e);Jf=n,Zf=t}function dp(){up.point=hp}function fp(){sp[0]=Vf,sp[1]=Wf,up.point=cp,Jf=null}function pp(t,e){if(Jf){var n=t-Zf;lp.add(hf(n)>180?n+(n>0?360:-360):n)}else Xf=t,Kf=e;Bf.point(t,e),hp(t,e)}function mp(){Bf.lineStart()}function _p(){pp(Xf,Kf),Bf.lineEnd(),hf(lp)>rf&&(Vf=-(Wf=180)),sp[0]=Vf,sp[1]=Wf,Jf=null}function gp(t,e){return(e-=t)<0?e+360:e}function yp(t,e){return t[0]-e[0]}function vp(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var xp,bp,wp,Mp,Tp,kp,Sp,Ep,Cp,Lp,Dp,Ap,Pp,Ip,zp,Fp,Rp={sphere:Sf,point:Op,lineStart:Np,lineEnd:Up,polygonStart:function(){Rp.lineStart=$p,Rp.lineEnd=Hp},polygonEnd:function(){Rp.lineStart=Np,Rp.lineEnd=Up}};function Op(t,e){t*=cf;var n=pf(e*=cf);Yp(n*pf(t),n*vf(t),vf(e))}function Yp(t,e,n){++xp,wp+=(t-wp)/xp,Mp+=(e-Mp)/xp,Tp+=(n-Tp)/xp}function Np(){Rp.point=Bp}function Bp(t,e){t*=cf;var n=pf(e*=cf);Ip=n*pf(t),zp=n*vf(t),Fp=vf(e),Rp.point=jp,Yp(Ip,zp,Fp)}function jp(t,e){t*=cf;var n=pf(e*=cf),i=n*pf(t),r=n*vf(t),o=vf(e),a=ff(bf((a=zp*o-Fp*r)*a+(a=Fp*i-Ip*o)*a+(a=Ip*r-zp*i)*a),Ip*i+zp*r+Fp*o);bp+=a,kp+=a*(Ip+(Ip=i)),Sp+=a*(zp+(zp=r)),Ep+=a*(Fp+(Fp=o)),Yp(Ip,zp,Fp)}function Up(){Rp.point=Op}function $p(){Rp.point=Vp}function Hp(){qp(Ap,Pp),Rp.point=Op}function Vp(t,e){Ap=t,Pp=e,t*=cf,e*=cf,Rp.point=qp;var n=pf(e);Ip=n*pf(t),zp=n*vf(t),Fp=vf(e),Yp(Ip,zp,Fp)}function qp(t,e){t*=cf;var n=pf(e*=cf),i=n*pf(t),r=n*vf(t),o=vf(e),a=zp*o-Fp*r,s=Fp*i-Ip*o,l=Ip*r-zp*i,u=bf(a*a+s*s+l*l),c=Ip*i+zp*r+Fp*o,h=u&&-Mf(c)/u,d=ff(u,c);Cp+=h*a,Lp+=h*s,Dp+=h*l,bp+=d,kp+=d*(Ip+(Ip=i)),Sp+=d*(zp+(zp=r)),Ep+=d*(Fp+(Fp=o)),Yp(Ip,zp,Fp)}var Wp=function(t){return function(){return t}},Gp=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n};function Zp(t,e){return[t>of?t-lf:t<-of?t+lf:t,e]}function Xp(t,e,n){return(t%=lf)?e||n?Gp(Jp(t),Qp(e,n)):Jp(t):e||n?Qp(e,n):Zp}function Kp(t){return function(e,n){return[(e+=t)>of?e-lf:e<-of?e+lf:e,n]}}function Jp(t){var e=Kp(t);return e.invert=Kp(-t),e}function Qp(t,e){var n=pf(t),i=vf(t),r=pf(e),o=vf(e);function a(t,e){var a=pf(e),s=pf(t)*a,l=vf(t)*a,u=vf(e),c=u*n+s*i;return[ff(l*r-c*o,s*n-u*i),Tf(c*r+l*o)]}return a.invert=function(t,e){var a=pf(e),s=pf(t)*a,l=vf(t)*a,u=vf(e),c=u*r-l*o;return[ff(l*r+u*o,s*n+c*i),Tf(c*n-s*i)]},a}Zp.invert=Zp;function tm(t,e,n,i,r,o){if(n){var a=pf(e),s=vf(e),l=i*n;null==r?(r=e+i*lf,o=e-l/2):(r=em(a,r),o=em(a,o),(i>0?r<o:r>o)&&(r+=i*lf));for(var u,c=r;i>0?c>o:c<o;c-=l)u=Qf([a,-s*pf(c),-s*vf(c)]),t.point(u[0],u[1])}}function em(t,e){(e=tp(e))[0]-=t,op(e);var n=Mf(-e[1]);return((-e[2]<0?-n:n)+lf-rf)%lf}var nm=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Sf,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},im=function(t,e){return hf(t[0]-e[0])<rf&&hf(t[1]-e[1])<rf};function rm(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}var om=function(t,e,n,i,r){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(im(i,a)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else s.push(n=new rm(i,t,null,!0)),l.push(n.o=new rm(i,null,n,!1)),s.push(n=new rm(a,t,null,!1)),l.push(n.o=new rm(a,null,n,!0))}})),s.length){for(l.sort(e),am(s),am(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,h=s[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;u=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(o=0,a=u.length;o<a;++o)r.point((c=u[o])[0],c[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(u=d.p.z,o=u.length-1;o>=0;--o)r.point((c=u[o])[0],c[1]);else i(d.x,d.p.x,-1,r);d=d.p}u=(d=d.o).z,f=!f}while(!d.v);r.lineEnd()}}};function am(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}var sm=1e9,lm=-sm;function um(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,s,u){var c=0,h=0;if(null==r||(c=a(r,s))!==(h=a(o,s))||l(r,o)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+s+4)%4)!==h);else u.point(o[0],o[1])}function a(i,r){return hf(i[0]-t)<rf?r>0?0:3:hf(i[0]-n)<rf?r>0?2:1:hf(i[1]-e)<rf?r>0?1:0:r>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,u,c,h,d,f,p,m,_,g,y,v=a,x=nm(),b={point:w,lineStart:function(){b.point=T,u&&u.push(c=[]),g=!0,_=!1,p=m=NaN},lineEnd:function(){l&&(T(h,d),f&&_&&x.rejoin(),l.push(x.result())),b.point=w,_&&v.lineEnd()},polygonStart:function(){v=x,l=[],u=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var o,a,s=u[n],l=1,c=s.length,h=s[0],d=h[0],f=h[1];l<c;++l)o=d,a=f,d=(h=s[l])[0],f=h[1],a<=i?f>i&&(d-o)*(i-a)>(f-a)*(t-o)&&++e:f<=i&&(d-o)*(i-a)<(f-a)*(t-o)&&--e;return e}(),n=y&&e,r=(l=M(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&om(l,s,e,o,a),a.polygonEnd()),v=a,l=u=c=null}};function w(t,e){r(t,e)&&v.point(t,e)}function T(o,a){var s=r(o,a);if(u&&c.push([o,a]),g)h=o,d=a,f=s,g=!1,s&&(v.lineStart(),v.point(o,a));else if(s&&_)v.point(o,a);else{var l=[p=Math.max(lm,Math.min(sm,p)),m=Math.max(lm,Math.min(sm,m))],x=[o=Math.max(lm,Math.min(sm,o)),a=Math.max(lm,Math.min(sm,a))];!function(t,e,n,i,r,o){var a,s=t[0],l=t[1],u=0,c=1,h=e[0]-s,d=e[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<u)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>u&&(u=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>u&&(u=a)}else if(h>0){if(a<u)return;a<c&&(c=a)}if(a=i-l,d||!(a>0)){if(a/=d,d<0){if(a<u)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>u&&(u=a)}else if(d>0){if(a<u)return;a<c&&(c=a)}return u>0&&(t[0]=s+u*h,t[1]=l+u*d),c<1&&(e[0]=s+c*h,e[1]=l+c*d),!0}}}}}(l,x,t,e,n,i)?s&&(v.lineStart(),v.point(o,a),y=!1):(_||(v.lineStart(),v.point(l[0],l[1])),v.point(x[0],x[1]),s||v.lineEnd(),y=!1)}p=o,m=a,_=s}return b}}var cm,hm,dm,fm=Qd(),pm={sphere:Sf,point:Sf,lineStart:function(){pm.point=_m,pm.lineEnd=mm},lineEnd:Sf,polygonStart:Sf,polygonEnd:Sf};function mm(){pm.point=pm.lineEnd=Sf}function _m(t,e){cm=t*=cf,hm=vf(e*=cf),dm=pf(e),pm.point=gm}function gm(t,e){t*=cf;var n=vf(e*=cf),i=pf(e),r=hf(t-cm),o=pf(r),a=i*vf(r),s=dm*n-hm*i*o,l=hm*n+dm*i*o;fm.add(ff(bf(a*a+s*s),l)),cm=t,hm=n,dm=i}var ym=function(t){return fm.reset(),Of(t,pm),+fm},vm=[null,null],xm={type:"LineString",coordinates:vm};function bm(t,e,n){var i=m(t,e-rf,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function wm(t,e,n){var i=m(t,e-rf,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function Mm(){var t,e,n,i,r,o,a,s,l,u,c,h,d=10,f=d,p=90,_=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return m(mf(i/p)*p,n,p).map(c).concat(m(mf(s/_)*_,a,_).map(h)).concat(m(mf(e/d)*d,t,d).filter((function(t){return hf(t%p)>rf})).map(l)).concat(m(mf(o/f)*f,r,f).filter((function(t){return hf(t%_)>rf})).map(u))}return y.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(h(a).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],i>n&&(t=i,i=n,n=t),s>a&&(t=s,s=a,a=t),y.precision(g)):[[i,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),o>r&&(n=o,o=r,r=n),y.precision(g)):[[e,o],[t,r]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(p=+t[0],_=+t[1],y):[p,_]},y.stepMinor=function(t){return arguments.length?(d=+t[0],f=+t[1],y):[d,f]},y.precision=function(d){return arguments.length?(g=+d,l=bm(o,r,90),u=wm(e,t,g),c=bm(s,a,90),h=wm(i,n,g),y):g},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}var Tm,km,Sm,Em,Cm=function(t){return t},Lm=Qd(),Dm=Qd(),Am={point:Sf,lineStart:Sf,lineEnd:Sf,polygonStart:function(){Am.lineStart=Pm,Am.lineEnd=Fm},polygonEnd:function(){Am.lineStart=Am.lineEnd=Am.point=Sf,Lm.add(hf(Dm)),Dm.reset()},result:function(){var t=Lm/2;return Lm.reset(),t}};function Pm(){Am.point=Im}function Im(t,e){Am.point=zm,Tm=Sm=t,km=Em=e}function zm(t,e){Dm.add(Em*t-Sm*e),Sm=t,Em=e}function Fm(){zm(Tm,km)}var Rm=1/0,Om=Rm,Ym=-Rm,Nm=Ym,Bm={point:function(t,e){t<Rm&&(Rm=t),t>Ym&&(Ym=t),e<Om&&(Om=e),e>Nm&&(Nm=e)},lineStart:Sf,lineEnd:Sf,polygonStart:Sf,polygonEnd:Sf,result:function(){var t=[[Rm,Om],[Ym,Nm]];return Ym=Nm=-(Om=Rm=1/0),t}};var jm,Um,$m,Hm,Vm=0,qm=0,Wm=0,Gm=0,Zm=0,Xm=0,Km=0,Jm=0,Qm=0,t_={point:e_,lineStart:n_,lineEnd:o_,polygonStart:function(){t_.lineStart=a_,t_.lineEnd=s_},polygonEnd:function(){t_.point=e_,t_.lineStart=n_,t_.lineEnd=o_},result:function(){var t=Qm?[Km/Qm,Jm/Qm]:Xm?[Gm/Xm,Zm/Xm]:Wm?[Vm/Wm,qm/Wm]:[NaN,NaN];return Vm=qm=Wm=Gm=Zm=Xm=Km=Jm=Qm=0,t}};function e_(t,e){Vm+=t,qm+=e,++Wm}function n_(){t_.point=i_}function i_(t,e){t_.point=r_,e_($m=t,Hm=e)}function r_(t,e){var n=t-$m,i=e-Hm,r=bf(n*n+i*i);Gm+=r*($m+t)/2,Zm+=r*(Hm+e)/2,Xm+=r,e_($m=t,Hm=e)}function o_(){t_.point=e_}function a_(){t_.point=l_}function s_(){u_(jm,Um)}function l_(t,e){t_.point=u_,e_(jm=$m=t,Um=Hm=e)}function u_(t,e){var n=t-$m,i=e-Hm,r=bf(n*n+i*i);Gm+=r*($m+t)/2,Zm+=r*(Hm+e)/2,Xm+=r,Km+=(r=Hm*t-$m*e)*($m+t),Jm+=r*(Hm+e),Qm+=3*r,e_($m=t,Hm=e)}function c_(t){this._context=t}function h_(){this._string=[]}function d_(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}c_.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,lf)}},result:Sf},h_.prototype={_circle:d_(4.5),pointRadius:function(t){return this._circle=d_(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var f_=Qd(),p_=function(t,e,n,i){return function(r,o){var a,s,l,u=e(o),c=r.invert(i[0],i[1]),h=nm(),d=e(h),f=!1,p={point:m,lineStart:g,lineEnd:y,polygonStart:function(){p.point=v,p.lineStart=x,p.lineEnd=b,s=[],a=[]},polygonEnd:function(){p.point=m,p.lineStart=g,p.lineEnd=y,s=M(s);var t=function(t,e){var n=e[0],i=e[1],r=[vf(n),-pf(n),0],o=0,a=0;f_.reset();for(var s=0,l=t.length;s<l;++s)if(c=(u=t[s]).length)for(var u,c,h=u[c-1],d=h[0],f=h[1]/2+sf,p=vf(f),m=pf(f),_=0;_<c;++_,d=y,p=x,m=b,h=g){var g=u[_],y=g[0],v=g[1]/2+sf,x=vf(v),b=pf(v),w=y-d,M=w>=0?1:-1,T=M*w,k=T>of,S=p*x;if(f_.add(ff(S*M*vf(T),m*b+S*pf(T))),o+=k?w+M*lf:w,k^d>=n^y>=n){var E=np(tp(h),tp(g));op(E);var C=np(r,E);op(C);var L=(k^w>=0?-1:1)*Tf(C[2]);(i>L||i===L&&(E[0]||E[1]))&&(a+=k^w>=0?1:-1)}}return(o<-1e-6||o<rf&&f_<-1e-6)^1&a}(a,c);s.length?(f||(o.polygonStart(),f=!0),om(s,__,t,n,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function _(t,e){var n=r(t,e);u.point(n[0],n[1])}function g(){p.point=_,u.lineStart()}function y(){p.point=m,u.lineEnd()}function v(t,e){l.push([t,e]);var n=r(t,e);d.point(n[0],n[1])}function x(){d.lineStart(),l=[]}function b(){v(l[0][0],l[0][1]),d.lineEnd();var t,e,n,i,r=d.clean(),u=h.result(),c=u.length;if(l.pop(),a.push(l),l=null,c)if(1&r){if((e=(n=u[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else c>1&&2&r&&u.push(u.pop().concat(u.shift())),s.push(u.filter(m_))}return p}};function m_(t){return t.length>1}function __(t,e){return((t=t.x)[0]<0?t[1]-af-rf:af-t[1])-((e=e.x)[0]<0?e[1]-af-rf:af-e[1])}var g_=p_((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?of:-of,l=hf(o-n);hf(l-of)<rf?(t.point(n,i=(i+a)/2>0?af:-af),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=of&&(hf(n-r)<rf&&(n-=r*rf),hf(o-s)<rf&&(o-=s*rf),i=function(t,e,n,i){var r,o,a=vf(t-n);return hf(a)>rf?df((vf(e)*(o=pf(i))*vf(n)-vf(i)*(r=pf(e))*vf(t))/(r*o*a)):(e+i)/2}(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*af,i.point(-of,r),i.point(0,r),i.point(of,r),i.point(of,0),i.point(of,-r),i.point(0,-r),i.point(-of,-r),i.point(-of,0),i.point(-of,r);else if(hf(t[0]-e[0])>rf){var o=t[0]<e[0]?of:-of;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-of,-af]);var y_=function(t,e){var n=pf(t),i=n>0,r=hf(n)>rf;function o(t,e){return pf(t)*pf(e)>n}function a(t,e,i){var r=[1,0,0],o=np(tp(t),tp(e)),a=ep(o,o),s=o[0],l=a-s*s;if(!l)return!i&&t;var u=n*a/l,c=-n*s/l,h=np(r,o),d=rp(r,u);ip(d,rp(o,c));var f=h,p=ep(d,f),m=ep(f,f),_=p*p-m*(ep(d,d)-1);if(!(_<0)){var g=bf(_),y=rp(f,(-p-g)/m);if(ip(y,d),y=Qf(y),!i)return y;var v,x=t[0],b=e[0],w=t[1],M=e[1];b<x&&(v=x,x=b,b=v);var T=b-x,k=hf(T-of)<rf;if(!k&&M<w&&(v=w,w=M,M=v),k||T<rf?k?w+M>0^y[1]<(hf(y[0]-x)<rf?w:M):w<=y[1]&&y[1]<=M:T>of^(x<=y[0]&&y[0]<=b)){var S=rp(f,(-p+g)/m);return ip(S,d),[y,Qf(S)]}}}function s(e,n){var r=i?t:of-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return p_(o,(function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var f,p=[h,d],m=o(h,d),_=i?m?0:s(h,d):m?s(h+(h<0?of:-of),d):0;if(!e&&(u=l=m)&&t.lineStart(),m!==l&&(f=a(e,p),(im(e,f)||im(p,f))&&(p[0]+=rf,p[1]+=rf,m=o(p[0],p[1]))),m!==l)c=0,m?(t.lineStart(),f=a(p,e),t.point(f[0],f[1])):(f=a(e,p),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(r&&e&&i^m){var g;_&n||!(g=a(p,e,!0))||(c=0,i?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!m||e&&im(e,p)||t.point(p[0],p[1]),e=p,l=m,n=_},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),(function(n,i,r,o){tm(o,t,e,r,n,i)}),i?[0,-t]:[-of,t-of])};function v_(t){return function(e){var n=new x_;for(var i in t)n[i]=t[i];return n.stream=e,n}}function x_(){}function b_(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Of(n,t.stream(Bm));var a=Bm.result(),s=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+e[0][0]+(i-s*(a[1][0]+a[0][0]))/2,u=+e[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,u])}function w_(t,e,n){return b_(t,[[0,0],e],n)}x_.prototype={constructor:x_,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var M_=pf(30*cf),T_=function(t,e){return+e?function(t,e){function n(i,r,o,a,s,l,u,c,h,d,f,p,m,_){var g=u-i,y=c-r,v=g*g+y*y;if(v>4*e&&m--){var x=a+d,b=s+f,w=l+p,M=bf(x*x+b*b+w*w),T=Tf(w/=M),k=hf(hf(w)-1)<rf||hf(o-h)<rf?(o+h)/2:ff(b,x),S=t(k,T),E=S[0],C=S[1],L=E-i,D=C-r,A=y*L-g*D;(A*A/v>e||hf((g*L+y*D)/v-.5)>.3||a*d+s*f+l*p<M_)&&(n(i,r,o,a,s,l,E,C,k,x/=M,b/=M,w,m,_),_.point(E,C),n(E,C,k,x,b,w,u,c,h,d,f,p,m,_))}}return function(e){var i,r,o,a,s,l,u,c,h,d,f,p,m={point:_,lineStart:g,lineEnd:v,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=g}};function _(n,i){n=t(n,i),e.point(n[0],n[1])}function g(){c=NaN,m.point=y,e.lineStart()}function y(i,r){var o=tp([i,r]),a=t(i,r);n(c,h,u,d,f,p,c=a[0],h=a[1],u=i,d=o[0],f=o[1],p=o[2],16,e),e.point(c,h)}function v(){m.point=_,e.lineEnd()}function x(){g(),m.point=b,m.lineEnd=w}function b(t,e){y(i=t,e),r=c,o=h,a=d,s=f,l=p,m.point=y}function w(){n(c,h,u,d,f,p,r,o,i,a,s,l,16,e),m.lineEnd=v,v()}return m}}(t,e):function(t){return v_({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var k_=v_({point:function(t,e){this.stream.point(t*cf,e*cf)}});function S_(t){return E_((function(){return t}))()}function E_(t){var e,n,i,r,o,a,s,l,u,c,h=150,d=480,f=250,p=0,m=0,_=0,g=0,y=0,v=null,x=g_,b=null,w=Cm,M=.5,T=T_(E,M);function k(t){return[(t=o(t[0]*cf,t[1]*cf))[0]*h+n,i-t[1]*h]}function S(t){return(t=o.invert((t[0]-n)/h,(i-t[1])/h))&&[t[0]*uf,t[1]*uf]}function E(t,r){return[(t=e(t,r))[0]*h+n,i-t[1]*h]}function C(){o=Gp(r=Xp(_,g,y),e);var t=e(p,m);return n=d-t[0]*h,i=f+t[1]*h,L()}function L(){return u=c=null,k}return k.stream=function(t){return u&&c===t?u:u=k_(x(r,T(w(c=t))))},k.clipAngle=function(t){return arguments.length?(x=+t?y_(v=t*cf,6*cf):(v=null,g_),L()):v*uf},k.clipExtent=function(t){return arguments.length?(w=null==t?(b=a=s=l=null,Cm):um(b=+t[0][0],a=+t[0][1],s=+t[1][0],l=+t[1][1]),L()):null==b?null:[[b,a],[s,l]]},k.scale=function(t){return arguments.length?(h=+t,C()):h},k.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],C()):[d,f]},k.center=function(t){return arguments.length?(p=t[0]%360*cf,m=t[1]%360*cf,C()):[p*uf,m*uf]},k.rotate=function(t){return arguments.length?(_=t[0]%360*cf,g=t[1]%360*cf,y=t.length>2?t[2]%360*cf:0,C()):[_*uf,g*uf,y*uf]},k.precision=function(t){return arguments.length?(T=T_(E,M=t*t),L()):bf(M)},k.fitExtent=function(t,e){return b_(k,t,e)},k.fitSize=function(t,e){return w_(k,t,e)},function(){return e=t.apply(this,arguments),k.invert=e.invert&&S,C()}}function C_(t){var e=0,n=of/3,i=E_(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*cf,n=t[1]*cf):[e*uf,n*uf]},r}function L_(t,e){var n=vf(t),i=(n+vf(e))/2;if(hf(i)<rf)return function(t){var e=pf(t);function n(t,n){return[t*e,vf(n)/e]}return n.invert=function(t,n){return[t/e,Tf(n*e)]},n}(t);var r=1+n*(2*i-n),o=bf(r)/i;function a(t,e){var n=bf(r-2*i*vf(e))/i;return[n*vf(t*=i),o-n*pf(t)]}return a.invert=function(t,e){var n=o-e;return[ff(t,hf(n))/i*xf(n),Tf((r-(t*t+n*n)*i*i)/(2*i))]},a}var D_=function(){return C_(L_).scale(155.424).center([0,33.6442])},A_=function(){return D_().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function P_(t){return function(e,n){var i=pf(e),r=pf(n),o=t(i*r);return[o*r*vf(e),o*vf(n)]}}function I_(t){return function(e,n){var i=bf(e*e+n*n),r=t(i),o=vf(r),a=pf(r);return[ff(e*o,i*a),Tf(i&&n*o/i)]}}var z_=P_((function(t){return bf(2/(1+t))}));z_.invert=I_((function(t){return 2*Tf(t/2)}));var F_=P_((function(t){return(t=Mf(t))&&t/vf(t)}));F_.invert=I_((function(t){return t}));function R_(t,e){return[t,gf(wf((af+e)/2))]}R_.invert=function(t,e){return[t,2*df(_f(e))-af]};function O_(t){var e,n=S_(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.translate=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.clipExtent=function(t){if(!arguments.length)return e?null:o();if(e=null==t){var a=of*i(),s=r();t=[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]}return o(t),n},n.clipExtent(null)}function Y_(t){return wf((af+t)/2)}function N_(t,e){var n=pf(t),i=t===e?vf(t):gf(n/pf(e))/gf(Y_(e)/Y_(t)),r=n*yf(Y_(t),i)/i;if(!i)return R_;function o(t,e){r>0?e<-af+rf&&(e=-af+rf):e>af-rf&&(e=af-rf);var n=r/yf(Y_(e),i);return[n*vf(i*t),r-n*pf(i*t)]}return o.invert=function(t,e){var n=r-e,o=xf(i)*bf(t*t+n*n);return[ff(t,hf(n))/i*xf(n),2*df(yf(r/o,1/i))-af]},o}function B_(t,e){return[t,e]}B_.invert=B_;function j_(t,e){var n=pf(t),i=t===e?vf(t):(n-pf(e))/(e-t),r=n/i+t;if(hf(i)<rf)return B_;function o(t,e){var n=r-e,o=i*t;return[n*vf(o),r-n*pf(o)]}return o.invert=function(t,e){var n=r-e;return[ff(t,hf(n))/i*xf(n),r-xf(i)*bf(t*t+n*n)]},o}function U_(t,e){var n=pf(e),i=pf(t)*n;return[n*vf(t)/i,vf(e)/i]}U_.invert=I_(df);function $_(t,e,n){return 1===t&&0===e&&0===n?Cm:v_({point:function(i,r){this.stream.point(i*t+e,r*t+n)}})}function H_(t,e){return[pf(e)*vf(t),vf(e)]}H_.invert=I_(Tf);function V_(t,e){var n=pf(e),i=1+pf(t)*n;return[n*vf(t)/i,vf(e)/i]}V_.invert=I_((function(t){return 2*df(t)}));function q_(t,e){return[gf(wf((af+e)/2)),-t]}q_.invert=function(t,e){return[-e,2*df(_f(t))-af]};t.version="4.3.0",t.bisect=r,t.bisectRight=r,t.bisectLeft=o,t.ascending=e,t.bisector=n,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=l,t.extent=u,t.histogram=function(){var t=p,e=u,n=b;function i(i){var o,a,s=i.length,l=new Array(s);for(o=0;o<s;++o)l[o]=t(i[o],o,i);var u=e(l),c=u[0],h=u[1],d=n(l,c,h);Array.isArray(d)||(d=v(c,h,d));for(var f=d.length;d[0]<=c;)d.shift(),--f;for(;d[f-1]>=h;)d.pop(),--f;var p,m=new Array(f+1);for(o=0;o<=f;++o)(p=m[o]=[]).x0=o>0?d[o-1]:c,p.x1=o<f?d[o]:h;for(o=0;o<s;++o)c<=(a=l[o])&&a<=h&&m[r(d,a,0,f)].push(i[o]);return m}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:f(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:f([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?f(h.call(t)):f(t),i):n},i},t.thresholdFreedmanDiaconis=function(t,n,i){return t=d.call(t,a).sort(e),Math.ceil((i-n)/(2*(w(t,.75)-w(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*l(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=b,t.max=function(t,e){var n,i,r=-1,o=t.length;if(null==e){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=e(t[r],r,t))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e(t[r],r,t))&&i>n&&(n=i)}return n},t.mean=function(t,e){var n,i=0,r=t.length,o=-1,s=r;if(null==e)for(;++o<r;)isNaN(n=a(t[o]))?--s:i+=n;else for(;++o<r;)isNaN(n=a(e(t[o],o,t)))?--s:i+=n;if(s)return i/s},t.median=function(t,n){var i,r=[],o=t.length,s=-1;if(null==n)for(;++s<o;)isNaN(i=a(t[s]))||r.push(i);else for(;++s<o;)isNaN(i=a(n(t[s],s,t)))||r.push(i);return w(r.sort(e),.5)},t.merge=M,t.min=T,t.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},t.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},t.quantile=w,t.range=m,t.scan=function(t,n){if(i=t.length){var i,r,o=0,a=0,s=t[a];for(n||(n=e);++o<i;)(n(r=t[o],s)<0||0!==n(s,s))&&(s=r,a=o);return 0===n(s,s)?a:void 0}},t.shuffle=function(t,e,n){for(var i,r,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},t.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(null==e)for(;++o<r;)(n=+t[o])&&(i+=n);else for(;++o<r;)(n=+e(t[o],o,t))&&(i+=n);return i},t.ticks=v,t.tickStep=x,t.transpose=k,t.variance=s,t.zip=function(){return k(arguments)},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.map=L,t.set=R,t.nest=function(){var t,e,n,i=[],r=[];function o(n,r,a,s){if(r>=i.length)return null!=e?e(n):null!=t?n.sort(t):n;for(var l,u,c,h=-1,d=n.length,f=i[r++],p=L(),m=a();++h<d;)(c=p.get(l=f(u=n[h])+""))?c.push(u):p.set(l,[u]);return p.each((function(t,e){s(m,e,o(t,r,a,s))})),m}function a(t,n){if(++n>i.length)return t;var o,s=r[n-1];return null!=e&&n>=i.length?o=t.entries():(o=[],t.each((function(t,e){o.push({key:e,values:a(t,n)})}))),null!=s?o.sort((function(t,e){return s(t.key,e.key)})):o}return n={object:function(t){return o(t,0,D,A)},map:function(t){return o(t,0,P,I)},entries:function(t){return a(o(t,0,P,I),0)},key:function(t){return i.push(t),n},sortKeys:function(t){return r[i.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}},t.randomUniform=function(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return Math.random()*e+t}},t.randomNormal=O,t.randomLogNormal=function(){var t=O.apply(this,arguments);return function(){return Math.exp(t())}},t.randomBates=function(t){var e=Y(t);return function(){return e()/t}},t.randomIrwinHall=Y,t.randomExponential=function(t){return function(){return-Math.log(1-Math.random())/t}},t.easeLinear=function(t){return+t},t.easeQuad=N,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=N,t.easeCubic=B,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=B,t.easePoly=$,t.easePolyIn=j,t.easePolyOut=U,t.easePolyInOut=$,t.easeSin=q,t.easeSinIn=function(t){return 1-Math.cos(t*V)},t.easeSinOut=function(t){return Math.sin(t*V)},t.easeSinInOut=q,t.easeExp=W,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=W,t.easeCircle=G,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=G,t.easeBounce=K,t.easeBounceIn=function(t){return 1-K(1-t)},t.easeBounceOut=K,t.easeBounceInOut=function(t){return((t*=2)<=1?1-K(1-t):K(t-1)+1)/2},t.easeBack=et,t.easeBackIn=Q,t.easeBackOut=tt,t.easeBackInOut=et,t.easeElastic=rt,t.easeElasticIn=it,t.easeElasticOut=rt,t.easeElasticInOut=ot,t.polygonArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[1]*r[0]-e[0]*r[1];return o/2},t.polygonCentroid=function(t){for(var e,n,i=-1,r=t.length,o=0,a=0,s=t[r-1],l=0;++i<r;)e=s,s=t[i],l+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(l*=3),a/l]},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(st),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var o=lt(i),a=lt(r),s=a[0]===o[0],l=a[a.length-1]===o[o.length-1],u=[];for(e=o.length-1;e>=0;--e)u.push(t[i[o[e]][2]]);for(e=+s;e<a.length-l;++e)u.push(t[i[a[e]][2]]);return u},t.polygonContains=function(t,e){for(var n,i,r=t.length,o=t[r-1],a=e[0],s=e[1],l=o[0],u=o[1],c=!1,h=0;h<r;++h)n=(o=t[h])[0],(i=o[1])>s!=u>s&&a<(l-n)*(s-i)/(u-i)+n&&(c=!c),l=n,u=i;return c},t.polygonLength=function(t){for(var e,n,i=-1,r=t.length,o=t[r-1],a=o[0],s=o[1],l=0;++i<r;)e=a,n=s,e-=a=(o=t[i])[0],n-=s=o[1],l+=Math.sqrt(e*e+n*n);return l},t.path=pt,t.quadtree=vt,t.queue=Dt,t.arc=function(){var t=Rt,e=Ot,n=At(0),i=null,r=Yt,o=Nt,a=Bt,s=null;function l(){var l,u,c=+t.apply(this,arguments),h=+e.apply(this,arguments),d=r.apply(this,arguments)-zt,f=o.apply(this,arguments)-zt,p=Math.abs(f-d),m=f>d;if(s||(s=l=pt()),h<c&&(u=h,h=c,c=u),h>Pt)if(p>Ft-Pt)s.moveTo(h*Math.cos(d),h*Math.sin(d)),s.arc(0,0,h,d,f,!m),c>Pt&&(s.moveTo(c*Math.cos(f),c*Math.sin(f)),s.arc(0,0,c,f,d,m));else{var _,g,y=d,v=f,x=d,b=f,w=p,M=p,T=a.apply(this,arguments)/2,k=T>Pt&&(i?+i.apply(this,arguments):Math.sqrt(c*c+h*h)),S=Math.min(Math.abs(h-c)/2,+n.apply(this,arguments)),E=S,C=S;if(k>Pt){var L=jt(k/c*Math.sin(T)),D=jt(k/h*Math.sin(T));(w-=2*L)>Pt?(x+=L*=m?1:-1,b-=L):(w=0,x=b=(d+f)/2),(M-=2*D)>Pt?(y+=D*=m?1:-1,v-=D):(M=0,y=v=(d+f)/2)}var A=h*Math.cos(y),P=h*Math.sin(y),I=c*Math.cos(b),z=c*Math.sin(b);if(S>Pt){var F=h*Math.cos(v),R=h*Math.sin(v),O=c*Math.cos(x),Y=c*Math.sin(x);if(p<It){var N=w>Pt?Ut(A,P,O,Y,F,R,I,z):[I,z],B=A-N[0],j=P-N[1],U=F-N[0],$=R-N[1],H=1/Math.sin(Math.acos((B*U+j*$)/(Math.sqrt(B*B+j*j)*Math.sqrt(U*U+$*$)))/2),V=Math.sqrt(N[0]*N[0]+N[1]*N[1]);E=Math.min(S,(c-V)/(H-1)),C=Math.min(S,(h-V)/(H+1))}}M>Pt?C>Pt?(_=$t(O,Y,A,P,h,C,m),g=$t(F,R,I,z,h,C,m),s.moveTo(_.cx+_.x01,_.cy+_.y01),C<S?s.arc(_.cx,_.cy,C,Math.atan2(_.y01,_.x01),Math.atan2(g.y01,g.x01),!m):(s.arc(_.cx,_.cy,C,Math.atan2(_.y01,_.x01),Math.atan2(_.y11,_.x11),!m),s.arc(0,0,h,Math.atan2(_.cy+_.y11,_.cx+_.x11),Math.atan2(g.cy+g.y11,g.cx+g.x11),!m),s.arc(g.cx,g.cy,C,Math.atan2(g.y11,g.x11),Math.atan2(g.y01,g.x01),!m))):(s.moveTo(A,P),s.arc(0,0,h,y,v,!m)):s.moveTo(A,P),c>Pt&&w>Pt?E>Pt?(_=$t(I,z,F,R,c,-E,m),g=$t(A,P,O,Y,c,-E,m),s.lineTo(_.cx+_.x01,_.cy+_.y01),E<S?s.arc(_.cx,_.cy,E,Math.atan2(_.y01,_.x01),Math.atan2(g.y01,g.x01),!m):(s.arc(_.cx,_.cy,E,Math.atan2(_.y01,_.x01),Math.atan2(_.y11,_.x11),!m),s.arc(0,0,c,Math.atan2(_.cy+_.y11,_.cx+_.x11),Math.atan2(g.cy+g.y11,g.cx+g.x11),m),s.arc(g.cx,g.cy,E,Math.atan2(g.y11,g.x11),Math.atan2(g.y01,g.x01),!m))):s.arc(0,0,c,b,x,m):s.lineTo(I,z)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-It/2;return[Math.cos(i)*n,Math.sin(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:At(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:At(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:At(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:At(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:At(+t),l):r},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:At(+t),l):o},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:At(+t),l):a},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l},t.area=Zt,t.line=Gt,t.pie=function(){var t=Kt,e=Xt,n=null,i=At(0),r=At(Ft),o=At(0);function a(a){var s,l,u,c,h,d=a.length,f=0,p=new Array(d),m=new Array(d),_=+i.apply(this,arguments),g=Math.min(Ft,Math.max(-Ft,r.apply(this,arguments)-_)),y=Math.min(Math.abs(g)/d,o.apply(this,arguments)),v=y*(g<0?-1:1);for(s=0;s<d;++s)(h=m[p[s]=s]=+t(a[s],s,a))>0&&(f+=h);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(a[t],a[e])})),s=0,u=f?(g-d*v)/f:0;s<d;++s,_=c)l=p[s],c=_+((h=m[l])>0?h*u:0)+v,m[l]={data:a[l],index:s,value:h,startAngle:_,endAngle:c,padAngle:y};return m}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:At(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:At(+t),a):i},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:At(+t),a):r},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:At(+t),a):o},a},t.radialArea=function(){var t=Zt().curve(Jt),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return ee(n())},delete t.lineX0,t.lineEndAngle=function(){return ee(i())},delete t.lineX1,t.lineInnerRadius=function(){return ee(r())},delete t.lineY0,t.lineOuterRadius=function(){return ee(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(te(t)):e()._curve},t},t.radialLine=function(){return ee(Gt().curve(Jt))},t.symbol=function(){var t=At(ne),e=At(64),n=null;function i(){var i;if(n||(n=i=pt()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:At(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:At(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},t.symbols=ve,t.symbolCircle=ne,t.symbolCross=ie,t.symbolDiamond=ae,t.symbolSquare=he,t.symbolStar=ce,t.symbolTriangle=fe,t.symbolWye=ye,t.curveBasisClosed=function(t){return new Me(t)},t.curveBasisOpen=function(t){return new Te(t)},t.curveBasis=function(t){return new we(t)},t.curveBundle=Se,t.curveCardinalClosed=Ae,t.curveCardinalOpen=Ie,t.curveCardinal=Le,t.curveCatmullRomClosed=Ye,t.curveCatmullRomOpen=Be,t.curveCatmullRom=Re,t.curveLinearClosed=function(t){return new je(t)},t.curveLinear=Vt,t.curveMonotoneX=function(t){return new qe(t)},t.curveMonotoneY=function(t){return new We(t)},t.curveNatural=function(t){return new Ze(t)},t.curveStep=function(t){return new Ke(t,.5)},t.curveStepAfter=function(t){return new Ke(t,1)},t.curveStepBefore=function(t){return new Ke(t,0)},t.stack=function(){var t=At([]),e=tn,n=Qe,i=en;function r(r){var o,a,s=t.apply(this,arguments),l=r.length,u=s.length,c=new Array(u);for(o=0;o<u;++o){for(var h,d=s[o],f=c[o]=new Array(l),p=0;p<l;++p)f[p]=h=[0,+i(r[p],d,p,r)],h.data=r[p];f.key=d}for(o=0,a=e(c);o<u;++o)c[a[o]].index=o;return n(c,a),c}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:At(Je.call(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:At(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?tn:"function"==typeof t?t:At(Je.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?Qe:t,r):n},r},t.stackOffsetExpand=function(t,e){if((i=t.length)>0){for(var n,i,r,o=0,a=t[0].length;o<a;++o){for(r=n=0;n<i;++n)r+=t[n][o][1]||0;if(r)for(n=0;n<i;++n)t[n][o][1]/=r}Qe(t,e)}},t.stackOffsetNone=Qe,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],o=r.length;i<o;++i){for(var a=0,s=0;a<n;++a)s+=t[a][i][1]||0;r[i][1]+=r[i][0]=-s/2}Qe(t,e)}},t.stackOffsetWiggle=function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,o=0,a=1;a<i;++a){for(var s=0,l=0,u=0;s<r;++s){for(var c=t[e[s]],h=c[a][1]||0,d=(h-(c[a-1][1]||0))/2,f=0;f<s;++f){var p=t[e[f]];d+=(p[a][1]||0)-(p[a-1][1]||0)}l+=h,u+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=u/l)}n[a-1][1]+=n[a-1][0]=o,Qe(t,e)}},t.stackOrderAscending=nn,t.stackOrderDescending=function(t){return nn(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,i=t.length,r=t.map(rn),o=tn(t).sort((function(t,e){return r[e]-r[t]})),a=0,s=0,l=[],u=[];for(e=0;e<i;++e)n=o[e],a<s?(a+=r[n],l.push(n)):(s+=r[n],u.push(n));return u.reverse().concat(l)},t.stackOrderNone=tn,t.stackOrderReverse=function(t){return tn(t).reverse()},t.color=vn,t.rgb=Mn,t.hsl=En,t.lab=Yn,t.hcl=Vn,t.cubehelix=ni,t.interpolate=Ei,t.interpolateArray=_i,t.interpolateDate=gi,t.interpolateNumber=yi,t.interpolateObject=vi,t.interpolateRound=Ci,t.interpolateString=Si,t.interpolateTransformCss=Ii,t.interpolateTransformSvg=zi,t.interpolateZoom=Oi,t.interpolateRgb=di,t.interpolateRgbBasis=pi,t.interpolateRgbBasisClosed=mi,t.interpolateHsl=Ni,t.interpolateHslLong=Bi,t.interpolateLab=function(t,e){var n=hi((t=Yn(t)).l,(e=Yn(e)).l),i=hi(t.a,e.a),r=hi(t.b,e.b),o=hi(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=o(e),t+""}},t.interpolateHcl=Ui,t.interpolateHclLong=$i,t.interpolateCubehelix=Vi,t.interpolateCubehelixLong=qi,t.interpolateBasis=oi,t.interpolateBasisClosed=ai,t.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},t.dispatch=Gi,t.dsvFormat=tr,t.csvParse=nr,t.csvParseRows=ir,t.csvFormat=rr,t.csvFormatRows=or,t.tsvParse=sr,t.tsvParseRows=lr,t.tsvFormat=ur,t.tsvFormatRows=cr,t.request=hr,t.html=fr,t.json=pr,t.text=mr,t.xml=_r,t.csv=br,t.tsv=wr,t.now=Ar,t.timer=zr,t.timerFlush=Fr,t.timeout=Nr,t.interval=function(t,e,n){var i=new Ir,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?Ar():+n,i.restart((function o(a){a+=r,i.restart(o,r+=e,n),t(a)}),e,n),i)},t.timeInterval=Ur,t.timeMillisecond=$r,t.timeMilliseconds=Hr,t.timeSecond=Xr,t.timeSeconds=Kr,t.timeMinute=Jr,t.timeMinutes=Qr,t.timeHour=to,t.timeHours=eo,t.timeDay=no,t.timeDays=io,t.timeWeek=oo,t.timeWeeks=fo,t.timeSunday=oo,t.timeSundays=fo,t.timeMonday=ao,t.timeMondays=po,t.timeTuesday=so,t.timeTuesdays=mo,t.timeWednesday=lo,t.timeWednesdays=_o,t.timeThursday=uo,t.timeThursdays=go,t.timeFriday=co,t.timeFridays=yo,t.timeSaturday=ho,t.timeSaturdays=vo,t.timeMonth=xo,t.timeMonths=bo,t.timeYear=wo,t.timeYears=Mo,t.utcMillisecond=$r,t.utcMilliseconds=Hr,t.utcSecond=Xr,t.utcSeconds=Kr,t.utcMinute=To,t.utcMinutes=ko,t.utcHour=So,t.utcHours=Eo,t.utcDay=Co,t.utcDays=Lo,t.utcWeek=Ao,t.utcWeeks=Yo,t.utcSunday=Ao,t.utcSundays=Yo,t.utcMonday=Po,t.utcMondays=No,t.utcTuesday=Io,t.utcTuesdays=Bo,t.utcWednesday=zo,t.utcWednesdays=jo,t.utcThursday=Fo,t.utcThursdays=Uo,t.utcFriday=Ro,t.utcFridays=$o,t.utcSaturday=Oo,t.utcSaturdays=Ho,t.utcMonth=Vo,t.utcMonths=qo,t.utcYear=Wo,t.utcYears=Zo,t.formatLocale=aa,t.formatDefaultLocale=sa,t.formatSpecifier=ea,t.precisionFixed=la,t.precisionPrefix=ua,t.precisionRound=ca,t.isoFormat=ms,t.isoParse=_s,t.timeFormatLocale=pa,t.timeFormatDefaultLocale=fs,t.scaleBand=ws,t.scalePoint=function(){return Ms(ws().paddingInner(1))},t.scaleIdentity=function t(){var e=[0,1];function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=ys.call(t,ks),n):e.slice()},n.copy=function(){return t().domain(e)},Ps(n)},t.scaleLinear=function t(){var e=As(Es,yi);return e.copy=function(){return Ds(e,t())},Ps(e)},t.scaleLog=function e(){var n=As(zs,Fs).domain([1,10]),i=n.domain,r=10,o=Ys(10),a=Os(10);function s(){return o=Ys(r),a=Os(r),i()[0]<0&&(o=Ns(o),a=Ns(a)),n}return n.base=function(t){return arguments.length?(r=+t,s()):r},n.domain=function(t){return arguments.length?(i(t),s()):i()},n.ticks=function(t){var e,n=i(),s=n[0],l=n[n.length-1];(e=l<s)&&(d=s,s=l,l=d);var u,c,h,d=o(s),f=o(l),p=null==t?10:+t,m=[];if(!(r%1)&&f-d<p){if(d=Math.round(d)-1,f=Math.round(f)+1,s>0){for(;d<f;++d)for(c=1,u=a(d);c<r;++c)if(!((h=u*c)<s)){if(h>l)break;m.push(h)}}else for(;d<f;++d)for(c=r-1,u=a(d);c>=1;--c)if(!((h=u*c)<s)){if(h>l)break;m.push(h)}}else m=v(d,f,Math.min(f-d,p)).map(a);return e?m.reverse():m},n.tickFormat=function(e,i){if(null==i&&(i=10===r?".0e":","),"function"!=typeof i&&(i=t.format(i)),e===1/0)return i;null==e&&(e=10);var s=Math.max(1,r*e/n.ticks().length);return function(t){var e=t/a(Math.round(o(t)));return e*r<r-.5&&(e*=r),e<=s?i(t):""}},n.nice=function(){return i(Is(i(),{floor:function(t){return a(Math.floor(o(t)))},ceil:function(t){return a(Math.ceil(o(t)))}}))},n.copy=function(){return Ds(n,e().base(r))},n},t.scaleOrdinal=bs,t.scaleImplicit=xs,t.scalePow=js,t.scaleSqrt=function(){return js().exponent(.5)},t.scaleQuantile=function t(){var n=[],i=[],o=[];function a(){var t=0,e=Math.max(1,i.length);for(o=new Array(e-1);++t<e;)o[t-1]=w(n,t/e);return s}function s(t){if(!isNaN(t=+t))return i[r(o,t)]}return s.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},s.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var i,r=0,o=t.length;r<o;++r)null==(i=t[r])||isNaN(i=+i)||n.push(i);return n.sort(e),a()},s.range=function(t){return arguments.length?(i=vs.call(t),a()):i.slice()},s.quantiles=function(){return o.slice()},s.copy=function(){return t().domain(n).range(i)},s},t.scaleQuantize=function t(){var e=0,n=1,i=1,o=[.5],a=[0,1];function s(t){if(t<=t)return a[r(o,t,0,i)]}function l(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*n-(t-i)*e)/(i+1);return s}return s.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],l()):[e,n]},s.range=function(t){return arguments.length?(i=(a=vs.call(t)).length-1,l()):a.slice()},s.invertExtent=function(t){var r=a.indexOf(t);return r<0?[NaN,NaN]:r<1?[e,o[0]]:r>=i?[o[i-1],n]:[o[r-1],o[r]]},s.copy=function(){return t().domain([e,n]).range(a)},Ps(s)},t.scaleThreshold=function t(){var e=[.5],n=[0,1],i=1;function o(t){if(t<=t)return n[r(e,t,0,i)]}return o.domain=function(t){return arguments.length?(e=vs.call(t),i=Math.min(e.length,n.length-1),o):e.slice()},o.range=function(t){return arguments.length?(n=vs.call(t),i=Math.min(e.length,n.length-1),o):n.slice()},o.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},o.copy=function(){return t().domain(e).range(n)},o},t.scaleTime=function(){return Xs(wo,xo,oo,no,to,Jr,Xr,$r,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Xs(Wo,Vo,Ao,Co,So,To,Xr,$r,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=Js,t.schemeCategory20b=Qs,t.schemeCategory20c=tl,t.schemeCategory20=el,t.scaleSequential=function t(e){var n=0,i=1,r=!1;function o(t){var o=(t-n)/(i-n);return e(r?Math.max(0,Math.min(1,o)):o)}return o.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],o):[n,i]},o.clamp=function(t){return arguments.length?(r=!!t,o):r},o.interpolator=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t(e).domain([n,i]).clamp(r)},Ps(o)},t.interpolateCubehelixDefault=nl,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ol.h=360*t-100,ol.s=1.5-1.5*e,ol.l=.8-.9*e,ol+""},t.interpolateWarm=il,t.interpolateCool=rl,t.interpolateViridis=sl,t.interpolateMagma=ll,t.interpolateInferno=ul,t.interpolatePlasma=cl,t.creator=_l,t.customEvent=Dl,t.local=yl,t.matcher=Ml,t.mouse=Il,t.namespace=fl,t.namespaces=dl,t.select=Su,t.selectAll=function(t){return"string"==typeof t?new Tu([document.querySelectorAll(t)],[document.documentElement]):new Tu([null==t?[]:t],Mu)},t.selection=ku,t.selector=Fl,t.selectorAll=Ol,t.touch=Eu,t.touches=function(t,e){null==e&&(e=Al().touches);for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n)r[n]=Pl(t,e[n]);return r},t.window=Zl,t.active=function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>1&&n.name===e)return new nc([[t]],lc,e,+i);return null},t.interrupt=zu,t.transition=ic,t.axisTop=function(t){return _c(1,t)},t.axisRight=function(t){return _c(2,t)},t.axisBottom=function(t){return _c(3,t)},t.axisLeft=function(t){return _c(4,t)},t.cluster=function(){var t=gc,e=1,n=1,i=!1;function r(r){var o,a=0;r.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(yc,0)/t.length}(n),e.y=function(t){return 1+t.reduce(vc,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(r),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),u=s.x-t(s,l)/2,c=l.x+t(l,s)/2;return r.eachAfter(i?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},t.hierarchy=xc,t.pack=function(){var t=null,e=1,n=1,i=Rc;function r(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(Nc(t)).eachAfter(Bc(i,.5)).eachBefore(jc(1)):r.eachBefore(Nc(Yc)).eachAfter(Bc(Rc,1)).eachAfter(Bc(i,r.r/Math.min(e,n))).eachBefore(jc(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=zc(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(i="function"==typeof t?t:Oc(+t),r):i},r},t.packSiblings=function(t){return Ic(t),t},t.packEnclose=Sc,t.partition=function(){var t=1,e=1,n=0,i=!1;function r(r){var o=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/o,r.eachBefore(function(t,e){return function(i){i.children&&$c(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var r=i.x0,o=i.y0,a=i.x1-n,s=i.y1-n;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),i.x0=r,i.y0=o,i.x1=a,i.y1=s}}(e,o)),i&&r.eachBefore(Uc),r}return r.round=function(t){return arguments.length?(i=!!t,r):i},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r},t.stratify=function(){var t=qc,e=Wc;function n(n){var i,r,o,a,s,l,u,c=n.length,h=new Array(c),d={};for(r=0;r<c;++r)i=n[r],s=h[r]=new Tc(i),null!=(l=t(i,r,n))&&(l+="")&&(d[u="$"+(s.id=l)]=u in d?Vc:s);for(r=0;r<c;++r)if(s=h[r],null!=(l=e(n[r],r,n))&&(l+="")){if(!(a=d["$"+l]))throw new Error("missing: "+l);if(a===Vc)throw new Error("ambiguous: "+l);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=Hc,o.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore(Mc),o.parent=null,c>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=Fc(e),n):t},n.parentId=function(t){return arguments.length?(e=Fc(t),n):e},n},t.tree=function(){var t=Gc,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,o,a=new Qc(t,0),s=[a];e=s.pop();)if(i=e._.children)for(e.children=new Array(o=i.length),r=o-1;r>=0;--r)s.push(n=e.children[r]=new Qc(i[r],r)),n.parent=e;return(a.parent=new Qc(null,0)).children=[a],a}(r);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),i)r.eachBefore(s);else{var u=r,c=r,h=r;r.eachBefore((function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)}));var d=u===c?1:t(u,c)/2,f=d-u.x,p=e/(c.x+d+f),m=n/(h.depth||1);r.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*m}))}return r}function o(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,o=e,a=e,s=n,l=o.parent.children[0],u=o.m,c=a.m,h=s.m,d=l.m;s=Xc(s),o=Zc(o),s&&o;)l=Zc(l),(a=Xc(a)).a=e,(r=s.z+h-o.z-u+t(s._,o._))>0&&(Kc(Jc(s,e,i),e,r),u+=r,c+=r),h+=s.m,u+=o.m,d+=l.m,c+=a.m;s&&!Xc(a)&&(a.t=s,a.m+=h-c),o&&!Zc(l)&&(l.t=o,l.m+=u-d,i=e)}return i}(e,r,e.parent.A||i[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},t.treemap=function(){var t=ih,e=!1,n=1,i=1,r=[0],o=Rc,a=Rc,s=Rc,l=Rc,u=Rc;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(h),r=[0],e&&t.eachBefore(Uc),t}function h(e){var n=r[e.depth],i=e.x0+n,c=e.y0+n,h=e.x1-n,d=e.y1-n;h<i&&(i=h=(i+h)/2),d<c&&(c=d=(c+d)/2),e.x0=i,e.y0=c,e.x1=h,e.y1=d,e.children&&(n=r[e.depth+1]=o(e)/2,i+=u(e)-n,c+=a(e)-n,(h-=s(e)-n)<i&&(i=h=(i+h)/2),(d-=l(e)-n)<c&&(c=d=(c+d)/2),t(e,i,c,h,d))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],i=+t[1],c):[n,i]},c.tile=function(e){return arguments.length?(t=Fc(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Oc(+t),c):o},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Oc(+t),c):a},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Oc(+t),c):s},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Oc(+t),c):l},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:Oc(+t),c):u},c},t.treemapBinary=function(t,e,n,i,r){var o,a,s=t.children,l=s.length,u=new Array(l+1);for(u[0]=a=o=0;o<l;++o)u[o+1]=a+=s[o].value;!function t(e,n,i,r,o,a,l){if(e>=n-1){var c=s[e];return c.x0=r,c.y0=o,c.x1=a,void(c.y1=l)}for(var h=u[e],d=i/2+h,f=e+1,p=n-1;f<p;){var m=f+p>>>1;u[m]<d?f=m+1:p=m}var _=u[f]-h,g=i-_;if(l-o>a-r){var y=(o*g+l*_)/i;t(e,f,_,r,o,a,y),t(f,n,g,r,y,a,l)}else{var v=(r*g+a*_)/i;t(e,f,_,r,o,v,l),t(f,n,g,v,o,a,l)}}(0,l,t.value,e,n,i,r)},t.treemapDice=$c,t.treemapSlice=th,t.treemapSliceDice=function(t,e,n,i,r){(1&t.depth?th:$c)(t,e,n,i,r)},t.treemapSquarify=ih,t.treemapResquarify=rh,t.forceCenter=function(t,e){var n;function i(){var i,r,o=n.length,a=0,s=0;for(i=0;i<o;++i)a+=(r=n[i]).x,s+=r.y;for(a=a/o-t,s=s/o-e,i=0;i<o;++i)(r=n[i]).x-=a,r.y-=s}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},t.forceCollide=function(t){var e,n,i=1,r=1;function o(){for(var t,o,s,l,u,c,h,d=e.length,f=0;f<r;++f)for(o=vt(e,sh,lh).visitAfter(a),t=0;t<d;++t)s=e[t],c=n[t],h=c*c,l=s.x+s.vx,u=s.y+s.vy,o.visit(p);function p(e,n,r,o,a){var d=e.data,f=e.r,p=c+f;if(!d)return n>l+p||o<l-p||r>u+p||a<u-p;if(d.index>t){var m=l-d.x-d.vx,_=u-d.y-d.vy,g=m*m+_*_;g<p*p&&(0===m&&(g+=(m=ah())*m),0===_&&(g+=(_=ah())*_),g=(p-(g=Math.sqrt(g)))/g*i,s.vx+=(m*=g)*(p=(f*=f)/(h+f)),s.vy+=(_*=g)*p,d.vx-=m*(p=1-p),d.vy-=_*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var i,r=e.length;for(n=new Array(r),i=0;i<r;++i)n[i]=+t(e[i],i,e)}}return"function"!=typeof t&&(t=oh(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(r=+t,o):r},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:oh(+e),s(),o):t},o},t.forceLink=function(t){var e,n,i,r,o,a=uh,s=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},l=oh(30),u=1;function c(i){for(var r=0,a=t.length;r<u;++r)for(var s,l,c,h,d,f,p,m=0;m<a;++m)l=(s=t[m]).source,h=(c=s.target).x+c.vx-l.x-l.vx||ah(),d=c.y+c.vy-l.y-l.vy||ah(),h*=f=((f=Math.sqrt(h*h+d*d))-n[m])/f*i*e[m],d*=f,c.vx-=h*(p=o[m]),c.vy-=d*p,l.vx+=h*(p=1-p),l.vy+=d*p}function h(){if(i){var s,l,u=i.length,c=t.length,h=L(i,a);for(s=0,r=new Array(u);s<u;++s)r[s]=0;for(s=0;s<c;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=ch(h,l.source)),"object"!=typeof l.target&&(l.target=ch(h,l.target)),++r[l.source.index],++r[l.target.index];for(s=0,o=new Array(c);s<c;++s)l=t[s],o[s]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(c),d(),n=new Array(c),f()}}function d(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+s(t[n],n,t)}function f(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){i=t,h()},c.links=function(e){return arguments.length?(t=e,h(),c):t},c.id=function(t){return arguments.length?(a=t,c):a},c.iterations=function(t){return arguments.length?(u=+t,c):u},c.strength=function(t){return arguments.length?(s="function"==typeof t?t:oh(+t),d(),c):s},c.distance=function(t){return arguments.length?(l="function"==typeof t?t:oh(+t),f(),c):l},c},t.forceManyBody=function(){var t,e,n,i,r=oh(-30),o=1,a=1/0,s=.81;function l(i){var r,o=t.length,a=vt(t,hh,dh).visitAfter(c);for(n=i,r=0;r<o;++r)e=t[r],a.visit(h)}function u(){if(t){var e,n=t.length;for(i=new Array(n),e=0;e<n;++e)i[e]=+r(t[e],e,t)}}function c(t){var e,n,r,o,a,s=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=e.value)&&(s+=n,r+=n*e.x,o+=n*e.y);t.x=r/s,t.y=o/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,r,l,u){if(!t.value)return!0;var c=t.x-e.x,h=t.y-e.y,d=u-r,f=c*c+h*h;if(d*d/s<f)return f<a&&(0===c&&(f+=(c=ah())*c),0===h&&(f+=(h=ah())*h),f<o&&(f=Math.sqrt(o*f)),e.vx+=c*t.value*n/f,e.vy+=h*t.value*n/f),!0;if(!(t.length||f>=a)){(t.data!==e||t.next)&&(0===c&&(f+=(c=ah())*c),0===h&&(f+=(h=ah())*h),f<o&&(f=Math.sqrt(o*f)));do{t.data!==e&&(d=i[t.data.index]*n/f,e.vx+=c*d,e.vy+=h*d)}while(t=t.next)}}return l.initialize=function(e){t=e,u()},l.strength=function(t){return arguments.length?(r="function"==typeof t?t:oh(+t),u(),l):r},l.distanceMin=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.distanceMax=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.theta=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l},t.forceSimulation=function(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=L(),l=zr(c),u=Gi("tick","end");function c(){h(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function h(){var e,i,l=t.length;for(n+=(o-n)*r,s.each((function(t){t(n)})),e=0;e<l;++e)null==(i=t[e]).fx?i.x+=i.vx*=a:(i.x=i.fx,i.vx=0),null==i.fy?i.y+=i.vy*=a:(i.y=i.fy,i.vy=0)}function d(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(n),o=n*fh;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:h,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.each(f),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,f(n)),e):s.get(t)},find:function(e,n,i){var r,o,a,s,l,u=0,c=t.length;for(null==i?i=1/0:i*=i,u=0;u<c;++u)(a=(r=e-(s=t[u]).x)*r+(o=n-s.y)*o)<i&&(l=s,i=a);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}},t.forceX=function(t){var e,n,i,r=oh(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vx+=(i[o]-r.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=oh(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:oh(+t),a(),o):r},o.x=function(e){return arguments.length?(t="function"==typeof e?e:oh(+e),a(),o):t},o},t.forceY=function(t){var e,n,i,r=oh(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vy+=(i[o]-r.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=oh(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:oh(+t),a(),o):r},o.y=function(e){return arguments.length?(t="function"==typeof e?e:oh(+e),a(),o):t},o},t.drag=function(){var e,n,i=xh,r=bh,o=wh,a={},s=Gi("start","drag","end"),l=0;function u(t){t.on("mousedown.drag",c).on("touchstart.drag",f).on("touchmove.drag",p).on("touchend.drag touchcancel.drag",m).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){if(!n&&i.apply(this,arguments)){var o=_("mouse",r.apply(this,arguments),Il,this,arguments);o&&(Su(t.event.view).on("mousemove.drag",h,!0).on("mouseup.drag",d,!0),_h(t.event.view),ph(),e=!1,o("start"))}}function h(){mh(),e=!0,a.mouse("drag")}function d(){Su(t.event.view).on("mousemove.drag mouseup.drag",null),gh(t.event.view,e),mh(),a.mouse("end")}function f(){if(i.apply(this,arguments)){var e,n,o=t.event.changedTouches,a=r.apply(this,arguments),s=o.length;for(e=0;e<s;++e)(n=_(o[e].identifier,a,Eu,this,arguments))&&(ph(),n("start"))}}function p(){var e,n,i=t.event.changedTouches,r=i.length;for(e=0;e<r;++e)(n=a[i[e].identifier])&&(mh(),n("drag"))}function m(){var e,i,r=t.event.changedTouches,o=r.length;for(n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),e=0;e<o;++e)(i=a[r[e].identifier])&&(ph(),i("end"))}function _(e,n,i,r,c){var h,d,f,p=i(n,e),m=s.copy();if(Dl(new vh(u,"beforestart",h,e,l,p[0],p[1],0,0,m),(function(){return null!=(t.event.subject=h=o.apply(r,c))&&(d=h.x-p[0]||0,f=h.y-p[1]||0,!0)})))return function t(o){var s,_=p;switch(o){case"start":a[e]=t,s=l++;break;case"end":delete a[e],--l;case"drag":p=i(n,e),s=l}Dl(new vh(u,o,h,e,s,p[0]+d,p[1]+f,p[0]-_[0],p[1]-_[1],m),m.apply,m,[o,r,c])}}return u.filter=function(t){return arguments.length?(i="function"==typeof t?t:yh(!!t),u):i},u.container=function(t){return arguments.length?(r="function"==typeof t?t:yh(t),u):r},u.subject=function(t){return arguments.length?(o="function"==typeof t?t:yh(t),u):o},u.on=function(){var t=s.on.apply(s,arguments);return t===s?u:t},u},t.dragDisable=_h,t.dragEnable=gh,t.voronoi=function(){var t=Th,e=kh,n=null;function i(i){return new ad(i.map((function(n,r){var o=[Math.round(t(n,r,i)/nd)*nd,Math.round(e(n,r,i)/nd)*nd];return o.index=r,o.data=n,o})),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:Mh(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:Mh(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i},t.zoom=function(){var e,n,i=pd,r=md,o=0,a=1/0,s=-a,l=a,u=s,c=l,h=250,d=[],f=Gi("start","zoom","end"),p=500;function m(t){t.on("wheel.zoom",M).on("mousedown.zoom",T).on("dblclick.zoom",k).on("touchstart.zoom",S).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",_d)}function _(t,e){return(e=Math.max(o,Math.min(a,e)))===t.k?t:new ud(e,t.x,t.y)}function g(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new ud(t.k,i,r)}function y(t,e){var n=Math.min(0,t.invertX(e[0][0])-s)||Math.max(0,t.invertX(e[1][0])-l),i=Math.min(0,t.invertY(e[0][1])-u)||Math.max(0,t.invertY(e[1][1])-c);return n||i?t.translate(n,i):t}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n){t.on("start.zoom",(function(){b(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,o=b(t,i),a=r.apply(t,i),s=n||v(a),l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=t.__zoom,c="function"==typeof e?e.apply(t,i):e,h=Oi(u.invert(s).concat(l/u.k),c.invert(s).concat(l/c.k));return function(t){if(1===t)t=c;else{var e=h(t),n=l/e[2];t=new ud(n,s[0]-e[0]*n,s[1]-e[1]*n)}o.zoom(null,t)}}))}function b(t,e){for(var n,i=0,r=d.length;i<r;++i)if((n=d[i]).that===t)return n;return new w(t,e)}function w(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=r.apply(t,e)}function M(){if(i.apply(this,arguments)){var e=b(this,arguments),n=this.__zoom,r=Math.max(o,Math.min(a,n.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),s=Il(this);if(e.wheel)e.mouse[0][0]===s[0]&&e.mouse[0][1]===s[1]||(e.mouse[1]=n.invert(e.mouse[0]=s)),clearTimeout(e.wheel);else{if(n.k===r)return;e.mouse=[s,n.invert(s)],zu(this),e.start()}fd(),e.wheel=setTimeout(l,150),e.zoom("mouse",y(g(_(n,r),e.mouse[0],e.mouse[1]),e.extent))}function l(){e.wheel=null,e.end()}}function T(){if(!n&&i.apply(this,arguments)){var e=b(this,arguments),r=Su(t.event.view).on("mousemove.zoom",a,!0).on("mouseup.zoom",s,!0),o=Il(this);_h(t.event.view),dd(),e.mouse=[o,this.__zoom.invert(o)],zu(this),e.start()}function a(){fd(),e.moved=!0,e.zoom("mouse",y(g(e.that.__zoom,e.mouse[0]=Il(e.that),e.mouse[1]),e.extent))}function s(){r.on("mousemove.zoom mouseup.zoom",null),gh(t.event.view,e.moved),fd(),e.end()}}function k(){if(i.apply(this,arguments)){var e=this.__zoom,n=Il(this),o=e.invert(n),a=y(g(_(e,e.k*(t.event.shiftKey?.5:2)),n,o),r.apply(this,arguments));fd(),h>0?Su(this).transition().duration(h).call(x,a,n):Su(this).call(m.transform,a)}}function S(){if(i.apply(this,arguments)){var n,r,o,a=b(this,arguments),s=t.event.changedTouches,l=s.length;for(dd(),n=0;n<l;++n)r=s[n],o=[o=Eu(this,s,r.identifier),this.__zoom.invert(o),r.identifier],a.touch0?a.touch1||(a.touch1=o):a.touch0=o;if(e&&(e=clearTimeout(e),!a.touch1))return a.end(),k.apply(this,arguments);t.event.touches.length===l&&(e=setTimeout((function(){e=null}),p),zu(this),a.start())}}function E(){var n,i,r,o,a=b(this,arguments),s=t.event.changedTouches,l=s.length;for(fd(),e&&(e=clearTimeout(e)),n=0;n<l;++n)i=s[n],r=Eu(this,s,i.identifier),a.touch0&&a.touch0[2]===i.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===i.identifier&&(a.touch1[0]=r);if(i=a.that.__zoom,a.touch1){var u=a.touch0[0],c=a.touch0[1],h=a.touch1[0],d=a.touch1[1],f=(f=h[0]-u[0])*f+(f=h[1]-u[1])*f,p=(p=d[0]-c[0])*p+(p=d[1]-c[1])*p;i=_(i,Math.sqrt(f/p)),r=[(u[0]+h[0])/2,(u[1]+h[1])/2],o=[(c[0]+d[0])/2,(c[1]+d[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",y(g(i,r,o),a.extent))}function C(){var e,i,r=b(this,arguments),o=t.event.changedTouches,a=o.length;for(dd(),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),e=0;e<a;++e)i=o[e],r.touch0&&r.touch0[2]===i.identifier?delete r.touch0:r.touch1&&r.touch1[2]===i.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0||r.end()}return m.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",_d),t!==n?x(t,e):n.interrupt().each((function(){b(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},m.scaleBy=function(t,e){m.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}))},m.scaleTo=function(t,e){m.transform(t,(function(){var t=r.apply(this,arguments),n=this.__zoom,i=v(t),o=n.invert(i);return y(g(_(n,"function"==typeof e?e.apply(this,arguments):e),i,o),t)}))},m.translateBy=function(t,e,n){m.transform(t,(function(){return y(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments))}))},w.prototype={start:function(){return 1==++this.active&&(this.index=d.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(d.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Dl(new ld(m,t,this.that.__zoom),f.apply,f,[t,this.that,this.args])}},m.filter=function(t){return arguments.length?(i="function"==typeof t?t:sd(!!t),m):i},m.extent=function(t){return arguments.length?(r="function"==typeof t?t:sd([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):r},m.scaleExtent=function(t){return arguments.length?(o=+t[0],a=+t[1],m):[o,a]},m.translateExtent=function(t){return arguments.length?(s=+t[0][0],l=+t[1][0],u=+t[0][1],c=+t[1][1],m):[[s,u],[l,c]]},m.duration=function(t){return arguments.length?(h=+t,m):h},m.on=function(){var t=f.on.apply(f,arguments);return t===f?m:t},m},t.zoomIdentity=cd,t.zoomTransform=hd,t.brush=function(){return Yd(Ed)},t.brushX=function(){return Yd(kd)},t.brushY=function(){return Yd(Sd)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.chord=function(){var t=0,e=null,n=null,i=null;function r(r){var o,a,s,l,u,c,h=r.length,d=[],f=m(h),p=[],_=[],g=_.groups=new Array(h),y=new Array(h*h);for(o=0,u=-1;++u<h;){for(a=0,c=-1;++c<h;)a+=r[u][c];d.push(a),p.push(m(h)),o+=a}for(e&&f.sort((function(t,n){return e(d[t],d[n])})),n&&p.forEach((function(t,e){t.sort((function(t,i){return n(r[e][t],r[e][i])}))})),l=(o=Hd(0,$d-t*h)/o)?t:$d/h,a=0,u=-1;++u<h;){for(s=a,c=-1;++c<h;){var v=f[u],x=p[v][c],b=r[v][x],w=a,M=a+=b*o;y[x*h+v]={index:v,subindex:x,startAngle:w,endAngle:M,value:b}}g[v]={index:v,startAngle:s,endAngle:a,value:d[v]},a+=l}for(u=-1;++u<h;)for(c=u-1;++c<h;){var T=y[c*h+u],k=y[u*h+c];(T.value||k.value)&&_.push(T.value<k.value?{source:k,target:T}:{source:T,target:k})}return i?_.sort(i):_}return r.padAngle=function(e){return arguments.length?(t=Hd(0,e),r):t},r.sortGroups=function(t){return arguments.length?(e=t,r):e},r.sortSubgroups=function(t){return arguments.length?(n=t,r):n},r.sortChords=function(t){return arguments.length?(null==t?i=null:(i=Vd(t))._=t,r):i&&i._},r},t.ribbon=function(){var t=Gd,e=Zd,n=Xd,i=Kd,r=Jd,o=null;function a(){var a,s=qd.call(arguments),l=t.apply(this,s),u=e.apply(this,s),c=+n.apply(this,(s[0]=l,s)),h=i.apply(this,s)-Ud,d=r.apply(this,s)-Ud,f=c*Nd(h),p=c*Bd(h),m=+n.apply(this,(s[0]=u,s)),_=i.apply(this,s)-Ud,g=r.apply(this,s)-Ud;if(o||(o=a=pt()),o.moveTo(f,p),o.arc(0,0,c,h,d),h===_&&d===g||(o.quadraticCurveTo(0,0,m*Nd(_),m*Bd(_)),o.arc(0,0,m,_,g)),o.quadraticCurveTo(0,0,f,p),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(n="function"==typeof t?t:Wd(+t),a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Wd(+t),a):i},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Wd(+t),a):r},a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(t){return arguments.length?(e=t,a):e},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a},t.geoAlbers=A_,t.geoAlbersUsa=function(){var t,e,n,i,r,o,a=A_(),s=D_().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=D_().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){o=[t,e]}};function c(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(i.point(e,a),o)||(r.point(e,a),o)}function h(){return t=e=null,c}return c.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?s:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:a).invert(t)},c.stream=function(n){return t&&e===n?t:(i=[a.stream(e=n),s.stream(n),l.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},c.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),h()):a.precision()},c.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),c.translate(a.translate())):a.scale()},c.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],c=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,c-.238*e],[o+.455*e,c+.238*e]]).stream(u),i=s.translate([o-.307*e,c+.201*e]).clipExtent([[o-.425*e+rf,c+.12*e+rf],[o-.214*e-rf,c+.234*e-rf]]).stream(u),r=l.translate([o-.205*e,c+.212*e]).clipExtent([[o-.214*e+rf,c+.166*e+rf],[o-.115*e-rf,c+.234*e-rf]]).stream(u),h()},c.fitExtent=function(t,e){return b_(c,t,e)},c.fitSize=function(t,e){return w_(c,t,e)},c.scale(1070)},t.geoArea=function(t){return Nf.reset(),Of(t,Bf),2*Nf},t.geoAzimuthalEqualArea=function(){return S_(z_).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=z_,t.geoAzimuthalEquidistant=function(){return S_(F_).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=F_,t.geoBounds=function(t){var e,n,i,r,o,a,s;if(Gf=Wf=-(Vf=qf=1/0),ap=[],Of(t,up),n=ap.length){for(ap.sort(yp),e=1,o=[i=ap[0]];e<n;++e)vp(i,(r=ap[e])[0])||vp(i,r[1])?(gp(i[0],r[1])>gp(i[0],i[1])&&(i[1]=r[1]),gp(r[0],i[1])>gp(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(s=gp(i[1],r[0]))>a&&(a=s,Vf=r[0],Wf=i[1])}return ap=sp=null,Vf===1/0||qf===1/0?[[NaN,NaN],[NaN,NaN]]:[[Vf,qf],[Wf,Gf]]},t.geoCentroid=function(t){xp=bp=wp=Mp=Tp=kp=Sp=Ep=Cp=Lp=Dp=0,Of(t,Rp);var e=Cp,n=Lp,i=Dp,r=e*e+n*n+i*i;return r<1e-12&&(e=kp,n=Sp,i=Ep,bp<rf&&(e=wp,n=Mp,i=Tp),(r=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[ff(n,e)*uf,Tf(i/bf(r))*uf]},t.geoCircle=function(){var t,e,n=Wp([0,0]),i=Wp(90),r=Wp(6),o={point:function(n,i){t.push(n=e(n,i)),n[0]*=uf,n[1]*=uf}};function a(){var a=n.apply(this,arguments),s=i.apply(this,arguments)*cf,l=r.apply(this,arguments)*cf;return t=[],e=Xp(-a[0]*cf,-a[1]*cf,0).invert,tm(o,s,l,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:Wp([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(i="function"==typeof t?t:Wp(+t),a):i},a.precision=function(t){return arguments.length?(r="function"==typeof t?t:Wp(+t),a):r},a},t.geoClipExtent=function(){var t,e,n,i=0,r=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=um(i,r,o,a)(e=n)},extent:function(s){return arguments.length?(i=+s[0][0],r=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[i,r],[o,a]]}}},t.geoConicConformal=function(){return C_(N_).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=N_,t.geoConicEqualArea=D_,t.geoConicEqualAreaRaw=L_,t.geoConicEquidistant=function(){return C_(j_).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=j_,t.geoDistance=function(t,e){return vm[0]=t,vm[1]=e,ym(xm)},t.geoEquirectangular=function(){return S_(B_).scale(152.63)},t.geoEquirectangularRaw=B_,t.geoGnomonic=function(){return S_(U_).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=U_,t.geoGraticule=Mm,t.geoGraticule10=function(){return Mm()()},t.geoIdentity=function(){var t,e,n,i,r,o,a=1,s=0,l=0,u=Cm,c=null,h=Cm;function d(){return i=r=null,o}return o={stream:function(t){return i&&r===t?i:i=u(h(r=t))},clipExtent:function(i){return arguments.length?(h=null==i?(c=t=e=n=null,Cm):um(c=+i[0][0],t=+i[0][1],e=+i[1][0],n=+i[1][1]),d()):null==c?null:[[c,t],[e,n]]},scale:function(t){return arguments.length?(u=$_(a=+t,s,l),d()):a},translate:function(t){return arguments.length?(u=$_(a,s=+t[0],l=+t[1]),d()):[s,l]},fitExtent:function(t,e){return b_(o,t,e)},fitSize:function(t,e){return w_(o,t,e)}}},t.geoInterpolate=function(t,e){var n=t[0]*cf,i=t[1]*cf,r=e[0]*cf,o=e[1]*cf,a=pf(i),s=vf(i),l=pf(o),u=vf(o),c=a*pf(n),h=a*vf(n),d=l*pf(r),f=l*vf(r),p=2*Tf(bf(kf(o-i)+a*l*kf(r-n))),m=vf(p),_=p?function(t){var e=vf(t*=p)/m,n=vf(p-t)/m,i=n*c+e*d,r=n*h+e*f,o=n*s+e*u;return[ff(r,i)*uf,ff(o,bf(i*i+r*r))*uf]}:function(){return[n*uf,i*uf]};return _.distance=p,_},t.geoLength=ym,t.geoMercator=function(){return O_(R_).scale(961/lf)},t.geoMercatorRaw=R_,t.geoOrthographic=function(){return S_(H_).scale(249.5).clipAngle(90.000001)},t.geoOrthographicRaw=H_,t.geoPath=function(t,e){var n,i,r=4.5;function o(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),Of(t,n(i))),i.result()}return o.area=function(t){return Of(t,n(Am)),Am.result()},o.bounds=function(t){return Of(t,n(Bm)),Bm.result()},o.centroid=function(t){return Of(t,n(t_)),t_.result()},o.projection=function(e){return arguments.length?(n=null==(t=e)?Cm:e.stream,o):t},o.context=function(t){return arguments.length?(i=null==(e=t)?new h_:new c_(t),"function"!=typeof r&&i.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),o):r},o.projection(t).context(e)},t.geoProjection=S_,t.geoProjectionMutator=E_,t.geoRotation=function(t){function e(e){return(e=t(e[0]*cf,e[1]*cf))[0]*=uf,e[1]*=uf,e}return t=Xp(t[0]*cf,t[1]*cf,t.length>2?t[2]*cf:0),e.invert=function(e){return(e=t.invert(e[0]*cf,e[1]*cf))[0]*=uf,e[1]*=uf,e},e},t.geoStereographic=function(){return S_(V_).scale(250).clipAngle(142)},t.geoStereographicRaw=V_,t.geoStream=Of,t.geoTransform=function(t){return{stream:v_(t)}},t.geoTransverseMercator=function(){var t=O_(q_),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=q_,Object.defineProperty(t,"__esModule",{value:!0})}(e)},8628:(t,e,n)=>{"use strict";var i=n(139),r={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:i}},registerDefault:function(){}};t.exports=r},6508:t=>{"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};t.exports=n},2297:t=>{"use strict";var e=/-(.)/g;t.exports=function(t){return t.replace(e,(function(t,e){return e.toUpperCase()}))}},250:(t,e,n)=>{"use strict";var i=n(2297),r=/^-ms-/;t.exports=function(t){return i(t.replace(r,"ms-"))}},7476:(t,e,n)=>{"use strict";var i=n(2334);t.exports=function t(e,n){return!(!e||!n)&&(e===n||!i(e)&&(i(n)?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}},9825:(t,e,n)=>{"use strict";var i=n(3759);t.exports=function(t){return function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}(t)?Array.isArray(t)?t.slice():function(t){var e=t.length;if((Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t)&&i(!1),"number"!=typeof e&&i(!1),0===e||e-1 in t||i(!1),"function"==typeof t.callee&&i(!1),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(t){}for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}(t):[t]}},188:(t,e,n)=>{"use strict";var i=n(6508),r=n(9825),o=n(980),a=n(3759),s=i.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=function(t,e){var n=s;s||a(!1);var i=function(t){var e=t.match(l);return e&&e[1].toLowerCase()}(t),u=i&&o(i);if(u){n.innerHTML=u[1]+t+u[2];for(var c=u[0];c--;)n=n.lastChild}else n.innerHTML=t;var h=n.getElementsByTagName("script");h.length&&(e||a(!1),r(h).forEach(e));for(var d=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}},139:t=>{"use strict";function e(t){return function(){return t}}var n=function(){};n.thatReturns=e,n.thatReturnsFalse=e(!1),n.thatReturnsTrue=e(!0),n.thatReturnsNull=e(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(t){return t},t.exports=n},3677:t=>{"use strict";t.exports={}},8387:t=>{"use strict";t.exports=function(t){try{t.focus()}catch(t){}}},1003:t=>{"use strict";t.exports=function(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}},980:(t,e,n)=>{"use strict";var i=n(6508),r=n(3759),o=i.canUseDOM?document.createElement("div"):null,a={},s=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:s,option:s,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:u,th:u};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach((function(t){h[t]=c,a[t]=!0})),t.exports=function(t){return o||r(!1),h.hasOwnProperty(t)||(t="*"),a.hasOwnProperty(t)||(o.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",a[t]=!o.firstChild),a[t]?h[t]:null}},787:t=>{"use strict";t.exports=function(t){return t.Window&&t instanceof t.Window?{x:t.pageXOffset||t.document.documentElement.scrollLeft,y:t.pageYOffset||t.document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}},9349:t=>{"use strict";var e=/([A-Z])/g;t.exports=function(t){return t.replace(e,"-$1").toLowerCase()}},7100:(t,e,n)=>{"use strict";var i=n(9349),r=/^ms-/;t.exports=function(t){return i(t).replace(r,"-ms-")}},3759:t=>{"use strict";t.exports=function(t,e,n,i,r,o,a,s){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,a,s],c=0;(l=new Error(e.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},901:t=>{"use strict";t.exports=function(t){var e=(t?t.ownerDocument||t:document).defaultView||window;return!(!t||!("function"==typeof e.Node?t instanceof e.Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}},2334:(t,e,n)=>{"use strict";var i=n(901);t.exports=function(t){return i(t)&&3==t.nodeType}},8918:(t,e,n)=>{"use strict";var i=n(3759);t.exports=function(t){var e,n={};for(e in t instanceof Object&&!Array.isArray(t)||i(!1),t)t.hasOwnProperty(e)&&(n[e]=e);return n}},5721:t=>{"use strict";t.exports=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null}},1767:t=>{"use strict";t.exports=function(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}},9303:t=>{"use strict";var e=Object.prototype.hasOwnProperty;function n(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}t.exports=function(t,i){if(n(t,i))return!0;if("object"!=typeof t||null===t||"object"!=typeof i||null===i)return!1;var r=Object.keys(t),o=Object.keys(i);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!e.call(i,r[a])||!n(t[r[a]],i[r[a]]))return!1;return!0}},3620:(t,e,n)=>{"use strict";var i=n(139);t.exports=i},1791:(t,e,n)=>{"use strict";t.exports=n.p+"8b43027f47b20503057d.eot"},7878:(t,e,n)=>{"use strict";t.exports=n.p+"8b43027f47b20503057d.eot?v=4.7.0"},1752:(t,e,n)=>{"use strict";t.exports=n.p+"c1e38fd9e0e74ba58f7a.svg?v=4.7.0"},8639:(t,e,n)=>{"use strict";t.exports=n.p+"1e59d2330b4c6deb84b3.ttf?v=4.7.0"},9961:(t,e,n)=>{"use strict";t.exports=n.p+"20fd1704ea223900efa9.woff2?v=4.7.0"},8305:(t,e,n)=>{"use strict";t.exports=n.p+"f691f37e57f04c152e23.woff?v=4.7.0"},1167:()=>{!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var n=function(e,n){var o=this;this.element=t(e),this.autoShow=null==n.autoShow||n.autoShow,this.appendTo=n.appendTo||"body",this.closeButton=n.closeButton,this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in i?this.language:this.language.split("-")[0],this.language=this.language in i?this.language:"en",this.isRTL=i[this.language].rtl||!1,this.format=r.parseFormat(n.format||this.element.data("date-format")||i[this.language].format||"mm/dd/yyyy"),this.formatText=n.format||this.element.data("date-format")||i[this.language].format||"mm/dd/yyyy",this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".prefix, .postfix"),this.hasInput=this.component&&this.element.find("input").length,this.disableDblClickSelection=n.disableDblClickSelection,this.onRender=n.onRender||function(){},this.component&&0===this.component.length&&(this.component=!1),this.linkField=n.linkField||this.element.data("link-field")||!1,this.linkFormat=r.parseFormat(n.linkFormat||this.element.data("link-format")||"yyyy-mm-dd hh:ii:ss"),this.minuteStep=n.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=n.pickerPosition||this.element.data("picker-position")||"bottom-right",this.initialDate=n.initialDate||null,this.faCSSprefix=n.faCSSprefix||"fa",this.leftArrow=n.leftArrow||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+'-chevron-left fi-arrow-left"/>',this.rightArrow=n.rightArrow||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+'-chevron-right fi-arrow-right"/>',this.closeIcon=n.closeIcon||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+"-remove "+this.faCSSprefix+'-times fi-x"></i>',this.minView=0,"minView"in n?this.minView=n.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=r.convertViewMode(this.minView),this.maxView=r.modes.length-1,"maxView"in n?this.maxView=n.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=r.convertViewMode(this.maxView),this.startViewMode="month","startView"in n?this.startViewMode=n.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=r.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,"minView"in n||"maxView"in n||this.element.data("min-view")&&!this.element.data("max-view")||(this.pickTime=!1,"pickTime"in n&&(this.pickTime=n.pickTime),1==this.pickTime?(this.minView=0,this.maxView=4):(this.minView=2,this.maxView=4)),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=t(r.template(this.leftArrow,this.rightArrow,this.closeIcon)).appendTo(this.isInline?this.element:this.appendTo).on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.closeButton?this.picker.find("a.datepicker-close").show():this.picker.find("a.datepicker-close").hide(),this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".date-switch").each((function(){t(this).parent().prepend(t(this).siblings(".next")),t(this).parent().append(t(this).siblings(".prev"))})),this.picker.find(".prev, .next").toggleClass("prev next")),t(document).on("mousedown",(function(e){0===t(e.target).closest(".datepicker.datepicker-inline, .datepicker.datepicker-dropdown").length&&o.hide()})),this.autoclose=!0,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.calendarWeeks=!1,"calendarWeeks"in n?this.calendarWeeks=n.calendarWeeks:"dateCalendarWeeks"in this.element.data()&&(this.calendarWeeks=this.element.data("date-calendar-weeks")),this.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",(function(t,e){return parseInt(e)+1})),this.weekStart=(n.weekStart||this.element.data("date-weekstart")||i[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.datesDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setDatesDisabled(n.datesDisabled||this.element.data("dates-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show(),this._attachEvents()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this.keyboardNavigation?this._events=[[this.element,{focus:this.autoShow?t.proxy(this.show,this):function(){},keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this),click:this.element.attr("readonly")?t.proxy(this.show,this):function(){}}]]:this._events=[[this.element,{focus:this.autoShow?t.proxy(this.show,this):function(){}}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:this.autoShow?t.proxy(this.show,this):function(){},keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this.disableDblClickSelection&&(this._events[this._events.length]=[this.element,{dblclick:function(e){e.preventDefault(),e.stopPropagation(),t(this).blur()}}]);for(var e,n,i=0;i<this._events.length;i++)e=this._events[i][0],n=this._events[i][1],e.on(n)},_detachEvents:function(){for(var t,e,n=0;n<this._events.length;n++)t=this._events[n][0],e=this._events[n][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(e){this.isInline||this.picker.is(":visible")&&(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t))},getFormattedDate:function(t){return void 0===t&&(t=this.format),r.formatDate(this.date,t,this.language)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=r.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=r.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,(function(t){return parseInt(t,10)})),this.update(),this.updateNavArrows()},setDatesDisabled:function(e){this.datesDisabled=e||[],t.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/)),this.datesDisabled=t.map(this.datesDisabled,(function(t){return r.parseDate(t,this.format,this.language).valueOf()})),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter((function(){return"auto"!=t(this).css("z-index")})).first().css("z-index"))+10,n=this.component?this.component:this.element,i=n.offset(),r=n.outerHeight()+parseInt(n.css("margin-top")),o=n.outerWidth()+parseInt(n.css("margin-left")),a=i.top+r,s=i.left;this.picker.removeClass("datepicker-top datepicker-bottom"),a+this.picker.outerHeight()>=t(window).scrollTop()+t(window).height()?(a=i.top-this.picker.outerHeight(),this.picker.addClass("datepicker-top")):this.picker.addClass("datepicker-bottom"),i.left+this.picker.width()>=t(window).width()&&(s=i.left+o-this.picker.width()),this.picker.css({top:a,left:s,zIndex:e})}},update:function(){var e,n=!1,i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],n=!0):e=i||null==this.initialDate?this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val():this.initialDate,e.length>this.formatText.length)return t(this.picker).addClass("is-invalid"),void t(this.element).addClass("is-invalid-input");t(this.picker).removeClass("is-invalid"),t(this.element).removeClass("is-invalid-input"),this.date=r.parseDate(e,this.format,this.language),(n||null!=this.initialDate)&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate.valueOf()):this.date>this.endDate?this.viewDate=new Date(this.endDate.valueOf()):this.viewDate=new Date(this.date.valueOf()),this.fill()},fillDow:function(){var t=this.weekStart,e="<tr>";if(this.calendarWeeks){var n='<th class="cw">&nbsp;</th>';e+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;t<this.weekStart+7;)e+='<th class="dow">'+i[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+i[this.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var n=new Date(this.viewDate.valueOf()),o=n.getUTCFullYear(),a=n.getUTCMonth(),s=n.getUTCDate(),l=n.getUTCHours(),u=n.getUTCMinutes(),c=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,h=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,d=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,f=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,p=this.date&&e(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;i[this.language].titleFormat||i.en.titleFormat,this.picker.find(".datepicker-days thead th:eq(1)").text(i[this.language].months[a]+" "+o),this.picker.find(".datepicker-hours thead th:eq(1)").text(s+" "+i[this.language].months[a]+" "+o),this.picker.find(".datepicker-minutes thead th:eq(1)").text(s+" "+i[this.language].months[a]+" "+o),this.picker.find("tfoot th.today").text(i[this.language].today).toggle(!1!==this.todayBtn),this.updateNavArrows(),this.fillMonths();var _=e(o,a-1,28,0,0,0,0),g=r.getDaysInMonth(_.getUTCFullYear(),_.getUTCMonth());_.setUTCDate(g),_.setUTCDate(g-(_.getUTCDay()-this.weekStart+7)%7);var y=new Date(_.valueOf());y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var v,x=[];_.valueOf()<y;){if(_.getUTCDay()==this.weekStart&&(x.push("<tr>"),this.calendarWeeks)){var b=new Date(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()-_.getDay()+10-(this.weekStart&&this.weekStart%7<5&&7)),w=new Date(b.getFullYear(),0,4),M=~~((b-w)/864e5/7+1.5);x.push('<td class="cw">'+M+"</td>")}v=" "+this.onRender(_)+" ",_.getUTCFullYear()<o||_.getUTCFullYear()==o&&_.getUTCMonth()<a?v+=" old":(_.getUTCFullYear()>o||_.getUTCFullYear()==o&&_.getUTCMonth()>a)&&(v+=" new"),this.todayHighlight&&_.getUTCFullYear()==m.getFullYear()&&_.getUTCMonth()==m.getMonth()&&_.getUTCDate()==m.getDate()&&(v+=" today"),p&&_.valueOf()==p&&(v+=" active"),(_.valueOf()<this.startDate||_.valueOf()>this.endDate||-1!==t.inArray(_.getUTCDay(),this.daysOfWeekDisabled)||-1!==t.inArray(_.valueOf(),this.datesDisabled))&&(v+=" disabled"),x.push('<td class="day'+v+'">'+_.getUTCDate()+"</td>"),_.getUTCDay()==this.weekEnd&&x.push("</tr>"),_.setUTCDate(_.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(x.join("")),x=[];for(var T=0;T<24;T++)v="",(k=e(o,a,s,T)).valueOf()+36e5<this.startDate||k.valueOf()>this.endDate?v+=" disabled":l==T&&(v+=" active"),x.push('<span class="hour'+v+'">'+T+":00</span>");for(this.picker.find(".datepicker-hours td").html(x.join("")),x=[],T=0;T<60;T+=this.minuteStep){var k;v="",(k=e(o,a,s,l,T)).valueOf()<this.startDate||k.valueOf()>this.endDate?v+=" disabled":Math.floor(u/this.minuteStep)==Math.floor(T/this.minuteStep)&&(v+=" active"),x.push('<span class="minute'+v+'">'+l+":"+(T<10?"0"+T:T)+"</span>")}this.picker.find(".datepicker-minutes td").html(x.join(""));var S=this.date&&this.date.getUTCFullYear(),E=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");S&&S==o&&E.eq(this.date.getUTCMonth()).addClass("active"),(o<c||o>d)&&E.addClass("disabled"),o==c&&E.slice(0,h).addClass("disabled"),o==d&&E.slice(f+1).addClass("disabled"),x="",o=10*parseInt(o/10,10);var C=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");for(o-=1,T=-1;T<11;T++)x+='<span class="year'+(-1==T||10==T?" old":"")+(S==o?" active":"")+(o<c||o>d?" disabled":"")+'">'+o+"</span>",o+=1;C.html(x)}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth(),i=t.getUTCDate(),r=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()&&r<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()&&r>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(n){n.stopPropagation(),n.preventDefault(),(t(n.target).hasClass("datepicker-close")||t(n.target).parent().hasClass("datepicker-close"))&&this.hide();var i=t(n.target).closest("span, td, th");if(1==i.length){if(i.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"date-switch":this.showMode(1);break;case"prev":case"next":var o=r.modes[this.viewMode].navStep*("prev"==i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,o);break;case 1:this.viewDate=this.moveDate(this.viewDate,o);break;case 2:this.viewDate=this.moveMonth(this.viewDate,o);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,o)}this.fill();break;case"today":var a=new Date;a=e(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(a)}break;case"span":if(!i.is(".disabled")){if(i.is(".month"))if(3===this.minView){var s=i.parent().find("span").index(i)||0,l=this.viewDate.getUTCFullYear(),u=1,c=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();this._setDate(e(l,s,u,c,h,d,0))}else this.viewDate.setUTCDate(1),s=i.parent().find("span").index(i),this.viewDate.setUTCMonth(s),this.element.trigger({type:"changeMonth",date:this.viewDate});else i.is(".year")?4===this.minView?(l=parseInt(i.text(),10)||0,s=0,u=1,c=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds(),this._setDate(e(l,s,u,c,h,d,0))):(this.viewDate.setUTCDate(1),l=parseInt(i.text(),10)||0,this.viewDate.setUTCFullYear(l),this.element.trigger({type:"changeYear",date:this.viewDate})):i.is(".hour")?(c=parseInt(i.text(),10)||0,l=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),u=this.viewDate.getUTCDate(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds(),this._setDate(e(l,s,u,c,h,d,0))):i.is(".minute")&&(h=parseInt(i.text().substr(i.text().indexOf(":")+1),10)||0,l=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),u=this.viewDate.getUTCDate(),c=this.viewDate.getUTCHours(),d=this.viewDate.getUTCSeconds(),this._setDate(e(l,s,u,c,h,d,0)));if(0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":i.is(".day")&&!i.is(".disabled")&&(u=parseInt(i.text(),10)||1,l=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds(),i.is(".old")?0===s?(s=11,l-=1):s-=1:i.is(".new")&&(11==s?(s=0,l+=1):s+=1),this._setDate(e(l,s,u,c,h,d,0))),f=this.viewMode,this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){var n;e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date}),this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),this.autoclose)},moveHour:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return e=e>0?1:-1,n.setUTCHours(n.getUTCHours()+e),n},moveDate:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return e=e>0?1:-1,n.setUTCDate(n.getUTCDate()+e),n},moveMonth:function(t,e){if(!e)return t;var n,i,r=new Date(t.valueOf()),o=r.getUTCDate(),a=r.getUTCMonth(),s=Math.abs(e);if(e=e>0?1:-1,1==s)i=-1==e?function(){return r.getUTCMonth()==a}:function(){return r.getUTCMonth()!=n},n=a+e,r.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var l=0;l<s;l++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(o),i=function(){return n!=r.getUTCMonth()}}for(;i();)r.setUTCDate(--o),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(!this.keyboardNavigation)return!0;if(this.picker.is(":not(:visible)"))27==t.keyCode&&this.show();else{var e,n,i,r,o=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):((n=new Date(this.date.valueOf())).setUTCDate(this.date.getUTCDate()+e),(i=new Date(this.viewDate.valueOf())).setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):((n=new Date(this.date.valueOf())).setUTCDate(this.date.getUTCDate()+7*e),(i=new Date(this.viewDate.valueOf())).setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}o&&(this.element.trigger({type:"changeDate",date:this.date}),this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change())}},showMode:function(t){if(t){var e=Math.max(0,Math.min(r.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.viewMode=e)}this.picker.find(">div").hide().filter(".datepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(t){this._setDate(null,"date")}},t.fn.fdatepicker=function(e){var i=Array.apply(null,arguments);return i.shift(),this.each((function(){var r=t(this),o=r.data("datepicker"),a="object"==typeof e&&e;o||r.data("datepicker",o=new n(this,t.extend({},t.fn.fdatepicker.defaults,a))),"string"==typeof e&&"function"==typeof o[e]&&o[e].apply(o,i)}))},t.fn.fdatepicker.defaults={onRender:function(t){return""}},t.fn.fdatepicker.Constructor=n;var i=t.fn.fdatepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",titleFormat:"MM yyyy"}},r={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,r.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return this.formatText=t,{separators:e,parts:n}},parseDate:function(n,r,o){if(n instanceof Date)return new Date(n.valueOf()-6e4*n.getTimezoneOffset());if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(n)&&(r=this.parseFormat("yyyy-mm-dd")),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(n)&&(r=this.parseFormat("yyyy-mm-dd hh:ii")),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(n)&&(r=this.parseFormat("yyyy-mm-dd hh:ii:ss")),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(n)){var a,s=/([-+]\d+)([dmwy])/,l=n.match(/([-+]\d+)([dmwy])/g);n=new Date;for(var u=0;u<l.length;u++)switch(d=s.exec(l[u]),a=parseInt(d[1]),d[2]){case"d":n.setUTCDate(n.getUTCDate()+a);break;case"m":n=Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype,n,a);break;case"w":n.setUTCDate(n.getUTCDate()+7*a);break;case"y":n=Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype,n,a)}return e(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds())}l=n&&n.match(this.nonpunctuation)||[],n=new Date;var c,h,d,f={},p=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","d","dd"],m={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};if(m.M=m.MM=m.mm=m.m,m.dd=m.d,n=e(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0),l.length==r.parts.length){u=0;for(var _=r.parts.length;u<_;u++){if(c=parseInt(l[u],10),d=r.parts[u],isNaN(c))switch(d){case"MM":h=t(i[o].months).filter((function(){var t=this.slice(0,l[u].length);return t==l[u].slice(0,t.length)})),c=t.inArray(h[0],i[o].months)+1;break;case"M":h=t(i[o].monthsShort).filter((function(){var t=this.slice(0,l[u].length);return t==l[u].slice(0,t.length)})),c=t.inArray(h[0],i[o].monthsShort)+1}f[d]=c}var g;for(u=0;u<p.length;u++)(g=p[u])in f&&!isNaN(f[g])&&m[g](n,f[g])}return n},formatDate:function(e,n,r){if(null==e)return"";var o={h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds(),d:e.getUTCDate(),m:e.getUTCMonth()+1,M:i[r].monthsShort[e.getUTCMonth()],MM:i[r].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.hh=(o.h<10?"0":"")+o.h,o.ii=(o.i<10?"0":"")+o.i,o.ss=(o.s<10?"0":"")+o.s,o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var a=t.extend([],n.separators),s=0,l=n.parts.length;s<l;s++)a.length&&e.push(a.shift()),e.push(o[n.parts[s]]);return e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:function(t,e){return'<thead><tr><th class="prev">'+t+'</th><th colspan="5" class="date-switch"></th><th class="next">'+e+"</th></tr></thead>"},contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>',template:function(t,e,n){return'<div class="datepicker"><div class="datepicker-minutes"><table class=" table-condensed">'+r.headTemplate(t,e)+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-hours"><table class=" table-condensed">'+r.headTemplate(t,e)+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-days"><table class=" table-condensed">'+r.headTemplate(t,e)+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+r.headTemplate(t,e)+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+r.headTemplate(t,e)+r.contTemplate+r.footTemplate+'</table></div><a class="button datepicker-close tiny alert right" style="width:auto;">'+n+"</a></div>"}};t.fn.fdatepicker.DPGlobal=r}(window.jQuery)},9690:()=>{!function(t){"use strict";var e={version:"6.3.0",_plugins:{},_uuids:[],rtl:function(){return"rtl"===t("html").attr("dir")},plugin:function(t,e){var r=e||n(t),o=i(r);this._plugins[o]=this[r]=t},registerPlugin:function(t,e){var r=e?i(e):n(t.constructor).toLowerCase();t.uuid=this.GetYoDigits(6,r),t.$element.attr("data-"+r)||t.$element.attr("data-"+r,t.uuid),t.$element.data("zfPlugin")||t.$element.data("zfPlugin",t),t.$element.trigger("init.zf."+r),this._uuids.push(t.uuid)},unregisterPlugin:function(t){var e=i(n(t.$element.data("zfPlugin").constructor));for(var r in this._uuids.splice(this._uuids.indexOf(t.uuid),1),t.$element.removeAttr("data-"+e).removeData("zfPlugin").trigger("destroyed.zf."+e),t)t[r]=null},reInit:function(e){var n=e instanceof t;try{if(n)e.each((function(){t(this).data("zfPlugin")._init()}));else{var r=this;({object:function(e){e.forEach((function(e){e=i(e),t("[data-"+e+"]").foundation("_init")}))},string:function(){e=i(e),t("[data-"+e+"]").foundation("_init")},undefined:function(){this.object(Object.keys(r._plugins))}})[typeof e](e)}}catch(t){console.error(t)}finally{return e}},GetYoDigits:function(t,e){return t=t||6,Math.round(Math.pow(36,t+1)-Math.random()*Math.pow(36,t)).toString(36).slice(1)+(e?"-"+e:"")},reflow:function(e,n){void 0===n?n=Object.keys(this._plugins):"string"==typeof n&&(n=[n]);var i=this;t.each(n,(function(n,r){var o=i._plugins[r];t(e).find("[data-"+r+"]").addBack("[data-"+r+"]").each((function(){var e=t(this),n={};if(e.data("zfPlugin"))console.warn("Tried to initialize "+r+" on an element that already has a Foundation plugin.");else{e.attr("data-options")&&e.attr("data-options").split(";").forEach((function(t,e){var i,r=t.split(":").map((function(t){return t.trim()}));r[0]&&(n[r[0]]="true"===(i=r[1])||"false"!==i&&(isNaN(1*i)?i:parseFloat(i)))}));try{e.data("zfPlugin",new o(t(this),n))}catch(t){console.error(t)}finally{return}}}))}))},getFnName:n,transitionend:function(t){var e,n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},i=document.createElement("div");for(var r in n)void 0!==i.style[r]&&(e=n[r]);return e||(e=setTimeout((function(){t.triggerHandler("transitionend",[t])}),1),"transitionend")}};function n(t){if(void 0===Function.prototype.name){var e=/function\s([^(]{1,})\(/.exec(t.toString());return e&&e.length>1?e[1].trim():""}return void 0===t.prototype?t.constructor.name:t.prototype.constructor.name}function i(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}e.util={throttle:function(t,e){var n=null;return function(){var i=this,r=arguments;null===n&&(n=setTimeout((function(){t.apply(i,r),n=null}),e))}}},window.Foundation=e,t.fn.foundation=function(i){var r=typeof i,o=t("meta.foundation-mq"),a=t(".no-js");if(o.length||t('<meta class="foundation-mq">').appendTo(document.head),a.length&&a.removeClass("no-js"),"undefined"===r)e.MediaQuery._init(),e.reflow(this);else{if("string"!==r)throw new TypeError("We're sorry, "+r+" is not a valid parameter. You must use a string representing the method you wish to invoke.");var s=Array.prototype.slice.call(arguments,1),l=this.data("zfPlugin");if(void 0===l||void 0===l[i])throw new ReferenceError("We're sorry, '"+i+"' is not an available method for "+(l?n(l):"this element")+".");1===this.length?l[i].apply(l,s):this.each((function(e,n){l[i].apply(t(n).data("zfPlugin"),s)}))}return this},function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout((function(){t(i=n)}),n-e)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r})}(jQuery),function(t){function e(t,e){if((t=t.length?t[0]:t)===window||t===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var n=t.getBoundingClientRect(),i=t.parentNode.getBoundingClientRect(),r=document.body.getBoundingClientRect(),o=window.pageYOffset,a=window.pageXOffset;return{width:n.width,height:n.height,offset:{top:n.top+o,left:n.left+a},parentDims:{width:i.width,height:i.height,offset:{top:i.top+o,left:i.left+a}},windowDims:{width:r.width,height:r.height,offset:{top:o,left:a}}}}Foundation.Box={ImNotTouchingYou:function(t,n,i,r){var o,a,s,l,u=e(t);if(n){var c=e(n);a=u.offset.top+u.height<=c.height+c.offset.top,o=u.offset.top>=c.offset.top,s=u.offset.left>=c.offset.left,l=u.offset.left+u.width<=c.width+c.offset.left}else a=u.offset.top+u.height<=u.windowDims.height+u.windowDims.offset.top,o=u.offset.top>=u.windowDims.offset.top,s=u.offset.left>=u.windowDims.offset.left,l=u.offset.left+u.width<=u.windowDims.width;return i?s===l==1:r?o===a==1:-1===[a,o,s,l].indexOf(!1)},GetDimensions:e,GetOffsets:function(t,n,i,r,o,a){var s=e(t),l=n?e(n):null;switch(i){case"top":return{left:Foundation.rtl()?l.offset.left-s.width+l.width:l.offset.left,top:l.offset.top-(s.height+r)};case"left":return{left:l.offset.left-(s.width+o),top:l.offset.top};case"right":return{left:l.offset.left+l.width+o,top:l.offset.top};case"center top":return{left:l.offset.left+l.width/2-s.width/2,top:l.offset.top-(s.height+r)};case"center bottom":return{left:a?o:l.offset.left+l.width/2-s.width/2,top:l.offset.top+l.height+r};case"center left":return{left:l.offset.left-(s.width+o),top:l.offset.top+l.height/2-s.height/2};case"center right":return{left:l.offset.left+l.width+o+1,top:l.offset.top+l.height/2-s.height/2};case"center":return{left:s.windowDims.offset.left+s.windowDims.width/2-s.width/2,top:s.windowDims.offset.top+s.windowDims.height/2-s.height/2};case"reveal":return{left:(s.windowDims.width-s.width)/2,top:s.windowDims.offset.top+r};case"reveal full":return{left:s.windowDims.offset.left,top:s.windowDims.offset.top};case"left bottom":return{left:l.offset.left,top:l.offset.top+l.height+r};case"right bottom":return{left:l.offset.left+l.width+o-s.width,top:l.offset.top+l.height+r};default:return{left:Foundation.rtl()?l.offset.left-s.width+l.width:l.offset.left+o,top:l.offset.top+l.height+r}}}}}(jQuery),function(t){var e={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},n={},i={keys:function(t){var e={};for(var n in t)e[t[n]]=t[n];return e}(e),parseKey:function(t){var n=e[t.which||t.keyCode]||String.fromCharCode(t.which).toUpperCase();return n=n.replace(/\W+/,""),t.shiftKey&&(n="SHIFT_"+n),t.ctrlKey&&(n="CTRL_"+n),t.altKey&&(n="ALT_"+n),n.replace(/_$/,"")},handleKey:function(e,i,r){var o,a=n[i],s=this.parseKey(e);if(!a)return console.warn("Component not defined!");if((o=r[(void 0===a.ltr?a:Foundation.rtl()?t.extend({},a.ltr,a.rtl):t.extend({},a.rtl,a.ltr))[s]])&&"function"==typeof o){var l=o.apply();(r.handled||"function"==typeof r.handled)&&r.handled(l)}else(r.unhandled||"function"==typeof r.unhandled)&&r.unhandled()},findFocusable:function(e){return!!e&&e.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter((function(){return!(!t(this).is(":visible")||t(this).attr("tabindex")<0)}))},register:function(t,e){n[t]=e},trapFocus:function(t){var e=Foundation.Keyboard.findFocusable(t),n=e.eq(0),i=e.eq(-1);t.on("keydown.zf.trapfocus",(function(t){t.target===i[0]&&"TAB"===Foundation.Keyboard.parseKey(t)?(t.preventDefault(),n.focus()):t.target===n[0]&&"SHIFT_TAB"===Foundation.Keyboard.parseKey(t)&&(t.preventDefault(),i.focus())}))},releaseFocus:function(t){t.off("keydown.zf.trapfocus")}};Foundation.Keyboard=i}(jQuery),function(t){var e={queries:[],current:"",_init:function(){var e,n,i,r=t(".foundation-mq").css("font-family");for(var o in i=void 0,i={},e="string"!=typeof(n=r)?i:(n=n.trim().slice(1,-1))?n.split("&").reduce((function(t,e){var n=e.replace(/\+/g," ").split("="),i=n[0],r=n[1];return i=decodeURIComponent(i),r=void 0===r?null:decodeURIComponent(r),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r,t}),{}):i)e.hasOwnProperty(o)&&this.queries.push({name:o,value:"only screen and (min-width: "+e[o]+")"});this.current=this._getCurrentSize(),this._watcher()},atLeast:function(t){var e=this.get(t);return!!e&&window.matchMedia(e).matches},is:function(t){return(t=t.trim().split(" ")).length>1&&"only"===t[1]?t[0]===this._getCurrentSize():this.atLeast(t[0])},get:function(t){for(var e in this.queries)if(this.queries.hasOwnProperty(e)){var n=this.queries[e];if(t===n.name)return n.value}return null},_getCurrentSize:function(){for(var t,e=0;e<this.queries.length;e++){var n=this.queries[e];window.matchMedia(n.value).matches&&(t=n)}return"object"==typeof t?t.name:t},_watcher:function(){var e=this;t(window).on("resize.zf.mediaquery",(function(){var n=e._getCurrentSize(),i=e.current;n!==i&&(e.current=n,t(window).trigger("changed.zf.mediaquery",[n,i]))}))}};Foundation.MediaQuery=e,window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e,n=document.createElement("style"),i=document.getElementsByTagName("script")[0];n.type="text/css",n.id="matchmediajs-test",i&&i.parentNode&&i.parentNode.insertBefore(n,i),e="getComputedStyle"in window&&window.getComputedStyle(n,null)||n.currentStyle,t={matchMedium:function(t){var i="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return n.styleSheet?n.styleSheet.cssText=i:n.textContent=i,"1px"===e.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),Foundation.MediaQuery=e}(jQuery),function(t){var e=["mui-enter","mui-leave"],n=["mui-enter-active","mui-leave-active"],i={animateIn:function(t,e,n){r(!0,t,e,n)},animateOut:function(t,e,n){r(!1,t,e,n)}};function r(i,r,o,a){if((r=t(r).eq(0)).length){var s=i?e[0]:e[1],l=i?n[0]:n[1];u(),r.addClass(o).css("transition","none"),requestAnimationFrame((function(){r.addClass(s),i&&r.show()})),requestAnimationFrame((function(){r[0].offsetWidth,r.css("transition","").addClass(l)})),r.one(Foundation.transitionend(r),(function(){i||r.hide(),u(),a&&a.apply(r)}))}function u(){r[0].style.transitionDuration=0,r.removeClass(s+" "+l+" "+o)}}Foundation.Move=function(t,e,n){var i,r,o=null;if(0===t)return n.apply(e),void e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e]);i=window.requestAnimationFrame((function a(s){o||(o=s),r=s-o,n.apply(e),r<t?i=window.requestAnimationFrame(a,e):(window.cancelAnimationFrame(i),e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e]))}))},Foundation.Motion=i}(jQuery),function(t){var e={Feather:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zf";e.attr("role","menubar");var i=e.find("li").attr({role:"menuitem"}),r="is-"+n+"-submenu",o=r+"-item",a="is-"+n+"-submenu-parent";i.each((function(){var e=t(this),i=e.children("ul");i.length&&(e.addClass(a).attr({"aria-haspopup":!0,"aria-label":e.children("a:first").text()}),"drilldown"===n&&e.attr({"aria-expanded":!1}),i.addClass("submenu "+r).attr({"data-submenu":"",role:"menu"}),"drilldown"===n&&i.attr({"aria-hidden":!0})),e.parent("[data-submenu]").length&&e.addClass("is-submenu-item "+o)}))},Burn:function(t,e){var n="is-"+e+"-submenu",i=n+"-item",r="is-"+e+"-submenu-parent";t.find(">li, .menu, .menu > li").removeClass(n+" "+i+" "+r+" is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","")}};Foundation.Nest=e}(jQuery),function(t){Foundation.Timer=function(t,e,n){var i,r,o=this,a=e.duration,s=Object.keys(t.data())[0]||"timer",l=-1;this.isPaused=!1,this.restart=function(){l=-1,clearTimeout(r),this.start()},this.start=function(){this.isPaused=!1,clearTimeout(r),l=l<=0?a:l,t.data("paused",!1),i=Date.now(),r=setTimeout((function(){e.infinite&&o.restart(),n&&"function"==typeof n&&n()}),l),t.trigger("timerstart.zf."+s)},this.pause=function(){this.isPaused=!0,clearTimeout(r),t.data("paused",!0);var e=Date.now();l-=e-i,t.trigger("timerpaused.zf."+s)}},Foundation.onImagesLoaded=function(e,n){var i=e.length;function r(){0==--i&&n()}0===i&&n(),e.each((function(){if(this.complete||4===this.readyState||"complete"===this.readyState)r();else{var e=t(this).attr("src");t(this).attr("src",e+"?"+(new Date).getTime()),t(this).one("load",(function(){r()}))}}))}}(jQuery),function(t){t.spotSwipe={version:"1.0.0",enabled:"ontouchstart"in document.documentElement,preventDefault:!1,moveThreshold:75,timeThreshold:200};var e,n,i,r=!1;function o(){this.removeEventListener("touchmove",a),this.removeEventListener("touchend",o),r=!1}function a(a){if(t.spotSwipe.preventDefault&&a.preventDefault(),r){var s,l=a.touches[0].pageX,u=(a.touches[0].pageY,e-l);i=(new Date).getTime()-n,Math.abs(u)>=t.spotSwipe.moveThreshold&&i<=t.spotSwipe.timeThreshold&&(s=u>0?"left":"right"),s&&(a.preventDefault(),o.call(this),t(this).trigger("swipe",s).trigger("swipe"+s))}}function s(t){1==t.touches.length&&(e=t.touches[0].pageX,t.touches[0].pageY,r=!0,n=(new Date).getTime(),this.addEventListener("touchmove",a,!1),this.addEventListener("touchend",o,!1))}t.event.special.swipe={setup:function(){this.addEventListener&&this.addEventListener("touchstart",s,!1)}},t.each(["left","up","down","right"],(function(){t.event.special["swipe"+this]={setup:function(){t(this).on("swipe",t.noop)}}}))}(jQuery),function(t){t.fn.addTouch=function(){this.each((function(n,i){t(i).bind("touchstart touchmove touchend touchcancel",(function(){e(event)}))}));var e=function(t){var e,n=t.changedTouches[0],i={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[t.type];"MouseEvent"in window&&"function"==typeof window.MouseEvent?e=new window.MouseEvent(i,{bubbles:!0,cancelable:!0,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY}):(e=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(e)}}}(jQuery),function(t){var e=function(){for(var t=["WebKit","Moz","O","Ms",""],e=0;e<t.length;e++)if(t[e]+"MutationObserver"in window)return window[t[e]+"MutationObserver"];return!1}(),n=function(e,n){e.data(n).split(" ").forEach((function(i){t("#"+i)["close"===n?"trigger":"triggerHandler"](n+".zf.trigger",[e])}))};function i(){var n,i;!function(){if(!e)return!1;var n=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),i=function(e){var n=t(e[0].target);switch(e[0].type){case"attributes":"scroll"===n.attr("data-events")&&"data-events"===e[0].attributeName&&n.triggerHandler("scrollme.zf.trigger",[n,window.pageYOffset]),"resize"===n.attr("data-events")&&"data-events"===e[0].attributeName&&n.triggerHandler("resizeme.zf.trigger",[n]),"style"===e[0].attributeName&&(n.closest("[data-mutate]").attr("data-events","mutate"),n.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[n.closest("[data-mutate]")]));break;case"childList":n.closest("[data-mutate]").attr("data-events","mutate"),n.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[n.closest("[data-mutate]")]);break;default:return!1}};if(n.length)for(var r=0;r<=n.length-1;r++)new e(i).observe(n[r],{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-events","style"]})}(),n=void 0,(i=t("[data-resize]")).length&&t(window).off("resize.zf.trigger").on("resize.zf.trigger",(function(r){n&&clearTimeout(n),n=setTimeout((function(){e||i.each((function(){t(this).triggerHandler("resizeme.zf.trigger")})),i.attr("data-events","resize")}),10)})),function(n){var i=void 0,r=t("[data-scroll]");r.length&&t(window).off("scroll.zf.trigger").on("scroll.zf.trigger",(function(n){i&&clearTimeout(i),i=setTimeout((function(){e||r.each((function(){t(this).triggerHandler("scrollme.zf.trigger")})),r.attr("data-events","scroll")}),10)}))}(),function(n){var i=t("[data-mutate]");i.length&&e&&i.each((function(){t(this).triggerHandler("mutateme.zf.trigger")}))}(),function(e){var n=["dropdown","tooltip","reveal"];if(t("[data-yeti-box]").length){var i=n.map((function(t){return"closeme.zf."+t})).join(" ");t(window).off(i).on(i,(function(e,n){var i=e.namespace.split(".")[0];t("[data-"+i+"]").not('[data-yeti-box="'+n+'"]').each((function(){var e=t(this);e.triggerHandler("close.zf.trigger",[e])}))}))}}()}t(document).on("click.zf.trigger","[data-open]",(function(){n(t(this),"open")})),t(document).on("click.zf.trigger","[data-close]",(function(){t(this).data("close")?n(t(this),"close"):t(this).trigger("close.zf.trigger")})),t(document).on("click.zf.trigger","[data-toggle]",(function(){t(this).data("toggle")?n(t(this),"toggle"):t(this).trigger("toggle.zf.trigger")})),t(document).on("close.zf.trigger","[data-closable]",(function(e){e.stopPropagation();var n=t(this).data("closable");""!==n?Foundation.Motion.animateOut(t(this),n,(function(){t(this).trigger("closed.zf")})):t(this).fadeOut().trigger("closed.zf")})),t(document).on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",(function(){var e=t(this).data("toggle-focus");t("#"+e).triggerHandler("toggle.zf.trigger",[t(this)])})),t(window).on("load",(function(){i()})),Foundation.IHearYou=i}(jQuery);var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(n){var i=function(){function i(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Abide")}return t(i,[{key:"_init",value:function(){this.$inputs=this.$element.find("input, textarea, select"),this._events()}},{key:"_events",value:function(){var t=this;this.$element.off(".abide").on("reset.zf.abide",(function(){t.resetForm()})).on("submit.zf.abide",(function(){return t.validateForm()})),"fieldChange"===this.options.validateOn&&this.$inputs.off("change.zf.abide").on("change.zf.abide",(function(e){t.validateInput(n(e.target))})),this.options.liveValidate&&this.$inputs.off("input.zf.abide").on("input.zf.abide",(function(e){t.validateInput(n(e.target))})),this.options.validateOnBlur&&this.$inputs.off("blur.zf.abide").on("blur.zf.abide",(function(e){t.validateInput(n(e.target))}))}},{key:"_reflow",value:function(){this._init()}},{key:"requiredCheck",value:function(t){if(!t.attr("required"))return!0;var e=!0;switch(t[0].type){case"checkbox":e=t[0].checked;break;case"select":case"select-one":case"select-multiple":var n=t.find("option:selected");n.length&&n.val()||(e=!1);break;default:t.val()&&t.val().length||(e=!1)}return e}},{key:"findFormError",value:function(t){var e=t.siblings(this.options.formErrorSelector);return e.length||(e=t.parent().find(this.options.formErrorSelector)),e}},{key:"findLabel",value:function(t){var e=t[0].id,n=this.$element.find('label[for="'+e+'"]');return n.length?n:t.closest("label")}},{key:"findRadioLabels",value:function(t){var e=this,i=t.map((function(t,i){var r=i.id,o=e.$element.find('label[for="'+r+'"]');return o.length||(o=n(i).closest("label")),o[0]}));return n(i)}},{key:"addErrorClasses",value:function(t){var e=this.findLabel(t),n=this.findFormError(t);e.length&&e.addClass(this.options.labelErrorClass),n.length&&n.addClass(this.options.formErrorClass),t.addClass(this.options.inputErrorClass).attr("data-invalid","")}},{key:"removeRadioErrorClasses",value:function(t){var e=this.$element.find(':radio[name="'+t+'"]'),n=this.findRadioLabels(e),i=this.findFormError(e);n.length&&n.removeClass(this.options.labelErrorClass),i.length&&i.removeClass(this.options.formErrorClass),e.removeClass(this.options.inputErrorClass).removeAttr("data-invalid")}},{key:"removeErrorClasses",value:function(t){if("radio"==t[0].type)return this.removeRadioErrorClasses(t.attr("name"));var e=this.findLabel(t),n=this.findFormError(t);e.length&&e.removeClass(this.options.labelErrorClass),n.length&&n.removeClass(this.options.formErrorClass),t.removeClass(this.options.inputErrorClass).removeAttr("data-invalid")}},{key:"validateInput",value:function(t){var e=this.requiredCheck(t),i=!1,r=!0,o=t.attr("data-validator"),a=!0;if(t.is("[data-abide-ignore]")||t.is('[type="hidden"]'))return!0;switch(t[0].type){case"radio":i=this.validateRadio(t.attr("name"));break;case"checkbox":i=e;break;case"select":case"select-one":case"select-multiple":i=e;break;default:i=this.validateText(t)}o&&(r=this.matchValidation(t,o,t.attr("required"))),t.attr("data-equalto")&&(a=this.options.validators.equalTo(t));var s,l=-1===[e,i,r,a].indexOf(!1),u=(l?"valid":"invalid")+".zf.abide";if(l){var c=this.$element.find('[data-equalto="'+t.attr("id")+'"]');c.length&&(s=this,c.each((function(){n(this).val()&&s.validateInput(n(this))})))}return this[l?"removeErrorClasses":"addErrorClasses"](t),t.trigger(u,[t]),l}},{key:"validateForm",value:function(){var t=[],e=this;this.$inputs.each((function(){t.push(e.validateInput(n(this)))}));var i=-1===t.indexOf(!1);return this.$element.find("[data-abide-error]").css("display",i?"none":"block"),this.$element.trigger((i?"formvalid":"forminvalid")+".zf.abide",[this.$element]),i}},{key:"validateText",value:function(t,e){e=e||t.attr("pattern")||t.attr("type");var n=t.val(),i=!1;return n.length?i=this.options.patterns.hasOwnProperty(e)?this.options.patterns[e].test(n):e===t.attr("type")||new RegExp(e).test(n):t.prop("required")||(i=!0),i}},{key:"validateRadio",value:function(t){var e=this.$element.find(':radio[name="'+t+'"]'),i=!1,r=!1;return e.each((function(t,e){n(e).attr("required")&&(r=!0)})),r||(i=!0),i||e.each((function(t,e){n(e).prop("checked")&&(i=!0)})),i}},{key:"matchValidation",value:function(t,e,n){var i=this;return n=!!n,-1===e.split(" ").map((function(e){return i.options.validators[e](t,n,t.parent())})).indexOf(!1)}},{key:"resetForm",value:function(){var t=this.$element,e=this.options;n("."+e.labelErrorClass,t).not("small").removeClass(e.labelErrorClass),n("."+e.inputErrorClass,t).not("small").removeClass(e.inputErrorClass),n(e.formErrorSelector+"."+e.formErrorClass).removeClass(e.formErrorClass),t.find("[data-abide-error]").css("display","none"),n(":input",t).not(":button, :submit, :reset, :hidden, :radio, :checkbox, [data-abide-ignore]").val("").removeAttr("data-invalid"),n(":input:radio",t).not("[data-abide-ignore]").prop("checked",!1).removeAttr("data-invalid"),n(":input:checkbox",t).not("[data-abide-ignore]").prop("checked",!1).removeAttr("data-invalid"),t.trigger("formreset.zf.abide",[t])}},{key:"destroy",value:function(){var t=this;this.$element.off(".abide").find("[data-abide-error]").css("display","none"),this.$inputs.off(".abide").each((function(){t.removeErrorClasses(n(this))})),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",liveValidate:!1,validateOnBlur:!1,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(t,e,i){return n("#"+t.attr("data-equalto")).val()===t.val()}}},Foundation.plugin(i,"Abide")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Accordion"),Foundation.Keyboard.register("Accordion",{ENTER:"toggle",SPACE:"toggle",ARROW_DOWN:"next",ARROW_UP:"previous"})}return t(i,[{key:"_init",value:function(){this.$element.attr("role","tablist"),this.$tabs=this.$element.children("[data-accordion-item]"),this.$tabs.each((function(t,e){var i=n(e),r=i.children("[data-tab-content]"),o=r[0].id||Foundation.GetYoDigits(6,"accordion"),a=e.id||o+"-label";i.find("a:first").attr({"aria-controls":o,role:"tab",id:a,"aria-expanded":!1,"aria-selected":!1}),r.attr({role:"tabpanel","aria-labelledby":a,"aria-hidden":!0,id:o})}));var t=this.$element.find(".is-active").children("[data-tab-content]");t.length&&this.down(t,!0),this._events()}},{key:"_events",value:function(){var t=this;this.$tabs.each((function(){var e=n(this),i=e.children("[data-tab-content]");i.length&&e.children("a").off("click.zf.accordion keydown.zf.accordion").on("click.zf.accordion",(function(e){e.preventDefault(),t.toggle(i)})).on("keydown.zf.accordion",(function(n){Foundation.Keyboard.handleKey(n,"Accordion",{toggle:function(){t.toggle(i)},next:function(){var n=e.next().find("a").focus();t.options.multiExpand||n.trigger("click.zf.accordion")},previous:function(){var n=e.prev().find("a").focus();t.options.multiExpand||n.trigger("click.zf.accordion")},handled:function(){n.preventDefault(),n.stopPropagation()}})}))}))}},{key:"toggle",value:function(t){t.parent().hasClass("is-active")?this.up(t):this.down(t)}},{key:"down",value:function(t,e){var i=this;if(t.attr("aria-hidden",!1).parent("[data-tab-content]").addBack().parent().addClass("is-active"),!this.options.multiExpand&&!e){var r=this.$element.children(".is-active").children("[data-tab-content]");r.length&&this.up(r.not(t))}t.slideDown(this.options.slideSpeed,(function(){i.$element.trigger("down.zf.accordion",[t])})),n("#"+t.attr("aria-labelledby")).attr({"aria-expanded":!0,"aria-selected":!0})}},{key:"up",value:function(t){var e=t.parent().siblings(),i=this;(this.options.allowAllClosed||e.hasClass("is-active"))&&t.parent().hasClass("is-active")&&(t.slideUp(i.options.slideSpeed,(function(){i.$element.trigger("up.zf.accordion",[t])})),t.attr("aria-hidden",!0).parent().removeClass("is-active"),n("#"+t.attr("aria-labelledby")).attr({"aria-expanded":!1,"aria-selected":!1}))}},{key:"destroy",value:function(){this.$element.find("[data-tab-content]").stop(!0).slideUp(0).css("display",""),this.$element.find("a").off(".zf.accordion"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={slideSpeed:250,multiExpand:!1,allowAllClosed:!1},Foundation.plugin(i,"Accordion")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),Foundation.Nest.Feather(this.$element,"accordion"),this._init(),Foundation.registerPlugin(this,"AccordionMenu"),Foundation.Keyboard.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll"})}return t(i,[{key:"_init",value:function(){this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({role:"menu","aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".is-accordion-submenu-parent"),this.$menuLinks.each((function(){var t=this.id||Foundation.GetYoDigits(6,"acc-menu-link"),e=n(this),i=e.children("[data-submenu]"),r=i[0].id||Foundation.GetYoDigits(6,"acc-menu"),o=i.hasClass("is-active");e.attr({"aria-controls":r,"aria-expanded":o,role:"menuitem",id:t}),i.attr({"aria-labelledby":t,"aria-hidden":!o,role:"menu",id:r})}));var t=this.$element.find(".is-active");if(t.length){var e=this;t.each((function(){e.down(n(this))}))}this._events()}},{key:"_events",value:function(){var t=this;this.$element.find("li").each((function(){var e=n(this).children("[data-submenu]");e.length&&n(this).children("a").off("click.zf.accordionMenu").on("click.zf.accordionMenu",(function(n){n.preventDefault(),t.toggle(e)}))})).on("keydown.zf.accordionmenu",(function(e){var i,r,o=n(this),a=o.parent("ul").children("li"),s=o.children("[data-submenu]");a.each((function(t){if(n(this).is(o))return i=a.eq(Math.max(0,t-1)).find("a").first(),r=a.eq(Math.min(t+1,a.length-1)).find("a").first(),n(this).children("[data-submenu]:visible").length&&(r=o.find("li:first-child").find("a").first()),n(this).is(":first-child")?i=o.parents("li").first().find("a").first():i.parents("li").first().children("[data-submenu]:visible").length&&(i=i.parents("li").find("li:last-child").find("a").first()),void(n(this).is(":last-child")&&(r=o.parents("li").first().next("li").find("a").first()))})),Foundation.Keyboard.handleKey(e,"AccordionMenu",{open:function(){s.is(":hidden")&&(t.down(s),s.find("li").first().find("a").first().focus())},close:function(){s.length&&!s.is(":hidden")?t.up(s):o.parent("[data-submenu]").length&&(t.up(o.parent("[data-submenu]")),o.parents("li").first().find("a").first().focus())},up:function(){return i.focus(),!0},down:function(){return r.focus(),!0},toggle:function(){o.children("[data-submenu]").length&&t.toggle(o.children("[data-submenu]"))},closeAll:function(){t.hideAll()},handled:function(t){t&&e.preventDefault(),e.stopImmediatePropagation()}})}))}},{key:"hideAll",value:function(){this.up(this.$element.find("[data-submenu]"))}},{key:"showAll",value:function(){this.down(this.$element.find("[data-submenu]"))}},{key:"toggle",value:function(t){t.is(":animated")||(t.is(":hidden")?this.down(t):this.up(t))}},{key:"down",value:function(t){var e=this;this.options.multiOpen||this.up(this.$element.find(".is-active").not(t.parentsUntil(this.$element).add(t))),t.addClass("is-active").attr({"aria-hidden":!1}).parent(".is-accordion-submenu-parent").attr({"aria-expanded":!0}),t.slideDown(e.options.slideSpeed,(function(){e.$element.trigger("down.zf.accordionMenu",[t])}))}},{key:"up",value:function(t){var e=this;t.slideUp(e.options.slideSpeed,(function(){e.$element.trigger("up.zf.accordionMenu",[t])})),t.find("[data-submenu]").slideUp(0).addBack().attr("aria-hidden",!0).parent(".is-accordion-submenu-parent").attr("aria-expanded",!1)}},{key:"destroy",value:function(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),Foundation.Nest.Burn(this.$element,"accordion"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={slideSpeed:250,multiOpen:!0},Foundation.plugin(i,"AccordionMenu")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),Foundation.Nest.Feather(this.$element,"drilldown"),this._init(),Foundation.registerPlugin(this,"Drilldown"),Foundation.Keyboard.register("Drilldown",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close",TAB:"down",SHIFT_TAB:"up"})}return t(i,[{key:"_init",value:function(){this.$submenuAnchors=this.$element.find("li.is-drilldown-submenu-parent").children("a"),this.$submenus=this.$submenuAnchors.parent("li").children("[data-submenu]"),this.$menuItems=this.$element.find("li").not(".js-drilldown-back").attr("role","menuitem").find("a"),this.$element.attr("data-mutate",this.$element.attr("data-drilldown")||Foundation.GetYoDigits(6,"drilldown")),this._prepareMenu(),this._registerEvents(),this._keyboardEvents()}},{key:"_prepareMenu",value:function(){var t=this;this.$submenuAnchors.each((function(){var e=n(this),i=e.parent();t.options.parentLink&&e.clone().prependTo(i.children("[data-submenu]")).wrap('<li class="is-submenu-parent-item is-submenu-item is-drilldown-submenu-item" role="menu-item"></li>'),e.data("savedHref",e.attr("href")).removeAttr("href").attr("tabindex",0),e.children("[data-submenu]").attr({"aria-hidden":!0,tabindex:0,role:"menu"}),t._events(e)})),this.$submenus.each((function(){var e=n(this);if(!e.find(".js-drilldown-back").length)switch(t.options.backButtonPosition){case"bottom":e.append(t.options.backButton);break;case"top":e.prepend(t.options.backButton);break;default:console.error("Unsupported backButtonPosition value '"+t.options.backButtonPosition+"'")}t._back(e)})),this.options.autoHeight||this.$submenus.addClass("drilldown-submenu-cover-previous"),this.$element.parent().hasClass("is-drilldown")||(this.$wrapper=n(this.options.wrapper).addClass("is-drilldown"),this.options.animateHeight&&this.$wrapper.addClass("animate-height"),this.$wrapper=this.$element.wrap(this.$wrapper).parent().css(this._getMaxDims()))}},{key:"_resize",value:function(){this.$wrapper.css({"max-width":"none","min-height":"none"}),this.$wrapper.css(this._getMaxDims())}},{key:"_events",value:function(t){var e=this;t.off("click.zf.drilldown").on("click.zf.drilldown",(function(i){if(n(i.target).parentsUntil("ul","li").hasClass("is-drilldown-submenu-parent")&&(i.stopImmediatePropagation(),i.preventDefault()),e._show(t.parent("li")),e.options.closeOnClick){var r=n("body");r.off(".zf.drilldown").on("click.zf.drilldown",(function(t){t.target===e.$element[0]||n.contains(e.$element[0],t.target)||(t.preventDefault(),e._hideAll(),r.off(".zf.drilldown"))}))}})),this.$element.on("mutateme.zf.trigger",this._resize.bind(this))}},{key:"_registerEvents",value:function(){this.options.scrollTop&&(this._bindHandler=this._scrollTop.bind(this),this.$element.on("open.zf.drilldown hide.zf.drilldown closed.zf.drilldown",this._bindHandler))}},{key:"_scrollTop",value:function(){var t=this,e=""!=t.options.scrollTopElement?n(t.options.scrollTopElement):t.$element,i=parseInt(e.offset().top+t.options.scrollTopOffset);n("html, body").stop(!0).animate({scrollTop:i},t.options.animationDuration,t.options.animationEasing,(function(){this===n("html")[0]&&t.$element.trigger("scrollme.zf.drilldown")}))}},{key:"_keyboardEvents",value:function(){var t=this;this.$menuItems.add(this.$element.find(".js-drilldown-back > a, .is-submenu-parent-item > a")).on("keydown.zf.drilldown",(function(e){var i,r,o=n(this),a=o.parent("li").parent("ul").children("li").children("a");a.each((function(t){if(n(this).is(o))return i=a.eq(Math.max(0,t-1)),void(r=a.eq(Math.min(t+1,a.length-1)))})),Foundation.Keyboard.handleKey(e,"Drilldown",{next:function(){if(o.is(t.$submenuAnchors))return t._show(o.parent("li")),o.parent("li").one(Foundation.transitionend(o),(function(){o.parent("li").find("ul li a").filter(t.$menuItems).first().focus()})),!0},previous:function(){return t._hide(o.parent("li").parent("ul")),o.parent("li").parent("ul").one(Foundation.transitionend(o),(function(){setTimeout((function(){o.parent("li").parent("ul").parent("li").children("a").first().focus()}),1)})),!0},up:function(){return i.focus(),!0},down:function(){return r.focus(),!0},close:function(){t._back()},open:function(){return o.is(t.$menuItems)?o.is(t.$submenuAnchors)?(t._show(o.parent("li")),o.parent("li").one(Foundation.transitionend(o),(function(){o.parent("li").find("ul li a").filter(t.$menuItems).first().focus()})),!0):void 0:(t._hide(o.parent("li").parent("ul")),o.parent("li").parent("ul").one(Foundation.transitionend(o),(function(){setTimeout((function(){o.parent("li").parent("ul").parent("li").children("a").first().focus()}),1)})),!0)},handled:function(t){t&&e.preventDefault(),e.stopImmediatePropagation()}})}))}},{key:"_hideAll",value:function(){var t=this.$element.find(".is-drilldown-submenu.is-active").addClass("is-closing");this.options.autoHeight&&this.$wrapper.css({height:t.parent().closest("ul").data("calcHeight")}),t.one(Foundation.transitionend(t),(function(e){t.removeClass("is-active is-closing")})),this.$element.trigger("closed.zf.drilldown")}},{key:"_back",value:function(t){var e=this;t.off("click.zf.drilldown"),t.children(".js-drilldown-back").on("click.zf.drilldown",(function(n){n.stopImmediatePropagation(),e._hide(t);var i=t.parent("li").parent("ul").parent("li");i.length&&e._show(i)}))}},{key:"_menuLinkEvents",value:function(){var t=this;this.$menuItems.not(".is-drilldown-submenu-parent").off("click.zf.drilldown").on("click.zf.drilldown",(function(e){setTimeout((function(){t._hideAll()}),0)}))}},{key:"_show",value:function(t){this.options.autoHeight&&this.$wrapper.css({height:t.children("[data-submenu]").data("calcHeight")}),t.attr("aria-expanded",!0),t.children("[data-submenu]").addClass("is-active").attr("aria-hidden",!1),this.$element.trigger("open.zf.drilldown",[t])}},{key:"_hide",value:function(t){this.options.autoHeight&&this.$wrapper.css({height:t.parent().closest("ul").data("calcHeight")}),t.parent("li").attr("aria-expanded",!1),t.attr("aria-hidden",!0).addClass("is-closing"),t.addClass("is-closing").one(Foundation.transitionend(t),(function(){t.removeClass("is-active is-closing"),t.blur()})),t.trigger("hide.zf.drilldown",[t])}},{key:"_getMaxDims",value:function(){var t=0,e={},i=this;return this.$submenus.add(this.$element).each((function(){n(this).children("li").length;var r=Foundation.Box.GetDimensions(this).height;t=r>t?r:t,i.options.autoHeight&&(n(this).data("calcHeight",r),n(this).hasClass("is-drilldown-submenu")||(e.height=r))})),this.options.autoHeight||(e["min-height"]=t+"px"),e["max-width"]=this.$element[0].getBoundingClientRect().width+"px",e}},{key:"destroy",value:function(){this.options.scrollTop&&this.$element.off(".zf.drilldown",this._bindHandler),this._hideAll(),this.$element.off("mutateme.zf.trigger"),Foundation.Nest.Burn(this.$element,"drilldown"),this.$element.unwrap().find(".js-drilldown-back, .is-submenu-parent-item").remove().end().find(".is-active, .is-closing, .is-drilldown-submenu").removeClass("is-active is-closing is-drilldown-submenu").end().find("[data-submenu]").removeAttr("aria-hidden tabindex role"),this.$submenuAnchors.each((function(){n(this).off(".zf.drilldown")})),this.$submenus.removeClass("drilldown-submenu-cover-previous"),this.$element.find("a").each((function(){var t=n(this);t.removeAttr("tabindex"),t.data("savedHref")&&t.attr("href",t.data("savedHref")).removeData("savedHref")})),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={backButton:'<li class="js-drilldown-back"><a tabindex="0">Back</a></li>',backButtonPosition:"top",wrapper:"<div></div>",parentLink:!1,closeOnClick:!1,autoHeight:!1,animateHeight:!1,scrollTop:!1,scrollTopElement:"",scrollTopOffset:0,animationDuration:500,animationEasing:"swing"},Foundation.plugin(i,"Drilldown")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Dropdown"),Foundation.Keyboard.register("Dropdown",{ENTER:"open",SPACE:"open",ESCAPE:"close"})}return t(i,[{key:"_init",value:function(){var t=this.$element.attr("id");this.$anchor=n('[data-toggle="'+t+'"]').length?n('[data-toggle="'+t+'"]'):n('[data-open="'+t+'"]'),this.$anchor.attr({"aria-controls":t,"data-is-focus":!1,"data-yeti-box":t,"aria-haspopup":!0,"aria-expanded":!1}),this.options.parentClass?this.$parent=this.$element.parents("."+this.options.parentClass):this.$parent=null,this.options.positionClass=this.getPositionClass(),this.counter=4,this.usedPositions=[],this.$element.attr({"aria-hidden":"true","data-yeti-box":t,"data-resize":t,"aria-labelledby":this.$anchor[0].id||Foundation.GetYoDigits(6,"dd-anchor")}),this._events()}},{key:"getPositionClass",value:function(){var t=this.$element[0].className.match(/(top|left|right|bottom)/g);t=t?t[0]:"";var e=/float-(\S+)/.exec(this.$anchor[0].className);return(e=e?e[1]:"")?e+" "+t:t}},{key:"_reposition",value:function(t){this.usedPositions.push(t||"bottom"),!t&&this.usedPositions.indexOf("top")<0?this.$element.addClass("top"):"top"===t&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(t):"left"===t&&this.usedPositions.indexOf("right")<0?this.$element.removeClass(t).addClass("right"):"right"===t&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(t).addClass("left"):!t&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.$element.addClass("left"):"top"===t&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(t).addClass("left"):("left"===t&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0||"right"===t&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom"),this.$element.removeClass(t)),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){if("false"===this.$anchor.attr("aria-expanded"))return!1;var t=this.getPositionClass(),e=Foundation.Box.GetDimensions(this.$element);if(Foundation.Box.GetDimensions(this.$anchor),"height"==("top"==("left"===t||"right"===t?"left":"top")?"height":"width")?this.options.vOffset:this.options.hOffset,e.width>=e.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.$element,this.$parent)){var n=e.windowDims.width,i=0;if(this.$parent){var r=Foundation.Box.GetDimensions(this.$parent);i=r.offset.left,r.width<n&&(n=r.width)}return this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,"center bottom",this.options.vOffset,this.options.hOffset+i,!0)).css({width:n-2*this.options.hOffset,height:"auto"}),this.classChanged=!0,!1}for(this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,t,this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.$element,this.$parent,!0)&&this.counter;)this._reposition(t),this._setPosition()}},{key:"_events",value:function(){var t=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)}),this.options.hover&&(this.$anchor.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",(function(){var e=n("body").data();void 0!==e.whatinput&&"mouse"!==e.whatinput||(clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.open(),t.$anchor.data("hover",!0)}),t.options.hoverDelay))})).on("mouseleave.zf.dropdown",(function(){clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.close(),t.$anchor.data("hover",!1)}),t.options.hoverDelay)})),this.options.hoverPane&&this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",(function(){clearTimeout(t.timeout)})).on("mouseleave.zf.dropdown",(function(){clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.close(),t.$anchor.data("hover",!1)}),t.options.hoverDelay)}))),this.$anchor.add(this.$element).on("keydown.zf.dropdown",(function(e){var i=n(this);Foundation.Keyboard.findFocusable(t.$element),Foundation.Keyboard.handleKey(e,"Dropdown",{open:function(){i.is(t.$anchor)&&(t.open(),t.$element.attr("tabindex",-1).focus(),e.preventDefault())},close:function(){t.close(),t.$anchor.focus()}})}))}},{key:"_addBodyHandler",value:function(){var t=n(document.body).not(this.$element),e=this;t.off("click.zf.dropdown").on("click.zf.dropdown",(function(n){e.$anchor.is(n.target)||e.$anchor.find(n.target).length||e.$element.find(n.target).length||(e.close(),t.off("click.zf.dropdown"))}))}},{key:"open",value:function(){if(this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id")),this.$anchor.addClass("hover").attr({"aria-expanded":!0}),this._setPosition(),this.$element.addClass("is-open").attr({"aria-hidden":!1}),this.options.autoFocus){var t=Foundation.Keyboard.findFocusable(this.$element);t.length&&t.eq(0).focus()}this.options.closeOnClick&&this._addBodyHandler(),this.options.trapFocus&&Foundation.Keyboard.trapFocus(this.$element),this.$element.trigger("show.zf.dropdown",[this.$element])}},{key:"close",value:function(){if(!this.$element.hasClass("is-open"))return!1;if(this.$element.removeClass("is-open").attr({"aria-hidden":!0}),this.$anchor.removeClass("hover").attr("aria-expanded",!1),this.classChanged){var t=this.getPositionClass();t&&this.$element.removeClass(t),this.$element.addClass(this.options.positionClass).css({height:"",width:""}),this.classChanged=!1,this.counter=4,this.usedPositions.length=0}this.$element.trigger("hide.zf.dropdown",[this.$element]),this.options.trapFocus&&Foundation.Keyboard.releaseFocus(this.$element)}},{key:"toggle",value:function(){if(this.$element.hasClass("is-open")){if(this.$anchor.data("hover"))return;this.close()}else this.open()}},{key:"destroy",value:function(){this.$element.off(".zf.trigger").hide(),this.$anchor.off(".zf.dropdown"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={parentClass:null,hoverDelay:250,hover:!1,hoverPane:!1,vOffset:1,hOffset:1,positionClass:"",trapFocus:!1,autoFocus:!1,closeOnClick:!1},Foundation.plugin(i,"Dropdown")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),Foundation.Nest.Feather(this.$element,"dropdown"),this._init(),Foundation.registerPlugin(this,"DropdownMenu"),Foundation.Keyboard.register("DropdownMenu",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}return t(i,[{key:"_init",value:function(){var t=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub"),this.$menuItems=this.$element.find('[role="menuitem"]'),this.$tabs=this.$element.children('[role="menuitem"]'),this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass),this.$element.hasClass(this.options.rightClass)||"right"===this.options.alignment||Foundation.rtl()||this.$element.parents(".top-bar-right").is("*")?(this.options.alignment="right",t.addClass("opens-left")):t.addClass("opens-right"),this.changed=!1,this._events()}},{key:"_isVertical",value:function(){return"block"===this.$tabs.css("display")}},{key:"_events",value:function(){var t=this,e="ontouchstart"in window||void 0!==window.ontouchstart,i="is-dropdown-submenu-parent";(this.options.clickOpen||e)&&this.$menuItems.on("click.zf.dropdownmenu touchstart.zf.dropdownmenu",(function(r){var o=n(r.target).parentsUntil("ul","."+i),a=o.hasClass(i),s="true"===o.attr("data-is-click"),l=o.children(".is-dropdown-submenu");if(a)if(s){if(!t.options.closeOnClick||!t.options.clickOpen&&!e||t.options.forceFollow&&e)return;r.stopImmediatePropagation(),r.preventDefault(),t._hide(o)}else r.preventDefault(),r.stopImmediatePropagation(),t._show(l),o.add(o.parentsUntil(t.$element,"."+i)).attr("data-is-click",!0)})),t.options.closeOnClickInside&&this.$menuItems.on("click.zf.dropdownmenu touchend.zf.dropdownmenu",(function(e){n(this).hasClass(i)||t._hide()})),this.options.disableHover||this.$menuItems.on("mouseenter.zf.dropdownmenu",(function(e){var r=n(this);r.hasClass(i)&&(clearTimeout(r.data("_delay")),r.data("_delay",setTimeout((function(){t._show(r.children(".is-dropdown-submenu"))}),t.options.hoverDelay)))})).on("mouseleave.zf.dropdownmenu",(function(e){var r=n(this);if(r.hasClass(i)&&t.options.autoclose){if("true"===r.attr("data-is-click")&&t.options.clickOpen)return!1;clearTimeout(r.data("_delay")),r.data("_delay",setTimeout((function(){t._hide(r)}),t.options.closingTime))}})),this.$menuItems.on("keydown.zf.dropdownmenu",(function(e){var i,r,o=n(e.target).parentsUntil("ul",'[role="menuitem"]'),a=t.$tabs.index(o)>-1,s=a?t.$tabs:o.siblings("li").add(o);s.each((function(t){if(n(this).is(o))return i=s.eq(t-1),void(r=s.eq(t+1))}));var l=function(){o.is(":last-child")||(r.children("a:first").focus(),e.preventDefault())},u=function(){i.children("a:first").focus(),e.preventDefault()},c=function(){var n=o.children("ul.is-dropdown-submenu");n.length&&(t._show(n),o.find("li > a:first").focus(),e.preventDefault())},h=function(){var n=o.parent("ul").parent("li");n.children("a:first").focus(),t._hide(n),e.preventDefault()},d={open:c,close:function(){t._hide(t.$element),t.$menuItems.find("a:first").focus(),e.preventDefault()},handled:function(){e.stopImmediatePropagation()}};a?t._isVertical()?Foundation.rtl()?n.extend(d,{down:l,up:u,next:h,previous:c}):n.extend(d,{down:l,up:u,next:c,previous:h}):Foundation.rtl()?n.extend(d,{next:u,previous:l,down:c,up:h}):n.extend(d,{next:l,previous:u,down:c,up:h}):Foundation.rtl()?n.extend(d,{next:h,previous:c,down:l,up:u}):n.extend(d,{next:c,previous:h,down:l,up:u}),Foundation.Keyboard.handleKey(e,"DropdownMenu",d)}))}},{key:"_addBodyHandler",value:function(){var t=n(document.body),e=this;t.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu").on("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu",(function(n){e.$element.find(n.target).length||(e._hide(),t.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu"))}))}},{key:"_show",value:function(t){var e=this.$tabs.index(this.$tabs.filter((function(e,i){return n(i).find(t).length>0}))),i=t.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(i,e),t.css("visibility","hidden").addClass("js-dropdown-active").parent("li.is-dropdown-submenu-parent").addClass("is-active");var r=Foundation.Box.ImNotTouchingYou(t,null,!0);if(!r){var o="left"===this.options.alignment?"-right":"-left",a=t.parent(".is-dropdown-submenu-parent");a.removeClass("opens"+o).addClass("opens-"+this.options.alignment),(r=Foundation.Box.ImNotTouchingYou(t,null,!0))||a.removeClass("opens-"+this.options.alignment).addClass("opens-inner"),this.changed=!0}t.css("visibility",""),this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdownmenu",[t])}},{key:"_hide",value:function(t,e){var n;if((n=t&&t.length?t:void 0!==e?this.$tabs.not((function(t,n){return t===e})):this.$element).hasClass("is-active")||n.find(".is-active").length>0){if(n.find("li.is-active").add(n).attr({"data-is-click":!1}).removeClass("is-active"),n.find("ul.js-dropdown-active").removeClass("js-dropdown-active"),this.changed||n.find("opens-inner").length){var i="left"===this.options.alignment?"right":"left";n.find("li.is-dropdown-submenu-parent").add(n).removeClass("opens-inner opens-"+this.options.alignment).addClass("opens-"+i),this.changed=!1}this.$element.trigger("hide.zf.dropdownmenu",[n])}}},{key:"destroy",value:function(){this.$menuItems.off(".zf.dropdownmenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner"),n(document.body).off(".zf.dropdownmenu"),Foundation.Nest.Burn(this.$element,"dropdown"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={disableHover:!1,autoclose:!0,hoverDelay:50,clickOpen:!1,closingTime:500,alignment:"left",closeOnClick:!0,closeOnClickInside:!0,verticalClass:"vertical",rightClass:"align-right",forceFollow:!0},Foundation.plugin(i,"DropdownMenu")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Equalizer")}return t(i,[{key:"_init",value:function(){var t=this.$element.attr("data-equalizer")||"",e=this.$element.find('[data-equalizer-watch="'+t+'"]');this.$watched=e.length?e:this.$element.find("[data-equalizer-watch]"),this.$element.attr("data-resize",t||Foundation.GetYoDigits(6,"eq")),this.$element.attr("data-mutate",t||Foundation.GetYoDigits(6,"eq")),this.hasNested=this.$element.find("[data-equalizer]").length>0,this.isNested=this.$element.parentsUntil(document.body,"[data-equalizer]").length>0,this.isOn=!1,this._bindHandler={onResizeMeBound:this._onResizeMe.bind(this),onPostEqualizedBound:this._onPostEqualized.bind(this)};var i,r=this.$element.find("img");this.options.equalizeOn?(i=this._checkMQ(),n(window).on("changed.zf.mediaquery",this._checkMQ.bind(this))):this._events(),(void 0!==i&&!1===i||void 0===i)&&(r.length?Foundation.onImagesLoaded(r,this._reflow.bind(this)):this._reflow())}},{key:"_pauseEvents",value:function(){this.isOn=!1,this.$element.off({".zf.equalizer":this._bindHandler.onPostEqualizedBound,"resizeme.zf.trigger":this._bindHandler.onResizeMeBound,"mutateme.zf.trigger":this._bindHandler.onResizeMeBound})}},{key:"_onResizeMe",value:function(t){this._reflow()}},{key:"_onPostEqualized",value:function(t){t.target!==this.$element[0]&&this._reflow()}},{key:"_events",value:function(){this._pauseEvents(),this.hasNested?this.$element.on("postequalized.zf.equalizer",this._bindHandler.onPostEqualizedBound):(this.$element.on("resizeme.zf.trigger",this._bindHandler.onResizeMeBound),this.$element.on("mutateme.zf.trigger",this._bindHandler.onResizeMeBound)),this.isOn=!0}},{key:"_checkMQ",value:function(){var t=!Foundation.MediaQuery.is(this.options.equalizeOn);return t?this.isOn&&(this._pauseEvents(),this.$watched.css("height","auto")):this.isOn||this._events(),t}},{key:"_killswitch",value:function(){}},{key:"_reflow",value:function(){if(!this.options.equalizeOnStack&&this._isStacked())return this.$watched.css("height","auto"),!1;this.options.equalizeByRow?this.getHeightsByRow(this.applyHeightByRow.bind(this)):this.getHeights(this.applyHeight.bind(this))}},{key:"_isStacked",value:function(){return!this.$watched[0]||!this.$watched[1]||this.$watched[0].getBoundingClientRect().top!==this.$watched[1].getBoundingClientRect().top}},{key:"getHeights",value:function(t){for(var e=[],n=0,i=this.$watched.length;n<i;n++)this.$watched[n].style.height="auto",e.push(this.$watched[n].offsetHeight);t(e)}},{key:"getHeightsByRow",value:function(t){var e=this.$watched.length?this.$watched.first().offset().top:0,i=[],r=0;i[r]=[];for(var o=0,a=this.$watched.length;o<a;o++){this.$watched[o].style.height="auto";var s=n(this.$watched[o]).offset().top;s!=e&&(i[++r]=[],e=s),i[r].push([this.$watched[o],this.$watched[o].offsetHeight])}for(var l=0,u=i.length;l<u;l++){var c=n(i[l]).map((function(){return this[1]})).get(),h=Math.max.apply(null,c);i[l].push(h)}t(i)}},{key:"applyHeight",value:function(t){var e=Math.max.apply(null,t);this.$element.trigger("preequalized.zf.equalizer"),this.$watched.css("height",e),this.$element.trigger("postequalized.zf.equalizer")}},{key:"applyHeightByRow",value:function(t){this.$element.trigger("preequalized.zf.equalizer");for(var e=0,i=t.length;e<i;e++){var r=t[e].length,o=t[e][r-1];if(r<=2)n(t[e][0][0]).css({height:"auto"});else{this.$element.trigger("preequalizedrow.zf.equalizer");for(var a=0,s=r-1;a<s;a++)n(t[e][a][0]).css({height:o});this.$element.trigger("postequalizedrow.zf.equalizer")}}this.$element.trigger("postequalized.zf.equalizer")}},{key:"destroy",value:function(){this._pauseEvents(),this.$watched.css("height","auto"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={equalizeOnStack:!1,equalizeByRow:!1,equalizeOn:""},Foundation.plugin(i,"Equalizer")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,r),this.rules=[],this.currentPath="",this._init(),this._events(),Foundation.registerPlugin(this,"Interchange")}return t(i,[{key:"_init",value:function(){this._addBreakpoints(),this._generateRules(),this._reflow()}},{key:"_events",value:function(){var t=this;n(window).on("resize.zf.interchange",Foundation.util.throttle((function(){t._reflow()}),50))}},{key:"_reflow",value:function(){var t;for(var e in this.rules)if(this.rules.hasOwnProperty(e)){var n=this.rules[e];window.matchMedia(n.query).matches&&(t=n)}t&&this.replace(t.path)}},{key:"_addBreakpoints",value:function(){for(var t in Foundation.MediaQuery.queries)if(Foundation.MediaQuery.queries.hasOwnProperty(t)){var e=Foundation.MediaQuery.queries[t];i.SPECIAL_QUERIES[e.name]=e.value}}},{key:"_generateRules",value:function(t){var e,n=[];for(var r in e=this.options.rules?this.options.rules:this.$element.data("interchange").match(/\[.*?\]/g))if(e.hasOwnProperty(r)){var o=e[r].slice(1,-1).split(", "),a=o.slice(0,-1).join(""),s=o[o.length-1];i.SPECIAL_QUERIES[s]&&(s=i.SPECIAL_QUERIES[s]),n.push({path:a,query:s})}this.rules=n}},{key:"replace",value:function(t){if(this.currentPath!==t){var e=this,i="replaced.zf.interchange";"IMG"===this.$element[0].nodeName?this.$element.attr("src",t).on("load",(function(){e.currentPath=t})).trigger(i):t.match(/\.(gif|jpg|jpeg|png|svg|tiff)([?#].*)?/i)?this.$element.css({"background-image":"url("+t+")"}).trigger(i):n.get(t,(function(r){e.$element.html(r).trigger(i),n(r).foundation(),e.currentPath=t}))}}},{key:"destroy",value:function(){}}]),i}();i.defaults={rules:null},i.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"},Foundation.plugin(i,"Interchange")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),this.calcPoints(),Foundation.registerPlugin(this,"Magellan")}return t(i,[{key:"_init",value:function(){var t=this.$element[0].id||Foundation.GetYoDigits(6,"magellan");this.$targets=n("[data-magellan-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":t,"data-scroll":t,id:t}),this.$active=n(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()}},{key:"calcPoints",value:function(){var t=this,e=document.body,i=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,i.clientHeight)),this.docHeight=Math.round(Math.max(e.scrollHeight,e.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight)),this.$targets.each((function(){var e=n(this),i=Math.round(e.offset().top-t.options.threshold);e.targetPoint=i,t.points.push(i)}))}},{key:"_events",value:function(){var t=this;n("html, body"),t.options.animationDuration,t.options.animationEasing,n(window).one("load",(function(){t.options.deepLinking&&location.hash&&t.scrollToLoc(location.hash),t.calcPoints(),t._updateActive()})),this.$element.on({"resizeme.zf.trigger":this.reflow.bind(this),"scrollme.zf.trigger":this._updateActive.bind(this)}).on("click.zf.magellan",'a[href^="#"]',(function(e){e.preventDefault();var n=this.getAttribute("href");t.scrollToLoc(n)})),n(window).on("popstate",(function(e){t.options.deepLinking&&t.scrollToLoc(window.location.hash)}))}},{key:"scrollToLoc",value:function(t){if(!n(t).length)return!1;this._inTransition=!0;var e=this,i=Math.round(n(t).offset().top-this.options.threshold/2-this.options.barOffset);n("html, body").stop(!0).animate({scrollTop:i},this.options.animationDuration,this.options.animationEasing,(function(){e._inTransition=!1,e._updateActive()}))}},{key:"reflow",value:function(){this.calcPoints(),this._updateActive()}},{key:"_updateActive",value:function(){if(!this._inTransition){var t,e=parseInt(window.pageYOffset,10);if(e+this.winHeight===this.docHeight)t=this.points.length-1;else if(e<this.points[0])t=void 0;else{var n=this.scrollPos<e,i=this,r=this.points.filter((function(t,r){return n?t-i.options.barOffset<=e:t-i.options.barOffset-i.options.threshold<=e}));t=r.length?r.length-1:0}if(this.$active.removeClass(this.options.activeClass),this.$active=this.$links.filter('[href="#'+this.$targets.eq(t).data("magellan-target")+'"]').addClass(this.options.activeClass),this.options.deepLinking){var o="";null!=t&&(o=this.$active[0].getAttribute("href")),o!==window.location.hash&&(window.history.pushState?window.history.pushState(null,null,o):window.location.hash=o)}this.scrollPos=e,this.$element.trigger("update.zf.magellan",[this.$active])}}},{key:"destroy",value:function(){if(this.$element.off(".zf.trigger .zf.magellan").find("."+this.options.activeClass).removeClass(this.options.activeClass),this.options.deepLinking){var t=this.$active[0].getAttribute("href");window.location.hash.replace(t,"")}Foundation.unregisterPlugin(this)}}]),i}();i.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"active",deepLinking:!1,barOffset:0},Foundation.plugin(i,"Magellan")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this.$lastTrigger=n(),this.$triggers=n(),this._init(),this._events(),Foundation.registerPlugin(this,"OffCanvas"),Foundation.Keyboard.register("OffCanvas",{ESCAPE:"close"})}return t(i,[{key:"_init",value:function(){var t=this.$element.attr("id");if(this.$element.attr("aria-hidden","true"),this.$element.addClass("is-transition-"+this.options.transition),this.$triggers=n(document).find('[data-open="'+t+'"], [data-close="'+t+'"], [data-toggle="'+t+'"]').attr("aria-expanded","false").attr("aria-controls",t),!0===this.options.contentOverlay){var e=document.createElement("div"),i="fixed"===n(this.$element).css("position")?"is-overlay-fixed":"is-overlay-absolute";e.setAttribute("class","js-off-canvas-overlay "+i),this.$overlay=n(e),"is-overlay-fixed"===i?n("body").append(this.$overlay):this.$element.siblings("[data-off-canvas-content]").append(this.$overlay)}this.options.isRevealed=this.options.isRevealed||new RegExp(this.options.revealClass,"g").test(this.$element[0].className),!0===this.options.isRevealed&&(this.options.revealOn=this.options.revealOn||this.$element[0].className.match(/(reveal-for-medium|reveal-for-large)/g)[0].split("-")[2],this._setMQChecker()),1==!this.options.transitionTime&&(this.options.transitionTime=1e3*parseFloat(window.getComputedStyle(n("[data-off-canvas]")[0]).transitionDuration))}},{key:"_events",value:function(){this.$element.off(".zf.trigger .zf.offcanvas").on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"keydown.zf.offcanvas":this._handleKeyboard.bind(this)}),!0===this.options.closeOnClick&&(this.options.contentOverlay?this.$overlay:n("[data-off-canvas-content]")).on({"click.zf.offcanvas":this.close.bind(this)})}},{key:"_setMQChecker",value:function(){var t=this;n(window).on("changed.zf.mediaquery",(function(){Foundation.MediaQuery.atLeast(t.options.revealOn)?t.reveal(!0):t.reveal(!1)})).one("load.zf.offcanvas",(function(){Foundation.MediaQuery.atLeast(t.options.revealOn)&&t.reveal(!0)}))}},{key:"reveal",value:function(t){var e=this.$element.find("[data-close]");t?(this.close(),this.isRevealed=!0,this.$element.attr("aria-hidden","false"),this.$element.off("open.zf.trigger toggle.zf.trigger"),e.length&&e.hide()):(this.isRevealed=!1,this.$element.attr("aria-hidden","true"),this.$element.on({"open.zf.trigger":this.open.bind(this),"toggle.zf.trigger":this.toggle.bind(this)}),e.length&&e.show())}},{key:"_stopScrolling",value:function(t){return!1}},{key:"open",value:function(t,e){if(!this.$element.hasClass("is-open")&&!this.isRevealed){var i=this;e&&(this.$lastTrigger=e),"top"===this.options.forceTo?window.scrollTo(0,0):"bottom"===this.options.forceTo&&window.scrollTo(0,document.body.scrollHeight),i.$element.addClass("is-open"),this.$triggers.attr("aria-expanded","true"),this.$element.attr("aria-hidden","false").trigger("opened.zf.offcanvas"),!1===this.options.contentScroll&&n("body").addClass("is-off-canvas-open").on("touchmove",this._stopScrolling),!0===this.options.contentOverlay&&this.$overlay.addClass("is-visible"),!0===this.options.closeOnClick&&!0===this.options.contentOverlay&&this.$overlay.addClass("is-closable"),!0===this.options.autoFocus&&this.$element.one(Foundation.transitionend(this.$element),(function(){i.$element.find("a, button").eq(0).focus()})),!0===this.options.trapFocus&&(this.$element.siblings("[data-off-canvas-content]").attr("tabindex","-1"),Foundation.Keyboard.trapFocus(this.$element))}}},{key:"close",value:function(t){this.$element.hasClass("is-open")&&!this.isRevealed&&(this.$element.removeClass("is-open"),this.$element.attr("aria-hidden","true").trigger("closed.zf.offcanvas"),!1===this.options.contentScroll&&n("body").removeClass("is-off-canvas-open").off("touchmove",this._stopScrolling),!0===this.options.contentOverlay&&this.$overlay.removeClass("is-visible"),!0===this.options.closeOnClick&&!0===this.options.contentOverlay&&this.$overlay.removeClass("is-closable"),this.$triggers.attr("aria-expanded","false"),!0===this.options.trapFocus&&(this.$element.siblings("[data-off-canvas-content]").removeAttr("tabindex"),Foundation.Keyboard.releaseFocus(this.$element)))}},{key:"toggle",value:function(t,e){this.$element.hasClass("is-open")?this.close(t,e):this.open(t,e)}},{key:"_handleKeyboard",value:function(t){var e=this;Foundation.Keyboard.handleKey(t,"OffCanvas",{close:function(){return e.close(),e.$lastTrigger.focus(),!0},handled:function(){t.stopPropagation(),t.preventDefault()}})}},{key:"destroy",value:function(){this.close(),this.$element.off(".zf.trigger .zf.offcanvas"),this.$overlay.off(".zf.offcanvas"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={closeOnClick:!0,contentOverlay:!0,contentScroll:!0,transitionTime:0,transition:"push",forceTo:null,isRevealed:!1,revealOn:null,autoFocus:!0,revealClass:"reveal-for-",trapFocus:!1},Foundation.plugin(i,"OffCanvas")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Orbit"),Foundation.Keyboard.register("Orbit",{ltr:{ARROW_RIGHT:"next",ARROW_LEFT:"previous"},rtl:{ARROW_LEFT:"next",ARROW_RIGHT:"previous"}})}return t(i,[{key:"_init",value:function(){this._reset(),this.$wrapper=this.$element.find("."+this.options.containerClass),this.$slides=this.$element.find("."+this.options.slideClass);var t=this.$element.find("img"),e=this.$slides.filter(".is-active"),n=this.$element[0].id||Foundation.GetYoDigits(6,"orbit");this.$element.attr({"data-resize":n,id:n}),e.length||this.$slides.eq(0).addClass("is-active"),this.options.useMUI||this.$slides.addClass("no-motionui"),t.length?Foundation.onImagesLoaded(t,this._prepareForOrbit.bind(this)):this._prepareForOrbit(),this.options.bullets&&this._loadBullets(),this._events(),this.options.autoPlay&&this.$slides.length>1&&this.geoSync(),this.options.accessible&&this.$wrapper.attr("tabindex",0)}},{key:"_loadBullets",value:function(){this.$bullets=this.$element.find("."+this.options.boxOfBullets).find("button")}},{key:"geoSync",value:function(){var t=this;this.timer=new Foundation.Timer(this.$element,{duration:this.options.timerDelay,infinite:!1},(function(){t.changeSlide(!0)})),this.timer.start()}},{key:"_prepareForOrbit",value:function(){this._setWrapperHeight()}},{key:"_setWrapperHeight",value:function(t){var e,i=0,r=0,o=this;this.$slides.each((function(){e=this.getBoundingClientRect().height,n(this).attr("data-slide",r),o.$slides.filter(".is-active")[0]!==o.$slides.eq(r)[0]&&n(this).css({position:"relative",display:"none"}),i=e>i?e:i,r++})),r===this.$slides.length&&(this.$wrapper.css({height:i}),t&&t(i))}},{key:"_setSlideHeight",value:function(t){this.$slides.each((function(){n(this).css("max-height",t)}))}},{key:"_events",value:function(){var t=this;this.$element.off(".resizeme.zf.trigger").on({"resizeme.zf.trigger":this._prepareForOrbit.bind(this)}),this.$slides.length>1&&(this.options.swipe&&this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",(function(e){e.preventDefault(),t.changeSlide(!0)})).on("swiperight.zf.orbit",(function(e){e.preventDefault(),t.changeSlide(!1)})),this.options.autoPlay&&(this.$slides.on("click.zf.orbit",(function(){t.$element.data("clickedOn",!t.$element.data("clickedOn")),t.timer[t.$element.data("clickedOn")?"pause":"start"]()})),this.options.pauseOnHover&&this.$element.on("mouseenter.zf.orbit",(function(){t.timer.pause()})).on("mouseleave.zf.orbit",(function(){t.$element.data("clickedOn")||t.timer.start()}))),this.options.navButtons&&this.$element.find("."+this.options.nextClass+", ."+this.options.prevClass).attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",(function(e){e.preventDefault(),t.changeSlide(n(this).hasClass(t.options.nextClass))})),this.options.bullets&&this.$bullets.on("click.zf.orbit touchend.zf.orbit",(function(){if(/is-active/g.test(this.className))return!1;var e=n(this).data("slide"),i=e>t.$slides.filter(".is-active").data("slide"),r=t.$slides.eq(e);t.changeSlide(i,r,e)})),this.options.accessible&&this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",(function(e){Foundation.Keyboard.handleKey(e,"Orbit",{next:function(){t.changeSlide(!0)},previous:function(){t.changeSlide(!1)},handled:function(){n(e.target).is(t.$bullets)&&t.$bullets.filter(".is-active").focus()}})})))}},{key:"_reset",value:function(){void 0!==this.$slides&&this.$slides.length>1&&(this.$element.off(".zf.orbit").find("*").off(".zf.orbit"),this.options.autoPlay&&this.timer.restart(),this.$slides.each((function(t){n(t).removeClass("is-active is-active is-in").removeAttr("aria-live").hide()})),this.$slides.first().addClass("is-active").show(),this.$element.trigger("slidechange.zf.orbit",[this.$slides.first()]),this.options.bullets&&this._updateBullets(0))}},{key:"changeSlide",value:function(t,e,n){if(this.$slides){var i=this.$slides.filter(".is-active").eq(0);if(/mui/g.test(i[0].className))return!1;var r,o=this.$slides.first(),a=this.$slides.last(),s=t?"Right":"Left",l=t?"Left":"Right",u=this;(r=e||(t?this.options.infiniteWrap?i.next("."+this.options.slideClass).length?i.next("."+this.options.slideClass):o:i.next("."+this.options.slideClass):this.options.infiniteWrap?i.prev("."+this.options.slideClass).length?i.prev("."+this.options.slideClass):a:i.prev("."+this.options.slideClass))).length&&(this.$element.trigger("beforeslidechange.zf.orbit",[i,r]),this.options.bullets&&(n=n||this.$slides.index(r),this._updateBullets(n)),this.options.useMUI&&!this.$element.is(":hidden")?(Foundation.Motion.animateIn(r.addClass("is-active").css({position:"absolute",top:0}),this.options["animInFrom"+s],(function(){r.css({position:"relative",display:"block"}).attr("aria-live","polite")})),Foundation.Motion.animateOut(i.removeClass("is-active"),this.options["animOutTo"+l],(function(){i.removeAttr("aria-live"),u.options.autoPlay&&!u.timer.isPaused&&u.timer.restart()}))):(i.removeClass("is-active is-in").removeAttr("aria-live").hide(),r.addClass("is-active is-in").attr("aria-live","polite").show(),this.options.autoPlay&&!this.timer.isPaused&&this.timer.restart()),this.$element.trigger("slidechange.zf.orbit",[r]))}}},{key:"_updateBullets",value:function(t){var e=this.$element.find("."+this.options.boxOfBullets).find(".is-active").removeClass("is-active").blur().find("span:last").detach();this.$bullets.eq(t).addClass("is-active").append(e)}},{key:"destroy",value:function(){this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide(),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={bullets:!0,navButtons:!0,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:!0,timerDelay:5e3,infiniteWrap:!0,swipe:!0,pauseOnHover:!0,accessible:!0,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:!0},Foundation.plugin(i,"Orbit")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=n(t),this.rules=this.$element.data("responsive-menu"),this.currentMq=null,this.currentPlugin=null,this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveMenu")}return t(i,[{key:"_init",value:function(){if("string"==typeof this.rules){for(var t={},e=this.rules.split(" "),i=0;i<e.length;i++){var o=e[i].split("-"),a=o.length>1?o[0]:"small",s=o.length>1?o[1]:o[0];null!==r[s]&&(t[a]=r[s])}this.rules=t}n.isEmptyObject(this.rules)||this._checkMediaQueries(),this.$element.attr("data-mutate",this.$element.attr("data-mutate")||Foundation.GetYoDigits(6,"responsive-menu"))}},{key:"_events",value:function(){var t=this;n(window).on("changed.zf.mediaquery",(function(){t._checkMediaQueries()}))}},{key:"_checkMediaQueries",value:function(){var t,e=this;n.each(this.rules,(function(e){Foundation.MediaQuery.atLeast(e)&&(t=e)})),t&&(this.currentPlugin instanceof this.rules[t].plugin||(n.each(r,(function(t,n){e.$element.removeClass(n.cssClass)})),this.$element.addClass(this.rules[t].cssClass),this.currentPlugin&&this.currentPlugin.destroy(),this.currentPlugin=new this.rules[t].plugin(this.$element,{})))}},{key:"destroy",value:function(){this.currentPlugin.destroy(),n(window).off(".zf.ResponsiveMenu"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={};var r={dropdown:{cssClass:"dropdown",plugin:Foundation._plugins["dropdown-menu"]||null},drilldown:{cssClass:"drilldown",plugin:Foundation._plugins.drilldown||null},accordion:{cssClass:"accordion-menu",plugin:Foundation._plugins["accordion-menu"]||null}};Foundation.plugin(i,"ResponsiveMenu")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=n(t),this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveToggle")}return t(i,[{key:"_init",value:function(){var t=this.$element.data("responsive-toggle");if(t||console.error("Your tab bar needs an ID of a Menu as the value of data-tab-bar."),this.$targetMenu=n("#"+t),this.$toggler=this.$element.find("[data-toggle]"),this.options=n.extend({},this.options,this.$targetMenu.data()),this.options.animate){var e=this.options.animate.split(" ");this.animationIn=e[0],this.animationOut=e[1]||null}this._update()}},{key:"_events",value:function(){this._updateMqHandler=this._update.bind(this),n(window).on("changed.zf.mediaquery",this._updateMqHandler),this.$toggler.on("click.zf.responsiveToggle",this.toggleMenu.bind(this))}},{key:"_update",value:function(){Foundation.MediaQuery.atLeast(this.options.hideFor)?(this.$element.hide(),this.$targetMenu.show()):(this.$element.show(),this.$targetMenu.hide())}},{key:"toggleMenu",value:function(){var t=this;Foundation.MediaQuery.atLeast(this.options.hideFor)||(this.options.animate?this.$targetMenu.is(":hidden")?Foundation.Motion.animateIn(this.$targetMenu,this.animationIn,(function(){t.$element.trigger("toggled.zf.responsiveToggle"),t.$targetMenu.find("[data-mutate]").triggerHandler("mutateme.zf.trigger")})):Foundation.Motion.animateOut(this.$targetMenu,this.animationOut,(function(){t.$element.trigger("toggled.zf.responsiveToggle")})):(this.$targetMenu.toggle(0),this.$targetMenu.find("[data-mutate]").trigger("mutateme.zf.trigger"),this.$element.trigger("toggled.zf.responsiveToggle")))}},{key:"destroy",value:function(){this.$element.off(".zf.responsiveToggle"),this.$toggler.off(".zf.responsiveToggle"),n(window).off("changed.zf.mediaquery",this._updateMqHandler),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={hideFor:"medium",animate:!1},Foundation.plugin(i,"ResponsiveToggle")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Reveal"),Foundation.Keyboard.register("Reveal",{ENTER:"open",SPACE:"open",ESCAPE:"close"})}return t(i,[{key:"_init",value:function(){this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:Foundation.MediaQuery.current},this.isMobile=/iP(ad|hone|od).*OS/.test(window.navigator.userAgent)||/Android/.test(window.navigator.userAgent),this.$anchor=n('[data-open="'+this.id+'"]').length?n('[data-open="'+this.id+'"]'):n('[data-toggle="'+this.id+'"]'),this.$anchor.attr({"aria-controls":this.id,"aria-haspopup":!0,tabindex:0}),(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo(n(this.options.appendTo)),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash==="#"+this.id&&n(window).one("load.zf.reveal",this.open.bind(this))}},{key:"_makeOverlay",value:function(){return n("<div></div>").addClass("reveal-overlay").appendTo(this.options.appendTo)}},{key:"_updatePosition",value:function(){var t,e,i=this.$element.outerWidth(),r=n(window).width(),o=this.$element.outerHeight(),a=n(window).height();t="auto"===this.options.hOffset?parseInt((r-i)/2,10):parseInt(this.options.hOffset,10),e="auto"===this.options.vOffset?o>a?parseInt(Math.min(100,a/10),10):parseInt((a-o)/4,10):parseInt(this.options.vOffset,10),this.$element.css({top:e+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:t+"px"}),this.$element.css({margin:"0px"}))}},{key:"_events",value:function(){var t=this,e=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":function(i,r){if(i.target===e.$element[0]||n(i.target).parents("[data-closable]")[0]===r)return t.close.apply(t)},"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){e._updatePosition()}}),this.$anchor.length&&this.$anchor.on("keydown.zf.reveal",(function(t){13!==t.which&&32!==t.which||(t.stopPropagation(),t.preventDefault(),e.open())})),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.reveal",(function(t){t.target!==e.$element[0]&&!n.contains(e.$element[0],t.target)&&n.contains(document,t.target)&&e.close()})),this.options.deepLink&&n(window).on("popstate.zf.reveal:"+this.id,this._handleState.bind(this))}},{key:"_handleState",value:function(t){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}},{key:"open",value:function(){var t=this;if(this.options.deepLink){var e="#"+this.id;window.history.pushState?window.history.pushState(null,null,e):window.location.hash=e}this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&(this.$overlay.css({visibility:""}).hide(),this.$element.hasClass("fast")?this.$overlay.addClass("fast"):this.$element.hasClass("slow")&&this.$overlay.addClass("slow")),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id);var i=this;function r(){i.isMobile?(i.originalScrollPos||(i.originalScrollPos=window.pageYOffset),n("html, body").addClass("is-reveal-open")):n("body").addClass("is-reveal-open")}this.options.animationIn?(t.options.overlay&&Foundation.Motion.animateIn(t.$overlay,"fade-in"),Foundation.Motion.animateIn(t.$element,t.options.animationIn,(function(){t.$element&&(t.focusableElements=Foundation.Keyboard.findFocusable(t.$element),i.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),r(),Foundation.Keyboard.trapFocus(i.$element))}))):(this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay)),this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),Foundation.Keyboard.trapFocus(this.$element),this.$element.trigger("open.zf.reveal"),r(),setTimeout((function(){t._extraHandlers()}),0)}},{key:"_extraHandlers",value:function(){var t=this;this.$element&&(this.focusableElements=Foundation.Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||n("body").on("click.zf.reveal",(function(e){e.target!==t.$element[0]&&!n.contains(t.$element[0],e.target)&&n.contains(document,e.target)&&t.close()})),this.options.closeOnEsc&&n(window).on("keydown.zf.reveal",(function(e){Foundation.Keyboard.handleKey(e,"Reveal",{close:function(){t.options.closeOnEsc&&(t.close(),t.$anchor.focus())}})})),this.$element.on("keydown.zf.reveal",(function(e){var i=n(this);Foundation.Keyboard.handleKey(e,"Reveal",{open:function(){t.$element.find(":focus").is(t.$element.find("[data-close]"))?setTimeout((function(){t.$anchor.focus()}),1):i.is(t.focusableElements)&&t.open()},close:function(){t.options.closeOnEsc&&(t.close(),t.$anchor.focus())},handled:function(t){t&&e.preventDefault()}})})))}},{key:"close",value:function(){if(!this.isActive||!this.$element.is(":visible"))return!1;var t=this;function e(){t.isMobile?(n("html, body").removeClass("is-reveal-open"),t.originalScrollPos&&(n("body").scrollTop(t.originalScrollPos),t.originalScrollPos=null)):n("body").removeClass("is-reveal-open"),Foundation.Keyboard.releaseFocus(t.$element),t.$element.attr("aria-hidden",!0),t.$element.trigger("closed.zf.reveal")}this.options.animationOut?(this.options.overlay?Foundation.Motion.animateOut(this.$overlay,"fade-out",e):e(),Foundation.Motion.animateOut(this.$element,this.options.animationOut)):(this.options.overlay?this.$overlay.hide(0,e):e(),this.$element.hide(this.options.hideDelay)),this.options.closeOnEsc&&n(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&n("body").off("click.zf.reveal"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,t.options.deepLink&&(window.history.replaceState?window.history.replaceState("",document.title,window.location.href.replace("#"+this.id,"")):window.location.hash="")}},{key:"toggle",value:function(){this.isActive?this.close():this.open()}},{key:"destroy",value:function(){this.options.overlay&&(this.$element.appendTo(n(this.options.appendTo)),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),n(window).off(".zf.reveal:"+this.id),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,btmOffsetPct:10,overlay:!0,resetOnClose:!1,deepLink:!1,appendTo:"body"},Foundation.plugin(i,"Reveal")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Slider"),Foundation.Keyboard.register("Slider",{ltr:{ARROW_RIGHT:"increase",ARROW_UP:"increase",ARROW_DOWN:"decrease",ARROW_LEFT:"decrease",SHIFT_ARROW_RIGHT:"increase_fast",SHIFT_ARROW_UP:"increase_fast",SHIFT_ARROW_DOWN:"decrease_fast",SHIFT_ARROW_LEFT:"decrease_fast"},rtl:{ARROW_LEFT:"increase",ARROW_RIGHT:"decrease",SHIFT_ARROW_LEFT:"increase_fast",SHIFT_ARROW_RIGHT:"decrease_fast"}})}return t(i,[{key:"_init",value:function(){this.inputs=this.$element.find("input"),this.handles=this.$element.find("[data-slider-handle]"),this.$handle=this.handles.eq(0),this.$input=this.inputs.length?this.inputs.eq(0):n("#"+this.$handle.attr("aria-controls")),this.$fill=this.$element.find("[data-slider-fill]").css(this.options.vertical?"height":"width",0),(this.options.disabled||this.$element.hasClass(this.options.disabledClass))&&(this.options.disabled=!0,this.$element.addClass(this.options.disabledClass)),this.inputs.length||(this.inputs=n().add(this.$input),this.options.binding=!0),this._setInitAttr(0),this.handles[1]&&(this.options.doubleSided=!0,this.$handle2=this.handles.eq(1),this.$input2=this.inputs.length>1?this.inputs.eq(1):n("#"+this.$handle2.attr("aria-controls")),this.inputs[1]||(this.inputs=this.inputs.add(this.$input2)),this._setInitAttr(1)),this.setHandles(),this._events()}},{key:"setHandles",value:function(){var t=this;this.handles[1]?this._setHandlePos(this.$handle,this.inputs.eq(0).val(),!0,(function(){t._setHandlePos(t.$handle2,t.inputs.eq(1).val(),!0)})):this._setHandlePos(this.$handle,this.inputs.eq(0).val(),!0)}},{key:"_reflow",value:function(){this.setHandles()}},{key:"_pctOfBar",value:function(t){var e=r(t-this.options.start,this.options.end-this.options.start);switch(this.options.positionValueFunction){case"pow":e=this._logTransform(e);break;case"log":e=this._powTransform(e)}return e.toFixed(2)}},{key:"_value",value:function(t){switch(this.options.positionValueFunction){case"pow":t=this._powTransform(t);break;case"log":t=this._logTransform(t)}return(this.options.end-this.options.start)*t+this.options.start}},{key:"_logTransform",value:function(t){return function(t,e){return Math.log(e)/Math.log(t)}(this.options.nonLinearBase,t*(this.options.nonLinearBase-1)+1)}},{key:"_powTransform",value:function(t){return(Math.pow(this.options.nonLinearBase,t)-1)/(this.options.nonLinearBase-1)}},{key:"_setHandlePos",value:function(t,e,n,i){if(!this.$element.hasClass(this.options.disabledClass)){(e=parseFloat(e))<this.options.start?e=this.options.start:e>this.options.end&&(e=this.options.end);var o=this.options.doubleSided;if(o)if(0===this.handles.index(t)){var a=parseFloat(this.$handle2.attr("aria-valuenow"));e=e>=a?a-this.options.step:e}else{var s=parseFloat(this.$handle.attr("aria-valuenow"));e=e<=s?s+this.options.step:e}this.options.vertical&&!n&&(e=this.options.end-e);var l=this,u=this.options.vertical,c=u?"height":"width",h=u?"top":"left",d=t[0].getBoundingClientRect()[c],f=this.$element[0].getBoundingClientRect()[c],p=this._pctOfBar(e),m=(100*r((f-d)*p,f)).toFixed(this.options.decimal);e=parseFloat(e.toFixed(this.options.decimal));var _={};if(this._setValues(t,e),o){var g,y=0===this.handles.index(t),v=~~(100*r(d,f));if(y)_[h]=m+"%",g=parseFloat(this.$handle2[0].style[h])-m+v,i&&"function"==typeof i&&i();else{var x=parseFloat(this.$handle[0].style[h]);g=m-(isNaN(x)?(this.options.initialStart-this.options.start)/((this.options.end-this.options.start)/100):x)+v}_["min-"+c]=g+"%"}this.$element.one("finished.zf.animate",(function(){l.$element.trigger("moved.zf.slider",[t])}));var b=this.$element.data("dragging")?1e3/60:this.options.moveTime;Foundation.Move(b,t,(function(){isNaN(m)?t.css(h,100*p+"%"):t.css(h,m+"%"),l.options.doubleSided?l.$fill.css(_):l.$fill.css(c,100*p+"%")})),clearTimeout(l.timeout),l.timeout=setTimeout((function(){l.$element.trigger("changed.zf.slider",[t])}),l.options.changedDelay)}}},{key:"_setInitAttr",value:function(t){var e=0===t?this.options.initialStart:this.options.initialEnd,n=this.inputs.eq(t).attr("id")||Foundation.GetYoDigits(6,"slider");this.inputs.eq(t).attr({id:n,max:this.options.end,min:this.options.start,step:this.options.step}),this.inputs.eq(t).val(e),this.handles.eq(t).attr({role:"slider","aria-controls":n,"aria-valuemax":this.options.end,"aria-valuemin":this.options.start,"aria-valuenow":e,"aria-orientation":this.options.vertical?"vertical":"horizontal",tabindex:0})}},{key:"_setValues",value:function(t,e){var n=this.options.doubleSided?this.handles.index(t):0;this.inputs.eq(n).val(e),t.attr("aria-valuenow",e)}},{key:"_handleEvent",value:function(t,e,i){var a,s;if(i)a=this._adjustValue(null,i),s=!0;else{t.preventDefault();var l=this.options.vertical,u=l?"height":"width",c=l?"top":"left",h=l?t.pageY:t.pageX,d=(this.$handle[0].getBoundingClientRect()[u],this.$element[0].getBoundingClientRect()[u]),f=l?n(window).scrollTop():n(window).scrollLeft(),p=this.$element.offset()[c];t.clientY===t.pageY&&(h+=f);var m,_=h-p,g=r(m=_<0?0:_>d?d:_,d);a=this._value(g),Foundation.rtl()&&!this.options.vertical&&(a=this.options.end-a),a=this._adjustValue(null,a),s=!1,e||(e=o(this.$handle,c,m,u)<=o(this.$handle2,c,m,u)?this.$handle:this.$handle2)}this._setHandlePos(e,a,s)}},{key:"_adjustValue",value:function(t,e){var n,i,r,o=this.options.step,a=parseFloat(o/2);return 0==(i=(n=t?parseFloat(t.attr("aria-valuenow")):e)%o)?n:n=n>=(r=n-i)+a?r+o:r}},{key:"_events",value:function(){this._eventsForHandle(this.$handle),this.handles[1]&&this._eventsForHandle(this.$handle2)}},{key:"_eventsForHandle",value:function(t){var e,i=this;if(this.inputs.off("change.zf.slider").on("change.zf.slider",(function(t){var e=i.inputs.index(n(this));i._handleEvent(t,i.handles.eq(e),n(this).val())})),this.options.clickSelect&&this.$element.off("click.zf.slider").on("click.zf.slider",(function(t){if(i.$element.data("dragging"))return!1;n(t.target).is("[data-slider-handle]")||(i.options.doubleSided?i._handleEvent(t):i._handleEvent(t,i.$handle))})),this.options.draggable){this.handles.addTouch();var r=n("body");t.off("mousedown.zf.slider").on("mousedown.zf.slider",(function(o){t.addClass("is-dragging"),i.$fill.addClass("is-dragging"),i.$element.data("dragging",!0),e=n(o.currentTarget),r.on("mousemove.zf.slider",(function(t){t.preventDefault(),i._handleEvent(t,e)})).on("mouseup.zf.slider",(function(n){i._handleEvent(n,e),t.removeClass("is-dragging"),i.$fill.removeClass("is-dragging"),i.$element.data("dragging",!1),r.off("mousemove.zf.slider mouseup.zf.slider")}))})).on("selectstart.zf.slider touchmove.zf.slider",(function(t){t.preventDefault()}))}t.off("keydown.zf.slider").on("keydown.zf.slider",(function(t){var e,r=n(this),o=i.options.doubleSided?i.handles.index(r):0,a=parseFloat(i.inputs.eq(o).val());Foundation.Keyboard.handleKey(t,"Slider",{decrease:function(){e=a-i.options.step},increase:function(){e=a+i.options.step},decrease_fast:function(){e=a-10*i.options.step},increase_fast:function(){e=a+10*i.options.step},handled:function(){t.preventDefault(),i._setHandlePos(r,e,!0)}})}))}},{key:"destroy",value:function(){this.handles.off(".zf.slider"),this.inputs.off(".zf.slider"),this.$element.off(".zf.slider"),clearTimeout(this.timeout),Foundation.unregisterPlugin(this)}}]),i}();function r(t,e){return t/e}function o(t,e,n,i){return Math.abs(t.position()[e]+t[i]()/2-n)}i.defaults={start:0,end:100,step:1,initialStart:0,initialEnd:100,binding:!1,clickSelect:!0,vertical:!1,draggable:!0,disabled:!1,doubleSided:!1,decimal:2,moveTime:200,disabledClass:"disabled",invertVertical:!1,changedDelay:500,nonLinearBase:5,positionValueFunction:"linear"},Foundation.plugin(i,"Slider")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Sticky")}return t(i,[{key:"_init",value:function(){var t=this.$element.parent("[data-sticky-container]"),e=this.$element[0].id||Foundation.GetYoDigits(6,"sticky"),i=this;t.length||(this.wasWrapped=!0),this.$container=t.length?t:n(this.options.container).wrapInner(this.$element),this.$container.addClass(this.options.containerClass),this.$element.addClass(this.options.stickyClass).attr({"data-resize":e}),this.scrollCount=this.options.checkEvery,this.isStuck=!1,n(window).one("load.zf.sticky",(function(){i.containerHeight="none"==i.$element.css("display")?0:i.$element[0].getBoundingClientRect().height,i.$container.css("height",i.containerHeight),i.elemHeight=i.containerHeight,""!==i.options.anchor?i.$anchor=n("#"+i.options.anchor):i._parsePoints(),i._setSizes((function(){var t=window.pageYOffset;i._calc(!1,t),i.isStuck||i._removeSticky(!(t>=i.topPoint))})),i._events(e.split("-").reverse().join("-"))}))}},{key:"_parsePoints",value:function(){for(var t=[""==this.options.topAnchor?1:this.options.topAnchor,""==this.options.btmAnchor?document.documentElement.scrollHeight:this.options.btmAnchor],e={},i=0,r=t.length;i<r&&t[i];i++){var o;if("number"==typeof t[i])o=t[i];else{var a=t[i].split(":"),s=n("#"+a[0]);o=s.offset().top,a[1]&&"bottom"===a[1].toLowerCase()&&(o+=s[0].getBoundingClientRect().height)}e[i]=o}this.points=e}},{key:"_events",value:function(t){var e=this,i=this.scrollListener="scroll.zf."+t;this.isOn||(this.canStick&&(this.isOn=!0,n(window).off(i).on(i,(function(t){0===e.scrollCount?(e.scrollCount=e.options.checkEvery,e._setSizes((function(){e._calc(!1,window.pageYOffset)}))):(e.scrollCount--,e._calc(!1,window.pageYOffset))}))),this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",(function(n,r){e._setSizes((function(){e._calc(!1),e.canStick?e.isOn||e._events(t):e.isOn&&e._pauseListeners(i)}))})))}},{key:"_pauseListeners",value:function(t){this.isOn=!1,n(window).off(t),this.$element.trigger("pause.zf.sticky")}},{key:"_calc",value:function(t,e){if(t&&this._setSizes(),!this.canStick)return this.isStuck&&this._removeSticky(!0),!1;e||(e=window.pageYOffset),e>=this.topPoint?e<=this.bottomPoint?this.isStuck||this._setSticky():this.isStuck&&this._removeSticky(!1):this.isStuck&&this._removeSticky(!0)}},{key:"_setSticky",value:function(){var t=this,e=this.options.stickTo,n="top"===e?"marginTop":"marginBottom",i="top"===e?"bottom":"top",r={};r[n]=this.options[n]+"em",r[e]=0,r[i]="auto",this.isStuck=!0,this.$element.removeClass("is-anchored is-at-"+i).addClass("is-stuck is-at-"+e).css(r).trigger("sticky.zf.stuckto:"+e),this.$element.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",(function(){t._setSizes()}))}},{key:"_removeSticky",value:function(t){var e=this.options.stickTo,n="top"===e,i={},r=(this.points?this.points[1]-this.points[0]:this.anchorHeight)-this.elemHeight,o=t?"top":"bottom";i[n?"marginTop":"marginBottom"]=0,i.bottom="auto",i.top=t?0:r,this.isStuck=!1,this.$element.removeClass("is-stuck is-at-"+e).addClass("is-anchored is-at-"+o).css(i).trigger("sticky.zf.unstuckfrom:"+o)}},{key:"_setSizes",value:function(t){this.canStick=Foundation.MediaQuery.is(this.options.stickyOn),this.canStick||t&&"function"==typeof t&&t();var e=this.$container[0].getBoundingClientRect().width,n=window.getComputedStyle(this.$container[0]),i=parseInt(n["padding-left"],10),r=parseInt(n["padding-right"],10);this.$anchor&&this.$anchor.length?this.anchorHeight=this.$anchor[0].getBoundingClientRect().height:this._parsePoints(),this.$element.css({"max-width":e-i-r+"px"});var o=this.$element[0].getBoundingClientRect().height||this.containerHeight;if("none"==this.$element.css("display")&&(o=0),this.containerHeight=o,this.$container.css({height:o}),this.elemHeight=o,!this.isStuck&&this.$element.hasClass("is-at-bottom")){var a=(this.points?this.points[1]-this.$container.offset().top:this.anchorHeight)-this.elemHeight;this.$element.css("top",a)}this._setBreakPoints(o,(function(){t&&"function"==typeof t&&t()}))}},{key:"_setBreakPoints",value:function(t,e){if(!this.canStick){if(!e||"function"!=typeof e)return!1;e()}var n=r(this.options.marginTop),i=r(this.options.marginBottom),o=this.points?this.points[0]:this.$anchor.offset().top,a=this.points?this.points[1]:o+this.anchorHeight,s=window.innerHeight;"top"===this.options.stickTo?(o-=n,a-=t+n):"bottom"===this.options.stickTo&&(o-=s-(t+i),a-=s-i),this.topPoint=o,this.bottomPoint=a,e&&"function"==typeof e&&e()}},{key:"destroy",value:function(){this._removeSticky(!0),this.$element.removeClass(this.options.stickyClass+" is-anchored is-at-top").css({height:"",top:"",bottom:"","max-width":""}).off("resizeme.zf.trigger"),this.$anchor&&this.$anchor.length&&this.$anchor.off("change.zf.sticky"),n(window).off(this.scrollListener),this.wasWrapped?this.$element.unwrap():this.$container.removeClass(this.options.containerClass).css({height:""}),Foundation.unregisterPlugin(this)}}]),i}();function r(t){return parseInt(window.getComputedStyle(document.body,null).fontSize,10)*t}i.defaults={container:"<div data-sticky-container></div>",stickTo:"top",anchor:"",topAnchor:"",btmAnchor:"",marginTop:1,marginBottom:1,stickyOn:"medium",stickyClass:"sticky",containerClass:"sticky-container",checkEvery:-1},Foundation.plugin(i,"Sticky")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this._init(),Foundation.registerPlugin(this,"Tabs"),Foundation.Keyboard.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}return t(i,[{key:"_init",value:function(){var t=this;if(this.$element.attr({role:"tablist"}),this.$tabTitles=this.$element.find("."+this.options.linkClass),this.$tabContent=n('[data-tabs-content="'+this.$element[0].id+'"]'),this.$tabTitles.each((function(){var e=n(this),i=e.find("a"),r=e.hasClass(""+t.options.linkActiveClass),o=i[0].hash.slice(1),a=i[0].id?i[0].id:o+"-label",s=n("#"+o);if(e.attr({role:"presentation"}),i.attr({role:"tab","aria-controls":o,"aria-selected":r,id:a}),s.attr({role:"tabpanel","aria-hidden":!r,"aria-labelledby":a}),r&&t.options.autoFocus&&n(window).load((function(){n("html, body").animate({scrollTop:e.offset().top},t.options.deepLinkSmudgeDelay,(function(){i.focus()}))})),t.options.deepLink){var l=window.location.hash;l.length&&(i=e.find('[href="'+l+'"]')).length&&(t.selectTab(n(l)),t.options.deepLinkSmudge&&n(window).load((function(){var i=e.offset();n("html, body").animate({scrollTop:i.top},t.options.deepLinkSmudgeDelay)})),e.trigger("deeplink.zf.tabs",[i,n(l)]))}})),this.options.matchHeight){var e=this.$tabContent.find("img");e.length?Foundation.onImagesLoaded(e,this._setHeight.bind(this)):this._setHeight()}this._events()}},{key:"_events",value:function(){this._addKeyHandler(),this._addClickHandler(),this._setHeightMqHandler=null,this.options.matchHeight&&(this._setHeightMqHandler=this._setHeight.bind(this),n(window).on("changed.zf.mediaquery",this._setHeightMqHandler))}},{key:"_addClickHandler",value:function(){var t=this;this.$element.off("click.zf.tabs").on("click.zf.tabs","."+this.options.linkClass,(function(e){e.preventDefault(),e.stopPropagation(),t._handleTabChange(n(this))}))}},{key:"_addKeyHandler",value:function(){var t=this;this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",(function(e){if(9!==e.which){var i,r,o=n(this),a=o.parent("ul").children("li");a.each((function(e){n(this).is(o)&&(t.options.wrapOnKeys?(i=0===e?a.last():a.eq(e-1),r=e===a.length-1?a.first():a.eq(e+1)):(i=a.eq(Math.max(0,e-1)),r=a.eq(Math.min(e+1,a.length-1))))})),Foundation.Keyboard.handleKey(e,"Tabs",{open:function(){o.find('[role="tab"]').focus(),t._handleTabChange(o)},previous:function(){i.find('[role="tab"]').focus(),t._handleTabChange(i)},next:function(){r.find('[role="tab"]').focus(),t._handleTabChange(r)},handled:function(){e.stopPropagation(),e.preventDefault()}})}}))}},{key:"_handleTabChange",value:function(t){if(t.hasClass(""+this.options.linkActiveClass))this.options.activeCollapse&&(this._collapseTab(t),this.$element.trigger("collapse.zf.tabs",[t]));else{var e=this.$element.find("."+this.options.linkClass+"."+this.options.linkActiveClass),n=t.find('[role="tab"]')[0].hash,i=this.$tabContent.find(n);if(this._collapseTab(e),this._openTab(t),this.options.deepLink){var r=t.find("a").attr("href");this.options.updateHistory?history.pushState({},"",r):history.replaceState({},"",r)}this.$element.trigger("change.zf.tabs",[t,i]),i.find("[data-mutate]").trigger("mutateme.zf.trigger")}}},{key:"_openTab",value:function(t){var e=t.find('[role="tab"]'),n=e[0].hash,i=this.$tabContent.find(n);t.addClass(""+this.options.linkActiveClass),e.attr({"aria-selected":"true"}),i.addClass(""+this.options.panelActiveClass).attr({"aria-hidden":"false"})}},{key:"_collapseTab",value:function(t){var e=t.removeClass(""+this.options.linkActiveClass).find('[role="tab"]').attr({"aria-selected":"false"});n("#"+e.attr("aria-controls")).removeClass(""+this.options.panelActiveClass).attr({"aria-hidden":"true"})}},{key:"selectTab",value:function(t){var e;(e="object"==typeof t?t[0].id:t).indexOf("#")<0&&(e="#"+e);var n=this.$tabTitles.find('[href="'+e+'"]').parent("."+this.options.linkClass);this._handleTabChange(n)}},{key:"_setHeight",value:function(){var t=0;this.$tabContent.find("."+this.options.panelClass).css("height","").each((function(){var e=n(this),i=e.hasClass(""+this.options.panelActiveClass);i||e.css({visibility:"hidden",display:"block"});var r=this.getBoundingClientRect().height;i||e.css({visibility:"",display:""}),t=r>t?r:t})).css("height",t+"px")}},{key:"destroy",value:function(){this.$element.find("."+this.options.linkClass).off(".zf.tabs").hide().end().find("."+this.options.panelClass).hide(),this.options.matchHeight&&null!=this._setHeightMqHandler&&n(window).off("changed.zf.mediaquery",this._setHeightMqHandler),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={deepLink:!1,deepLinkSmudge:!1,deepLinkSmudgeDelay:300,updateHistory:!1,autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,activeCollapse:!1,linkClass:"tabs-title",linkActiveClass:"is-active",panelClass:"tabs-panel",panelActiveClass:"is-active"},Foundation.plugin(i,"Tabs")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,t.data(),r),this.className="",this._init(),this._events(),Foundation.registerPlugin(this,"Toggler")}return t(i,[{key:"_init",value:function(){var t;this.options.animate?(t=this.options.animate.split(" "),this.animationIn=t[0],this.animationOut=t[1]||null):(t=this.$element.data("toggler"),this.className="."===t[0]?t.slice(1):t);var e=this.$element[0].id;n('[data-open="'+e+'"], [data-close="'+e+'"], [data-toggle="'+e+'"]').attr("aria-controls",e),this.$element.attr("aria-expanded",!this.$element.is(":hidden"))}},{key:"_events",value:function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this))}},{key:"toggle",value:function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]()}},{key:"_toggleClass",value:function(){this.$element.toggleClass(this.className);var t=this.$element.hasClass(this.className);t?this.$element.trigger("on.zf.toggler"):this.$element.trigger("off.zf.toggler"),this._updateARIA(t),this.$element.find("[data-mutate]").trigger("mutateme.zf.trigger")}},{key:"_toggleAnimate",value:function(){var t=this;this.$element.is(":hidden")?Foundation.Motion.animateIn(this.$element,this.animationIn,(function(){t._updateARIA(!0),this.trigger("on.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")})):Foundation.Motion.animateOut(this.$element,this.animationOut,(function(){t._updateARIA(!1),this.trigger("off.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")}))}},{key:"_updateARIA",value:function(t){this.$element.attr("aria-expanded",!!t)}},{key:"destroy",value:function(){this.$element.off(".zf.toggler"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={animate:!1},Foundation.plugin(i,"Toggler")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=t,this.options=n.extend({},i.defaults,this.$element.data(),r),this.isActive=!1,this.isClick=!1,this._init(),Foundation.registerPlugin(this,"Tooltip")}return t(i,[{key:"_init",value:function(){var t=this.$element.attr("aria-describedby")||Foundation.GetYoDigits(6,"tooltip");this.options.positionClass=this.options.positionClass||this._getPositionClass(this.$element),this.options.tipText=this.options.tipText||this.$element.attr("title"),this.template=this.options.template?n(this.options.template):this._buildTemplate(t),this.options.allowHtml?this.template.appendTo(document.body).html(this.options.tipText).hide():this.template.appendTo(document.body).text(this.options.tipText).hide(),this.$element.attr({title:"","aria-describedby":t,"data-yeti-box":t,"data-toggle":t,"data-resize":t}).addClass(this.options.triggerClass),this.usedPositions=[],this.counter=4,this.classChanged=!1,this._events()}},{key:"_getPositionClass",value:function(t){if(!t)return"";var e=t[0].className.match(/\b(top|left|right)\b/g);return e?e[0]:""}},{key:"_buildTemplate",value:function(t){var e=(this.options.tooltipClass+" "+this.options.positionClass+" "+this.options.templateClasses).trim();return n("<div></div>").addClass(e).attr({role:"tooltip","aria-hidden":!0,"data-is-active":!1,"data-is-focus":!1,id:t})}},{key:"_reposition",value:function(t){this.usedPositions.push(t||"bottom"),!t&&this.usedPositions.indexOf("top")<0?this.template.addClass("top"):"top"===t&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(t):"left"===t&&this.usedPositions.indexOf("right")<0?this.template.removeClass(t).addClass("right"):"right"===t&&this.usedPositions.indexOf("left")<0?this.template.removeClass(t).addClass("left"):!t&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.template.addClass("left"):"top"===t&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.template.removeClass(t).addClass("left"):("left"===t&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0||"right"===t&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom"),this.template.removeClass(t)),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){var t=this._getPositionClass(this.template),e=Foundation.Box.GetDimensions(this.template),n=Foundation.Box.GetDimensions(this.$element);if("height"==("top"==("left"===t||"right"===t?"left":"top")?"height":"width")?this.options.vOffset:this.options.hOffset,e.width>=e.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.template))return this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center bottom",this.options.vOffset,this.options.hOffset,!0)).css({width:n.windowDims.width-2*this.options.hOffset,height:"auto"}),!1;for(this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center "+(t||"bottom"),this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.template)&&this.counter;)this._reposition(t),this._setPosition()}},{key:"show",value:function(){if("all"!==this.options.showOn&&!Foundation.MediaQuery.is(this.options.showOn))return!1;this.template.css("visibility","hidden").show(),this._setPosition(),this.$element.trigger("closeme.zf.tooltip",this.template.attr("id")),this.template.attr({"data-is-active":!0,"aria-hidden":!1}),this.isActive=!0,this.template.stop().hide().css("visibility","").fadeIn(this.options.fadeInDuration,(function(){})),this.$element.trigger("show.zf.tooltip")}},{key:"hide",value:function(){var t=this;this.template.stop().attr({"aria-hidden":!0,"data-is-active":!1}).fadeOut(this.options.fadeOutDuration,(function(){t.isActive=!1,t.isClick=!1,t.classChanged&&(t.template.removeClass(t._getPositionClass(t.template)).addClass(t.options.positionClass),t.usedPositions=[],t.counter=4,t.classChanged=!1)})),this.$element.trigger("hide.zf.tooltip")}},{key:"_events",value:function(){var t=this,e=(this.template,!1);this.options.disableHover||this.$element.on("mouseenter.zf.tooltip",(function(e){t.isActive||(t.timeout=setTimeout((function(){t.show()}),t.options.hoverDelay))})).on("mouseleave.zf.tooltip",(function(n){clearTimeout(t.timeout),(!e||t.isClick&&!t.options.clickOpen)&&t.hide()})),this.options.clickOpen?this.$element.on("mousedown.zf.tooltip",(function(e){e.stopImmediatePropagation(),t.isClick||(t.isClick=!0,!t.options.disableHover&&t.$element.attr("tabindex")||t.isActive||t.show())})):this.$element.on("mousedown.zf.tooltip",(function(e){e.stopImmediatePropagation(),t.isClick=!0})),this.options.disableForTouch||this.$element.on("tap.zf.tooltip touchend.zf.tooltip",(function(e){t.isActive?t.hide():t.show()})),this.$element.on({"close.zf.trigger":this.hide.bind(this)}),this.$element.on("focus.zf.tooltip",(function(n){if(e=!0,t.isClick)return t.options.clickOpen||(e=!1),!1;t.show()})).on("focusout.zf.tooltip",(function(n){e=!1,t.isClick=!1,t.hide()})).on("resizeme.zf.trigger",(function(){t.isActive&&t._setPosition()}))}},{key:"toggle",value:function(){this.isActive?this.hide():this.show()}},{key:"destroy",value:function(){this.$element.attr("title",this.template.text()).off(".zf.trigger .zf.tooltip").removeClass("has-tip top right left").removeAttr("aria-describedby aria-haspopup data-disable-hover data-resize data-toggle data-tooltip data-yeti-box"),this.template.remove(),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={disableForTouch:!1,hoverDelay:200,fadeInDuration:150,fadeOutDuration:150,disableHover:!1,templateClasses:"",tooltipClass:"tooltip",triggerClass:"has-tip",showOn:"small",template:"",tipText:"",touchCloseText:"Tap to close.",clickOpen:!0,positionClass:"",vOffset:10,hOffset:12,allowHtml:!1},Foundation.plugin(i,"Tooltip")}(jQuery),t=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),function(n){var i=function(){function i(t,r){e(this,i),this.$element=n(t),this.options=n.extend({},this.$element.data(),r),this.rules=this.$element.data("responsive-accordion-tabs"),this.currentMq=null,this.currentPlugin=null,this.$element.attr("id")||this.$element.attr("id",Foundation.GetYoDigits(6,"responsiveaccordiontabs")),this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveAccordionTabs")}return t(i,[{key:"_init",value:function(){if("string"==typeof this.rules){for(var t={},e=this.rules.split(" "),i=0;i<e.length;i++){var o=e[i].split("-"),a=o.length>1?o[0]:"small",s=o.length>1?o[1]:o[0];null!==r[s]&&(t[a]=r[s])}this.rules=t}this._getAllOptions(),n.isEmptyObject(this.rules)||this._checkMediaQueries()}},{key:"_getAllOptions",value:function(){var t=this;for(var e in t.allOptions={},r)if(r.hasOwnProperty(e)){var i=r[e];try{var o=n("<ul></ul>"),a=new i.plugin(o,t.options);for(var s in a.options)if(a.options.hasOwnProperty(s)&&"zfPlugin"!==s){var l=a.options[s];t.allOptions[s]=l}a.destroy()}catch(t){}}}},{key:"_events",value:function(){var t=this;n(window).on("changed.zf.mediaquery",(function(){t._checkMediaQueries()}))}},{key:"_checkMediaQueries",value:function(){var t,e=this;n.each(this.rules,(function(e){Foundation.MediaQuery.atLeast(e)&&(t=e)})),t&&(this.currentPlugin instanceof this.rules[t].plugin||(n.each(r,(function(t,n){e.$element.removeClass(n.cssClass)})),this.$element.addClass(this.rules[t].cssClass),this.currentPlugin&&(!this.currentPlugin.$element.data("zfPlugin")&&this.storezfData&&this.currentPlugin.$element.data("zfPlugin",this.storezfData),this.currentPlugin.destroy()),this._handleMarkup(this.rules[t].cssClass),this.currentPlugin=new this.rules[t].plugin(this.$element,{}),this.storezfData=this.currentPlugin.$element.data("zfPlugin")))}},{key:"_handleMarkup",value:function(t){var e=this,i="accordion",r=n("[data-tabs-content="+this.$element.attr("id")+"]");if(r.length&&(i="tabs"),i!==t){var o=e.allOptions.linkClass?e.allOptions.linkClass:"tabs-title",a=e.allOptions.panelClass?e.allOptions.panelClass:"tabs-panel";this.$element.removeAttr("role");var s=this.$element.children("."+o+",[data-accordion-item]").removeClass(o).removeClass("accordion-item").removeAttr("data-accordion-item"),l=s.children("a").removeClass("accordion-title");if("tabs"===i?(r=r.children("."+a).removeClass(a).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby")).children("a").removeAttr("role").removeAttr("aria-controls").removeAttr("aria-selected"):r=s.children("[data-tab-content]").removeClass("accordion-content"),r.css({display:"",visibility:""}),s.css({display:"",visibility:""}),"accordion"===t)r.each((function(t,i){n(i).appendTo(s.get(t)).addClass("accordion-content").attr("data-tab-content","").removeClass("is-active").css({height:""}),n("[data-tabs-content="+e.$element.attr("id")+"]").after('<div id="tabs-placeholder-'+e.$element.attr("id")+'"></div>').remove(),s.addClass("accordion-item").attr("data-accordion-item",""),l.addClass("accordion-title")}));else if("tabs"===t){var u=n("[data-tabs-content="+e.$element.attr("id")+"]"),c=n("#tabs-placeholder-"+e.$element.attr("id"));c.length?(u=n('<div class="tabs-content"></div>').insertAfter(c).attr("data-tabs-content",e.$element.attr("id")),c.remove()):u=n('<div class="tabs-content"></div>').insertAfter(e.$element).attr("data-tabs-content",e.$element.attr("id")),r.each((function(t,e){var i=n(e).appendTo(u).addClass(a),r=l.get(t).hash.slice(1),o=n(e).attr("id")||Foundation.GetYoDigits(6,"accordion");r!==o&&(""!==r?n(e).attr("id",r):(r=o,n(e).attr("id",r),n(l.get(t)).attr("href",n(l.get(t)).attr("href").replace("#","")+"#"+r))),n(s.get(t)).hasClass("is-active")&&i.addClass("is-active")})),s.addClass(o)}}}},{key:"destroy",value:function(){this.currentPlugin&&this.currentPlugin.destroy(),n(window).off(".zf.ResponsiveAccordionTabs"),Foundation.unregisterPlugin(this)}}]),i}();i.defaults={};var r={tabs:{cssClass:"tabs",plugin:Foundation._plugins.tabs||null},accordion:{cssClass:"accordion",plugin:Foundation._plugins.accordion||null}};Foundation.plugin(i,"ResponsiveAccordionTabs")}(jQuery)},9483:(t,e,n)=>{t.exports=function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return r(e[a][1][t]||t)}),u,u.exports,t,e,n,i)}return n[a].exports}for(var o=void 0,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";var i=t(2);function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==r&&f(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i((function(){var i;try{i=e(n)}catch(e){return o.reject(t,e)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function d(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var a=p((function(){e(r,i)}));"error"===a.status&&i(a.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=n=u,u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(r);return this.state!==l?h(n,this.state===s?t:e,this.outcome):this.queue.push(new c(n,t,e)),n},c.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){o.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)f(t,i);else{t.state=s,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},n.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},n.reject=function(t){var e=new this(r);return o.reject(e,t)},n.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(r);++l<n;)c(t[l],l);return u;function c(t,r){e.resolve(t).then((function(t){a[r]=t,++s!==n||i||(i=!0,o.resolve(u,a))}),(function(t){i||(i=!0,o.reject(u,t))}))}},n.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n,i=t.length,a=!1;if(!i)return this.resolve([]);for(var s=-1,l=new this(r);++s<i;)n=t[s],e.resolve(n).then((function(t){a||(a=!0,o.resolve(l,t))}),(function(t){a||(a=!0,o.reject(l,t))}));return l}},{2:2}],2:[function(t,e,i){(function(t){"use strict";var n,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,a=new r(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var t,e;i=!0;for(var n=u.length;n;){for(e=u,u=[],t=-1;++t<n;)e[t]();n=u.length}i=!1}e.exports=function(t){1!==u.push(t)||i||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,i){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(1))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){}}();function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&void 0!==t&&t(3);var a=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function l(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}var u,c,h="local-forage-detect-blob-support",d=Object.prototype.toString;function f(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}function p(t){return"boolean"==typeof u?a.resolve(u):(e=t,new a((function(t){var n=o([""]);e.objectStore(h).put(n,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))).then((function(t){return u=t}));var e}function m(t,e){return new a((function(n,i){if(t.db){if(!e)return n(t.db);(function(t){var e=c[t.name],n={};n.promise=new a((function(t){n.resolve=t})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise})(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var s=r.open.apply(r,o);e&&(s.onupgradeneeded=function(e){var n=s.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),s.onerror=function(){i(s.error)},s.onsuccess=function(){n(s.result),function(t){var e=c[t.name].deferredOperations.pop();e&&e.resolve()}(t)}}))}function _(t){return o([f(atob(t.data))],{type:t.type})}function g(t){return t&&t.__local_forage_encoded_blob}function y(t){var e=this,n=e._initReady().then((function(){var t=c[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return l(n,t,t),n}var v={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]=t[i];c||(c={});var r=c[n.name];r||(r={forages:[],db:null,dbReady:null,deferredOperations:[]},c[n.name]=r),r.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=y);var o=[];function s(){return a.resolve()}for(var l=0;l<r.forages.length;l++){var u=r.forages[l];u!==e&&o.push(u._initReady().catch(s))}var h=r.forages.slice(0);return a.all(o).then((function(){return n.db=r.db,function(t){return m(t,!1)}(n)})).then((function(t){return n.db=t,function(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,r=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}(n,e._defaultConfig.version)?function(t){return m(t,!0)}(n):t})).then((function(t){n.db=r.db=t,e._dbInfo=n;for(var i=0;i<h.length;i++){var o=h[i];o!==e&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},iterate:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).openCursor(),a=1;o.onsuccess=function(){var n=o.result;if(n){var i=n.value;g(i)&&(i=_(i));var r=t(i,n.key,a++);void 0!==r?e(r):n.continue()}else e()},o.onerror=function(){i(o.error)}})).catch(i)}));return s(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).get(t);o.onsuccess=function(){var t=o.result;void 0===t&&(t=null),g(t)&&(t=_(t)),e(t)},o.onerror=function(){i(o.error)}})).catch(i)}));return s(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new a((function(n,r){var o;i.ready().then((function(){return o=i._dbInfo,"[object Blob]"===d.call(e)?p(o.db).then((function(t){return t?e:(n=e,new a((function(t,e){var i=new FileReader;i.onerror=e,i.onloadend=function(e){var i=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:i,type:n.type})},i.readAsBinaryString(n)})));var n})):e})).then((function(e){var i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName);null===e&&(e=void 0),i.oncomplete=function(){void 0===e&&(e=null),n(e)},i.onabort=i.onerror=function(){var t=s.error?s.error:s.transaction.error;r(t)};var s=a.put(e,t)})).catch(r)}));return s(r,n),r},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),a=o.objectStore(r.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){i(a.error)},o.onabort=function(){var t=a.error?a.error:a.transaction.error;i(t)}})).catch(i)}));return s(i,e),i},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readwrite"),o=r.objectStore(i.storeName).clear();r.oncomplete=function(){t()},r.onabort=r.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName).count();r.onsuccess=function(){t(r.result)},r.onerror=function(){n(r.error)}})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,i=new a((function(e,i){t<0?e(null):n.ready().then((function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),a=!1,s=o.openCursor();s.onsuccess=function(){var n=s.result;n?0===t||a?e(n.key):(a=!0,n.advance(t)):e(null)},s.onerror=function(){i(s.error)}})).catch(i)}));return s(i,e),i},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName).openCursor(),o=[];r.onsuccess=function(){var e=r.result;e?(o.push(e.key),e.continue()):t(o)},r.onerror=function(){n(r.error)}})).catch(n)}));return s(n,t),n}},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=/^~~local_forage_type~([^~]+)~/,w="__lfsc__:",M=w.length,T="arbf",k="blob",S="si08",E="ui08",C="uic8",L="si16",D="si32",A="ur16",P="ui32",I="fl32",z="fl64",F=M+T.length,R=Object.prototype.toString;function O(t){var e,n,i,r,o,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(e=0;e<s;e+=4)n=x.indexOf(t[e]),i=x.indexOf(t[e+1]),r=x.indexOf(t[e+2]),o=x.indexOf(t[e+3]),c[l++]=n<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&o;return u}function Y(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=x[n[e]>>2],i+=x[(3&n[e])<<4|n[e+1]>>4],i+=x[(15&n[e+1])<<2|n[e+2]>>6],i+=x[63&n[e+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}var N={serialize:function(t,e){var n="";if(t&&(n=R.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===R.call(t.buffer))){var i,r=w;t instanceof ArrayBuffer?(i=t,r+=T):(i=t.buffer,"[object Int8Array]"===n?r+=S:"[object Uint8Array]"===n?r+=E:"[object Uint8ClampedArray]"===n?r+=C:"[object Int16Array]"===n?r+=L:"[object Uint16Array]"===n?r+=A:"[object Int32Array]"===n?r+=D:"[object Uint32Array]"===n?r+=P:"[object Float32Array]"===n?r+=I:"[object Float64Array]"===n?r+=z:e(new Error("Failed to get type for BinaryArray"))),e(r+Y(i))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+t.type+"~"+Y(this.result);e("__lfsc__:blob"+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if(t.substring(0,M)!==w)return JSON.parse(t);var e,n=t.substring(F),i=t.substring(M,F);if(i===k&&b.test(n)){var r=n.match(b);e=r[1],n=n.substring(r[0].length)}var a=O(n);switch(i){case T:return a;case k:return o([a],{type:e});case S:return new Int8Array(a);case E:return new Uint8Array(a);case C:return new Uint8ClampedArray(a);case L:return new Int16Array(a);case A:return new Uint16Array(a);case D:return new Int32Array(a);case P:return new Uint32Array(a);case I:return new Float32Array(a);case z:return new Float64Array(a);default:throw new Error("Unkown type: "+i)}},stringToBuffer:O,bufferToString:Y};var B={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var r=new a((function(t,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction((function(r){r.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],(function(){e._dbInfo=n,t()}),(function(t,e){i(e)}))}))}));return n.serializer=N,r},iterate:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("SELECT * FROM "+r.storeName,[],(function(n,i){for(var o=i.rows,a=o.length,s=0;s<a;s++){var l=o.item(s),u=l.value;if(u&&(u=r.serializer.deserialize(u)),void 0!==(u=t(u,l.key,s+1)))return void e(u)}e()}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),e(i)}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new a((function(n,r){i.ready().then((function(){void 0===e&&(e=null);var o=e,a=i._dbInfo;a.serializer.serialize(e,(function(e,i){i?r(i):a.db.transaction((function(i){i.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){n(o)}),(function(t,e){r(e)}))}),(function(t){t.code===t.QUOTA_ERR&&r(t)}))}))})).catch(r)}));return s(r,n),r},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("DELETE FROM "+r.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){e.executeSql("DELETE FROM "+i.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){e.executeSql("SELECT COUNT(key) as c FROM "+i.storeName,[],(function(e,n){var i=n.rows.item(0).c;t(i)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){e.executeSql("SELECT key FROM "+i.storeName,[],(function(e,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);t(i)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n}};var j={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=e.name+"/",e.storeName!==this._defaultConfig.storeName&&(e.keyPrefix+=e.storeName+"/"),this._dbInfo=e,e.serializer=N,a.resolve()},iterate:function(t,e){var n=this,i=n.ready().then((function(){for(var e=n._dbInfo,i=e.keyPrefix,r=i.length,o=localStorage.length,a=1,s=0;s<o;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var u=localStorage.getItem(l);if(u&&(u=e.serializer.deserialize(u)),void 0!==(u=t(u,l.substring(r),a++)))return u}}}));return s(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=n.ready().then((function(){var e=n._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i}));return s(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=i.ready().then((function(){void 0===e&&(e=null);var n=e;return new a((function(r,o){var a=i._dbInfo;a.serializer.serialize(e,(function(e,i){if(i)o(i);else try{localStorage.setItem(a.keyPrefix+t,e),r(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return s(r,n),r},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(i,e),i},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(t)&&localStorage.removeItem(i)}}));return s(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var n=this,i=n.ready().then((function(){var e,i=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e}));return s(i,e),i},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,i=[],r=0;r<n;r++)0===localStorage.key(r).indexOf(t.keyPrefix)&&i.push(localStorage.key(r).substring(t.keyPrefix.length));return i}));return s(n,t),n}},U={},$={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},H=[$.INDEXEDDB,$.WEBSQL,$.LOCALSTORAGE],V=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],q={description:"",driver:H.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},W={};W[$.INDEXEDDB]=function(){try{return!!r&&!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&r&&"function"==typeof r.open&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),W[$.WEBSQL]="function"==typeof openDatabase,W[$.LOCALSTORAGE]=function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(t){return!1}}();var G=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Z(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function X(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(G(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}function K(t){for(var e in $)if($.hasOwnProperty(e)&&$[e]===t)return!0;return!1}var J=new(function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.INDEXEDDB=$.INDEXEDDB,this.LOCALSTORAGE=$.LOCALSTORAGE,this.WEBSQL=$.WEBSQL,this._defaultConfig=X({},q),this._config=X({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":i(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t)"storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),this._config[e]=t[e];return"driver"in t&&t.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new a((function(e,n){try{var i=t._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),o=new Error("Custom driver name already in use: "+t._driver);if(!t._driver)return void n(r);if(K(t._driver))return void n(o);for(var s=V.concat("_initStorage"),l=0;l<s.length;l++){var u=s[l];if(!u||!t[u]||"function"!=typeof t[u])return void n(r)}var c=a.resolve(!0);"_support"in t&&(c=t._support&&"function"==typeof t._support?t._support():a.resolve(!!t._support)),c.then((function(n){W[i]=n,U[i]=t,e()}),n)}catch(t){n(t)}}));return l(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var i=this,r=a.resolve().then((function(){if(!K(t)){if(U[t])return U[t];throw new Error("Driver not found.")}switch(t){case i.INDEXEDDB:return v;case i.LOCALSTORAGE:return j;case i.WEBSQL:return B}}));return l(r,e,n),r},t.prototype.getSerializer=function(t){var e=a.resolve(N);return l(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return l(n,t,t),n},t.prototype.setDriver=function(t,e,n){var i=this;G(t)||(t=[t]);var r=this._getSupportedDrivers(t);function o(){i._config.driver=i.driver()}var s=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=s.then((function(){var t=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(t).then((function(t){i._driver=t._driver,o(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var r=t[e];return e++,i._dbInfo=null,i._ready=null,i.getDriver(r).then((function(t){return i._extend(t),o(),i._ready=i._initStorage(i._config),i._ready})).catch(n)}o();var s=new Error("No available storage method found.");return i._driverSet=a.reject(s),i._driverSet}()}}(r)}))})).catch((function(){o();var t=new Error("No available storage method found.");return i._driverSet=a.reject(t),i._driverSet})),l(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!W[t]},t.prototype._extend=function(t){X(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];this.supports(r)&&e.push(r)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<V.length;t++)Z(this,V[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=J},{3:3}]},{},[4])(4)},6486:function(t,e,n){var i;t=n.nmd(t),function(){var r,o=200,a="Expected a function",s="__lodash_hash_undefined__",l="__lodash_placeholder__",u=32,c=128,h=1/0,d=9007199254740991,f=NaN,p=4294967295,m=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],_="[object Arguments]",g="[object Array]",y="[object Boolean]",v="[object Date]",x="[object Error]",b="[object Function]",w="[object GeneratorFunction]",M="[object Map]",T="[object Number]",k="[object Object]",S="[object Promise]",E="[object RegExp]",C="[object Set]",L="[object String]",D="[object Symbol]",A="[object WeakMap]",P="[object ArrayBuffer]",I="[object DataView]",z="[object Float32Array]",F="[object Float64Array]",R="[object Int8Array]",O="[object Int16Array]",Y="[object Int32Array]",N="[object Uint8Array]",B="[object Uint8ClampedArray]",j="[object Uint16Array]",U="[object Uint32Array]",$=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39|#96);/g,W=/[&<>"'`]/g,G=RegExp(q.source),Z=RegExp(W.source),X=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tt=/^\w*$/,et=/^\./,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(it.source),ot=/^\s+|\s+$/g,at=/^\s+/,st=/\s+$/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,dt=/\\(\\)?/g,ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,mt=/^0x/i,_t=/^[-+]0x[0-9a-f]+$/i,gt=/^0b[01]+$/i,yt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,xt=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,Mt=/['\n\r\u2028\u2029\\]/g,Tt="a-z\\xdf-\\xf6\\xf8-\\xff",kt="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Et="["+St+"]",Ct="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Lt="\\d+",Dt="["+Tt+"]",At="[^\\ud800-\\udfff"+St+Lt+"\\u2700-\\u27bf"+Tt+kt+"]",Pt="\\ud83c[\\udffb-\\udfff]",It="[^\\ud800-\\udfff]",zt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ft="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt="["+kt+"]",Ot="(?:"+Dt+"|"+At+")",Yt="(?:"+Rt+"|"+At+")",Nt="(?:['’](?:d|ll|m|re|s|t|ve))?",Bt="(?:['’](?:D|LL|M|RE|S|T|VE))?",jt="(?:"+Ct+"|"+Pt+")?",Ut="[\\ufe0e\\ufe0f]?",$t=Ut+jt+"(?:\\u200d(?:"+[It,zt,Ft].join("|")+")"+Ut+jt+")*",Ht="(?:"+["[\\u2700-\\u27bf]",zt,Ft].join("|")+")"+$t,Vt="(?:"+[It+Ct+"?",Ct,zt,Ft,"[\\ud800-\\udfff]"].join("|")+")",qt=RegExp("['’]","g"),Wt=RegExp(Ct,"g"),Gt=RegExp(Pt+"(?="+Pt+")|"+Vt+$t,"g"),Zt=RegExp([Rt+"?"+Dt+"+"+Nt+"(?="+[Et,Rt,"$"].join("|")+")",Yt+"+"+Bt+"(?="+[Et,Rt+Ot,"$"].join("|")+")",Rt+"?"+Ot+"+"+Nt,Rt+"+"+Bt,Lt,Ht].join("|"),"g"),Xt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Kt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qt=-1,te={};te[z]=te[F]=te[R]=te[O]=te[Y]=te[N]=te[B]=te[j]=te[U]=!0,te[_]=te[g]=te[P]=te[y]=te[I]=te[v]=te[x]=te[b]=te[M]=te[T]=te[k]=te[E]=te[C]=te[L]=te[A]=!1;var ee={};ee[_]=ee[g]=ee[P]=ee[I]=ee[y]=ee[v]=ee[z]=ee[F]=ee[R]=ee[O]=ee[Y]=ee[M]=ee[T]=ee[k]=ee[E]=ee[C]=ee[L]=ee[D]=ee[N]=ee[B]=ee[j]=ee[U]=!0,ee[x]=ee[b]=ee[A]=!1;var ne={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ie=parseFloat,re=parseInt,oe="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ae="object"==typeof self&&self&&self.Object===Object&&self,se=oe||ae||Function("return this")(),le=e&&!e.nodeType&&e,ue=le&&t&&!t.nodeType&&t,ce=ue&&ue.exports===le,he=ce&&oe.process,de=function(){try{return he&&he.binding("util")}catch(t){}}(),fe=de&&de.isArrayBuffer,pe=de&&de.isDate,me=de&&de.isMap,_e=de&&de.isRegExp,ge=de&&de.isSet,ye=de&&de.isTypedArray;function ve(t,e){return t.set(e[0],e[1]),t}function xe(t,e){return t.add(e),t}function be(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function we(t,e,n,i){for(var r=-1,o=t?t.length:0;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function Me(t,e){for(var n=-1,i=t?t.length:0;++n<i&&!1!==e(t[n],n,t););return t}function Te(t,e){for(var n=t?t.length:0;n--&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(!e(t[n],n,t))return!1;return!0}function Se(t,e){for(var n=-1,i=t?t.length:0,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Ee(t,e){return!(!t||!t.length)&&Oe(t,e,0)>-1}function Ce(t,e,n){for(var i=-1,r=t?t.length:0;++i<r;)if(n(e,t[i]))return!0;return!1}function Le(t,e){for(var n=-1,i=t?t.length:0,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function De(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Ae(t,e,n,i){var r=-1,o=t?t.length:0;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Pe(t,e,n,i){var r=t?t.length:0;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ie(t,e){for(var n=-1,i=t?t.length:0;++n<i;)if(e(t[n],n,t))return!0;return!1}var ze=je("length");function Fe(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Re(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Oe(t,e,n){if(e!=e)return Re(t,Ne,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function Ye(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Ne(t){return t!=t}function Be(t,e){var n=t?t.length:0;return n?He(t,e)/n:f}function je(t){return function(e){return null==e?r:e[t]}}function Ue(t){return function(e){return null==t?r:t[e]}}function $e(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function He(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function Ve(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function qe(t){return function(e){return t(e)}}function We(t,e){return Le(e,(function(e){return t[e]}))}function Ge(t,e){return t.has(e)}function Ze(t,e){for(var n=-1,i=t.length;++n<i&&Oe(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length;n--&&Oe(e,t[n],0)>-1;);return n}function Ke(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&i++;return i}var Je=Ue({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"}),Qe=Ue({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"});function tn(t){return"\\"+ne[t]}function en(t){return Xt.test(t)}function nn(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function on(t,e){return function(n){return t(e(n))}}function an(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==l||(t[n]=l,o[r++]=n)}return o}function sn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function un(t){return en(t)?function(t){for(var e=Gt.lastIndex=0;Gt.test(t);)e++;return e}(t):ze(t)}function cn(t){return en(t)?function(t){return t.match(Gt)||[]}(t):function(t){return t.split("")}(t)}var hn=Ue({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"}),dn=function t(e){var n,i,Tt,kt=(e=e?dn.defaults(se.Object(),e,dn.pick(se,Jt)):se).Array,St=e.Date,Et=e.Error,Ct=e.Function,Lt=e.Math,Dt=e.Object,At=e.RegExp,Pt=e.String,It=e.TypeError,zt=kt.prototype,Ft=Ct.prototype,Rt=Dt.prototype,Ot=e["__core-js_shared__"],Yt=(n=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Nt=Ft.toString,Bt=Rt.hasOwnProperty,jt=0,Ut=Nt.call(Dt),$t=Rt.toString,Ht=se._,Vt=At("^"+Nt.call(Bt).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=ce?e.Buffer:r,Xt=e.Symbol,ne=e.Uint8Array,oe=on(Dt.getPrototypeOf,Dt),ae=Xt?Xt.iterator:r,le=Dt.create,ue=Rt.propertyIsEnumerable,he=zt.splice,de=Xt?Xt.isConcatSpreadable:r,ze=e.clearTimeout!==se.clearTimeout&&e.clearTimeout,Ue=St&&St.now!==se.Date.now&&St.now,fn=e.setTimeout!==se.setTimeout&&e.setTimeout,pn=Lt.ceil,mn=Lt.floor,_n=Dt.getOwnPropertySymbols,gn=Gt?Gt.isBuffer:r,yn=e.isFinite,vn=zt.join,xn=on(Dt.keys,Dt),bn=Lt.max,wn=Lt.min,Mn=e.parseInt,Tn=Lt.random,kn=zt.reverse,Sn=Jr(e,"DataView"),En=Jr(e,"Map"),Cn=Jr(e,"Promise"),Ln=Jr(e,"Set"),Dn=Jr(e,"WeakMap"),An=Jr(Dt,"create"),Pn=(i=Jr(Dt,"defineProperty"),(Tt=Jr.name)&&Tt.length>2?i:r),In=Dn&&new Dn,zn=!ue.call({valueOf:1},"valueOf"),Fn={},Rn=ko(Sn),On=ko(En),Yn=ko(Cn),Nn=ko(Ln),Bn=ko(Dn),jn=Xt?Xt.prototype:r,Un=jn?jn.valueOf:r,$n=jn?jn.toString:r;function Hn(t){if($a(t)&&!Pa(t)&&!(t instanceof Wn)){if(t instanceof qn)return t;if(Bt.call(t,"__wrapped__"))return Eo(t)}return new qn(t)}function Vn(){}function qn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Wn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Gn(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Zn(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Xn(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Kn(t){var e=-1,n=t?t.length:0;for(this.__data__=new Xn;++e<n;)this.add(t[e])}function Jn(t){this.__data__=new Zn(t)}function Qn(t,e){var n=Pa(t)||Aa(t)?Ve(t.length,Pt):[],i=n.length,r=!!i;for(var o in t)!e&&!Bt.call(t,o)||r&&("length"==o||ao(o,i))||n.push(o);return n}function ti(t,e,n,i){return t===r||Ca(t,Rt[n])&&!Bt.call(i,n)?e:t}function ei(t,e,n){(n!==r&&!Ca(t[e],n)||"number"==typeof e&&n===r&&!(e in t))&&(t[e]=n)}function ni(t,e,n){var i=t[e];Bt.call(t,e)&&Ca(i,n)&&(n!==r||e in t)||(t[e]=n)}function ii(t,e){for(var n=t.length;n--;)if(Ca(t[n][0],e))return n;return-1}function ri(t,e,n,i){return fi(t,(function(t,r,o){e(i,t,n(t),o)})),i}function oi(t,e){return t&&wr(e,vs(e),t)}function ai(t,e){for(var n=-1,i=null==t,o=e.length,a=kt(o);++n<o;)a[n]=i?r:ps(t,e[n]);return a}function si(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function li(t,e,n,i,o,a,s){var l;if(i&&(l=a?i(t,o,a,s):i(t)),l!==r)return l;if(!Ua(t))return t;var u=Pa(t);if(u){if(l=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Bt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return br(t,l)}else{var c=eo(t),h=c==b||c==w;if(Ra(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(c==k||c==_||h&&!a){if(nn(t))return a?t:{};if(l=function(t){return"function"!=typeof t.constructor||ho(t)?{}:ci(oe(t))}(h?{}:t),!e)return function(t,e){return wr(t,Qr(t),e)}(t,oi(l,t))}else{if(!ee[c])return a?t:{};l=function(t,e,n,i){var r,o=t.constructor;switch(e){case P:return gr(t);case y:case v:return new o(+t);case I:return function(t,e){var n=e?gr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,i);case z:case F:case R:case O:case Y:case N:case B:case j:case U:return function(t,e){var n=e?gr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,i);case M:return function(t,e,n){return Ae(e?n(rn(t),!0):rn(t),ve,new t.constructor)}(t,i,n);case T:case L:return new o(t);case E:return function(t){var e=new t.constructor(t.source,pt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case C:return function(t,e,n){return Ae(e?n(sn(t),!0):sn(t),xe,new t.constructor)}(t,i,n);case D:return r=t,Un?Dt(Un.call(r)):{}}}(t,c,li,e)}}s||(s=new Jn);var d=s.get(t);if(d)return d;if(s.set(t,l),!u)var f=n?function(t){return ki(t,vs,Qr)}(t):vs(t);return Me(f||t,(function(r,o){f&&(r=t[o=r]),ni(l,o,li(r,e,n,i,o,t,s))})),l}function ui(t,e,n){var i=n.length;if(null==t)return!i;for(t=Dt(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function ci(t){return Ua(t)?le(t):{}}function hi(t,e,n){if("function"!=typeof t)throw new It(a);return bo((function(){t.apply(r,n)}),e)}function di(t,e,n,i){var r=-1,a=Ee,s=!0,l=t.length,u=[],c=e.length;if(!l)return u;n&&(e=Le(e,qe(n))),i?(a=Ce,s=!1):e.length>=o&&(a=Ge,s=!1,e=new Kn(e));t:for(;++r<l;){var h=t[r],d=n?n(h):h;if(h=i||0!==h?h:0,s&&d==d){for(var f=c;f--;)if(e[f]===d)continue t;u.push(h)}else a(e,d,i)||u.push(h)}return u}Hn.templateSettings={escape:X,evaluate:K,interpolate:J,variable:"",imports:{_:Hn}},Hn.prototype=Vn.prototype,Hn.prototype.constructor=Hn,qn.prototype=ci(Vn.prototype),qn.prototype.constructor=qn,Wn.prototype=ci(Vn.prototype),Wn.prototype.constructor=Wn,Gn.prototype.clear=function(){this.__data__=An?An(null):{}},Gn.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Gn.prototype.get=function(t){var e=this.__data__;if(An){var n=e[t];return n===s?r:n}return Bt.call(e,t)?e[t]:r},Gn.prototype.has=function(t){var e=this.__data__;return An?e[t]!==r:Bt.call(e,t)},Gn.prototype.set=function(t,e){return this.__data__[t]=An&&e===r?s:e,this},Zn.prototype.clear=function(){this.__data__=[]},Zn.prototype.delete=function(t){var e=this.__data__,n=ii(e,t);return!(n<0||(n==e.length-1?e.pop():he.call(e,n,1),0))},Zn.prototype.get=function(t){var e=this.__data__,n=ii(e,t);return n<0?r:e[n][1]},Zn.prototype.has=function(t){return ii(this.__data__,t)>-1},Zn.prototype.set=function(t,e){var n=this.__data__,i=ii(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},Xn.prototype.clear=function(){this.__data__={hash:new Gn,map:new(En||Zn),string:new Gn}},Xn.prototype.delete=function(t){return Xr(this,t).delete(t)},Xn.prototype.get=function(t){return Xr(this,t).get(t)},Xn.prototype.has=function(t){return Xr(this,t).has(t)},Xn.prototype.set=function(t,e){return Xr(this,t).set(t,e),this},Kn.prototype.add=Kn.prototype.push=function(t){return this.__data__.set(t,s),this},Kn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.clear=function(){this.__data__=new Zn},Jn.prototype.delete=function(t){return this.__data__.delete(t)},Jn.prototype.get=function(t){return this.__data__.get(t)},Jn.prototype.has=function(t){return this.__data__.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Zn){var i=n.__data__;if(!En||i.length<199)return i.push([t,e]),this;n=this.__data__=new Xn(i)}return n.set(t,e),this};var fi=kr(bi),pi=kr(wi,!0);function mi(t,e){var n=!0;return fi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function _i(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(l===r?s==s&&!Xa(s):n(s,l)))var l=s,u=a}return u}function gi(t,e){var n=[];return fi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function yi(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=oo),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?yi(s,e-1,n,i,r):De(r,s):i||(r[r.length]=s)}return r}var vi=Sr(),xi=Sr(!0);function bi(t,e){return t&&vi(t,e,vs)}function wi(t,e){return t&&xi(t,e,vs)}function Mi(t,e){return Se(e,(function(e){return Na(t[e])}))}function Ti(t,e){for(var n=0,i=(e=lo(e,t)?[e]:pr(e)).length;null!=t&&n<i;)t=t[To(e[n++])];return n&&n==i?t:r}function ki(t,e,n){var i=e(t);return Pa(t)?i:De(i,n(t))}function Si(t,e){return t>e}function Ei(t,e){return null!=t&&Bt.call(t,e)}function Ci(t,e){return null!=t&&e in Dt(t)}function Li(t,e,n){for(var i=n?Ce:Ee,o=t[0].length,a=t.length,s=a,l=kt(a),u=1/0,c=[];s--;){var h=t[s];s&&e&&(h=Le(h,qe(e))),u=wn(h.length,u),l[s]=!n&&(e||o>=120&&h.length>=120)?new Kn(s&&h):r}h=t[0];var d=-1,f=l[0];t:for(;++d<o&&c.length<u;){var p=h[d],m=e?e(p):p;if(p=n||0!==p?p:0,!(f?Ge(f,m):i(c,m,n))){for(s=a;--s;){var _=l[s];if(!(_?Ge(_,m):i(t[s],m,n)))continue t}f&&f.push(m),c.push(p)}}return c}function Di(t,e,n){lo(e,t)||(t=_o(t,e=pr(e)),e=Oo(e));var i=null==t?t:t[To(e)];return null==i?r:be(i,t,n)}function Ai(t,e,n,i,o){return t===e||(null==t||null==e||!Ua(t)&&!$a(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=Pa(t),l=Pa(e),u=g,c=g;s||(u=(u=eo(t))==_?k:u),l||(c=(c=eo(e))==_?k:c);var h=u==k&&!nn(t),d=c==k&&!nn(e),f=u==c;if(f&&!h)return a||(a=new Jn),s||Ka(t)?Hr(t,e,n,i,o,a):function(t,e,n,i,r,o,a){switch(n){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!i(new ne(t),new ne(e)));case y:case v:case T:return Ca(+t,+e);case x:return t.name==e.name&&t.message==e.message;case E:case L:return t==e+"";case M:var s=rn;case C:var l=2&o;if(s||(s=sn),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;o|=1,a.set(t,e);var c=Hr(s(t),s(e),i,r,o,a);return a.delete(t),c;case D:if(Un)return Un.call(t)==Un.call(e)}return!1}(t,e,u,n,i,o,a);if(!(2&o)){var p=h&&Bt.call(t,"__wrapped__"),m=d&&Bt.call(e,"__wrapped__");if(p||m){var b=p?t.value():t,w=m?e.value():e;return a||(a=new Jn),n(b,w,i,o,a)}}return!!f&&(a||(a=new Jn),function(t,e,n,i,o,a){var s=2&o,l=vs(t),u=l.length;if(u!=vs(e).length&&!s)return!1;for(var c=u;c--;){var h=l[c];if(!(s?h in e:Bt.call(e,h)))return!1}var d=a.get(t);if(d&&a.get(e))return d==e;var f=!0;a.set(t,e),a.set(e,t);for(var p=s;++c<u;){var m=t[h=l[c]],_=e[h];if(i)var g=s?i(_,m,h,e,t,a):i(m,_,h,t,e,a);if(!(g===r?m===_||n(m,_,i,o,a):g)){f=!1;break}p||(p="constructor"==h)}if(f&&!p){var y=t.constructor,v=e.constructor;y==v||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(f=!1)}return a.delete(t),a.delete(e),f}(t,e,n,i,o,a))}(t,e,Ai,n,i,o))}function Pi(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=Dt(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var u=(l=n[o])[0],c=t[u],h=l[1];if(s&&l[2]){if(c===r&&!(u in t))return!1}else{var d=new Jn;if(i)var f=i(c,h,u,t,e,d);if(!(f===r?Ai(h,c,i,3,d):f))return!1}}return!0}function Ii(t){return!(!Ua(t)||function(t){return!!Yt&&Yt in t}(t))&&(Na(t)||nn(t)?Vt:yt).test(ko(t))}function zi(t){return"function"==typeof t?t:null==t?Vs:"object"==typeof t?Pa(t)?Bi(t[0],t[1]):Ni(t):tl(t)}function Fi(t){if(!ho(t))return xn(t);var e=[];for(var n in Dt(t))Bt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ri(t){if(!Ua(t))return function(t){var e=[];if(null!=t)for(var n in Dt(t))e.push(n);return e}(t);var e=ho(t),n=[];for(var i in t)("constructor"!=i||!e&&Bt.call(t,i))&&n.push(i);return n}function Oi(t,e){return t<e}function Yi(t,e){var n=-1,i=za(t)?kt(t.length):[];return fi(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Ni(t){var e=Kr(t);return 1==e.length&&e[0][2]?po(e[0][0],e[0][1]):function(n){return n===t||Pi(n,t,e)}}function Bi(t,e){return lo(t)&&fo(e)?po(To(t),e):function(n){var i=ps(n,t);return i===r&&i===e?ms(n,t):Ai(e,i,r,3)}}function ji(t,e,n,i,o){if(t!==e){if(!Pa(e)&&!Ka(e))var a=Ri(e);Me(a||e,(function(s,l){if(a&&(s=e[l=s]),Ua(s))o||(o=new Jn),function(t,e,n,i,o,a,s){var l=t[n],u=e[n],c=s.get(u);if(c)ei(t,n,c);else{var h=a?a(l,u,n+"",t,e,s):r,d=h===r;d&&(h=u,Pa(u)||Ka(u)?Pa(l)?h=l:Fa(l)?h=br(l):(d=!1,h=li(u,!0)):qa(u)||Aa(u)?Aa(l)?h=os(l):!Ua(l)||i&&Na(l)?(d=!1,h=li(u,!0)):h=l:d=!1),d&&(s.set(u,h),o(h,u,i,a,s),s.delete(u)),ei(t,n,h)}}(t,e,l,n,ji,i,o);else{var u=i?i(t[l],s,l+"",t,e,o):r;u===r&&(u=s),ei(t,l,u)}}))}}function Ui(t,e){var n=t.length;if(n)return ao(e+=e<0?n:0,n)?t[e]:r}function $i(t,e,n){var i=-1;return e=Le(e.length?e:[Vs],qe(Zr())),function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=yr(r[i],o[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(Yi(t,(function(t,n,r){return{criteria:Le(e,(function(e){return e(t)})),index:++i,value:t}})))}function Hi(t,e){return Vi(t=Dt(t),e,(function(e,n){return n in t}))}function Vi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=t[a];n(s,a)&&(o[a]=s)}return o}function qi(t,e,n,i){var r=i?Ye:Oe,o=-1,a=e.length,s=t;for(t===e&&(e=br(e)),n&&(s=Le(t,qe(n)));++o<a;)for(var l=0,u=e[o],c=n?n(u):u;(l=r(s,c,l,i))>-1;)s!==t&&he.call(s,l,1),he.call(t,l,1);return t}function Wi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;if(ao(r))he.call(t,r,1);else if(lo(r,t))delete t[To(r)];else{var a=pr(r),s=_o(t,a);null!=s&&delete s[To(Oo(a))]}}}return t}function Gi(t,e){return t+mn(Tn()*(e-t+1))}function Zi(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=mn(e/2))&&(t+=t)}while(e);return n}function Xi(t,e){return e=bn(e===r?t.length-1:e,0),function(){for(var n=arguments,i=-1,r=bn(n.length-e,0),o=kt(r);++i<r;)o[i]=n[e+i];i=-1;for(var a=kt(e+1);++i<e;)a[i]=n[i];return a[e]=o,be(t,this,a)}}function Ki(t,e,n,i){if(!Ua(t))return t;for(var o=-1,a=(e=lo(e,t)?[e]:pr(e)).length,s=a-1,l=t;null!=l&&++o<a;){var u=To(e[o]),c=n;if(o!=s){var h=l[u];(c=i?i(h,u,l):r)===r&&(c=Ua(h)?h:ao(e[o+1])?[]:{})}ni(l,u,c),l=l[u]}return t}var Ji=In?function(t,e){return In.set(t,e),t}:Vs;function Qi(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=kt(r);++i<r;)o[i]=t[i+e];return o}function tr(t,e){var n;return fi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function er(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!Xa(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return nr(t,e,Vs,n)}function nr(t,e,n,i){e=n(e);for(var o=0,a=t?t.length:0,s=e!=e,l=null===e,u=Xa(e),c=e===r;o<a;){var h=mn((o+a)/2),d=n(t[h]),f=d!==r,p=null===d,m=d==d,_=Xa(d);if(s)var g=i||m;else g=c?m&&(i||f):l?m&&f&&(i||!p):u?m&&f&&!p&&(i||!_):!p&&!_&&(i?d<=e:d<e);g?o=h+1:a=h}return wn(a,4294967294)}function ir(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!Ca(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function rr(t){return"number"==typeof t?t:Xa(t)?f:+t}function or(t){if("string"==typeof t)return t;if(Xa(t))return $n?$n.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ar(t,e,n){var i=-1,r=Ee,a=t.length,s=!0,l=[],u=l;if(n)s=!1,r=Ce;else if(a>=o){var c=e?null:jr(t);if(c)return sn(c);s=!1,r=Ge,u=new Kn}else u=e?[]:l;t:for(;++i<a;){var h=t[i],d=e?e(h):h;if(h=n||0!==h?h:0,s&&d==d){for(var f=u.length;f--;)if(u[f]===d)continue t;e&&u.push(d),l.push(h)}else r(u,d,n)||(u!==l&&u.push(d),l.push(h))}return l}function sr(t,e,n,i){return Ki(t,e,n(Ti(t,e)),i)}function lr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?Qi(t,i?0:o,i?o+1:r):Qi(t,i?o+1:0,i?r:o)}function ur(t,e){var n=t;return n instanceof Wn&&(n=n.value()),Ae(e,(function(t,e){return e.func.apply(e.thisArg,De([t],e.args))}),n)}function cr(t,e,n){for(var i=-1,r=t.length;++i<r;)var o=o?De(di(o,t[i],e,n),di(t[i],o,e,n)):t[i];return o&&o.length?ar(o,e,n):[]}function hr(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var l=i<a?e[i]:r;n(s,t[i],l)}return s}function dr(t){return Fa(t)?t:[]}function fr(t){return"function"==typeof t?t:Vs}function pr(t){return Pa(t)?t:Mo(t)}function mr(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:Qi(t,e,n)}var _r=ze||function(t){return se.clearTimeout(t)};function gr(t){var e=new t.constructor(t.byteLength);return new ne(e).set(new ne(t)),e}function yr(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=Xa(t),s=e!==r,l=null===e,u=e==e,c=Xa(e);if(!l&&!c&&!a&&t>e||a&&s&&u&&!l&&!c||i&&s&&u||!n&&u||!o)return 1;if(!i&&!a&&!c&&t<e||c&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!u)return-1}return 0}function vr(t,e,n,i){for(var r=-1,o=t.length,a=n.length,s=-1,l=e.length,u=bn(o-a,0),c=kt(l+u),h=!i;++s<l;)c[s]=e[s];for(;++r<a;)(h||r<o)&&(c[n[r]]=t[r]);for(;u--;)c[s++]=t[r++];return c}function xr(t,e,n,i){for(var r=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,c=bn(o-s,0),h=kt(c+u),d=!i;++r<c;)h[r]=t[r];for(var f=r;++l<u;)h[f+l]=e[l];for(;++a<s;)(d||r<o)&&(h[f+n[a]]=t[r++]);return h}function br(t,e){var n=-1,i=t.length;for(e||(e=kt(i));++n<i;)e[n]=t[n];return e}function wr(t,e,n,i){n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=i?i(n[s],t[s],s,n,t):r;ni(n,s,l===r?t[s]:l)}return n}function Mr(t,e){return function(n,i){var r=Pa(n)?we:ri,o=e?e():{};return r(n,t,Zr(i,2),o)}}function Tr(t){return Xi((function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&so(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=Dt(e);++i<o;){var l=n[i];l&&t(e,l,i,a)}return e}))}function kr(t,e){return function(n,i){if(null==n)return n;if(!za(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Dt(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function Sr(t){return function(e,n,i){for(var r=-1,o=Dt(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}function Er(t){return function(e){var n=en(e=as(e))?cn(e):r,i=n?n[0]:e.charAt(0),o=n?mr(n,1).join(""):e.slice(1);return i[t]()+o}}function Cr(t){return function(e){return Ae(Ns(As(e).replace(qt,"")),t,"")}}function Lr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ci(t.prototype),i=t.apply(n,e);return Ua(i)?i:n}}function Dr(t){return function(e,n,i){var o=Dt(e);if(!za(e)){var a=Zr(n,3);e=vs(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function Ar(t){return Xi((function(e){var n=(e=yi(e,1)).length,i=n,s=qn.prototype.thru;for(t&&e.reverse();i--;){var l=e[i];if("function"!=typeof l)throw new It(a);if(s&&!u&&"wrapper"==Wr(l))var u=new qn([],!0)}for(i=u?i:n;++i<n;){var c=Wr(l=e[i]),h="wrapper"==c?qr(l):r;u=h&&uo(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?u[Wr(h[0])].apply(u,h[3]):1==l.length&&uo(l)?u[c]():u.thru(l)}return function(){var t=arguments,i=t[0];if(u&&1==t.length&&Pa(i)&&i.length>=o)return u.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}}))}function Pr(t,e,n,i,o,a,s,l,u,h){var d=e&c,f=1&e,p=2&e,m=24&e,_=512&e,g=p?r:Lr(t);return function r(){for(var c=arguments.length,y=kt(c),v=c;v--;)y[v]=arguments[v];if(m)var x=Gr(r),b=Ke(y,x);if(i&&(y=vr(y,i,o,m)),a&&(y=xr(y,a,s,m)),c-=b,m&&c<h){var w=an(y,x);return Nr(t,e,Pr,r.placeholder,n,y,w,l,u,h-c)}var M=f?n:this,T=p?M[t]:t;return c=y.length,l?y=go(y,l):_&&c>1&&y.reverse(),d&&u<c&&(y.length=u),this&&this!==se&&this instanceof r&&(T=g||Lr(T)),T.apply(M,y)}}function Ir(t,e){return function(n,i){return function(t,e,n,i){return bi(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function zr(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=or(n),i=or(i)):(n=rr(n),i=rr(i)),o=t(n,i)}return o}}function Fr(t){return Xi((function(e){return e=1==e.length&&Pa(e[0])?Le(e[0],qe(Zr())):Le(yi(e,1),qe(Zr())),Xi((function(n){var i=this;return t(e,(function(t){return be(t,i,n)}))}))}))}function Rr(t,e){var n=(e=e===r?" ":or(e)).length;if(n<2)return n?Zi(e,t):e;var i=Zi(e,pn(t/un(e)));return en(e)?mr(cn(i),0,t).join(""):i.slice(0,t)}function Or(t){return function(e,n,i){return i&&"number"!=typeof i&&so(e,n,i)&&(n=i=r),e=es(e),n===r?(n=e,e=0):n=es(n),function(t,e,n,i){for(var r=-1,o=bn(pn((e-t)/(n||1)),0),a=kt(o);o--;)a[i?o:++r]=t,t+=n;return a}(e,n,i=i===r?e<n?1:-1:es(i),t)}}function Yr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=rs(e),n=rs(n)),t(e,n)}}function Nr(t,e,n,i,o,a,s,l,c,h){var d=8&e;e|=d?u:64,4&(e&=~(d?64:u))||(e&=-4);var f=[t,e,o,d?a:r,d?s:r,d?r:a,d?r:s,l,c,h],p=n.apply(r,f);return uo(t)&&xo(p,f),p.placeholder=i,wo(p,t,e)}function Br(t){var e=Lt[t];return function(t,n){if(t=rs(t),n=wn(ns(n),292)){var i=(as(t)+"e").split("e");return+((i=(as(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var jr=Ln&&1/sn(new Ln([,-0]))[1]==h?function(t){return new Ln(t)}:Xs;function Ur(t){return function(e){var n=eo(e);return n==M?rn(e):n==C?ln(e):function(t,e){return Le(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function $r(t,e,n,i,o,s,h,d){var f=2&e;if(!f&&"function"!=typeof t)throw new It(a);var p=i?i.length:0;if(p||(e&=-97,i=o=r),h=h===r?h:bn(ns(h),0),d=d===r?d:ns(d),p-=o?o.length:0,64&e){var m=i,_=o;i=o=r}var g=f?r:qr(t),y=[t,e,n,i,o,m,_,s,h,d];if(g&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,a=i==c&&8==n||i==c&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var s=e[3];if(s){var u=t[3];t[3]=u?vr(u,s,e[4]):s,t[4]=u?an(t[3],l):e[4]}(s=e[5])&&(u=t[5],t[5]=u?xr(u,s,e[6]):s,t[6]=u?an(t[5],l):e[6]),(s=e[7])&&(t[7]=s),i&c&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(y,g),t=y[0],e=y[1],n=y[2],i=y[3],o=y[4],!(d=y[9]=null==y[9]?f?0:t.length:bn(y[9]-p,0))&&24&e&&(e&=-25),e&&1!=e)v=8==e||16==e?function(t,e,n){var i=Lr(t);return function o(){for(var a=arguments.length,s=kt(a),l=a,u=Gr(o);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:an(s,u);return(a-=c.length)<n?Nr(t,e,Pr,o.placeholder,r,s,c,r,r,n-a):be(this&&this!==se&&this instanceof o?i:t,this,s)}}(t,e,d):e!=u&&33!=e||o.length?Pr.apply(r,y):function(t,e,n,i){var r=1&e,o=Lr(t);return function e(){for(var a=-1,s=arguments.length,l=-1,u=i.length,c=kt(u+s),h=this&&this!==se&&this instanceof e?o:t;++l<u;)c[l]=i[l];for(;s--;)c[l++]=arguments[++a];return be(h,r?n:this,c)}}(t,e,n,i);else var v=function(t,e,n){var i=1&e,r=Lr(t);return function e(){return(this&&this!==se&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return wo((g?Ji:xo)(v,y),t,e)}function Hr(t,e,n,i,o,a){var s=2&o,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var h=-1,d=!0,f=1&o?new Kn:r;for(a.set(t,e),a.set(e,t);++h<l;){var p=t[h],m=e[h];if(i)var _=s?i(m,p,h,e,t,a):i(p,m,h,t,e,a);if(_!==r){if(_)continue;d=!1;break}if(f){if(!Ie(e,(function(t,e){if(!f.has(e)&&(p===t||n(p,t,i,o,a)))return f.add(e)}))){d=!1;break}}else if(p!==m&&!n(p,m,i,o,a)){d=!1;break}}return a.delete(t),a.delete(e),d}function Vr(t){return ki(t,xs,to)}var qr=In?function(t){return In.get(t)}:Xs;function Wr(t){for(var e=t.name+"",n=Fn[e],i=Bt.call(Fn,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Gr(t){return(Bt.call(Hn,"placeholder")?Hn:t).placeholder}function Zr(){var t=Hn.iteratee||qs;return t=t===qs?zi:t,arguments.length?t(arguments[0],arguments[1]):t}function Xr(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Kr(t){for(var e=vs(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,fo(r)]}return e}function Jr(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Ii(n)?n:r}var Qr=_n?on(_n,Dt):il,to=_n?function(t){for(var e=[];t;)De(e,Qr(t)),t=oe(t);return e}:il,eo=function(t){return $t.call(t)};function no(t){var e=t.match(ut);return e?e[1].split(ct):[]}function io(t,e,n){for(var i,r=-1,o=(e=lo(e,t)?[e]:pr(e)).length;++r<o;){var a=To(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||!!(o=t?t.length:0)&&ja(o)&&ao(a,o)&&(Pa(t)||Aa(t))}function ro(t,e){var n=e.length,i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(lt,"{\n/* [wrapped with "+e+"] */\n")}function oo(t){return Pa(t)||Aa(t)||!!(de&&t&&t[de])}function ao(t,e){return!!(e=null==e?d:e)&&("number"==typeof t||xt.test(t))&&t>-1&&t%1==0&&t<e}function so(t,e,n){if(!Ua(n))return!1;var i=typeof e;return!!("number"==i?za(n)&&ao(e,n.length):"string"==i&&e in n)&&Ca(n[e],t)}function lo(t,e){if(Pa(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Xa(t))||tt.test(t)||!Q.test(t)||null!=e&&t in Dt(e)}function uo(t){var e=Wr(t),n=Hn[e];if("function"!=typeof n||!(e in Wn.prototype))return!1;if(t===n)return!0;var i=qr(n);return!!i&&t===i[0]}(Sn&&eo(new Sn(new ArrayBuffer(1)))!=I||En&&eo(new En)!=M||Cn&&eo(Cn.resolve())!=S||Ln&&eo(new Ln)!=C||Dn&&eo(new Dn)!=A)&&(eo=function(t){var e=$t.call(t),n=e==k?t.constructor:r,i=n?ko(n):r;if(i)switch(i){case Rn:return I;case On:return M;case Yn:return S;case Nn:return C;case Bn:return A}return e});var co=Ot?Na:rl;function ho(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)}function fo(t){return t==t&&!Ua(t)}function po(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Dt(n))}}function mo(t,e,n,i,o,a){return Ua(t)&&Ua(e)&&(a.set(e,t),ji(t,e,r,mo,a),a.delete(e)),t}function _o(t,e){return 1==e.length?t:Ti(t,Qi(e,0,-1))}function go(t,e){for(var n=t.length,i=wn(e.length,n),o=br(t);i--;){var a=e[i];t[i]=ao(a,n)?o[a]:r}return t}var yo,vo,xo=(yo=0,vo=0,function(t,e){var n=pa(),i=16-(n-vo);if(vo=n,i>0){if(++yo>=150)return t}else yo=0;return Ji(t,e)}),bo=fn||function(t,e){return se.setTimeout(t,e)},wo=Pn?function(t,e,n){var i=e+"";return Pn(t,"toString",{configurable:!0,enumerable:!1,value:Us(ro(i,So(no(i),n)))})}:Vs,Mo=wa((function(t){t=as(t);var e=[];return et.test(t)&&e.push(""),t.replace(nt,(function(t,n,i,r){e.push(i?r.replace(dt,"$1"):n||t)})),e}));function To(t){if("string"==typeof t||Xa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ko(t){if(null!=t){try{return Nt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function So(t,e){return Me(m,(function(n){var i="_."+n[0];e&n[1]&&!Ee(t,i)&&t.push(i)})),t.sort()}function Eo(t){if(t instanceof Wn)return t.clone();var e=new qn(t.__wrapped__,t.__chain__);return e.__actions__=br(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Co=Xi((function(t,e){return Fa(t)?di(t,yi(e,1,Fa,!0)):[]})),Lo=Xi((function(t,e){var n=Oo(e);return Fa(n)&&(n=r),Fa(t)?di(t,yi(e,1,Fa,!0),Zr(n,2)):[]})),Do=Xi((function(t,e){var n=Oo(e);return Fa(n)&&(n=r),Fa(t)?di(t,yi(e,1,Fa,!0),r,n):[]}));function Ao(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=null==n?0:ns(n);return r<0&&(r=bn(i+r,0)),Re(t,Zr(e,3),r)}function Po(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=i-1;return n!==r&&(o=ns(n),o=n<0?bn(i+o,0):wn(o,i-1)),Re(t,Zr(e,3),o,!0)}function Io(t){return t&&t.length?t[0]:r}var zo=Xi((function(t){var e=Le(t,dr);return e.length&&e[0]===t[0]?Li(e):[]})),Fo=Xi((function(t){var e=Oo(t),n=Le(t,dr);return e===Oo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Li(n,Zr(e,2)):[]})),Ro=Xi((function(t){var e=Oo(t),n=Le(t,dr);return e===Oo(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Li(n,r,e):[]}));function Oo(t){var e=t?t.length:0;return e?t[e-1]:r}var Yo=Xi(No);function No(t,e){return t&&t.length&&e&&e.length?qi(t,e):t}var Bo=Xi((function(t,e){e=yi(e,1);var n=t?t.length:0,i=ai(t,e);return Wi(t,Le(e,(function(t){return ao(t,n)?+t:t})).sort(yr)),i}));function jo(t){return t?kn.call(t):t}var Uo=Xi((function(t){return ar(yi(t,1,Fa,!0))})),$o=Xi((function(t){var e=Oo(t);return Fa(e)&&(e=r),ar(yi(t,1,Fa,!0),Zr(e,2))})),Ho=Xi((function(t){var e=Oo(t);return Fa(e)&&(e=r),ar(yi(t,1,Fa,!0),r,e)}));function Vo(t){if(!t||!t.length)return[];var e=0;return t=Se(t,(function(t){if(Fa(t))return e=bn(t.length,e),!0})),Ve(e,(function(e){return Le(t,je(e))}))}function qo(t,e){if(!t||!t.length)return[];var n=Vo(t);return null==e?n:Le(n,(function(t){return be(e,r,t)}))}var Wo=Xi((function(t,e){return Fa(t)?di(t,e):[]})),Go=Xi((function(t){return cr(Se(t,Fa))})),Zo=Xi((function(t){var e=Oo(t);return Fa(e)&&(e=r),cr(Se(t,Fa),Zr(e,2))})),Xo=Xi((function(t){var e=Oo(t);return Fa(e)&&(e=r),cr(Se(t,Fa),r,e)})),Ko=Xi(Vo),Jo=Xi((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,qo(t,n)}));function Qo(t){var e=Hn(t);return e.__chain__=!0,e}function ta(t,e){return e(t)}var ea=Xi((function(t){var e=(t=yi(t,1)).length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return ai(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Wn&&ao(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:ta,args:[o],thisArg:r}),new qn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)})),na=Mr((function(t,e,n){Bt.call(t,n)?++t[n]:t[n]=1})),ia=Dr(Ao),ra=Dr(Po);function oa(t,e){return(Pa(t)?Me:fi)(t,Zr(e,3))}function aa(t,e){return(Pa(t)?Te:pi)(t,Zr(e,3))}var sa=Mr((function(t,e,n){Bt.call(t,n)?t[n].push(e):t[n]=[e]})),la=Xi((function(t,e,n){var i=-1,o="function"==typeof e,a=lo(e),s=za(t)?kt(t.length):[];return fi(t,(function(t){var l=o?e:a&&null!=t?t[e]:r;s[++i]=l?be(l,t,n):Di(t,e,n)})),s})),ua=Mr((function(t,e,n){t[n]=e}));function ca(t,e){return(Pa(t)?Le:Yi)(t,Zr(e,3))}var ha=Mr((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));function da(t,e,n){var i=-1,o=ts(t),a=o.length,s=a-1;for(e=(n?so(t,e,n):e===r)?1:si(ns(e),0,a);++i<e;){var l=Gi(i,s),u=o[l];o[l]=o[i],o[i]=u}return o.length=e,o}var fa=Xi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&so(t,e[0],e[1])?e=[]:n>2&&so(e[0],e[1],e[2])&&(e=[e[0]]),$i(t,yi(e,1),[])})),pa=Ue||function(){return se.Date.now()};function ma(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,$r(t,c,r,r,r,r,e)}function _a(t,e){var n;if("function"!=typeof e)throw new It(a);return t=ns(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var ga=Xi((function(t,e,n){var i=1;if(n.length){var r=an(n,Gr(ga));i|=u}return $r(t,i,e,n,r)})),ya=Xi((function(t,e,n){var i=3;if(n.length){var r=an(n,Gr(ya));i|=u}return $r(e,i,t,n,r)}));function va(t,e,n){var i,o,s,l,u,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new It(a);function m(e){var n=i,a=o;return i=o=r,h=e,l=t.apply(a,n)}function _(t){return h=t,u=bo(y,e),d?m(t):l}function g(t){var n=t-c;return c===r||n>=e||n<0||f&&t-h>=s}function y(){var t=pa();if(g(t))return v(t);u=bo(y,function(t){var n=e-(t-c);return f?wn(n,s-(t-h)):n}(t))}function v(t){return u=r,p&&i?m(t):(i=o=r,l)}function x(){var t=pa(),n=g(t);if(i=arguments,o=this,c=t,n){if(u===r)return _(c);if(f)return u=bo(y,e),m(c)}return u===r&&(u=bo(y,e)),l}return e=rs(e)||0,Ua(n)&&(d=!!n.leading,s=(f="maxWait"in n)?bn(rs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),x.cancel=function(){u!==r&&_r(u),h=0,i=c=o=u=r},x.flush=function(){return u===r?l:v(pa())},x}var xa=Xi((function(t,e){return hi(t,1,e)})),ba=Xi((function(t,e,n){return hi(t,rs(e)||0,n)}));function wa(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new It(a);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a),a};return n.cache=new(wa.Cache||Xn),n}function Ma(t){if("function"!=typeof t)throw new It(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}wa.Cache=Xn;var Ta=Xi((function(t,e){var n=(e=1==e.length&&Pa(e[0])?Le(e[0],qe(Zr())):Le(yi(e,1),qe(Zr()))).length;return Xi((function(i){for(var r=-1,o=wn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return be(t,this,i)}))})),ka=Xi((function(t,e){var n=an(e,Gr(ka));return $r(t,u,r,e,n)})),Sa=Xi((function(t,e){var n=an(e,Gr(Sa));return $r(t,64,r,e,n)})),Ea=Xi((function(t,e){return $r(t,256,r,r,r,yi(e,1))}));function Ca(t,e){return t===e||t!=t&&e!=e}var La=Yr(Si),Da=Yr((function(t,e){return t>=e}));function Aa(t){return Fa(t)&&Bt.call(t,"callee")&&(!ue.call(t,"callee")||$t.call(t)==_)}var Pa=kt.isArray,Ia=fe?qe(fe):function(t){return $a(t)&&$t.call(t)==P};function za(t){return null!=t&&ja(t.length)&&!Na(t)}function Fa(t){return $a(t)&&za(t)}var Ra=gn||rl,Oa=pe?qe(pe):function(t){return $a(t)&&$t.call(t)==v};function Ya(t){return!!$a(t)&&($t.call(t)==x||"string"==typeof t.message&&"string"==typeof t.name)}function Na(t){var e=Ua(t)?$t.call(t):"";return e==b||e==w}function Ba(t){return"number"==typeof t&&t==ns(t)}function ja(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function Ua(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $a(t){return!!t&&"object"==typeof t}var Ha=me?qe(me):function(t){return $a(t)&&eo(t)==M};function Va(t){return"number"==typeof t||$a(t)&&$t.call(t)==T}function qa(t){if(!$a(t)||$t.call(t)!=k||nn(t))return!1;var e=oe(t);if(null===e)return!0;var n=Bt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Nt.call(n)==Ut}var Wa=_e?qe(_e):function(t){return Ua(t)&&$t.call(t)==E},Ga=ge?qe(ge):function(t){return $a(t)&&eo(t)==C};function Za(t){return"string"==typeof t||!Pa(t)&&$a(t)&&$t.call(t)==L}function Xa(t){return"symbol"==typeof t||$a(t)&&$t.call(t)==D}var Ka=ye?qe(ye):function(t){return $a(t)&&ja(t.length)&&!!te[$t.call(t)]},Ja=Yr(Oi),Qa=Yr((function(t,e){return t<=e}));function ts(t){if(!t)return[];if(za(t))return Za(t)?cn(t):br(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=eo(t);return(e==M?rn:e==C?sn:Cs)(t)}function es(t){return t?(t=rs(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ns(t){var e=es(t),n=e%1;return e==e?n?e-n:e:0}function is(t){return t?si(ns(t),0,p):0}function rs(t){if("number"==typeof t)return t;if(Xa(t))return f;if(Ua(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Ua(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ot,"");var n=gt.test(t);return n||vt.test(t)?re(t.slice(2),n?2:8):_t.test(t)?f:+t}function os(t){return wr(t,xs(t))}function as(t){return null==t?"":or(t)}var ss=Tr((function(t,e){if(zn||ho(e)||za(e))wr(e,vs(e),t);else for(var n in e)Bt.call(e,n)&&ni(t,n,e[n])})),ls=Tr((function(t,e){wr(e,xs(e),t)})),us=Tr((function(t,e,n,i){wr(e,xs(e),t,i)})),cs=Tr((function(t,e,n,i){wr(e,vs(e),t,i)})),hs=Xi((function(t,e){return ai(t,yi(e,1))})),ds=Xi((function(t){return t.push(r,ti),be(us,r,t)})),fs=Xi((function(t){return t.push(r,mo),be(ws,r,t)}));function ps(t,e,n){var i=null==t?r:Ti(t,e);return i===r?n:i}function ms(t,e){return null!=t&&io(t,e,Ci)}var _s=Ir((function(t,e,n){t[e]=n}),Us(Vs)),gs=Ir((function(t,e,n){Bt.call(t,e)?t[e].push(n):t[e]=[n]}),Zr),ys=Xi(Di);function vs(t){return za(t)?Qn(t):Fi(t)}function xs(t){return za(t)?Qn(t,!0):Ri(t)}var bs=Tr((function(t,e,n){ji(t,e,n)})),ws=Tr((function(t,e,n,i){ji(t,e,n,i)})),Ms=Xi((function(t,e){return null==t?{}:(e=Le(yi(e,1),To),Hi(t,di(Vr(t),e)))})),Ts=Xi((function(t,e){return null==t?{}:Hi(t,Le(yi(e,1),To))}));function ks(t,e){return null==t?{}:Vi(t,Vr(t),Zr(e))}var Ss=Ur(vs),Es=Ur(xs);function Cs(t){return t?We(t,vs(t)):[]}var Ls=Cr((function(t,e,n){return e=e.toLowerCase(),t+(n?Ds(e):e)}));function Ds(t){return Ys(as(t).toLowerCase())}function As(t){return(t=as(t))&&t.replace(bt,Je).replace(Wt,"")}var Ps=Cr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Is=Cr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),zs=Er("toLowerCase"),Fs=Cr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Rs=Cr((function(t,e,n){return t+(n?" ":"")+Ys(e)})),Os=Cr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ys=Er("toUpperCase");function Ns(t,e,n){return t=as(t),(e=n?r:e)===r?function(t){return Kt.test(t)}(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var Bs=Xi((function(t,e){try{return be(t,r,e)}catch(t){return Ya(t)?t:new Et(t)}})),js=Xi((function(t,e){return Me(yi(e,1),(function(e){e=To(e),t[e]=ga(t[e],t)})),t}));function Us(t){return function(){return t}}var $s=Ar(),Hs=Ar(!0);function Vs(t){return t}function qs(t){return zi("function"==typeof t?t:li(t,!0))}var Ws=Xi((function(t,e){return function(n){return Di(n,t,e)}})),Gs=Xi((function(t,e){return function(n){return Di(t,n,e)}}));function Zs(t,e,n){var i=vs(e),r=Mi(e,i);null!=n||Ua(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=Mi(e,vs(e)));var o=!(Ua(n)&&"chain"in n&&!n.chain),a=Na(t);return Me(r,(function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=br(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,De([this.value()],arguments))})})),t}function Xs(){}var Ks=Fr(Le),Js=Fr(ke),Qs=Fr(Ie);function tl(t){return lo(t)?je(To(t)):function(t){return function(e){return Ti(e,t)}}(t)}var el=Or(),nl=Or(!0);function il(){return[]}function rl(){return!1}var ol,al=zr((function(t,e){return t+e}),0),sl=Br("ceil"),ll=zr((function(t,e){return t/e}),1),ul=Br("floor"),cl=zr((function(t,e){return t*e}),1),hl=Br("round"),dl=zr((function(t,e){return t-e}),0);return Hn.after=function(t,e){if("function"!=typeof e)throw new It(a);return t=ns(t),function(){if(--t<1)return e.apply(this,arguments)}},Hn.ary=ma,Hn.assign=ss,Hn.assignIn=ls,Hn.assignInWith=us,Hn.assignWith=cs,Hn.at=hs,Hn.before=_a,Hn.bind=ga,Hn.bindAll=js,Hn.bindKey=ya,Hn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Pa(t)?t:[t]},Hn.chain=Qo,Hn.chunk=function(t,e,n){e=(n?so(t,e,n):e===r)?1:bn(ns(e),0);var i=t?t.length:0;if(!i||e<1)return[];for(var o=0,a=0,s=kt(pn(i/e));o<i;)s[a++]=Qi(t,o,o+=e);return s},Hn.compact=function(t){for(var e=-1,n=t?t.length:0,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Hn.concat=function(){for(var t=arguments.length,e=kt(t?t-1:0),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return t?De(Pa(n)?br(n):[n],yi(e,1)):[]},Hn.cond=function(t){var e=t?t.length:0,n=Zr();return t=e?Le(t,(function(t){if("function"!=typeof t[1])throw new It(a);return[n(t[0]),t[1]]})):[],Xi((function(n){for(var i=-1;++i<e;){var r=t[i];if(be(r[0],this,n))return be(r[1],this,n)}}))},Hn.conforms=function(t){return function(t){var e=vs(t);return function(n){return ui(n,t,e)}}(li(t,!0))},Hn.constant=Us,Hn.countBy=na,Hn.create=function(t,e){var n=ci(t);return e?oi(n,e):n},Hn.curry=function t(e,n,i){var o=$r(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Hn.curryRight=function t(e,n,i){var o=$r(e,16,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Hn.debounce=va,Hn.defaults=ds,Hn.defaultsDeep=fs,Hn.defer=xa,Hn.delay=ba,Hn.difference=Co,Hn.differenceBy=Lo,Hn.differenceWith=Do,Hn.drop=function(t,e,n){var i=t?t.length:0;return i?Qi(t,(e=n||e===r?1:ns(e))<0?0:e,i):[]},Hn.dropRight=function(t,e,n){var i=t?t.length:0;return i?Qi(t,0,(e=i-(e=n||e===r?1:ns(e)))<0?0:e):[]},Hn.dropRightWhile=function(t,e){return t&&t.length?lr(t,Zr(e,3),!0,!0):[]},Hn.dropWhile=function(t,e){return t&&t.length?lr(t,Zr(e,3),!0):[]},Hn.fill=function(t,e,n,i){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&so(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=ns(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:ns(i))<0&&(i+=o),i=n>i?0:is(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Hn.filter=function(t,e){return(Pa(t)?Se:gi)(t,Zr(e,3))},Hn.flatMap=function(t,e){return yi(ca(t,e),1)},Hn.flatMapDeep=function(t,e){return yi(ca(t,e),h)},Hn.flatMapDepth=function(t,e,n){return n=n===r?1:ns(n),yi(ca(t,e),n)},Hn.flatten=function(t){return t&&t.length?yi(t,1):[]},Hn.flattenDeep=function(t){return t&&t.length?yi(t,h):[]},Hn.flattenDepth=function(t,e){return t&&t.length?yi(t,e=e===r?1:ns(e)):[]},Hn.flip=function(t){return $r(t,512)},Hn.flow=$s,Hn.flowRight=Hs,Hn.fromPairs=function(t){for(var e=-1,n=t?t.length:0,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Hn.functions=function(t){return null==t?[]:Mi(t,vs(t))},Hn.functionsIn=function(t){return null==t?[]:Mi(t,xs(t))},Hn.groupBy=sa,Hn.initial=function(t){return t&&t.length?Qi(t,0,-1):[]},Hn.intersection=zo,Hn.intersectionBy=Fo,Hn.intersectionWith=Ro,Hn.invert=_s,Hn.invertBy=gs,Hn.invokeMap=la,Hn.iteratee=qs,Hn.keyBy=ua,Hn.keys=vs,Hn.keysIn=xs,Hn.map=ca,Hn.mapKeys=function(t,e){var n={};return e=Zr(e,3),bi(t,(function(t,i,r){n[e(t,i,r)]=t})),n},Hn.mapValues=function(t,e){var n={};return e=Zr(e,3),bi(t,(function(t,i,r){n[i]=e(t,i,r)})),n},Hn.matches=function(t){return Ni(li(t,!0))},Hn.matchesProperty=function(t,e){return Bi(t,li(e,!0))},Hn.memoize=wa,Hn.merge=bs,Hn.mergeWith=ws,Hn.method=Ws,Hn.methodOf=Gs,Hn.mixin=Zs,Hn.negate=Ma,Hn.nthArg=function(t){return t=ns(t),Xi((function(e){return Ui(e,t)}))},Hn.omit=Ms,Hn.omitBy=function(t,e){return ks(t,Ma(Zr(e)))},Hn.once=function(t){return _a(2,t)},Hn.orderBy=function(t,e,n,i){return null==t?[]:(Pa(e)||(e=null==e?[]:[e]),Pa(n=i?r:n)||(n=null==n?[]:[n]),$i(t,e,n))},Hn.over=Ks,Hn.overArgs=Ta,Hn.overEvery=Js,Hn.overSome=Qs,Hn.partial=ka,Hn.partialRight=Sa,Hn.partition=ha,Hn.pick=Ts,Hn.pickBy=ks,Hn.property=tl,Hn.propertyOf=function(t){return function(e){return null==t?r:Ti(t,e)}},Hn.pull=Yo,Hn.pullAll=No,Hn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,Zr(n,2)):t},Hn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?qi(t,e,r,n):t},Hn.pullAt=Bo,Hn.range=el,Hn.rangeRight=nl,Hn.rearg=Ea,Hn.reject=function(t,e){return(Pa(t)?Se:gi)(t,Ma(Zr(e,3)))},Hn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Zr(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return Wi(t,r),n},Hn.rest=function(t,e){if("function"!=typeof t)throw new It(a);return Xi(t,e=e===r?e:ns(e))},Hn.reverse=jo,Hn.sampleSize=da,Hn.set=function(t,e,n){return null==t?t:Ki(t,e,n)},Hn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Ki(t,e,n,i)},Hn.shuffle=function(t){return da(t,p)},Hn.slice=function(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&so(t,e,n)?(e=0,n=i):(e=null==e?0:ns(e),n=n===r?i:ns(n)),Qi(t,e,n)):[]},Hn.sortBy=fa,Hn.sortedUniq=function(t){return t&&t.length?ir(t):[]},Hn.sortedUniqBy=function(t,e){return t&&t.length?ir(t,Zr(e,2)):[]},Hn.split=function(t,e,n){return n&&"number"!=typeof n&&so(t,e,n)&&(e=n=r),(n=n===r?p:n>>>0)?(t=as(t))&&("string"==typeof e||null!=e&&!Wa(e))&&!(e=or(e))&&en(t)?mr(cn(t),0,n):t.split(e,n):[]},Hn.spread=function(t,e){if("function"!=typeof t)throw new It(a);return e=e===r?0:bn(ns(e),0),Xi((function(n){var i=n[e],r=mr(n,0,e);return i&&De(r,i),be(t,this,r)}))},Hn.tail=function(t){var e=t?t.length:0;return e?Qi(t,1,e):[]},Hn.take=function(t,e,n){return t&&t.length?Qi(t,0,(e=n||e===r?1:ns(e))<0?0:e):[]},Hn.takeRight=function(t,e,n){var i=t?t.length:0;return i?Qi(t,(e=i-(e=n||e===r?1:ns(e)))<0?0:e,i):[]},Hn.takeRightWhile=function(t,e){return t&&t.length?lr(t,Zr(e,3),!1,!0):[]},Hn.takeWhile=function(t,e){return t&&t.length?lr(t,Zr(e,3)):[]},Hn.tap=function(t,e){return e(t),t},Hn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new It(a);return Ua(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),va(t,e,{leading:i,maxWait:e,trailing:r})},Hn.thru=ta,Hn.toArray=ts,Hn.toPairs=Ss,Hn.toPairsIn=Es,Hn.toPath=function(t){return Pa(t)?Le(t,To):Xa(t)?[t]:br(Mo(t))},Hn.toPlainObject=os,Hn.transform=function(t,e,n){var i=Pa(t)||Ka(t);if(e=Zr(e,4),null==n)if(i||Ua(t)){var r=t.constructor;n=i?Pa(t)?new r:[]:Na(r)?ci(oe(t)):{}}else n={};return(i?Me:bi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Hn.unary=function(t){return ma(t,1)},Hn.union=Uo,Hn.unionBy=$o,Hn.unionWith=Ho,Hn.uniq=function(t){return t&&t.length?ar(t):[]},Hn.uniqBy=function(t,e){return t&&t.length?ar(t,Zr(e,2)):[]},Hn.uniqWith=function(t,e){return t&&t.length?ar(t,r,e):[]},Hn.unset=function(t,e){return null==t||function(t,e){t=_o(t,e=lo(e,t)?[e]:pr(e));var n=To(Oo(e));return!(null!=t&&Bt.call(t,n))||delete t[n]}(t,e)},Hn.unzip=Vo,Hn.unzipWith=qo,Hn.update=function(t,e,n){return null==t?t:sr(t,e,fr(n))},Hn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:sr(t,e,fr(n),i)},Hn.values=Cs,Hn.valuesIn=function(t){return null==t?[]:We(t,xs(t))},Hn.without=Wo,Hn.words=Ns,Hn.wrap=function(t,e){return ka(e=null==e?Vs:e,t)},Hn.xor=Go,Hn.xorBy=Zo,Hn.xorWith=Xo,Hn.zip=Ko,Hn.zipObject=function(t,e){return hr(t||[],e||[],ni)},Hn.zipObjectDeep=function(t,e){return hr(t||[],e||[],Ki)},Hn.zipWith=Jo,Hn.entries=Ss,Hn.entriesIn=Es,Hn.extend=ls,Hn.extendWith=us,Zs(Hn,Hn),Hn.add=al,Hn.attempt=Bs,Hn.camelCase=Ls,Hn.capitalize=Ds,Hn.ceil=sl,Hn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=rs(n))==n?n:0),e!==r&&(e=(e=rs(e))==e?e:0),si(rs(t),e,n)},Hn.clone=function(t){return li(t,!1,!0)},Hn.cloneDeep=function(t){return li(t,!0,!0)},Hn.cloneDeepWith=function(t,e){return li(t,!0,!0,e)},Hn.cloneWith=function(t,e){return li(t,!1,!0,e)},Hn.conformsTo=function(t,e){return null==e||ui(t,e,vs(e))},Hn.deburr=As,Hn.defaultTo=function(t,e){return null==t||t!=t?e:t},Hn.divide=ll,Hn.endsWith=function(t,e,n){t=as(t),e=or(e);var i=t.length,o=n=n===r?i:si(ns(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Hn.eq=Ca,Hn.escape=function(t){return(t=as(t))&&Z.test(t)?t.replace(W,Qe):t},Hn.escapeRegExp=function(t){return(t=as(t))&&rt.test(t)?t.replace(it,"\\$&"):t},Hn.every=function(t,e,n){var i=Pa(t)?ke:mi;return n&&so(t,e,n)&&(e=r),i(t,Zr(e,3))},Hn.find=ia,Hn.findIndex=Ao,Hn.findKey=function(t,e){return Fe(t,Zr(e,3),bi)},Hn.findLast=ra,Hn.findLastIndex=Po,Hn.findLastKey=function(t,e){return Fe(t,Zr(e,3),wi)},Hn.floor=ul,Hn.forEach=oa,Hn.forEachRight=aa,Hn.forIn=function(t,e){return null==t?t:vi(t,Zr(e,3),xs)},Hn.forInRight=function(t,e){return null==t?t:xi(t,Zr(e,3),xs)},Hn.forOwn=function(t,e){return t&&bi(t,Zr(e,3))},Hn.forOwnRight=function(t,e){return t&&wi(t,Zr(e,3))},Hn.get=ps,Hn.gt=La,Hn.gte=Da,Hn.has=function(t,e){return null!=t&&io(t,e,Ei)},Hn.hasIn=ms,Hn.head=Io,Hn.identity=Vs,Hn.includes=function(t,e,n,i){t=za(t)?t:Cs(t),n=n&&!i?ns(n):0;var r=t.length;return n<0&&(n=bn(r+n,0)),Za(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Oe(t,e,n)>-1},Hn.indexOf=function(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=null==n?0:ns(n);return r<0&&(r=bn(i+r,0)),Oe(t,e,r)},Hn.inRange=function(t,e,n){return e=es(e),n===r?(n=e,e=0):n=es(n),function(t,e,n){return t>=wn(e,n)&&t<bn(e,n)}(t=rs(t),e,n)},Hn.invoke=ys,Hn.isArguments=Aa,Hn.isArray=Pa,Hn.isArrayBuffer=Ia,Hn.isArrayLike=za,Hn.isArrayLikeObject=Fa,Hn.isBoolean=function(t){return!0===t||!1===t||$a(t)&&$t.call(t)==y},Hn.isBuffer=Ra,Hn.isDate=Oa,Hn.isElement=function(t){return!!t&&1===t.nodeType&&$a(t)&&!qa(t)},Hn.isEmpty=function(t){if(za(t)&&(Pa(t)||"string"==typeof t||"function"==typeof t.splice||Ra(t)||Aa(t)))return!t.length;var e=eo(t);if(e==M||e==C)return!t.size;if(zn||ho(t))return!xn(t).length;for(var n in t)if(Bt.call(t,n))return!1;return!0},Hn.isEqual=function(t,e){return Ai(t,e)},Hn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Ai(t,e,n):!!i},Hn.isError=Ya,Hn.isFinite=function(t){return"number"==typeof t&&yn(t)},Hn.isFunction=Na,Hn.isInteger=Ba,Hn.isLength=ja,Hn.isMap=Ha,Hn.isMatch=function(t,e){return t===e||Pi(t,e,Kr(e))},Hn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Pi(t,e,Kr(e),n)},Hn.isNaN=function(t){return Va(t)&&t!=+t},Hn.isNative=function(t){if(co(t))throw new Et("This method is not supported with core-js. Try https://github.com/es-shims.");return Ii(t)},Hn.isNil=function(t){return null==t},Hn.isNull=function(t){return null===t},Hn.isNumber=Va,Hn.isObject=Ua,Hn.isObjectLike=$a,Hn.isPlainObject=qa,Hn.isRegExp=Wa,Hn.isSafeInteger=function(t){return Ba(t)&&t>=-9007199254740991&&t<=d},Hn.isSet=Ga,Hn.isString=Za,Hn.isSymbol=Xa,Hn.isTypedArray=Ka,Hn.isUndefined=function(t){return t===r},Hn.isWeakMap=function(t){return $a(t)&&eo(t)==A},Hn.isWeakSet=function(t){return $a(t)&&"[object WeakSet]"==$t.call(t)},Hn.join=function(t,e){return t?vn.call(t,e):""},Hn.kebabCase=Ps,Hn.last=Oo,Hn.lastIndexOf=function(t,e,n){var i=t?t.length:0;if(!i)return-1;var o=i;if(n!==r&&(o=((o=ns(n))<0?bn(i+o,0):wn(o,i-1))+1),e!=e)return Re(t,Ne,o-1,!0);for(;o--;)if(t[o]===e)return o;return-1},Hn.lowerCase=Is,Hn.lowerFirst=zs,Hn.lt=Ja,Hn.lte=Qa,Hn.max=function(t){return t&&t.length?_i(t,Vs,Si):r},Hn.maxBy=function(t,e){return t&&t.length?_i(t,Zr(e,2),Si):r},Hn.mean=function(t){return Be(t,Vs)},Hn.meanBy=function(t,e){return Be(t,Zr(e,2))},Hn.min=function(t){return t&&t.length?_i(t,Vs,Oi):r},Hn.minBy=function(t,e){return t&&t.length?_i(t,Zr(e,2),Oi):r},Hn.stubArray=il,Hn.stubFalse=rl,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=cl,Hn.nth=function(t,e){return t&&t.length?Ui(t,ns(e)):r},Hn.noConflict=function(){return se._===this&&(se._=Ht),this},Hn.noop=Xs,Hn.now=pa,Hn.pad=function(t,e,n){t=as(t);var i=(e=ns(e))?un(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Rr(mn(r),n)+t+Rr(pn(r),n)},Hn.padEnd=function(t,e,n){t=as(t);var i=(e=ns(e))?un(t):0;return e&&i<e?t+Rr(e-i,n):t},Hn.padStart=function(t,e,n){t=as(t);var i=(e=ns(e))?un(t):0;return e&&i<e?Rr(e-i,n)+t:t},Hn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),t=as(t).replace(ot,""),Mn(t,e||(mt.test(t)?16:10))},Hn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&so(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=es(t),e===r?(e=t,t=0):e=es(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=Tn();return wn(t+o*(e-t+ie("1e-"+((o+"").length-1))),e)}return Gi(t,e)},Hn.reduce=function(t,e,n){var i=Pa(t)?Ae:$e,r=arguments.length<3;return i(t,Zr(e,4),n,r,fi)},Hn.reduceRight=function(t,e,n){var i=Pa(t)?Pe:$e,r=arguments.length<3;return i(t,Zr(e,4),n,r,pi)},Hn.repeat=function(t,e,n){return e=(n?so(t,e,n):e===r)?1:ns(e),Zi(as(t),e)},Hn.replace=function(){var t=arguments,e=as(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Hn.result=function(t,e,n){var i=-1,o=(e=lo(e,t)?[e]:pr(e)).length;for(o||(t=r,o=1);++i<o;){var a=null==t?r:t[To(e[i])];a===r&&(i=o,a=n),t=Na(a)?a.call(t):a}return t},Hn.round=hl,Hn.runInContext=t,Hn.sample=function(t){var e=za(t)?t:Cs(t),n=e.length;return n>0?e[Gi(0,n-1)]:r},Hn.size=function(t){if(null==t)return 0;if(za(t))return Za(t)?un(t):t.length;var e=eo(t);return e==M||e==C?t.size:Fi(t).length},Hn.snakeCase=Fs,Hn.some=function(t,e,n){var i=Pa(t)?Ie:tr;return n&&so(t,e,n)&&(e=r),i(t,Zr(e,3))},Hn.sortedIndex=function(t,e){return er(t,e)},Hn.sortedIndexBy=function(t,e,n){return nr(t,e,Zr(n,2))},Hn.sortedIndexOf=function(t,e){var n=t?t.length:0;if(n){var i=er(t,e);if(i<n&&Ca(t[i],e))return i}return-1},Hn.sortedLastIndex=function(t,e){return er(t,e,!0)},Hn.sortedLastIndexBy=function(t,e,n){return nr(t,e,Zr(n,2),!0)},Hn.sortedLastIndexOf=function(t,e){if(t&&t.length){var n=er(t,e,!0)-1;if(Ca(t[n],e))return n}return-1},Hn.startCase=Rs,Hn.startsWith=function(t,e,n){return t=as(t),n=si(ns(n),0,t.length),e=or(e),t.slice(n,n+e.length)==e},Hn.subtract=dl,Hn.sum=function(t){return t&&t.length?He(t,Vs):0},Hn.sumBy=function(t,e){return t&&t.length?He(t,Zr(e,2)):0},Hn.template=function(t,e,n){var i=Hn.templateSettings;n&&so(t,e,n)&&(e=r),t=as(t),e=us({},e,i,ti);var o,a,s=us({},e.imports,i.imports,ti),l=vs(s),u=We(s,l),c=0,h=e.interpolate||wt,d="__p += '",f=At((e.escape||wt).source+"|"+h.source+"|"+(h===J?ft:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Qt+"]")+"\n";t.replace(f,(function(e,n,i,r,s,l){return i||(i=r),d+=t.slice(c,l).replace(Mt,tn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=l+e.length,e})),d+="';\n";var m=e.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace($,""):d).replace(H,"$1").replace(V,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var _=Bs((function(){return Ct(l,p+"return "+d).apply(r,u)}));if(_.source=d,Ya(_))throw _;return _},Hn.times=function(t,e){if((t=ns(t))<1||t>d)return[];var n=p,i=wn(t,p);e=Zr(e),t-=p;for(var r=Ve(i,e);++n<t;)e(n);return r},Hn.toFinite=es,Hn.toInteger=ns,Hn.toLength=is,Hn.toLower=function(t){return as(t).toLowerCase()},Hn.toNumber=rs,Hn.toSafeInteger=function(t){return si(ns(t),-9007199254740991,d)},Hn.toString=as,Hn.toUpper=function(t){return as(t).toUpperCase()},Hn.trim=function(t,e,n){if((t=as(t))&&(n||e===r))return t.replace(ot,"");if(!t||!(e=or(e)))return t;var i=cn(t),o=cn(e);return mr(i,Ze(i,o),Xe(i,o)+1).join("")},Hn.trimEnd=function(t,e,n){if((t=as(t))&&(n||e===r))return t.replace(st,"");if(!t||!(e=or(e)))return t;var i=cn(t);return mr(i,0,Xe(i,cn(e))+1).join("")},Hn.trimStart=function(t,e,n){if((t=as(t))&&(n||e===r))return t.replace(at,"");if(!t||!(e=or(e)))return t;var i=cn(t);return mr(i,Ze(i,cn(e))).join("")},Hn.truncate=function(t,e){var n=30,i="...";if(Ua(e)){var o="separator"in e?e.separator:o;n="length"in e?ns(e.length):n,i="omission"in e?or(e.omission):i}var a=(t=as(t)).length;if(en(t)){var s=cn(t);a=s.length}if(n>=a)return t;var l=n-un(i);if(l<1)return i;var u=s?mr(s,0,l).join(""):t.slice(0,l);if(o===r)return u+i;if(s&&(l+=u.length-l),Wa(o)){if(t.slice(l).search(o)){var c,h=u;for(o.global||(o=At(o.source,as(pt.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var d=c.index;u=u.slice(0,d===r?l:d)}}else if(t.indexOf(or(o),l)!=l){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+i},Hn.unescape=function(t){return(t=as(t))&&G.test(t)?t.replace(q,hn):t},Hn.uniqueId=function(t){var e=++jt;return as(t)+e},Hn.upperCase=Os,Hn.upperFirst=Ys,Hn.each=oa,Hn.eachRight=aa,Hn.first=Io,Zs(Hn,(ol={},bi(Hn,(function(t,e){Bt.call(Hn.prototype,e)||(ol[e]=t)})),ol),{chain:!1}),Hn.VERSION="4.15.0",Me(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Hn[t].placeholder=Hn})),Me(["drop","take"],(function(t,e){Wn.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new Wn(this);n=n===r?1:bn(ns(n),0);var o=this.clone();return i?o.__takeCount__=wn(n,o.__takeCount__):o.__views__.push({size:wn(n,p),type:t+(o.__dir__<0?"Right":"")}),o},Wn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Me(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Wn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Zr(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),Me(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Wn.prototype[t]=function(){return this[n](1).value()[0]}})),Me(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Wn.prototype[t]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(Vs)},Wn.prototype.find=function(t){return this.filter(t).head()},Wn.prototype.findLast=function(t){return this.reverse().find(t)},Wn.prototype.invokeMap=Xi((function(t,e){return"function"==typeof t?new Wn(this):this.map((function(n){return Di(n,t,e)}))})),Wn.prototype.reject=function(t){return this.filter(Ma(Zr(t)))},Wn.prototype.slice=function(t,e){t=ns(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Wn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=ns(e))<0?n.dropRight(-e):n.take(e-t)),n)},Wn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Wn.prototype.toArray=function(){return this.take(p)},bi(Wn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Hn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Hn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof Wn,u=s[0],c=l||Pa(e),h=function(t){var e=o.apply(Hn,De([t],s));return i&&d?e[0]:e};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,m=l&&!f;if(!a&&c){e=m?e:new Wn(this);var _=t.apply(e,s);return _.__actions__.push({func:ta,args:[h],thisArg:r}),new qn(_,d)}return p&&m?t.apply(this,s):(_=this.thru(h),p?i?_.value()[0]:_.value():_)})})),Me(["pop","push","shift","sort","splice","unshift"],(function(t){var e=zt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Hn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(Pa(r)?r:[],t)}return this[n]((function(n){return e.apply(Pa(n)?n:[],t)}))}})),bi(Wn.prototype,(function(t,e){var n=Hn[e];if(n){var i=n.name+"";(Fn[i]||(Fn[i]=[])).push({name:e,func:n})}})),Fn[Pr(r,2).name]=[{name:"wrapper",func:r}],Wn.prototype.clone=function(){var t=new Wn(this.__wrapped__);return t.__actions__=br(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=br(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=br(this.__views__),t},Wn.prototype.reverse=function(){if(this.__filtered__){var t=new Wn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Wn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Pa(t),i=e<0,r=n?t.length:0,a=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=bn(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),s=a.start,l=a.end,u=l-s,c=i?l:s-1,h=this.__iteratees__,d=h.length,f=0,p=wn(u,this.__takeCount__);if(!n||r<o||r==u&&p==u)return ur(t,this.__actions__);var m=[];t:for(;u--&&f<p;){for(var _=-1,g=t[c+=e];++_<d;){var y=h[_],v=y.iteratee,x=y.type,b=v(g);if(2==x)g=b;else if(!b){if(1==x)continue t;break t}}m[f++]=g}return m},Hn.prototype.at=ea,Hn.prototype.chain=function(){return Qo(this)},Hn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===r&&(this.__values__=ts(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Hn.prototype.plant=function(t){for(var e,n=this;n instanceof Vn;){var i=Eo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Hn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Wn){var e=t;return this.__actions__.length&&(e=new Wn(this)),(e=e.reverse()).__actions__.push({func:ta,args:[jo],thisArg:r}),new qn(e,this.__chain__)}return this.thru(jo)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return ur(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,ae&&(Hn.prototype[ae]=function(){return this}),Hn}();se._=dn,(i=function(){return dn}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},4042:function(t,e,n){t.exports=function(){"use strict";var t,e,i;function r(n,r){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",a={};t(a),i=r(a),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=r;else t=r}return r(0,(function(t){function e(t){var e={exports:{}};return t(e,e.exports),e.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var s=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,l=a(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))r.call(n,c)&&(l[c]=n[c]);if(i){s=i(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(l[s[h]]=n[s[h]])}}return l},l=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},u=e((function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}})),c=e((function(t,e){var i=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),l=r[n];n<o;l=r[++n])_(l)||!b(l)?s+=" "+l:s+=" "+a(l);return s},e.deprecate=function(t,i){if(v(n.g.process))return function(){return e.deprecate(t,i).apply(this,arguments)};if(!0===process.noDeprecation)return t;var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(i);process.traceDeprecation?console.trace(i):console.error(i),r=!0}return t.apply(this,arguments)}};var r,o={};function a(t,n){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&e._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=s),h(i,t,i.depth)}function s(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function c(t,e){return t}function h(t,n,i){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=h(t,r,i)),r}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):_(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),M(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(T(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(x(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(M(n))return d(n)}var u,c="",b=!1,k=["{","}"];return p(n)&&(b=!0,k=["[","]"]),T(n)&&(c=" [Function"+(n.name?": "+n.name:"")+"]"),x(n)&&(c=" "+RegExp.prototype.toString.call(n)),w(n)&&(c=" "+Date.prototype.toUTCString.call(n)),M(n)&&(c=" "+d(n)),0!==a.length||b&&0!=n.length?i<0?x(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=b?function(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)L(e,String(a))?o.push(f(t,e,n,i,String(a),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(f(t,e,n,i,r,!0))})),o}(t,n,i,s,a):a.map((function(e){return f(t,n,i,s,e,b)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(u,c,k)):k[0]+c+k[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,i,r,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),L(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(l.value)<0?(s=_(n)?h(t,l.value,null):h(t,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function _(t){return null===t}function g(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function x(t){return b(t)&&"[object RegExp]"===k(t)}function b(t){return"object"==typeof t&&null!==t}function w(t){return b(t)&&"[object Date]"===k(t)}function M(t){return b(t)&&("[object Error]"===k(t)||t instanceof Error)}function T(t){return"function"==typeof t}function k(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(r)&&(r=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(r)){var n=process.pid;o[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else o[t]=function(){};return o[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=m,e.isNull=_,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=x,e.isObject=b,e.isDate=w,e.isError=M,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=l;var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=u,e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}})),h=e((function(t){function e(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0}function i(t){return n.g.Buffer&&"function"==typeof n.g.Buffer.isBuffer?n.g.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var r=Object.prototype.hasOwnProperty,o=Array.prototype.slice,a="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function u(t){return!i(t)&&"function"==typeof n.g.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var h=t.exports=g,d=/\s*function\s+([^\(\s]*)\s*/;function f(t){if(c.isFunction(t)){if(a)return t.name;var e=t.toString().match(d);return e&&e[1]}}function p(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(a||!c.isFunction(t))return c.inspect(t);var e=f(t);return"[Function"+(e?": "+e:"")+"]"}function _(t,e,n,i,r){throw new h.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function g(t,e){t||_(t,!0,e,"==",h.ok)}function y(t,n,r,a){if(t===n)return!0;if(i(t)&&i(n))return 0===e(t,n);if(c.isDate(t)&&c.isDate(n))return t.getTime()===n.getTime();if(c.isRegExp(t)&&c.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if(null!==t&&"object"==typeof t||null!==n&&"object"==typeof n){if(u(t)&&u(n)&&l(t)===l(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===e(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(i(t)!==i(n))return!1;var s=(a=a||{actual:[],expected:[]}).actual.indexOf(t);return-1!==s&&s===a.expected.indexOf(n)||(a.actual.push(t),a.expected.push(n),function(t,e,n,i){if(null==t||null==e)return!1;if(c.isPrimitive(t)||c.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=v(t),a=v(e);if(r&&!a||!r&&a)return!1;if(r)return y(t=o.call(t),e=o.call(e),n);var s,l,u=w(t),h=w(e);if(u.length!==h.length)return!1;for(u.sort(),h.sort(),l=u.length-1;l>=0;l--)if(u[l]!==h[l])return!1;for(l=u.length-1;l>=0;l--)if(!y(t[s=u[l]],e[s],n,i))return!1;return!0}(t,n,r,a))}return r?t===n:t==n}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function x(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function b(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&_(r,n,"Missing expected exception"+i);var o="string"==typeof i,a=!t&&r&&!n;if((!t&&c.isError(r)&&o&&x(r,n)||a)&&_(r,n,"Got unwanted exception"+i),t&&r&&n&&!x(r,n)||!t&&r)throw r}h.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return p(m(t.actual),128)+" "+t.operator+" "+p(m(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||_;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,r=f(e),o=i.indexOf("\n"+r);if(o>=0){var a=i.indexOf("\n",o+1);i=i.substring(a+1)}this.stack=i}}},c.inherits(h.AssertionError,Error),h.fail=_,h.ok=g,h.equal=function(t,e,n){t!=e&&_(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&_(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){y(t,e,!1)||_(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){y(t,e,!0)||_(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){y(t,e,!1)&&_(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,i){y(e,n,!0)&&_(e,n,i,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&_(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&_(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){b(!0,t,e,n)},h.doesNotThrow=function(t,e,n){b(!1,t,e,n)},h.ifError=function(t){if(t)throw t},h.strict=s((function t(e,n){e||_(e,!0,n,"==",t)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var w=Object.keys||function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e}})),d="2.3.1",f=p;function p(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}p.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},p.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},p.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},p.prototype.solveCurveX=function(t,e){var n,i,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},p.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var m=_;function _(t,e){this.x=t,this.y=e}_.prototype={clone:function(){return new _(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.x+n*(this.x-e.x)-i*(this.y-e.y),o=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},_.convert=function(t){return t instanceof _?t:Array.isArray(t)?new _(t[0],t[1]):t};var g="undefined"!=typeof self?self:{};function y(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!y(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!y(t[n],e[n]))return!1;return!0}return t===e}const v=Math.pow(2,53)-1,x=Math.PI/180,b=180/Math.PI;function w(t){return t*x}const M=[[0,0],[1,0],[1,1],[0,1]];function T(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function k(t,e,n,i){const r=new f(t,e,n,i);return function(t){return r.solve(t)}}const S=k(.25,.1,.25,1);function E(t,e,n){return Math.min(n,Math.max(e,t))}function C(t,e,n){const i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function L(t,e,n){if(!t.length)return n(null,[]);let i=t.length;const r=new Array(t.length);let o=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(o=t),r[a]=e,0==--i&&n(o,r)}))}))}function D(t){const e=[];for(const n in t)e.push(t[n]);return e}function A(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}let P=1;function I(){return P++}function z(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function F(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function R(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function O(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function Y(t,e){return-1!==t.indexOf(e,t.length-e.length)}function N(t,e,n){const i={};for(const r in t)i[r]=e.call(n||this,t[r],r,t);return i}function B(t,e,n){const i={};for(const r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function j(t){return Array.isArray(t)?t.map(j):"object"==typeof t&&t?N(t,j):t}const U={};function $(t){U[t]||("undefined"!=typeof console&&console.warn(t),U[t]=!0)}function H(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function V(t){let e=0;for(let n,i,r=0,o=t.length,a=o-1;r<o;a=r++)n=t[r],i=t[a],e+=(i.x-n.x)*(n.y+i.y);return e}function q(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function W(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,i,r)=>{const o=i||r;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let G,Z,X,K=null;function J(t){if(null==K){const e=t.navigator?t.navigator.userAgent:null;K=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return K}function Q(t){try{const e=g[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}const tt={now:()=>void 0!==X?X:g.performance.now(),setNow(t){X=t},restoreNow(){X=void 0},frame(t){const e=g.requestAnimationFrame(t);return{cancel:()=>g.cancelAnimationFrame(e)}},getImageData(t,e=0){const n=g.document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(G||(G=g.document.createElement("a")),G.href=t,G.href),get devicePixelRatio(){return g.devicePixelRatio},get prefersReducedMotion(){return!!g.matchMedia&&(null==Z&&(Z=g.matchMedia("(prefers-reduced-motion: reduce)")),Z.matches)}};let et;const nt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==et){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{et=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):t}catch(e){et=t}}return et},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},it={supported:!1,testSupport:function(t){!at&&ot&&(st?lt(t):rt=t)}};let rt,ot,at=!1,st=!1;function lt(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,ot),t.isContextLost())return;it.supported=!0}catch(t){}t.deleteTexture(e),at=!0}g.document&&(ot=g.document.createElement("img"),ot.onload=function(){rt&&lt(rt),rt=null,st=!0},ot.onerror=function(){at=!0,rt=null},ot.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ut="01";const ct="NO_ACCESS_TOKEN";function ht(t){return 0===t.indexOf("mapbox:")}function dt(t){return nt.API_URL_REGEX.test(t)}const ft=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function pt(t){const e=t.match(ft);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function mt(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}function _t(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse((n=e[1],decodeURIComponent(g.atob(n).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join(""))))}catch(t){return null}var n}class gt{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const e=_t(nt.ACCESS_TOKEN);let n="";return n=e&&e.u?(i=e.u,g.btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e)))))):nt.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${n}`:`mapbox.eventData:${n}`;var i}fetchEventData(){const t=Q("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{const t=g.localStorage.getItem(e);t&&(this.eventData=JSON.parse(t));const i=g.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){$("Unable to read from LocalStorage")}}saveEventData(){const t=Q("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{g.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&g.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){$("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,n,i){if(!nt.EVENTS_URL)return;const r=pt(nt.EVENTS_URL);r.params.push(`access_token=${i||nt.ACCESS_TOKEN||""}`);const o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:d,skuId:ut,userId:this.anonId},a=e?A(o,e):o,s={url:mt(r),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=jt(s,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const yt=new class extends gt{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){nt.EVENTS_URL&&nt.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>ht(t)||dt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=_t(nt.ACCESS_TOKEN),n=e?e.u:nt.ACCESS_TOKEN;let i=n!==this.eventData.tokenU;R(this.anonId)||(this.anonId=z(),i=!0);const r=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(r),n=(r-this.eventData.lastSuccess)/864e5;i=i||n>=1||n<-1||t.getDate()!==e.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(r,{"enabled.telemetry":!1},(t=>{t||(this.eventData.lastSuccess=r,this.eventData.tokenU=n)}),t)}},vt=yt.postTurnstileEvent.bind(yt),xt=new class extends gt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,i){this.skuToken=e,this.errorCb=i,nt.EVENTS_URL&&(n||nt.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(ct)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),R(this.anonId)||(this.anonId=z()),this.postEvent(n,{skuToken:this.skuToken},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},bt=xt.postMapLoadEvent.bind(xt),wt=new class extends gt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,i){if(!nt.API_URL||!nt.SESSION_PATH)return;const r=pt(nt.API_URL+nt.SESSION_PATH);r.params.push(`sku=${e||""}`),r.params.push(`access_token=${i||nt.ACCESS_TOKEN||""}`);const o={url:mt(r),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Ut(o,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}getSessionAPI(t,e,n,i){this.skuToken=e,this.errorCb=i,nt.SESSION_PATH&&nt.API_URL&&(n||nt.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(ct)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},Mt=wt.getSessionAPI.bind(wt),Tt=new Set;const kt="mapbox-tiles";let St=500,Et=50;let Ct,Lt;function Dt(){g.caches&&!Ct&&(Ct=g.caches.open(kt))}function At(t,e,n){if(Dt(),!Ct)return;const i={status:e.status,statusText:e.statusText,headers:new g.Headers};e.headers.forEach(((t,e)=>i.headers.set(e,t)));const r=W(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&i.headers.set("Expires",new Date(n+1e3*r["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===Lt)try{new Response(new ReadableStream),Lt=!0}catch(t){Lt=!1}Lt?e(t.body):t.blob().then(e)}(e,(e=>{const n=new g.Response(e,i);Dt(),Ct&&Ct.then((e=>e.put(Pt(t.url),n))).catch((t=>$(t.message)))})))}function Pt(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}function It(t,e){if(Dt(),!Ct)return e(null);const n=Pt(t.url);Ct.then((t=>{t.match(n).then((i=>{const r=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=W(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),r&&t.put(n,i.clone()),e(null,i,r)})).catch(e)})).catch(e)}let zt=1/0;const Ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ft);class Rt extends Error{constructor(t,e,n){401===e&&dt(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ot=q()?()=>self.worker&&self.worker.referrer:()=>("blob:"===g.location.protocol?g.parent:g).location.href;function Yt(t,e){const n=new g.AbortController,i=new g.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Ot(),signal:n.signal});let r=!1,o=!1;const a=(s=i.url).indexOf("sku=")>0&&dt(s);var s;"json"===t.type&&i.headers.set("Accept","application/json");const l=(n,r,s)=>{if(o)return;if(n&&"SecurityError"!==n.message&&$(n),r&&s)return u(r);const l=Date.now();g.fetch(i).then((n=>{if(n.ok){const t=a?n.clone():null;return u(n,t,l)}return e(new Rt(n.statusText,n.status,t.url))})).catch((t=>{20!==t.code&&e(new Error(t.message))}))},u=(n,a,s)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{o||(a&&s&&At(i,a,s),r=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((t=>{o||e(new Error(t.message))}))};return a?It(i,l):l(null,null),{cancel:()=>{o=!0,r||n.abort()}}}const Nt=function(t,e){if(n=t.url,!(/^file:/.test(n)||/^file:/.test(Ot())&&!/^\w+:/.test(n))){if(g.fetch&&g.Request&&g.AbortController&&g.Request.prototype.hasOwnProperty("signal"))return Yt(t,e);if(q()&&self.worker&&self.worker.actor){const n=!0;return self.worker.actor.send("getResource",t,e,void 0,n)}}var n;return function(t,e){const n=new g.XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new Rt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:()=>n.abort()}}(t,e)},Bt=function(t,e){return Nt(A(t,{type:"arrayBuffer"}),e)},jt=function(t,e){return Nt(A(t,{method:"POST"}),e)},Ut=function(t,e){return Nt(A(t,{method:"GET"}),e)};function $t(t){const e=g.document.createElement("a");return e.href=t,e.protocol===g.document.location.protocol&&e.host===g.document.location.host}const Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Vt,qt;Vt=[],qt=0;const Wt=function(t,e){if(it.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),qt>=nt.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Vt.push(n),n}qt++;let n=!1;const i=()=>{if(!n)for(n=!0,qt--,h(qt>=0);Vt.length&&qt<nt.MAX_PARALLEL_IMAGE_REQUESTS;){const t=Vt.shift(),{requestParameters:e,callback:n,cancelled:i}=t;i||(t.cancel=Wt(e,n).cancel)}},r=Bt(t,((t,n,r,o)=>{i(),t?e(t):n&&(g.createImageBitmap?function(t,e){const n=new g.Blob([new Uint8Array(t)],{type:"image/png"});g.createImageBitmap(n).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,((t,n)=>e(t,n,r,o))):function(t,e){const n=new g.Image,i=g.URL;n.onload=()=>{e(null,n),i.revokeObjectURL(n.src),n.onload=null,g.requestAnimationFrame((()=>{n.src=Ht}))},n.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new g.Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?i.createObjectURL(r):Ht}(n,((t,n)=>e(t,n,r,o))))}));return{cancel:()=>{r.cancel(),i()}}};function Gt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Zt(t,e,n){if(n&&n[t]){const i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}class Xt{constructor(t,e={}){A(this,e),this.type=t}}class Kt extends Xt{constructor(t,e={}){super("error",A({error:t},e))}}class Jt{on(t,e){return this._listeners=this._listeners||{},Gt(t,e,this._listeners),this}off(t,e){return Zt(t,e,this._listeners),Zt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Gt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Xt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const e of i)Zt(n,e,this._oneTimeListeners),e.call(this,t);const r=this._eventedParent;r&&(A(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof Kt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Qt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class te{constructor(t,e,n,i){this.message=(t?`${t}: `:"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)}}function ee(t){const e=t.key,n=t.value;return n?[new te(e,n,"constants have been deprecated as of v8")]:[]}function ne(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}function ie(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function re(t){if(Array.isArray(t))return t.map(re);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=re(t[n]);return e}return ie(t)}class oe extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class ae{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new ae(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const se={kind:"null"},le={kind:"number"},ue={kind:"string"},ce={kind:"boolean"},he={kind:"color"},de={kind:"object"},fe={kind:"value"},pe={kind:"collator"},me={kind:"formatted"},_e={kind:"resolvedImage"};function ge(t,e){return{kind:"array",itemType:t,N:e}}function ye(t){if("array"===t.kind){const e=ye(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const ve=[se,le,ue,ce,he,me,de,ge(fe),_e];function xe(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!xe(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of ve)if(!xe(t,e))return null}return`Expected ${ye(t)} but found ${ye(e)} instead.`}function be(t,e){return e.some((e=>e.kind===t.kind))}function we(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Me=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?i(parseFloat(t)/100*255):i(parseInt(t))}function a(t){return"%"===t[t.length-1]?r(parseFloat(t)/100):r(parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in n)return n[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=r.indexOf("("),u=r.indexOf(")");if(-1!==l&&u+1===r.length){var c=r.substr(0,l),h=r.substr(l+1,u-(l+1)).split(","),d=1;switch(c){case"rgba":if(4!==h.length)return null;d=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),d];case"hsla":if(4!==h.length)return null;d=a(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,p=a(h[1]),m=a(h[2]),_=m<=.5?m*(p+1):m+p-m*p,g=2*m-_;return[i(255*s(g,_,f+1/3)),i(255*s(g,_,f)),i(255*s(g,_,f-1/3)),d];default:return null}}return null}}catch(t){}}));class Te{constructor(t,e,n,i=1){this.r=t,this.g=e,this.b=n,this.a=i}static parse(t){if(!t)return;if(t instanceof Te)return t;if("string"!=typeof t)return;const e=Me.parseCSSColor(t);return e?new Te(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,i]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${i})`}toArray(){const{r:t,g:e,b:n,a:i}=this;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*n/i,i]}}Te.black=new Te(0,0,0,1),Te.white=new Te(1,1,1,1),Te.transparent=new Te(0,0,0,0),Te.red=new Te(1,0,0,1),Te.blue=new Te(0,0,1,1);class ke{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Se{constructor(t,e,n,i,r){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r}}class Ee{constructor(t){this.sections=t}static fromString(t){return new Ee([new Se(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Ee?t:Ee.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class Ce{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Ce({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Le(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[t,e,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function De(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Te)return!0;if(t instanceof ke)return!0;if(t instanceof Ee)return!0;if(t instanceof Ce)return!0;if(Array.isArray(t)){for(const e of t)if(!De(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!De(t[e]))return!1;return!0}return!1}function Ae(t){if(null===t)return se;if("string"==typeof t)return ue;if("boolean"==typeof t)return ce;if("number"==typeof t)return le;if(t instanceof Te)return he;if(t instanceof ke)return pe;if(t instanceof Ee)return me;if(t instanceof Ce)return _e;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=Ae(e);if(n){if(n===t)continue;n=fe;break}n=t}return ge(n||fe,e)}return h("object"==typeof t),de}function Pe(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Te||t instanceof Ee||t instanceof Ce?t.toString():JSON.stringify(t)}class Ie{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!De(t[1]))return e.error("invalid value");const n=t[1];let i=Ae(n);const r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new Ie(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Te?["rgba"].concat(this.value.toArray()):this.value instanceof Ee?this.value.serialize():(h(null===this.value||"string"==typeof this.value||"number"==typeof this.value||"boolean"==typeof this.value),this.value)}}class ze{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Fe={string:ue,number:le,boolean:ce,object:de};class Re{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,i=1;const r=t[0];if("array"===r){let r,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in Fe)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=Fe[n],i++}else r=fe;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],i++}n=ge(r,o)}else h(Fe[r],r),n=Fe[r];const o=[];for(;i<t.length;i++){const n=e.parse(t[i],i,fe);if(!n)return null;o.push(n)}return new Re(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!xe(this.type,Ae(n)))return n;if(e===this.args.length-1)throw new ze(`Expected value to be of type ${ye(this.type)}, but found ${ye(Ae(n))} instead.`)}return h(!1),null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((t=>t.serialize())))}}class Oe{constructor(t){this.type=me,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const i=[];let r=!1;for(let n=1;n<=t.length-1;++n){const o=t[n];if(r&&"object"==typeof o&&!Array.isArray(o)){r=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,le),!t))return null;let n=null;if(o["text-font"]&&(n=e.parse(o["text-font"],1,ge(ue)),!n))return null;let a=null;if(o["text-color"]&&(a=e.parse(o["text-color"],1,he),!a))return null;const s=i[i.length-1];s.scale=t,s.font=n,s.textColor=a}else{const o=e.parse(t[n],1,fe);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:o,scale:null,font:null,textColor:null})}}return new Oe(i)}evaluate(t){return new Ee(this.sections.map((e=>{const n=e.content.evaluate(t);return Ae(n)===_e?new Se("",n,null,null,null):new Se(Pe(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Ye{constructor(t){this.type=_e,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ue);return n?new Ye(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=Ce.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ne={"to-boolean":ce,"to-color":he,"to-number":le,"to-string":ue};class Be{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(h(Ne[n],n),("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const i=Ne[n],r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],n,fe);if(!i)return null;r.push(i)}return new Be(i,r)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const i of this.args){if(e=i.evaluate(t),n=null,e instanceof Te)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Le(e[0],e[1],e[2],e[3]),!n))return new Te(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ze(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const i=Number(e);if(!isNaN(i))return i}throw new ze(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Ee.fromString(Pe(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Ce.fromString(Pe(this.args[0].evaluate(t))):Pe(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Oe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ye(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const je=["Unknown","Point","LineString","Polygon"];class Ue{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?je[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Te.parse(t)),e}}class $e{constructor(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],i=$e.definitions[n];if(!i)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[i,o]of a){s=new pn(e.registry,e.path,null,e.scope);const a=[];let l=!1;for(let e=1;e<t.length;e++){const n=t[e],r=Array.isArray(i)?i[e-1]:i.type,o=s.parse(n,1+a.length,r);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(i)&&i.length!==a.length)s.error(`Expected ${i.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){const e=Array.isArray(i)?i[t]:i.type,n=a[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new $e(n,r,o,a)}}if(h(!s||s.errors.length>0),1===a.length)e.errors.push(...s.errors);else{const n=(a.length?a:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(ye).join(", ")})`:`(${ye(e.type)}...)`;var e})).join(" | "),i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],1+i.length);if(!r)return null;i.push(ye(r.type))}e.error(`Expected arguments of type ${n}, but found (${i.join(", ")}) instead.`)}return null}static register(t,e){h(!$e.definitions),$e.definitions=e;for(const n in e)t[n]=$e}}class He{constructor(t,e,n){this.type=pe,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ce);if(!i)return null;const r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ce);if(!r)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,ue),!o)?null:new He(i,r,o)}evaluate(t){return new ke(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Ve=8192;function qe(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function We(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ge(t,e){const n=(180+t[0])/360,i=(o=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360),r=Math.pow(2,e.z);var o;return[Math.round(n*r*Ve),Math.round(i*r*Ve)]}function Ze(t,e,n){const i=t[0]-e[0],r=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return i*a-o*r==0&&i*o<=0&&r*a<=0}function Xe(t,e){let n=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(Ze(t,s[e],s[e+1]))return!1;i=t,r=s[e],o=s[e+1],r[1]>i[1]!=o[1]>i[1]&&i[0]<(o[0]-r[0])*(i[1]-r[1])/(o[1]-r[1])+r[0]&&(n=!n)}}var i,r,o;return n}function Ke(t,e){for(let n=0;n<e.length;n++)if(Xe(t,e[n]))return!0;return!1}function Je(t,e,n,i){const r=t[0]-n[0],o=t[1]-n[1],a=e[0]-n[0],s=e[1]-n[1],l=i[0]-n[0],u=i[1]-n[1],c=r*u-l*o,h=a*u-l*s;return c>0&&h<0||c<0&&h>0}function Qe(t,e,n,i){const r=[e[0]-t[0],e[1]-t[1]];return 0!=(o=[i[0]-n[0],i[1]-n[1]],a=r,o[0]*a[1]-o[1]*a[0])&&!(!Je(t,e,n,i)||!Je(n,i,t,e));var o,a}function tn(t,e,n){for(const i of n)for(let n=0;n<i.length-1;++n)if(Qe(t,e,i[n],i[n+1]))return!0;return!1}function en(t,e){for(let n=0;n<t.length;++n)if(!Xe(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(tn(t[n],t[n+1],e))return!1;return!0}function nn(t,e){for(let n=0;n<e.length;n++)if(en(t,e[n]))return!0;return!1}function rn(t,e,n){const i=[];for(let r=0;r<t.length;r++){const o=[];for(let i=0;i<t[r].length;i++){const a=Ge(t[r][i],n);qe(e,a),o.push(a)}i.push(o)}return i}function on(t,e,n){const i=[];for(let r=0;r<t.length;r++){const o=rn(t[r],e,n);i.push(o)}return i}function an(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){const e=.5*i;let r=t[0]-n[0]>e?-i:n[0]-t[0]>e?i:0;0===r&&(r=t[0]-n[2]>e?-i:n[2]-t[0]>e?i:0),t[0]+=r}qe(e,t)}function sn(t,e,n,i){const r=Math.pow(2,i.z)*Ve,o=[i.x*Ve,i.y*Ve],a=[];for(const i of t)for(const t of i){const i=[t.x+o[0],t.y+o[1]];an(i,e,n,r),a.push(i)}return a}function ln(t,e,n,i){const r=Math.pow(2,i.z)*Ve,o=[i.x*Ve,i.y*Ve],a=[];for(const n of t){const t=[];for(const i of n){const n=[i.x+o[0],i.y+o[1]];qe(e,n),t.push(n)}a.push(t)}if(e[2]-e[0]<=r/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const i of t)an(i,e,n,r)}var s;return a}class un{constructor(t,e){this.type=ce,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(De(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new un(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new un(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new un(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=rn(e.coordinates,i,r),a=sn(t.geometry(),n,i,r);if(!We(n,i))return!1;for(const t of a)if(!Xe(t,o))return!1}if("MultiPolygon"===e.type){const o=on(e.coordinates,i,r),a=sn(t.geometry(),n,i,r);if(!We(n,i))return!1;for(const t of a)if(!Ke(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=rn(e.coordinates,i,r),a=ln(t.geometry(),n,i,r);if(!We(n,i))return!1;for(const t of a)if(!en(t,o))return!1}if("MultiPolygon"===e.type){const o=on(e.coordinates,i,r),a=ln(t.geometry(),n,i,r);if(!We(n,i))return!1;for(const t of a)if(!nn(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function cn(t){if(t instanceof $e){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof un)return!1;let e=!0;return t.eachChild((t=>{e&&!cn(t)&&(e=!1)})),e}function hn(t){if(t instanceof $e&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!hn(t)&&(e=!1)})),e}function dn(t,e){if(t instanceof $e&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!dn(t,e)&&(n=!1)})),n}class fn{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new fn(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class pn{constructor(t,e=[],n,i=new ae,r=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=i,this.errors=r,this.expectedType=n}parse(t,e,n,i,r={}){return e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)}_parse(t,e){function n(t,e,n){return"assert"===n?new Re(e,[t]):"coerce"===n?new Be(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[i];if(r){let i=r.parse(t,this);if(!i)return null;if(this.expectedType){const t=this.expectedType,r=i.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(t,r))return null}else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"assert")}if(!(i instanceof Ie)&&"resolvedImage"!==i.type.kind&&mn(i)){const t=new Ue;try{i=new Ie(i.type,i.evaluate(t))}catch(t){return this.error(t.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new pn(this.registry,i,e||null,r,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new oe(n,t))}checkSubtype(t,e){const n=xe(t,e);return n&&this.error(n),n}}function mn(t){if(t instanceof fn)return mn(t.boundExpression);if(t instanceof $e&&"error"===t.name)return!1;if(t instanceof He)return!1;if(t instanceof un)return!1;const e=t instanceof Be||t instanceof Re;let n=!0;return t.eachChild((t=>{n=e?n&&mn(t):n&&t instanceof Ie})),!!n&&cn(t)&&dn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function _n(t,e){const n=t.length-1;let i,r,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),i=t[s],r=t[s+1],i<=e){if(s===n||e<r)return s;o=s+1}else{if(!(i>e))throw new ze("Input is not a number.");a=s-1}return 0}class gn{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,le);if(!n)return null;const i=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let n=1;n<t.length;n+=2){const o=1===n?-1/0:t[n],a=t[n+1],s=n,l=n+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(i.length&&i[i.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const u=e.parse(a,l,r);if(!u)return null;r=r||u.type,i.push([o,u])}return new gn(r,n,i)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[_n(e,i)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function yn(t,e,n){return t*(1-n)+e*n}var vn=Object.freeze({__proto__:null,number:yn,color:function(t,e,n){return new Te(yn(t.r,e.r,n),yn(t.g,e.g,n),yn(t.b,e.b,n),yn(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,i)=>yn(t,e[i],n)))}});const xn=.95047,bn=1.08883,wn=4/29,Mn=6/29,Tn=3*Mn*Mn,kn=Math.PI/180,Sn=180/Math.PI;function En(t){return t>.008856451679035631?Math.pow(t,1/3):t/Tn+wn}function Cn(t){return t>Mn?t*t*t:Tn*(t-wn)}function Ln(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Dn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function An(t){const e=Dn(t.r),n=Dn(t.g),i=Dn(t.b),r=En((.4124564*e+.3575761*n+.1804375*i)/xn),o=En((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-En((.0193339*e+.119192*n+.9503041*i)/bn)),alpha:t.a}}function Pn(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*Cn(e),n=xn*Cn(n),i=bn*Cn(i),new Te(Ln(3.2404542*n-1.5371385*e-.4985314*i),Ln(-.969266*n+1.8760108*e+.041556*i),Ln(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function In(t,e,n){const i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}const zn={forward:An,reverse:Pn,interpolate:function(t,e,n){return{l:yn(t.l,e.l,n),a:yn(t.a,e.a,n),b:yn(t.b,e.b,n),alpha:yn(t.alpha,e.alpha,n)}}},Fn={forward:function(t){const{l:e,a:n,b:i}=An(t),r=Math.atan2(i,n)*Sn;return{h:r<0?r+360:r,c:Math.sqrt(n*n+i*i),l:e,alpha:t.a}},reverse:function(t){const e=t.h*kn,n=t.c;return Pn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:In(t.h,e.h,n),c:yn(t.c,e.c,n),l:yn(t.l,e.l,n),alpha:yn(t.alpha,e.alpha,n)}}};var Rn=Object.freeze({__proto__:null,lab:zn,hcl:Fn});class On{constructor(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,i){let r=0;if("exponential"===t.name)r=Yn(e,t.base,n,i);else if("linear"===t.name)r=Yn(e,1,n,i);else if("cubic-bezier"===t.name){const o=t.controlPoints;r=new f(o[0],o[1],o[2],o[3]).solve(Yn(e,1,n,i))}return r}static parse(t,e){let[n,i,r,...o]=t;if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const t=i[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:t}}else{if("cubic-bezier"!==i[0])return e.error(`Unknown interpolation type ${String(i[0])}`,1,0);{const t=i.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,le),!r)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=he:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const n=o[t],i=o[t+1],r=t+3,l=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const u=e.parse(i,l,s);if(!u)return null;s=s||u.type,a.push([n,u])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new On(s,n,i,r,a):e.error(`Type ${ye(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);const o=_n(e,i),a=e[o],s=e[o+1],l=On.interpolationFactor(this.interpolation,i,a,s),u=n[o].evaluate(t),c=n[o+1].evaluate(t);return"interpolate"===this.operator?vn[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?Fn.reverse(Fn.interpolate(Fn.forward(u),Fn.forward(c),l)):zn.reverse(zn.interpolate(zn.forward(u),zn.forward(c),l))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function Yn(t,e,n,i){const r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class Nn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const i=e.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const i of t.slice(1)){const t=e.parse(i,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,r.push(t)}h(n);const o=i&&r.some((t=>xe(i,t.type)));return new Nn(o?fe:n,r)}evaluate(t){let e,n=null,i=0;for(const r of this.args)if(i++,n=r.evaluate(t),n&&n instanceof Ce&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Bn{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}const i=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return i?new Bn(n,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}class jn{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,le),i=e.parse(t[2],2,ge(e.expectedType||fe));if(!n||!i)return null;const r=i.type;return new jn(r.itemType,n,i)}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ze(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new ze(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new ze(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Un{constructor(t,e){this.type=ce,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,fe),i=e.parse(t[2],2,fe);return n&&i?be(n.type,[ce,ue,le,se,fe])?new Un(n,i):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!we(e,["boolean","string","number","null"]))throw new ze(`Expected first argument to be of type boolean, string, number or null, but found ${ye(Ae(e))} instead.`);if(!we(n,["string","array"]))throw new ze(`Expected second argument to be of type array or string, but found ${ye(Ae(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class $n{constructor(t,e,n){this.type=le,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,fe),i=e.parse(t[2],2,fe);if(!n||!i)return null;if(!be(n.type,[ce,ue,le,se,fe]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,le);return r?new $n(n,i,r):null}return new $n(n,i)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!we(e,["boolean","string","number","null"]))throw new ze(`Expected first argument to be of type boolean, string, number or null, but found ${ye(Ae(e))} instead.`);if(!we(n,["string","array"]))throw new ze(`Expected second argument to be of type array or string, but found ${ye(Ae(n))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(t);return n.indexOf(e,i)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Hn{constructor(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r={},o=[];for(let a=2;a<t.length-1;a+=2){let s=t[a];const l=t[a+1];Array.isArray(s)||(s=[s]);const u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return u.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,Ae(t)))return null}else n=Ae(t);if(void 0!==r[String(t)])return u.error("Branch labels must be unique.");r[String(t)]=o.length}const c=e.parse(l,a,i);if(!c)return null;i=i||c.type,o.push(c)}const a=e.parse(t[1],1,fe);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,i);return s?(h(n&&i),"value"!==a.type.kind&&e.concat(1).checkSubtype(n,a.type)?null:new Hn(n,i,a,r,o,s)):null}evaluate(t){const e=this.input.evaluate(t);return(Ae(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],i={};for(const t of e){const e=i[this.cases[t]];void 0===e?(i[this.cases[t]]=n.length,n.push([this.cases[t],[t]])):n[e][1].push(t)}const r=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,i]of n)1===i.length?t.push(r(i[0])):t.push(i.map(r)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class Vn{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i=[];for(let r=1;r<t.length-1;r+=2){const o=e.parse(t[r],r,ce);if(!o)return null;const a=e.parse(t[r+1],r+1,n);if(!a)return null;i.push([o,a]),n=n||a.type}const r=e.parse(t[t.length-1],t.length-1,n);return r?(h(n),new Vn(n,i,r)):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class qn{constructor(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,fe),i=e.parse(t[2],2,le);if(!n||!i)return null;if(!be(n.type,[ge(fe),ue,fe]))return e.error(`Expected first argument to be of type array or string, but found ${ye(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,le);return r?new qn(n.type,n,i,r):null}return new qn(n.type,n,i)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!we(e,["string","array"]))throw new ze(`Expected first argument to be of type array or string, but found ${ye(Ae(e))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(t);return e.slice(n,i)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Wn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Gn(t,e,n,i){return 0===i.compare(e,n)}function Zn(t,e,n){const i="=="!==t&&"!="!==t;return class r{constructor(t,e,n){this.type=ce,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,fe);if(!o)return null;if(!Wn(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${ye(o.type)}'.`);let a=e.parse(t[2],2,fe);if(!a)return null;if(!Wn(n,a.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${ye(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${ye(o.type)}' and '${ye(a.type)}'.`);i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Re(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Re(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,pe),!s)return null}return new r(o,a,s)}evaluate(r){const o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const e=Ae(o),n=Ae(a);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new ze(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const t=Ae(o),n=Ae(a);if("string"!==t.kind||"string"!==n.kind)return e(r,o,a)}return this.collator?n(r,o,a,this.collator.evaluate(r)):e(r,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const Xn=Zn("==",(function(t,e,n){return e===n}),Gn),Kn=Zn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!Gn(0,e,n,i)})),Jn=Zn("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),Qn=Zn(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),ti=Zn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),ei=Zn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0}));class ni{constructor(t,e,n,i,r){this.type=ue,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,le);if(!n)return null;const i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=e.parse(i.locale,1,ue),!r))return null;let o=null;if(i.currency&&(o=e.parse(i.currency,1,ue),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=e.parse(i["min-fraction-digits"],1,le),!a))return null;let s=null;return i["max-fraction-digits"]&&(s=e.parse(i["max-fraction-digits"],1,le),!s)?null:new ni(n,r,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class ii{constructor(t){this.type=le,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${ye(n.type)} instead.`):new ii(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ze(`Expected value to be of type string or array, but found ${ye(Ae(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const ri={"==":Xn,"!=":Kn,">":Qn,"<":Jn,">=":ei,"<=":ti,array:Re,at:jn,boolean:Re,case:Vn,coalesce:Nn,collator:He,format:Oe,image:Ye,in:Un,"index-of":$n,interpolate:On,"interpolate-hcl":On,"interpolate-lab":On,length:ii,let:Bn,literal:Ie,match:Hn,number:Re,"number-format":ni,object:Re,slice:qn,step:gn,string:Re,"to-boolean":Be,"to-color":Be,"to-number":Be,"to-string":Be,var:fn,within:un};function oi(t,[e,n,i,r]){e=e.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);const o=r?r.evaluate(t):1,a=Le(e,n,i,o);if(a)throw new ze(a);return new Te(e/255*o,n/255*o,i/255*o,o)}function ai(t,e){return t in e}function si(t,e){const n=e[t];return void 0===n?null:n}function li(t){return{type:t}}function ui(t){return{result:"success",value:t}}function ci(t){return{result:"error",value:t}}function hi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function di(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function fi(t){return!!t.expression&&t.expression.interpolated}function pi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function mi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function _i(t){return t}function gi(t,e){const n="color"===e.type,i=t.stops&&"object"==typeof t.stops[0][0],r=i||void 0!==t.property,o=i||!r,a=t.type||(fi(e)?"exponential":"interval");if(n&&((t=ne({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Te.parse(t[1])]))),t.default?t.default=Te.parse(t.default):t.default=Te.parse(e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Rn[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,l,u;if("exponential"===a)s=bi;else if("interval"===a)s=xi;else if("categorical"===a){s=vi,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];u=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=wi}if(i){const n={},i=[];for(let e=0;e<t.stops.length;e++){const r=t.stops[e],o=r[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},i.push(o)),n[o].stops.push([r[0].value,r[1]])}const r=[];for(const t of i)r.push([n[t].zoom,gi(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:On.interpolationFactor.bind(void 0,o),zoomStops:r.map((t=>t[0])),evaluate:({zoom:n},i)=>bi({stops:r,base:t.base},e,n).evaluate(n,i)}}if(o){const n="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:On.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:n})=>s(t,e,n,l,u)}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[t.property]:void 0;return void 0===r?yi(t.default,e.default):s(t,e,r,l,u)}}}function yi(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function vi(t,e,n,i,r){return yi(typeof n===r?i[n]:void 0,t.default,e.default)}function xi(t,e,n){if("number"!==pi(n))return yi(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const r=_n(t.stops.map((t=>t[0])),n);return t.stops[r][1]}function bi(t,e,n){const i=void 0!==t.base?t.base:1;if("number"!==pi(n))return yi(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const o=_n(t.stops.map((t=>t[0])),n),a=function(t,e,n,i){const r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let u=vn[e.type]||_i;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Rn[t.colorSpace];u=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==n)return u(e,n,a)}}:u(s,l,a)}function wi(t,e,n){return"color"===e.type?n=Te.parse(n):"formatted"===e.type?n=Ee.fromString(n.toString()):"resolvedImage"===e.type?n=Ce.fromString(n.toString()):pi(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),yi(n,t.default,e.default)}$e.register(ri,{error:[{kind:"error"},[ue],(t,[e])=>{throw new ze(e.evaluate(t))}],typeof:[ue,[fe],(t,[e])=>ye(Ae(e.evaluate(t)))],"to-rgba":[ge(le,4),[he],(t,[e])=>e.evaluate(t).toArray()],rgb:[he,[le,le,le],oi],rgba:[he,[le,le,le,le],oi],has:{type:ce,overloads:[[[ue],(t,[e])=>ai(e.evaluate(t),t.properties())],[[ue,de],(t,[e,n])=>ai(e.evaluate(t),n.evaluate(t))]]},get:{type:fe,overloads:[[[ue],(t,[e])=>si(e.evaluate(t),t.properties())],[[ue,de],(t,[e,n])=>si(e.evaluate(t),n.evaluate(t))]]},"feature-state":[fe,[ue],(t,[e])=>si(e.evaluate(t),t.featureState||{})],properties:[de,[],t=>t.properties()],"geometry-type":[ue,[],t=>t.geometryType()],id:[fe,[],t=>t.id()],zoom:[le,[],t=>t.globals.zoom],"heatmap-density":[le,[],t=>t.globals.heatmapDensity||0],"line-progress":[le,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[le,[],t=>t.globals.skyRadialProgress||0],accumulated:[fe,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[le,li(le),(t,e)=>{let n=0;for(const i of e)n+=i.evaluate(t);return n}],"*":[le,li(le),(t,e)=>{let n=1;for(const i of e)n*=i.evaluate(t);return n}],"-":{type:le,overloads:[[[le,le],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[le],(t,[e])=>-e.evaluate(t)]]},"/":[le,[le,le],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[le,[le,le],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[le,[],()=>Math.LN2],pi:[le,[],()=>Math.PI],e:[le,[],()=>Math.E],"^":[le,[le,le],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[le,[le],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[le,[le],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[le,[le],(t,[e])=>Math.log(e.evaluate(t))],log2:[le,[le],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[le,[le],(t,[e])=>Math.sin(e.evaluate(t))],cos:[le,[le],(t,[e])=>Math.cos(e.evaluate(t))],tan:[le,[le],(t,[e])=>Math.tan(e.evaluate(t))],asin:[le,[le],(t,[e])=>Math.asin(e.evaluate(t))],acos:[le,[le],(t,[e])=>Math.acos(e.evaluate(t))],atan:[le,[le],(t,[e])=>Math.atan(e.evaluate(t))],min:[le,li(le),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[le,li(le),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[le,[le],(t,[e])=>Math.abs(e.evaluate(t))],round:[le,[le],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[le,[le],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[le,[le],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[ce,[ue,fe],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[ce,[fe],(t,[e])=>t.id()===e.value],"filter-type-==":[ce,[ue],(t,[e])=>t.geometryType()===e.value],"filter-<":[ce,[ue,fe],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<r}],"filter-id-<":[ce,[fe],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<i}],"filter->":[ce,[ue,fe],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>r}],"filter-id->":[ce,[fe],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>i}],"filter-<=":[ce,[ue,fe],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[ce,[fe],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<=i}],"filter->=":[ce,[ue,fe],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[ce,[fe],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>=i}],"filter-has":[ce,[fe],(t,[e])=>e.value in t.properties()],"filter-has-id":[ce,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ce,[ge(ue)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[ce,[ge(fe)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[ce,[ue,ge(fe)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[ce,[ue,ge(fe)],(t,[e,n])=>function(t,e,n,i){for(;n<=i;){const r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:ce,overloads:[[[ce,ce],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[li(ce),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:ce,overloads:[[[ce,ce],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[li(ce),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[ce,[ce],(t,[e])=>!e.evaluate(t)],"is-supported-script":[ce,[ue],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[ue,[ue],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[ue,[ue],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[ue,li(fe),(t,e)=>e.map((e=>Pe(e.evaluate(t)))).join("")],"resolved-locale":[ue,[pe],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Mi{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Ue,this._defaultValue=e?function(t){return"color"===t.type&&mi(t.default)?new Te(0,0,0,0):"color"===t.type?Te.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,i,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new ze(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Ti(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ri}function ki(t,e){const n=new pn(ri,[],e?function(t){const e={color:he,string:ue,number:le,enum:ue,boolean:ce,formatted:me,resolvedImage:_e};return"array"===t.type?ge(e[t.value]||fe,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?ui(new Mi(i,e)):(h(n.errors.length>0),ci(n.errors))}class Si{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!hn(e.expression)}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)}evaluate(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)}}class Ei{constructor(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!hn(e.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)}evaluate(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)}interpolationFactor(t,e,n){return this.interpolationType?On.interpolationFactor(this.interpolationType,t,e,n):0}}function Ci(t,e){if("error"===(t=ki(t,e)).result)return t;const n=t.value.expression,i=cn(n);if(!i&&!hi(e))return ci([new oe("","data expressions not supported")]);const r=dn(n,["zoom"]);if(!r&&!di(e))return ci([new oe("","zoom expressions not supported")]);const o=Di(n);if(!o&&!r)return ci([new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof oe)return ci([o]);if(o instanceof On&&!fi(e))return ci([new oe("",'"interpolate" expressions cannot be used with this property')]);if(!o)return ui(new Si(i?"constant":"source",t.value));const a=o instanceof On?o.interpolation:void 0;return ui(new Ei(i?"camera":"composite",t.value,o.labels,a))}class Li{constructor(t,e){this._parameters=t,this._specification=e,ne(this,gi(this._parameters,this._specification))}static deserialize(t){return new Li(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Di(t){let e=null;if(t instanceof Bn)e=Di(t.result);else if(t instanceof Nn){for(const n of t.args)if(e=Di(n),e)break}else(t instanceof gn||t instanceof On)&&t.input instanceof $e&&"zoom"===t.input.name&&(e=t);return e instanceof oe||t.eachChild((t=>{const n=Di(t);n instanceof oe?e=n:!e&&n?e=new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new oe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Ai(t){const e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=pi(n);if("object"!==l)return[new te(e,n,`object expected, ${l} found`)];for(const t in n){const l=t.split(".")[0],u=i[l]||i["*"];let c;if(r[l])c=r[l];else if(i[l])c=ar;else if(r["*"])c=r["*"];else{if(!i["*"]){s.push(new te(e,n[t],`unknown property "${t}"`));continue}c=ar}s=s.concat(c({key:(e?`${e}.`:e)+t,value:n[t],valueSpec:u,style:o,styleSpec:a,object:n,objectKey:t},n))}for(const t in i)r[t]||i[t].required&&void 0===i[t].default&&void 0===n[t]&&s.push(new te(e,n,`missing required property "${t}"`));return s}function Pi(t){const e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||ar;if("array"!==pi(e))return[new te(o,e,`array expected, ${pi(e)} found`)];if(n.length&&e.length!==n.length)return[new te(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new te(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};r.$version<7&&(s.function=n.function),"object"===pi(n.value)&&(s=n.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(a({array:e,arrayIndex:t,value:e[t],valueSpec:s,style:i,styleSpec:r,key:`${o}[${t}]`}));return l}function Ii(t){const e=t.key,n=t.value,i=t.valueSpec;let r=pi(n);if("number"===r&&n!=n&&(r="NaN"),"number"!==r)return[new te(e,n,`number expected, ${r} found`)];if("minimum"in i){let r=i.minimum;if("array"===pi(i.minimum)){const e=t.arrayIndex;r=i.minimum[e]}if(n<r)return[new te(e,n,`${n} is less than the minimum value ${r}`)]}if("maximum"in i){let r=i.maximum;if("array"===pi(i.maximum)){const e=t.arrayIndex;r=i.maximum[e]}if(n>r)return[new te(e,n,`${n} is greater than the maximum value ${r}`)]}return[]}function zi(t){const e=t.valueSpec,n=ie(t.value.type);let i,r,o,a={};const s="categorical"!==n&&void 0===t.value.property,l=!s,u="array"===pi(t.value.stops)&&"array"===pi(t.value.stops[0])&&"object"===pi(t.value.stops[0][0]),c=Ai({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new te(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const i=t.value;return e=e.concat(Pi({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===pi(i)&&0===i.length&&e.push(new te(t.key,i,"array must have at least one stop")),e},default:function(t){return ar({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&c.push(new te(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||c.push(new te(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!fi(t.valueSpec)&&c.push(new te(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!hi(t.valueSpec)?c.push(new te(t.key,t.value,"property functions not supported")):s&&!di(t.valueSpec)&&c.push(new te(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!u||void 0!==t.value.property||c.push(new te(t.key,t.value,'"property" property is required')),c;function h(t){let n=[];const i=t.value,s=t.key;if("array"!==pi(i))return[new te(s,i,`array expected, ${pi(i)} found`)];if(2!==i.length)return[new te(s,i,`array length 2 expected, length ${i.length} found`)];if(u){if("object"!==pi(i[0]))return[new te(s,i,`object expected, ${pi(i[0])} found`)];if(void 0===i[0].zoom)return[new te(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new te(s,i,"object stop key must have value")];if(o&&o>ie(i[0].zoom))return[new te(s,i[0].zoom,"stop zoom values must appear in ascending order")];ie(i[0].zoom)!==o&&(o=ie(i[0].zoom),r=void 0,a={}),n=n.concat(Ai({key:`${s}[0]`,value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Ii,value:d}}))}else n=n.concat(d({key:`${s}[0]`,value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return Ti(re(i[1]))?n.concat([new te(`${s}[1]`,i[1],"expressions are not allowed in function stops.")]):n.concat(ar({key:`${s}[1]`,value:i[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,o){const s=pi(t.value),l=ie(t.value),u=null!==t.value?t.value:o;if(i){if(s!==i)return[new te(t.key,u,`${s} stop domain type must match previous stop domain type ${i}`)]}else i=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new te(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let i=`number expected, ${s} found`;return hi(e)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new te(t.key,u,i)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==r&&l<r?[new te(t.key,u,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in a?[new te(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new te(t.key,u,`integer expected, found ${l}`)]}}function Fi(t){const e=("property"===t.expressionContext?Ci:ki)(re(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new te(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new te(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!hn(n))return[new te(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!hn(n))return[new te(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!dn(n,["zoom","feature-state"]))return[new te(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!cn(n))return[new te(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ri(t){const e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(ie(n))&&r.push(new te(e,n,`expected one of [${i.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(i.values).indexOf(ie(n))&&r.push(new te(e,n,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(n)} found`)),r}function Oi(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Oi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Yi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ni(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Oi(t)||(t=Ui(t));const e=ki(t,Yi);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,n,i)=>e.value.evaluate(t,n,{},i),needGeometry:ji(t)}}function Bi(t,e){return t<e?-1:t>e?1:0}function ji(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(ji(t[e]))return!0;return!1}function Ui(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?$i(t[1],t[2],"=="):"!="===e?qi($i(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?$i(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Ui))):"all"===e?["all"].concat(t.slice(1).map(Ui)):"none"===e?["all"].concat(t.slice(1).map(Ui).map(qi)):"in"===e?Hi(t[1],t.slice(2)):"!in"===e?qi(Hi(t[1],t.slice(2))):"has"===e?Vi(t[1]):"!has"===e?qi(Vi(t[1])):"within"!==e||t;var n}function $i(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Hi(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Bi)]]:["filter-in-small",t,["literal",e]]}}function Vi(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function qi(t){return["!",t]}function Wi(t){return Oi(re(t.value))?Fi(ne({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Gi(t)}function Gi(t){const e=t.value,n=t.key;if("array"!==pi(e))return[new te(n,e,`array expected, ${pi(e)} found`)];const i=t.styleSpec;let r,o=[];if(e.length<1)return[new te(n,e,"filter array must have at least 1 element")];switch(o=o.concat(Ri({key:`${n}[0]`,value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),ie(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===ie(e[1])&&o.push(new te(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new te(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=pi(e[1]),"string"!==r&&o.push(new te(`${n}[1]`,e[1],`string expected, ${r} found`)));for(let a=2;a<e.length;a++)r=pi(e[a]),"$type"===ie(e[1])?o=o.concat(Ri({key:`${n}[${a}]`,value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new te(`${n}[${a}]`,e[a],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let i=1;i<e.length;i++)o=o.concat(Gi({key:`${n}[${i}]`,value:e[i],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=pi(e[1]),2!==e.length?o.push(new te(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==r&&o.push(new te(`${n}[1]`,e[1],`string expected, ${r} found`));break;case"within":r=pi(e[1]),2!==e.length?o.push(new te(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==r&&o.push(new te(`${n}[1]`,e[1],`object expected, ${r} found`))}return o}function Zi(t,e){const n=t.key,i=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[`${e}_${t.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return ar({key:n,value:o,valueSpec:r.transition,style:i,styleSpec:r});const u=t.valueSpec||s[a];if(!u)return[new te(n,o,`unknown property "${a}"`)];let c;if("string"===pi(o)&&hi(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new te(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&h.push(new te(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&mi(re(o))&&"identity"===ie(o.type)&&h.push(new te(n,o,'"text-font" does not support identity functions'))),h.concat(ar({key:t.key,value:o,valueSpec:u,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function Xi(t){return Zi(t,"paint")}function Ki(t){return Zi(t,"layout")}function Ji(t){let e=[];const n=t.value,i=t.key,r=t.style,o=t.styleSpec;n.type||n.ref||e.push(new te(i,n,'either "type" or "ref" is required'));let a=ie(n.type);const s=ie(n.ref);if(n.id){const o=ie(n.id);for(let a=0;a<t.arrayIndex;a++){const t=r.layers[a];ie(t.id)===o&&e.push(new te(i,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new te(i,n[t],`"${t}" is prohibited for ref layers`))})),r.layers.forEach((e=>{ie(e.id)===s&&(t=e)})),t?t.ref?e.push(new te(i,n.ref,"ref cannot reference another ref layer")):a=ie(t.type):e.push(new te(i,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const t=r.sources&&r.sources[n.source],o=t&&ie(t.type);t?"vector"===o&&"raster"===a?e.push(new te(i,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?e.push(new te(i,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new te(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new te(i,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new te(i,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new te(i,n.source,`source "${n.source}" not found`))}else e.push(new te(i,n,'missing required property "source"'));return e=e.concat(Ai({key:i,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ar({key:`${i}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:Wi,layout:t=>Ai({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ki(ne({layerType:a},t))}}),paint:t=>Ai({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Xi(ne({layerType:a},t))}})}})),e}function Qi(t){const e=t.value,n=t.key,i=pi(e);return"string"!==i?[new te(n,e,`string expected, ${i} found`)]:[]}const tr={promoteId:function({key:t,value:e}){if("string"===pi(e))return Qi({key:t,value:e});{const n=[];for(const i in e)n.push(...Qi({key:`${t}.${i}`,value:e[i]}));return n}}};function er(t){const e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new te(n,e,'"type" is required')];const o=ie(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Ai({key:n,value:e,valueSpec:i[`source_${o.replace("-","_")}`],style:t.style,styleSpec:i,objectElementValidators:tr}),a;case"geojson":if(a=Ai({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:tr}),e.cluster)for(const t in e.clusterProperties){const[i,r]=e.clusterProperties[t],o="string"==typeof i?[i,["accumulated"],["get",t]]:i;a.push(...Fi({key:`${n}.${t}.map`,value:r,expressionContext:"cluster-map"})),a.push(...Fi({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Ai({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Ai({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new te(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ri({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function nr(t){const e=t.value,n=t.styleSpec,i=n.light,r=t.style;let o=[];const a=pi(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new te("light",e,`object expected, ${a} found`)]),o;for(const t in e){const a=t.match(/^(.*)-transition$/);o=a&&i[a[1]]&&i[a[1]].transition?o.concat(ar({key:t,value:e[t],valueSpec:n.transition,style:r,styleSpec:n})):i[t]?o.concat(ar({key:t,value:e[t],valueSpec:i[t],style:r,styleSpec:n})):o.concat([new te(t,e[t],`unknown property "${t}"`)])}return o}function ir(t){const e=t.value,n=t.key,i=t.style,r=t.styleSpec,o=r.terrain;let a=[];const s=pi(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new te("terrain",e,`object expected, ${s} found`)]),a;for(const t in e){const n=t.match(/^(.*)-transition$/);a=n&&o[n[1]]&&o[n[1]].transition?a.concat(ar({key:t,value:e[t],valueSpec:r.transition,style:i,styleSpec:r})):o[t]?a.concat(ar({key:t,value:e[t],valueSpec:o[t],style:i,styleSpec:r})):a.concat([new te(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=i.sources&&i.sources[e.source],r=t&&ie(t.type);t?"raster-dem"!==r&&a.push(new te(n,e.source,`terrain cannot be used with a source of type ${r}, it only be used with a "raster-dem" source type`)):a.push(new te(n,e.source,`source "${e.source}" not found`))}else a.push(new te(n,e,'terrain is missing required property "source"'));return a}function rr(t){const e=t.value,n=t.style,i=t.styleSpec,r=i.fog;let o=[];const a=pi(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new te("fog",e,`object expected, ${a} found`)]),o;for(const t in e){const a=t.match(/^(.*)-transition$/);o=a&&r[a[1]]&&r[a[1]].transition?o.concat(ar({key:t,value:e[t],valueSpec:i.transition,style:n,styleSpec:i})):r[t]?o.concat(ar({key:t,value:e[t],valueSpec:r[t],style:n,styleSpec:i})):o.concat([new te(t,e[t],`unknown property "${t}"`)])}return o}const or={"*":()=>[],array:Pi,boolean:function(t){const e=t.value,n=t.key,i=pi(e);return"boolean"!==i?[new te(n,e,`boolean expected, ${i} found`)]:[]},number:Ii,color:function(t){const e=t.key,n=t.value,i=pi(n);return"string"!==i?[new te(e,n,`color expected, ${i} found`)]:null===Me.parseCSSColor(n)?[new te(e,n,`color expected, "${n}" found`)]:[]},constants:ee,enum:Ri,filter:Wi,function:zi,layer:Ji,object:Ai,source:er,light:nr,terrain:ir,fog:rr,string:Qi,formatted:function(t){return 0===Qi(t).length?[]:Fi(t)},resolvedImage:function(t){return 0===Qi(t).length?[]:Fi(t)}};function ar(t){const e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&mi(ie(e))?zi(t):n.expression&&Ti(re(e))?Fi(t):n.type&&or[n.type]?or[n.type](t):Ai(ne({},t,{valueSpec:n.type?i[n.type]:n}))}function sr(t){const e=t.value,n=t.key,i=Qi(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new te(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new te(n,e,'"glyphs" url must include a "{range}" token'))),i}function lr(t,e=Qt){let n=[];return n=n.concat(ar({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:sr,"*":()=>[]}})),t.constants&&(n=n.concat(ee({key:"constants",value:t.constants,style:t,styleSpec:e}))),ur(n)}function ur(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function cr(t){return function(...e){return ur(t.apply(this,e))}}lr.source=cr(er),lr.light=cr(nr),lr.terrain=cr(ir),lr.fog=cr(rr),lr.layer=cr(Ji),lr.filter=cr(Wi),lr.paintProperty=cr(Xi),lr.layoutProperty=cr(Ki);const hr=lr,dr=(hr.source,hr.light),fr=(hr.terrain,hr.fog),pr=(hr.filter,hr.paintProperty),mr=hr.layoutProperty;function _r(t,e){let n=!1;if(e&&e.length)for(const i of e)t.fire(new Kt(new Error(i.message))),n=!0;return n}var gr=yr;function yr(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],e=r[1],n=r[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];i.push(a===s?null:r.subarray(a,s))}var l=r[3+i.length],u=r[3+i.length+1];this.keys=r.subarray(l,u),this.bboxes=r.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}yr.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},yr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},yr.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},yr.prototype.query=function(t,e,n,i,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,i,this._queryCell,s,{},r),s},yr.prototype._queryCell=function(t,e,n,i,r,o,a,s){var l=this.cells[r];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var f=4*d;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&n>=c[f+0]&&i>=c[f+1])?(a[d]=!0,o.push(u[d])):a[d]=!1}}},yr.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),h=this._convertToCellCoord(i),d=l;d<=c;d++)for(var f=u;f<=h;f++){var p=this.d*f+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(f),this._convertFromCellCoord(d+1),this._convertFromCellCoord(f+1)))&&r.call(this,t,e,n,i,p,o,a,s))return}},yr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},yr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},yr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),o+=this.keys.length,r[3+t.length+1]=o,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};const{ImageData:vr,ImageBitmap:xr}=g,br={};function wr(t,e,n={}){h(!br[t],`${t} is already registered.`),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),br[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}wr("Object",Object),gr.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},gr.deserialize=function(t){return new gr(t.buffer)},wr("Grid",gr),wr("Color",Te),wr("Error",Error),wr("ResolvedImage",Ce),wr("StylePropertyFunction",Li),wr("StyleExpression",Mi,{omit:["_evaluator"]}),wr("ZoomDependentExpression",Ei),wr("ZoomConstantExpression",Si),wr("CompoundExpression",$e,{omit:["_evaluate"]});for(const t in ri)ri[t]._classRegistryKey||wr(`Expression_${t}`,ri[t]);function Mr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Tr(t){return xr&&t instanceof xr}function kr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Mr(t)||Tr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof vr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const i of t)n.push(kr(i,e));return n}if("object"==typeof t){const n=t.constructor,i=n._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class");h(br[i]);const r=n.serialize?n.serialize(t,e):{};if(n.serialize)h(!e||r!==e[e.length-1]);else{for(const n in t){if(!t.hasOwnProperty(n))continue;if(br[i].omit.indexOf(n)>=0)continue;const o=t[n];r[n]=br[i].shallow.indexOf(n)>=0?o:kr(o,e)}t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(r.$name=i),r}throw new Error("can't serialize object of type "+typeof t)}function Sr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Mr(t)||Tr(t)||ArrayBuffer.isView(t)||t instanceof vr)return t;if(Array.isArray(t))return t.map(Sr);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=br[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const i=Object.create(n.prototype);for(const n of Object.keys(t)){if("$name"===n)continue;const r=t[n];i[n]=br[e].shallow.indexOf(n)>=0?r:Sr(r)}return i}throw new Error("can't deserialize object of type "+typeof t)}class Er{constructor(){this.first=!0}update(t,e){const n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}const Cr=t=>t>=128&&t<=255,Lr=t=>t>=1536&&t<=1791,Dr=t=>t>=1872&&t<=1919,Ar=t=>t>=2208&&t<=2303,Pr=t=>t>=4352&&t<=4607,Ir=t=>t>=5120&&t<=5759,zr=t=>t>=6016&&t<=6143,Fr=t=>t>=6320&&t<=6399,Rr=t=>t>=8192&&t<=8303,Or=t=>t>=8448&&t<=8527,Yr=t=>t>=8528&&t<=8591,Nr=t=>t>=8960&&t<=9215,Br=t=>t>=9216&&t<=9279,jr=t=>t>=9280&&t<=9311,Ur=t=>t>=9312&&t<=9471,$r=t=>t>=9632&&t<=9727,Hr=t=>t>=9728&&t<=9983,Vr=t=>t>=11008&&t<=11263,qr=t=>t>=11904&&t<=12031,Wr=t=>t>=12032&&t<=12255,Gr=t=>t>=12272&&t<=12287,Zr=t=>t>=12288&&t<=12351,Xr=t=>t>=12352&&t<=12447,Kr=t=>t>=12448&&t<=12543,Jr=t=>t>=12544&&t<=12591,Qr=t=>t>=12592&&t<=12687,to=t=>t>=12688&&t<=12703,eo=t=>t>=12704&&t<=12735,no=t=>t>=12736&&t<=12783,io=t=>t>=12784&&t<=12799,ro=t=>t>=12800&&t<=13055,oo=t=>t>=13056&&t<=13311,ao=t=>t>=13312&&t<=19903,so=t=>t>=19904&&t<=19967,lo=t=>t>=19968&&t<=40959,uo=t=>t>=40960&&t<=42127,co=t=>t>=42128&&t<=42191,ho=t=>t>=43360&&t<=43391,fo=t=>t>=44032&&t<=55215,po=t=>t>=55216&&t<=55295,mo=t=>t>=57344&&t<=63743,_o=t=>t>=63744&&t<=64255,go=t=>t>=64336&&t<=65023,yo=t=>t>=65040&&t<=65055,vo=t=>t>=65072&&t<=65103,xo=t=>t>=65104&&t<=65135,bo=t=>t>=65136&&t<=65279,wo=t=>t>=65280&&t<=65519;function Mo(t){for(const e of t)if(So(e.charCodeAt(0)))return!0;return!1}function To(t){for(const e of t)if(!ko(e.charCodeAt(0)))return!1;return!0}function ko(t){return!(Lr(t)||Dr(t)||Ar(t)||go(t)||bo(t))}function So(t){return!(746!==t&&747!==t&&(t<4352||!(eo(t)||Jr(t)||vo(t)&&!(t>=65097&&t<=65103)||_o(t)||oo(t)||qr(t)||no(t)||!(!Zr(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ao(t)||lo(t)||ro(t)||Qr(t)||ho(t)||po(t)||Pr(t)||fo(t)||Xr(t)||Gr(t)||to(t)||Wr(t)||io(t)||Kr(t)&&12540!==t||!(!wo(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!xo(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Ir(t)||Fr(t)||yo(t)||so(t)||uo(t)||co(t))))}function Eo(t){return!(So(t)||function(t){return!!(Cr(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Rr(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Or(t)||Yr(t)||Nr(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Br(t)&&9251!==t||jr(t)||Ur(t)||$r(t)||Hr(t)&&!(t>=9754&&t<=9759)||Vr(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Zr(t)||Kr(t)||mo(t)||vo(t)||xo(t)||wo(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Co(t){return Lr(t)||Dr(t)||Ar(t)||go(t)||bo(t)}function Lo(t){return t>=1424&&t<=2303||go(t)||bo(t)}function Do(t,e){return!(!e&&Lo(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||zr(t))}function Ao(t){for(const e of t)if(Lo(e.charCodeAt(0)))return!0;return!1}const Po="deferred",Io="loading",zo="loaded",Fo="error";let Ro=null,Oo="unavailable",Yo=null;const No=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Oo=Fo),Ro&&Ro(t)};function Bo(){jo.fire(new Xt("pluginStateChange",{pluginStatus:Oo,pluginURL:Yo}))}const jo=new Jt,Uo=function(){return Oo},$o=function(){if(Oo!==Po||!Yo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Oo=Io,Bo(),Yo&&Bt({url:Yo},(t=>{t?No(t):(Oo=zo,Bo())}))},Ho={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Oo===zo||null!=Ho.applyArabicShaping,isLoading:()=>Oo===Io,setState(t){h(q(),"Cannot set the state of the rtl-text-plugin when not in the web-worker context"),Oo=t.pluginStatus,Yo=t.pluginURL},isParsed:()=>(h(q(),"rtl-text-plugin is only parsed on the worker-threads"),null!=Ho.applyArabicShaping&&null!=Ho.processBidirectionalText&&null!=Ho.processStyledBidirectionalText),getPluginURL:()=>(h(q(),"rtl-text-plugin url can only be queried from the worker threads"),Yo)};class Vo{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Er,this.transition={})}isSupportedScript(t){return function(t,e){for(const n of t)if(!Do(n.charCodeAt(0),e))return!1;return!0}(t,Ho.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}class qo{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(mi(t))return new Li(t,e);if(Ti(t)){const n=Ci(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=Te.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class Wo{constructor(t){this.property=t,this.value=new qo(t,void 0)}transitioned(t,e){return new Zo(this.property,this.value,e,A({},t.transition,this.transition),t.now)}untransitioned(){return new Zo(this.property,this.value,null,{},0)}}class Go{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return j(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Wo(this._values[t].property)),this._values[t].value=new qo(this._values[t].property,null===e?void 0:j(e))}getTransition(t){return j(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Wo(this._values[t].property)),this._values[t].transition=j(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const i=this.getTransition(e);void 0!==i&&(t[`${e}-transition`]=i)}return t}transitioned(t,e){const n=new Xo(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(t,e._values[i]);return n}untransitioned(){const t=new Xo(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Zo{constructor(t,e,n,i,r){const o=i.delay||0,a=i.duration||0;r=r||0,this.property=t,this.value=e,this.begin=r+o,this.end=this.begin+a,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const i=t.now||0,r=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(t,e,n);{const a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),r,T(a))}}return r}}class Xo{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const i=new Qo(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Ko{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return j(this._values[t].value)}setValue(t,e){this._values[t]=new qo(this._values[t].property,null===e?void 0:j(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const i=new Qo(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}}class Jo{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)}}class Qo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class ta{constructor(t){this.specification=t}possiblyEvaluate(t,e){return h(!t.isDataDriven()),t.expression.evaluate(e)}interpolate(t,e,n){const i=vn[this.specification.type];return i?i(t,e,n):t}}class ea{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,i){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Jo(this,{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)},e):new Jo(this,t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Jo(this,{kind:"constant",value:void 0},t.parameters);const i=vn[this.specification.type];return i?new Jo(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,i,r,o){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r,o)}}class na extends ea{possiblyEvaluate(t,e,n,i){if(void 0===t.value)return new Jo(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},n,i),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,e);return new Jo(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const n=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Jo(this,{kind:"constant",value:n},e)}return new Jo(this,t.expression,e)}evaluate(t,e,n,i,r,o){if("source"===t.kind){const a=t.evaluate(e,n,i,r,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value}_calculate(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e,other:n}:{from:n,to:e,other:t}}interpolate(t){return t}}class ia{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){if(void 0!==t.value){if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},n,i);return this._calculate(r,r,r,e)}return h(!t.isDataDriven()),this._calculate(t.expression.evaluate(new Vo(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Vo(Math.floor(e.zoom),e)),t.expression.evaluate(new Vo(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class ra{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)}interpolate(){return!1}}class oa{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const n=t[e];n.specification.overridable&&this.overridableProperties.push(e);const i=this.defaultPropertyValues[e]=new qo(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new Wo(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}}}function aa(t,e){return 256*(t=E(Math.floor(t),0,255))+E(Math.floor(e),0,255)}wr("DataDrivenProperty",ea),wr("DataConstantProperty",ta),wr("CrossFadedDataDrivenProperty",na),wr("CrossFadedProperty",ia),wr("ColorRampProperty",ra);const sa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class la{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ua{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return h(!t.isTransferred),t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){h(!this.isTransferred),this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ca(t,e=1){let n=0,i=0;return{members:t.map((t=>{h(t.name.length);const r=(s=t.type,sa[s].BYTES_PER_ELEMENT),o=n=ha(n,Math.max(e,r)),a=t.components||1;var s;return i=Math.max(i,r),n+=r*a,{name:t.name,type:t.type,components:a,offset:o}})),size:ha(n,Math.max(i,e)),alignment:e}}function ha(t,e){return Math.ceil(t/e)*e}class da extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t}}da.prototype.bytesPerElement=4,wr("StructArrayLayout2i4",da);class fa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,t}}fa.prototype.bytesPerElement=8,wr("StructArrayLayout4i8",fa);class pa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r,o,a)}emplace(t,e,n,i,r,o,a,s){const l=6*t,u=12*t,c=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[u+4]=i,this.uint8[u+5]=r,this.uint8[u+6]=o,this.uint8[u+7]=a,this.float32[c+2]=s,t}}pa.prototype.bytesPerElement=12,wr("StructArrayLayout2i4ub1f12",pa);class ma extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t}}ma.prototype.bytesPerElement=8,wr("StructArrayLayout2f8",ma);class _a extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,i,r,o,a,s,l,u)}emplace(t,e,n,i,r,o,a,s,l,u,c){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,t}}_a.prototype.bytesPerElement=20,wr("StructArrayLayout10ui20",_a);class ga extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,i,r,o,a,s)}emplace(t,e,n,i,r,o,a,s,l){const u=8*t;return this.uint16[u+0]=e,this.uint16[u+1]=n,this.uint16[u+2]=i,this.uint16[u+3]=r,this.uint16[u+4]=o,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,t}}ga.prototype.bytesPerElement=16,wr("StructArrayLayout8ui16",ga);class ya extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,u,c,h){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,i,r,o,a,s,l,u,c,h)}emplace(t,e,n,i,r,o,a,s,l,u,c,h,d){const f=12*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=i,this.int16[f+3]=r,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=u,this.int16[f+9]=c,this.int16[f+10]=h,this.int16[f+11]=d,t}}ya.prototype.bytesPerElement=24,wr("StructArrayLayout4i4ui4i24",ya);class va extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t}}va.prototype.bytesPerElement=12,wr("StructArrayLayout3f12",va);class xa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.uint32[n+0]=e,t}}xa.prototype.bytesPerElement=4,wr("StructArrayLayout1ul4",xa);class ba extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,i,r,o,a,s,l,u)}emplace(t,e,n,i,r,o,a,s,l,u,c){const h=16*t,d=8*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.float32[d+1]=i,this.float32[d+2]=r,this.float32[d+3]=o,this.float32[d+4]=a,this.int16[h+10]=s,this.uint32[d+6]=l,this.uint16[h+14]=u,this.uint16[h+15]=c,t}}ba.prototype.bytesPerElement=32,wr("StructArrayLayout2i4f1i1ul2ui32",ba);class wa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)}emplace(t,e,n,i,r,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t}}wa.prototype.bytesPerElement=12,wr("StructArrayLayout2i2i2i12",wa);class Ma extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r)}emplace(t,e,n,i,r,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=i,this.int16[s+6]=r,this.int16[s+7]=o,t}}Ma.prototype.bytesPerElement=16,wr("StructArrayLayout2f1f2i16",Ma);class Ta extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=i,this.float32[a+2]=r,t}}Ta.prototype.bytesPerElement=12,wr("StructArrayLayout2ub2f12",Ta);class ka extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t}}ka.prototype.bytesPerElement=6,wr("StructArrayLayout3ui6",ka);class Sa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_){const g=this.length;return this.resize(g+1),this.emplace(g,t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_)}emplace(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_,g){const y=24*t,v=12*t,x=48*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=i,this.uint16[y+3]=r,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[v+7]=h,this.float32[v+8]=d,this.uint8[x+36]=f,this.uint8[x+37]=p,this.uint8[x+38]=m,this.uint32[v+10]=_,this.int16[y+22]=g,t}}Sa.prototype.bytesPerElement=48,wr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Sa);class Ea extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_,g,y,v,x,b,w,M,T,k,S){const E=this.length;return this.resize(E+1),this.emplace(E,t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_,g,y,v,x,b,w,M,T,k,S)}emplace(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_,g,y,v,x,b,w,M,T,k,S,E){const C=32*t,L=16*t;return this.int16[C+0]=e,this.int16[C+1]=n,this.int16[C+2]=i,this.int16[C+3]=r,this.int16[C+4]=o,this.int16[C+5]=a,this.int16[C+6]=s,this.int16[C+7]=l,this.uint16[C+8]=u,this.uint16[C+9]=c,this.uint16[C+10]=h,this.uint16[C+11]=d,this.uint16[C+12]=f,this.uint16[C+13]=p,this.uint16[C+14]=m,this.uint16[C+15]=_,this.uint16[C+16]=g,this.uint16[C+17]=y,this.uint16[C+18]=v,this.uint16[C+19]=x,this.uint16[C+20]=b,this.uint16[C+21]=w,this.uint16[C+22]=M,this.uint32[L+12]=T,this.float32[L+13]=k,this.float32[L+14]=S,this.float32[L+15]=E,t}}Ea.prototype.bytesPerElement=64,wr("StructArrayLayout8i15ui1ul3f64",Ea);class Ca extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.float32[n+0]=e,t}}Ca.prototype.bytesPerElement=4,wr("StructArrayLayout1f4",Ca);class La extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t}}La.prototype.bytesPerElement=6,wr("StructArrayLayout3i6",La);class Da extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=3*t,a=6*t;return this.uint32[o+0]=e,this.uint16[a+2]=n,this.uint16[a+3]=i,this.uint16[a+4]=r,t}}Da.prototype.bytesPerElement=12,wr("StructArrayLayout1ul3ui12",Da);class Aa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t}}Aa.prototype.bytesPerElement=4,wr("StructArrayLayout2ui4",Aa);class Pa extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.uint16[n+0]=e,t}}Pa.prototype.bytesPerElement=2,wr("StructArrayLayout1ui2",Pa);class Ia extends ua{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,t}}Ia.prototype.bytesPerElement=16,wr("StructArrayLayout4f16",Ia);class za extends la{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new m(this.anchorPointX,this.anchorPointY)}}za.prototype.size=32;class Fa extends ba{get(t){return h(!this.isTransferred),new za(this,t)}}wr("CollisionBoxArray",Fa);class Ra extends la{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ra.prototype.size=48;class Oa extends Sa{get(t){return h(!this.isTransferred),new Ra(this,t)}}wr("PlacedSymbolArray",Oa);class Ya extends la{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textOffset0(){return this._structArray.float32[this._pos4+13]}get textOffset1(){return this._structArray.float32[this._pos4+14]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+15]}}Ya.prototype.size=64;class Na extends Ea{get(t){return h(!this.isTransferred),new Ya(this,t)}}wr("SymbolInstanceArray",Na);class Ba extends Ca{getoffsetX(t){return this.float32[1*t+0]}}wr("GlyphOffsetArray",Ba);class ja extends La{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}wr("SymbolLineVertexArray",ja);class Ua extends la{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Ua.prototype.size=12;class $a extends Da{get(t){return h(!this.isTransferred),new Ua(this,t)}}wr("FeatureIndexArray",$a);class Ha extends la{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Ha.prototype.size=4;class Va extends Aa{get(t){return h(!this.isTransferred),new Ha(this,t)}}wr("FillExtrusionCentroidArray",Va);const qa=ca([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),Wa=ca([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Ga=e((function(t){t.exports=function(t,e){var n,i,r,o,a,s,l,u;for(n=3&t.length,i=t.length-n,r=e,a=3432918353,s=461845907,u=0;u<i;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),Za=e((function(t){t.exports=function(t,e){for(var n,i=t.length,r=e^i,o=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),Xa=Ga,Ka=Ga,Ja=Za;Xa.murmur3=Ka,Xa.murmur2=Ja;class Qa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,i){this.ids.push(ts(t)),this.positions.push(e,n,i)}getPositions(t){h(this.indexed);const e=ts(t);let n=0,i=this.ids.length-1;for(;n<i;){const t=n+i>>1;this.ids[t]>=e?i=t:n=t+1}const r=[];for(;this.ids[n]===e;){const t=this.positions[3*n],e=this.positions[3*n+1],i=this.positions[3*n+2];r.push({index:t,start:e,end:i}),n++}return r}static serialize(t,e){const n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return es(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(t){const e=new Qa;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function ts(t){const e=+t;return!isNaN(e)&&e<=v?e:Xa(String(t))}function es(t,e,n,i){for(;n<i;){const r=t[n+i>>1];let o=n-1,a=i+1;for(;;){do{o++}while(t[o]<r);do{a--}while(t[a]>r);if(o>=a)break;ns(t,o,a),ns(e,3*o,3*a),ns(e,3*o+1,3*a+1),ns(e,3*o+2,3*a+2)}a-n<i-a?(es(t,e,n,a),n=a+1):(es(t,e,a+1,i),i=a)}}function ns(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}wr("FeaturePositionMap",Qa);class is{constructor(t,e){this.gl=t.gl,this.location=e}}class rs extends is{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class os extends is{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class as extends is{constructor(t,e){super(t,e),this.current=Te.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const ss=new Float32Array(16);const ls=new Float32Array(9);function us(t){return[aa(255*t.r,255*t.g),aa(255*t.b,255*t.a)]}class cs{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n){t.set(n.constantOr(this.value))}getBinding(t,e,n){return"color"===this.type?new as(t,e):new rs(t,e)}}class hs{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tl.concat(e.br),this.patternTo=t.tl.concat(t.br)}setUniform(t,e,n,i){const r="u_pattern_to"===i||"u_dash_to"===i?this.patternTo:"u_pattern_from"===i||"u_dash_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&t.set(r)}getBinding(t,e,n){return"u_pattern_from"===n||"u_pattern_to"===n||"u_dash_from"===n||"u_dash_to"===n?new os(t,e):new rs(t,e)}}class ds{constructor(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(t,e,n,i,r){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Vo(0),e,{},i,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,n,i){const r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,e,r)}_setPaintValue(t,e,n){if("color"===this.type){const i=us(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fs{constructor(t,e,n,i,r,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,i,r){const o=this.expression.evaluate(new Vo(this.zoom),e,{},i,[],r),a=this.expression.evaluate(new Vo(this.zoom+1),e,{},i,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}updatePaintArray(t,e,n,i){const r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,e,r,o)}_setPaintValue(t,e,n,i){if("color"===this.type){const r=us(n),o=us(i);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1],o[0],o[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=E(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)}getBinding(t,e,n){return new rs(t,e)}}class ps{constructor(t,e,n,i,r,o,a){this.expression=t,this.type=n,this.useIntegerZoom=i,this.zoom=r,this.layerId=a,this.paintVertexAttributes=("array"===n?Wa:qa).members;for(let t=0;t<e.length;++t)h(`a_${e[t]}`===this.paintVertexAttributes[t].name);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(t,e,n){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,i,r){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],r)}_setPaintValues(t,e,n,i){if(!i||!n)return;const{min:r,mid:o,max:a}=n,s=i[r],l=i[o],u=i[a];if(s&&l&&u)for(let n=t;n<e;n++)this._setPaintValue(this.zoomInPaintVertexArray,n,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,n,l,u)}_setPaintValue(t,e,n,i){t.emplace(e,n.tl[0],n.tl[1],n.br[0],n.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],n.pixelRatio,i.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ms{constructor(t,e,n=(()=>!0)){this.binders={},this._buffers=[];const i=[];for(const r in t.paint._values){if(!n(r))continue;const o=t.paint.get(r);if(!(o instanceof Jo&&hi(o.property.specification)))continue;const a=ys(r,t.type),s=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],h="cross-faded"===c||"cross-faded-data-driven"===c,d="line-dasharray"===String(r)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||h){const n=bs(r,l,"source");this.binders[r]=h?new ps(s,a,l,u,e,n,t.id):new ds(s,a,l,n),i.push(`/a_${r}`)}else{const t=bs(r,l,"composite");this.binders[r]=new fs(s,a,l,u,e,t),i.push(`/z_${r}`)}else this.binders[r]=h?new hs(s.value,a):new cs(s.value,a,l),i.push(`/u_${r}`)}this.cacheKey=i.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof ds||e instanceof fs?e.maxValue:0}populatePaintArrays(t,e,n,i,r){for(const o in this.binders){const a=this.binders[o];(a instanceof ds||a instanceof fs||a instanceof ps)&&a.populatePaintArray(t,e,n,i,r)}}setConstantPatternPositions(t,e){for(const n in this.binders){const i=this.binders[n];i instanceof hs&&i.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,n,i,r){let o=!1;for(const a in t){const s=e.getPositions(a);for(const e of s){const s=n.feature(e.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof ds||l instanceof fs||l instanceof ps)&&!0===l.expression.isStateDependent){const u=i.paint.get(n);l.expression=u.value,l.updatePaintArray(e.start,e.end,s,t[a],r),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof cs||n instanceof hs)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof ds||n instanceof fs||n instanceof ps)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof cs||n instanceof hs||n instanceof fs)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const n=[];for(const i in this.binders){const r=this.binders[i];if(r instanceof cs||r instanceof hs||r instanceof fs)for(const o of r.uniformNames)if(e[o]){const a=r.getBinding(t,e[o],o);n.push({name:o,property:i,binding:a})}}return n}setUniforms(t,e,n,i){for(const{name:t,property:r,binding:o}of e)this.binders[r].setUniform(o,i,n.get(r),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const n=this.binders[e];if(t&&n instanceof ps){const e=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(n instanceof ds||n instanceof fs)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof ds||n instanceof fs||n instanceof ps)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof ds||e instanceof fs||e instanceof ps)&&e.destroy()}}}class _s{constructor(t,e,n=(()=>!0)){this.programConfigurations={};for(const i of t)this.programConfigurations[i.id]=new ms(i,e,n);this.needsUpload=!1,this._featureMap=new Qa,this._bufferOffset=0}populatePaintArrays(t,e,n,i,r,o){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e,i,r,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,i){for(const r of n)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,e,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const gs={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function ys(t,e){return gs[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const vs={"line-pattern":{source:_a,composite:_a},"fill-pattern":{source:_a,composite:_a},"fill-extrusion-pattern":{source:_a,composite:_a},"line-dasharray":{source:ga,composite:ga}},xs={color:{source:ma,composite:Ia},number:{source:Ca,composite:ma}};function bs(t,e,n){const i=vs[t];return i&&i[n]||xs[e][n]}wr("ConstantBinder",cs),wr("CrossFadedConstantBinder",hs),wr("SourceExpressionBinder",ds),wr("CrossFadedCompositeBinder",ps),wr("CompositeExpressionBinder",fs),wr("ProgramConfiguration",ms,{omit:["_buffers"]}),wr("ProgramConfigurationSet",_s);const ws="-transition";class Ms extends Jt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(t=t,this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Ko(e.layout)),e.paint)){this._transitionablePaint=new Go(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qo(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n={}){if(null!=e){const i=`layers.${this.id}.layout.${t}`;if(this._validate(mr,i,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e}getPaintProperty(t){return Y(t,ws)?this._transitionablePaint.getTransition(t.slice(0,-ws.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(null!=e){const i=`layers.${this.id}.paint.${t}`;if(this._validate(pr,i,t,e,n))return!1}if(Y(t,ws))return this._transitionablePaint.setTransition(t.slice(0,-ws.length),e||void 0),!1;{const n=this._transitionablePaint._values[t],i="cross-faded-data-driven"===n.property.specification["property-type"],r=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||r||i||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),B(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,i,r={}){return(!r||!1!==r.validate)&&_r(this,t.call(hr,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:Qt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Jo&&hi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const Ts=ca([{name:"a_pos",components:2,type:"Int16"}],4),{members:ks,size:Ss,alignment:Es}=Ts;class Cs{constructor(t=[]){this.segments=t}prepareSegment(t,e,n,i){let r=this.segments[this.segments.length-1];return t>Cs.MAX_VERTEX_ARRAY_LENGTH&&$(`Max vertices per segment is ${Cs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!r||r.vertexLength+t>Cs.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,i){return new Cs([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}Cs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wr("SegmentVector",Cs);var Ls=8192;const Ds=Math.pow(2,14)-1,As=-Ds-1;function Ps(t){const e=Ls/t.extent,n=t.loadGeometry();for(let t=0;t<n.length;t++){const i=n[t];for(let t=0;t<i.length;t++){const n=i[t],r=Math.round(n.x*e),o=Math.round(n.y*e);n.x=E(r,As,Ds),n.y=E(o,As,Ds),(r<n.x||r>n.x+1||o<n.y||o>n.y+1)&&$("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Is(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Ps(t):[]}}function zs(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}class Fs{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new da,this.indexArray=new ka,this.segments=new Cs,this.programConfigurations=new _s(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){const i=this.layers[0],r=[];let o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));for(const{feature:e,id:i,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Is(e,t);if(!this.layers[0]._featureFilter.filter(new Vo(this.zoom),l,n))continue;const u=o?o.evaluate(l,{},n):void 0,c={id:i,properties:e.properties,type:e.type,sourceLayerIndex:s,index:a,geometry:t?l.geometry:Ps(e),patterns:{},sortKey:u};r.push(c)}o&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of r){const{geometry:r,index:o,sourceLayerIndex:a}=i,s=t[o].feature;this.addFeature(i,r,o,n),e.featureIndex.insert(s,r,o,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ks),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i){for(const n of e)for(const e of n){const n=e.x,i=e.y;if(n<0||n>=Ls||i<0||i>=Ls)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=r.vertexLength;zs(this.layoutVertexArray,n,i,-1,-1),zs(this.layoutVertexArray,n,i,1,-1),zs(this.layoutVertexArray,n,i,1,1),zs(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i)}}function Rs(t,e){for(let n=0;n<t.length;n++)if(Vs(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Vs(t,e[n]))return!0;return!!Bs(t,e)}function Os(t,e,n){return!!Vs(t,e)||!!Us(e,t,n)}function Ys(t,e){if(1===t.length)return Hs(e,t[0]);for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.length;e++)if(Vs(t,i[e]))return!0}for(let n=0;n<t.length;n++)if(Hs(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Bs(t,e[n]))return!0;return!1}function Ns(t,e,n){if(t.length>1){if(Bs(t,e))return!0;for(let i=0;i<e.length;i++)if(Us(e[i],t,n))return!0}for(let i=0;i<t.length;i++)if(Us(t[i],e,n))return!0;return!1}function Bs(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1];for(let t=0;t<e.length-1;t++)if(js(i,r,e[t],e[t+1]))return!0}return!1}function js(t,e,n,i){return H(t,n,i)!==H(e,n,i)&&H(t,e,n)!==H(t,e,i)}function Us(t,e,n){const i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(let n=1;n<e.length;n++)if($s(t,e[n-1],e[n])<i)return!0;return!1}function $s(t,e,n){const i=e.distSqr(n);if(0===i)return t.distSqr(e);const r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return r<0?t.distSqr(e):r>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(r)._add(e))}function Hs(t,e){let n,i,r,o=!1;for(let a=0;a<t.length;a++){n=t[a];for(let t=0,a=n.length-1;t<n.length;a=t++)i=n[t],r=n[a],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function Vs(t,e){let n=!1;for(let i=0,r=t.length-1;i<t.length;r=i++){const o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function qs(t,e,n,i,r){for(const o of t)if(e<=o.x&&n<=o.y&&i>=o.x&&r>=o.y)return!0;const o=[new m(e,n),new m(e,r),new m(i,r),new m(i,n)];if(t.length>2)for(const e of o)if(Vs(t,e))return!0;for(let e=0;e<t.length-1;e++)if(Ws(t[e],t[e+1],o))return!0;return!1}function Ws(t,e,n){const i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;const o=H(t,e,n[0]);return o!==H(t,e,n[1])||o!==H(t,e,n[2])||o!==H(t,e,n[3])}function Gs(t,e,n){const i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Zs(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Xs(t,e,n,i,r){if(!e[0]&&!e[1])return t;const o=m.convert(e)._mult(r);"viewport"===n&&o._rotate(-i);const a=[];for(let e=0;e<t.length;e++){const n=t[e];a.push(n.sub(o))}return a}function Ks(t,e,n,i){const r=m.convert(t)._mult(i);return"viewport"===e&&r._rotate(-n),r}wr("CircleBucket",Fs,{omit:["layers"]});const Js=new oa({"circle-sort-key":new ea(Qt.layout_circle["circle-sort-key"])});var Qs={paint:new oa({"circle-radius":new ea(Qt.paint_circle["circle-radius"]),"circle-color":new ea(Qt.paint_circle["circle-color"]),"circle-blur":new ea(Qt.paint_circle["circle-blur"]),"circle-opacity":new ea(Qt.paint_circle["circle-opacity"]),"circle-translate":new ta(Qt.paint_circle["circle-translate"]),"circle-translate-anchor":new ta(Qt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ta(Qt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ta(Qt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ea(Qt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ea(Qt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ea(Qt.paint_circle["circle-stroke-opacity"])}),layout:Js},tl="undefined"!=typeof Float32Array?Float32Array:Array;function el(){var t=new tl(9);return tl!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function nl(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function il(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],m=e[12],_=e[13],g=e[14],y=e[15],v=n[0],x=n[1],b=n[2],w=n[3];return t[0]=v*i+x*s+b*h+w*m,t[1]=v*r+x*l+b*d+w*_,t[2]=v*o+x*u+b*f+w*g,t[3]=v*a+x*c+b*p+w*y,v=n[4],x=n[5],b=n[6],w=n[7],t[4]=v*i+x*s+b*h+w*m,t[5]=v*r+x*l+b*d+w*_,t[6]=v*o+x*u+b*f+w*g,t[7]=v*a+x*c+b*p+w*y,v=n[8],x=n[9],b=n[10],w=n[11],t[8]=v*i+x*s+b*h+w*m,t[9]=v*r+x*l+b*d+w*_,t[10]=v*o+x*u+b*f+w*g,t[11]=v*a+x*c+b*p+w*y,v=n[12],x=n[13],b=n[14],w=n[15],t[12]=v*i+x*s+b*h+w*m,t[13]=v*r+x*l+b*d+w*_,t[14]=v*o+x*u+b*f+w*g,t[15]=v*a+x*c+b*p+w*y,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var rl=il;function ol(){var t=new tl(3);return tl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function al(t){var e=new tl(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function sl(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function ll(t,e,n){var i=new tl(3);return i[0]=t,i[1]=e,i[2]=n,i}function ul(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function cl(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function hl(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function dl(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function fl(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function pl(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function ml(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function _l(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-o*s,t[1]=o*a-i*l,t[2]=i*s-r*a,t}function gl(t,e,n){var i=n[0],r=n[1],o=n[2],a=n[3],s=e[0],l=e[1],u=e[2],c=r*u-o*l,h=o*s-i*u,d=i*l-r*s,f=r*d-o*h,p=o*c-i*d,m=i*h-r*c,_=2*a;return c*=_,h*=_,d*=_,f*=2,p*=2,m*=2,t[0]=s+c+f,t[1]=l+h+p,t[2]=u+d+m,t}var yl=cl,vl=hl,xl=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},bl=sl;function wl(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}ol();var Ml,Tl=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t};function kl(){var t=new tl(4);return tl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Sl(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function El(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+a*s,t[1]=r*l+o*s,t[2]=o*l-r*s,t[3]=a*l-i*s,t}Ml=new tl(4),tl!=Float32Array&&(Ml[0]=0,Ml[1]=0,Ml[2]=0,Ml[3]=0);var Cl=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.hypot(e,n,i,r)},Ll=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=o*a,t},Dl=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]};ol(),ll(1,0,0),ll(0,1,0),kl(),kl(),el(),function(){var t=new tl(2);tl!=Float32Array&&(t[0]=0,t[1]=0)}();class Al{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,n){const i=Math.pow(2,n),r=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const r=wl([],n,t),o=1/r[3]/e*i;return Tl(r,r,[o,o,1/r[3],o])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=pl([],_l([],yl([],r[t[0]],r[t[1]]),yl([],r[t[2]],r[t[1]]))),n=-ml(e,r[t[1]]);return e.concat(n)}));return new Al(r,o)}}class Pl{constructor(t,e){this.min=t,this.max=e,this.center=dl([],ul([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],n=al(this.min),i=al(this.max);for(let t=0;t<e.length;t++)n[t]=e[t]?this.min[t]:this.center[t],i[t]=e[t]?this.center[t]:this.max[t];return i[2]=this.max[2],new Pl(n,i)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}intersects(t){const e=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let o=0;o<t.planes.length;o++){const a=t.planes[o];let s=0;for(let t=0;t<e.length;t++)s+=(r=e[t],(i=a)[0]*r[0]+i[1]*r[1]+i[2]*r[2]+i[3]*r[3]>=0);if(0===s)return 0;s!==e.length&&(n=!1)}var i,r;if(n)return 2;for(let e=0;e<3;e++){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let r=0;r<t.points.length;r++){const o=t.points[r][e]-this.min[e];n=Math.min(n,o),i=Math.max(i,o)}if(i<0||n>this.max[e]-this.min[e])return 0}return 1}}function Il(t,e,n){const i=wl([],[t.x,t.y,e,1],n);return new m(i[0]/i[3],i[1]/i[3])}const zl=ll(0,0,0),Fl=ll(0,0,1);function Rl(t,e){const n=ol();zl[2]=e;const i=t.intersectsPlane(zl,Fl,n);return h(i,"tilespacePoint should always be below horizon, and since camera cannot have pitch >90, ray should always intersect"),new m(n[0],n[1])}class Ol extends Fs{}function Yl(t,{width:e,height:n},i,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==e*n*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(e*n*i);return t.width=e,t.height=n,t.data=r,t}function Nl(t,{width:e,height:n},i){if(e===t.width&&n===t.height)return;const r=Yl({},{width:e,height:n},i);Bl(t,r,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,n)},i),t.width=e,t.height=n,t.data=r.data}function Bl(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;h(a!==s);for(let l=0;l<r.height;l++){const u=((n.y+l)*t.width+n.x)*o,c=((i.y+l)*e.width+i.x)*o;for(let t=0;t<r.width*o;t++)s[c+t]=a[u+t]}return e}wr("HeatmapBucket",Ol,{omit:["layers"]});class jl{constructor(t,e){Yl(this,t,1,e)}resize(t){Nl(this,t,1)}clone(){return new jl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){Bl(t,e,n,i,r,1)}}class Ul{constructor(t,e){Yl(this,t,4,e)}resize(t){Nl(this,t,4)}replace(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t}clone(){return new Ul({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){Bl(t,e,n,i,r,4)}}wr("AlphaImage",jl),wr("RGBAImage",Ul);var $l={paint:new oa({"heatmap-radius":new ea(Qt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ea(Qt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ta(Qt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ra(Qt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ta(Qt.paint_heatmap["heatmap-opacity"])})};function Hl(t){const e={},n=t.resolution||256,i=t.clips?t.clips.length:1,r=t.image||new Ul({width:n,height:i});var o;h((o=n,Math.log(o)/Math.LN2%1==0));const a=(n,i,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);r.data[n+i+0]=Math.floor(255*a.r/a.a),r.data[n+i+1]=Math.floor(255*a.g/a.a),r.data[n+i+2]=Math.floor(255*a.b/a.a),r.data[n+i+3]=Math.floor(255*a.a)};if(t.clips)for(let e=0,r=0;e<i;++e,r+=4*n)for(let i=0,o=0;i<n;i++,o+=4){const s=i/(n-1),{start:l,end:u}=t.clips[e];a(r,o,l*(1-s)+u*s)}else for(let t=0,e=0;t<n;t++,e+=4)a(0,e,t/(n-1));return r}var Vl={paint:new oa({"hillshade-illumination-direction":new ta(Qt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ta(Qt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ta(Qt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ta(Qt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ta(Qt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ta(Qt.paint_hillshade["hillshade-accent-color"])})};const ql=ca([{name:"a_pos",components:2,type:"Int16"}],4),{members:Wl,size:Gl,alignment:Zl}=ql;var Xl=Jl,Kl=Jl;function Jl(t,e,n){n=n||2;var i,r,o,a,s,l,u,c=e&&e.length,h=c?e[0]*n:t.length,d=Ql(t,0,h,n,!0),f=[];if(!d||d.next===d.prev)return f;if(c&&(d=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=Ql(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(cu(a));for(s.sort(au),r=0;r<s.length;r++)su(s[r],n),n=tu(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var p=n;p<h;p+=n)(s=t[p])<i&&(i=s),(l=t[p+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-i,a-r))?1/u:0}return eu(d,f,n,i,r,u),f}function Ql(t,e,n,i,r){var o,a;if(r===Mu(t,e,n,i)>0)for(o=e;o<n;o+=i)a=xu(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=xu(o,t[o],t[o+1],a);return a&&pu(a,a.next)&&(bu(a),a=a.next),a}function tu(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!pu(i,i.next)&&0!==fu(i.prev,i,i.next))i=i.next;else{if(bu(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function eu(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=uu(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<u&&(s++,i=i.nextZ);e++);for(l=u;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(a>1)}(r)}(t,i,r,o);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?iu(t,i,r,o):nu(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),bu(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?eu(t=ru(tu(t),e,n),e,n,i,r,o,2):2===a&&ou(t,e,n,i,r,o):eu(tu(t),e,n,i,r,o,1);break}}}function nu(t){var e=t.prev,n=t,i=t.next;if(fu(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(hu(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&fu(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function iu(t,e,n,i){var r=t.prev,o=t,a=t.next;if(fu(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,u=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,c=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=uu(s,l,e,n,i),d=uu(u,c,e,n,i),f=t.prevZ,p=t.nextZ;f&&f.z>=h&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&hu(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&fu(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&hu(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&fu(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&hu(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&fu(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&hu(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&fu(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function ru(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!pu(r,o)&&mu(r,i,i.next,o)&&yu(r,o)&&yu(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),bu(i),bu(i.next),i=t=o),i=i.next}while(i!==t);return tu(i)}function ou(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&du(a,s)){var l=vu(a,s);return a=tu(a,a.next),l=tu(l,l.next),eu(a,e,n,i,r,o),void eu(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function au(t,e){return t.x-e.x}function su(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var l,u=n,c=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&hu(o<h?r:a,o,c,h,o<h?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),yu(i,t)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&lu(n,i)))&&(n=i,d=l)),i=i.next}while(i!==u);return n}(t,e)){var n=vu(e,t);tu(e,e.next),tu(n,n.next)}}function lu(t,e){return fu(t.prev,t,e.prev)<0&&fu(e.next,t,t.next)<0}function uu(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function cu(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function hu(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function du(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&mu(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(yu(t,e)&&yu(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(fu(t.prev,t,e.prev)||fu(t,e.prev,e))||pu(t,e)&&fu(t.prev,t,t.next)>0&&fu(e.prev,e,e.next)>0)}function fu(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function pu(t,e){return t.x===e.x&&t.y===e.y}function mu(t,e,n,i){var r=gu(fu(t,e,n)),o=gu(fu(t,e,i)),a=gu(fu(n,i,t)),s=gu(fu(n,i,e));return r!==o&&a!==s||!(0!==r||!_u(t,n,e))||!(0!==o||!_u(t,i,e))||!(0!==a||!_u(n,t,i))||!(0!==s||!_u(n,e,i))}function _u(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function gu(t){return t>0?1:t<0?-1:0}function yu(t,e){return fu(t.prev,t,t.next)<0?fu(t,e,t.next)>=0&&fu(t,t.prev,e)>=0:fu(t,e,t.prev)<0||fu(t,t.next,e)<0}function vu(t,e){var n=new wu(t.i,t.x,t.y),i=new wu(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function xu(t,e,n,i){var r=new wu(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function bu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function wu(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mu(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Tu(t,e,n,i,r){ku(t,e,n||0,i||t.length-1,r||Eu)}function ku(t,e,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);ku(t,e,Math.max(n,Math.floor(e-a*l/o+u)),Math.min(i,Math.floor(e+(o-a)*l/o+u)),r)}var c=t[e],h=n,d=i;for(Su(t,n,e),r(t[i],c)>0&&Su(t,n,i);h<d;){for(Su(t,h,d),h++,d--;r(t[h],c)<0;)h++;for(;r(t[d],c)>0;)d--}0===r(t[n],c)?Su(t,n,d):Su(t,++d,i),d<=e&&(n=d+1),e<=d&&(i=d-1)}}function Su(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Eu(t,e){return t<e?-1:t>e?1:0}function Cu(t,e){const n=t.length;if(n<=1)return[t];const i=[];let r,o;for(let e=0;e<n;e++){const n=V(t[e]);0!==n&&(t[e].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(r&&i.push(r),r=[t[e]]):r.push(t[e]))}if(r&&i.push(r),e>1)for(let t=0;t<i.length;t++)i[t].length<=e||(Tu(i[t],e,1,i[t].length-1,Lu),i[t]=i[t].slice(0,e));return i}function Lu(t,e){return e.area-t.area}function Du(t,e,n){const i=n.patternDependencies;let r=!1;for(const n of e){const e=n.paint.get(`${t}-pattern`);e.isConstant()||(r=!0);const o=e.constantOr(null);o&&(r=!0,i[o.to]=!0,i[o.from]=!0)}return r}function Au(t,e,n,i,r){const o=r.patternDependencies;for(const a of e){const e=a.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:i-1},n,{},r.availableImages),s=e.evaluate({zoom:i},n,{},r.availableImages),l=e.evaluate({zoom:i+1},n,{},r.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:t,mid:s,max:l}}}return n}Jl.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(Mu(t,0,o,n));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*n,c=s<l-1?e[s+1]*n:t.length;a-=Math.abs(Mu(t,u,c,n))}var h=0;for(s=0;s<i.length;s+=3){var d=i[s]*n,f=i[s+1]*n,p=i[s+2]*n;h+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Jl.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},Xl.default=Kl;class Pu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new da,this.indexArray=new ka,this.indexArray2=new Aa,this.programConfigurations=new _s(t.layers,t.zoom),this.segments=new Cs,this.segments2=new Cs,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=Du("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),r=[];for(const{feature:o,id:a,index:s,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,u=Is(o,t);if(!this.layers[0]._featureFilter.filter(new Vo(this.zoom),u,n))continue;const c=i?i.evaluate(u,{},n,e.availableImages):void 0,h={id:a,properties:o.properties,type:o.type,sourceLayerIndex:l,index:s,geometry:t?u.geometry:Ps(o),patterns:{},sortKey:c};r.push(h)}i&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of r){const{geometry:r,index:o,sourceLayerIndex:a}=i;if(this.hasPattern){const t=Au("fill",this.layers,i,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(i,r,o,n,{});const s=t[o].feature;e.featureIndex.insert(s,r,o,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Wl),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,i,r){for(const t of Cu(e,500)){let e=0;for(const n of t)e+=n.length;const n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),i=n.vertexLength,r=[],o=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&o.push(r.length/2);const n=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),i=n.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(i+e.length-1,i),r.push(e[0].x),r.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(i+t-1,i+t),r.push(e[t].x),r.push(e[t].y);n.vertexLength+=e.length,n.primitiveLength+=e.length}const a=Xl(r,o);h(a.length%3==0);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(i+a[t],i+a[t+1],i+a[t+2]);n.vertexLength+=e,n.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}}wr("FillBucket",Pu,{omit:["layers","patternFeatures"]});const Iu=new oa({"fill-sort-key":new ea(Qt.layout_fill["fill-sort-key"])});var zu={paint:new oa({"fill-antialias":new ta(Qt.paint_fill["fill-antialias"]),"fill-opacity":new ea(Qt.paint_fill["fill-opacity"]),"fill-color":new ea(Qt.paint_fill["fill-color"]),"fill-outline-color":new ea(Qt.paint_fill["fill-outline-color"]),"fill-translate":new ta(Qt.paint_fill["fill-translate"]),"fill-translate-anchor":new ta(Qt.paint_fill["fill-translate-anchor"]),"fill-pattern":new na(Qt.paint_fill["fill-pattern"])}),layout:Iu};const Fu=ca([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Ru=ca([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Ou,size:Yu,alignment:Nu}=Fu;var Bu=ju;function ju(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(Uu,this,e)}function Uu(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function $u(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],i+=((n=t[a]).x-e.x)*(e.y+n.y);return i}ju.types=["Unknown","Point","LineString","Polygon"],ju.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,o=0,a=0,s=[];t.pos<n;){if(r<=0){var l=t.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)o+=t.readSVarint(),a+=t.readSVarint(),1===i&&(e&&s.push(e),e=[]),e.push(new m(o,a));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&s.push(e),s},ju.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(i<=0){var c=t.readVarint();n=7&c,i=c>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=t.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},ju.prototype.toGeoJSON=function(t,e,n){var i,r,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=ju.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+s)/o;t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];c(l=h);break;case 2:for(i=0;i<l.length;i++)c(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var a=$u(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)c(l[i][r])}1===l.length?l=l[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Hu=Vu;function Vu(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(qu,this,e),this.length=this._features.length}function qu(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function Wu(t,e,n){if(3===t){var i=new Hu(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}Vu.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Bu(this._pbf,e,this.extent,this._keys,this._values)};var Gu={VectorTile:function(t,e){this.layers=t.readFields(Wu,{},e)},VectorTileFeature:Bu,VectorTileLayer:Hu};const Zu=Gu.VectorTileFeature.types,Xu=Math.pow(2,13);function Ku(t,e,n,i,r,o,a,s){t.emplaceBack((e<<1)+a,(n<<1)+o,(Math.floor(i*Xu)<<1)+r,Math.round(s))}class Ju{constructor(){this.acc=new m(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new m(t.x,t.y),this.max=new m(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);let n=!!this.borders;const i=this.min,r=this.max;t.x<i.x?(i.x=t.x,n=!0):t.x>r.x&&(r.x=t.x,n=!0),t.y<i.y?(i.y=t.y,n=!0):t.y>r.y&&(r.y=t.y,n=!0),((0===t.x||t.x===Ls)&&t.x===e.x)!=((0===t.y||t.y===Ls)&&t.y===e.y)&&this.processBorderOverlap(t,e),n&&this.checkBorderIntersection(t,e)}checkBorderIntersection(t,e){e.x<0!=t.x<0&&this.addBorderIntersection(0,yn(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>Ls!=t.x>Ls&&this.addBorderIntersection(1,yn(e.y,t.y,(Ls-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,yn(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>Ls!=t.y>Ls&&this.addBorderIntersection(3,yn(e.x,t.x,(Ls-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{h(t.y===e.y);const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new m(0,0)}span(){return new m(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class Qu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new fa,this.centroidVertexArray=new Va,this.indexArray=new ka,this.programConfigurations=new _s(t.layers,t.zoom),this.segments=new Cs,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n){this.features=[],this.hasPattern=Du("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(t){const e=40075017,n=t.y/(1<<t.z),i=Math.exp(Math.PI*(1-2*n));return 2*e*i/(i*i+1)/Ls/(1<<t.z)}(n);for(const{feature:i,id:r,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,s=Is(i,t);if(!this.layers[0]._featureFilter.filter(new Vo(this.zoom),s,n))continue;const l={id:r,sourceLayerIndex:a,index:o,geometry:t?s.geometry:Ps(i),properties:i.properties,type:i.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(Au("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,n,{}),e.featureIndex.insert(i,l.geometry,o,a,this.index,u)}this.sortBorders()}addFeatures(t,e,n){for(const t of this.features){const{geometry:i}=t;this.addFeature(t,i,t.index,e,n)}this.sortBorders()}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ou),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Ru.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i,r){const o=this.enableTerrain&&t.properties&&"Polygon"===Zu[t.type]?new Ju:null;for(const n of Cu(e,500)){let e=0,i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===n.length||((a=n[0]).every((t=>t.x<=0))||a.every((t=>t.x>=Ls))||a.every((t=>t.y<=0))||a.every((t=>t.y>=Ls))))continue;for(let t=0;t<n.length;t++){const r=n[t];if(0===r.length)continue;e+=r.length;let a=0;o&&o.startRing(r[0]);for(let t=0;t<r.length;t++){const e=r[t];if(t>=1){const n=r[t-1];if(!tc(e,n)){o&&o.append(e,n),i.vertexLength+4>Cs.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=e.sub(n)._perp(),r=t.x/(Math.abs(t.x)+Math.abs(t.y)),s=t.y>0?1:0,l=n.dist(e);a+l>32768&&(a=0),Ku(this.layoutVertexArray,e.x,e.y,r,s,0,0,a),Ku(this.layoutVertexArray,e.x,e.y,r,s,0,1,a),a+=l,Ku(this.layoutVertexArray,n.x,n.y,r,s,0,0,a),Ku(this.layoutVertexArray,n.x,n.y,r,s,0,1,a);const u=i.vertexLength;this.indexArray.emplaceBack(u,u+2,u+1),this.indexArray.emplaceBack(u+1,u+2,u+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+e>Cs.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Zu[t.type])continue;const r=[],s=[],l=i.vertexLength;for(let t=0;t<n.length;t++){const e=n[t];if(0!==e.length){e!==n[0]&&s.push(r.length/2);for(let t=0;t<e.length;t++){const n=e[t];Ku(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),r.push(n.x),r.push(n.y),o&&o.currentPolyCount.top++}}}const u=Xl(r,s);h(u.length%3==0);for(let t=0;t<u.length;t+=3)this.indexArray.emplaceBack(l+u[t],l+u[t+2],l+u[t+1]);i.primitiveLength+=u.length/3,i.vertexLength+=e}var a;if(o&&o.polyCount.length>0){if(o.borders){o.vertexArrayOffset=this.centroidVertexArray.length;const t=o.borders,e=this.featuresOnBorder.push(o)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(o.borders?void 0:o.centroid(),o),h(!this.centroidVertexArray.length||this.centroidVertexArray.length===this.layoutVertexArray.length)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e,n=!0){let i,r;if(t)if(0!==t.y){const n=e.span()._mult(this.tileToMeter);i=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(n.x/10)),r=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else i=Math.ceil(7*(t.x+450)),r=0;else i=0,r=+n;h(n||void 0!==e.vertexArrayOffset);let o=n?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(o++,0,r),this.centroidVertexArray.emplace(o++,i,r);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(o++,i,r)}}}function tc(t,e){return t.x===e.x&&(t.x<0||t.x>Ls)||t.y===e.y&&(t.y<0||t.y>Ls)}wr("FillExtrusionBucket",Qu,{omit:["layers","features"]}),wr("PartMetadata",Ju);var ec={paint:new oa({"fill-extrusion-opacity":new ta(Qt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ea(Qt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ta(Qt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ta(Qt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new na(Qt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ea(Qt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ea(Qt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ta(Qt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function nc(t,e){return t.x*e.x+t.y*e.y}function ic(t,e){if(1===t.length){let n=0;const i=e[n++];let r;for(;!r||i.equals(r);)if(r=e[n++],!r)return 1/0;for(;n<e.length;n++){const o=e[n],a=t[0],s=r.sub(i),l=o.sub(i),u=a.sub(i),c=nc(s,s),h=nc(s,l),d=nc(l,l),f=nc(u,s),p=nc(u,l),m=c*d-h*h,_=(d*f-h*p)/m,g=(c*p-h*f)/m,y=1-_-g,v=i.z*y+r.z*_+o.z*g;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function rc(t){const e=new m(t[0],t[1]);return e.z=t[2],e}function oc(t,e,n,i,r,o,a,s){const l=a*r.getElevationAt(t,e,!0,!0),u=0!==o[0],c=u?0===o[1]?a*(o[0]/7-450):a*function(t,e,n){const i=Math.floor(e[0]/8),r=Math.floor(e[1]/8),o=10*(e[0]-8*i),a=10*(e[1]-8*r),s=t.getElevationAt(i,r,!0,!0),l=t.getMeterToDEM(n),u=Math.floor(.5*(o*l-1)),c=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(i,r),d=2*u+1,f=2*c+1,p=function(t,e,n,i,r){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+r,n,!0),t.getElevationAtPixel(e,n+r,!0),t.getElevationAtPixel(e+i,n+r,!0)]}(t,h.x-u,h.y-c,d,f),m=Math.abs(p[0]-p[1])+Math.abs(p[2]-p[3]),_=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),g=Math.min(.25,.5*l*m/d),y=Math.min(.25,.5*l*_/f);return s+Math.max(g*o,y*a)}(r,o,s):l;return{base:l+(0===n)?-1:n,top:u?Math.max(c+i,l+n+2):l+i}}const ac=ca([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:sc,size:lc,alignment:uc}=ac,cc=ca([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:hc,size:dc,alignment:fc}=cc,pc=Gu.VectorTileFeature.types,mc=Math.cos(Math.PI/180*37.5);class _c{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new pa,this.layoutVertexArray2=new ma,this.indexArray=new ka,this.programConfigurations=new _s(t.layers,t.zoom),this.segments=new Cs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=Du("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),r=[];for(const{feature:e,id:o,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Is(e,t);if(!this.layers[0]._featureFilter.filter(new Vo(this.zoom),l,n))continue;const u=i?i.evaluate(l,{},n):void 0,c={id:o,properties:e.properties,type:e.type,sourceLayerIndex:s,index:a,geometry:t?l.geometry:Ps(e),patterns:{},sortKey:u};r.push(c)}i&&r.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:o,featureIndex:a}=e,s=this.addConstantDashes(o);for(const i of r){const{geometry:r,index:l,sourceLayerIndex:u}=i;if(s&&this.addFeatureDashes(i,o),this.hasPattern){const t=Au("line",this.layers,i,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(i,r,l,n,o.positions);const c=t[l].feature;a.insert(c,r,l,u,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,r=n.layout.get("line-cap").value;if("constant"!==i.kind||"constant"!==r.kind)e=!0;else{const e=r.value,n=i.value;if(!n)continue;t.addDash(n.from,e),t.addDash(n.to,e),n.other&&t.addDash(n.other,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const i of this.layers){const r=i.paint.get("line-dasharray").value,o=i.layout.get("line-cap").value;if("constant"===r.kind&&"constant"===o.kind)continue;let a,s,l,u,c,h;if("constant"===r.kind){const t=r.value;if(!t)continue;a=t.other||t.to,s=t.to,l=t.from}else a=r.evaluate({zoom:n-1},t),s=r.evaluate({zoom:n},t),l=r.evaluate({zoom:n+1},t);"constant"===o.kind?u=c=h=o.value:(u=o.evaluate({zoom:n-1},t),c=o.evaluate({zoom:n},t),h=o.evaluate({zoom:n+1},t)),e.addDash(a,u),e.addDash(s,c),e.addDash(l,h);const d=e.getKey(a,u),f=e.getKey(s,c),p=e.getKey(l,h);t.patterns[i.id]={min:d,mid:f,max:p}}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,hc)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,sc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,i,r){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap").evaluate(t,{}),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const n of e)this.addLine(n,t,a,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}addLine(t,e,n,i,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===pc[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(r=1.05);const u=this.overscaling<=16?122880/(512*this.overscaling):0,c=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,f,p,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let e=l;e<s;e++){if(f=e===s-1?a?t[l+1]:void 0:t[e+1],f&&t[e].equals(f))continue;m&&(p=m),h&&(d=h),h=t[e],m=f?f.sub(h)._unit()._perp():p,p=p||m;let _=p.add(m);0===_.x&&0===_.y||_._unit();const g=p.x*m.x+p.y*m.y,y=_.x*m.x+_.y*m.y,v=0!==y?1/y:1/0,x=2*Math.sqrt(2-2*y),b=y<mc&&d&&f,w=p.x*m.y-p.y*m.x>0;if(b&&e>l){const t=h.dist(d);if(t>2*u){const e=h.sub(h.sub(d)._mult(u/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,p,0,0,c),d=e}}const M=d&&f;let T=M?n:a?"butt":i;if(M&&"round"===T&&(v<o?T="miter":v<=2&&(T="fakeround")),"miter"===T&&v>r&&(T="bevel"),"bevel"===T&&(v>2&&(T="flipbevel"),v<r&&(T="miter")),d&&this.updateDistance(d,h),"miter"===T)_._mult(v),this.addCurrentVertex(h,_,0,0,c);else if("flipbevel"===T){if(v>100)_=m.mult(-1);else{const t=v*p.add(m).mag()/p.sub(m).mag();_._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,_,0,0,c),this.addCurrentVertex(h,_.mult(-1),0,0,c)}else if("bevel"===T||"fakeround"===T){const t=-Math.sqrt(v*v-1),e=w?t:0,n=w?0:t;if(d&&this.addCurrentVertex(h,p,e,n,c),"fakeround"===T){const t=Math.round(180*x/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*t*t+(.848013+g*(.215638*g-1.06021)))}const i=m.sub(p)._mult(n)._add(p)._unit()._mult(w?-1:1);this.addHalfVertex(h,i.x,i.y,!1,w,0,c)}}f&&this.addCurrentVertex(h,m,-e,-n,c)}else if("butt"===T)this.addCurrentVertex(h,_,0,0,c);else if("square"===T){const t=d?1:-1;d||this.addCurrentVertex(h,_,t,t,c),this.addCurrentVertex(h,_,0,0,c),d&&this.addCurrentVertex(h,_,t,t,c)}else"round"===T&&(d&&(this.addCurrentVertex(h,p,0,0,c),this.addCurrentVertex(h,p,1,1,c,!0)),f&&(this.addCurrentVertex(h,m,-1,-1,c,!0),this.addCurrentVertex(h,m,0,0,c)));if(b&&e<s-1){const t=h.dist(f);if(t>2*u){const e=h.add(f.sub(h)._mult(u/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,c),h=e}}}}addCurrentVertex(t,e,n,i,r,o=!1){const a=e.x+e.y*n,s=e.y-e.x*n,l=-e.x+e.y*i,u=-e.y-e.x*i;this.addHalfVertex(t,a,s,o,!1,n,r),this.addHalfVertex(t,l,u,o,!0,-i,r)}addHalfVertex({x:t,y:e},n,i,r,o,a,s){this.layoutVertexArray.emplaceBack((t<<1)+(r?1:0),(e<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*i)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const t=this.lineClips.end-this.lineClips.start,e=this.totalDistance/t;this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}wr("LineBucket",_c,{omit:["layers","patternFeatures"]});const gc=new oa({"line-cap":new ea(Qt.layout_line["line-cap"]),"line-join":new ea(Qt.layout_line["line-join"]),"line-miter-limit":new ta(Qt.layout_line["line-miter-limit"]),"line-round-limit":new ta(Qt.layout_line["line-round-limit"]),"line-sort-key":new ea(Qt.layout_line["line-sort-key"])});var yc={paint:new oa({"line-opacity":new ea(Qt.paint_line["line-opacity"]),"line-color":new ea(Qt.paint_line["line-color"]),"line-translate":new ta(Qt.paint_line["line-translate"]),"line-translate-anchor":new ta(Qt.paint_line["line-translate-anchor"]),"line-width":new ea(Qt.paint_line["line-width"]),"line-gap-width":new ea(Qt.paint_line["line-gap-width"]),"line-offset":new ea(Qt.paint_line["line-offset"]),"line-blur":new ea(Qt.paint_line["line-blur"]),"line-dasharray":new na(Qt.paint_line["line-dasharray"]),"line-pattern":new na(Qt.paint_line["line-pattern"]),"line-gradient":new ra(Qt.paint_line["line-gradient"])}),layout:gc};const vc=new class extends ea{possiblyEvaluate(t,e){return e=new Vo(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,i){return e=A({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,i)}}(yc.paint.properties["line-width"].specification);vc.useIntegerZoom=!0;function xc(t,e){return e>0?e+2*t:t}const bc=ca([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wc=ca([{name:"a_projected_pos",components:3,type:"Float32"}],4),Mc=(ca([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ca([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Tc=ca([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]),kc=(ca([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ca([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Sc=ca([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ca([{name:"triangle",components:3,type:"Uint16"}]),ca([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ca([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ca([{type:"Float32",name:"offsetX"}]),ca([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ec=24;const Cc=128;function Lc(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Vo(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:i}=n;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let o=r;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[r],s=e[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:i}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new Vo(a)),maxSize:n.evaluate(new Vo(s)),interpolationType:i}}}function Dc(t,{uSize:e,uSizeT:n},{lowerSize:i,upperSize:r}){return"source"===t.kind?i/Cc:"composite"===t.kind?yn(i/Cc,r/Cc,n):e}function Ac(t,e){let n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:o,maxZoom:a}=t,s=r?E(On.interpolationFactor(r,e,o,a),0,1):0;"camera"===t.kind?i=yn(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:i}}var Pc=Object.freeze({__proto__:null,getSizeData:Lc,evaluateSizeForFeature:Dc,evaluateSizeForZoom:Ac,SIZE_PACK_FACTOR:Cc});function Ic(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Ho.applyArabicShaping&&(t=Ho.applyArabicShaping(t)),t}(t.text,e,n)})),t}const zc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Fc=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?r-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=u}return(f?-1:1)*a*Math.pow(2,o-i)},Rc=function(t,e,n,i,r,o){var a,s,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+f]=255&s,f+=p,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[n+f]=255&a,f+=p,a/=256,u-=8);t[n+f-p]|=128*m},Oc=Yc;function Yc(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Yc.Varint=0,Yc.Fixed64=1,Yc.Bytes=2,Yc.Fixed32=5;var Nc=4294967296,Bc=1/Nc,jc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Uc(t){return t.type===Yc.Bytes?t.readVarint()+t.pos:t.pos+1}function $c(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Hc(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function Vc(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function qc(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Wc(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Gc(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Zc(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Xc(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Kc(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Jc(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Qc(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function th(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function eh(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function nh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Yc.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=th(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=nh(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=th(this.buf,this.pos)+th(this.buf,this.pos+4)*Nc;return this.pos+=8,t},readSFixed64:function(){var t=th(this.buf,this.pos)+nh(this.buf,this.pos+4)*Nc;return this.pos+=8,t},readFloat:function(){var t=Fc(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Fc(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return $c(t,i,e);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return $c(t,i,e);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return $c(t,i,e);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return $c(t,i,e);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return $c(t,i,e);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return $c(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&jc?function(t,e,n){return jc.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var o,a,s,l=t[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[r+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,i+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),i+=String.fromCharCode(u),r+=c}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Yc.Bytes)return t.push(this.readVarint(e));var n=Uc(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Yc.Bytes)return t.push(this.readSVarint());var e=Uc(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Yc.Bytes)return t.push(this.readBoolean());var e=Uc(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Yc.Bytes)return t.push(this.readFloat());var e=Uc(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Yc.Bytes)return t.push(this.readDouble());var e=Uc(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Yc.Bytes)return t.push(this.readFixed32());var e=Uc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Yc.Bytes)return t.push(this.readSFixed32());var e=Uc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Yc.Bytes)return t.push(this.readFixed64());var e=Uc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Yc.Bytes)return t.push(this.readSFixed64());var e=Uc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Yc.Varint)for(;this.buf[this.pos++]>127;);else if(e===Yc.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Yc.Fixed32)this.pos+=4;else{if(e!==Yc.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),eh(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),eh(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),eh(this.buf,-1&t,this.pos),eh(this.buf,Math.floor(t*Bc),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),eh(this.buf,-1&t,this.pos),eh(this.buf,Math.floor(t*Bc),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Hc(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Rc(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Rc(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Hc(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Yc.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Vc,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,qc,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Zc,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Wc,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Gc,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Xc,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Kc,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Jc,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Qc,e)},writeBytesField:function(t,e){this.writeTag(t,Yc.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Yc.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Yc.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Yc.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Yc.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Yc.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Yc.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Yc.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Yc.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Yc.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};function ih(t,e,n){1===t&&n.readMessage(rh,e)}function rh(t,e,n){if(3===t){const{id:t,bitmap:i,width:r,height:o,left:a,top:s,advance:l}=n.readMessage(oh,{});e.push({id:t,bitmap:new jl({width:r+6,height:o+6},i),metrics:{width:r,height:o,left:a,top:s,advance:l}})}}function oh(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function ah(t){let e=0,n=0;for(const i of t)e+=i.w*i.h,n=Math.max(n,i.w);t.sort(((t,e)=>e.h-t.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let r=0,o=0;for(const e of t)for(let t=i.length-1;t>=0;t--){const n=i[t];if(!(e.w>n.w||e.h>n.h)){if(e.x=n.x,e.y=n.y,o=Math.max(o,e.y+e.h),r=Math.max(r,e.x+e.w),e.w===n.w&&e.h===n.h){const e=i.pop();t<i.length&&(i[t]=e)}else e.h===n.h?(n.x+=e.w,n.w-=e.w):e.w===n.w?(n.y+=e.h,n.h-=e.h):(i.push({x:n.x+e.w,y:n.y,w:n.w-e.w,h:e.h}),n.y+=e.h,n.h-=e.h);break}}return{w:r,h:o,fill:e/(r*o)||0}}class sh{constructor(t,{pixelRatio:e,version:n,stretchX:i,stretchY:r,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=i,this.stretchY=r,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class lh{constructor(t,e){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,n,r),this.addImages(e,i,r);const{w:o,h:a}=ah(r),s=new Ul({width:o||1,height:a||1});for(const e in t){const i=t[e],r=n[e].paddedRect;Ul.copy(i.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},i.data)}for(const t in e){const n=e[t],r=i[t].paddedRect,o=r.x+1,a=r.y+1,l=n.data.width,u=n.data.height;Ul.copy(n.data,s,{x:0,y:0},{x:o,y:a},n.data),Ul.copy(n.data,s,{x:0,y:u-1},{x:o,y:a-1},{width:l,height:1}),Ul.copy(n.data,s,{x:0,y:0},{x:o,y:a+u},{width:l,height:1}),Ul.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:u}),Ul.copy(n.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:u})}this.image=s,this.iconPositions=n,this.patternPositions=i}addImages(t,e,n){for(const i in t){const r=t[i],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(o),e[i]=new sh(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[i,r]=t.tl;n.update(e.data,void 0,{x:i,y:r})}}wr("ImagePosition",sh),wr("ImageAtlas",lh);const uh={horizontal:1,vertical:2,horizontalOnly:3},ch=-17;class hh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new hh;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new hh;return e.imageName=t,e}}class dh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new dh;for(let i=0;i<t.sections.length;i++){const r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n+1)||null,r=t.charCodeAt(n-1)||null;i&&Eo(i)&&!zc[t[n+1]]||r&&Eo(r)&&!zc[t[n-1]]||!zc[t[n]]?e+=t[n]:e+=zc[t[n]]}return e}(this.text)}trim(){let t=0;for(let e=0;e<this.text.length&&ph[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&ph[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new dh;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(hh.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void $("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(hh.forImage(e)),this.sectionIndex.push(this.sections.length-1)):$("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function fh(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m){const _=dh.fromFeature(t,r);let g;h===uh.vertical&&_.verticalizePunctuation();const{processBidirectionalText:y,processStyledBidirectionalText:v}=Ho;if(y&&1===_.sections.length){g=[];const t=y(_.toString(),bh(_,u,o,e,i,f,p));for(const e of t){const t=new dh;t.text=e,t.sections=_.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);g.push(t)}}else if(v){g=[];const t=v(_.text,_.sectionIndex,bh(_,u,o,e,i,f,p));for(const e of t){const t=new dh;t.text=e[0],t.sectionIndex=e[1],t.sections=_.sections,g.push(t)}}else g=function(t,e){const n=[],i=t.text;let r=0;for(const i of e)n.push(t.substring(r,i)),r=i;return r<i.length&&n.push(t.substring(r,i.length)),n}(_,bh(_,u,o,e,i,f,p));const x=[],b={positionedLines:x,text:_.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,e,n,i,r,o,a,s,l,u,c,h){let d=0,f=ch,p=0,m=0;const _="right"===s?1:"left"===s?0:.5;let g=0;for(const a of r){a.trim();const r=a.getMaxScale(),s=(r-1)*Ec,y={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=y;const v=y.positionedGlyphs;let x=0;if(!a.length()){f+=o,++g;continue}for(let o=0;o<a.length();o++){const p=a.getSection(o),m=a.getSectionIndex(o),_=a.getCharCode(o);let g=0,y=null,b=null,w=null,M=Ec;const T=!(l===uh.horizontal||!c&&!So(_)||c&&(ph[_]||Co(_)));if(p.imageName){const e=i[p.imageName];if(!e)continue;w=p.imageName,t.iconsInText=t.iconsInText||!0,b=e.paddedRect;const n=e.displaySize;p.scale=p.scale*Ec/h,y={width:n[0],height:n[1],left:1,top:-3,advance:T?n[1]:n[0],localGlyph:!1},g=s+(Ec-n[1]*p.scale),M=y.advance;const o=T?n[0]*p.scale-Ec*r:n[1]*p.scale-Ec*r;o>0&&o>x&&(x=o)}else{const t=n[p.fontStack],i=t&&t[_];if(i&&i.rect)b=i.rect,y=i.metrics;else{const t=e[p.fontStack],n=t&&t[_];if(!n)continue;y=n.metrics}g=(r-p.scale)*Ec}T?(t.verticalizable=!0,v.push({glyph:_,imageName:w,x:d,y:f+g,vertical:T,scale:p.scale,localGlyph:y.localGlyph,fontStack:p.fontStack,sectionIndex:m,metrics:y,rect:b}),d+=M*p.scale+u):(v.push({glyph:_,imageName:w,x:d,y:f+g,vertical:T,scale:p.scale,localGlyph:y.localGlyph,fontStack:p.fontStack,sectionIndex:m,metrics:y,rect:b}),d+=y.advance*p.scale+u)}if(0!==v.length){const t=d-u;p=Math.max(t,p),Mh(v,0,v.length-1,_,x)}d=0;const b=o*r+x;y.lineOffset=Math.max(x,s),f+=b,m=Math.max(b,m),++g}const y=f-ch,{horizontalAlign:v,verticalAlign:x}=wh(a);(function(t,e,n,i,r,o,a,s,l){const u=(e-n)*r;let c=0;c=o!==a?-s*i-ch:(-i*l+.5)*a;for(const e of t)for(const t of e.positionedGlyphs)t.x+=u,t.y+=c})(t.positionedLines,_,v,x,p,m,o,y,r.length),t.top+=-x*y,t.bottom=t.top+y,t.left+=-v*p,t.right=t.left+p}(b,e,n,i,g,a,s,l,h,u,d,m),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(x)&&b}const ph={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _h(t,e,n,i,r,o){if(e.imageName){const t=i[e.imageName];return t?t.displaySize[0]*e.scale*Ec/o+r:0}{const i=n[e.fontStack],o=i&&i[t];return o?o.metrics.advance*e.scale+r:0}}function gh(t,e,n,i){const r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function yh(t,e,n){let i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function vh(t,e,n,i,r,o){let a=null,s=gh(e,n,r,o);for(const t of i){const i=gh(e-t.x,n,r,o)+t.badness;i<=s&&(a=t,s=i)}return{index:t,x:e,priorBreak:a,badness:s}}function xh(t){return t?xh(t.priorBreak).concat(t.index):[]}function bh(t,e,n,i,r,o,a){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,n,i,r,o){let a=0;for(let n=0;n<t.length();n++){const s=t.getSection(n);a+=_h(t.getCharCode(n),s,i,r,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,i,r,a),u=t.text.indexOf("​")>=0;let c=0;for(let n=0;n<t.length();n++){const o=t.getSection(n),d=t.getCharCode(n);if(ph[d]||(c+=_h(d,o,i,r,e,a)),n<t.length()-1){const e=!((h=d)<11904||!(eo(h)||Jr(h)||vo(h)||_o(h)||oo(h)||qr(h)||no(h)||Zr(h)||ao(h)||lo(h)||ro(h)||wo(h)||Xr(h)||Gr(h)||Wr(h)||io(h)||Kr(h)||yo(h)||co(h)||uo(h)));(mh[d]||e||o.imageName)&&s.push(vh(n+1,c,l,s,yh(d,t.getCharCode(n+1),e&&u),!1))}}var h;return xh(vh(t.length(),c,l,s,0,!0))}function wh(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Mh(t,e,n,i,r){if(!i&&!r)return;const o=t[n],a=o.metrics.advance*o.scale,s=(t[n].x+a)*i;for(let i=e;i<=n;i++)t[i].x-=s,t[i].y+=r}function Th(t,e,n){const{horizontalAlign:i,verticalAlign:r}=wh(n),o=e[0],a=e[1],s=o-t.displaySize[0]*i,l=s+t.displaySize[0],u=a-t.displaySize[1]*r;return{image:t,top:u,bottom:u+t.displaySize[1],left:s,right:l}}function kh(t,e,n,i,r,o){h("none"!==n),h(Array.isArray(i)&&4===i.length),h(Array.isArray(r)&&2===r.length);const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,u=e.right*o;let c,d,f,p;"width"===n||"both"===n?(p=r[0]+l-i[3],d=r[0]+u+i[1]):(p=r[0]+(l+u-a.displaySize[0])/2,d=p+a.displaySize[0]);const m=e.top*o,_=e.bottom*o;return"height"===n||"both"===n?(c=r[1]+m-i[0],f=r[1]+_+i[2]):(c=r[1]+(m+_-a.displaySize[1])/2,f=c+a.displaySize[1]),{image:a,top:c,right:d,bottom:f,left:p,collisionPadding:s}}class Sh extends m{constructor(t,e,n,i){super(t,e),this.angle=n,void 0!==i&&(this.segment=i)}clone(){return new Sh(this.x,this.y,this.angle,this.segment)}}function Eh(t,e,n,i,r){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let u=0;for(;s<n/2;){const e=t[a-1],n=t[a],o=t[a+1];if(!o)return!1;let c=e.angleTo(n)-n.angleTo(o);for(c=Math.abs((c+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:c}),u+=c;s-l[0].distance>i;)u-=l.shift().angleDelta;if(u>r)return!1;a++,s+=n.dist(o)}return!0}function Ch(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Lh(t,e,n){return t?.6*e*n:0}function Dh(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Ah(t,e,n,i,r,o){const a=Lh(n,r,o),s=Dh(n,i)*o;let l=0;const u=Ch(t)/2;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1],o=i.dist(r);if(l+o>u){const c=(u-l)/o,h=yn(i.x,r.x,c),d=yn(i.y,r.y,c),f=new Sh(h,d,r.angleTo(i),n);return f._round(),!a||Eh(t,f,s,a,e)?f:void 0}l+=o}}function Ph(t,e,n,i,r,o,a,s,l){const u=Lh(i,o,a),c=Dh(i,r),h=c*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),Ih(t,d?e/2*s%e:(c/2+2*o)*a*s%e,e,u,n,h,d,!1,l)}function Ih(t,e,n,i,r,o,a,s,l){const u=o/2,c=Ch(t);let h=0,d=e-n,f=[];for(let e=0;e<t.length-1;e++){const a=t[e],s=t[e+1],p=a.dist(s),m=s.angleTo(a);for(;d+n<h+p;){d+=n;const _=(d-h)/p,g=yn(a.x,s.x,_),y=yn(a.y,s.y,_);if(g>=0&&g<l&&y>=0&&y<l&&d-u>=0&&d+u<=c){const n=new Sh(g,y,m,e);n._round(),i&&!Eh(t,n,o,i,r)||f.push(n)}}h+=p}return s||f.length||a||(f=Ih(t,h/2,n,i,r,o,a,!0,l)),f}function zh(t,e,n,i,r){const o=[];for(let a=0;a<t.length;a++){const s=t[a];let l;for(let t=0;t<s.length-1;t++){let a=s[t],u=s[t+1];a.x<e&&u.x<e||(a.x<e?a=new m(e,a.y+(u.y-a.y)*((e-a.x)/(u.x-a.x)))._round():u.x<e&&(u=new m(e,a.y+(u.y-a.y)*((e-a.x)/(u.x-a.x)))._round()),a.y<n&&u.y<n||(a.y<n?a=new m(a.x+(u.x-a.x)*((n-a.y)/(u.y-a.y)),n)._round():u.y<n&&(u=new m(a.x+(u.x-a.x)*((n-a.y)/(u.y-a.y)),n)._round()),a.x>=i&&u.x>=i||(a.x>=i?a=new m(i,a.y+(u.y-a.y)*((i-a.x)/(u.x-a.x)))._round():u.x>=i&&(u=new m(i,a.y+(u.y-a.y)*((i-a.x)/(u.x-a.x)))._round()),a.y>=r&&u.y>=r||(a.y>=r?a=new m(a.x+(u.x-a.x)*((r-a.y)/(u.y-a.y)),r)._round():u.y>=r&&(u=new m(a.x+(u.x-a.x)*((r-a.y)/(u.y-a.y)),r)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(u)))))}}return o}wr("Anchor",Sh);var Fh=Yh,Rh=Yh,Oh=1e20;function Yh(t,e,n,i,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Nh(t,e,n,i,r,o){for(var a=0;a<e;a++)Bh(t,a,e,n,i,r,o);for(var s=0;s<n;s++)Bh(t,s*e,1,e,i,r,o)}function Bh(t,e,n,i,r,o,a){var s,l,u,c;for(o[0]=0,a[0]=-Oh,a[1]=Oh,s=0;s<i;s++)r[s]=t[e+s*n];for(s=1,l=0,u=0;s<i;s++){do{c=o[l],u=(r[s]-r[c]+s*s-c*c)/(s-c)/2}while(u<=a[l]&&--l>-1);o[++l]=s,a[l]=u,a[l+1]=Oh}for(s=0,l=0;s<i;s++){for(;a[l+1]<s;)l++;c=o[l],t[e+s*n]=r[c]+(s-c)*(s-c)}}Yh.prototype._draw=function(t,e){var n,i,r,o,a,s,l,u,c,h=this.ctx.measureText(t),d=h.width,f=2*this.buffer;e&&this.useMetrics?(a=Math.floor(h.actualBoundingBoxAscent),u=this.buffer+Math.ceil(h.actualBoundingBoxAscent),s=this.buffer,l=this.buffer,n=(i=Math.min(this.size,Math.ceil(h.actualBoundingBoxRight-h.actualBoundingBoxLeft)))+f,r=(o=Math.min(this.size-s,Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent)))+f,this.ctx.textBaseline="alphabetic"):(n=i=this.size,r=o=this.size,a=19*this.fontSize/24,s=l=0,u=this.middle,this.ctx.textBaseline="middle"),i&&o&&(this.ctx.clearRect(l,s,i,o),this.ctx.fillText(t,this.buffer,u),c=this.ctx.getImageData(l,s,i,o));var p=new Uint8ClampedArray(n*r);return function(t,e,n,i,r,o,a){o.fill(Oh,0,e*n),a.fill(0,0,e*n);for(var s=(e-i)/2,l=0;l<r;l++)for(var u=0;u<i;u++){var c=(l+s)*e+u+s,h=t.data[4*(l*i+u)+3]/255;if(1===h)o[c]=0,a[c]=Oh;else if(0===h)o[c]=Oh,a[c]=0;else{var d=Math.max(0,.5-h),f=Math.max(0,h-.5);o[c]=d*d,a[c]=f*f}}}(c,n,r,i,o,this.gridOuter,this.gridInner),Nh(this.gridOuter,n,r,this.f,this.v,this.z),Nh(this.gridInner,n,r,this.f,this.v,this.z),function(t,e,n,i,r,o,a){for(var s=0;s<e*n;s++){var l=Math.sqrt(i[s])-Math.sqrt(r[s]);t[s]=Math.round(255-255*(l/o+a))}}(p,n,r,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:i,height:o,sdfWidth:n,sdfHeight:r,top:a,left:0,advance:d}}},Yh.prototype.draw=function(t){return this._draw(t,!1).data},Yh.prototype.drawWithMetrics=function(t){return this._draw(t,!0)},Fh.default=Rh;const jh={none:0,ideographs:1,all:2};class Uh{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const e in t)for(const i of t[e])n.push({stack:e,id:i});L(n,(({stack:t,id:e},n)=>{let i=this.entries[t];i||(i=this.entries[t]={glyphs:{},requests:{},ranges:{}});let r=i.glyphs[e];if(void 0!==r)return void n(null,{stack:t,id:e,glyph:r});if(r=this._tinySDF(i,t,e),r)return i.glyphs[e]=r,void n(null,{stack:t,id:e,glyph:r});const o=Math.floor(e/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(i.ranges[o])return void n(null,{stack:t,id:e,glyph:r});let a=i.requests[o];a||(a=i.requests[o]=[],Uh.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(i.glyphs[+t]=e[+t]);i.ranges[o]=!0}for(const n of a)n(t,e);delete i.requests[o]}))),a.push(((i,r)=>{i?n(i):r&&n(null,{stack:t,id:e,glyph:r[e]||null})}))}),((t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:i,glyph:r}of n)(t[e]||(t[e]={}))[i]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics};e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==jh.none&&(this.localGlyphMode===jh.all?!!this.localFontFamily:!!this.localFontFamily&&(lo(t)||fo(t)||Xr(t)||Kr(t)))}_tinySDF(t,e,n){const i=this.localFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(n))return;let r=t.tinySDF;if(!r){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),r=t.tinySDF=new Uh.TinySDF(48,6,16,.25,i,n)}if(this.localGlyphs[r.fontWeight][n])return this.localGlyphs[r.fontWeight][n];const{data:o,metrics:a}=r.drawWithMetrics(String.fromCharCode(n)),{sdfWidth:s,sdfHeight:l,width:u,height:c,left:h,top:d,advance:f}=a;return this.localGlyphs[r.fontWeight][n]={id:n,bitmap:new jl({width:s,height:l},o),metrics:{width:u/2,height:c/2,left:h/2,top:d/2-27,advance:f/2,localGlyph:!0}}}}Uh.loadGlyphRange=function(t,e,n,i,r){const o=256*e,a=o+255,s=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${o}-${a}`),Ft.Glyphs);Bt(s,((t,e)=>{if(t)r(t);else if(e){const t={};for(const n of function(t){return new Oc(t).readFields(ih,[])}(e))t[n.id]=n;r(null,t)}}))},Uh.TinySDF=Fh;function $h(t,e,n,i){const r=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,u=t.right-t.left,c=t.bottom-t.top,h=o.stretchX||[[0,s]],d=o.stretchY||[[0,l]],f=(t,e)=>t+e[1]-e[0],p=h.reduce(f,0),_=d.reduce(f,0),g=s-p,y=l-_;let v=0,x=p,b=0,w=_,M=0,T=g,k=0,S=y;if(o.content&&i){const t=o.content;v=Hh(h,0,t[0]),b=Hh(d,0,t[1]),x=Hh(h,t[0],t[2]),w=Hh(d,t[1],t[3]),M=t[0]-v,k=t[1]-b,T=t[2]-t[0]-x,S=t[3]-t[1]-w}const E=(i,r,s,l)=>{const h=qh(i.stretch-v,x,u,t.left),d=Wh(i.fixed-M,T,i.stretch,p),f=qh(r.stretch-b,w,c,t.top),g=Wh(r.fixed-k,S,r.stretch,_),y=qh(s.stretch-v,x,u,t.left),E=Wh(s.fixed-M,T,s.stretch,p),C=qh(l.stretch-b,w,c,t.top),L=Wh(l.fixed-k,S,l.stretch,_),D=new m(h,f),A=new m(y,f),P=new m(y,C),I=new m(h,C),z=new m(d/a,g/a),F=new m(E/a,L/a),R=e*Math.PI/180;if(R){const t=Math.sin(R),e=Math.cos(R),n=[e,-t,t,e];D._matMult(n),A._matMult(n),I._matMult(n),P._matMult(n)}const O=i.stretch+i.fixed,Y=s.stretch+s.fixed,N=r.stretch+r.fixed,B=l.stretch+l.fixed;return{tl:D,tr:A,bl:I,br:P,tex:{x:o.paddedRect.x+1+O,y:o.paddedRect.y+1+N,w:Y-O,h:B-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:F,minFontScaleX:T/a/u,minFontScaleY:S/a/c,isSDF:n}};if(i&&(o.stretchX||o.stretchY)){const t=Vh(h,g,p),e=Vh(d,y,_);for(let n=0;n<t.length-1;n++){const i=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++){const n=e[t],a=e[t+1];r.push(E(i,n,o,a))}}}else r.push(E({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return r}function Hh(t,e,n){let i=0;for(const r of t)i+=Math.max(e,Math.min(n,r[1]))-Math.max(e,Math.min(n,r[0]));return i}function Vh(t,e,n){const i=[{fixed:-1,stretch:0}];for(const[e,n]of t){const t=i[i.length-1];i.push({fixed:e-t.stretch,stretch:t.stretch}),i.push({fixed:e-t.stretch,stretch:t.stretch+(n-e)})}return i.push({fixed:e+1,stretch:n}),i}function qh(t,e,n,i){return t/e*n+i}function Wh(t,e,n,i){return t-e*n/i}class Gh{constructor(t=[],e=Zh){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const a=i+1;if(a<this.length&&n(e[a],o)<0&&(i=a,o=e[a]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function Zh(t,e){return t<e?-1:t>e?1:0}function Xh(t,e=1,n=!1){let i=1/0,r=1/0,o=-1/0,a=-1/0;const s=t[0];for(let t=0;t<s.length;t++){const e=s[t];(!t||e.x<i)&&(i=e.x),(!t||e.y<r)&&(r=e.y),(!t||e.x>o)&&(o=e.x),(!t||e.y>a)&&(a=e.y)}const l=o-i,u=a-r,c=Math.min(l,u);let h=c/2;const d=new Gh([],Kh);if(0===c)return new m(i,r);for(let e=i;e<o;e+=c)for(let n=r;n<a;n+=c)d.push(new Jh(e+h,n+h,h,t));let f=function(t){let e=0,n=0,i=0;const r=t[0];for(let t=0,o=r.length,a=o-1;t<o;a=t++){const o=r[t],s=r[a],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,i+=(o.y+s.y)*l,e+=3*l}return new Jh(n/e,i/e,0,t)}(t),p=d.length;for(;d.length;){const i=d.pop();(i.d>f.d||!f.d)&&(f=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-f.d<=e||(h=i.h/2,d.push(new Jh(i.p.x-h,i.p.y-h,h,t)),d.push(new Jh(i.p.x+h,i.p.y-h,h,t)),d.push(new Jh(i.p.x-h,i.p.y+h,h,t)),d.push(new Jh(i.p.x+h,i.p.y+h,h,t)),p+=4)}return n&&(console.log(`num probes: ${p}`),console.log(`best distance: ${f.d}`)),f.p}function Kh(t,e){return e.max-t.max}function Jh(t,e,n,i){this.p=new m(t,e),this.h=n,this.d=function(t,e){let n=!1,i=1/0;for(let r=0;r<e.length;r++){const o=e[r];for(let e=0,r=o.length,a=r-1;e<r;a=e++){const r=o[e],s=o[a];r.y>t.y!=s.y>t.y&&t.x<(s.x-r.x)*(t.y-r.y)/(s.y-r.y)+r.x&&(n=!n),i=Math.min(i,$s(t,r,s))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}const Qh=Number.POSITIVE_INFINITY;function td(t,e){return e[1]!==Qh?function(t,e,n){let i=0,r=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,r]}(t,e[0],e[1]):function(t,e){let n=0,i=0;e<0&&(e=0);const r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=e;break;case"right":n=-e}return[n,i]}(t,e[0])}function ed(t,e,n,i,r,o,a,s){t.createArrays();const l=512*t.overscaling;t.tilePixelRatio=Ls/l,t.compareText={},t.iconsNeedLinear=!1;const u=t.layers[0].layout,c=t.layers[0]._unevaluatedLayout._values,h={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;h.compositeTextSizes=[c["text-size"].possiblyEvaluate(new Vo(e),a),c["text-size"].possiblyEvaluate(new Vo(n),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;h.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new Vo(e),a),c["icon-size"].possiblyEvaluate(new Vo(n),a)]}h.layoutTextSize=c["text-size"].possiblyEvaluate(new Vo(s+1),a),h.layoutIconSize=c["icon-size"].possiblyEvaluate(new Vo(s+1),a),h.textMaxSize=c["text-size"].possiblyEvaluate(new Vo(18),a);const d="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),f=u.get("text-keep-upright"),p=u.get("text-size");for(const o of t.features){const s=u.get("text-font").evaluate(o,{},a).join(","),l=p.evaluate(o,{},a),c=h.layoutTextSize.evaluate(o,{},a),m=h.layoutIconSize.evaluate(o,{},a),_={horizontal:{},vertical:void 0},g=o.text;let y,v=[0,0];if(g){const i=g.toString(),h=u.get("text-letter-spacing").evaluate(o,{},a)*Ec,p=u.get("text-line-height").evaluate(o,{},a)*Ec,m=To(i)?h:0,y=u.get("text-anchor").evaluate(o,{},a),x=u.get("text-variable-anchor");if(!x){const t=u.get("text-radial-offset").evaluate(o,{},a);v=t?td(y,[t*Ec,Qh]):u.get("text-offset").evaluate(o,{},a).map((t=>t*Ec))}let b=d?"center":u.get("text-justify").evaluate(o,{},a);const w=u.get("symbol-placement"),M="point"===w?u.get("text-max-width").evaluate(o,{},a)*Ec:0,T=()=>{t.allowVerticalPlacement&&Mo(i)&&(_.vertical=fh(g,e,n,r,s,M,p,y,"left",m,v,uh.vertical,!0,w,c,l))};if(!d&&x){const t="auto"===b?x.map((t=>nd(t))):[b];let i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(!_.horizontal[a])if(i)_.horizontal[a]=_.horizontal[0];else{const t=fh(g,e,n,r,s,M,p,"center",a,m,v,uh.horizontal,!1,w,c,l);t&&(_.horizontal[a]=t,i=1===t.positionedLines.length)}}T()}else{"auto"===b&&(b=nd(y));const t=fh(g,e,n,r,s,M,p,y,b,m,v,uh.horizontal,!1,w,c,l);t&&(_.horizontal[b]=t),T(),Mo(i)&&d&&f&&(_.vertical=fh(g,e,n,r,s,M,p,y,b,m,v,uh.vertical,!1,w,c,l))}}let x=!1;if(o.icon&&o.icon.name){const e=i[o.icon.name];e&&(y=Th(r[o.icon.name],u.get("icon-offset").evaluate(o,{},a),u.get("icon-anchor").evaluate(o,{},a)),x=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&$("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const b=ad(_.horizontal)||_.vertical;t.iconsInText||(t.iconsInText=!!b&&b.iconsInText),(b||y)&&id(t,o,_,y,i,h,c,m,v,x,a)}o&&t.generateCollisionDebugBuffers(s,t.collisionBoxArray)}function nd(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function id(t,e,n,i,r,o,a,s,l,u,c){let h=o.textMaxSize.evaluate(e,{},c);void 0===h&&(h=a);const d=t.layers[0].layout,f=d.get("icon-offset").evaluate(e,{},c),p=ad(n.horizontal),m=a/24,_=t.tilePixelRatio*h/24,g=(t.tilePixelRatio,t.tilePixelRatio*d.get("symbol-spacing")),y=d.get("text-padding")*t.tilePixelRatio,v=d.get("icon-padding")*t.tilePixelRatio,x=w(d.get("text-max-angle")),b="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),M="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),T=d.get("symbol-placement"),k=g/2,S=d.get("icon-text-fit");let E;i&&"none"!==S&&(t.allowVerticalPlacement&&n.vertical&&(E=kh(i,n.vertical,S,d.get("icon-text-fit-padding"),f,m)),p&&(i=kh(i,p,S,d.get("icon-text-fit-padding"),f,m)));const C=(s,h)=>{h.x<0||h.x>=Ls||h.y<0||h.y>=Ls||function(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_,g,y,v,x,b,w,M){const T=t.addToLineVertexArray(e,n);let k,S,E,C,L,D,A,P=0,I=0,z=0,F=0,R=-1,O=-1;const Y={};let N=Xa(""),B=0,j=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?[B,j]=s.layout.get("text-offset").evaluate(v,{},w).map((t=>t*Ec)):(B=s.layout.get("text-radial-offset").evaluate(v,{},w)*Ec,j=Qh),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(f)D=ld(t),a&&(A=ld(a));else{const n=s.layout.get("text-rotate").evaluate(v,{},w)+90;E=sd(l,e,u,c,h,t,d,n),a&&(C=sd(l,e,u,c,h,a,_,n))}}if(r){const n=s.layout.get("icon-rotate").evaluate(v,{},w),i="none"!==s.layout.get("icon-text-fit"),o=$h(r,n,b,i),d=a?$h(a,n,b,i):void 0;S=sd(l,e,u,c,h,r,_,n),P=4*o.length;const f=t.iconSizeData;let p=null;"source"===f.kind?(p=[Cc*s.layout.get("icon-size").evaluate(v,{},w)],p[0]>rd&&$(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===f.kind&&(p=[Cc*x.compositeIconSizes[0].evaluate(v,{},w),Cc*x.compositeIconSizes[1].evaluate(v,{},w)],(p[0]>rd||p[1]>rd)&&$(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,o,p,y,g,v,!1,e,T.lineStartIndex,T.lineLength,-1,w),R=t.icon.placedSymbolArray.length-1,d&&(I=4*d.length,t.addSymbols(t.icon,d,p,y,g,v,uh.vertical,e,T.lineStartIndex,T.lineLength,-1,w),O=t.icon.placedSymbolArray.length-1)}for(const n in i.horizontal){const r=i.horizontal[n];k||(N=Xa(r.text),f?L=ld(r):k=sd(l,e,u,c,h,r,d,s.layout.get("text-rotate").evaluate(v,{},w)));const a=1===r.positionedLines.length;if(z+=od(t,e,r,o,s,f,v,p,T,i.vertical?uh.horizontal:uh.horizontalOnly,a?Object.keys(i.horizontal):[n],Y,R,x,w),a)break}i.vertical&&(F+=od(t,e,i.vertical,o,s,f,v,p,T,uh.vertical,["vertical"],Y,O,x,w));let U=-1;const H=(t,e)=>t?Math.max(t,e):e;U=H(L,U),U=H(D,U),U=H(A,U);const V=U>-1?1:0;V&&(U*=M/Ec),t.glyphOffsetArray.length>=gd.MAX_GLYPHS&&$("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==v.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,v.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,Y.right>=0?Y.right:-1,Y.center>=0?Y.center:-1,Y.left>=0?Y.left:-1,Y.vertical||-1,R,O,N,void 0!==k?k:t.collisionBoxArray.length,void 0!==k?k+1:t.collisionBoxArray.length,void 0!==E?E:t.collisionBoxArray.length,void 0!==E?E+1:t.collisionBoxArray.length,void 0!==S?S:t.collisionBoxArray.length,void 0!==S?S+1:t.collisionBoxArray.length,C||t.collisionBoxArray.length,C?C+1:t.collisionBoxArray.length,u,z,F,P,I,V,0,B,j,U)}(t,h,s,n,i,r,E,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,y,b,l,0,v,M,f,e,o,u,c,a)};if("line"===T)for(const r of zh(e.geometry,0,0,Ls,Ls)){const e=Ph(r,g,x,n.vertical||p,i,24,_,t.overscaling,Ls);for(const n of e){const e=p;e&&ud(t,e.text,k,n)||C(r,n)}}else if("line-center"===T){for(const t of e.geometry)if(t.length>1){const e=Ah(t,x,n.vertical||p,i,24,_);e&&C(t,e)}}else if("Polygon"===e.type)for(const t of Cu(e.geometry,0)){const e=Xh(t,16);C(t[0],new Sh(e.x,e.y,0))}else if("LineString"===e.type)for(const t of e.geometry)C(t,new Sh(t[0].x,t[0].y,0));else if("Point"===e.type)for(const t of e.geometry)for(const e of t)C([e],new Sh(e.x,e.y,0))}const rd=32640;function od(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p){const _=function(t,e,n,i,r,o,a,s){const l=i.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=[];for(const t of e.positionedLines)for(const i of t.positionedGlyphs){if(!i.rect)continue;const o=i.rect||{};let c=4,h=!0,d=1,f=0;const p=(r||s)&&i.vertical,_=i.metrics.advance*i.scale/2;if(s&&e.verticalizable){const e=(i.scale-1)*Ec,n=(Ec-i.metrics.width*i.scale)/2;f=t.lineOffset/2-(i.imageName?-n:e)}if(i.imageName){const t=a[i.imageName];h=t.sdf,d=t.pixelRatio,c=1/d}const g=r?[i.x+_,i.y]:[0,0];let y=r?[0,0]:[i.x+_+n[0],i.y+n[1]-f],v=[0,0];p&&(v=y,y=[0,0]);const x=(i.metrics.left-c)*i.scale-_+y[0],b=(-i.metrics.top-c)*i.scale+y[1],w=x+o.w*i.scale/(d*(i.localGlyph?2:1)),M=b+o.h*i.scale/(d*(i.localGlyph?2:1)),T=new m(x,b),k=new m(w,b),S=new m(x,M),E=new m(w,M);if(p){const t=new m(-_,_-ch),e=-Math.PI/2,n=12-_,r=i.imageName?n:0,o=new m(22-n,-r),a=new m(...v);T._rotateAround(e,t)._add(o)._add(a),k._rotateAround(e,t)._add(o)._add(a),S._rotateAround(e,t)._add(o)._add(a),E._rotateAround(e,t)._add(o)._add(a)}if(l){const t=Math.sin(l),e=Math.cos(l),n=[e,-t,t,e];T._matMult(n),k._matMult(n),S._matMult(n),E._matMult(n)}const C=new m(0,0),L=new m(0,0),D=0,A=0;u.push({tl:T,tr:k,bl:S,br:E,tex:o,writingMode:e.writingMode,glyphOffset:g,sectionIndex:i.sectionIndex,isSDF:h,pixelOffsetTL:C,pixelOffsetBR:L,minFontScaleX:D,minFontScaleY:A})}return u}(0,n,s,r,o,a,i,t.allowVerticalPlacement),g=t.textSizeData;let y=null;"source"===g.kind?(y=[Cc*r.layout.get("text-size").evaluate(a,{},p)],y[0]>rd&&$(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===g.kind&&(y=[Cc*f.compositeTextSizes[0].evaluate(a,{},p),Cc*f.compositeTextSizes[1].evaluate(a,{},p)],(y[0]>rd||y[1]>rd)&&$(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,_,y,s,o,a,u,e,l.lineStartIndex,l.lineLength,d,p);for(const e of c)h[e]=t.text.placedSymbolArray.length-1;return 4*_.length}function ad(t){for(const e in t)return t[e];return null}function sd(t,e,n,i,r,o,a,s){let l=o.top,u=o.bottom,c=o.left,h=o.right;const d=o.collisionPadding;if(d&&(c-=d[0],l-=d[1],h+=d[2],u+=d[3]),s){const t=new m(c,l),e=new m(h,l),n=new m(c,u),i=new m(h,u),r=w(s);t._rotate(r),e._rotate(r),n._rotate(r),i._rotate(r),c=Math.min(t.x,e.x,n.x,i.x),h=Math.max(t.x,e.x,n.x,i.x),l=Math.min(t.y,e.y,n.y,i.y),u=Math.max(t.y,e.y,n.y,i.y)}return t.emplaceBack(e.x,e.y,c,l,h,u,a,n,i,r),t.length-1}function ld(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function ud(t,e,n,i){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(i.dist(t[e])<n)return!0}else r[e]=[];return r[e].push(i),!1}const cd=Gu.VectorTileFeature.types,hd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function dd(t,e,n,i,r,o,a,s,l,u,c,h,d){const f=s?Math.min(rd,Math.round(s[0])):0,p=s?Math.min(rd,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),o,a,(f<<1)+(l?1:0),p,16*u,16*c,256*h,256*d)}function fd(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function pd(t){for(const e of t.sections)if(Ao(e.text))return!0;return!1}class md{constructor(t){this.layoutVertexArray=new ya,this.indexArray=new ka,this.programConfigurations=t,this.segments=new Cs,this.dynamicLayoutVertexArray=new va,this.opacityVertexArray=new xa,this.placedSymbolArray=new Oa}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,bc.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,wc.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,hd,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wr("SymbolBuffers",md);class _d{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Cs,this.collisionVertexArray=new Ta,this.collisionVertexArrayExt=new va}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Mc.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Tc.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}wr("CollisionBuffers",_d);class gd{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nl([]),this.placementViewportMatrix=nl([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Lc(this.zoom,e["text-size"]),this.iconSizeData=Lc(this.zoom,e["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1);const o="viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((t=>uh[t]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID}createArrays(){this.text=new md(new _s(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new md(new _s(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Ba,this.lineVertexArray=new ja,this.symbolInstances=new Na}calculateGlyphDependencies(t,e,n,i,r){for(let o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||i)&&r){const n=zc[t.charAt(o)];n&&(e[n.charCodeAt(0)]=!0)}}populate(t,e,n){const i=this.layers[0],r=i.layout,o=r.get("text-font"),a=r.get("text-field"),s=r.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof Ee&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=r.get("symbol-sort-key");if(this.features=[],!l&&!u)return;const h=e.iconDependencies,d=e.glyphDependencies,f=e.availableImages,p=new Vo(this.zoom);for(const{feature:e,id:a,index:s,sourceLayerIndex:m}of t){const t=i._featureFilter.needGeometry,_=Is(e,t);if(!i._featureFilter.filter(p,_,n))continue;let g,y;if(t||(_.geometry=Ps(e)),l){const t=i.getValueAndResolveTokens("text-field",_,n,f),e=Ee.factory(t);pd(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Uo()||this.hasRTLText&&Ho.isParsed())&&(g=Ic(e,i,_))}if(u){const t=i.getValueAndResolveTokens("icon-image",_,n,f);y=t instanceof Ce?t:Ce.fromString(t)}if(!g&&!y)continue;const v=this.sortFeaturesByKey?c.evaluate(_,{},n):void 0,x={id:a,text:g,icon:y,index:s,sourceLayerIndex:m,geometry:_.geometry,properties:e.properties,type:cd[e.type],sortKey:v};if(this.features.push(x),y&&(h[y.name]=!0),g){const t=o.evaluate(_,{},n).join(","),e="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(uh.vertical)>=0;for(const n of g.sections)if(n.image)h[n.image.name]=!0;else{const i=Mo(g.toString()),r=n.fontStack||t,o=d[r]=d[r]||{};this.calculateGlyphDependencies(n.text,o,e,this.allowVerticalPlacement,i)}}}"line"===r.get("symbol-placement")&&(this.features=function(t){const e={},n={},i=[];let r=0;function o(e){i.push(t[e]),r++}function a(t,e,r){const o=n[t];return delete n[t],n[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function s(t,n,r){const o=e[n];return delete e[n],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function l(t,e,n){const i=n?e[0][e[0].length-1]:e[0][0];return`${t}:${i.x}:${i.y}`}for(let u=0;u<t.length;u++){const c=t[u],h=c.geometry,d=c.text?c.text.toString():null;if(!d){o(u);continue}const f=l(d,h),p=l(d,h,!0);if(f in n&&p in e&&n[f]!==e[p]){const t=s(f,p,h),r=a(f,p,i[t].geometry);delete e[f],delete n[p],n[l(d,i[r].geometry,!0)]=r,i[t].geometry=null}else f in n?a(f,p,h):p in e?s(f,p,h):(o(u),e[f]=r-1,n[p]=r-1)}return i.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment){let n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]);const r={};for(let i=t.segment+1;i<e.length;i++)r[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:n},i<e.length-1&&(n+=e[i+1].dist(e[i]));for(let n=t.segment||0;n>=0;n--)r[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:i},n>0&&(i+=e[n-1].dist(e[n]));for(let t=0;t<e.length;t++){const e=r[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,i,r,o,a,s,l,u,c,h){const d=t.indexArray,f=t.layoutVertexArray,p=t.segments.prepareSegment(4*e.length,f,d,this.canOverlap?o.sortKey:void 0),m=this.glyphOffsetArray.length,_=p.vertexLength,g=this.allowVerticalPlacement&&a===uh.vertical?Math.PI/2:0,y=o.text&&o.text.sections;for(let i=0;i<e.length;i++){const{tl:r,tr:a,bl:l,br:u,tex:c,pixelOffsetTL:m,pixelOffsetBR:_,minFontScaleX:v,minFontScaleY:x,glyphOffset:b,isSDF:w,sectionIndex:M}=e[i],T=p.vertexLength,k=b[1];dd(f,s.x,s.y,r.x,k+r.y,c.x,c.y,n,w,m.x,m.y,v,x),dd(f,s.x,s.y,a.x,k+a.y,c.x+c.w,c.y,n,w,_.x,m.y,v,x),dd(f,s.x,s.y,l.x,k+l.y,c.x,c.y+c.h,n,w,m.x,_.y,v,x),dd(f,s.x,s.y,u.x,k+u.y,c.x+c.w,c.y+c.h,n,w,_.x,_.y,v,x),fd(t.dynamicLayoutVertexArray,s,g),d.emplaceBack(T,T+1,T+2),d.emplaceBack(T+1,T+2,T+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),i!==e.length-1&&M===e[i+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,o,o.index,{},h,y&&y[M])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,_,l,u,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],a,0,!1,0,c)}_commitLayoutVertex(t,e,n,i,r){t.emplaceBack(e.x,e.y,n,i,Math.round(r.x),Math.round(r.y))}_addCollisionDebugVertices(t,e,n,i,r){const o=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),a=o.vertexLength,s=r.anchorX,l=r.anchorY;for(let t=0;t<4;t++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,i,s,l,new m(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,s,l,new m(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,s,l,new m(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,s,l,new m(t.x1,t.y2)),o.vertexLength+=4;const u=n.indexArray;u.emplaceBack(a,a+1),u.emplaceBack(a+1,a+2),u.emplaceBack(a+2,a+3),u.emplaceBack(a+3,a),o.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceTextSize(t,o,e,a);this._addCollisionDebugVertices(i,r,this.textCollisionBox,i.anchorPoint,o)}}_addIconDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceIconSize(t,e,a);this._addCollisionDebugVertices(i,r,this.iconCollisionBox,i.anchorPoint,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _d(wa,kc.members,Aa),this.iconCollisionBox=new _d(wa,kc.members,Aa);const n=Ac(this.iconSizeData,t),i=Ac(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(i,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(i,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,n,i){const r=e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:i,o=this.text.placedSymbolArray.get(r),a=Dc(this.textSizeData,t,o)/Ec;return this.tilePixelRatio*a}getSymbolInstanceIconSize(t,e,n){const i=this.icon.placedSymbolArray.get(n),r=Dc(this.iconSizeData,t,i);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceTextSize(t,o,e,a),s=this.textCollisionBox.collisionVertexArrayExt;this._commitDebugCollisionVertexUpdate(s,r,i.padding)}}_updateIconDebugCollisionBoxes(t,e,n,i,r){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(t,e,o),a=this.iconCollisionBox.collisionVertexArrayExt;this._commitDebugCollisionVertexUpdate(a,r,i.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Ac(this.iconSizeData,t),i=Ac(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(i,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(i,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,i,r,o,a,s,l){const u={};for(let i=e;i<n;i++){const e=t.get(i);u.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},u.textFeatureIndex=e.featureIndex;break}for(let e=i;e<r;e++){const n=t.get(e);u.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},u.verticalTextFeatureIndex=n.featureIndex;break}for(let e=o;e<a;e++){const n=t.get(e);u.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},u.iconFeatureIndex=n.featureIndex;break}for(let e=s;e<l;e++){const n=t.get(e);u.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},u.verticalIconFeatureIndex=n.featureIndex;break}return u}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs;for(let e=n.vertexStartIndex;e<i;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),i=[],r=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const a=this.symbolInstances.get(t);i.push(0|Math.round(e*a.anchorX+n*a.anchorY)),r.push(a.featureIndex)}return o.sort(((t,e)=>i[t]-i[e]||r[e]-r[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,n)=>{t>=0&&n.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}wr("SymbolBucket",gd,{omit:["layers","collisionBoxArray","features","compareText"]}),gd.MAX_GLYPHS=65535,gd.addDynamicAttributes=fd;const yd=new oa({"symbol-placement":new ta(Qt.layout_symbol["symbol-placement"]),"symbol-spacing":new ta(Qt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ta(Qt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ea(Qt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ta(Qt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ta(Qt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ta(Qt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ta(Qt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ta(Qt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ea(Qt.layout_symbol["icon-size"]),"icon-text-fit":new ta(Qt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ta(Qt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ea(Qt.layout_symbol["icon-image"]),"icon-rotate":new ea(Qt.layout_symbol["icon-rotate"]),"icon-padding":new ta(Qt.layout_symbol["icon-padding"]),"icon-keep-upright":new ta(Qt.layout_symbol["icon-keep-upright"]),"icon-offset":new ea(Qt.layout_symbol["icon-offset"]),"icon-anchor":new ea(Qt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ta(Qt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ta(Qt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ta(Qt.layout_symbol["text-rotation-alignment"]),"text-field":new ea(Qt.layout_symbol["text-field"]),"text-font":new ea(Qt.layout_symbol["text-font"]),"text-size":new ea(Qt.layout_symbol["text-size"]),"text-max-width":new ea(Qt.layout_symbol["text-max-width"]),"text-line-height":new ea(Qt.layout_symbol["text-line-height"]),"text-letter-spacing":new ea(Qt.layout_symbol["text-letter-spacing"]),"text-justify":new ea(Qt.layout_symbol["text-justify"]),"text-radial-offset":new ea(Qt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ta(Qt.layout_symbol["text-variable-anchor"]),"text-anchor":new ea(Qt.layout_symbol["text-anchor"]),"text-max-angle":new ta(Qt.layout_symbol["text-max-angle"]),"text-writing-mode":new ta(Qt.layout_symbol["text-writing-mode"]),"text-rotate":new ea(Qt.layout_symbol["text-rotate"]),"text-padding":new ta(Qt.layout_symbol["text-padding"]),"text-keep-upright":new ta(Qt.layout_symbol["text-keep-upright"]),"text-transform":new ea(Qt.layout_symbol["text-transform"]),"text-offset":new ea(Qt.layout_symbol["text-offset"]),"text-allow-overlap":new ta(Qt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ta(Qt.layout_symbol["text-ignore-placement"]),"text-optional":new ta(Qt.layout_symbol["text-optional"])});var vd={paint:new oa({"icon-opacity":new ea(Qt.paint_symbol["icon-opacity"]),"icon-color":new ea(Qt.paint_symbol["icon-color"]),"icon-halo-color":new ea(Qt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ea(Qt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ea(Qt.paint_symbol["icon-halo-blur"]),"icon-translate":new ta(Qt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ta(Qt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ea(Qt.paint_symbol["text-opacity"]),"text-color":new ea(Qt.paint_symbol["text-color"],{runtimeType:he,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new ea(Qt.paint_symbol["text-halo-color"]),"text-halo-width":new ea(Qt.paint_symbol["text-halo-width"]),"text-halo-blur":new ea(Qt.paint_symbol["text-halo-blur"]),"text-translate":new ta(Qt.paint_symbol["text-translate"]),"text-translate-anchor":new ta(Qt.paint_symbol["text-translate-anchor"])}),layout:yd};class xd{constructor(t){h(void 0!==t.property.overrides),this.type=t.property.overrides?t.property.overrides.runtimeType:se,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wr("FormatSectionOverride",xd,{omit:["defaultValue"]});class bd extends Ms{constructor(t){super(t,vd)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const n of t)e.indexOf(n)<0&&e.push(n);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,i){const r=this.layout.get(t).evaluate(e,{},n,i),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Ti(o.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,r)}createBucket(t){return new gd(t)}queryRadius(){return 0}queryIntersectsFeature(){return h(!1),!1}_setPaintOverrides(){for(const t of vd.paint.overridableProperties){if(!bd.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new xd(e),i=new Mi(n,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new Si("source",i):new Ei("composite",i,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Jo(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&bd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),i=vd.paint.properties[e];let r=!1;const o=t=>{for(const e of t)if(i.overrides&&i.overrides.hasOverride(e))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof Ee)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{if(!r)if(e instanceof Ie&&Ae(e.value)===me){const t=e.value;o(t.sections)}else e instanceof Oe?o(e.sections):e.eachChild(t)},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return r}getProgramConfiguration(t){return new ms(this,t)}}var wd={paint:new oa({"background-color":new ta(Qt.paint_background["background-color"]),"background-pattern":new ia(Qt.paint_background["background-pattern"]),"background-opacity":new ta(Qt.paint_background["background-opacity"])})};var Md={paint:new oa({"raster-opacity":new ta(Qt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ta(Qt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ta(Qt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ta(Qt.paint_raster["raster-brightness-max"]),"raster-saturation":new ta(Qt.paint_raster["raster-saturation"]),"raster-contrast":new ta(Qt.paint_raster["raster-contrast"]),"raster-resampling":new ta(Qt.paint_raster["raster-resampling"]),"raster-fade-duration":new ta(Qt.paint_raster["raster-fade-duration"])})};class Td extends Ms{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){h(!1,"Custom layers cannot be serialized")}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var kd={paint:new oa({"sky-type":new ta(Qt.paint_sky["sky-type"]),"sky-atmosphere-sun":new ta(Qt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ta(Qt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ta(Qt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ta(Qt.paint_sky["sky-gradient-radius"]),"sky-gradient":new ra(Qt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ta(Qt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ta(Qt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ta(Qt.paint_sky["sky-opacity"])})};function Sd(t,e,n){const i=ll(0,0,1),r=Sl(kl());return function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=i*l-o*s,t[1]=r*l+a*s,t[2]=o*l+i*s,t[3]=a*l-r*s}(r,r,n?-w(t)+Math.PI:w(t)),El(r,r,-w(e)),gl(i,i,r),pl(i,i)}const Ed={circle:class extends Ms{constructor(t){super(t,Qs)}createBucket(t){return new Fs(t)}queryRadius(t){const e=t;return Gs("circle-radius",this,e)+Gs("circle-stroke-width",this,e)+Zs(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,i,r,o,a,s){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&t.queryGeometry.isAboveHorizon)return!1;const u=Ks(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),h=l?c*t.pixelToTileUnitsFactor:c;for(const e of i)for(const n of e){const e=n.add(u),i=s&&o.elevation?o.elevation.exaggeration()*s.getElevationAt(e.x,e.y,!0):0,r=l?e:Il(e,i,a),c=l?t.tilespaceRays.map((t=>Rl(t,i))):t.queryGeometry.screenGeometry;let d=h;const f=wl([],[n.x,n.y,i,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?d*=f[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(d*=o.cameraToCenterDistance/f[3]),Os(c,r,d))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new ms(this,t)}},heatmap:class extends Ms{createBucket(t){return new Ol(t)}constructor(t){super(t,$l),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){const t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Hl({expression:t,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new ms(this,t)}},hillshade:class extends Ms{constructor(t){super(t,Vl)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(t){return new ms(this,t)}},fill:class extends Ms{constructor(t){super(t,zu)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new ms(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Pu(t)}queryRadius(){return Zs(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,i,r,o){return!t.queryGeometry.isAboveHorizon&&Ys(Xs(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends Ms{constructor(t){super(t,ec)}createBucket(t){return new Qu(t)}queryRadius(){return Zs(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new ms(this,t)}queryIntersectsFeature(t,e,n,i,r,o,a,s,l){const u=Ks(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),d=[0,0],f=s&&o.elevation,p=o.elevation?o.elevation.exaggeration():1;if(f){const e=t.tile.getBucket(this).centroidVertexArray,n=l+1;if(n<e.length){const t=e.get(n);d[0]=t.a_centroid_pos0,d[1]=t.a_centroid_pos1}}if(0===d[0]&&1===d[1])return!1;const _=function(t,e,n,i,r,o,a,s,l){return o?function(t,e,n,i,r,o,a,s,l){const u=[],c=[],h=[0,0,0,1];for(const d of t){const t=[],f=[];for(const u of d){const c=u.x+i.x,d=u.y+i.y,p=oc(c,d,e,n,o,a,s,l);h[0]=c,h[1]=d,h[2]=p.base,h[3]=1,wl(h,h,r),h[3]=Math.max(h[3],1e-5);const m=rc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);h[0]=c,h[1]=d,h[2]=p.top,h[3]=1,wl(h,h,r),h[3]=Math.max(h[3],1e-5);const _=rc([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);t.push(m),f.push(_)}u.push(t),c.push(f)}return[u,c]}(t,e,n,i,r,o,a,s,l):function(t,e,n,i,r){const o=[],a=[],s=r[8]*e,l=r[9]*e,u=r[10]*e,c=r[11]*e,h=r[8]*n,d=r[9]*n,f=r[10]*n,p=r[11]*n;for(const e of t){const t=[],n=[];for(const o of e){const e=o.x+i.x,a=o.y+i.y,_=r[0]*e+r[4]*a+r[12],g=r[1]*e+r[5]*a+r[13],y=r[2]*e+r[6]*a+r[14],v=r[3]*e+r[7]*a+r[15],x=_+s,b=g+l,w=y+u,M=Math.max(v+c,1e-5),T=_+h,k=g+d,S=y+f,E=Math.max(v+p,1e-5),C=new m(x/M,b/M);C.z=w/M,t.push(C);const L=new m(T/E,k/E);L.z=S/E,n.push(L)}o.push(t),a.push(n)}return[o,a]}(t,e,n,i,r)}(i,h,c,u,a,f?s:null,d,p,o.center.lat),g=_[0],y=_[1],v=t.queryGeometry;return function(t,e,n){let i=1/0;Ys(n,e)&&(i=ic(n,e[0]));for(let r=0;r<e.length;r++){const o=e[r],a=t[r];for(let t=0;t<o.length-1;t++){const e=o[t],r=o[t+1],s=a[t],l=[e,r,a[t+1],s,e];Rs(n,l)&&(i=Math.min(i,ic(n,l)))}}return i!==1/0&&i}(g,y,v.isPointQuery()?v.screenBounds:v.screenGeometry)}},line:class extends Ms{constructor(t){super(t,yc),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof gn,this.gradientVersion=(this.gradientVersion+1)%v}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=vc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new _c(t)}getProgramIds(){const t=this.paint.get("line-dasharray"),e=this.paint.get("line-pattern").constantOr(1),n=this.paint.get("line-gradient");return[e?"linePattern":t?"lineSDF":n?"lineGradient":"line"]}getProgramConfiguration(t){return new ms(this,t)}queryRadius(t){const e=t,n=xc(Gs("line-width",this,e),Gs("line-gap-width",this,e)),i=Gs("line-offset",this,e);return n/2+Math.abs(i)+Zs(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,i,r,o){if(t.queryGeometry.isAboveHorizon)return!1;const a=Xs(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),s=t.pixelToTileUnitsFactor/2*xc(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(i=function(t,e){const n=[],i=new m(0,0);for(let r=0;r<t.length;r++){const o=t[r],a=[];for(let t=0;t<o.length;t++){const n=o[t-1],r=o[t],s=o[t+1],l=0===t?i:r.sub(n)._unit()._perp(),u=t===o.length-1?i:s.sub(r)._unit()._perp(),c=l._add(u)._unit(),h=c.x*u.x+c.y*u.y;c._mult(1/h),a.push(c._mult(e)._add(r))}n.push(a)}return n}(i,l*t.pixelToTileUnitsFactor)),function(t,e,n){for(let i=0;i<e.length;i++){const r=e[i];if(t.length>=3)for(let e=0;e<r.length;e++)if(Vs(t,r[e]))return!0;if(Ns(t,r,n))return!0}return!1}(a,i,s)}isTileClipped(){return!0}},symbol:bd,background:class extends Ms{constructor(t){super(t,wd)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ms{constructor(t){super(t,Md)}getProgramIds(){return["raster"]}},sky:class extends Ms{constructor(t){super(t,kd),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){const t=this._transitionablePaint._values["sky-gradient"].value.expression;this.colorRamp=Hl({expression:t,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(t,e){const n=this.paint.get("sky-type");if("atmosphere"===n){const n=this.paint.get("sky-atmosphere-sun"),i=!n,r=t.style.light,o=r.properties.get("position");return i&&"viewport"===r.properties.get("anchor")&&$("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?Sd(o.azimuthal,90-o.polar,e):Sd(n[0],90-n[1],e)}if("gradient"===n){const t=this.paint.get("sky-gradient-center");return Sd(t[0],90-t[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};const{HTMLImageElement:Cd,HTMLCanvasElement:Ld,HTMLVideoElement:Dd,ImageData:Ad,ImageBitmap:Pd}=g;class Id{constructor(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)}update(t,e,n){const{width:i,height:r}=t,o=!(this.size&&this.size[0]===i&&this.size[1]===r||n),{context:a}=this,{gl:s}=a;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[i,r],t instanceof Cd||t instanceof Ld||t instanceof Dd||t instanceof Ad||Pd&&t instanceof Pd?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{const{x:e,y:o}=n||{x:0,y:0};t instanceof Cd||t instanceof Ld||t instanceof Dd||t instanceof Ad||Pd&&t instanceof Pd?s.texSubImage2D(s.TEXTURE_2D,0,e,o,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,e,o,i,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(t,e,n){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class zd{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Rd?new Rd(t.lng,t.lat):Rd.convert(t),this}setSouthWest(t){return this._sw=t instanceof Rd?new Rd(t.lng,t.lat):Rd.convert(t),this}extend(t){const e=this._sw,n=this._ne;let i,r;if(t instanceof Rd)i=t,r=t;else{if(!(t instanceof zd)){if(Array.isArray(t)){if(4===t.length||t.every(Array.isArray)){const e=t;return this.extend(zd.convert(e))}{const e=t;return this.extend(Rd.convert(e))}}return this}if(i=t._sw,r=t._ne,!i||!r)return this}return e||n?(e.lng=Math.min(i.lng,e.lng),e.lat=Math.min(i.lat,e.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new Rd(i.lng,i.lat),this._ne=new Rd(r.lng,r.lat)),this}getCenter(){return new Rd((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Rd(this.getWest(),this.getNorth())}getSouthEast(){return new Rd(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Rd.convert(t),i=this._sw.lat<=n&&n<=this._ne.lat;let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),i&&r}static convert(t){return!t||t instanceof zd?t:new zd(t)}}const Fd=6371008.8;class Rd{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Rd(C(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return Fd*Math.acos(Math.min(r,1))}toBounds(t=0){const e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new zd(new Rd(this.lng-n,this.lat-e),new Rd(this.lng+n,this.lat+e))}static convert(t){if(t instanceof Rd)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Rd(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Rd(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Od=2*Math.PI*Fd;function Yd(t){return Od*Math.cos(t*Math.PI/180)}function Nd(t){return(180+t)/360}function Bd(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function jd(t,e){return t/Yd(e)}function Ud(t){const e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function $d(t,e){return t*Yd(Ud(e))}class Hd{constructor(t,e,n=0){this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t,e=0){const n=Rd.convert(t);return new Hd(Nd(n.lng),Bd(n.lat),jd(e,n.lat))}toLngLat(){return new Rd(360*this.x-180,Ud(this.y))}toAltitude(){return $d(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Od*(t=Ud(this.y),1/Math.cos(t*Math.PI/180));var t}}class Vd{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new jl({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=F(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const i=[];let r=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;i.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let e=1;e<t.length;e++){a=!a;const l=t[e];r=s*n,s+=l,o=s*n,i.push({left:r,right:o,isDash:a,zeroLength:0===l})}return i}addRoundDash(t,e,n){const i=e/2;for(let e=-n;e<=n;e++){const r=this.nextRow+n+e,o=this.width*r;let a=0,s=t[a];for(let r=0;r<this.width;r++){r/s.right>1&&(s=t[++a]);const l=Math.abs(r-s.left),u=Math.abs(r-s.right),c=Math.min(l,u);let h;const d=e/n*(i+1);if(s.isDash){const t=i-Math.abs(d);h=Math.sqrt(c*c+t*t)}else h=i-Math.sqrt(c*c+d*d);this.image.data[o+r]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let e=t.length-1;e>=0;--e){const n=t[e],i=t[e+1];n.zeroLength?t.splice(e,1):i&&i.isDash===n.isDash&&(i.left=n.left,t.splice(e,1))}const n=t[0],i=t[t.length-1];n.isDash===i.isDash&&(n.left=i.left-this.width,i.right=n.right+this.width);const r=this.width*this.nextRow;let o=0,a=t[o];for(let n=0;n<this.width;n++){n/a.right>1&&(a=t[++o]);const i=Math.abs(n-a.left),s=Math.abs(n-a.right),l=Math.min(i,s),u=(a.isDash?l:-l)+e;this.image.data[r+n]=Math.max(0,Math.min(255,u+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const i="round"===e,r=i?7:0,o=2*r+1;if(this.nextRow+o>this.height)return $("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let e=0;e<t.length;e++)t[e]<0&&($("Negative value is found in line dasharray, replacing values with 0"),t[e]=0),a+=t[e];if(0!==a){const n=this.width/a,o=this.getDashRanges(t,this.width,n);if(i)this.addRoundDash(o,n,r);else{const t="square"===e?.5*n:0;this.addRegularDash(o,t)}}const s=this.nextRow+r;this.nextRow+=o;const l={tl:[s,r],br:[a,0]};return this.positions[n]=l,l}}wr("LineAtlas",Vd);class qd{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Wd=g.performance,Gd={create:"create",load:"load",fullLoad:"fullLoad"};let Zd=null,Xd=[];const Kd=[Xd];let Jd=0;const Qd=1e3/60,tf={mark(t){Wd.mark(t)},measure(t,e,n){Wd.measure(t,e,n)},beginMeasure(t){const e=t+Jd++;return Wd.mark(e),{mark:e,name:t}},endMeasure(t){Wd.measure(t.name,t.mark)},frame(t,e){const n=t;if(null!=Zd){const t=n-Zd;Xd.push(t)}e?Zd=n:(Zd=null,Xd=[],Kd.push(Xd))},clearMetrics(){Zd=null,Xd=[],Wd.clearMeasures("loadTime"),Wd.clearMeasures("fullLoadTime");for(const t in Gd)Wd.clearMarks(Gd[t])},getPerformanceMetrics(){const t={};Wd.measure("loadTime",Gd.create,Gd.load),Wd.measure("fullLoadTime",Gd.create,Gd.fullLoad);const e=Wd.getEntriesByType("measure");for(const n of e)t[n.name]=(t[n.name]||0)+n.duration;let n=0,i=0,r=0;t.jank=0;for(const e of Kd){if(!e.length)continue;const o=e.reduce(((t,e)=>t+e),0);n+=Math.max(1,Math.round(o/Qd))-e.length,i+=o,r+=e.length;const a=e.map((t=>Math.max(1,Math.round(t/Qd))));for(let e=0;e<a.length-1;e++)a[e+1]>a[e]&&t.jank++}const o=i/r/1e3;t.fps=1/o,t.droppedFrames=n,t.percentDroppedFrames=n/(r+n)*100,t.cpuFrameBudgetExceeded=0;const a=Wd.getEntriesByName("render");for(const e of a)t.cpuFrameBudgetExceeded+=Math.max(0,e.duration-14);return t},getWorkerPerformanceMetrics:()=>JSON.parse(JSON.stringify({timeOrigin:Wd.timeOrigin,measures:Wd.getEntriesByType("measure")}))};function ef(t){const e=t?t.url.toString():void 0;return Wd.getEntriesByName(e)}class nf{constructor(){this.tasks={},this.taskQueue=[],O(["process"],this),this.invoker=new qd(this.process),this.nextId=0}add(t,e){const n=this.nextId++,i=function({type:t,isSymbolTile:e,zoom:n}){return n=n||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-n:"maybePrepare"===t&&e?400-n:500:200-n:100-n}(e);if(0===i){const e=q()?tf.beginMeasure("workerTask"):void 0;try{t()}finally{e&&tf.endMeasure(e)}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:i,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){const t=q()?tf.beginMeasure("workerTask"):void 0;try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const n=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{t&&tf.endMeasure(t)}}pick(){let t=null,e=1/0;for(let n=0;n<this.taskQueue.length;n++){const i=this.taskQueue[n],r=this.tasks[i];r.priority<e&&(e=r.priority,t=n)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}function rf(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}class of{constructor(t,e,n){h(t>=0&&t<=25),h(e>=0&&e<Math.pow(2,t)),h(n>=0&&n<Math.pow(2,t)),this.z=t,this.x=e,this.y=n,this.key=lf(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=(r=this.x,o=this.y,a=this.z,s=rf(256*r,256*(o=Math.pow(2,a)-o-1),a),l=rf(256*(r+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]),i=function(t,e,n){let i,r="";for(let o=t;o>0;o--)i=1<<o-1,r+=(e&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);var r,o,a,s,l;return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)}getTilePoint(t){const e=Math.pow(2,this.z);return new m((t.x*e-this.x)*Ls,(t.y*e-this.y)*Ls)}getTileVec3(t){const e=Math.pow(2,this.z);return ll((t.x*e-this.x)*Ls,(t.y*e-this.y)*Ls,$d(t.z,t.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class af{constructor(t,e){this.wrap=t,this.canonical=e,this.key=lf(t,e.z,e.z,e.x,e.y)}}class sf{constructor(t,e,n,i,r){h(t>=n),this.overscaledZ=t,this.wrap=e,this.canonical=new of(n,+i,+r),this.key=0===e&&t===n?this.canonical.key:lf(e,t,n,i,r)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){h(t<=this.overscaledZ);const e=this.canonical.z-t;return t>this.canonical.z?new sf(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sf(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return lf(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return lf(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new sf(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new sf(e,this.wrap,e,n,i),new sf(e,this.wrap,e,n+1,i),new sf(e,this.wrap,e,n,i+1),new sf(e,this.wrap,e,n+1,i+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new sf(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new sf(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new af(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Hd(t.x-this.wrap,t.y))}getTileVec3(t){return this.canonical.getTileVec3(new Hd(t.x-this.wrap,t.y,t.z))}}function lf(t,e,n,i,r){const o=1<<Math.min(n,22);let a=o*(r%o)+i%o;t&&n<22&&(a+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n))));const s=16*(32*a+n)+(e-n);return h(s>=0&&s<=v),s}wr("CanonicalTileID",of),wr("OverscaledTileID",sf,{omit:["projMatrix"]});class uf{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return h(t in this._stringToNumber),this._stringToNumber[t]}decode(t){return h(t<this._numberToString.length),this._numberToString[t]}}class cf{constructor(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}const hf={extend:(t,...e)=>A(t,...e),run(t){t()},logToElement(t,e=!1,n="log"){const i=g.document.getElementById(n);i&&(e&&(i.innerHTML=""),i.innerHTML+=`<br>${t}`)}};var df=ca([{name:"a_pos",type:"Int16",components:2}]);class ff{constructor(t,e=Te.red){this.vertices=new da,this.indices=new Pa,this.tileSize=t,this.needsUpload=!0,this.color=e}addPoints(t){this.clearPoints();for(const e of t)this.addPoint(e);this.addPoint(t[0])}addPoint(t){const e=this.vertices.length;this.vertices.emplaceBack(t.x,t.y),this.vertices.emplaceBack(t.x+40,t.y),this.vertices.emplaceBack(t.x,t.y-40),this.vertices.emplaceBack(t.x,t.y+40),this.vertices.emplaceBack(t.x-40,t.y),this.indices.emplaceBack(e),this.indices.emplaceBack(e+1),this.indices.emplaceBack(e+2),this.indices.emplaceBack(e+3),this.indices.emplaceBack(e+4),this.indices.emplaceBack(e),this.needsUpload=!0}clearPoints(){this.vertices.clear(),this.indices.clear(),this.needsUpload=!0}lazyUpload(t){this.needsUpload&&this.hasVertices()&&(this.unload(),this.vertexBuffer=t.createVertexBuffer(this.vertices,df.members,!0),this.indexBuffer=t.createIndexBuffer(this.indices,!0),this.segments=Cs.simpleSegment(0,0,this.vertices.length,this.indices.length),this.needsUpload=!1)}hasVertices(){return this.vertices.length>1}unload(){this.vertexBuffer&&(this.vertexBuffer.destroy(),delete this.vertexBuffer),this.indexBuffer&&(this.indexBuffer.destroy(),delete this.indexBuffer),this.segments&&(this.segments.destroy(),delete this.segments)}}class pf{constructor(t,e,n){this.tileID=t,this.uid=I(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const e=t+this.timeAdded;e<tt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const i of t){const t=i.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){i.layers=t,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=i}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof gd){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof gd&&e.hasRTLText){this.hasRTLText=!0,Ho.isLoading()||Ho.isLoaded()||"deferred"!==Uo()||$o();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Fa}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),hf.run((()=>{this.queryGeometryDebugViz&&(this.queryGeometryDebugViz.unload(),delete this.queryGeometryDebugViz),this.queryBoundsDebugViz&&(this.queryBoundsDebugViz.unload(),delete this.queryBoundsDebugViz)})),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const n=this.buckets[e];n.uploadPending()&&n.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Id(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Id(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Id(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,i,r,o,a,s){return hf.run((()=>{s&&(this.queryGeometryDebugViz||(this.queryGeometryDebugViz=new ff(this.tileSize)),this.queryBoundsDebugViz||(this.queryBoundsDebugViz=new ff(this.tileSize,Te.blue)),this.queryGeometryDebugViz.addPoints(i.tilespaceGeometry),this.queryBoundsDebugViz.addPoints(i.bufferedTilespaceGeometry))})),this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:a,transform:o,params:r},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),r=e?e.sourceLayer:"",o=i._geojsonTileLayer||i[r];if(!o)return;const a=Ni(e&&e.filter),{z:s,x:l,y:u}=this.tileID.canonical,c={z:s,x:l,y:u};for(let e=0;e<o.length;e++){const i=o.feature(e);if(a.needGeometry){const t=Is(i,!0);if(!a.filter(new Vo(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new Vo(this.tileID.overscaledZ),i))continue;const h=n.getId(i,r),d=new cf(i,s,l,u,h);d.tile=c,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=W(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const i=this.expirationTime-e;i?this.expirationTime=t+Math.max(i,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(!a||!s||0===Object.keys(s).length)continue;r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<tt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=tt.now()+t}setDependencies(t,e){const n={};for(const t of e)n[t]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){hf.run((()=>{this.queryGeometryDebugViz&&this.queryGeometryDebugViz.clearPoints(),this.queryBoundsDebugViz&&this.queryBoundsDebugViz.clearPoints()}))}}class mf{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},A(this.stateChanges[t][i],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==i&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][i]){this.deletedStates[t][i]={};for(const e in this.state[t][i])n[e]||(this.deletedStates[t][i][e]=null)}else for(const e in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][e]&&delete this.deletedStates[t][i][e]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),i=this.state[t]||{},r=this.stateChanges[t]||{},o=A({},i[n],r[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete o[t]}return o}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const e={};for(const n in this.stateChanges[t])this.state[t][n]||(this.state[t][n]={}),A(this.state[t][n],this.stateChanges[t][n]),e[n]=this.state[t][n];n[t]=e}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const e={};if(null===this.deletedStates[t])for(const n in this.state[t])e[n]={},this.state[t][n]={};else for(const n in this.deletedStates[t]){if(null===this.deletedStates[t][n])this.state[t][n]={};else for(const e of Object.keys(this.deletedStates[t][n]))delete this.state[t][n][e];e[n]=this.state[t][n]}n[t]=n[t]||{},A(n[t],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const i in t)t[i].setFeatureState(n,e)}}class _f{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function gf(t,e,n,i){let r=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(i[a])<1e-15){if(n[a]<t[a]||n[a]>e[a])return null}else{const s=1/i[a];let l=(t[a]-n[a])*s,u=(e[a]-n[a])*s;if(l>u){const t=l;l=u,u=t}if(l>r&&(r=l),u<o&&(o=u),r>o)return null}return r}function yf(t,e,n,i,r,o,a,s,l,u,c){const h=i-t,d=r-e,f=o-n,p=a-t,m=s-e,_=l-n,g=c[1]*_-c[2]*m,y=c[2]*p-c[0]*_,v=c[0]*m-c[1]*p,x=h*g+d*y+f*v;if(Math.abs(x)<1e-15)return null;const b=1/x,w=u[0]-t,M=u[1]-e,T=u[2]-n,k=(w*g+M*y+T*v)*b;if(k<0||k>1)return null;const S=M*f-T*d,E=T*h-w*f,C=w*d-M*h,L=(c[0]*S+c[1]*E+c[2]*C)*b;return L<0||k+L>1?null:(p*S+m*E+_*C)*b}function vf(t,e,n){return(t-e)/(n-e)}function xf(t,e,n,i,r,o,a,s,l){const u=1<<n,c=o-i,h=a-r,d=(t+0)/u*c+i,f=(t+1)/u*c+i,p=(e+0)/u*h+r,m=(e+1)/u*h+r;s[0]=d,s[1]=p,l[0]=f,l[1]=m}class bf{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=t.dim,n=5,i=8,r=Math.ceil(Math.log2(e/i)),o=[];let a=Math.ceil(Math.pow(2,r));const s=1/a,l=(t,e,n,i,r)=>{const o=i?1:0,a=t*n,s=(t+1)*n-o,l=e*n,u=(e+1)*n-o;r[0]=a,r[1]=l,r[2]=s,r[3]=u};let u=new _f(a);const c=[];for(let e=0;e<a*a;e++){l(e%a,Math.floor(e/a),s,!1,c);const n=Mf(c[0],c[1],t),i=Mf(c[2],c[1],t),r=Mf(c[2],c[3],t),o=Mf(c[0],c[3],t);u.minimums.push(Math.min(n,i,r,o)),u.maximums.push(Math.max(n,i,r,o)),u.leaves.push(1)}for(o.push(u),a/=2;a>=1;a/=2){const t=o[o.length-1];u=new _f(a);for(let e=0;e<a*a;e++){l(e%a,Math.floor(e/a),2,!0,c);const i=t.getElevation(c[0],c[1]),r=t.getElevation(c[2],c[1]),o=t.getElevation(c[2],c[3]),s=t.getElevation(c[0],c[3]),h=t.isLeaf(c[0],c[1]),d=t.isLeaf(c[2],c[1]),f=t.isLeaf(c[2],c[3]),p=t.isLeaf(c[0],c[3]),m=Math.min(i.min,r.min,o.min,s.min),_=Math.max(i.max,r.max,o.max,s.max),g=h&&d&&f&&p;u.maximums.push(_),u.minimums.push(m),_-m<=n&&g?u.leaves.push(1):u.leaves.push(0)}o.push(u)}return o}(this.dem),n=e.length-1,i=e[n],r=i.minimums,o=i.maximums,a=i.leaves;this._addNode(r[0],o[0],a[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,i,r,o,a=1){return gf([t,e,-100],[n,i,this.maximums[0]*a],r,o)}raycast(t,e,n,i,r,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(t,e,n,i,r,o,a);if(null==s)return null;const l=[],u=[],c=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:f,nodex:p,nodey:m,depth:_}=d.pop();if(this.leaves[s]){xf(p,m,_,t,e,n,i,c,h);const s=1<<_,l=(p+0)/s,u=(p+1)/s,d=(m+0)/s,g=(m+1)/s,y=Mf(l,d,this.dem)*a,v=Mf(u,d,this.dem)*a,x=Mf(u,g,this.dem)*a,b=Mf(l,g,this.dem)*a,w=yf(c[0],c[1],y,h[0],c[1],v,h[0],h[1],x,r,o),M=yf(h[0],h[1],x,c[0],h[1],b,c[0],c[1],y,r,o),T=Math.min(null!==w?w:Number.MAX_VALUE,null!==M?M:Number.MAX_VALUE);if(T!==Number.MAX_VALUE)return T;{const t=fl([],r,o,f);if(wf(y,v,b,x,vf(t[0],c[0],h[0]),vf(t[1],c[1],h[1]))>=t[2])return f}continue}let g=0;for(let d=0;d<this._siblingOffset.length;d++){xf((p<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],_+1,t,e,n,i,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const f=gf(c,h,r,o);if(null!=f){const t=f;l[d]=t;let e=!1;for(let n=0;n<g&&!e;n++)t>=l[u[n]]&&(u.splice(n,0,d),e=!0);e||(u[g]=d),g++}}for(let t=0;t<g;t++){const e=u[t];d.push({idx:this.childOffsets[s]+e,t:l[e],nodex:(p<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:_+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,i,r){if(1===t[i].isLeaf(e,n))return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const o=i-1,a=t[o];let s,l=0;for(let t=0;t<this._siblingOffset.length;t++){const i=2*e+this._siblingOffset[t][0],r=2*n+this._siblingOffset[t][1],o=a.getElevation(i,r),u=a.isLeaf(i,r),c=this._addNode(o.min,o.max,u);u&&(l|=1<<t),s||(s=c)}for(let i=0;i<this._siblingOffset.length;i++)l&1<<i||this._construct(t,2*e+this._siblingOffset[i][0],2*n+this._siblingOffset[i][1],o,s+i)}}function wf(t,e,n,i,r,o){return yn(yn(t,n,o),yn(e,i,o),r)}function Mf(t,e,n){const i=n.dim,r=E(t*i-.5,0,i-1),o=E(e*i-.5,0,i-1),a=Math.floor(r),s=Math.floor(o),l=Math.min(a+1,i-1),u=Math.min(s+1,i-1);return wf(n.get(a,s),n.get(l,s),n.get(a,u),n.get(l,u),r-a,o-s)}const Tf={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class kf{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n,i=!1,r=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return $(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const o=this.dim=e.height-2;if(this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=i,!i){for(let t=0;t<o;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(o,t)]=this.data[this._idx(o-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,o)]=this.data[this._idx(t,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],r&&this._buildQuadTree()}}_buildQuadTree(){h(!this._tree),this._tree=new bf(this)}get(t,e,n=!1){const i=new Uint8Array(this.data.buffer);n&&(t=E(t,-1,this.dim),e=E(e,-1,this.dim));const r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])}static getUnpackVector(t){return Tf[t]}get unpackVector(){return Tf[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,n){return(256*t*256+256*e+n)/10-1e4}_unpackTerrarium(t,e,n){return 256*t+e+n/256-32768}static pack(t,e){const n=[0,0,0,0],i=kf.getUnpackVector(e);let r=Math.floor((t+i[3])/i[2]);return n[2]=r%256,r=Math.floor(r/256),n[1]=r%256,r=Math.floor(r/256),n[0]=r,n}getPixels(){return new Ul({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let i=e*this.dim,r=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-n*this.dim;for(let e=o;e<a;e++)for(let n=i;n<r;n++)this.data[this._idx(n,e)]=t.data[this._idx(n+s,e+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}wr("DEMData",kf),wr("DemMinMaxQuadTree",bf,{omit:["dem"]});class Sf{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:e,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const i of this.data[n])t(i.value)||e.push(i);for(const t of e)this.remove(t.value.tileID,t)}}class Ef{constructor(t,e,n){this.context=t;const i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;h(this.dynamicDraw),this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){const t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)}}const Cf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Lf{constructor(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){h(t.length===this.length);const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const i=this.attributes[n],r=e.attributes[i.name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[Cf[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){const t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)}}class Df{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Af extends Df{getDefault(){return Te.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Pf extends Df{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class If extends Df{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class zf extends Df{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Ff extends Df{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Rf extends Df{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Of extends Df{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(h(t.ref>=0&&t.ref<=255),this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Yf extends Df{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class Nf extends Df{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class Bf extends Df{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class jf extends Df{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Uf extends Df{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class $f extends Df{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class Hf extends Df{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Vf extends Df{getDefault(){return Te.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class qf extends Df{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Wf extends Df{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class Gf extends Df{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Zf extends Df{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Xf extends Df{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Kf extends Df{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class Jf extends Df{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Qf extends Df{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class tp extends Df{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ep extends Df{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class np extends Df{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ip extends Df{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class rp extends Df{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class op extends Df{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class ap extends Df{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class sp extends Df{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class lp extends Df{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class up extends lp{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class cp extends lp{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class hp{constructor(t,e,n,i){this.context=t,this.width=e,this.height=n;const r=t.gl,o=this.framebuffer=r.createFramebuffer();this.colorAttachment=new up(t,o),i&&(this.depthAttachment=new cp(t,o)),h(r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE)}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class dp{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}dp.ReadOnly=!1,dp.ReadWrite=!0,dp.disabled=new dp(519,dp.ReadOnly,[0,1]);const fp=7680;class pp{constructor(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o}}pp.disabled=new pp({func:519,mask:0},0,0,fp,fp,fp);class mp{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}mp.Replace=[1,0],mp.disabled=new mp(mp.Replace,Te.transparent,[!1,!1,!1,!1]),mp.unblended=new mp(mp.Replace,Te.transparent,[!0,!0,!0,!0]),mp.alphaBlended=new mp([1,771],Te.transparent,[!0,!0,!0,!0]);const _p=1029,gp=2305;class yp{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}yp.disabled=new yp(!1,_p,gp),yp.backCCW=new yp(!0,_p,gp),yp.backCW=new yp(!0,_p,2304),yp.frontCW=new yp(!0,1028,2304),yp.frontCCW=new yp(!0,1028,gp);class vp extends Jt{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new Sf(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new mf}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return D(this._tiles).map((t=>t.tileID)).sort(xp).map((t=>t.key))}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort(((t,e)=>{const n=t.tileID,i=e.tileID,r=new m(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new m(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||o.y-r.y||o.x-r.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(xp).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new Kt(i,{tile:t})):this.update(this.transform));t.timeAdded=tt.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Xt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let i=0;i<e.length;i++){const r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,i){for(const r in this._tiles){let o=this._tiles[r];if(i[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){i[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),i=this._getLoadedTile(e);if(i)return i}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=(Math.ceil(t.width/e)+1)*(Math.ceil(t.height/e)+1),i=Math.floor(5*n),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(r)}handleWrapJump(t){const e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){const t={};for(const e in this._tiles){const i=this._tiles[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+n),t[i.tileID.key]=i}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles){const e=this._tiles[t];this._setTileReloadTimer(+t,e)}}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(h(!(n&&!this.usedForTerrain)),this.usedForTerrain&&!n)return;let i;this.updateCacheSize(t,e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new sf(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(i=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(i=i.filter((t=>this._source.hasTile(t))))):i=[];const r=this._updateRetainedTiles(i);if(bp(this._source.type)&&0!==i.length){const t={},e={},n=Object.keys(r);for(const i of n){const n=r[i];h(n.key===+i);const o=this._tiles[i];if(!o||o.fadeEndTime&&o.fadeEndTime<=tt.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-vp.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[i]=n}const o=i[i.length-1].overscaledZ;for(const t in this._tiles){const n=this._tiles[t];if(r[t]||!n.hasData())continue;let i=n.tileID;for(;i.overscaledZ>o;){i=i.scaledTo(i.overscaledZ-1);const o=this._tiles[i.key];if(o&&o.hasData()&&e[i.key]){r[t]=n.tileID;break}}}for(const e in t)r[e]||(this._coveredTiles[e]=!0,r[e]=t[e])}for(const t in r)this._tiles[t].clearFadeHold();const o=function(t,e){const n=[];for(const i in t)i in e||n.push(i);return n}(this._tiles,r);for(const t of o){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+t)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},i=t[t.length-1].overscaledZ,r=t[0].overscaledZ;h(i<=r);const o=Math.max(r-vp.maxOverzooming,this._source.minzoom),a=Math.max(r+vp.maxUnderzooming,this._source.minzoom),s={};for(const n of t){const t=this._addTile(n);e[n.key]=n,t.hasData()||i<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,i,a,e);for(const i of t){let t=this._tiles[i.key];if(t.hasData())continue;if(i.canonical.z>=this._source.maxzoom){const t=i.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=i.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let r=t.wasRequested();for(let a=i.overscaledZ-1;a>=o;--a){const o=i.scaledTo(a);if(n[o.key])break;if(n[o.key]=!0,t=this.getTile(o),!t&&r&&(t=this._addTile(o)),t&&(e[o.key]=o,r=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,i=this._tiles[t].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);const t=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;i=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);return n||(e=new pf(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new Xt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._cache.reset()}tilesIn(t,e,n){const i=[],r=this.transform;if(!r)return i;for(const o in this._tiles){const a=this._tiles[o];if(n&&a.clearQueryDebugViz(),a.holdingForFade())continue;const s=t.containsTile(a,r,e);s&&i.push(s)}return i}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.projMatrix=this.transform.calculateProjMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(bp(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=tt.now())return!0}return!1}setFeatureState(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)}removeFeatureState(t,e,n){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,n)}getFeatureState(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)}setDependencies(t,e,n){const i=this._tiles[t];i&&i.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}}function xp(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function bp(t){return"raster"===t||"image"===t||"video"===t}vp.maxOverzooming=10,vp.maxUnderzooming=3;class wp{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const i=n||t.findDEMTileFor(e);if(!i||!i.dem)return;const r=i.dem,o=i.tileID,a=1<<e.canonical.z-o.canonical.z,s=(e.canonical.x/a-o.canonical.x)*r.dim,l=(e.canonical.y/a-o.canonical.y)*r.dim,u=i.tileSize/Ls/a;return new wp(i,u,[s,l])}tileCoordToPixel(t,e){const n=t*this._scale+this._offset[0],i=e*this._scale+this._offset[1],r=Math.floor(n),o=Math.floor(i);return new m(r,o)}getElevationAt(t,e,n,i){const r=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],a=Math.floor(r),s=Math.floor(o),l=this._dem;return i=!!i,n?yn(yn(l.get(a,s,i),l.get(a,s+1,i),o-s),yn(l.get(a+1,s,i),l.get(a+1,s+1,i),o-s),r-a):l.get(a,s,i)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*jd(1,t)*this._dem.stride}}class Mp{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new gr(Ls,16,0),this.featureIndexArray=new $a,this.promoteId=e}insert(t,e,n,i,r,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r,o);const s=this.grid;for(let t=0;t<e.length;t++){const n=e[t],i=[1/0,1/0,-1/0,-1/0];for(let t=0;t<n.length;t++){const e=n[t];i[0]=Math.min(i[0],e.x),i[1]=Math.min(i[1],e.y),i[2]=Math.max(i[2],e.x),i[3]=Math.max(i[3],e.y)}i[0]<Ls&&i[1]<Ls&&i[2]>=0&&i[3]>=0&&s.insert(a,i[0],i[1],i[2],i[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Gu.VectorTile(new Oc(this.rawTileData)).layers,this.sourceLayerCoder=new uf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,n,i){this.loadVTLayers();const r=t.params||{},o=Ni(r.filter),a=t.tileResult,s=t.transform,l=a.bufferedTilespaceBounds,u=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((t,e,n,i)=>qs(a.bufferedTilespaceGeometry,t,e,n,i)));u.sort(kp);let c=null;s.elevation&&u.length>0&&(c=wp.create(s.elevation,this.tileID));const h={};let d;for(let s=0;s<u.length;s++){const l=u[s];if(l===d)continue;d=l;const f=this.featureIndexArray.get(l);let p=null;this.loadMatchingFeature(h,f,o,r.layers,r.availableImages,e,n,i,((e,n,i,r=0)=>(p||(p=Ps(e)),n.queryIntersectsFeature(a,e,i,p,this.z,t.transform,t.pixelPosMatrix,c,r))))}return h}loadMatchingFeature(t,e,n,i,r,o,a,s,l){const{featureIndex:u,bucketIndex:c,sourceLayerIndex:h,layoutVertexArrayOffset:d}=e,f=this.bucketLayerIDs[c];if(i&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(i,f))return;const p=this.sourceLayerCoder.decode(h),m=this.vtLayers[p].feature(u);if(n.needGeometry){const t=Is(m,!0);if(!n.filter(new Vo(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new Vo(this.tileID.overscaledZ),m))return;const _=this.getId(m,p);for(let e=0;e<f.length;e++){const n=f[e];if(i&&i.indexOf(n)<0)continue;const c=o[n];if(!c)continue;let h={};void 0!==_&&s&&(h=s.getState(c.sourceLayer||"_geojsonTileLayer",_));const p=A({},a[n]);p.paint=Tp(p.paint,c.paint,m,h,r),p.layout=Tp(p.layout,c.layout,m,h,r);const g=!l||l(m,c,h,d);if(!g)continue;const y=new cf(m,this.z,this.x,this.y,_);y.layer=p;let v=t[n];void 0===v&&(v=t[n]=[]),v.push({featureIndex:u,feature:y,intersectionZ:g})}}lookupSymbolFeatures(t,e,n,i,r,o,a,s){const l={};this.loadVTLayers();const u=Ni(r);for(const r of t)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:i,featureIndex:r,layoutVertexArrayOffset:0},u,o,a,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;if(this.promoteId){const i="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];n=t.properties[i],"boolean"==typeof n&&(n=Number(n))}return n}}function Tp(t,e,n,i,r){return N(t,((t,o)=>{const a=e instanceof Qo?e.get(o):null;return a&&a.evaluate?a.evaluate(n,i,r):a}))}function kp(t,e){return e-t}wr("FeatureIndex",Mp,{omit:["rawTileData","sourceLayerCoder"]});class Sp{constructor(t){const e={},n=[];for(const i in t){const r=t[i],o=e[i]={};for(const t in r){const e=r[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const i=e.metrics.localGlyph?2:1,a={x:0,y:0,w:e.bitmap.width+2*i,h:e.bitmap.height+2*i};n.push(a),o[t]={rect:a,metrics:e.metrics}}}const{w:i,h:r}=ah(n),o=new jl({width:i||1,height:r||1});for(const n in t){const i=t[n];for(const t in i){const r=i[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const a=e[n][t].rect,s=r.metrics.localGlyph?2:1;jl.copy(r.bitmap,o,{x:0,y:0},{x:a.x+s,y:a.y+s},r.bitmap)}}this.image=o,this.positions=e}}wr("GlyphAtlas",Sp);class Ep{constructor(t){this.tileID=new sf(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile}parse(t,e,n,i,r){const o=tf.beginMeasure("parseTile1");this.status="parsing",this.data=t,this.collisionBoxArray=new Fa;const a=new uf(Object.keys(t.layers).sort()),s=new Mp(this.tileID,this.promoteId);s.bucketLayerIDs=[];const l={},u=new Vd(256,256),c={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:u,availableImages:n},d=e.familiesBySource[this.source];for(const e in d){const i=t.layers[e];if(!i)continue;let r=!1,o=!1;for(const t of d[e])"symbol"===t[0].type?r=!0:o=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!o)continue;1===i.version&&$(`Vector tile source "${this.source}" layer "${e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const u=a.encode(e),f=[];for(let t=0;t<i.length;t++){const n=i.feature(t),r=s.getId(n,e);f.push({feature:n,id:r,index:t,sourceLayerIndex:u})}for(const t of d[e]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||(h(e.source===this.source),e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(Cp(t,this.zoom,n),(l[e.id]=e.createBucket({index:s.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:u,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(f,c,this.tileID.canonical),s.bucketLayerIDs.push(t.map((t=>t.id)))))}}let f,p,m,_;u.trim();const g={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},y=N(c.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?i.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{f||(f=t,p=e,b.call(this))}),void 0,!1,g):p={};const v=Object.keys(c.iconDependencies);v.length?i.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{f||(f=t,m=e,b.call(this))}),void 0,!1,g):m={};const x=Object.keys(c.patternDependencies);function b(){if(f)return r(f);if(p&&m&&_){const t=tf.beginMeasure("parseTile2"),e=new Sp(p),i=new lh(m,_);for(const t in l){const r=l[t];r instanceof gd?(Cp(r.layers,this.zoom,n),ed(r,p,e.positions,m,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):r.hasPattern&&(r instanceof _c||r instanceof Pu||r instanceof Qu)&&(Cp(r.layers,this.zoom,n),r.addFeatures(c,this.tileID.canonical,i.patternPositions))}this.status="done",r(null,{buckets:D(l).filter((t=>!t.isEmpty())),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:u,imageAtlas:i,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?e.positions:null}),tf.endMeasure(t)}}x.length?i.send("getImages",{icons:x,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{f||(f=t,_=e,b.call(this))}),void 0,!1,g):_={},tf.endMeasure(o),b.call(this)}}function Cp(t,e,n){const i=new Vo(e);for(const e of t)e.recalculate(i,n)}class Lp{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,i){const r=this.entries[t]=this.entries[t]||{callbacks:[]};if(r.result){const[t,n]=r.result;return this.scheduler?this.scheduler.add((()=>{i(t,n)}),e):i(t,n),()=>{}}return r.callbacks.push(i),r.cancel||(r.cancel=n(((n,i)=>{r.result=[n,i];for(const t of r.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,i)}),e):t(n,i);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{r.result||(r.callbacks=r.callbacks.filter((t=>t!==i)),r.callbacks.length||(r.cancel(),delete this.entries[t]))}}}function Dp(t,e,n){const i=JSON.stringify(t.request);t.data&&(this.deduped.entries[i]={result:[null,t.data]});const r={type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom};return this.deduped.request(i,r,(e=>{const i=Bt(t.request,((t,i,r,o)=>{t?e(t):i&&e(null,{vectorTile:n?void 0:new Gu.VectorTile(new Oc(i)),rawData:i,cacheControl:r,expires:o})}));return()=>{i.cancel(),e()}}),e)}t.AUTH_ERR_MSG=ct,t.Aabb=Pl,t.Actor=class{constructor(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.cancelCallbacks={},O(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=q()?t:g,this.scheduler=new nf}send(t,e,n,i,r=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=J(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:kr(e,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||q()){const t=this.callbacks[n],i=t&&t.metadata||{type:"message"};this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,e)),i)}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Sr(e.error)):n(null,Sr(e.data)))}else{const n=J(this.globalScope)?void 0:[],i=e.hasCallback?(e,i)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?kr(e):null,data:kr(i,n)},n)}:t=>{},r=Sr(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,r,i);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],r.source)[t[1]](r,i)}else i(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=of,t.Color=Te,t.ColorMode=mp,t.Context=class{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Af(this),this.clearDepth=new Pf(this),this.clearStencil=new If(this),this.colorMask=new zf(this),this.depthMask=new Ff(this),this.stencilMask=new Rf(this),this.stencilFunc=new Of(this),this.stencilOp=new Yf(this),this.stencilTest=new Nf(this),this.depthRange=new Bf(this),this.depthTest=new jf(this),this.depthFunc=new Uf(this),this.blend=new $f(this),this.blendFunc=new Hf(this),this.blendColor=new Vf(this),this.blendEquation=new qf(this),this.cullFace=new Wf(this),this.cullFaceSide=new Gf(this),this.frontFace=new Zf(this),this.program=new Xf(this),this.activeTexture=new Kf(this),this.viewport=new Jf(this),this.bindFramebuffer=new Qf(this),this.bindRenderbuffer=new tp(this),this.bindTexture=new ep(this),this.bindVertexBuffer=new np(this),this.bindElementBuffer=new ip(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rp(this),this.pixelStoreUnpack=new op(this),this.pixelStoreUnpackPremultiplyAlpha=new ap(this),this.pixelStoreUnpackFlipY=new sp(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Ef(this,t,e)}createVertexBuffer(t,e,n){return new Lf(this,t,e,n)}createRenderbuffer(t,e,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,n){return new hp(this,t,e,n)}clear({color:t,depth:e,stencil:n}){const i=this.gl;let r=0;t&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==n&&(r|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),i.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){y(t.blendFunction,mp.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}},t.CullFaceMode=yp,t.DEMData=kf,t.DataConstantProperty=ta,t.Debug=hf,t.DedupedRequest=Lp,t.DepthMode=dp,t.DepthStencilAttachment=class extends cp{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}},t.EXTENT=Ls,t.Elevation=class{getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){null==e&&(e=null);const i=this._source();if(!i)return e;if(t.y<0||t.y>1)return e;const r=i.getSource().maxzoom,o=1<<r,a=Math.floor(t.x),s=t.x-a,l=new sf(r,a,r,Math.floor(s*o),Math.floor(t.y*o)),u=this.findDEMTileFor(l);if(!u||!u.dem)return e;const c=u.dem,h=1<<u.tileID.canonical.z,d=(s*h-u.tileID.canonical.x)*c.dim,f=(t.y*h-u.tileID.canonical.y)*c.dim,p=Math.floor(d),m=Math.floor(f);return(n?this.exaggeration():1)*yn(yn(c.get(p,m),c.get(p,m+1),f-m),yn(c.get(p+1,m),c.get(p+1,m+1),f-m),d-p)}getAtTileOffset(t,e,n){const i=1<<t.canonical.z;return this.getAtPointOrZero(new Hd(t.wrap+(t.canonical.x+e/Ls)/i,(t.canonical.y+n/Ls)/i))}getForTilePoints(t,e,n,i){const r=wp.create(this,t,i);return!!r&&(e.forEach((t=>{t[2]=this.exaggeration()*r.getElevationAt(t[0],t[1],n)})),!0)}getMinMaxForTile(t){const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,i=e.tileID,r=1<<t.canonical.z-i.canonical.z;let o=t.canonical.x/r-i.canonical.x,a=t.canonical.y/r-i.canonical.y,s=0;for(let e=0;e<t.canonical.z-i.canonical.z&&!n.leaves[s];e++){o*=2,a*=2;const t=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+t,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Kt,t.EvaluationParameters=Vo,t.Event=Xt,t.Evented=Jt,t.Frustum=Al,t.GlyphManager=Uh,t.ImagePosition=sh,t.LineAtlas=Vd,t.LngLat=Rd,t.LngLatBounds=zd,t.LocalGlyphMode=jh,t.MAX_SAFE_INTEGER=v,t.MercatorCoordinate=Hd,t.ONE_EM=Ec,t.OverscaledTileID=sf,t.PerformanceMarkers=Gd,t.PerformanceUtils=tf,t.Properties=oa,t.RGBAImage=Ul,t.Ray=class{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,n){const i=ml(e,this.dir);if(Math.abs(i)<1e-6)return!1;const r=ml(yl(ol(),t,this.pos),e)/i;return function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]}(n,fl(ol(),this.pos,this.dir,r)),!0}},t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ut,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!ht(t))return t;const n=pt(t);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!ht(t))return t;const n=pt(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e){if(!ht(t))return t;const n=pt(t);return n.path=`/v4/${n.authority}.json`,n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,i){const r=pt(t);return ht(t)?(r.path=`/styles/v1${r.path}/sprite${e}${n}`,this._makeAPIURL(r,this._customAccessToken||i)):(r.path+=`${e}${n}`,mt(r))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!ht(t))return t;const i=pt(t),r=it.supported?".webp":"$1",o=n&&"raster"!==i.authority&&512===n,a=e||o?"@2x":"";if(i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${a}${r}`),"raster"===i.authority)i.path=`/${nt.RASTER_URL_PREFIX}${i.path}`;else{const t=/^.+\/v4\//;i.path=i.path.replace(t,"/"),i.path=`/${nt.TILE_URL_VERSION}${i.path}`}const s=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(i.params)||nt.ACCESS_TOKEN;return nt.REQUIRE_ACCESS_TOKEN&&s&&this._skuToken&&i.params.push(`sku=${this._skuToken}`),this._makeAPIURL(i,s)}canonicalizeTileURL(t,e){const n=pt(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let i="mapbox://";if(n.path.match(/^\/raster\/v1\//)){const t=`/${nt.RASTER_URL_PREFIX}/`;i+=`raster/${n.path.replace(t,"")}`}else{const t=`/${nt.TILE_URL_VERSION}/`;i+=`tiles/${n.path.replace(t,"")}`}let r=n.params;return e&&(r=r.filter((t=>!t.match(/^access_token=/)))),r.length&&(i+=`?${r.join("&")}`),i}canonicalizeTileset(t,e){const n=!!e&&ht(e),i=[];for(const e of t.tiles||[])dt(e)?i.push(this.canonicalizeTileURL(e,n)):i.push(e);return i}_makeAPIURL(t,e){const n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=pt(nt.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==i.path&&(t.path=`${i.path}${t.path}`),!nt.REQUIRE_ACCESS_TOKEN)return mt(t);if(e=e||nt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push(`access_token=${e||""}`),mt(t)}},t.ResourceType=Ft,t.SegmentVector=Cs,t.SourceCache=vp,t.StencilMode=pp,t.StructArrayLayout1ui2=Pa,t.StructArrayLayout2f1f2i16=Ma,t.StructArrayLayout2i4=da,t.StructArrayLayout2ui4=Aa,t.StructArrayLayout3f12=va,t.StructArrayLayout3ui6=ka,t.StructArrayLayout4i8=fa,t.Texture=Id,t.Tile=pf,t.Transitionable=Go,t.Uniform1f=rs,t.Uniform1i=class extends is{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends is{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends is{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=os,t.UniformColor=as,t.UniformMatrix3f=class extends is{constructor(t,e){super(t,e),this.current=ls}set(t){for(let e=0;e<9;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix3fv(this.location,!1,t);break}}},t.UniformMatrix4f=class extends is{constructor(t,e){super(t,e),this.current=ss}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=af,t.ValidationError=te,t.VectorTileWorkerSource=class extends Jt{constructor(t,e,n,i,r){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||Dp,this.loading={},this.loaded={},this.deduped=new Lp(t.scheduler),this.isSpriteLoaded=i,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,i=t&&t.request,r=i&&i.collectResourceTiming,o=this.loading[n]=new Ep(t);o.abort=this.loadVectorData(t,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),e(a);const u=s.rawData,c={};s.expires&&(c.expires=s.expires),s.cacheControl&&(c.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new Gu.VectorTile(new Oc(u));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);const o={};if(r){const t=ef(i);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,A({rawTileData:u.slice(0)},n,c,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{if(this.scheduler){const e={type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom};this.scheduler.add(h,e)}else h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(t,e){const n=this.loaded,i=t.uid,r=this;if(n&&n[i]){const o=n[i];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain;const a=(t,n)=>{const i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,r.layerIndex,this.availableImages,r.actor,i)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const n=t.uid,i=this.loading[n];i&&(i.abort&&i.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()}},t.WritingMode=uh,t.ZoomHistory=Er,t.add=ul,t.addDynamicAttributes=fd,t.altitudeFromMercatorZ=$d,t.assert_1=h,t.asyncAll=L,t.bezier=k,t.bindAll=O,t.bufferConvexPolygon=function(t,e){h(t.length>2,"bufferConvexPolygon requires the ring to have atleast 3 points");const n=[];for(let i=0;i<t.length;i++){const r=C(i-1,-1,t.length-1),o=C(i+1,-1,t.length-1),a=t[r],s=t[i],l=t[o],u=a.sub(s).unit(),c=l.sub(s).unit(),h=c.angleWithSep(u.x,u.y),d=u.add(c).unit().mult(-1*e/Math.sin(h/2));n.push(s.add(d))}return n},t.cacheEntryPossiblyAdded=function(t){zt++,zt>Et&&(t.getActor().send("enforceCacheSizeLimit",St),zt=0)},t.clamp=E,t.clearTileCache=function(t){const e=g.caches.delete(kt);t&&e.catch(t).then((()=>t()))},t.clipLine=zh,t.clone=function(t){var e=new tl(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=j,t.collisionCircleLayout=Sc,t.config=nt,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new tl(16);return tl!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=el,t.create$2=function(){var t=new tl(4);return tl!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createExpression=ki,t.createFilter=Ni,t.createLayout=ca,t.createStyleLayer=function(t){return"custom"===t.type?new Td(t):new Ed[t.type](t)},t.cross=_l,t.deepEqual=y,t.degToRad=w,t.div=xl,t.dot=ml,t.ease=S,t.easeCubicInOut=T,t.emitValidationErrors=_r,t.endsWith=Y,t.enforceCacheSizeLimit=function(t){Dt(),Ct&&Ct.then((e=>{e.keys().then((n=>{for(let i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=Dc,t.evaluateSizeForZoom=Ac,t.evaluateVariableOffset=td,t.evented=jo,t.exactEquals=Dl,t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=tt,t.exported$1=it,t.extend=A,t.filterObject=B,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,u=n*a,c=i*a,h=i*s,d=r*a,f=r*s,p=r*l,m=o*a,_=o*s,g=o*l;return t[0]=1-h-p,t[1]=c+g,t[2]=d-_,t[3]=0,t[4]=c-g,t[5]=1-u-p,t[6]=f+m,t[7]=0,t[8]=d+_,t[9]=f-m,t[10]=1-u-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.furthestTileCorner=function(t){const e=(t+45+360)%360,n=Math.round(e/90)%4;return M[n]},t.getAABBPointSquareDist=function(t,e,n){let i=0;for(let r=0;r<2;++r){const o=n?n[r]:0;h(t[r]<e[r],"Invalid aabb min and max inputs, min[i] must be < max[i]."),t[r]>o&&(i+=(t[r]-o)*(t[r]-o)),e[r]<o&&(i+=(o-e[r])*(o-e[r]))}return i},t.getAnchorAlignment=wh,t.getAnchorJustification=nd,t.getBounds=function(t){let e=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return{min:new m(e,n),max:new m(i,r)}},t.getImage=Wt,t.getJSON=function(t,e){return Nt(A(t,{type:"json"}),e)},t.getMapSessionAPI=Mt,t.getPerformanceMeasurement=ef,t.getRTLTextPluginStatus=Uo,t.getReferrer=Ot,t.getVideo=function(t,e){const n=g.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let e=0;e<t.length;e++){const i=g.document.createElement("source");$t(t[e])||(n.crossOrigin="Anonymous"),i.src=t[e],n.appendChild(i)}return{cancel:()=>{}}},t.identity=nl,t.identity$1=Sl,t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],_=e[14],g=e[15],y=n*s-i*a,v=n*l-r*a,x=n*u-o*a,b=i*l-r*s,w=i*u-o*s,M=r*u-o*l,T=c*m-h*p,k=c*_-d*p,S=c*g-f*p,E=h*_-d*m,C=h*g-f*m,L=d*g-f*_,D=y*L-v*C+x*E+b*S-w*k+M*T;return D?(D=1/D,t[0]=(s*L-l*C+u*E)*D,t[1]=(r*C-i*L-o*E)*D,t[2]=(m*M-_*w+g*b)*D,t[3]=(d*w-h*M-f*b)*D,t[4]=(l*S-a*L-u*k)*D,t[5]=(n*L-r*S+o*k)*D,t[6]=(_*x-p*M-g*v)*D,t[7]=(c*M-d*x+f*v)*D,t[8]=(a*C-s*S+u*T)*D,t[9]=(i*S-n*C-o*T)*D,t[10]=(p*w-m*x+g*y)*D,t[11]=(h*x-c*w-f*y)*D,t[12]=(s*k-a*E-l*T)*D,t[13]=(n*E-i*k+r*T)*D,t[14]=(m*v-p*b-_*y)*D,t[15]=(c*b-h*v+d*y)*D,t):null},t.isMapAuthenticated=function(t){return Tt.has(t)},t.isMapboxURL=ht,t.isSafari=J,t.latFromMercatorY=Ud,t.len=bl,t.length=sl,t.length$1=Cl,t.loadVectorTile=Dp,t.makeRequest=Nt,t.mercatorXfromLng=Nd,t.mercatorYfromLat=Bd,t.mercatorZfromAltitude=jd,t.mul=rl,t.mul$1=vl,t.multiply=il,t.multiply$1=hl,t.nextPowerOfTwo=F,t.normalize=pl,t.normalize$1=Ll,t.number=yn,t.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),l=1/(i-r),u=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*u,t[15]=1,t},t.pbf=Oc,t.perspective=function(t,e,n,i,r){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){const n={};for(let i=0;i<e.length;i++){const r=e[i];r in t&&(n[r]=t[r])}return n},t.plugin=Ho,t.pointGeometry=m,t.polygonIntersectsBox=qs,t.polygonIntersectsPolygon=Rs,t.polygonizeBounds=function(t,e,n=0,i=!0){const r=new m(n,n),o=t.sub(r),a=e.add(r),s=[o,new m(a.x,o.y),a,new m(o.x,a.y)];return i&&s.push(o),s},t.posAttributes=df,t.postMapLoadEvent=bt,t.postTurnstileEvent=vt,t.potpack=ah,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=function(t){return t*b},t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Oo,pluginURL:Yo}),jo.on("pluginStateChange",t),t},t.removeAuthState=function(t){Tt.delete(t)},t.renderColorRamp=Hl,t.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*s,t[1]=r*l+a*s,t[2]=i*-s+o*l,t[3]=r*-s+a*l,t},t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*i,t[5]=a*r+c*i,t[6]=s*r+h*i,t[7]=l*r+d*i,t[8]=u*r-o*i,t[9]=c*r-a*i,t[10]=h*r-s*i,t[11]=d*r-l*i,t},t.rotateX$1=El,t.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[8],c=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-u*i,t[1]=a*r-c*i,t[2]=s*r-h*i,t[3]=l*r-d*i,t[8]=o*i+u*r,t[9]=a*i+c*r,t[10]=s*i+h*r,t[11]=l*i+d*r,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+u*i,t[1]=a*r+c*i,t[2]=s*r+h*i,t[3]=l*r+d*i,t[4]=u*r-o*i,t[5]=c*r-a*i,t[6]=h*r-s*i,t[7]=d*r-l*i,t},t.rotateZ$1=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*s,t[1]=r*l-i*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},t.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=dl,t.scaleAndAdd=fl,t.setCacheLimits=function(t,e){St=t,Et=e},t.setRTLTextPlugin=function(t,e,n=!1){if(Oo===Po||Oo===Io||Oo===zo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Yo=tt.resolveURL(t),Oo=Po,Ro=e,Bo(),n||$o()},t.smoothstep=function(t,e,n){return(n=E((n-t)/(e-t),0,1))*n*(3-2*n)},t.spec=Qt,t.storeAuthState=function(t,e){e?Tt.add(t):Tt.delete(t)},t.sub=yl,t.subtract=cl,t.symbolSize=Pc,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},t.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,t},t.transformMat4$1=wl,t.transformQuat=gl,t.translate=function(t,e,n){var i,r,o,a,s,l,u,c,h,d,f,p,m=n[0],_=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*_+e[8]*g+e[12],t[13]=e[1]*m+e[5]*_+e[9]*g+e[13],t[14]=e[2]*m+e[6]*_+e[10]*g+e[14],t[15]=e[3]*m+e[7]*_+e[11]*g+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],h=e[8],d=e[9],f=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=h,t[9]=d,t[10]=f,t[11]=p,t[12]=i*m+s*_+h*g+e[12],t[13]=r*m+l*_+d*g+e[13],t[14]=o*m+u*_+f*g+e[14],t[15]=a*m+c*_+p*g+e[15]),t},t.triggerPluginCompletionEvent=No,t.uniqueId=I,t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateFog=fr,t.validateLight=dr,t.validateStyle=hr,t.values=D,t.vectorTile=Gu,t.version=d,t.warnOnce=$,t.window=g,t.wrap=C})),r(0,(function(t){function e(t){const n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const i of t)n+=`${e(i)},`;return`${n}]`}const i=Object.keys(t).sort();let r="{";for(let n=0;n<i.length;n++)r+=`${JSON.stringify(i[n])}:${e(t[i[n]])},`;return`${r}}`}function n(n){let i="";for(const r of t.refProperties)i+=`/${e(n[r])}`;return i}class i{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,i){for(const n of e){this._layerConfigs[n.id]=n;const e=this._layers[n.id]=t.createStyleLayer(n);e._featureFilter=t.createFilter(e.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const t of i)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const i={};for(let r=0;r<t.length;r++){const o=e&&e[t[r].id]||n(t[r]);e&&(e[t[r].id]=o);let a=i[o];a||(a=i[o]=[]),a.push(t[r])}const r=[];for(const t in i)r.push(i[t]);return r}(t.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=r[o];a||(a=r[o]=[]),a.push(e)}}}const{ImageBitmap:r}=t.window;class o{loadTile(e,n){const{uid:i,encoding:o,rawImageData:a,padding:s,buildQuadTree:l}=e,u=r&&a instanceof r?this.getImageData(a,s):a;n(null,new t.DEMData(i,u,o,s<1,l))}getImageData(e,n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const i=this.offscreenCanvasContext.getImageData(-n,-n,e.width+2*n,e.height+2*n);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)}}var a=function t(e,n){var i,r=e&&e.type;if("FeatureCollection"===r)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===r)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===r)t(e.geometry,n);else if("Polygon"===r)s(e.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<e.coordinates.length;i++)s(e.coordinates[i],n);return e};function s(t,e){if(0!==t.length){l(t[0],e);for(var n=1;n<t.length;n++)l(t[n],!e)}}function l(t,e){for(var n=0,i=0,r=t.length,o=r-1;i<r;o=i++)n+=(t[i][0]-t[o][0])*(t[o][1]+t[i][1]);n>=0!=!!e&&t.reverse()}const u=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class c{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.pointGeometry(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const i=[];for(const e of n)i.push(new t.pointGeometry(e[0],e[1]));e.push(i)}return e}}toGeoJSON(t,e,n){return u.call(this,t,e,n)}}class h{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new c(this._features[t])}}var d=t.vectorTile.VectorTileFeature,f=p;function p(t,e){this.options=e||{},this.features=t,this.length=t.length}function m(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}p.prototype.feature=function(t){return new m(this.features[t],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],r=[],o=0;o<i.length;o++)r.push(new t.pointGeometry(i[o][0],i[o][1]));this.geometry.push(r)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[e,i,n,r]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var _=x,g=x,y=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new f(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return x({layers:n})},v=f;function x(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,b,t.layers[n])}(e,n),n.finish()}function b(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,w,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)e.writeMessage(4,E,o[n])}function w(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,M,t),e.writeVarintField(3,n.type),e.writeMessage(4,S,n)}function M(t,e){var n=t.feature,i=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=o[s];void 0===l&&(i.push(s),l=i.length-1,o[s]=l),e.writeVarint(l);var u=n.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var h=c+":"+u,d=a[h];void 0===d&&(r.push(u),d=r.length-1,a[h]=d),e.writeVarint(d)}}function T(t,e){return(e<<3)+(7&t)}function k(t){return t<<1^t>>31}function S(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],u=1;1===i&&(u=l.length),e.writeVarint(T(1,u));for(var c=3===i?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==i&&e.writeVarint(T(2,c-1));var d=l[h].x-r,f=l[h].y-o;e.writeVarint(k(d)),e.writeVarint(k(f)),r+=d,o+=f}3===i&&e.writeVarint(T(7,1))}}function E(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function C(t,e,n,i,r,o){if(r-i<=n)return;const a=i+r>>1;L(t,e,a,i,r,o%2),C(t,e,n,i,a-1,o+1),C(t,e,n,a+1,r,o+1)}function L(t,e,n,i,r,o){for(;r>i;){if(r-i>600){const a=r-i+1,s=n-i+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);L(t,e,n,Math.max(i,Math.floor(n-s*u/a+c)),Math.min(r,Math.floor(n+(a-s)*u/a+c)),o)}const a=e[2*n+o];let s=i,l=r;for(D(t,e,i,n),e[2*r+o]>a&&D(t,e,i,r);s<l;){for(D(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*i+o]===a?D(t,e,i,l):(l++,D(t,e,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function D(t,e,n,i){A(t,n,i),A(e,2*n,2*i),A(e,2*n+1,2*i+1)}function A(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function P(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}_.fromVectorTileJs=g,_.fromGeojsonVt=y,_.GeoJSONWrapper=v;const I=t=>t[0],z=t=>t[1];class F{constructor(t,e=I,n=z,i=64,r=Float64Array){this.nodeSize=i,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length);for(let i=0;i<t.length;i++)a[i]=i,s[2*i]=e(t[i]),s[2*i+1]=n(t[i]);C(a,s,i,0,a.length-1,0)}range(t,e,n,i){return function(t,e,n,i,r,o,a){const s=[0,t.length-1,0],l=[];let u,c;for(;s.length;){const h=s.pop(),d=s.pop(),f=s.pop();if(d-f<=a){for(let a=f;a<=d;a++)u=e[2*a],c=e[2*a+1],u>=n&&u<=r&&c>=i&&c<=o&&l.push(t[a]);continue}const p=Math.floor((f+d)/2);u=e[2*p],c=e[2*p+1],u>=n&&u<=r&&c>=i&&c<=o&&l.push(t[p]);const m=(h+1)%2;(0===h?n<=u:i<=c)&&(s.push(f),s.push(p-1),s.push(m)),(0===h?r>=u:o>=c)&&(s.push(p+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,t,e,n,i,this.nodeSize)}within(t,e,n){return function(t,e,n,i,r,o){const a=[0,t.length-1,0],s=[],l=r*r;for(;a.length;){const u=a.pop(),c=a.pop(),h=a.pop();if(c-h<=o){for(let r=h;r<=c;r++)P(e[2*r],e[2*r+1],n,i)<=l&&s.push(t[r]);continue}const d=Math.floor((h+c)/2),f=e[2*d],p=e[2*d+1];P(f,p,n,i)<=l&&s.push(t[d]);const m=(u+1)%2;(0===u?n-r<=f:i-r<=p)&&(a.push(h),a.push(d-1),a.push(m)),(0===u?n+r>=f:i+r>=p)&&(a.push(d+1),a.push(c),a.push(m))}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}const R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},O=Math.fround||(Y=new Float32Array(1),t=>(Y[0]=+t,Y[0]));var Y;class N{constructor(t){this.options=W(Object.create(R),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:i,nodeSize:r}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let a=[];for(let e=0;e<t.length;e++)t[e].geometry&&a.push(j(t[e],e));this.trees[i+1]=new F(a,G,Z,r,Float32Array),e&&console.timeEnd(o);for(let t=i;t>=n;t--){const n=+Date.now();a=this._cluster(a,t),this.trees[t]=new F(a,G,Z,r,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,a.length,+Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){const t=this.getClusters([n,i,180,o],e),a=this.getClusters([-180,i,r,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(H(n),V(o),H(r),V(i)),l=[];for(const t of s){const e=a.points[t];l.push(e.numPoints?U(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.points[e];if(!o)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=r.within(o.x,o.y,a),l=[];for(const e of s){const n=r.points[e];n.parentId===t&&l.push(n.numPoints?U(n):this.points[n.index])}if(0===l.length)throw new Error(i);return l}getLeaves(t,e,n){e=e||10,n=n||0;const i=[];return this._appendLeaves(i,t,e,n,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/r,u=(n+1+s)/r,c={features:[]};return this._addTileFeatures(i.range((e-s)/r,l,(e+1+s)/r,u),i.points,e,n,r,c),0===e&&this._addTileFeatures(i.range(1-s/r,l,1,u),i.points,r,n,r,c),e===r-1&&this._addTileFeatures(i.range(0,l,s/r,u),i.points,-1,n,r,c),c.features.length?c:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,r){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?r+o.point_count<=i?r+=o.point_count:r=this._appendLeaves(t,o.cluster_id,n,i,r):r<i?r++:t.push(e),t.length===n)break}return r}_addTileFeatures(t,e,n,i,r,o){for(const a of t){const t=e[a],s=t.numPoints;let l,u,c;if(s)l=$(t),u=t.x,c=t.y;else{const e=this.points[t.index];l=e.properties,u=H(e.geometry.coordinates[0]),c=V(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(u*r-n)),Math.round(this.options.extent*(c*r-i))]],tags:l};let d;s?d=t.id:this.options.generateId?d=t.index:this.points[t.index].id&&(d=this.points[t.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:i,extent:r,reduce:o,minPoints:a}=this.options,s=i/(r*Math.pow(2,e));for(let i=0;i<t.length;i++){const r=t[i];if(r.zoom<=e)continue;r.zoom=e;const l=this.trees[e+1],u=l.within(r.x,r.y,s),c=r.numPoints||1;let h=c;for(const t of u){const n=l.points[t];n.zoom>e&&(h+=n.numPoints||1)}if(h>=a){let t=r.x*c,a=r.y*c,s=o&&c>1?this._map(r,!0):null;const d=(i<<5)+(e+1)+this.points.length;for(const n of u){const i=l.points[n];if(i.zoom<=e)continue;i.zoom=e;const u=i.numPoints||1;t+=i.x*u,a+=i.y*u,i.parentId=d,o&&(s||(s=this._map(r,!0)),o(s,this._map(i)))}r.parentId=d,n.push(B(t/h,a/h,d,h,s))}else if(n.push(r),h>1)for(const t of u){const i=l.points[t];i.zoom<=e||(i.zoom=e,n.push(i))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?W({},t.properties):t.properties;const n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?W({},i):i}}function B(t,e,n,i,r){return{x:O(t),y:O(e),zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function j(t,e){const[n,i]=t.geometry.coordinates;return{x:O(H(n)),y:O(V(i)),zoom:1/0,index:e,parentId:-1}}function U(t){return{type:"Feature",id:t.id,properties:$(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),q(t.y)]}};var e}function $(t){const e=t.numPoints,n=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return W(W({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function H(t){return t/360+.5}function V(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function q(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function W(t,e){for(const n in e)t[n]=e[n];return t}function G(t){return t.x}function Z(t){return t.y}function X(t,e,n,i){for(var r,o=i,a=n-e>>1,s=n-e,l=t[e],u=t[e+1],c=t[n],h=t[n+1],d=e+3;d<n;d+=3){var f=K(t[d],t[d+1],l,u,c,h);if(f>o)r=d,o=f;else if(f===o){var p=Math.abs(d-a);p<s&&(r=d,s=p)}}o>i&&(r-e>3&&X(t,e,r,i),t[r+2]=o,n-r>3&&X(t,r,n,i))}function K(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var l=((t-n)*a+(e-i)*s)/(a*a+s*s);l>1?(n=r,i=o):l>0&&(n+=a*l,i+=s*l)}return(a=t-n)*a+(s=e-i)*s}function J(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Q(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)Q(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)Q(t,e[i][r])}(r),r}function Q(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function tt(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)et(r,s);else if("MultiPoint"===o)for(var u=0;u<r.length;u++)et(r[u],s);else if("LineString"===o)nt(r,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(u=0;u<r.length;u++)s=[],nt(r[u],s,a,!1),t.push(J(l,"LineString",s,e.properties));return}it(r,s,a,!1)}else if("Polygon"===o)it(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<e.geometry.geometries.length;u++)tt(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<r.length;u++){var c=[];it(r[u],c,a,!0),s.push(c)}}t.push(J(l,o,s,e.properties))}}function et(t,e){e.push(rt(t[0])),e.push(ot(t[1])),e.push(0)}function nt(t,e,n,i){for(var r,o,a=0,s=0;s<t.length;s++){var l=rt(t[s][0]),u=ot(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(a+=i?(r*u-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(u-o,2))),r=l,o=u}var c=e.length-3;e[2]=1,X(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function it(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];nt(t[r],o,n,i),e.push(o)}}function rt(t){return t/360+.5}function ot(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function at(t,e,n,i,r,o,a,s){if(i/=e,o>=(n/=e)&&a<i)return t;if(a<n||o>=i)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],h=c.geometry,d=c.type,f=0===r?c.minX:c.minY,p=0===r?c.maxX:c.maxY;if(f>=n&&p<i)l.push(c);else if(!(p<n||f>=i)){var m=[];if("Point"===d||"MultiPoint"===d)st(h,m,n,i,r);else if("LineString"===d)lt(h,m,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===d)ct(h,m,n,i,r,!1);else if("Polygon"===d)ct(h,m,n,i,r,!0);else if("MultiPolygon"===d)for(var _=0;_<h.length;_++){var g=[];ct(h[_],g,n,i,r,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(_=0;_<m.length;_++)l.push(J(c.id,d,m[_],c.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(J(c.id,d,m,c.tags))}}}return l.length?l:null}function st(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=n&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function lt(t,e,n,i,r,o,a){for(var s,l,u=ut(t),c=0===r?dt:ft,h=t.start,d=0;d<t.length-3;d+=3){var f=t[d],p=t[d+1],m=t[d+2],_=t[d+3],g=t[d+4],y=0===r?f:p,v=0===r?_:g,x=!1;a&&(s=Math.sqrt(Math.pow(f-_,2)+Math.pow(p-g,2))),y<n?v>n&&(l=c(u,f,p,_,g,n),a&&(u.start=h+s*l)):y>i?v<i&&(l=c(u,f,p,_,g,i),a&&(u.start=h+s*l)):ht(u,f,p,m),v<n&&y>=n&&(l=c(u,f,p,_,g,n),x=!0),v>i&&y<=i&&(l=c(u,f,p,_,g,i),x=!0),!o&&x&&(a&&(u.end=h+s*l),e.push(u),u=ut(t)),a&&(h+=s)}var b=t.length-3;f=t[b],p=t[b+1],m=t[b+2],(y=0===r?f:p)>=n&&y<=i&&ht(u,f,p,m),b=u.length-3,o&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&ht(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ut(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ct(t,e,n,i,r,o){for(var a=0;a<t.length;a++)lt(t[a],e,n,i,r,o,!1)}function ht(t,e,n,i){t.push(e),t.push(n),t.push(i)}function dt(t,e,n,i,r,o){var a=(o-e)/(i-e);return t.push(o),t.push(n+(r-n)*a),t.push(1),a}function ft(t,e,n,i,r,o){var a=(o-n)/(r-n);return t.push(e+(i-e)*a),t.push(o),t.push(1),a}function pt(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=mt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(mt(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(mt(o.geometry[s][u],e));r.push(l)}n.push(J(o.id,a,r,o.tags))}return n}function mt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function _t(t,e){if(t.transformed)return t;var n,i,r,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(i=0;i<u.length;i+=2)l.geometry.push(gt(u[i],u[i+1],e,o,a,s));else for(i=0;i<u.length;i++){var h=[];for(r=0;r<u[i].length;r+=2)h.push(gt(u[i][r],u[i][r+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function gt(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function yt(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,vt(a,t[s],o,r);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),h>a.maxY&&(a.maxY=h)}return a}function vt(t,e,n,i){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)xt(a,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)xt(a,r[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var u=r[l];for(s=0;s<u.length;s++)xt(a,u[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in c={},e.tags)c[h]=e.tags[h];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(d.id=e.id),t.features.push(d)}}function xt(t,e,n,i,r,o){var a=i*i;if(i>0&&e.size<(r?a:i))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=a,t[r-1-i]=s}}(s,o),t.push(s)}}function bt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)tt(n,t.features[i],e,i);else"Feature"===t.type?tt(n,t,e):tt(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,r=at(t,1,-1-n,n,0,-1,2,e),o=at(t,1,1-n,2+n,0,-1,2,e);return(r||o)&&(i=at(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=pt(r,1).concat(i)),o&&(i=i.concat(pt(o,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wt(t,e,n){return 32*((1<<t)*n+e)+t}function Mt(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);const r=new h(i.features);let o=_(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}bt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},bt.prototype.splitTile=function(t,e,n,i,r,o,a){for(var s=[t,e,n,i],l=this.options,u=l.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,h=wt(e,n,i),d=this.tiles[h];if(!d&&(u>1&&console.time("creation"),d=this.tiles[h]=yt(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(d.source=t,r){if(e===l.maxZoom||e===r)continue;var p=1<<r-e;if(n!==Math.floor(o/p)||i!==Math.floor(a/p))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){u>1&&console.time("clipping");var m,_,g,y,v,x,b=.5*l.buffer/l.extent,w=.5-b,M=.5+b,T=1+b;m=_=g=y=null,v=at(t,c,n-b,n+M,0,d.minX,d.maxX,l),x=at(t,c,n+w,n+T,0,d.minX,d.maxX,l),t=null,v&&(m=at(v,c,i-b,i+M,1,d.minY,d.maxY,l),_=at(v,c,i+w,i+T,1,d.minY,d.maxY,l),v=null),x&&(g=at(x,c,i-b,i+M,1,d.minY,d.maxY,l),y=at(x,c,i+w,i+T,1,d.minY,d.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*i),s.push(_||[],e+1,2*n,2*i+1),s.push(g||[],e+1,2*n+1,2*i),s.push(y||[],e+1,2*n+1,2*i+1)}}},bt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,o=i.debug;if(t<0||t>24)return null;var a=1<<t,s=wt(t,e=(e%a+a)%a,n);if(this.tiles[s])return _t(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,u=t,c=e,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[wt(u,c,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,h),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?_t(this.tiles[s],r):null):null};class Tt extends t.VectorTileWorkerSource{constructor(t,e,n,i,r){super(t,e,n,i,Mt),r&&(this.loadGeoJSON=r)}loadData(e,n){const i=e&&e.request,r=i&&i.collectResourceTiming;this.loadGeoJSON(e,((o,s)=>{if(o||!s)return n(o);if("object"!=typeof s)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{a(s,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const i=s.features.filter((t=>n.value.evaluate({zoom:0},t)));s={type:"FeatureCollection",features:i}}this._geoJSONIndex=e.cluster?new N(function({superclusterOptions:e,clusterProperties:n}){if(!n||!e)return e;const i={},r={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const e of s){const[o,a]=n[e],s=t.createExpression(a),l=t.createExpression("string"==typeof o?[o,["accumulated"],["get",e]]:o);t.assert_1("success"===s.result),t.assert_1("success"===l.result),i[e]=s.value,r[e]=l.value}return e.map=t=>{a.properties=t;const e={};for(const t of s)e[t]=i[t].evaluate(o,a);return e},e.reduce=(t,e)=>{a.properties=e;for(const e of s)o.accumulated=t[e],t[e]=r[e].evaluate(o,a)},e}(e)).load(s.features):function(t,e){return new bt(t,e)}(s,e.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(r){const n=t.getPerformanceMeasurement(i);n&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(t,e){const n=this.loaded,i=t.uid;return n&&n[i]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class kt{constructor(e){t.PerformanceUtils.measure("workerEvaluateScript"),this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:Tt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded=n;for(const i in this.workerSources[e]){const r=this.workerSources[e][i];for(const e in r)r[e]instanceof t.VectorTileWorkerSource&&(r[e].isSpriteLoaded=n,r[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const n in this.workerSources[t]){const i=this.workerSources[t][n];for(const t in i)i[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,i){t.assert_1(n.type);const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(e,n.type,n.source).loadTile(r,i)}loadDEMTile(e,n,i){const r=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(r,i)}reloadTile(e,n,i){t.assert_1(n.type);const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(e,n.type,n.source).reloadTile(r,i)}abortTile(e,n,i){t.assert_1(n.type),this.getWorkerSource(e,n.type,n.source).abortTile(n,i)}removeTile(e,n,i){t.assert_1(n.type),this.getWorkerSource(e,n.type,n.source).removeTile(n,i)}removeSource(e,n,i){if(t.assert_1(n.type),t.assert_1(n.source),!this.workerSources[e]||!this.workerSources[e][n.type]||!this.workerSources[e][n.type][n.source])return;const r=this.workerSources[e][n.type][n.source];delete this.workerSources[e][n.type][n.source],void 0!==r.removeSource?r.removeSource(n,i):i()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,i){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();i(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),n)}}catch(t){i(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const i={send:(e,n,i,r,o,a)=>{this.actor.send(e,n,i,t,o,a)},scheduler:this.actor.scheduler};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded)}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new o),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,n,i){i(void 0,t.PerformanceUtils.getWorkerPerformanceMetrics())}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new kt(self)),kt})),r(0,(function(t){var e=n;function n(t){return!function(t){return"undefined"!=typeof window&&"undefined"!=typeof document?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(e=t&&t.failIfMajorPerformanceCaveat,void 0===i[e]&&(i[e]=function(t){var e,i=function(t){var e=document.createElement("canvas"),i=Object.create(n.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,e.getContext("webgl",i)||e.getContext("experimental-webgl",i)}(t);if(!i)return!1;try{e=i.createShader(i.VERTEX_SHADER)}catch(t){return!1}return!(!e||i.isContextLost())&&(i.shaderSource(e,"void main() {}"),i.compileShader(e),!0===i.getShaderParameter(e,i.COMPILE_STATUS))}(e)),i[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var e}(t)}var i={};n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const r={create:function(e,n,i){const r=t.window.document.createElement(e);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},o=t.window.document&&t.window.document.documentElement.style,a=o&&void 0!==o.userSelect?"userSelect":"WebkitUserSelect";let s;r.disableDrag=function(){o&&a&&(s=o[a],o[a]="none")},r.enableDrag=function(){o&&a&&(o[a]=s)},r.setTransform=function(t,e){t.style.transform=e};let l=!1;try{const e=Object.defineProperty({},"passive",{get(){l=!0}});t.window.addEventListener("test",e,e),t.window.removeEventListener("test",e,e)}catch(t){l=!1}r.addEventListener=function(t,e,n,i={}){"passive"in i&&l?t.addEventListener(e,n,i):t.addEventListener(e,n,i.capture)},r.removeEventListener=function(t,e,n,i={}){"passive"in i&&l?t.removeEventListener(e,n,i):t.removeEventListener(e,n,i.capture)};const u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};function c(e,n,i){const r=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.pointGeometry((i.clientX-n.left)*r,(i.clientY-n.top)*r)}function h(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}r.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",u,!0)}),0)},r.mousePos=function(t,e){const n=t.getBoundingClientRect();return c(t,n,e)},r.touchPos=function(t,e){const n=t.getBoundingClientRect(),i=[];for(let r=0;r<e.length;r++)i.push(c(t,n,e[r]));return i},r.mouseButton=function(e){return t.assert_1("mousedown"===e.type||"mouseup"===e.type),void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},r.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};class d extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(e,n){t.assert_1(!this.images[e]),this._validate(e,n)&&(this.images[e]=n)}_validate(e,n){let i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),i=!1),i}_validateStretch(t,e){if(!t)return!0;let n=0;for(const i of t){if(i[0]<n||i[1]<i[0]||e<i[1])return!1;n=i[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(e,n){const i=this.images[e];t.assert_1(i),t.assert_1(i.data.width===n.data.width),t.assert_1(i.data.height===n.data.height),n.version=i.version+1,this.images[e]=n,this.updatedImages[e]=!0}removeImage(e){t.assert_1(this.images[e]);const n=this.images[e];delete this.images[e],delete this.patterns[e],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const i={};for(const n of e){this.images[n]||this.fire(new t.Event("styleimagemissing",{id:n}));const e=this.images[n];e?i[n]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,i)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.ImagePosition(n,i);this.patterns[e]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:i}=t.potpack(e),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const e in this.patterns){const{bin:n}=this.patterns[e],i=n.x+1,o=n.y+1,a=this.images[e].data,s=a.width,l=a.height;t.RGBAImage.copy(a,r,{x:0,y:0},{x:i,y:o},{width:s,height:l}),t.RGBAImage.copy(a,r,{x:0,y:l-1},{x:i,y:o-1},{width:s,height:1}),t.RGBAImage.copy(a,r,{x:0,y:0},{x:i,y:o+l},{width:s,height:1}),t.RGBAImage.copy(a,r,{x:s-1,y:0},{x:i-1,y:o},{width:1,height:l}),t.RGBAImage.copy(a,r,{x:0,y:0},{x:i+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.images[n];t.assert_1(e),h(e)&&this.updateImage(n,e)}}}const f=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function([e,n,i]){const r=t.degToRad(n+90),o=t.degToRad(i);return{x:e*Math.cos(r)*Math.sin(o),y:e*Math.sin(r)*Math.sin(o),z:e*Math.cos(o),azimuthal:n,polar:i}}(e.expression.evaluate(n))}interpolate(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i),azimuthal:t.number(e.azimuthal,n.azimuthal,i),polar:t.number(e.polar,n.polar,i)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),p="-transition";class m extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(f),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(t.validateLight,e,n))for(const n in e){const i=e[n];t.endsWith(n,p)?this._transitionable.setTransition(n.slice(0,-p.length),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const _=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)}),g="-transition";class y extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(_),this.set(e),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(e){for(const n in e){const i=e[n];t.endsWith(n,g)?this._transitionable.setTransition(n.slice(0,-g.length),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function v(e,n,i,r){const o=t.smoothstep(45,65,i),[a,s]=x(e,r),l=(t.length(n)-a)/(s-a);let u=1-Math.min(1,Math.exp(-6*l));return u*=u*u,u=Math.min(1,1.00747*u),u*o*e.alpha}function x(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const b=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"])}),w="-transition";class M extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(b),this.set(e),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e){if(!this._validate(t.validateFog,e))for(const n in e){const i=e[n];t.endsWith(n,w)?this._transitionable.setTransition(n.slice(0,-w.length),i):this._transitionable.setValue(n,i)}}getOpacity(e){const n=this.properties&&this.properties.get("color")||1;return t.smoothstep(45,65,e)*n.a}getOpacityAtLatLng(e,n){return function(e,n,i){const r=t.MercatorCoordinate.fromLngLat(n),o=i.elevation?i.elevation.getAtPointOrZero(r):0,a=[r.x,r.y,o];return t.transformMat4(a,a,i.mercatorFogMatrix),v(e,a,i.pitch,i._fov)}(this.state,e,n)}getFovAdjustedRange(t){return x(this.state,t)}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class T{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const i=this.workerPool.acquire(this.id);for(let t=0;t<i.length;t++){const e=i[t],r=new T.Actor(e,n,this.id);r.name=`Worker ${t}`,this.actors.push(r)}t.assert_1(this.actors.length),this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,n,i){t.assert_1(this.actors.length),i=i||function(){},t.asyncAll(this.actors,((t,i)=>{t.send(e,n,i)}),i)}getActor(){return t.assert_1(this.actors.length),this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function k(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}T.Actor=t.Actor;class S{constructor(t,e,n,i){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((t=>i.pointCoordinate3D(t))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(e,n){let i,r;if(e instanceof t.pointGeometry||"number"==typeof e[0]){const o=t.pointGeometry.convert(e);i=[t.pointGeometry.convert(e)],r=n.isPointAboveHorizon(o)}else{const o=t.pointGeometry.convert(e[0]),a=t.pointGeometry.convert(e[1]);i=[o,a],r=t.polygonizeBounds(o,a).every((t=>n.isPointAboveHorizon(t)))}return new S(i,n.getCameraPoint(),r,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],r=t.polygonizeBounds(n,i,0,!1);return this.cameraPoint.y>i.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<i.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=i.x?r[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(r[3]=this.cameraPoint)),t.bufferConvexPolygon(r,e)}containsTile(e,n,i){const r=e.queryPadding+1,o=i?this._bufferedCameraMercator(r,n).map((t=>e.tileID.getTilePoint(t))):this._bufferedScreenMercator(r,n).map((t=>e.tileID.getTilePoint(t))),a=this.screenGeometryMercator.map((t=>e.tileID.getTileVec3(t))),s=a.map((e=>new t.pointGeometry(e[0],e[1]))),l=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),u=e.tileID.getTileVec3(l),c=a.map((e=>{const n=t.sub(e,e,u);return t.normalize(n,n),new t.Ray(u,n)})),h=k(e,1,n.zoom);if(t.polygonIntersectsBox(o,0,0,t.EXTENT,t.EXTENT))return{queryGeometry:this,tilespaceGeometry:s,tilespaceRays:c,bufferedTilespaceGeometry:o,bufferedTilespaceBounds:(d=t.getBounds(o),d.min.x=t.clamp(d.min.x,0,t.EXTENT),d.min.y=t.clamp(d.min.y,0,t.EXTENT),d.max.x=t.clamp(d.max.x,0,t.EXTENT),d.max.y=t.clamp(d.max.y,0,t.EXTENT),d),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:h};var d}_bufferedScreenMercator(t,e){const n=E(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{const i=this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._screenRaycastCache[n]=i,i}}_bufferedCameraMercator(t,e){const n=E(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{const i=this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._cameraRaycastCache[n]=i,i}}}function E(t){return 100*t|0}function C(e,n,i){const r=function(r,o){if(r)return i(r);if(o){const r=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(r.vectorLayers=o.vector_layers,r.vectorLayerIds=r.vectorLayers.map((t=>t.id))),r.tiles=n.canonicalizeTileset(r,e.url),i(null,r)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.exported.frame((()=>r(null,e)))}class L{constructor(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<a}}class D extends t.Evented{constructor(e,n,i,r){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new L(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t();const e=this.map.style._getSourceCaches(this.id);for(const t of e)t.clearTiles();this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",r,o.bind(this));else if(e.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",r,o.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},r,((t,n)=>{t||!n?o.call(this,t):(r.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",r,o.bind(this),void 0,!0))}),!0);e.request={cancel:n}}function o(i,r){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}}class A extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new L(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const i=t.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((i,r,o,a)=>{if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a});const i=this.map.painter.context,s=i.gl;e.texture=this.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new t.Texture(i,r,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),i.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let P;class I extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,e,((e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,n){const i=e.actor?"reloadTile":"loadTile";e.actor=this.actor;const r={type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.request=this.actor.send(i,r,((t,r)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(r,this.map.painter,"reloadTile"===i),n(null)))),void 0,"loadTile"===i)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var z=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class F extends t.Evented{constructor(t,e,n,i){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=e}load(e,n){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((i,r)=>{this._loaded=!0,i?this.fire(new t.ErrorEvent(i)):r&&(this.image=r,e&&(this.coordinates=e),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let n=1/0,i=1/0,r=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y);const a=r-n,s=o-i,l=Math.max(a,s),u=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),c=Math.pow(2,u);return new t.CanonicalTileID(u,Math.floor((n+r)/2*c),Math.floor((i+o)/2*c))}(n),this.minzoom=this.maxzoom=this.tileID.z;const i=n.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const R={vector:D,raster:A,"raster-dem":class extends A{constructor(e,n,i,r){super(e,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o,a,s){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s});const n=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==P&&(P=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),P),i=1-(o.width-t.prevPowerOfTwo(o.width))/2;i<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=n?o:t.exported.getImageData(o,i),u={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:i};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",u,r.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:I,video:class extends F{constructor(t,e,n,i){super(t,e,n,i),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:F,canvas:class extends F{constructor(e,n,i,r){super(e,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,i=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,i.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}},O=function(e,n,i,r){const o=new R[n.type](e,n,i,r);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function Y(e,n){const i=t.identity([]);return t.scale(i,i,[.5*e.width,.5*-e.height,1]),t.translate(i,i,[1,-1,0]),t.multiply(i,i,e.calculateProjMatrix(n.toUnwrapped()))}function N(t,e,n,i,r,o,a,s=!1){const l=t.tilesIn(i,a,s);l.sort(j);const u=[];for(const i of l)u.push({wrappedTileID:i.tile.tileID.wrapped().key,queryResults:i.tile.queryRenderedFeatures(e,n,t._state,i,r,o,Y(t.transform,i.tile.tileID),s)});const c=function(t){const e={},n={};for(const i of t){const t=i.queryResults,r=i.wrappedTileID,o=n[r]=n[r]||{};for(const n in t){const i=t[n],r=o[n]=o[n]||{},a=e[n]=e[n]||[];for(const t of i)r[t.featureIndex]||(r[t.featureIndex]=!0,a.push(t))}}return e}(u);for(const e in c)c[e].forEach((e=>{const n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return c}function B(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),i=[],r={};for(let t=0;t<n.length;t++){const o=n[t],a=o.tileID.canonical.key;r[a]||(r[a]=!0,o.querySourceFeatures(i,e))}return i}function j(t,e){const n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function U(){return null!=fr.workerClass?new fr.workerClass:new t.window.Worker(fr.workerUrl)}const $="mapboxgl_preloaded_worker_pool";class H{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<H.workerCount;)this.workers.push(new U);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[$]}numActive(){return Object.keys(this.active).length}}let V;function q(){return V||(V=new H),V}function W(e,n){const i={};for(const t in e)"ref"!==t&&(i[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(i[t]=n[t])})),i}function G(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=W(t[n],e[t[n].ref]));return t}H.workerCount=2;const Z={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function X(t,e,n){n.push({command:Z.addSource,args:[t,e[t]]})}function K(t,e,n){e.push({command:Z.removeSource,args:[t]}),n[t]=!0}function J(t,e,n,i){K(t,n,i),X(t,e,n)}function Q(e,n,i){let r;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;return!0}function tt(e,n,i,r,o,a){let s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}))}function et(t){return t.id}function nt(t,e){return t[e.id]=e,t}function it(e,n){if(!e)return[{command:Z.setStyle,args:[n]}];let i=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Z.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||i.push({command:Z.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||i.push({command:Z.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||i.push({command:Z.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||i.push({command:Z.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||i.push({command:Z.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||i.push({command:Z.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||i.push({command:Z.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||i.push({command:Z.setLight,args:[n.light]}),t.deepEqual(e.fog,n.fog)||i.push({command:Z.setFog,args:[n.fog]});const r={},o=[];!function(e,n,i,r){let o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||K(o,i,r));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Q(e,n,o)?i.push({command:Z.setGeoJSONSourceData,args:[o,n[o].data]}):J(o,n,i,r)):X(o,n,i))}(e.sources,n.sources,o,r);const a=[];e.layers&&e.layers.forEach((t=>{r[t.source]?i.push({command:Z.removeLayer,args:[t.id]}):a.push(t)}));let s=e.terrain;s&&r[s.source]&&(i.push({command:Z.setTerrain,args:[void 0]}),s=void 0),i=i.concat(o),t.deepEqual(s,n.terrain)||i.push({command:Z.setTerrain,args:[n.terrain]}),function(e,n,i){n=n||[];const r=(e=e||[]).map(et),o=n.map(et),a=e.reduce(nt,{}),s=n.reduce(nt,{}),l=r.slice(),u=Object.create(null);let c,h,d,f,p,m,_;for(c=0,h=0;c<r.length;c++)d=r[c],s.hasOwnProperty(d)?h++:(i.push({command:Z.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(c=0,h=0;c<o.length;c++)d=o[o.length-1-c],l[l.length-1-c]!==d&&(a.hasOwnProperty(d)?(i.push({command:Z.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-c],i.push({command:Z.addLayer,args:[s[d],m]}),l.splice(l.length-c,0,d),u[d]=!0);for(c=0;c<o.length;c++)if(d=o[c],f=a[d],p=s[d],!u[d]&&!t.deepEqual(f,p))if(t.deepEqual(f.source,p.source)&&t.deepEqual(f["source-layer"],p["source-layer"])&&t.deepEqual(f.type,p.type)){for(_ in tt(f.layout,p.layout,i,d,null,Z.setLayoutProperty),tt(f.paint,p.paint,i,d,null,Z.setPaintProperty),t.deepEqual(f.filter,p.filter)||i.push({command:Z.setFilter,args:[d,p.filter]}),t.deepEqual(f.minzoom,p.minzoom)&&t.deepEqual(f.maxzoom,p.maxzoom)||i.push({command:Z.setLayerZoomRange,args:[d,p.minzoom,p.maxzoom]}),f)f.hasOwnProperty(_)&&"layout"!==_&&"paint"!==_&&"filter"!==_&&"metadata"!==_&&"minzoom"!==_&&"maxzoom"!==_&&(0===_.indexOf("paint.")?tt(f[_],p[_],i,d,_.slice(6),Z.setPaintProperty):t.deepEqual(f[_],p[_])||i.push({command:Z.setLayerProperty,args:[d,_,p[_]]}));for(_ in p)p.hasOwnProperty(_)&&!f.hasOwnProperty(_)&&"layout"!==_&&"paint"!==_&&"filter"!==_&&"metadata"!==_&&"minzoom"!==_&&"maxzoom"!==_&&(0===_.indexOf("paint.")?tt(f[_],p[_],i,d,_.slice(6),Z.setPaintProperty):t.deepEqual(f[_],p[_])||i.push({command:Z.setLayerProperty,args:[d,_,p[_]]}))}else i.push({command:Z.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],i.push({command:Z.addLayer,args:[p,m]})}(a,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:Z.setStyle,args:[n]}]}return i}class rt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(t.assert_1(this.points.length>0),1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,i=this._distances[n];const r=e*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const o=n-1,a=this._distances[o],s=i-a,l=s>0?(r-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class ot{constructor(t,e,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let t=0;t<this.xCellCount*this.yCellCount;t++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)}_insertBoxCell(t,e,n,i,r,o){this.boxCells[r].push(o)}_insertCircleCell(t,e,n,i,r,o){this.circleCells[r].push(o)}_query(t,e,n,i,r,o){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];const a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],i=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-i,y1:n-i,x2:e+i,y2:n+i})}return o?a.filter(o):a}{const s={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,i,this._queryCell,a,s,o),r?a.length>0:a}}_queryCircle(t,e,n,i,r){const o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!i&&[];const u=[],c={hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,u,c,r),i?u.length>0:u}query(t,e,n,i,r){return this._query(t,e,n,i,!1,r)}hitTest(t,e,n,i,r){return this._query(t,e,n,i,!0,r)}hitTestCircle(t,e,n,i){return this._queryCircle(t,e,n,!0,i)}_queryCell(t,e,n,i,r,o,a,s){const l=a.seenUids,u=this.boxCells[r];if(null!==u){const r=this.bboxes;for(const c of u)if(!l.box[c]){l.box[c]=!0;const u=4*c;if(t<=r[u+2]&&e<=r[u+3]&&n>=r[u+0]&&i>=r[u+1]&&(!s||s(this.boxKeys[c]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[c],x1:r[u],y1:r[u+1],x2:r[u+2],y2:r[u+3]})}}}const c=this.circleCells[r];if(null!==c){const r=this.circles;for(const u of c)if(!l.circle[u]){l.circle[u]=!0;const c=3*u;if(this._circleAndRectCollide(r[c],r[c+1],r[c+2],t,e,n,i)&&(!s||s(this.circleKeys[u]))){if(a.hitTest)return o.push(!0),!0;{const t=r[c],e=r[c+1],n=r[c+2];o.push({key:this.circleKeys[u],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,i,r,o,a,s){const l=a.circle,u=a.seenUids,c=this.boxCells[r];if(null!==c){const t=this.bboxes;for(const e of c)if(!u.box[e]){u.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[r];if(null!==h){const t=this.circles;for(const e of h)if(!u.circle[e]){u.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,n,i,r,o,a,s){const l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i);for(let d=l;d<=c;d++)for(let l=u;l<=h;l++){const u=this.xCellCount*l+d;if(r.call(this,t,e,n,i,u,o,a,s))return}}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,i,r,o){const a=i-t,s=r-e,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,n,i,r,o,a){const s=(o-i)/2,l=Math.abs(t-(i+s));if(l>s+n)return!1;const u=(a-r)/2,c=Math.abs(e-(r+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;const h=l-s,d=c-u;return h*h+d*d<=n*n}}function at(e,n,i,r,o){const a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),i||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function st(e,n,i,r,o){if(n){const n=t.clone(e);return t.scale(n,n,[o,o,1]),i||t.rotateZ(n,n,-r.angle),n}return r.glCoordMatrix}function lt(e,n,i=0){const r=[e.x,e.y,i,1];i?t.transformMat4$1(r,r,n):vt(r,r,n);const o=r[3];return{point:new t.pointGeometry(r[0]/o,r[1]/o),signedDistanceFromCamera:o}}function ut(t,e){return Math.min(.5+t/e*.5,1.5)}function ct(t,e){const n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function ht(e,n,i,r,o,a,s,l,u){const c=r?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(c,i.transform.zoom),d=[256/i.width*2+1,256/i.height*2+1],f=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();const p=e.lineVertexArray,m=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,_=i.transform.width/i.transform.height;let g=!1;for(let r=0;r<m.length;r++){const y=m.get(r);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!g){yt(y.numGlyphs,f);continue}g=!1;const v=u?u({x:y.anchorX,y:y.anchorY}):0,x=[y.anchorX,y.anchorY,v,1];if(t.transformMat4$1(x,x,n),!ct(x,d)){yt(y.numGlyphs,f);continue}const b=x[3],w=ut(i.transform.cameraToCenterDistance,b),M=t.evaluateSizeForFeature(c,h,y),T=s?M/w:M*w,k=new t.pointGeometry(y.anchorX,y.anchorY),S=lt(k,o,v);if(S.signedDistanceFromCamera<=0){yt(y.numGlyphs,f);continue}const E=S.point;let C={};const L=s?null:u,D=pt(y,T,!1,l,n,o,a,e.glyphOffsetArray,p,f,E,k,C,_,L);g=D.useVertical,L&&D.needsFlipping&&(C={}),(D.notEnoughRoom||g||D.needsFlipping&&pt(y,T,!0,l,n,o,a,e.glyphOffsetArray,p,f,E,k,C,_,L).notEnoughRoom)&&yt(y.numGlyphs,f)}r?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function dt(t,e,n,i,r,o,a,s,l,u,c,h,d){const f=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,_=e.getoffsetX(s.glyphStartIndex),g=e.getoffsetX(f-1),y=_t(t*_,n,i,r,o,a,s.segment,p,m,l,u,c,h,d,!0);if(!y)return null;const v=_t(t*g,n,i,r,o,a,s.segment,p,m,l,u,c,h,d,!0);return v?{first:y,last:v}:null}function ft(e,n,i,r){return e===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<i.y:n.x>i.x)?{needsFlipping:!0}:null}function pt(e,n,i,r,o,a,s,l,u,c,h,d,f,p,m){const _=n/24,g=e.lineOffsetX*_,y=e.lineOffsetY*_;let v;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,c=dt(_,l,g,y,i,h,d,e,u,a,f,m);if(!c)return{notEnoughRoom:!0};const x=lt(c.first.point,s).point,b=lt(c.last.point,s).point;if(r&&!i){const t=ft(e.writingMode,x,b,p);if(t)return t}v=[c.first];for(let r=e.glyphStartIndex+1;r<t-1;r++)v.push(_t(_*l.getoffsetX(r),g,y,i,h,d,e.segment,n,o,u,a,f,m));v.push(c.last)}else{if(r&&!i){const n=lt(d,o).point,i=e.lineStartIndex+e.segment+1,r=new t.pointGeometry(u.getx(i),u.gety(i)),a=lt(r,o),s=a.signedDistanceFromCamera>0?a.point:mt(d,r,n,1,o),l=ft(e.writingMode,n,s,p);if(l)return l}const n=_t(_*l.getoffsetX(e.glyphStartIndex),g,y,i,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,f,m);if(!n)return{notEnoughRoom:!0};v=[n]}for(const e of v)t.addDynamicAttributes(c,e.point,e.angle);return{}}function mt(t,e,n,i,r,o){const a=t.add(t.sub(e)._unit()),s=lt(a,r,o?o(a):0).point,l=n.sub(s);return n.add(l._mult(i/l.mag()))}function _t(e,n,i,r,o,a,s,l,u,c,h,d,f,p,m){const _=r?e-n:e+n;let g=_>0?1:-1,y=0;r&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);let v=g>0?l+s:l+s+1,x=o,b=o,w=0,M=0;const T=Math.abs(_),k=[],S=[];let E=a;const C=()=>{const e=v-g;return 0===w?a:new t.pointGeometry(c.getx(e),c.gety(e))},L=()=>mt(C(),E,b,T-w+1,h,f);for(;w+M<=T;){if(v+=g,v<l||v>=u)return null;if(b=x,k.push(x),p&&S.push(E||C()),x=d[v],void 0===x){E=new t.pointGeometry(c.getx(v),c.gety(v));const e=lt(E,h,f?f(E):0);x=e.signedDistanceFromCamera>0?d[v]=e.point:L()}else E=null;w+=M,M=b.dist(x)}m&&f&&(E=E||new t.pointGeometry(c.getx(v),c.gety(v)),d[v]=x=void 0===d[v]?x:L(),M=b.dist(x));const D=(T-w)/M,A=x.sub(b),P=A.mult(D)._add(b);i&&P._add(A._unit()._perp()._mult(i*g));const I=y+Math.atan2(x.y-b.y,x.x-b.x);if(k.push(P),p){E=E||new t.pointGeometry(c.getx(v),c.gety(v));const e=S.length>0?S[S.length-1]:E;S.push(function(e,n,i){const r=1-i;return new t.pointGeometry(e.x*r+n.x*i,e.y*r+n.y*i)}(e,E,D))}return{point:P,angle:I,path:k,tilePath:S}}const gt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yt(t,e){for(let n=0;n<t;n++){const t=e.length;e.resize(t+4),e.float32.set(gt,3*t)}}function vt(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}const xt=100;class bt{constructor(t,e,n=new ot(t.width+200,t.height+200,25),i=new ot(t.width+200,t.height+200,25)){this.transform=t,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+xt,this.screenBottomBoundary=t.height+xt,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(e,n,i,r,o,a,s){t.assert_1(!this.transform.elevation||void 0!==n.elevation);const l=this.projectAndGetPerspectiveRatio(a,n.anchorPointX,n.anchorPointY,n.elevation,n.tileID),u=o*l.perspectiveRatio,c=(n.x1*e+i.x-n.padding)*u+l.point.x,h=(n.y1*e+i.y-n.padding)*u+l.point.y,d=(n.x2*e+i.x+n.padding)*u+l.point.x,f=(n.y2*e+i.y+n.padding)*u+l.point.y,p=l.perspectiveRatio<=.55||l.aboveHorizon;return!this.isInsideGrid(c,h,d,f)||!r&&this.grid.hitTest(c,h,d,f,s)||p?{box:[],offscreen:!1}:{box:[c,h,d,f],offscreen:this.isOffscreen(c,h,d,f)}}placeCollisionCircles(e,n,i,r,o,a,s,l,u,c,h,d,f,p){const m=[],_=this.transform.elevation,g=_?t=>_.getAtTileOffset(p,t.x,t.y):t=>0,y=new t.pointGeometry(n.anchorX,n.anchorY),v=g(y),x=this.projectAndGetPerspectiveRatio(a,y.x,y.y,v,p),{perspectiveRatio:b}=x,w=(c?o/b:o*b)/t.ONE_EM,M=lt(y,s,v).point,T=n.lineOffsetX*w,k=n.lineOffsetY*w,S=x.signedDistanceFromCamera>0?dt(w,r,T,k,!1,M,y,n,i,s,{},_&&!c?g:null,c&&!!_):null;let E=!1,C=!1,L=!0;if(S&&!x.aboveHorizon){const n=.5*d*b+f,i=new t.pointGeometry(-100,-100),r=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new rt,a=S.first,s=S.last;let p=[];for(let t=a.path.length-1;t>=1;t--)p.push(a.path[t]);for(let t=1;t<s.path.length;t++)p.push(s.path[t]);t.assert_1(p.length>=2);const y=2.5*n;if(l){t.assert_1(c);const e=_?p.map(((t,e)=>{const n=g(e<a.path.length-1?a.tilePath[a.path.length-1-e]:s.tilePath[e-a.path.length+2]);return lt(t,l,n)})):p.map((t=>lt(t,l)));p=e.some((t=>t.signedDistanceFromCamera<=0))?[]:e.map((t=>t.point))}let v=[];if(p.length>0){const e=p[0].clone(),n=p[0].clone();for(let t=1;t<p.length;t++)e.x=Math.min(e.x,p[t].x),e.y=Math.min(e.y,p[t].y),n.x=Math.max(n.x,p[t].x),n.y=Math.max(n.y,p[t].y);v=e.x>=i.x&&n.x<=r.x&&e.y>=i.y&&n.y<=r.y?[p]:n.x<i.x||e.x>r.x||n.y<i.y||e.y>r.y?[]:t.clipLine([p],i.x,i.y,r.x,r.y)}for(const i of v){t.assert_1(i.length>0),o.reset(i,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/y)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),a=o.lerp(i),s=a.x+xt,l=a.y+xt;m.push(s,l,n,0);const c=s-n,d=l-n,f=s+n,p=l+n;if(L=L&&this.isOffscreen(c,d,f,p),C=C||this.isInsideGrid(c,d,f,p),!e&&this.grid.hitTestCircle(s,l,n,h)&&(E=!0,!u))return{circles:[],offscreen:!1,collisionDetected:E}}}}return{circles:!u&&E||!C?[]:m,offscreen:L,collisionDetected:E}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,o=-1/0,a=-1/0;for(const s of e){const e=new t.pointGeometry(s.x+xt,s.y+xt);i=Math.min(i,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a)),l={},u={};for(const e of s){const i=e.key;if(void 0===l[i.bucketInstanceId]&&(l[i.bucketInstanceId]={}),l[i.bucketInstanceId][i.featureIndex])continue;const r=[new t.pointGeometry(e.x1,e.y1),new t.pointGeometry(e.x2,e.y1),new t.pointGeometry(e.x2,e.y2),new t.pointGeometry(e.x1,e.y2)];t.polygonIntersectsPolygon(n,r)&&(l[i.bucketInstanceId][i.featureIndex]=!0,void 0===u[i.bucketInstanceId]&&(u[i.bucketInstanceId]=[]),u[i.bucketInstanceId].push(i.featureIndex))}return u}insertCollisionBox(t,e,n,i,r){const o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,i,r){const o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};for(let e=0;e<t.length;e+=4)o.insertCircle(a,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,n,i,r,o){const a=[n,i,r||0,1];let s=!1;if(r||this.transform.pitch>0){t.transformMat4$1(a,a,e);let l=!1;this.fogState&&o&&(l=function(e,n,i,r,o,a){const s=a.calculateFogTileMatrix(o),l=[n,i,r];return t.transformMat4(l,l,s),v(e,l,a.pitch,a._fov)}(this.fogState,n,i,r||0,o.toUnwrapped(),this.transform)>.9),s=a[2]>a[3]||l}else vt(a,a,e);return{point:new t.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+xt,(-a[1]/a[3]+1)/2*this.transform.height+xt),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5),signedDistanceFromCamera:a[3],aboveHorizon:s}}isOffscreen(t,e,n,i){return n<xt||t>=this.screenRightBoundary||i<xt||e>this.screenBottomBoundary}isInsideGrid(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}class wt{constructor(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class Mt{constructor(t,e,n,i,r){this.text=new wt(t?t.text:null,e,n,r),this.icon=new wt(t?t.icon:null,e,i,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Tt{constructor(t,e,n){this.text=t,this.icon=e,this.skipFade=n}}class kt{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class St{constructor(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class Et{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Ct(e,n,i,r,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*n,u=-(s-.5)*i,c=t.evaluateVariableOffset(e,r);return new t.pointGeometry(l+c[0]*o,u+c[1]*o)}function Lt(e,n,i,r,o){const a=new t.pointGeometry(e,n);return i&&a._rotate(r?o:-o),a}class Dt{constructor(t,e,n,i,r){this.transform=t.clone(),this.collisionIndex=new bt(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Et(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,i,r){const o=i.getBucket(n),a=i.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=i.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),c=i.tileSize/t.EXTENT,h=this.transform.calculateProjMatrix(i.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),f="map"===l.get("text-rotation-alignment"),p=k(i,1,this.transform.zoom),m=at(h,d,f,this.transform,p);let _=null;if(d){const e=st(h,d,f,this.transform,p);_=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new St(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);const g={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:_,scale:u,textPixelRatio:c,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=t;e.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:g})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:g})}attemptAnchorPlacement(e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_,g,y){const v=[d.textOffset0,d.textOffset1],x=Ct(e,i,r,v,o),b=this.collisionIndex.placeCollisionBox(o,n,Lt(x.x,x.y,a,s,this.transform.angle),h,l,u,c.predicate);if((!_||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(y,this.transform.zoom,f),_,Lt(x.x,x.y,a,s,this.transform.angle),h,l,u,c.predicate).box.length)&&b.box.length>0){let n;return this.prevPlacement&&this.prevPlacement.variableOffsets[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID].text&&(n=this.prevPlacement.variableOffsets[d.crossTileID].anchor),t.assert_1(0!==d.crossTileID),this.variableOffsets[d.crossTileID]={textOffset:v,width:i,height:r,anchor:e,textScale:o,prevAnchor:n},this.markUsedJustification(p,e,d,m),p.allowVerticalPlacement&&(this.markUsedOrientation(p,m,d),this.placedOrientations[d.crossTileID]=m),{shift:x,placedGlyphBoxes:b}}}placeLayerBucketPart(e,n,i){const{bucket:r,layout:o,posMatrix:a,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:u,holdingForFade:c,collisionBoxArray:h,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:f,collisionGroup:p}=e.parameters,m=o.get("text-optional"),_=o.get("icon-optional"),g=o.get("text-allow-overlap"),y=o.get("icon-allow-overlap"),v="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),b="none"!==o.get("icon-text-fit"),w="viewport-y"===o.get("symbol-z-order"),M=g&&(y||!r.hasIconData()||_),T=y&&(g||!r.hasTextData()||m);!r.collisionArrays&&h&&r.deserializeCollisionBoxes(h),i&&r.updateCollisionDebugBuffers(this.transform.zoom,h);const k=(e,h,w)=>{if(n[e.crossTileID])return;if(c)return void(this.placements[e.crossTileID]=new Tt(!1,!1,!1));let k=!1,S=!1,E=!0,C=null,L={box:null,offscreen:null},D={box:null,offscreen:null},A=null,P=null,I=null,z=0,F=0,R=0;w.textFeatureIndex?z=w.textFeatureIndex:e.useRuntimeCollisionCircles&&(z=e.featureIndex),w.verticalTextFeatureIndex&&(F=w.verticalTextFeatureIndex);const O=t=>{t.tileID=this.retainedQueryData[r.bucketInstanceId].tileID,(this.transform.elevation||t.elevation)&&(t.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[r.bucketInstanceId].tileID,t.anchorPointX,t.anchorPointY):0)},Y=w.textBox;if(Y){O(Y);const n=n=>{let i=t.WritingMode.horizontal;if(r.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,i=t,this.markUsedOrientation(r,i,e))}return i},i=(n,i)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&w.verticalTextBox){for(const e of r.writingModes)if(e===t.WritingMode.vertical?(L=i(),D=L):L=n(),L&&L.box&&L.box.length)break}else L=n()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];s.indexOf(t.anchor)>0&&(s=s.filter((e=>e!==t.anchor)),s.unshift(t.anchor))}const l=(t,n,i)=>{const o=r.getSymbolInstanceTextSize(d,e,this.transform.zoom,h),l=(t.x2-t.x1)*o+2*t.padding,c=(t.y2-t.y1)*o+2*t.padding,m=b&&!y?n:null;m&&O(m);let _={box:[],offscreen:!1};const w=g?2*s.length:s.length;for(let n=0;n<w;++n){const g=s[n%s.length],y=n>=s.length,b=this.attemptAnchorPlacement(g,t,l,c,o,v,x,u,a,p,y,e,h,r,i,m,d,f);if(b&&(_=b.placedGlyphBoxes,_&&_.box&&_.box.length)){k=!0,C=b.shift;break}}return _};i((()=>l(Y,w.iconBox,t.WritingMode.horizontal)),(()=>{const n=w.verticalTextBox;n&&O(n);const i=L&&L.box&&L.box.length;return r.allowVerticalPlacement&&!i&&e.numVerticalGlyphVertices>0&&n?l(n,w.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),L&&(k=L.box,E=L.offscreen);const c=n(L&&L.box);if(!k&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,c))}}else{const o=(n,i)=>{const o=r.getSymbolInstanceTextSize(d,e,this.transform.zoom,h),s=this.collisionIndex.placeCollisionBox(o,n,new t.pointGeometry(0,0),g,u,a,p.predicate);return s&&s.box&&s.box.length&&(this.markUsedOrientation(r,i,e),this.placedOrientations[e.crossTileID]=i),s};i((()=>o(Y,t.WritingMode.horizontal)),(()=>{const n=w.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?(O(n),o(n,t.WritingMode.vertical)):{box:null,offscreen:null}})),n(L&&L.box&&L.box.length)}}if(A=L,k=A&&A.box&&A.box.length>0,E=A&&A.offscreen,e.useRuntimeCollisionCircles){const n=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),u=t.evaluateSizeForFeature(r.textSizeData,d,n),c=o.get("text-padding"),h=e.collisionCircleDiameter;P=this.collisionIndex.placeCollisionCircles(g,n,r.lineVertexArray,r.glyphOffsetArray,u,a,s,l,i,x,p.predicate,h,c,this.retainedQueryData[r.bucketInstanceId].tileID),t.assert_1(!P.circles.length||!P.collisionDetected||i),k=g||P.circles.length>0&&!P.collisionDetected,E=E&&P.offscreen}if(w.iconFeatureIndex&&(R=w.iconFeatureIndex),w.iconBox){const e=e=>{O(e);const n=b&&C?Lt(C.x,C.y,v,x,this.transform.angle):new t.pointGeometry(0,0),i=r.getSymbolInstanceIconSize(f,this.transform.zoom,h);return this.collisionIndex.placeCollisionBox(i,e,n,y,u,a,p.predicate)};D&&D.box&&D.box.length&&w.verticalIconBox?(I=e(w.verticalIconBox),S=I.box.length>0):(I=e(w.iconBox),S=I.box.length>0),E=E&&I.offscreen}const N=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,B=_||0===e.numIconVertices;if(N||B?B?N||(S=S&&k):k=S&&k:S=k=S&&k,k&&A&&A.box&&(D&&D.box&&F?this.collisionIndex.insertCollisionBox(A.box,o.get("text-ignore-placement"),r.bucketInstanceId,F,p.ID):this.collisionIndex.insertCollisionBox(A.box,o.get("text-ignore-placement"),r.bucketInstanceId,z,p.ID)),S&&I&&this.collisionIndex.insertCollisionBox(I.box,o.get("icon-ignore-placement"),r.bucketInstanceId,R,p.ID),P&&(k&&this.collisionIndex.insertCollisionCircles(P.circles,o.get("text-ignore-placement"),r.bucketInstanceId,z,p.ID),i)){const t=r.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new kt);for(let t=0;t<P.circles.length;t+=4)e.circles.push(P.circles[t+0]),e.circles.push(P.circles[t+1]),e.circles.push(P.circles[t+2]),e.circles.push(P.collisionDetected?1:0)}t.assert_1(0!==e.crossTileID),t.assert_1(0!==r.bucketInstanceId),this.placements[e.crossTileID]=new Tt(k||M,S||T,E||r.justReloaded),n[e.crossTileID]=!0};if(w){t.assert_1(0===e.symbolInstanceStart);const n=r.getSortedSymbolIndexes(this.transform.angle);for(let t=n.length-1;t>=0;--t){const e=n[t];k(r.symbolInstances.get(e),e,r.collisionArrays[e])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)k(r.symbolInstances.get(t),t,r.collisionArrays[t]);if(i&&r.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[r.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1}markUsedJustification(e,n,i,r){const o={left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex};let a;a=r===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:o[t.getAnchorJustification(n)];const s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=a>=0&&t!==a?0:i.crossTileID)}markUsedOrientation(e,n,i){const r=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const n=this.prevPlacement;let i=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;const r=n?n.symbolFadeChange(e):1,o=n?n.opacities:{},a=n?n.variableOffsets:{},s=n?n.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],n=o[t];n?(this.opacities[t]=new Mt(n,r,e.text,e.icon),i=i||e.text!==n.text.placed||e.icon!==n.icon.placed):(this.opacities[t]=new Mt(null,r,e.text,e.icon,e.skipFade),i=i||e.text||e.icon)}for(const t in o){const e=o[t];if(!this.opacities[t]){const n=new Mt(e,r,!1,!1);n.isHidden()||(this.opacities[t]=n,i=i||e.text.placed||e.icon.placed)}}for(const t in a)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=a[t]);for(const t in s)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=s[t]);t.assert_1(!n||void 0!==n.lastPlacementChangeTime),i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:e)}updateLayerOpacities(t,e){const n={};for(const i of e){const e=i.getBucket(t);e&&i.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,i.collisionBoxArray)}}updateBucketOpacities(e,n,i){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const r=e.layers[0].layout,o=new Mt(null,0,!1,!1,!0),a=r.get("text-allow-overlap"),s=r.get("icon-allow-overlap"),l=r.get("text-variable-anchor"),u="map"===r.get("text-rotation-alignment"),c="map"===r.get("text-pitch-alignment"),h="none"!==r.get("icon-text-fit"),d=new Mt(null,0,a&&(s||!e.hasIconData()||r.get("icon-optional")),s&&(a||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);const f=(t,e,n)=>{for(let i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)};for(let i=0;i<e.symbolInstances.length;i++){const r=e.symbolInstances.get(i),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:s,crossTileID:p}=r,m=n[p];let _=this.opacities[p];m?_=o:_||(_=d,this.opacities[p]=_),n[p]=!0;const g=a>0||s>0,y=r.numIconVertices>0,v=this.placedOrientations[r.crossTileID],x=v===t.WritingMode.vertical,b=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(g){const t=Nt(_.text),n=x?Bt:t;f(e.text,a,n);const i=b?Bt:t;f(e.text,s,i);const o=_.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=o||x?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=o||b?1:0);const l=this.variableOffsets[r.crossTileID];l&&this.markUsedJustification(e,l.anchor,r,v);const u=this.placedOrientations[r.crossTileID];u&&(this.markUsedJustification(e,"left",r,u),this.markUsedOrientation(e,u,r))}if(y){const t=Nt(_.icon),n=!(h&&r.verticalPlacedIconSymbolIndex&&x);if(r.placedIconSymbolIndex>=0){const i=n?t:Bt;f(e.icon,r.numIconVertices,i),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=_.icon.isHidden()}if(r.verticalPlacedIconSymbolIndex>=0){const i=n?Bt:t;f(e.icon,r.numVerticalIconVertices,i),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=_.icon.isHidden()}}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[i];if(n){let i=new t.pointGeometry(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[p];e?(i=Ct(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&i._rotate(c?this.transform.angle:-this.transform.angle)):t=!1}n.textBox&&At(e.textCollisionBox.collisionVertexArray,_.text.placed,!t||x,i.x,i.y),n.verticalTextBox&&At(e.textCollisionBox.collisionVertexArray,_.text.placed,!t||b,i.x,i.y)}const r=Boolean(!b&&n.verticalIconBox);n.iconBox&&At(e.iconCollisionBox.collisionVertexArray,_.icon.placed,r,h?i.x:0,h?i.y:0),n.verticalIconBox&&At(e.iconCollisionBox.collisionVertexArray,_.icon.placed,!r,h?i.x:0,h?i.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),t.assert_1(e.text.opacityVertexArray.length===e.text.layoutVertexArray.length/4),t.assert_1(e.icon.opacityVertexArray.length===e.icon.layoutVertexArray.length/4),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function At(t,e,n,i,r){t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0)}const Pt=Math.pow(2,25),It=Math.pow(2,24),zt=Math.pow(2,17),Ft=Math.pow(2,16),Rt=Math.pow(2,9),Ot=Math.pow(2,8),Yt=Math.pow(2,1);function Nt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Pt+e*It+n*zt+e*Ft+n*Rt+e*Ot+n*Yt+e}const Bt=0;class jt{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,i,r){const o=this._bucketParts;for(;this._currentTileIndex<t.length;){const n=t[this._currentTileIndex];if(e.getBucketParts(o,i,n,this._sortAcrossTiles),this._currentTileIndex++,r())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;){const t=o[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0}return!1}}class Ut{constructor(t,e,n,i,r,o,a,s){this.placement=new Dt(t,r,o,a,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,n,i){const r=t.exported.now(),o=()=>{const e=t.exported.now()-r;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=r)&&(!t.maxzoom||t.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new jt(t)),this._inProgressLayer.continuePlacement(i[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const $t=512/t.EXTENT/2;class Ht{constructor(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let n=0;n<e.length;n++){const i=e.get(n),r=i.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}}getScaledCoordinates(e,n){const i=n.canonical.z-this.tileID.canonical.z,r=$t/Math.pow(2,i);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}}findMatches(t,e,n){const i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let r=0;r<t.length;r++){const o=t.get(r);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,e);for(const t of a)if(Math.abs(t.coord.x-s.x)<=i&&Math.abs(t.coord.y-s.y)<=i&&!n[t.crossTileID]){n[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class Vt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const n=this.indexes[t],i={};for(const t in n){const r=n[t];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}this.indexes[t]=i}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const i=this.usedCrossTileIDs[t.overscaledZ];for(const n in this.indexes){const r=this.indexes[n];if(Number(n)>t.overscaledZ)for(const n in r){const o=r[n];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,i)}else{const o=r[t.scaledTo(Number(n)).key];o&&o.findMatches(e.symbolInstances,t,i)}}for(let t=0;t<e.symbolInstances.length;t++){const r=e.symbolInstances.get(t);r.crossTileID||(r.crossTileID=n.generate(),i[r.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ht(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n in e.indexedSymbolInstances)for(const i of e.indexedSymbolInstances[n])delete this.usedCrossTileIDs[t][i.crossTileID]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e}}class Wt{constructor(){this.layerIndexes={},this.crossTileIDs=new Vt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n){let i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new qt);let r=!1;const o={};i.handleWrapJump(n);for(const n of e){const e=n.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(n.tileID,e,this.crossTileIDs)&&(r=!0),o[e.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}const Gt=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Zt=t.pick(Z,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),Xt=t.pick(Z,["setCenter","setZoom","setBearing","setPitch"]),Kt=function(){const e={},n=t.spec.$version;for(const i in t.spec.$root){const r=t.spec.$root[i];if(r.required){let t=null;t="version"===i?n:"array"===r.type?[]:{},null!=t&&(e[i]=t)}}return e}(),Jt={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Qt extends t.Evented{constructor(e,n={}){super(),this.map=e,this.dispatcher=new T(q(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.lineAtlas=new t.LineAtlas(256,512),this.crossTileSymbolIndex=new Wt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const i=this;this._rtlTextPluginCallback=Qt.registerForPluginStateChange((e=>{const n={pluginStatus:e.pluginStatus,pluginURL:e.pluginURL};i.dispatcher.broadcast("syncRTLPluginState",n,((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in i._sourceCaches){const e=i._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const t in this._layers){const n=this._layers[t];n.source===e.id&&this._validateLayer(n)}}))}loadURL(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,i)}))}loadJSON(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Kt,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&Gt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const i=G(this.stylesheet.layers);this._order=i.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let e of i)e=t.createStyleLayer(e),e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize(),this._updateLayerCount(e,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new m(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,n,i){let r,o,a;const s=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,a||(a=t,r=e,c())})),u=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),((t,e)=>{u=null,a||(a=t,o=e,c())}));function c(){if(a)i(a);else if(r&&o){const e=t.exported.getImageData(o),n={};for(const i in r){const{width:o,height:a,x:s,y:l,sdf:u,pixelRatio:c,stretchX:h,stretchY:d,content:f}=r[i],p=new t.RGBAImage({width:o,height:a});t.RGBAImage.copy(e,p,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[i]={data:p,pixelRatio:c,sdf:u,stretchX:h,stretchY:d,content:f}}i(null,n)}}return{cancel(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const i=e.sourceLayer;i&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${i}" does not exist on source "${n.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?(t.assert_1(this._drapedFirstOrder.length===this._order.length),this._drapedFirstOrder):this._order}isLayerDraped(t){return!!this.terrain&&Jt[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(n.length||i.length)&&this._updateWorkerLayers(n,i);for(const e in this._updatedSources){const n=this._updatedSources[e];t.assert_1("reload"===n||"clear"===n),"reload"===n?this._reloadSource(e):"clear"===n&&this._clearSource(e)}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];i[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const i=this.map.painter;if(i){const t=n.getProgramIds();if(!t)continue;const r=n.getProgramConfiguration(e.zoom);for(const e of t)i.useProgram(e,r)}}for(const e in i){const n=this._sourceCaches[e];i[e]!==n.used&&n.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Gt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=G(e.layers);const n=it(this.serialize(),e).filter((t=>!(t.command in Xt)));if(0===n.length)return!1;const i=n.filter((t=>!(t.command in Zt)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((t=>t.command)).join(", ")}.`);return n.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,i={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=O(e,n,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:r.serialize(),sourceId:e})));const o=n=>{const i=(n?"symbol:":"other:")+e,o=this._sourceCaches[i]=new t.SourceCache(i,r,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(void 0===n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const i=this._getSourceCaches(e);for(const e of i)delete this._sourceCaches[e.id],delete this._updatedSources[e.id],e.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e.getSource().id})),e.setEventedParent(null),e.clearTiles();delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,n){this._checkLoaded(),t.assert_1(void 0!==this.getSource(e),"There is no source with this ID");const i=this.getSource(e);t.assert_1("geojson"===i.type),i.setData(n),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}addLayer(e,n,i={}){this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${r}" already exists on this map`)));let o;if("custom"===e.type){if(Gt(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,`layers.${r}`,e,{arrayIndex:-1},i))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[r]&&o.source&&s&&"custom"!==o.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const i=this._order.indexOf(e);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(r,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,i){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(e,n,i={}){this._checkLoaded();const r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,`layers.${r.id}.filter`,n,null,i)||(r.filter=t.clone$1(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,n,i,r={}){this._checkLoaded();const o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,n){const i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(e,n,i,r={}){this._checkLoaded();const o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const i=e.source,r=e.sourceLayer,o=this.getSource(i);if(void 0===o)return void this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&r)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!r)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(i);for(const t of s)t.setFeatureState(r,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const i=e.source,r=this.getSource(i);if(void 0===r)return void this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const o=r.type,a="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(i);for(const t of s)t.removeFeatureState(a,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,i=e.sourceLayer,r=this.getSource(n);if(void 0!==r){if("vector"!==r.type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},i=[];for(let r=this._order.length-1;r>=0;r--){const o=this._order[r];if(e(o)){n[o]=r;for(const e of t){const t=e[o];if(t)for(const e of t)i.push(e)}}}i.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=i.length-1;t>=0;t--){const e=i[t].feature;if(n[e.layer.id]<o)break;r.push(e),i.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];r[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),s=S.createFromScreenPoints(e,i);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!r[e]||o.push(N(this._sourceCaches[t],this._layers,this._serializedLayers,s,n,i,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,n,i,r,o,a,s){const l={},u=a.queryRenderedSymbols(r),c=[];for(const t of Object.keys(u).map(Number))c.push(s[t]);c.sort(j);for(const i of c){const r=i.featureIndex.lookupSymbolFeatures(u[i.bucketInstanceId],n,i.bucketIndex,i.sourceLayerIndex,o.filter,o.layers,o.availableImages,e);for(const e in r){const n=l[e]=l[e]||[],o=r[e];o.sort(((e,n)=>{const r=i.featureSortOrder;if(r){const i=r.indexOf(e.featureIndex),o=r.indexOf(n.featureIndex);return t.assert_1(i>=0),t.assert_1(o>=0),o-i}return n.featureIndex-e.featureIndex}));for(const t of o)n.push(t)}}for(const t in l)l[t].forEach((n=>{const r=n.feature,o=e[t],a=i(o).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}));return l}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const i=this._getSourceCaches(e);let r=[];for(const t of i)r=r.concat(B(t,n));return r}addSourceType(t,e,n){return Qt.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(Qt.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const i=this.light.getLight();let r=!1;for(const n in e)if(!t.deepEqual(e[n],i[n])){r=!0;break}if(!r)return;const o={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof e.source){const n="terrain-dem-src";this.addSource(n,e.source),e=t.clone$1(e),e=t.extend(e,{source:n})}if(!this._validate(t.validateStyle.terrain,"terrain",e)){if(this.terrain){const n=this.terrain,i=n.get();for(const r in e)if(!t.deepEqual(e[r],i[r])){n.set(e),this.stylesheet.terrain=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i);break}}else this._createTerrain(e);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(e){const n=this.fog=new M(e);this.stylesheet.fog=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,i=n.get();for(const r in e)if(!t.deepEqual(e[r],i[r])){n.set(e),this.stylesheet.fog=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i);break}}else this._createFog(e);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(e){const n=this.terrain=new y(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_validate(e,n,i,r,o={}){return(!o||!1!==o.validate)&&Gt(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const t of e)t.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const t of e)t.resume(),t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,i,r,o=!1){let a=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const i=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng);a=a||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===i,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Ut(e,this._order,o,n,i,r,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const i=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};i(this._otherSourceCaches[e.source]),i(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,i){return t.makeRequest(n,i)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}Qt.getSourceType=function(t){return R[t]},Qt.setSourceType=function(t,e){R[t]=e},Qt.registerForPluginStateChange=t.registerForPluginStateChange;var te="// IMPORTANT:\n// This prelude is injected in both vertex and fragment shader be wary\n// of precision qualifiers as vertex and fragment precision may differ\n\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n\n#ifdef FOG\n\nuniform mediump vec4 u_fog_color;\nuniform mediump vec2 u_fog_range;\nuniform mediump float u_fog_horizon_blend;\n\nvarying vec3 v_fog_pos;\n\nfloat fog_range(float depth) {\n    // Map [near, far] to [0, 1] without clamping\n    return (depth - u_fog_range[0]) / (u_fog_range[1] - u_fog_range[0]);\n}\n\n// Assumes z up and camera_dir *normalized* (to avoid computing\n// its length multiple times for different functions).\nfloat fog_horizon_blending(vec3 camera_dir) {\n    float t = max(0.0, camera_dir.z / u_fog_horizon_blend);\n    // Factor of 3 chosen to roughly match smoothstep.\n    // See: https://www.desmos.com/calculator/pub31lvshf\n    return u_fog_color.a * exp(-3.0 * t * t);\n}\n\n// Compute a ramp for fog opacity\n//   - t: depth, rescaled to 0 at fogStart and 1 at fogEnd\n// See: https://www.desmos.com/calculator/3taufutxid\nfloat fog_opacity(float t) {\n    const float decay = 6.0;\n    float falloff = 1.0 - min(1.0, exp(-decay * t));\n\n    // Cube without pow() to smooth the onset\n    falloff *= falloff * falloff;\n\n    // Scale and clip to 1 at the far limit\n    return u_fog_color.a * min(1.0, 1.00747 * falloff);\n}\n\n#endif\n",ee="attribute highp vec3 a_pos_3f;\n\nuniform lowp mat4 u_matrix;\n\nvarying highp vec3 v_uv;\n\nvoid main() {\n    const mat3 half_neg_pi_around_x = mat3(1.0, 0.0,  0.0,\n                                           0.0, 0.0, -1.0,\n                                           0.0, 1.0,  0.0);\n\n    v_uv = half_neg_pi_around_x * a_pos_3f;\n    vec4 pos = u_matrix * vec4(a_pos_3f, 1.0);\n\n    // Enforce depth to be 1.0\n    gl_Position = pos.xyww;\n}\n";let ne={},ie={};ne=se("","// Also declared in data/bucket/fill_extrusion_bucket.js\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n\n#ifdef TERRAIN\n\nuniform sampler2D u_dem;\nuniform sampler2D u_dem_prev;\nuniform vec4 u_dem_unpack;\nuniform vec2 u_dem_tl;\nuniform vec2 u_dem_tl_prev;\nuniform float u_dem_scale;\nuniform float u_dem_scale_prev;\nuniform float u_dem_size;\nuniform float u_dem_lerp;\nuniform float u_exaggeration;\nuniform float u_meter_to_dem;\nuniform mat4 u_label_plane_matrix_inv;\n\nuniform sampler2D u_depth;\nuniform vec2 u_depth_size_inv;\n\nvec4 tileUvToDemSample(vec2 uv, float dem_size, float dem_scale, vec2 dem_tl) {\n    vec2 pos = dem_size * (uv * dem_scale + dem_tl) + 1.0;\n    vec2 f = fract(pos);\n    return vec4((pos - f + 0.5) / (dem_size + 2.0), f);\n}\n\nfloat decodeElevation(vec4 v) {\n    return dot(vec4(v.xyz * 255.0, -1.0), u_dem_unpack);\n}\n\nfloat currentElevation(vec2 apos) {\n    float dd = 1.0 / (u_dem_size + 2.0);\n    vec4 r = tileUvToDemSample(apos / 8192.0, u_dem_size, u_dem_scale, u_dem_tl);\n    vec2 pos = r.xy;\n    vec2 f = r.zw;\n\n    float tl = decodeElevation(texture2D(u_dem, pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\n    return u_exaggeration * tl;\n#endif\n    float tr = decodeElevation(texture2D(u_dem, pos + vec2(dd, 0.0)));\n    float bl = decodeElevation(texture2D(u_dem, pos + vec2(0.0, dd)));\n    float br = decodeElevation(texture2D(u_dem, pos + vec2(dd, dd)));\n\n    return u_exaggeration * mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);\n}\n\nfloat prevElevation(vec2 apos) {\n    float dd = 1.0 / (u_dem_size + 2.0);\n    vec4 r = tileUvToDemSample(apos / 8192.0, u_dem_size, u_dem_scale_prev, u_dem_tl_prev);\n    vec2 pos = r.xy;\n    vec2 f = r.zw;\n\n    float tl = decodeElevation(texture2D(u_dem_prev, pos));\n    float tr = decodeElevation(texture2D(u_dem_prev, pos + vec2(dd, 0.0)));\n    float bl = decodeElevation(texture2D(u_dem_prev, pos + vec2(0.0, dd)));\n    float br = decodeElevation(texture2D(u_dem_prev, pos + vec2(dd, dd)));\n\n    return u_exaggeration * mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);\n}\n\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n    float nextElevation = currentElevation(apos);\n    float prevElevation = prevElevation(apos);\n    return mix(prevElevation, nextElevation, u_dem_lerp);\n}\n#else\nfloat elevation(vec2 apos) {\n    return currentElevation(apos);\n}\n#endif\n\n// Unpack depth from RGBA. A piece of code copied in various libraries and WebGL\n// shadow mapping examples.\nfloat unpack_depth(vec4 rgba_depth)\n{\n    const vec4 bit_shift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n    return dot(rgba_depth, bit_shift) * 2.0 - 1.0;\n}\n\nbool isOccluded(vec4 frag) {\n    vec3 coord = frag.xyz / frag.w;\n    float depth = unpack_depth(texture2D(u_depth, (coord.xy + 1.0) * 0.5));\n    return coord.z > depth + 0.0005;\n}\n\nfloat occlusionFade(vec4 frag) {\n    vec3 coord = frag.xyz / frag.w;\n\n    vec3 df = vec3(5.0 * u_depth_size_inv, 0.0);\n    vec2 uv = 0.5 * coord.xy + 0.5;\n    vec4 depth = vec4(\n        unpack_depth(texture2D(u_depth, uv - df.xz)),\n        unpack_depth(texture2D(u_depth, uv + df.xz)),\n        unpack_depth(texture2D(u_depth, uv - df.zy)),\n        unpack_depth(texture2D(u_depth, uv + df.zy))\n    );\n    return dot(vec4(0.25), vec4(1.0) - clamp(300.0 * (vec4(coord.z - 0.001) - depth), 0.0, 1.0));\n}\n\n // BEGIN: code for fill-extrusion height offseting\n // When making changes here please also update associated JS ports in src/style/style_layer/fill-extrusion-style-layer.js\n // This is so that rendering changes are reflected on CPU side for feature querying.\n\nvec4 fourSample(vec2 pos, vec2 off) {\n    vec4 demtl = vec4(texture2D(u_dem, pos).xyz * 255.0, -1.0);\n    float tl = dot(demtl, u_dem_unpack);\n    vec4 demtr = vec4(texture2D(u_dem, pos + vec2(off.x, 0.0)).xyz * 255.0, -1.0);\n    float tr = dot(demtr, u_dem_unpack);\n    vec4 dembl = vec4(texture2D(u_dem, pos + vec2(0.0, off.y)).xyz * 255.0, -1.0);\n    float bl = dot(dembl, u_dem_unpack);\n    vec4 dembr = vec4(texture2D(u_dem, pos + off).xyz * 255.0, -1.0);\n    float br = dot(dembr, u_dem_unpack);\n    return vec4(tl, tr, bl, br);\n}\n\nfloat flatElevation(vec2 pack) {\n    vec2 apos = floor(pack / 8.0);\n    vec2 span = 10.0 * (pack - apos * 8.0);\n\n    vec2 uvTex = (apos - vec2(1.0, 1.0)) / 8190.0;\n    float size = u_dem_size + 2.0;\n    float dd = 1.0 / size;\n\n    vec2 pos = u_dem_size * (uvTex * u_dem_scale + u_dem_tl) + 1.0;\n    vec2 f = fract(pos);\n    pos = (pos - f + 0.5) * dd;\n\n    // Get elevation of centroid.\n    vec4 h = fourSample(pos, vec2(dd));\n    float z = mix(mix(h.x, h.y, f.x), mix(h.z, h.w, f.x), f.y);\n\n    vec2 w = floor(0.5 * (span * u_meter_to_dem - 1.0));\n    vec2 d = dd * w;\n    vec4 bounds = vec4(d, vec2(1.0) - d);\n\n    // Get building wide sample, to get better slope estimate.\n    h = fourSample(pos - d, 2.0 * d + vec2(dd));\n\n    vec4 diff = abs(h.xzxy - h.ywzw);\n    vec2 slope = min(vec2(0.25), u_meter_to_dem * 0.5 * (diff.xz + diff.yw) / (2.0 * w + vec2(1.0)));\n    vec2 fix = slope * span;\n    float base = z + max(fix.x, fix.y);\n    return u_exaggeration * base;\n}\n\nfloat elevationFromUint16(float word) {\n    return u_exaggeration * (word / ELEVATION_SCALE - ELEVATION_OFFSET);\n}\n\n// END: code for fill-extrusion height offseting\n\n#else\n\nfloat elevation(vec2 pos) { return 0.0; }\nbool isOccluded(vec4 frag) { return false; }\nfloat occlusionFade(vec4 frag) { return 1.0; }\n\n#endif\n",!0),ie=se("#ifdef FOG\n\nuniform float u_fog_temporal_offset;\n\n// This function is only used in rare places like heatmap where opacity is used\n// directly, outside the normal fog_apply method.\nfloat fog_opacity(vec3 pos) {\n    float depth = length(pos);\n    return fog_opacity(fog_range(depth));\n}\n\nvec3 fog_apply(vec3 color, vec3 pos) {\n    float depth = length(pos);\n    float opacity = fog_opacity(fog_range(depth));\n    opacity *= fog_horizon_blending(pos / depth);\n    return mix(color, u_fog_color.rgb, opacity);\n}\n\n// Apply fog computed in the vertex shader\nvec4 fog_apply_from_vert(vec4 color, float fog_opac) {\n    float alpha = EPSILON + color.a;\n    color.rgb = mix(color.rgb / alpha, u_fog_color.rgb, fog_opac) * alpha;\n    return color;\n}\n\n// Assumes z up\nvec3 fog_apply_sky_gradient(vec3 camera_ray, vec3 sky_color) {\n    float horizon_blend = fog_horizon_blending(normalize(camera_ray));\n    return mix(sky_color, u_fog_color.rgb, horizon_blend);\n}\n\n// Un-premultiply the alpha, then blend fog, then re-premultiply alpha.\n// For use with colors using premultiplied alpha\nvec4 fog_apply_premultiplied(vec4 color, vec3 pos) {\n    float alpha = EPSILON + color.a;\n    color.rgb = fog_apply(color.rgb / alpha, pos) * alpha;\n    return color;\n}\n\nvec3 fog_dither(vec3 color) {\n    vec2 dither_seed = gl_FragCoord.xy + u_fog_temporal_offset;\n    return dither(color, dither_seed);\n}\n\nvec4 fog_dither(vec4 color) {\n    return vec4(fog_dither(color.rgb), color.a);\n}\n\n#endif\n","#ifdef FOG\n\nuniform mat4 u_fog_matrix;\n\nvec3 fog_position(vec3 pos) {\n    // The following function requires that u_fog_matrix be affine and\n    // results in a vector with w = 1. Otherwise we must divide by w.\n    return (u_fog_matrix * vec4(pos, 1.0)).xyz;\n}\n\nvec3 fog_position(vec2 pos) {\n    return fog_position(vec3(pos, 0.0));\n}\n\nfloat fog(vec3 pos) {\n    float depth = length(pos);\n    float opacity = fog_opacity(fog_range(depth));\n    return opacity * fog_horizon_blending(pos / depth);\n}\n\n#endif\n",!0);const re=se("#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nhighp vec3 hash(highp vec2 p) {\n    highp vec3 p3 = fract(p.xyx * vec3(443.8975, 397.2973, 491.1871));\n    p3 += dot(p3, p3.yxz + 19.19);\n    return fract((p3.xxy + p3.yzz) * p3.zyx);\n}\n\nvec3 dither(vec3 color, highp vec2 seed) {\n    vec3 rnd = hash(seed) + hash(seed + 0.59374) - 0.5;\n    return color + rnd / 255.0;\n}\n","#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_color(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n\nconst vec4 AWAY = vec4(-1000.0, -1000.0, -1000.0, 1); // Normalized device coordinate that is not rendered.\n"),oe=te;var ae={background:se("uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    vec4 out_color = u_color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),backgroundPattern:se("uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 out_color = mix(color1, color2, u_mix);\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),circle:se("varying vec3 v_data;\nvarying float v_visibility;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    vec4 out_color = mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef FOG\n    out_color = fog_apply_premultiplied(out_color, v_fog_pos);\n#endif\n\n    gl_FragColor = out_color * (v_visibility * opacity_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n\n#define NUM_SAMPLES_PER_RING 16\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform lowp float u_device_pixel_ratio;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\nvarying vec3 v_data;\nvarying float v_visibility;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvec2 calc_offset(vec2 extrusion, float radius, float stroke_width,  float view_scale) {\n    return extrusion * (radius + stroke_width) * u_extrude_scale * view_scale;\n}\n\nfloat cantilevered_elevation(vec2 pos, float radius, float stroke_width, float view_scale) {\n    vec2 c1 = pos + calc_offset(vec2(-1,-1), radius, stroke_width, view_scale);\n    vec2 c2 = pos + calc_offset(vec2(1,-1), radius, stroke_width, view_scale);\n    vec2 c3 = pos + calc_offset(vec2(1,1), radius, stroke_width, view_scale);\n    vec2 c4 = pos + calc_offset(vec2(-1,1), radius, stroke_width, view_scale);\n    float h1 = elevation(c1) + ELEVATION_BIAS;\n    float h2 = elevation(c2) + ELEVATION_BIAS;\n    float h3 = elevation(c3) + ELEVATION_BIAS;\n    float h4 = elevation(c4) + ELEVATION_BIAS;\n    return max(h4, max(h3, max(h1,h2)));\n}\n\nfloat circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\n    return elevation(pos) + ELEVATION_BIAS;\n#else\n    return 0.0;\n#endif\n}\n\nvec4 project_vertex(vec2 extrusion, vec4 world_center, vec4 projected_center, float radius, float stroke_width,  float view_scale) {\n    vec2 sample_offset = calc_offset(extrusion, radius, stroke_width, view_scale);\n#ifdef PITCH_WITH_MAP\n    return u_matrix * ( world_center + vec4(sample_offset, 0, 0) );\n#else\n    return projected_center + vec4(sample_offset, 0, 0);\n#endif\n}\n\nfloat get_sample_step() {\n#ifdef PITCH_WITH_MAP\n    return 2.0 * PI / float(NUM_SAMPLES_PER_RING);\n#else\n    // We want to only sample the top half of the circle when it is viewport-aligned.\n    // This is to prevent the circle from intersecting with the ground plane below it at high pitch.\n    return PI / float(NUM_SAMPLES_PER_RING);\n#endif\n}\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    // extract height offset for terrain, this returns 0 if terrain is not active\n    float height = circle_elevation(circle_center);\n    vec4 world_center = vec4(circle_center, height, 1);\n    vec4 projected_center = u_matrix * world_center;\n\n    float view_scale = 0.0;\n    #ifdef PITCH_WITH_MAP\n        #ifdef SCALE_WITH_MAP\n            view_scale = 1.0;\n        #else\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            view_scale = projected_center.w / u_camera_to_center_distance;\n        #endif\n    #else\n        #ifdef SCALE_WITH_MAP\n            view_scale = u_camera_to_center_distance;\n        #else\n            view_scale = projected_center.w;\n        #endif\n    #endif\n    gl_Position = project_vertex(extrude, world_center, projected_center, radius, stroke_width, view_scale);\n\n    float visibility = 0.0;\n    #ifdef TERRAIN\n        float step = get_sample_step();\n        #ifdef PITCH_WITH_MAP\n            // to prevent the circle from self-intersecting with the terrain underneath on a sloped hill,\n            // we calculate the elevation at each corner and pick the highest one when computing visibility.\n            float cantilevered_height = cantilevered_elevation(circle_center, radius, stroke_width, view_scale);\n            vec4 occlusion_world_center = vec4(circle_center, cantilevered_height, 1);\n            vec4 occlusion_projected_center = u_matrix * occlusion_world_center;\n        #else\n            vec4 occlusion_world_center = world_center;\n            vec4 occlusion_projected_center = projected_center;\n        #endif\n        for(int ring = 0; ring < NUM_VISIBILITY_RINGS; ring++) {\n            float scale = (float(ring) + 1.0)/float(NUM_VISIBILITY_RINGS);\n            for(int i = 0; i < NUM_SAMPLES_PER_RING; i++) {\n                vec2 extrusion = vec2(cos(step * float(i)), -sin(step * float(i))) * scale;\n                vec4 frag_pos = project_vertex(extrusion, occlusion_world_center, occlusion_projected_center, radius, stroke_width, view_scale);\n                visibility += float(!isOccluded(frag_pos));\n            }\n        }\n        visibility /= float(NUM_VISIBILITY_RINGS) * float(NUM_SAMPLES_PER_RING);\n    #else\n        visibility = 1.0;\n    #endif\n    v_visibility = visibility;\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / u_device_pixel_ratio / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n\n#ifdef FOG\n    v_fog_pos = fog_position(world_center.xyz);\n#endif\n}\n"),clippingMask:se("void main() {\n    gl_FragColor = vec4(1.0);\n}\n","attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"),heatmap:se("uniform highp float u_intensity;\n\nvarying vec2 v_extrude;\n\n#pragma mapbox: define highp float weight\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef FOG\n    // Heatmaps work differently than other layers, so we operate on the accumulated\n    // density rather than a final color. The power is chosen so that the density\n    // fades into the fog at a reasonable rate.\n    gl_FragColor.r *= pow(1.0 - fog_opacity(v_fog_pos), 2.0);\n#endif\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec3 pos = vec3(floor(a_pos * 0.5) + extrude, elevation(floor(a_pos * 0.5)));\n\n    gl_Position = u_matrix * vec4(pos, 1);\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),heatmapTexture:se("uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"),collisionBox:se("varying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 red  = vec4(1.0, 0.0, 0.0, 1.0); // Red = collision, hide label\n    vec4 blue = vec4(0.0, 0.0, 1.0, 0.5); // Blue = no collision, label is showing\n\n    gl_FragColor  = mix(red, blue, step(0.5, v_placed)) * 0.5;\n    gl_FragColor *= mix(1.0, 0.1, step(0.5, v_notUsed));\n}","attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\nattribute vec2 a_shift;\nattribute float a_size_scale;\nattribute vec2 a_padding;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, elevation(a_anchor_pos), 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        1.5);\n\n    gl_Position = u_matrix * vec4(a_pos, elevation(a_pos), 1.0);\n    gl_Position.xy += (a_extrude * a_size_scale + a_shift + a_padding) * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"),collisionCircle:se("varying float v_radius;\nvarying vec2 v_extrude;\nvarying float v_perspective_ratio;\nvarying float v_collision;\n\nvoid main() {\n    float alpha = 0.5 * min(v_perspective_ratio, 1.0);\n    float stroke_radius = 0.9 * max(v_perspective_ratio, 1.0);\n\n    float distance_to_center = length(v_extrude);\n    float distance_to_edge = abs(distance_to_center - v_radius);\n    float opacity_t = smoothstep(-stroke_radius, 0.0, -distance_to_edge);\n\n    vec4 color = mix(vec4(0.0, 0.0, 1.0, 0.5), vec4(1.0, 0.0, 0.0, 1.0), v_collision);\n\n    gl_FragColor = color * alpha * opacity_t;\n}\n","attribute vec2 a_pos_2f;\nattribute float a_radius;\nattribute vec2 a_flags;\n\nuniform mat4 u_matrix;\nuniform mat4 u_inv_matrix;\nuniform vec2 u_viewport_size;\nuniform float u_camera_to_center_distance;\n\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying float v_perspective_ratio;\nvarying float v_collision;\n\nvec3 toTilePosition(vec2 screenPos) {\n    // Shoot a ray towards the ground to reconstruct the depth-value\n    vec4 rayStart = u_inv_matrix * vec4(screenPos, -1.0, 1.0);\n    vec4 rayEnd   = u_inv_matrix * vec4(screenPos,  1.0, 1.0);\n\n    rayStart.xyz /= rayStart.w;\n    rayEnd.xyz   /= rayEnd.w;\n\n    highp float t = (0.0 - rayStart.z) / (rayEnd.z - rayStart.z);\n    return mix(rayStart.xyz, rayEnd.xyz, t);\n}\n\nvoid main() {\n    vec2 quadCenterPos = a_pos_2f;\n    float radius = a_radius;\n    float collision = a_flags.x;\n    float vertexIdx = a_flags.y;\n\n    vec2 quadVertexOffset = vec2(\n        mix(-1.0, 1.0, float(vertexIdx >= 2.0)),\n        mix(-1.0, 1.0, float(vertexIdx >= 1.0 && vertexIdx <= 2.0)));\n\n    vec2 quadVertexExtent = quadVertexOffset * radius;\n\n    // Screen position of the quad might have been computed with different camera parameters.\n    // Transform the point to a proper position on the current viewport\n    vec3 tilePos = toTilePosition(quadCenterPos);\n    vec4 clipPos = u_matrix * vec4(tilePos, 1.0);\n\n    highp float camera_to_anchor_distance = clipPos.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    // Apply small padding for the anti-aliasing effect to fit the quad\n    // Note that v_radius and v_extrude are in screen coordinates already\n    float padding_factor = 1.2;\n    v_radius = radius;\n    v_extrude = quadVertexExtent * padding_factor;\n    v_perspective_ratio = collision_perspective_ratio;\n    v_collision = collision;\n\n    gl_Position = vec4(clipPos.xyz / clipPos.w, 1.0) + vec4(quadVertexExtent * padding_factor / u_viewport_size * 2.0, 0.0, 0.0);\n}\n"),debug:se("uniform highp vec4 u_color;\nuniform sampler2D u_overlay;\n\nvarying vec2 v_uv;\n\nvoid main() {\n    vec4 overlay_color = texture2D(u_overlay, v_uv);\n    gl_FragColor = mix(u_color, overlay_color, overlay_color.a);\n}\n","attribute vec2 a_pos;\nvarying vec2 v_uv;\n\nuniform mat4 u_matrix;\nuniform float u_overlay_scale;\n\nvoid main() {\n    // This vertex shader expects a EXTENT x EXTENT quad,\n    // The UV co-ordinates for the overlay texture can be calculated using that knowledge\n    float h = elevation(a_pos);\n    v_uv = a_pos / 8192.0;\n    gl_Position = u_matrix * vec4(a_pos * u_overlay_scale, h, 1);\n}\n"),fill:se("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    vec4 out_color = color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),fillOutline:se("varying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    vec4 out_color = outline_color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),fillOutlinePattern:se("\nuniform vec2 u_texsize;\nuniform sampler2D u_image;\nuniform float u_fade;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n    vec4 out_color = mix(color1, color2, u_fade);\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec3 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float tileRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    vec2 display_size_a = (pattern_br_a - pattern_tl_a) / pixel_ratio_from;\n    vec2 display_size_b = (pattern_br_b - pattern_tl_b) / pixel_ratio_to;\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),fillPattern:se("uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 out_color = mix(color1, color2, u_fade);\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec3 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float tileZoomRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    vec2 display_size_a = (pattern_br_a - pattern_tl_a) / pixel_ratio_from;\n    vec2 display_size_b = (pattern_br_b - pattern_tl_b) / pixel_ratio_to;\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileZoomRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileZoomRatio, a_pos);\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),fillExtrusion:se("varying vec4 v_color;\n\nvoid main() {\n    vec4 color = v_color;\n#ifdef FOG\n    color = fog_dither(fog_apply_premultiplied(color, v_fog_pos));\n#endif\n    gl_FragColor = color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform float u_vertical_gradient;\nuniform lowp float u_opacity;\n\nattribute vec4 a_pos_normal_ed;\nattribute vec2 a_centroid_pos;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize highp float base\n    #pragma mapbox: initialize highp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 pos_nx = floor(a_pos_normal_ed.xyz * 0.5);\n    // The least significant bits of a_pos_normal_ed.xy hold:\n    // x is 1 if it's on top, 0 for ground.\n    // y is 1 if the normal points up, and 0 if it points to side.\n    // z is sign of ny: 1 for positive, 0 for values <= 0.\n    mediump vec3 top_up_ny = a_pos_normal_ed.xyz - 2.0 * pos_nx;\n\n    float x_normal = pos_nx.z / 8192.0;\n    vec3 normal = top_up_ny.y == 1.0 ? vec3(0.0, 0.0, 1.0) : normalize(vec3(x_normal, (2.0 * top_up_ny.z - 1.0) * (1.0 - abs(x_normal)), 0.0));\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = top_up_ny.x;\n\n#ifdef TERRAIN\n    vec2 centroid_pos = a_centroid_pos;\n    bool flat_roof = centroid_pos.x != 0.0;\n    float ele = elevation(pos_nx.xy);\n    float hidden = float(centroid_pos.x == 0.0 && centroid_pos.y == 1.0);\n    float c_ele = flat_roof ? centroid_pos.y == 0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;\n    // If centroid elevation lower than vertex elevation, roof at least 2 meters height above base.\n    float h = flat_roof ? max(c_ele + height, ele + base + 2.0) : ele + (t > 0.0 ? height : base == 0.0 ? -5.0 : base);\n    vec3 pos = vec3(pos_nx.xy, h);\n    gl_Position = mix(u_matrix * vec4(pos, 1), AWAY, hidden);\n#else\n    vec3 pos = vec3(pos_nx.xy, t > 0.0 ? height : base);\n    gl_Position = u_matrix * vec4(pos, 1);\n#endif\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.rgb += clamp(color.rgb * directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n    v_color *= u_opacity;\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),fillExtrusionPattern:se("uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 out_color = mix(color1, color2, u_fade);\n\n    out_color = out_color * v_lighting;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_height_factor;\nuniform vec3 u_scale;\nuniform float u_vertical_gradient;\nuniform lowp float u_opacity;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec4 a_pos_normal_ed;\nattribute vec2 a_centroid_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float tileRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    vec3 pos_nx = floor(a_pos_normal_ed.xyz * 0.5);\n    // The least significant bits of a_pos_normal_ed.xy hold:\n    // x is 1 if it's on top, 0 for ground.\n    // y is 1 if the normal points up, and 0 if it points to side.\n    // z is sign of ny: 1 for positive, 0 for values <= 0.\n    mediump vec3 top_up_ny = a_pos_normal_ed.xyz - 2.0 * pos_nx;\n\n    float x_normal = pos_nx.z / 8192.0;\n    vec3 normal = top_up_ny.y == 1.0 ? vec3(0.0, 0.0, 1.0) : normalize(vec3(x_normal, (2.0 * top_up_ny.z - 1.0) * (1.0 - abs(x_normal)), 0.0));\n    float edgedistance = a_pos_normal_ed.w;\n\n    vec2 display_size_a = (pattern_br_a - pattern_tl_a) / pixel_ratio_from;\n    vec2 display_size_b = (pattern_br_b - pattern_tl_b) / pixel_ratio_to;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = top_up_ny.x;\n    float z = t > 0.0 ? height : base;\n\n#ifdef TERRAIN\n    vec2 centroid_pos = a_centroid_pos;\n    bool flat_roof = centroid_pos.x != 0.0;\n    float ele = elevation(pos_nx.xy);\n    float hidden = float(centroid_pos.x == 0.0 && centroid_pos.y == 1.0);\n    float c_ele = flat_roof ? centroid_pos.y == 0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;\n    // If centroid elevation lower than vertex elevation, roof at least 2 meters height above base.\n    float h = flat_roof ? max(c_ele + height, ele + base + 2.0) : ele + (t > 0.0 ? height : base == 0.0 ? -5.0 : base);\n    vec3 p = vec3(pos_nx.xy, h);\n    gl_Position = mix(u_matrix * vec4(p, 1), AWAY, hidden);\n#else\n    vec3 p = vec3(pos_nx.xy, z);\n    gl_Position = u_matrix * vec4(p, 1);\n#endif\n\n    vec2 pos = normal.z == 1.0\n        ? pos_nx.xy // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n    v_lighting *= u_opacity;\n\n#ifdef FOG\n    v_fog_pos = fog_position(p);\n#endif\n}\n"),hillshadePrepare:se("#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform vec4 u_unpack;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    data.a = -1.0;\n    return dot(data, u_unpack) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // Here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom).\n    // We want to vertically exaggerate the hillshading because otherwise\n    // it is barely noticeable at low zooms. To do this, we multiply this by\n    // a scale factor that is a function of zooms below 15, which is an arbitrary\n    // that corresponds to the max zoom level of Mapbox terrain-RGB tiles.\n    // See nickidlugash's awesome breakdown for more info:\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n\n    float exaggerationFactor = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n    float exaggeration = u_zoom < 15.0 ? (u_zoom - 15.0) * exaggerationFactor : 0.0;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) / pow(2.0, exaggeration + (19.2562 - u_zoom));\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_dimension;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    highp vec2 epsilon = 1.0 / u_dimension;\n    float scale = (u_dimension.x - 2.0) / u_dimension.x;\n    v_pos = (a_texture_pos / 8192.0) * scale + epsilon;\n}\n"),hillshade:se("uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef FOG\n    gl_FragColor = fog_dither(fog_apply_premultiplied(gl_FragColor, v_fog_pos));\n#endif\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),line:se("uniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    vec4 out_color = color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_units_to_pixels;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n#ifndef RENDER_TO_TEXTURE\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n#else\n    v_gamma_scale = 1.0;\n#endif\n    v_width2 = vec2(outset, inset);\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),lineGradient:se("uniform lowp float u_device_pixel_ratio;\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp vec2 v_uv;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the\n    // entire line, the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, v_uv);\n\n#ifdef FOG\n    color = fog_dither(fog_apply_premultiplied(color, v_fog_pos));\n#endif\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\nattribute float a_uv_x;\nattribute float a_split_index;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\nuniform vec2 u_units_to_pixels;\nuniform float u_image_height;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp vec2 v_uv;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    highp float texel_height = 1.0 / u_image_height;\n    highp float half_texel_height = 0.5 * texel_height;\n    v_uv = vec2(a_uv_x, a_split_index * texel_height - half_texel_height);\n\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n#ifndef RENDER_TO_TEXTURE\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n#else\n    v_gamma_scale = 1.0;\n#endif\n    v_width2 = vec2(outset, inset);\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),linePattern:se("uniform lowp float u_device_pixel_ratio;\nuniform vec2 u_texsize;\nuniform float u_fade;\nuniform mediump vec3 u_scale;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\nvarying float v_width;\n\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float tileZoomRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    vec2 display_size_a = (pattern_br_a - pattern_tl_a) / pixel_ratio_from;\n    vec2 display_size_b = (pattern_br_b - pattern_tl_b) / pixel_ratio_to;\n\n    vec2 pattern_size_a = vec2(display_size_a.x * fromScale / tileZoomRatio, display_size_a.y);\n    vec2 pattern_size_b = vec2(display_size_b.x * toScale / tileZoomRatio, display_size_b.y);\n\n    float aspect_a = display_size_a.y / v_width;\n    float aspect_b = display_size_b.y / v_width;\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / pattern_size_a.x * aspect_a, 1.0);\n    float x_b = mod(v_linesofar / pattern_size_b.x * aspect_b, 1.0);\n\n    float y = 0.5 * v_normal.y + 0.5;\n\n    vec2 texel_size = 1.0 / u_texsize;\n\n    vec2 pos_a = mix(pattern_tl_a * texel_size - texel_size, pattern_br_a * texel_size + texel_size, vec2(x_a, y));\n    vec2 pos_b = mix(pattern_tl_b * texel_size - texel_size, pattern_br_b * texel_size + texel_size, vec2(x_b, y));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n#ifdef FOG\n    color = fog_dither(fog_apply_premultiplied(color, v_fog_pos));\n#endif\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\nattribute float a_linesofar;\n\nuniform mat4 u_matrix;\nuniform vec2 u_units_to_pixels;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\nvarying float v_width;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // float tileRatio = u_scale.x;\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n#ifndef RENDER_TO_TEXTURE\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n#else\n    v_gamma_scale = 1.0;\n#endif\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n    v_width = floorwidth;\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),lineSDF:se("\nuniform lowp float u_device_pixel_ratio;\nuniform sampler2D u_image;\nuniform float u_mix;\nuniform vec3 u_scale;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n    #pragma mapbox: initialize mediump vec4 dash_from\n    #pragma mapbox: initialize mediump vec4 dash_to\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    float sdfwidth = min(dash_from.z * u_scale.y, dash_to.z * u_scale.z);\n    float sdfgamma = 1.0 / (2.0 * u_device_pixel_ratio) / sdfwidth;\n    alpha *= smoothstep(0.5 - sdfgamma / floorwidth, 0.5 + sdfgamma / floorwidth, sdfdist);\n\n    vec4 out_color = color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define EXTRUDE_SCALE 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\nattribute float a_linesofar;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\nuniform vec2 u_units_to_pixels;\n\nuniform vec2 u_texsize;\nuniform mediump vec3 u_scale;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n    #pragma mapbox: initialize mediump vec4 dash_from\n    #pragma mapbox: initialize mediump vec4 dash_to\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * EXTRUDE_SCALE;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * EXTRUDE_SCALE * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n#ifndef RENDER_TO_TEXTURE\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n#else\n    v_gamma_scale = 1.0;\n#endif\n\n    float tileZoomRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    float widthA = dash_from.z * fromScale;\n    float widthB = dash_to.z * toScale;\n    float heightA = dash_from.y;\n    float heightB = dash_to.y;\n\n    v_tex_a = vec2(a_linesofar * (tileZoomRatio / widthA) / floorwidth, (-normal.y * heightA + dash_from.x + 0.5) / u_texsize.y);\n    v_tex_b = vec2(a_linesofar * (tileZoomRatio / widthB) / floorwidth, (-normal.y * heightB + dash_to.x + 0.5) / u_texsize.y);\n\n    v_width2 = vec2(outset, inset);\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),raster:se("uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    vec3 out_color = mix(u_high_vec, u_low_vec, rgb);\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = vec4(out_color * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),symbolIcon:se("uniform sampler2D u_texture;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec4 a_pixeloffset;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    vec2 a_pxoffset = a_pixeloffset.xy;\n    vec2 a_minFontScale = a_pixeloffset.zw / 256.0;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    float h = elevation(a_pos);\n    vec4 projectedPoint = u_matrix * vec4(a_pos, h, 1);\n\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            1.5);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), h, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, h, 1.0);\n    float z = 0.0;\n    vec2 offset = rotation_matrix * (a_offset / 32.0 * max(a_minFontScale, fontScale) + a_pxoffset / 16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\n    vec4 tile_pos = u_label_plane_matrix_inv * vec4(a_projected_pos.xy + offset, 0.0, 1.0);\n    z = elevation(tile_pos.xy);\n#endif\n    // Symbols might end up being behind the camera. Move them AWAY.\n    float occlusion_fade = occlusionFade(projectedPoint);\n    gl_Position = mix(u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + offset, z, 1.0), AWAY, float(projectedPoint.w <= 0.0 || occlusion_fade == 0.0));\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(occlusion_fade, fade_opacity[0] + fade_change));\n}\n"),symbolSDF:se("#define SDF_PX 8.0\n\nuniform bool u_is_halo;\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform lowp float u_device_pixel_ratio;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float EDGE_GAMMA = 0.105 / u_device_pixel_ratio;\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec4 a_pixeloffset;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    vec2 a_pxoffset = a_pixeloffset.xy;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    float h = elevation(a_pos);\n    vec4 projectedPoint = u_matrix * vec4(a_pos, h, 1);\n\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        1.5);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), h, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, h, 1.0);\n    float z = 0.0;\n    vec2 offset = rotation_matrix * (a_offset / 32.0 * fontScale + a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\n    vec4 tile_pos = u_label_plane_matrix_inv * vec4(a_projected_pos.xy + offset, 0.0, 1.0);\n    z = elevation(tile_pos.xy);\n#endif\n    // Symbols might end up being behind the camera. Move them AWAY.\n    float occlusion_fade = occlusionFade(projectedPoint);\n    gl_Position = mix(u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + offset, z, 1.0), AWAY, float(projectedPoint.w <= 0.0 || occlusion_fade == 0.0));\n    float gamma_scale = gl_Position.w;\n\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(occlusion_fade, fade_opacity[0] + fade_change));\n\n    v_data0 = a_tex / u_texsize;\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"),symbolTextAndIcon:se("#define SDF_PX 8.0\n\n#define SDF 1.0\n#define ICON 0.0\n\nuniform bool u_is_halo;\nuniform sampler2D u_texture;\nuniform sampler2D u_texture_icon;\nuniform highp float u_gamma_scale;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec4 v_data0;\nvarying vec4 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float fade_opacity = v_data1[2];\n\n    if (v_data1.w == ICON) {\n        vec2 tex_icon = v_data0.zw;\n        lowp float alpha = opacity * fade_opacity;\n        gl_FragColor = texture2D(u_texture_icon, tex_icon) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n#endif\n        return;\n    }\n\n    vec2 tex = v_data0.xy;\n\n    float EDGE_GAMMA = 0.105 / u_device_pixel_ratio;\n\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n\n    float fontScale = size / 24.0;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\nuniform vec2 u_texsize;\nuniform vec2 u_texsize_icon;\n\nvarying vec4 v_data0;\nvarying vec4 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    float is_sdf = a_size[0] - 2.0 * a_size_min;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    float h = elevation(a_pos);\n    vec4 projectedPoint = u_matrix * vec4(a_pos, h, 1);\n\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        1.5);\n\n    size *= perspective_ratio;\n\n    float fontScale = size / 24.0;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), h, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, h, 1.0);\n    float z = 0.0;\n    vec2 offset = rotation_matrix * (a_offset / 32.0 * fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\n    vec4 tile_pos = u_label_plane_matrix_inv * vec4(a_projected_pos.xy + offset, 0.0, 1.0);\n    z = elevation(tile_pos.xy);\n#endif\n    float occlusion_fade = occlusionFade(projectedPoint);\n    gl_Position = mix(u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + offset, z, 1.0), AWAY, float(projectedPoint.w <= 0.0 || occlusion_fade == 0.0));\n    float gamma_scale = gl_Position.w;\n\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(occlusion_fade, fade_opacity[0] + fade_change));\n\n    v_data0.xy = a_tex / u_texsize;\n    v_data0.zw = a_tex / u_texsize_icon;\n    v_data1 = vec4(gamma_scale, size, interpolated_fade_opacity, is_sdf);\n}\n"),terrainRaster:se("uniform sampler2D u_image0;\nvarying vec2 v_pos0;\n\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n\nvoid main() {\n    vec4 color = texture2D(u_image0, v_pos0);\n#ifdef FOG\n    color = fog_dither(fog_apply_from_vert(color, v_fog_opacity));\n#endif\n    gl_FragColor = color;\n#ifdef TERRAIN_WIREFRAME\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform float u_skirt_height;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\n\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n\nconst float skirtOffset = 24575.0;\nconst float wireframeOffset = 0.00015;\n\nvoid main() {\n    v_pos0 = a_texture_pos / 8192.0;\n    float skirt = float(a_pos.x >= skirtOffset);\n    float elevation = elevation(a_texture_pos) - skirt * u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\n    elevation += u_skirt_height * u_skirt_height * wireframeOffset;\n#endif\n    vec2 decodedPos = a_pos - vec2(skirt * skirtOffset, 0.0);\n    gl_Position = u_matrix * vec4(decodedPos, elevation, 1.0);\n\n#ifdef FOG\n    v_fog_opacity = fog(fog_position(vec3(decodedPos, elevation)));\n#endif\n}\n"),terrainDepth:se("#ifdef GL_ES\nprecision highp float;\n#endif\n\n// Pack depth to RGBA. A piece of code copied in various libraries and WebGL\n// shadow mapping examples.\nvec4 pack_depth(float ndc_z) {\n    float depth = ndc_z * 0.5 + 0.5;\n    const vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n    const vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n    vec4 res = fract(depth * bit_shift);\n    res -= res.xxyz * bit_mask;\n    return res;\n}\n\nvarying float v_depth;\n\nvoid main() {\n    gl_FragColor = pack_depth(v_depth);\n}\n","uniform mat4 u_matrix;\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying float v_depth;\n\nvoid main() {\n    float elevation = elevation(a_texture_pos);\n    gl_Position = u_matrix * vec4(a_pos, elevation, 1.0);\n    v_depth = gl_Position.z / gl_Position.w;\n}\n"),skybox:se("// [1] Banding in games http://loopit.dk/banding_in_games.pdf\n\nvarying lowp vec3 v_uv;\n\nuniform lowp samplerCube u_cubemap;\nuniform lowp float u_opacity;\nuniform highp float u_temporal_offset;\nuniform highp vec3 u_sun_direction;\n\nfloat sun_disk(highp vec3 ray_direction, highp vec3 sun_direction) {\n    highp float cos_angle = dot(normalize(ray_direction), sun_direction);\n\n    // Sun angular angle is ~0.5°\n    const highp float cos_sun_angular_diameter = 0.99996192306;\n    const highp float smoothstep_delta = 1e-5;\n\n    return smoothstep(\n        cos_sun_angular_diameter - smoothstep_delta,\n        cos_sun_angular_diameter + smoothstep_delta,\n        cos_angle);\n}\n\nfloat map(float value, float start, float end, float new_start, float new_end) {\n    return ((value - start) * (new_end - new_start)) / (end - start) + new_start;\n}\n\nvoid main() {\n    vec3 uv = v_uv;\n\n    // Add a small offset to prevent black bands around areas where\n    // the scattering algorithm does not manage to gather lighting\n    const float y_bias = 0.015;\n    uv.y += y_bias;\n\n    // Inverse of the operation applied for non-linear UV parameterization\n    uv.y = pow(abs(uv.y), 1.0 / 5.0);\n\n    // To make better utilization of the visible range (e.g. over the horizon, UVs\n    // from 0.0 to 1.0 on the Y-axis in cubemap space), the UV range is remapped from\n    // (0.0,1.0) to (-1.0,1.0) on y. The inverse operation is applied when generating.\n    uv.y = map(uv.y, 0.0, 1.0, -1.0, 1.0);\n\n    vec3 sky_color = textureCube(u_cubemap, uv).rgb;\n\n#ifdef FOG\n    // Apply fog contribution if enabled\n    // Swizzle to put z-up (ignoring x-y mirror since fog does not depend on azimuth)\n    sky_color = fog_apply_sky_gradient(v_uv.xzy, sky_color);\n#endif\n\n    // Dither [1]\n    sky_color.rgb = dither(sky_color.rgb, gl_FragCoord.xy + u_temporal_offset);\n    // Add sun disk\n    sky_color += 0.1 * sun_disk(v_uv, u_sun_direction);\n\n    gl_FragColor = vec4(sky_color * u_opacity, u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",ee),skyboxGradient:se("varying highp vec3 v_uv;\n\nuniform lowp sampler2D u_color_ramp;\nuniform lowp vec3 u_center_direction;\nuniform lowp float u_radius;\nuniform lowp float u_opacity;\nuniform highp float u_temporal_offset;\n\nvoid main() {\n    float progress = acos(dot(normalize(v_uv), u_center_direction)) / u_radius;\n    vec4 color = texture2D(u_color_ramp, vec2(progress, 0.5));\n\n#ifdef FOG\n    // Apply fog contribution if enabled, make sure to un/post multiply alpha before/after\n    // applying sky gradient contribution, as color ramps are premultiplied-alpha colors.\n    // Swizzle to put z-up (ignoring x-y mirror since fog does not depend on azimuth)\n    color.rgb = fog_apply_sky_gradient(v_uv.xzy, color.rgb / color.a) * color.a;\n#endif\n\n    color *= u_opacity;\n\n    // Dither\n    color.rgb = dither(color.rgb, gl_FragCoord.xy + u_temporal_offset);\n\n    gl_FragColor = color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",ee),skyboxCapture:se("// [1] Precomputed Atmospheric Scattering: https://hal.inria.fr/inria-00288758/document\n// [2] Earth Fact Sheet https://nssdc.gsfc.nasa.gov/planetary/factsheet/earthfact.html\n// [3] Tonemapping Operators http://filmicworlds.com/blog/filmic-tonemapping-operators\n\nvarying highp vec3 v_position;\n\nuniform highp float u_sun_intensity;\nuniform highp float u_luminance;\nuniform lowp vec3 u_sun_direction;\nuniform highp vec4 u_color_tint_r;\nuniform highp vec4 u_color_tint_m;\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// [1] equation (1) section 2.1. for λ = (680, 550, 440) nm,\n// which corresponds to scattering coefficients at sea level\n#define BETA_R                  vec3(5.5e-6, 13.0e-6, 22.4e-6)\n// The following constants are from [1] Figure 6 and section 2.1\n#define BETA_M                  vec3(21e-6, 21e-6, 21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0 // m\n#define DENSITY_HEIGHT_SCALE_M  1200.0 // m\n// [1] and [2] section 2.1\n#define PLANET_RADIUS           6360e3 // m\n#define ATMOSPHERE_RADIUS       6420e3 // m\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\n\nfloat ray_sphere_exit(vec3 orig, vec3 dir, float radius) {\n    float a = dot(dir, dir);\n    float b = 2.0 * dot(dir, orig);\n    float c = dot(orig, orig) - radius * radius;\n    float d = sqrt(b * b - 4.0 * a * c);\n    return (-b + d) / (2.0 * a);\n}\n\nvec3 extinction(vec2 density) {\n    return exp(-vec3(BETA_R * u_color_tint_r.a * density.x + BETA_M * u_color_tint_m.a * density.y));\n}\n\nvec2 local_density(vec3 point) {\n    float height = max(length(point) - PLANET_RADIUS, 0.0);\n    // Explicitly split in two shader statements, exp(vec2)\n    // did not behave correctly on specific arm mali arch.\n    float exp_r = exp(-height / DENSITY_HEIGHT_SCALE_R);\n    float exp_m = exp(-height / DENSITY_HEIGHT_SCALE_M);\n    return vec2(exp_r, exp_m);\n}\n\nfloat phase_ray(float cos_angle) {\n    return (3.0 / (16.0 * PI)) * (1.0 + cos_angle * cos_angle);\n}\n\nfloat phase_mie(float cos_angle) {\n    return (3.0 / (8.0 * PI)) * ((1.0 - MIE_G * MIE_G) * (1.0 + cos_angle * cos_angle)) /\n        ((2.0 + MIE_G * MIE_G) * pow(1.0 + MIE_G * MIE_G - 2.0 * MIE_G * cos_angle, 1.5));\n}\n\nvec2 density_to_atmosphere(vec3 point, vec3 light_dir) {\n    float ray_len = ray_sphere_exit(point, light_dir, ATMOSPHERE_RADIUS);\n    float step_len = ray_len / float(DENSITY_STEPS);\n\n    vec2 density_point_to_atmosphere = vec2(0.0);\n    for (int i = 0; i < DENSITY_STEPS; ++i) {\n        vec3 point_on_ray = point + light_dir * ((float(i) + 0.5) * step_len);\n        density_point_to_atmosphere += local_density(point_on_ray) * step_len;;\n    }\n\n    return density_point_to_atmosphere;\n}\n\nvec3 atmosphere(vec3 ray_dir, vec3 sun_direction, float sun_intensity) {\n    vec2 density_orig_to_point = vec2(0.0);\n    vec3 scatter_r = vec3(0.0);\n    vec3 scatter_m = vec3(0.0);\n    vec3 origin = vec3(0.0, PLANET_RADIUS, 0.0);\n\n    float ray_len = ray_sphere_exit(origin, ray_dir, ATMOSPHERE_RADIUS);\n    float step_len = ray_len / float(SAMPLE_STEPS);\n    for (int i = 0; i < SAMPLE_STEPS; ++i) {\n        vec3 point_on_ray = origin + ray_dir * ((float(i) + 0.5) * step_len);\n\n        // Local density\n        vec2 density = local_density(point_on_ray) * step_len;\n        density_orig_to_point += density;\n\n        // Density from point to atmosphere\n        vec2 density_point_to_atmosphere = density_to_atmosphere(point_on_ray, sun_direction);\n\n        // Scattering contribution\n        vec2 density_orig_to_atmosphere = density_orig_to_point + density_point_to_atmosphere;\n        vec3 extinction = extinction(density_orig_to_atmosphere);\n        scatter_r += density.x * extinction;\n        scatter_m += density.y * extinction;\n    }\n\n    // The mie and rayleigh phase functions describe how much light\n    // is scattered towards the eye when colliding with particles\n    float cos_angle = dot(ray_dir, sun_direction);\n    float phase_r = phase_ray(cos_angle);\n    float phase_m = phase_mie(cos_angle);\n\n    // Apply light color adjustments\n    vec3 beta_r = BETA_R * u_color_tint_r.rgb * u_color_tint_r.a;\n    vec3 beta_m = BETA_M * u_color_tint_m.rgb * u_color_tint_m.a;\n\n    return (scatter_r * phase_r * beta_r + scatter_m * phase_m * beta_m) * sun_intensity;\n}\n\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nvec3 uncharted2_tonemap(vec3 x) {\n   return ((x * (A * x + C * B) + D * E) / (x * (A * x + B) + D * F)) - E / F;\n}\n\nvoid main() {\n    vec3 ray_direction = v_position;\n\n    // Non-linear UV parameterization to increase horizon events\n    ray_direction.y = pow(ray_direction.y, 5.0);\n\n    // Add a small offset to prevent black bands around areas where\n    // the scattering algorithm does not manage to gather lighting\n    const float y_bias = 0.015;\n    ray_direction.y += y_bias;\n\n    vec3 color = atmosphere(normalize(ray_direction), u_sun_direction, u_sun_intensity);\n\n    // Apply exposure [3]\n    float white_scale = 1.0748724675633854; // 1.0 / uncharted2_tonemap(1000.0)\n    color = uncharted2_tonemap((log2(2.0 / pow(u_luminance, 4.0))) * color) * white_scale;\n\n    gl_FragColor = vec4(color, 1.0);\n}\n","attribute highp vec3 a_pos_3f;\n\nuniform mat3 u_matrix_3f;\n\nvarying highp vec3 v_position;\n\nfloat map(float value, float start, float end, float new_start, float new_end) {\n    return ((value - start) * (new_end - new_start)) / (end - start) + new_start;\n}\n\nvoid main() {\n    vec4 pos = vec4(u_matrix_3f * a_pos_3f, 1.0);\n\n    v_position = pos.xyz;\n    v_position.y *= -1.0;\n\n    // To make better utilization of the visible range (e.g. over the horizon, UVs\n    // from 0.0 to 1.0 on the Y-axis in cubemap space), the UV range is remapped from\n    // (-1.0,1.0) to (0.0,1.0) on y. The inverse operation is applied when sampling.\n    v_position.y = map(v_position.y, -1.0, 1.0, 0.0, 1.0);\n\n    gl_Position = vec4(a_pos_3f.xy, 0.0, 1.0);\n}\n")};function se(t,e,n){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,o=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=t.match(r),s=e.match(r),l=te.match(r);let u=s?s.concat(a):a;n||(ne.staticUniforms&&(u=ne.staticUniforms.concat(u)),ie.staticUniforms&&(u=ie.staticUniforms.concat(u))),u&&(u=u.concat(l));const c={};return{fragmentSource:t=t.replace(i,((t,e,n,i,r)=>(c[r]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nvarying ${n} ${i} ${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = u_${r};\n#endif\n`))),vertexSource:e=e.replace(i,((t,e,n,i,r)=>{const o="float"===i?"vec2":"vec4",a=r.match(/color/)?"color":o;return c[r]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${n} ${o} a_${r};\nvarying ${n} ${i} ${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = a_${r};\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = unpack_mix_${a}(a_${r}, u_${r}_t);\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${n} ${o} a_${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = a_${r};\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = unpack_mix_${a}(a_${r}, u_${r}_t);\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`})),staticAttributes:o,staticUniforms:u}}class le{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,n,i,r,o,a,s){this.context=t;let l=this.boundPaintVertexBuffers.length!==i.length;for(let t=0;!l&&t<i.length;t++)this.boundPaintVertexBuffers[t]!==i[t]&&(l=!0);const u=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||u?this.freshBind(e,n,i,r,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())}freshBind(e,n,i,r,o,a,s){let l;const u=e.numAttributes,c=this.context,h=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=e,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=s;else{l=c.currentNumAttributes||0;for(let e=u;e<l;e++)t.assert_1(0!==e),h.disableVertexAttribArray(e)}n.enableAttributes(h,e);for(const t of i)t.enableAttributes(h,e);a&&a.enableAttributes(h,e),s&&s.enableAttributes(h,e),n.bind(),n.setVertexAttribPointers(h,e,o);for(const t of i)t.bind(),t.setVertexAttribPointers(h,e,o);a&&(a.bind(),a.setVertexAttribPointers(h,e,o)),r&&r.bind(),s&&(s.bind(),s.setVertexAttribPointers(h,e,o)),c.currentNumAttributes=u}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ue(e,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.MercatorCoordinate(0,r/i).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/i).toLngLat().lat]}function ce(e,n,i,r,o,a,s){const l=e.context,u=l.gl,c=i.fbo;if(!c)return;e.prepareDrawTile(n);const h=e.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());const d=((t,e,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:i||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:ue(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}})(e,i,r,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,h,n.toUnwrapped()),h.draw(l,u.TRIANGLES,o,a,s,t.CullFaceMode.disabled,d,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function he(e,n,i){if(!n.needsDEMTextureUpload)return;const r=e.context,o=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1);const a=i.stride;n.demTexture=n.demTexture||e.getTileTexture(a);const s=i.getPixels();n.demTexture?n.demTexture.update(s,{premultiply:!1}):n.demTexture=new t.Texture(r,s,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function de(e,n,i,r,o,a){const s=e.context,l=s.gl;if(!n.dem)return;const u=n.dem;if(s.activeTexture.set(l.TEXTURE1),he(e,n,u),t.assert_1(n.demTexture),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const c=u.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const e=new t.Texture(s,{width:c,height:c,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(c,c,!0),h.colorAttachment.set(e.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,o,a,t.CullFaceMode.disabled,((e,n)=>{const i=n.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,u),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}const fe=(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image0:new t.Uniform1i(e,n.u_image0),u_skirt_height:new t.Uniform1f(e,n.u_skirt_height)}),pe=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e});const me=new class{constructor(){this.operations={}}newMorphing(e,n,i,r,o){if(t.assert_1(n.demTexture&&i.demTexture),t.assert_1(n.tileID.key!==i.tileID.key),e in this.operations){const n=this.operations[e];t.assert_1(n.from&&n.to),n.to.tileID.key!==i.tileID.key&&(n.queued=i)}else this.operations[e]={startTime:r,phase:0,duration:o,from:n,to:i,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const n=this.operations[e],i=n.from,r=n.to;return t.assert_1(i&&r),{from:i,to:r,phase:n.phase}}update(e){for(const n in this.operations){const i=this.operations[n];for(t.assert_1(i.from&&i.to),i.phase=(e-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,e)){delete this.operations[n];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},_e={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ge(e,n,i,r,o){const a=e.context,s=a.gl;let l,u;const c=e.options.showTerrainWireframe?2:0,h=(t,n)=>{if(u===t)return;const i=[_e[t]];n&&i.push(_e[c]),l=e.useProgram("terrainRaster",null,i),u=t},d=e.colorModeForRenderPass(),f=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);me.update(o);const p=e.transform,m=(_=p.zoom,6*Math.pow(1.5,22-_)*n.exaggeration());var _;(c?[!1,!0]:[!1]).forEach((c=>{u=-1;const _=c?s.LINES:s.TRIANGLES,[g,y]=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const u of r){const r=i.getTile(u),b=t.StencilMode.disabled,w=n.prevTerrainTileForTile[u.key],M=n.terrainTileForTile[u.key];x=M,null!=(v=w)&&null!=x&&!(!v.hasData()||!x.hasData())&&null!=v.demTexture&&null!=x.demTexture&&v.tileID.key!==x.tileID.key&&me.newMorphing(u.key,w,M,o,250),a.activeTexture.set(s.TEXTURE0),r.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const T=me.getMorphValuesForProxy(u.key),k=T?1:0;let S;T&&(S={morphing:{srcDemTile:T.from,dstDemTile:T.to,phase:t.easeCubicInOut(T.phase)}});const E=pe(u.projMatrix,ye(u.canonical,p.renderWorldCopies)?m/10:m);h(k,c),n.setupElevationDraw(r,l,S),e.prepareDrawProgram(a,l,u.toUnwrapped()),l.draw(a,_,f,b,d,t.CullFaceMode.backCCW,E,"terrain_raster",n.gridBuffer,g,y)}var v,x}))}function ye(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const ve=t=>({u_matrix:t});function xe(e,n,i,r,o){if(o>0){const a=t.exported.now(),s=(a-e.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,u=i.getSource(),c=r.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(e.tileID.overscaledZ-c),d=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class be extends t.SourceCache{constructor(t){const e=O("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new T(q(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,i){if(e.freezeTileCoverage)return;this.transform=e;const r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,i)=>{if(n[i.key]="",!this._tiles[i.key]){const n=new t.Tile(i,this._source.tileSize*i.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[i.key]=n}return n}),{});for(const t in this._tiles)t in r||(this.freeFBO(t),this._tiles[t].state="unloaded",delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class we extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class Me extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[i,r,o]=function(e){const n=new t.StructArrayLayout4i8,i=new t.StructArrayLayout3ui6,r=e+2;n.reserve(r*r),i.reserve((r-1)*(r-1)*2);const o=t.EXTENT/(e-1),a=t.EXTENT+o/2,s=a+o,l=24575;for(let e=-o;e<s;e+=o)for(let i=-o;i<s;i+=o){const r=i<0||i>a||e<0||e>a?l:0,o=t.clamp(Math.round(i),0,t.EXTENT),s=t.clamp(Math.round(e),0,t.EXTENT);n.emplaceBack(o+r,s,o,s)}const u=(r-3)*(r-3)*2,c=(t,e)=>{const n=e*r+t;i.emplaceBack(n+1,n,n+r),i.emplaceBack(n+r,n+r+1,n+1)};for(let t=1;t<r-2;t++)for(let e=1;e<r-2;e++)c(e,t);return[0,r-2].forEach((t=>{for(let e=0;e<r-1;e++)c(e,t),c(t,e)})),[n,i,u]}(129),a=e.context;this.gridBuffer=a.createVertexBuffer(i,z.members),this.gridIndexBuffer=a.createIndexBuffer(r),this.gridSegments=t.SegmentVector.simpleSegment(0,0,i.length,r.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,i.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new be(n.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,0,t.EXTENT,0,t.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new t.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(e,n,i){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const r=e.terrain.properties;this.sourceCache=e._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const e=this.sourceCache.getSource().tileSize/128,i=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(n,e*i,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!i),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain?t.assert_1(100===e.efficiency):100!==e.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${e.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${e.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=n.getIds().map((t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=i.calculateProjMatrix(e.toUnwrapped()),e}));(function(e,n){const i=n.transform.pointCoordinate(n.transform.getCameraPoint()),r=new t.pointGeometry(i.x,i.y);e.sort(((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const i=new t.pointGeometry(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=r.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(i)-a.distSqr(o)}))})(r,this.painter),this._previousZoom=i.zoom;const o=this.proxyToSource||{};this.proxyToSource={},r.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const t in a){const n=a[t];if(!n.used)continue;if(n!==this.sourceCache&&(this._findCoveringTileCache[n.id]={}),this._setupProxiedCoordsForOrtho(n,e[t],o),n.usedForTerrain)continue;const i=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(i)}this.proxiedCoords[n.id]=r.map((t=>new we(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const s={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in s||(this._visibleDemTiles.push(e),s[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const i=this.terrainTileForTile[n],r=i.dem;!r||i.demTexture&&!i.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),he(this.painter,i,r))}}_prepareDemTileUniforms(e,n,i,r){if(!n||null==n.demTexture)return!1;t.assert_1(n.dem);const o=e.tileID.canonical,a=n.tileID.canonical,s=Math.pow(2,a.z-o.z),l=r||"";return i[`u_dem_tl${l}`]=[o.x*s%1,o.y*s%1],i[`u_dem_scale${l}`]=s,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,n)=>{if(!n.dem)return e;const i=n.dem.tree.minimums[0];return i>0&&t++,e+i}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const i=this._getLoadedAreaMinimum(),r={width:1,height:1,data:new Uint8Array(t.DEMData.pack(i,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(r,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1}),o}setupElevationDraw(e,n,i){const r=this.painter.context,o=r.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,u=null,c=1;if(i&&i.morphing&&this._useVertexMorphing){const t=i.morphing.srcDemTile,n=i.morphing.dstDemTile;c=i.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,a,"_prev")&&(u=t),this._prepareDemTileUniforms(e,n,a)&&(l=n))}if(u&&l?(r.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),r.activeTexture.set(o.TEXTURE4),u.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=c):(l=this.terrainTileForTile[e.tileID.key],r.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST)),i&&i.useDepthForOcclusion&&(r.activeTexture.set(o.TEXTURE3),this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),i&&i.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=e}i&&i.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=i.labelPlaneMatrixInv),n.setTerrainUniformValues(r,a)}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,i=this.painter.context,r=this.proxySourceCache,o=this.proxiedCoords[r.id],a=()=>{i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),this.renderingToTexture=!1},s=this._drapedRenderBatches.shift();t.assert_1(s.start===e);let l=[];const u=n.style.order;let c=0;for(let h=0;h<o.length;h++){const d=o[h],f=r.getTileByID(d.proxyTileKey),p=r.proxyCachedFBO[d.key]?r.proxyCachedFBO[d.key][e]:void 0;let m,_;if(m=this.currentFBO=void 0!==p?r.renderCache[p]:this.pool[c++],f.texture=m.tex,void 0===p||m.dirty){i.bindFramebuffer.set(m.fb.framebuffer),this.renderedToTile=!1,m.dirty&&(i.clear({color:t.Color.transparent}),m.dirty=!1);for(let e=s.start;e<=s.end;++e){const r=n.style._layers[u[e]],o=r.isHidden(n.transform.zoom);if(t.assert_1(this._style.isLayerDraped(r)||o),o)continue;const a=n.style._getLayerSourceCache(r),s=a?this.proxyToSource[d.key][a.id]:[d];if(!s)continue;const l=s;i.viewport.set([0,0,m.fb.width,m.fb.height]),_!==(a?a.id:null)&&(this._setupStencil(s,r,a),_=a?a.id:null),n.renderLayer(n,a,r,l)}m.dirty=this.renderedToTile,this.renderedToTile&&l.push(f.tileID),5===c&&(c=0,l.length>0&&(a(),ge(n,this,r,l,this._updateTimestamp),this.renderingToTexture=!0,l=[]))}else l.push(f.tileID)}return a(),l.length>0&&ge(n,this,r,l,this._updateTimestamp),s.end+1}postRender(){t.assert_1(0===this._drapedRenderBatches.length)}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,i=0,r=0,o=!1;for(let a=0;a<e;++a){const e=t._layers[t.order[a]];this._style.isLayerDraped(e)?(o&&++i,++r):o||(o=!0,n=e.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-i/r),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{const n=e.dem.tree;t=Math.min(t,n.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const i=this._visibleDemTiles.filter((t=>t.dem)).map((i=>{const r=i.tileID,o=Math.pow(2,r.overscaledZ),{x:a,y:s}=r.canonical,l=a/o,u=(a+1)/o,c=s/o,h=(s+1)/o;return{minx:l,miny:c,maxx:u,maxy:h,t:i.dem.tree.raycastRoot(l,c,u,h,t,e,n),tile:i}}));i.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const r of i){if(null==r.t)return null;const i=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,t,e,n);if(null!=i)return i}return null}_createFBO(){const e=this.painter.context,n=e.gl,i=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const r=new t.Texture(e,{width:i[0],height:i[1],data:null},n.RGBA);r.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=e.createFramebuffer(i[0],i[1],!1);return o.colorAttachment.set(r.texture),o.depthAttachment=new t.DepthStencilAttachment(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,i[0],i[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom),i=e.getCrossfadeParameters(),r=!!i&&1!==i.t,o=e.hasTransition();return"custom"!==e.type&&!n&&(r||o)}))}_clearRasterFadeFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof A){t=!0;break}if(t)for(let t=0;t<this._style.order.length;++t){const e=this._style._layers[this._style.order[t]],n=e.isHidden(this.painter.transform.zoom),i=this._style._getLayerSourceCache(e);if("raster"!==e.type||n||!i)continue;const r=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][i.id];if(e)for(const t of e){const e=xe(i.getTile(t),i.findLoadedParent(t,0),i,this.painter.transform,r);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(i.id,t)}}}}_setupDrapedRenderBatches(){const e=this._style.order,n=e.length;if(0===n)return;const i=[];let r,o=0,a=this._style._layers[e[o]];for(;!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++o<n;)a=this._style._layers[e[o]];for(;o<n;++o){const t=this._style._layers[e[o]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=o):void 0!==r&&(i.push({start:r,end:o-1}),r=void 0))}void 0!==r&&i.push({start:r,end:o-1}),this._style.map._optimizeForTerrain&&t.assert_1(1===i.length||0===i.length),this._drapedRenderBatches=i}_setupRenderCache(e){const n=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,n.renderCache.length>n.renderCachePool.length){const e=Object.values(n.proxyCachedFBO);n.proxyCachedFBO={};for(let t=0;t<e.length;++t){const i=Object.values(e[t]);n.renderCachePool.push(...i)}t.assert_1(n.renderCache.length===n.renderCachePool.length)}return}this._clearRasterFadeFromRenderCache();const i=this.proxyCoords,r=this._tilesDirty;for(let o=i.length-1;o>=0;o--){const a=i[o],s=n.getTileByID(a.key);if(void 0!==n.proxyCachedFBO[a.key]){t.assert_1(s.texture);const i=e[a.key];t.assert_1(i);const o=this.proxyToSource[a.key];let l=0;for(const t in o){const e=o[t],n=i[t];if(!n||n.length!==e.length||e.some(((e,i)=>e!==n[i]||r[t]&&r[t].hasOwnProperty(e.key)))){l=-1;break}++l}for(const t in n.proxyCachedFBO[a.key])n.renderCache[n.proxyCachedFBO[a.key][t]].dirty=l<0||l!==Object.values(i).length}else for(let t=0;t<this._drapedRenderBatches.length;++t){const e=this._drapedRenderBatches[t];let i=n.renderCachePool.pop();void 0===i&&n.renderCache.length<50&&(i=n.renderCache.length,n.renderCache.push(this._createFBO())),void 0!==i&&(void 0===n.proxyCachedFBO[a.key]&&(n.proxyCachedFBO[a.key]={}),n.proxyCachedFBO[a.key][e.start]=i,n.renderCache[i].dirty=!0)}}this._tilesDirty={}}_setupStencil(t,e,n){if(!n||!this._sourceTilesOverlap[n.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,r=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let o;if(this.currentFBO.fb,e.isTileClipped())o=t.length,this._overlapStencilMode.test={func:r.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:r.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,e.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const i=this.painter,r=this.painter.context,o=r.gl;i._tileClippingMaskIDs={},r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const a=i.useProgram("clippingMask");for(const s of e){const e=i._tileClippingMaskIDs[s.key]=--n;a.draw(r,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,ve(s.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const i=[e.x,e.y,1,1];t.transformMat4$1(i,i,n.pixelMatrixInverse),t.scale$1(i,i,1/i[3]),i[0]/=n.worldSize,i[1]/=n.worldSize;const r=n._camera.position,o=t.mercatorZfromAltitude(1,n.center.lat),a=[r[0],r[1],r[2]/o,0],s=t.subtract([],i.slice(0,3),a);t.normalize(s,s);const l=this._exaggeration,u=this.raycast(a,s,l);return null!==u&&u?(t.scaleAndAdd(a,a,s,u),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const e=this.painter,n=e.context,i=this.proxySourceCache,r=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const e=n.gl,i=n.createFramebuffer(r,o,!0);n.activeTexture.set(e.TEXTURE0);const a=new t.Texture(n,{width:r,height:o,data:null},e.RGBA);a.bind(e.NEAREST,e.CLAMP_TO_EDGE),i.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,r,o);i.depthAttachment.set(s),this._depthFBO=i,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,r,o]),function(e,n,i,r){t.assert_1("offscreen"===e.renderPass);const o=e.context,a=o.gl;o.clear({depth:1});const s=e.useProgram("terrainDepth"),l=new t.DepthMode(a.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const e of r){const r=i.getTile(e),u=pe(e.projMatrix,0);n.setupElevationDraw(r,s),s.draw(o,a.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,u,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,i,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,n,i){if(e.getSource()instanceof F)return this._setupProxiedCoordsForImageSource(e,n,i);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],o=this.proxyCoords;for(let n=0;n<o.length;n++){const a=o[n],s=this._findTileCoveringTileID(a,e);if(s){t.assert_1(s.hasData());const n=this._createProxiedId(a,s,i[a.key]&&i[a.key][e.id]);r.push(n),this.proxyToSource[a.key][e.id]=[n]}}let a=!1;for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;const s=this._findTileCoveringTileID(o.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==o.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],n=this._createProxiedId(s.tileID,o,i[s.tileID.key]&&i[s.tileID.key][e.id]);t?t.splice(t.length-1,0,n):this.proxyToSource[s.tileID.key][e.id]=[n],r.push(n),a=!0}}this._sourceTilesOverlap[e.id]=a}_setupProxiedCoordsForImageSource(e,n,i){if(!e.getSource().loaded())return;const r=this.proxiedCoords[e.id]=[],o=this.proxyCoords,a=e.getSource(),s=new t.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-s.x),t.min.y=Math.min(t.min.y,e.y-s.y),t.max.x=Math.max(t.max.x,e.x-s.x),t.max.y=Math.max(t.max.y,e.y-s.y),t)),{min:new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=(e,n)=>{const i=e.wrap+e.canonical.x/(1<<e.canonical.z),r=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return i+o<a+l.min.x||i>a+l.max.x||r+o<s+l.min.y||r>s+l.max.y};for(let t=0;t<o.length;t++){const a=o[t];for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;if(u(a,o.tileID))continue;const s=this._createProxiedId(a,o,i[a.key]&&i[a.key][e.id]),l=this.proxyToSource[a.key][e.id];l?l.push(s):this.proxyToSource[a.key][e.id]=[s],r.push(s)}}}_createProxiedId(e,n,i){let r=this.orthoMatrix;if(i){const t=i.find((t=>t.key===n.tileID.key));if(t)return t}if(n.tileID.key!==e.key){const i=e.canonical.z-n.tileID.canonical.z;let o,a,s;r=t.create();const l=n.tileID.wrap-e.wrap<<e.overscaledZ;i>0?(o=t.EXTENT>>i,a=o*((n.tileID.canonical.x<<i)-e.canonical.x+l),s=o*((n.tileID.canonical.y<<i)-e.canonical.y)):(o=t.EXTENT<<-i,a=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+l<<-i)),s=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-i))),t.ortho(r,0,o,0,o,0,1),t.translate(r,r,[a,s,0])}return new we(n.tileID,e.key,r)}_findTileCoveringTileID(e,n){let i=n.getTile(e);if(i&&i.hasData())return i;const r=this._findCoveringTileCache[n.id],o=r[e.key];if(i=o?n.getTileByID(o):null,i&&i.hasData()||null===o)return i;t.assert_1(!o||i);let a=i?i.tileID:e,s=a.overscaledZ;const l=n.getSource().minzoom,u=[];if(!o){const r=n.getSource().maxzoom;if(e.canonical.z>=r){const i=e.canonical.z-r;n.getSource().reparseOverscaled?(s=Math.max(e.canonical.z+2,n.transform.tileZoom),a=new t.OverscaledTileID(s,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i)):0!==i&&(s=r,a=new t.OverscaledTileID(s,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i))}a.key!==e.key&&(u.push(a.key),i=n.getTile(a))}const c=t=>{u.forEach((e=>{r[e]=t})),u.length=0};for(s-=1;s>=l&&(!i||!i.hasData());s--){i&&c(i.tileID.key);const e=a.calculateScaledKey(s);if(i=n.getTileByID(e),i&&i.hasData())break;const o=r[e];if(null===o)break;void 0===o?u.push(e):(i=n.getTileByID(o),t.assert_1(i))}return c(i?i.tileID.key:null),i&&i.hasData()?i:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(t){this.renderedToTile||(this.renderedToTile=!0)}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n,i,r;const o=new t.StructArrayLayout2ui4,a=e+2;for(i=1;i<e;i++){for(n=1;n<e;n++)r=i*a+n,o.emplaceBack(r,r+1),o.emplaceBack(r,r+a),o.emplaceBack(r+1,r+a),i===e-1&&o.emplaceBack(r+a,r+a+1);o.emplaceBack(r+1,r+1+a)}return o}(129);this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function Te(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const i=t[n].split(" ");e.push(i.pop())}return e}class ke{static cacheKey(t,e,n){let i=`${t}${n?n.cacheKey:""}`;for(const t of e)i+=`/${t}`;return i}constructor(e,n,i,r,o,a){const s=e.gl;this.program=s.createProgram();const l=Te(i.staticAttributes),u=r?r.getBinderAttributes():[],c=l.concat(u),h=i.staticUniforms?Te(i.staticUniforms):[],d=r?r.getBinderUniforms():[],f=h.concat(d),p=[];for(const t of f)p.indexOf(t)<0&&p.push(t);let m=r?r.defines():[];m=m.concat(a.map((t=>`#define ${t}`)));const _=m.concat(re.fragmentSource,oe,ie.fragmentSource,i.fragmentSource).join("\n"),g=m.concat(re.vertexSource,oe,ie.vertexSource,ne.vertexSource,i.vertexSource).join("\n"),y=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(y,_),s.compileShader(y),t.assert_1(s.getShaderParameter(y,s.COMPILE_STATUS),s.getShaderInfoLog(y)),s.attachShader(this.program,y);const v=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(v,g),s.compileShader(v),t.assert_1(s.getShaderParameter(v,s.COMPILE_STATUS),s.getShaderInfoLog(v)),s.attachShader(this.program,v),this.attributes={};const x={};this.numAttributes=c.length;for(let t=0;t<this.numAttributes;t++)c[t]&&(s.bindAttribLocation(this.program,t,c[t]),this.attributes[c[t]]=t);s.linkProgram(this.program),t.assert_1(s.getProgramParameter(this.program,s.LINK_STATUS),s.getProgramInfoLog(this.program)),s.deleteShader(v),s.deleteShader(y);for(let t=0;t<p.length;t++){const e=p[t];if(e&&!x[e]){const t=s.getUniformLocation(this.program,e);t&&(x[e]=t)}}this.fixedUniforms=o(e,x),this.binderUniforms=r?r.getUniforms(e,x):[],-1!==a.indexOf("TERRAIN")&&(this.terrainUniforms=((e,n)=>({u_dem:new t.Uniform1i(e,n.u_dem),u_dem_prev:new t.Uniform1i(e,n.u_dem_prev),u_dem_unpack:new t.Uniform4f(e,n.u_dem_unpack),u_dem_tl:new t.Uniform2f(e,n.u_dem_tl),u_dem_scale:new t.Uniform1f(e,n.u_dem_scale),u_dem_tl_prev:new t.Uniform2f(e,n.u_dem_tl_prev),u_dem_scale_prev:new t.Uniform1f(e,n.u_dem_scale_prev),u_dem_size:new t.Uniform1f(e,n.u_dem_size),u_dem_lerp:new t.Uniform1f(e,n.u_dem_lerp),u_exaggeration:new t.Uniform1f(e,n.u_exaggeration),u_depth:new t.Uniform1i(e,n.u_depth),u_depth_size_inv:new t.Uniform2f(e,n.u_depth_size_inv),u_meter_to_dem:new t.Uniform1f(e,n.u_meter_to_dem),u_label_plane_matrix_inv:new t.UniformMatrix4f(e,n.u_label_plane_matrix_inv)}))(e,x)),-1!==a.indexOf("FOG")&&(this.fogUniforms=((e,n)=>({u_fog_matrix:new t.UniformMatrix4f(e,n.u_fog_matrix),u_fog_range:new t.Uniform2f(e,n.u_fog_range),u_fog_color:new t.Uniform4f(e,n.u_fog_color),u_fog_horizon_blend:new t.Uniform1f(e,n.u_fog_horizon_blend),u_fog_temporal_offset:new t.Uniform1f(e,n.u_fog_temporal_offset)}))(e,x))}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].location&&n[t].set(e[t])}}draw(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m){const _=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(o);for(const t in this.fixedUniforms)this.fixedUniforms[t].set(a[t]);f&&f.setUniforms(t,this.binderUniforms,h,{zoom:d});const g={[_.LINES]:2,[_.TRIANGLES]:3,[_.LINE_STRIP]:1}[e];for(const n of c.get()){const i=n.vaos||(n.vaos={});(i[s]||(i[s]=new le)).bind(t,this,l,f?f.getPaintVertexBuffers():[],u,n.vertexOffset,p,m),_.drawElements(e,n.primitiveLength*g,_.UNSIGNED_SHORT,n.primitiveOffset*g*2)}}}function Se(t,e,n){const i=1/k(n,1,e.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/r,a=o*(n.tileID.canonical.x+n.tileID.wrap*r),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const Ee=(e,n,i,r)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&(t.fromRotation(l,-n.transform.angle),t.transformMat3(s,s,l));const u=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+i,u_opacity:r}},Ce=(e,n,i,r,o,a,s)=>t.extend(Ee(e,n,i,r),Se(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),Le=t=>({u_matrix:t}),De=(e,n,i,r)=>t.extend(Le(e),Se(i,n,r)),Ae=(t,e)=>({u_matrix:t,u_world:e}),Pe=(e,n,i,r,o)=>t.extend(De(e,n,i,r),{u_world:o}),Ie=(e,n,i,r)=>{const o=e.transform;let a;if("map"===r.paint.get("circle-pitch-alignment")){const t=k(i,1,o.zoom);a=[t,t]}else a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:a}},ze=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Fe=(e,n,i)=>{const r=t.EXTENT/i.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/r,n.pixelsToGLUnits[1]/r]}},Re=(t,e,n=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}),Oe=(t,e,n,i)=>({u_matrix:t,u_extrude_scale:k(e,1,n),u_intensity:i}),Ye=(e,n,i,r)=>{const o=e.transform;return{u_matrix:$e(e,n,i,r),u_ratio:1/k(n,1,o.zoom),u_device_pixel_ratio:t.exported.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Ne=(e,n,i,r,o)=>t.extend(Ye(e,n,i,r),{u_image:0,u_image_height:o}),Be=(e,n,i,r,o)=>{const a=e.transform,s=Ue(n,a);return{u_matrix:$e(e,n,i,o),u_texsize:n.imageAtlasTexture.size,u_ratio:1/k(n,1,a.zoom),u_device_pixel_ratio:t.exported.devicePixelRatio,u_image:0,u_scale:[s,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},je=(e,n,i,r,o)=>{const a=Ue(n,e.transform);return t.extend(Ye(e,n,i,o),{u_texsize:n.lineAtlasTexture.size,u_scale:[a,r.fromScale,r.toScale],u_image:0,u_mix:r.t})};function Ue(t,e){return 1/k(t,1,e.tileZoom)}function $e(t,e,n,i){return t.translatePosMatrix(i||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const He=(t,e,n,i,r)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Ve(r.paint.get("raster-hue-rotate"))};var o,a};function Ve(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const qe=(t,e,n,i,r,o,a,s,l,u)=>{const c=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+i,u_texsize:u,u_texture:0}},We=(e,n,i,r,o,a,s,l,u,c,h)=>{const{cameraToCenterDistance:d,_pitch:f}=o.transform;return t.extend(qe(e,n,i,r,o,a,s,l,u,c),{u_gamma_scale:r?d*Math.cos(o.terrain?0:f):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h})},Ge=(e,n,i,r,o,a,s,l,u,c)=>t.extend(We(e,n,i,r,o,a,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1}),Ze=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),Xe=(e,n,i,r,o,a)=>t.extend(function(e,n,i,r){const o=i.imageManager.getPattern(e.from.toString()),a=i.imageManager.getPattern(e.to.toString());t.assert_1(o&&a);const{width:s,height:l}=i.imageManager.getPixelSize(),u=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/u,h=c*(r.tileID.canonical.x+r.tileID.wrap*u),d=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:n.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:n.fromScale,u_scale_b:n.toScale,u_tile_units_to_pixels:1/k(r,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(r,a,i,o),{u_matrix:e,u_opacity:n}),Ke={fillExtrusion:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale)}),collisionCircle:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_scale:new t.Uniform3f(e,n.u_scale),u_mix:new t.Uniform1f(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),background:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}),terrainRaster:fe,terrainDepth:fe,skybox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_sun_direction:new t.Uniform3f(e,n.u_sun_direction),u_cubemap:new t.Uniform1i(e,n.u_cubemap),u_opacity:new t.Uniform1f(e,n.u_opacity),u_temporal_offset:new t.Uniform1f(e,n.u_temporal_offset)}),skyboxGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_center_direction:new t.Uniform3f(e,n.u_center_direction),u_radius:new t.Uniform1f(e,n.u_radius),u_opacity:new t.Uniform1f(e,n.u_opacity),u_temporal_offset:new t.Uniform1f(e,n.u_temporal_offset)}),skyboxCapture:(e,n)=>({u_matrix_3f:new t.UniformMatrix3f(e,n.u_matrix_3f),u_sun_direction:new t.Uniform3f(e,n.u_sun_direction),u_sun_intensity:new t.Uniform1f(e,n.u_sun_intensity),u_color_tint_r:new t.Uniform4f(e,n.u_color_tint_r),u_color_tint_m:new t.Uniform4f(e,n.u_color_tint_m),u_luminance:new t.Uniform1f(e,n.u_luminance)})};let Je;function Qe(e,n,i,r,o,a,s){const l=e.context,u=l.gl,c=e.useProgram("collisionBox"),h=[];let d=0,f=0;for(let p=0;p<r.length;p++){const m=r[p],_=n.getTile(m),g=_.getBucket(i);if(!g)continue;let y=m.projMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(m.projMatrix,_,o,a));const v=s?g.textCollisionBox:g.iconCollisionBox,x=g.collisionCircleArray;if(x.length>0){const n=t.create(),i=y;t.mul(n,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(n,n,g.placementViewportMatrix),h.push({circleArray:x,circleOffset:f,transform:i,invTransform:n}),d+=x.length/4,f=d}v&&(e.terrain&&e.terrain.setupElevationDraw(_,c),c.draw(l,u.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Fe(y,e.transform,_),i.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,v.collisionVertexBuffer,v.collisionVertexBufferExt))}if(!s||!h.length)return;const p=e.useProgram("collisionCircle"),m=new t.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let _=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];m.emplace(_++,i,r,o,a,0),m.emplace(_++,i,r,o,a,1),m.emplace(_++,i,r,o,a,2),m.emplace(_++,i,r,o,a,3)}(!Je||Je.length<2*d)&&(Je=function(e){const n=2*e,i=new t.StructArrayLayout3ui6;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(d));const g=l.createIndexBuffer(Je,!0),y=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const n of h){const r=(v=n.transform,x=n.invTransform,b=e.transform,{u_matrix:v,u_inv_matrix:x,u_camera_to_center_distance:b.cameraToCenterDistance,u_viewport_size:[b.width,b.height]});p.draw(l,u.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,r,i.id,y,g,t.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,e.transform.zoom,null,null,null)}var v,x,b;y.destroy(),g.destroy()}const tn=t.identity(new Float32Array(16));function en(e,n,i,r,o,a){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),u=-(s-.5)*n,c=-(l-.5)*i,h=t.evaluateVariableOffset(e,r);return new t.pointGeometry((u/o+h[0])*a,(c/o+h[1])*a)}function nn(e,n,i,r,o,a,s,l,u,c,h,d){const f=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,_={};p.clear();for(let m=0;m<f.length;m++){const g=f.get(m),y=e.allowVerticalPlacement&&!g.placedOrientation,v=g.hidden||!g.crossTileID||y?null:r[g.crossTileID];if(v){const r=new t.pointGeometry(g.anchorX,g.anchorY),f=d(r),m=lt(r,i?l:s,f),y=ut(a.cameraToCenterDistance,m.signedDistanceFromCamera);let x=o.evaluateSizeForFeature(e.textSizeData,c,g)*y/t.ONE_EM;i&&(x*=e.tilePixelRatio/u);const{width:b,height:w,anchor:M,textOffset:T,textScale:k}=v,S=en(M,b,w,T,k,x),E=i?lt(r.add(S),s,f).point:m.point.add(n?S.rotate(-a.angle):S),C=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<g.numGlyphs;e++)t.addDynamicAttributes(p,E,C);h&&g.associatedIconIndex>=0&&(_[g.associatedIconIndex]={shiftedAnchor:E,angle:C})}else yt(g.numGlyphs,p)}if(h){m.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const i=n.get(e);if(i.hidden)yt(i.numGlyphs,m);else{const n=_[e];if(n)for(let e=0;e<i.numGlyphs;e++)t.addDynamicAttributes(m,n.shiftedAnchor,n.angle);else yt(i.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function rn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function on(e,n,i,r,o,a,s,l,u,c,h,d){const f=e.context,p=f.gl,m=e.transform,_="map"===l,g="map"===u,y=_&&"point"!==i.layout.get("symbol-placement"),v=_&&!g&&!y,x=void 0!==i.layout.get("symbol-sort-key").constantOr(1);let b=!1;const w=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),M=i.layout.get("text-variable-anchor"),T=[],S=e.terrain&&g?["PITCH_WITH_MAP_TERRAIN"]:null;for(const l of r){const r=n.getTile(l),u=r.getBucket(i);if(!u)continue;const h=o?u.text:u.icon;if(!h||!h.segments.get().length)continue;const d=h.programConfigurations.get(i.id),f=o||u.sdfIcons,w=o?u.textSizeData:u.iconSizeData,E=g||0!==m.pitch,C=e.useProgram(rn(f,o,u),d,S),L=t.evaluateSizeForZoom(w,m.zoom);let D,A,P,I,z=[0,0],F=null;if(o){if(A=r.glyphAtlasTexture,P=p.LINEAR,D=r.glyphAtlasTexture.size,u.iconsInText){z=r.imageAtlasTexture.size,F=r.imageAtlasTexture;const t="composite"===w.kind||"camera"===w.kind;I=E||e.options.rotating||e.options.zooming||t?p.LINEAR:p.NEAREST}}else{const t=1!==i.layout.get("icon-size").constantOr(0)||u.iconsNeedLinear;A=r.imageAtlasTexture,P=f||e.options.rotating||e.options.zooming||t||E?p.LINEAR:p.NEAREST,D=r.imageAtlasTexture.size}const R=k(r,1,e.transform.zoom),O=at(l.projMatrix,g,_,e.transform,R),Y=e.terrain&&g&&y?t.invert(new Float32Array(16),O):tn,N=st(l.projMatrix,g,_,e.transform,R),B=M&&u.hasTextData(),j="none"!==i.layout.get("icon-text-fit")&&B&&u.hasIconData();if(y){const t=m.elevation,n=t?e=>t.getAtTileOffset(l,e.x,e.y):null;ht(u,l.projMatrix,e,o,O,N,g,c,n)}const U=e.translatePosMatrix(l.projMatrix,r,a,s),$=y||o&&M||j?tn:O,H=e.translatePosMatrix(N,r,a,s,!0),V=f&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let q;q=f?u.iconsInText?Ge(w.kind,L,v,g,e,U,$,H,D,z):We(w.kind,L,v,g,e,U,$,H,o,D,!0):qe(w.kind,L,v,g,e,U,$,H,o,D);const W={program:C,buffers:h,uniformValues:q,atlasTexture:A,atlasTextureIcon:F,atlasInterpolation:P,atlasInterpolationIcon:I,isSDF:f,hasHalo:V,tile:r,labelPlaneMatrixInv:Y};if(x&&u.canOverlap){b=!0;const e=h.segments.get();for(const n of e)T.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:W})}else T.push({segments:h.segments,sortKey:0,state:W})}b&&T.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of T){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),f.activeTexture.set(p.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,p.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(p.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,an(n.buffers,t.segments,i,e,n.program,w,h,d,r)),r.u_is_halo=0}an(n.buffers,t.segments,i,e,n.program,w,h,d,n.uniformValues)}}function an(e,n,i,r,o,a,s,l,u){const c=r.context,h=c.gl;o.draw(c,h.TRIANGLES,a,s,l,t.CullFaceMode.disabled,u,i.id,e.layoutVertexBuffer,e.indexBuffer,n,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function sn(e,n,i,r,o,a,s){const l=e.context.gl,u=i.paint.get("fill-pattern"),c=u&&u.constantOr(1),h=i.getCrossfadeParameters();let d,f,p,m,_;s?(f=c&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(f=c?"fillPattern":"fill",d=l.TRIANGLES);for(const g of r){const r=n.getTile(g);if(c&&!r.patternsLoaded())continue;const y=r.getBucket(i);if(!y)continue;e.prepareDrawTile(g);const v=y.programConfigurations.get(i.id),x=e.useProgram(f,v);c&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));const b=u.constantOr(null);if(b&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[b.to.toString()],n=t.patternPositions[b.from.toString()];e&&n&&v.setConstantPatternPositions(e,n)}const w=e.translatePosMatrix(g.projMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(s){m=y.indexBuffer2,_=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];p="fillOutlinePattern"===f&&c?Pe(w,e,h,r,t):Ae(w,t)}else m=y.indexBuffer,_=y.segments,p=c?De(w,e,h,r):Le(w);e.prepareDrawProgram(e.context,x,g.toUnwrapped()),x.draw(e.context,d,o,e.stencilModeForClipping(g),a,t.CullFaceMode.disabled,p,i.id,y.layoutVertexBuffer,m,_,i.paint,e.transform.zoom,v)}}function ln(e,n,i,r,o,a,s){const l=e.context,u=l.gl,c=i.paint.get("fill-extrusion-pattern"),h=c.constantOr(1),d=i.getCrossfadeParameters(),f=i.paint.get("fill-extrusion-opacity");for(const p of r){const r=n.getTile(p),m=r.getBucket(i);if(!m)continue;const _=m.programConfigurations.get(i.id),g=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",_);if(e.terrain){const t=e.terrain;if(!m.enableTerrain)continue;if(t.setupElevationDraw(r,g,{useMeterToDem:!0}),un(l,n,p,m,i,t),!m.centroidVertexBuffer){const t=g.attributes.a_centroid_pos;void 0!==t&&u.vertexAttrib2f(t,0,0)}}h&&(e.context.activeTexture.set(u.TEXTURE0),r.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),_.updatePaintBuffers(d));const y=c.constantOr(null);if(y&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[y.to.toString()],n=t.patternPositions[y.from.toString()];e&&n&&_.setConstantPatternPositions(e,n)}const v=e.translatePosMatrix(p.projMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),x=i.paint.get("fill-extrusion-vertical-gradient"),b=h?Ce(v,e,x,f,p,d,r):Ee(v,e,x,f);e.prepareDrawProgram(l,g,p.toUnwrapped()),g.draw(l,l.gl.TRIANGLES,o,a,s,t.CullFaceMode.backCCW,b,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,e.transform.zoom,_,e.terrain?m.centroidVertexBuffer:null)}}function un(e,n,i,r,o,a){const s=[e=>{let n=e.canonical.x-1,i=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,i--),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,i=e.wrap;return n===1<<e.canonical.z&&(n=0,i++),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=n.getSource().maxzoom,i=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)};let r,a,s;return(t.overscaledZ===t.canonical.z||t.overscaledZ>=e)&&(r=i(t.key)),t.overscaledZ>=e&&(a=i(t.calculateScaledKey(t.overscaledZ+1))),t.overscaledZ>e&&(s=i(t.calculateScaledKey(t.overscaledZ-1))),r||a||s},u=[0,0,0],c=(e,n)=>(u[0]=Math.min(e.min.y,n.min.y),u[1]=Math.max(e.max.y,n.max.y),u[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,u),h=(e,n)=>(u[0]=Math.min(e.min.x,n.min.x),u[1]=Math.max(e.max.x,n.max.x),u[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,u),d=[(t,e)=>c(t,e),(t,e)=>c(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],f=new t.pointGeometry(0,0);let p,m,_;const g=(e,n,r,o,s)=>{const l=[[o?r:e,o?e:r,0],[o?r:n,o?n:r,0]],u=s<0?t.EXTENT+s:s,c=[o?u:(e+n)/2,o?(e+n)/2:u,0];return 0===r&&s<0||0!==r&&s>0?a.getForTilePoints(_,[c],!0,m):l.push(c),a.getForTilePoints(i,l,!0,p),Math.max(l[0][2],l[1][2],c[2])/a.exaggeration()};for(let e=0;e<4;e++){const n=r.borders[e];if(0===n.length&&(r.borderDone[e]=!0),r.borderDone[e])continue;const o=_=s[e](i),u=l(o);if(!u||!u.enableTerrain)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!p){const t=a.findDEMTileFor(i);if(!t||!t.dem)return;p=t}const c=(e<2?1:5)-e,h=u.borders[c];let y=0;for(let i=0;i<n.length;i++){const o=r.featuresOnBorder[n[i]],a=o.borders[e];let s;for(;y<h.length&&(s=u.featuresOnBorder[h[y]],!(s.borders[c][1]>a[0]+3));)u.borderDone[c]||u.encodeCentroid(void 0,s,!1),y++;if(s&&y<h.length){const n=y;let i=0;for(;!(s.borders[c][0]>a[1]-3)&&(i++,++y!==h.length);)s=u.featuresOnBorder[h[y]];if(s=u.featuresOnBorder[h[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==i){1!==i&&(y=n),r.encodeCentroid(void 0,o,!1),u.borderDone[c]||u.encodeCentroid(void 0,s,!1);continue}const l=d[e](o,s),p=e%2?t.EXTENT-1:0;f.x=g(l[0],Math.min(t.EXTENT-1,l[1]),p,e<2,l[2]),f.y=0,t.assert_1(void 0!==o.vertexArrayOffset&&o.vertexArrayOffset<r.layoutVertexArray.length),r.encodeCentroid(f,o,!1),t.assert_1(void 0!==s.vertexArrayOffset&&s.vertexArrayOffset<u.layoutVertexArray.length),u.borderDone[c]||u.encodeCentroid(f,s,!1)}else t.assert_1(o.intersectsCount()>1||s&&s.intersectsCount()>1),r.encodeCentroid(void 0,o,!1)}r.borderDone[e]=r.needsCentroidUpdate=!0,u.borderDone[c]||(u.borderDone[c]=u.needsCentroidUpdate=!0)}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(e)}const cn=new t.Color(1,0,0,1),hn=new t.Color(0,1,0,1),dn=new t.Color(0,0,1,1),fn=new t.Color(1,0,1,1),pn=new t.Color(0,1,1,1);function mn(t){const e=t.transform.padding;_n(t,t.transform.height-(e.top||0),3,cn),_n(t,e.bottom||0,3,hn),gn(t,e.left||0,3,dn),gn(t,t.transform.width-(e.right||0),3,fn);const n=t.transform.centerPoint;!function(t,e,n,i){const r=20,o=2;yn(t,e-o/2,n-r/2,o,r,i),yn(t,e-r/2,n-o/2,r,o,i)}(t,n.x,t.transform.height-n.y,pn)}function _n(t,e,n,i){yn(t,0,e+n/2,t.transform.width,n,i)}function gn(t,e,n,i){yn(t,e-n/2,0,n,t.transform.height,i)}function yn(e,n,i,r,o,a){const s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function vn(e,n,i){const r=e.context,o=r.gl,a=i.projMatrix,s=e.useProgram("debug"),l=n.getTileByID(i.key);e.terrain&&e.terrain.setupElevationDraw(l,s);const u=t.DepthMode.disabled,c=t.StencilMode.disabled,h=e.colorModeForRenderPass(),d="$debug";if(r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),l.queryGeometryDebugViz&&l.queryGeometryDebugViz.vertices.length>0){l.queryGeometryDebugViz.lazyUpload(r);const e=l.queryGeometryDebugViz.vertexBuffer,n=l.queryGeometryDebugViz.indexBuffer,i=l.queryGeometryDebugViz.segments;null!=e&&null!=n&&null!=i&&s.draw(r,o.LINE_STRIP,u,c,h,t.CullFaceMode.disabled,Re(a,l.queryGeometryDebugViz.color),d,e,n,i)}if(l.queryBoundsDebugViz&&l.queryBoundsDebugViz.vertices.length>0){l.queryBoundsDebugViz.lazyUpload(r);const e=l.queryBoundsDebugViz.vertexBuffer,n=l.queryBoundsDebugViz.indexBuffer,i=l.queryBoundsDebugViz.segments;null!=e&&null!=n&&null!=i&&s.draw(r,o.LINE_STRIP,u,c,h,t.CullFaceMode.disabled,Re(a,l.queryBoundsDebugViz.color),d,e,n,i)}}function xn(e,n,i){const r=e.context,o=r.gl,a=i.projMatrix,s=e.useProgram("debug"),l=n.getTileByID(i.key);e.terrain&&e.terrain.setupElevationDraw(l,s);const u=t.DepthMode.disabled,c=t.StencilMode.disabled,h=e.colorModeForRenderPass(),d="$debug";r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(r,o.LINE_STRIP,u,c,h,t.CullFaceMode.disabled,Re(a,t.Color.red),d,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);const f=l.latestRawTileData,p=f&&f.byteLength||0,m=Math.floor(p/1024),_=n.getTile(i).tileSize,g=512/Math.min(_,512)*(i.overscaledZ/e.transform.zoom)*.5;let y=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(y+=` => ${i.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,i=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,`${y} ${m}kb`),s.draw(r,o.TRIANGLES,u,c,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Re(a,t.Color.transparent,g),d,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const bn=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:wn,size:Mn,alignment:Tn}=bn;function kn(t,e,n,i){t.emplaceBack(e,n,i)}class Sn{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,kn(this.vertexArray,-1,-1,1),kn(this.vertexArray,1,-1,1),kn(this.vertexArray,-1,1,1),kn(this.vertexArray,1,1,1),kn(this.vertexArray,-1,-1,-1),kn(this.vertexArray,1,-1,-1),kn(this.vertexArray,-1,1,-1),kn(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,wn),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function En(e,n,i,r,o,a){const s=e.gl,l=n.paint.get("sky-atmosphere-color"),u=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,n,i,r)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(t.fromMat4([],r),o,c,l,u),d=s.TEXTURE_CUBE_MAP_POSITIVE_X+a;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,d,n.skyboxTexture,0),i.draw(e,s.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Cn={symbol:function(e,n,i,r,o){if("translucent"!==e.renderPass)return;const a=t.StencilMode.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,r,o,a,s){const l=n.transform,u="map"===o,c="map"===a;for(const o of e){const e=r.getTile(o),a=e.getBucket(i);if(!a||!a.text||!a.text.segments.get().length)continue;const h=a.textSizeData,d=t.evaluateSizeForZoom(h,l.zoom),f=k(e,1,n.transform.zoom),p=at(o.projMatrix,c,u,n.transform,f),m="none"!==i.layout.get("icon-text-fit")&&a.hasIconData();if(d){const n=Math.pow(2,l.zoom-e.tileID.overscaledZ),i=l.elevation,r=i?t=>i.getAtTileOffset(o,t.x,t.y):t=>0;nn(a,u,c,s,t.symbolSize,l,p,o.projMatrix,n,d,m,r)}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&on(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&on(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Qe(e,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),Qe(e,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const u=e.context,c=u.gl,h=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,f=e.colorModeForRenderPass(),p=[];for(let o=0;o<r.length;o++){const a=r[o],s=n.getTile(a),u=s.getBucket(i);if(!u)continue;const c=u.programConfigurations.get(i.id),h=ze(i),d={programConfiguration:c,program:e.useProgram("circle",c,h),layoutVertexBuffer:u.layoutVertexBuffer,indexBuffer:u.indexBuffer,uniformValues:Ie(e,a,s,i),tile:s};if(l){const e=u.segments.get();for(const n of e)p.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:d})}else p.push({segments:u.segments,sortKey:0,state:d})}l&&p.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of p){const{programConfiguration:r,program:o,layoutVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:p}=n.state,m=n.segments;e.terrain&&e.terrain.setupElevationDraw(p,o,{useDepthForOcclusion:!0}),e.prepareDrawProgram(u,o,p.tileID.toUnwrapped()),o.draw(u,c.TRIANGLES,h,d,f,t.CullFaceMode.disabled,l,i.id,a,s,m,i.paint,e.transform.zoom,r)}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=t.StencilMode.disabled,l=new t.ColorMode([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(t,e,n){const i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{const o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,i){const r=t.gl,o=t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,o,null),i.colorAttachment.set(n)}(t,e,o,r)}})(o,e,i),o.clear({color:t.Color.transparent});for(let u=0;u<r.length;u++){const c=r[u];if(n.hasRenderableParent(c))continue;const h=n.getTile(c),d=h.getBucket(i);if(!d)continue;const f=d.programConfigurations.get(i.id),p=e.useProgram("heatmap",f),{zoom:m}=e.transform;e.terrain&&e.terrain.setupElevationDraw(h,p),e.prepareDrawProgram(o,p,c.toUnwrapped()),p.draw(o,a.TRIANGLES,t.DepthMode.disabled,s,l,t.CullFaceMode.disabled,Oe(c.projMatrix,h,m,i.paint.get("heatmap-intensity")),i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,f)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const i=e.context,r=i.gl,o=n.heatmapFbo;if(!o)return;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((e,n,i,r)=>{const o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);const a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:i,u_color_ramp:r,u_opacity:n.paint.get("heatmap-opacity")}})(e,n,0,1),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,i))},line:function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),u=i.paint.get("line-dasharray"),c=u.constantOr(1),h=i.layout.get("line-cap"),d=i.paint.get("line-pattern"),f=d.constantOr(1),p=i.paint.get("line-gradient"),m=i.getCrossfadeParameters(),_=f?"linePattern":c?"lineSDF":p?"lineGradient":"line",g=e.context,y=g.gl;for(const o of r){const r=n.getTile(o);if(f&&!r.patternsLoaded())continue;const a=r.getBucket(i);if(!a)continue;e.prepareDrawTile(o);const v=a.programConfigurations.get(i.id),x=e.useProgram(_,v),b=d.constantOr(null);if(b&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[b.to.toString()],n=t.patternPositions[b.from.toString()];e&&n&&v.setConstantPatternPositions(e,n)}const w=u.constantOr(null),M=h.constantOr(null);if(!f&&w&&M&&r.lineAtlas){const t=r.lineAtlas,e=t.getDash(w.to,M),n=t.getDash(w.from,M);e&&n&&v.setConstantPatternPositions(e,n)}const T=e.terrain?o.projMatrix:null,k=f?Be(e,r,i,m,T):c?je(e,r,i,m,T):p?Ne(e,r,i,T,a.lineClipsArray.length):Ye(e,r,i,T);if(f)g.activeTexture.set(y.TEXTURE0),r.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),v.updatePaintBuffers(m);else if(c)g.activeTexture.set(y.TEXTURE0),r.lineAtlasTexture.bind(y.LINEAR,y.REPEAT),v.updatePaintBuffers(m);else if(p){const r=a.gradients[i.id];let s=r.texture;if(i.gradientVersion!==r.version){let l=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=o.canonical.z===i?Math.ceil(1<<e.transform.maxZoom-o.canonical.z):1,s=a.maxLineLength/t.EXTENT*1024*r;l=t.clamp(t.nextPowerOfTwo(s),256,g.maxTextureSize)}r.gradient=t.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:r.gradient||void 0,clips:a.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new t.Texture(g,r.gradient,y.RGBA),r.version=i.gradientVersion,s=r.texture}g.activeTexture.set(y.TEXTURE0),s.bind(i.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}e.prepareDrawProgram(g,x,o.toUnwrapped()),x.draw(g,y.TRIANGLES,s,e.stencilModeForClipping(o),l,t.CullFaceMode.disabled,k,i.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,i.paint,e.transform.zoom,v,a.layoutVertexBuffer2)}},fill:function(e,n,i,r){const o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);sn(e,n,i,r,o,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const o=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);sn(e,n,i,r,o,s,!0)}},"fill-extrusion":function(e,n,i,r){const o=i.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const a=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||i.paint.get("fill-extrusion-pattern").constantOr(1))ln(e,n,i,r,a,t.StencilMode.disabled,t.ColorMode.disabled),ln(e,n,i,r,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const o=e.colorModeForRenderPass();ln(e,n,i,r,a,t.StencilMode.disabled,o)}}},hillshade:function(e,n,i,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),s=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[u,c]="translucent"!==e.renderPass||l?[{},r]:e.stencilConfigForOverlap(r);for(const r of c){const o=n.getTile(r);if(o.needsHillshadePrepare&&"offscreen"===e.renderPass)de(e,o,i,a,t.StencilMode.disabled,s);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(r):u[r.overscaledZ];ce(e,r,o,i,a,t,s)}}o.viewport.set([0,0,e.width,e.height])},raster:function(e,n,i,r,o,a){if("translucent"!==e.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const s=e.context,l=s.gl,u=n.getSource(),c=e.useProgram("raster"),h=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,[f,p]=u instanceof F||d?[{},r]:e.stencilConfigForOverlap(r),m=p[p.length-1].overscaledZ,_=!e.options.moving;for(const r of p){const o=d?t.DepthMode.disabled:e.depthModeForSublayer(r.overscaledZ-m,1===i.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),p=r.toUnwrapped(),g=n.getTile(r);if(d&&(!g||!g.hasData()))continue;const y=d?r.projMatrix:e.transform.calculateProjMatrix(p,_),v=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(r):f[r.overscaledZ],x=a?0:i.paint.get("raster-fade-duration");g.registerFadeDuration(x);const b=n.findLoadedParent(r,0),w=xe(g,b,n,e.transform,x);let M,T;e.terrain&&e.terrain.prepareDrawTile(r);const k="nearest"===i.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),g.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),b?(b.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),M=Math.pow(2,b.tileID.overscaledZ-g.tileID.overscaledZ),T=[g.tileID.canonical.x*M%1,g.tileID.canonical.y*M%1]):g.texture.bind(k,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const S=He(y,T||[0,0],M||1,w,i);e.prepareDrawProgram(s,c,p),u instanceof F?c.draw(s,l.TRIANGLES,o,t.StencilMode.disabled,h,t.CullFaceMode.disabled,S,i.id,u.boundsBuffer,e.quadTriangleIndexBuffer,u.boundsSegments):c.draw(s,l.TRIANGLES,o,v,h,t.CullFaceMode.disabled,S,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,n,i,r){const o=i.paint.get("background-color"),a=i.paint.get("background-opacity");if(0===a)return;const s=e.context,l=s.gl,u=e.transform,c=u.tileSize,h=i.paint.get("background-pattern");if(e.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const f=t.StencilMode.disabled,p=e.depthModeForSublayer(0,"opaque"===d?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),_=e.useProgram(h?"backgroundPattern":"background"),g=r||u.coveringTiles({tileSize:c});h&&(s.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const y=i.getCrossfadeParameters();for(const n of g){const u=n.toUnwrapped(),d=r?n.projMatrix:e.transform.calculateProjMatrix(u);e.prepareDrawTile(n);const g=h?Xe(d,a,e,h,{tileID:n,tileSize:c},y):Ze(d,a,o);e.prepareDrawProgram(s,_,u),_.draw(s,l.TRIANGLES,p,f,m,t.CullFaceMode.disabled,g,i.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},sky:function(e,n,i){const r=i.paint.get("sky-opacity");if(0===r)return;const o=e.context,a=i.paint.get("sky-type"),s=new t.DepthMode(o.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),l=e.frameCounter/1e3%1;"atmosphere"===a?"offscreen"===e.renderPass?i.needsSkyboxCapture(e)&&(function(e,n,i,r){const o=e.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(i,r,!1),n.skyboxGeometry=new Sn(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let t=0;t<6;++t){const e=a.TEXTURE_CUBE_MAP_POSITIVE_X+t;a.texImage2D(e,0,a.RGBA,i,r,0,a.RGBA,a.UNSIGNED_BYTE,null)}}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,i,r]);const l=n.getCenter(e,!0),u=e.useProgram("skyboxCapture"),c=new Float64Array(16);t.identity(c),t.rotateY(c,c,.5*-Math.PI),En(o,n,u,c,l,0),t.identity(c),t.rotateY(c,c,.5*Math.PI),En(o,n,u,c,l,1),t.identity(c),t.rotateX(c,c,.5*-Math.PI),En(o,n,u,c,l,2),t.identity(c),t.rotateX(c,c,.5*Math.PI),En(o,n,u,c,l,3),t.identity(c),En(o,n,u,c,l,4),t.identity(c),t.rotateY(c,c,Math.PI),En(o,n,u,c,l,5),o.viewport.set([0,0,e.width,e.height])}(e,i,32,32),i.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,i,r,o){const a=e.context,s=a.gl,l=e.transform,u=e.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const c=((t,e,n,i,r)=>({u_matrix:t,u_sun_direction:e,u_cubemap:n,u_opacity:i,u_temporal_offset:r}))(l.skyboxMatrix,n.getCenter(e,!1),0,r,o);e.prepareDrawProgram(a,u),u.draw(a,s.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,s,r,l):"gradient"===a?"sky"===e.renderPass&&function(e,n,i,r,o){const a=e.context,s=a.gl,l=e.transform,u=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Sn(a)),a.activeTexture.set(s.TEXTURE0);let c=n.colorRampTexture;c||(c=n.colorRampTexture=new t.Texture(a,n.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((e,n,i,r,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(i),u_opacity:r,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),r,o);e.prepareDrawProgram(a,u),u.draw(a,s.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,s,r,l):t.assert_1(!1,`${a} is unsupported sky-type`)},debug:function(t,e,n){for(let i=0;i<n.length;i++)xn(t,e,n[i])},custom:function(e,n,i){const r=e.context,o=i.implementation;if("offscreen"===e.renderPass){const t=o.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(o,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(t.StencilMode.disabled);const n="3d"===o.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);r.setDepthMode(n),o.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}};class Ln{constructor(e,n){this.context=new t.Context(e),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wt,this.gpuTimers={},this.frameCounter=0}updateTerrain(t,e){const n=!!t&&!!t.terrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Me(this,t));const i=this._terrain;this.transform.elevation=n?i:null,i.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,i]=e.getFovAdjustedRange(this.transform._fov);if(n>i)return void(this.transform.fogCullDistSq=null);const r=n+.78*(i-n);this.transform.fogCullDistSq=r*r}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,z.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA),this.identityMat=t.create();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now())}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const i=t.create();t.ortho(i,0,this.width,this.height,0,0,1),t.scale(i,i,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,ve(i),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,n,i){if(!(n&&this.currentStencilSource!==n.id&&e.isTileClipped()&&i&&i.length))return;this.currentStencilSource=n.id;const r=this.context,o=r.gl;this.nextStencilID+i.length>256&&this.clearStencil(),r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of i){const n=this._tileClippingMaskIDs[e.key]=this.nextStencilID++;a.draw(r,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},n,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,ve(e.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,i=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=i[i.length-1].overscaledZ,o=i[0].overscaledZ-r+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let i=0;i<o;i++)e[i+r]=new t.StencilMode({func:n.GEQUAL,mask:255},i+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[e,i]}return[{[r]:t.StencilMode.disabled},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,i){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(i||this.context.gl.LEQUAL,n,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const i=this.style.order,r=this.style._sourceCaches;for(const t in r){const e=r[t];e.used&&e.prepare(this.context)}const o={},a={},s={};for(const t in r){const e=r[t];o[t]=e.getVisibleCoordinates(),a[t]=o[t].slice().reverse(),s[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++){const e=i[t];if(this.style._layers[e].is3D()){this.opaquePassCutoff=t;break}}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of i){const n=this.style._layers[t],i=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const r=i?a[i.id]:void 0;("custom"===n.type||n.isSky()||r&&r.length)&&this.renderLayer(this,i,n,r)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let l=t.Color.transparent;if(this.style.fog&&(l=this.style.fog.properties.get("color")),this.context.clear({color:n.showOverdrawInspector?t.Color.black:l,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const r=n?a[n.id]:void 0;this._renderTileClippingMasks(t,n,r),this.renderLayer(this,n,t,r)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(!t.isSky())continue;const r=n?a[n.id]:void 0;this.renderLayer(this,n,t,r)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){const n=this.style._layers[i[this.currentLayer]],r=e._getLayerSourceCache(n);if(n.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(n)){if(n.isHidden(this.transform.zoom)){++this.currentLayer;continue}const e=this.terrain,i=this.currentLayer;this.currentLayer=e.renderBatch(this.currentLayer),t.assert_1(this.currentLayer>i);continue}const l=r?("symbol"===n.type?s:a)[r.id]:void 0;this._renderTileClippingMasks(n,r,r?o[r.id]:void 0),this.renderLayer(this,r,n,l),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let n=null;t.values(this.style._layers).forEach((t=>{const i=e._getLayerSourceCache(t);i&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<i.getSource().maxzoom)&&(n=i)})),n&&(this.options.showTileBoundaries&&Cn.debug(this,n,n.getVisibleCoordinates()),t.Debug.run((()=>{this.options.showQueryGeometry&&n&&function(t,e,n){for(let i=0;i<n.length;i++)vn(t,e,n[i])}(this,n,n.getVisibleCoordinates())})))}this.options.showPadding&&mn(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%t.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),Cn[n.type](t,e,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const n in t){const i=t[n],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),e[n]=o}return e}translatePosMatrix(e,n,i,r,o){if(!i[0]&&!i[1])return e;const a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);i=[i[0]*e-i[1]*t,i[0]*t+i[1]*e]}const s=[o?i[0]:k(n,i[0],this.transform.zoom),o?i[1]:k(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}currentGlobalDefines(){const t=this.terrain&&!this.terrain.renderingToTexture,e=this.terrain&&this.terrain.renderingToTexture,n=this.style&&this.style.fog,i=[];return t&&i.push("TERRAIN"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&i.push("FOG"),e&&i.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&i.push("OVERDRAW_INSPECTOR"),i}useProgram(t,e,n){this.cache=this.cache||{};const i=n||[],r=this.currentGlobalDefines().concat(i),o=ke.cacheKey(t,r,e);return this.cache[o]||(this.cache[o]=new ke(this.context,t,ae[t],e,Ke[t],r)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){if(null==this.debugOverlayCanvas){this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;const e=this.context.gl;this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,e.RGBA)}}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(t){this.terrain&&this.terrain.prepareDrawTile(t)}prepareDrawProgram(t,e,n){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const r=i.getOpacity(this.transform.pitch);0!==r&&e.setFogUniformValues(t,((t,e,n,i)=>{const r=e.properties.get("color"),o=t.frameCounter/1e3%1,a=[r.r/r.a,r.g/r.a,r.b/r.a,i];return{u_fog_matrix:n?t.transform.calculateFogTileMatrix(n):t.identityMat,u_fog_range:e.getFovAdjustedRange(t.transform._fov),u_fog_color:a,u_fog_horizon_blend:e.properties.get("horizon-blend"),u_fog_temporal_offset:o}})(this,i,n,r))}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}}class Dn{constructor(t=0,e=0,n=0,i=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i}interpolate(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,i)),this}getCenter(e,n){const i=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(i,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Dn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function An(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function Pn(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]}function In(e,n){const i=An(e,3);t.fromQuat(e,n),Pn(e,3,i)}function zn(t,e){Pn(t,3,[e[0],e[1],e[2],1])}function Fn(e,n){const i=t.identity$1([]);return t.rotateZ$1(i,i,-n),t.rotateX$1(i,i,-e),i}function Rn(e,n){const i=[e[0],e[1],0],r=[n[0],n[1],0];if(t.length(i)>=1e-15){const e=t.normalize([],i);t.scale$2(r,e,t.dot(r,e)),n[0]=r[0],n[1]=r[1]}const o=t.cross([],n,e);if(t.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Fn(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),a)}class On{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){this._position=this._renderWorldCopies?function(e){if(!e)return;const n=Array.isArray(e)?new t.MercatorCoordinate(e[0],e[1],e[2]):e;return n.x=t.wrap(n.x,0,1),n}(e):e}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const i=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,r=this.position,o=t.MercatorCoordinate.fromLngLat(e,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Rn(a,n)}setPitchBearing(e,n){this.orientation=Fn(t.degToRad(e),t.degToRad(-n))}}class Yn{constructor(e,n){this._transform=t.identity([]),this._orientation=t.identity$1([]),n&&(this._orientation=n,In(this._transform,this._orientation)),e&&zn(this._transform,e)}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const t=An(this._transform,3);return[t[0],t[1],t[2]]}set position(t){zn(this._transform,t)}get orientation(){return this._orientation}set orientation(t){this._orientation=t,In(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Fn(t,e),In(this._transform,this._orientation)}forward(){const t=An(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=An(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=An(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(e,n){const i=new Float64Array(16);return t.invert(i,this.getWorldToCamera(e,n)),i}getWorldToCameraPosition(e,n,i){const r=this.position;t.scale$2(r,r,-e);const o=new Float64Array(16);return t.fromScaling(o,[i,i,i]),t.translate(o,o,r),o[10]*=n,o}getWorldToCamera(e,n){const i=new Float64Array(16),r=new Float64Array(4),o=this.position;return t.conjugate(r,this._orientation),t.scale$2(o,o,-e),t.fromQuat(i,r),t.translate(i,i,o),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=n,i[9]*=n,i[10]*=n,i[11]*=n,i}getCameraToClipPerspective(e,n,i,r){const o=new Float64Array(16);return t.perspective(o,e,n,i,r),o}getDistanceToElevation(e){const n=0===e?0:t.mercatorZfromAltitude(e,this.position[1]),i=this.forward();return(n-this.position[2])/i[2]}clone(){return new Yn([...this.position],[...this.orientation])}}class Nn{constructor(e,n,i,r,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Dn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new Yn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const t=new Nn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,t?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(t){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),t&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const e=this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}_updateCameraOnTerrain(){const e=this.cameraToCenterDistance/this.worldSize,n=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(n+e)}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],i=this.horizonLineFromTop();let r=0,o=0;for(let a=0;a<n.length;a++){const s=new t.pointGeometry(n[a][0]*this.width,i+n[a][1]*(this.height-i)),l=e.pointCoordinate(s);if(!l)continue;const u=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*u,o+=u}return 0===o?NaN:r/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const e=this._cameraZoom,n=this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(this.center)),i=t.mercatorZfromAltitude(n,this.center.lat),r=this._mercatorZfromZoom(e),o=this._mercatorZfromZoom(this._maxZoom),a=Math.max(r-i,o);this._setZoom(this._zoomFromMercatorZ(a))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let i;i=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const r=t.length(t.sub([],this._camera.position,i));return t.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const i=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(i,this._camera.position)||(this._setCameraPosition(i),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new On;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this._renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),i=t.transformQuat([],[0,-1,0],e);if(i[2]<0)return!1;const r=Rn(n,i);return!!r&&(this._camera.orientation=r,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,i=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;e[2]=t.clamp(e[2],r/i,r/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const i=this.pointCoordinate(new t.pointGeometry(0,0)),r=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),l=Math.floor(Math.max(i.x,r.x,o.x,a.x)),u=1;for(let i=s-u;i<=l+u;i++)0!==i&&n.push(new t.UnwrappedTileID(i,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const i=n,r=this.elevation&&!e.isTerrainDEM;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const o=t.MercatorCoordinate.fromLngLat(this.center),a=1<<n,s=[a*o.x,a*o.y,0],l=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=this.pointCoordinate(this.getCameraPoint()),c=a*t.mercatorZfromAltitude(1,this.center.lat),h=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),d=[a*u.x,a*u.y,h],f=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),p=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?n:0,m=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_=e.isTerrainDEM?-m:this._elevation?this._elevation.getMinElevationBelowMSL():0,g=e=>{const n=m,i=_;return{aabb:new t.Aabb([e*a,0,i],[(e+1)*a,a,n]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},y=[],v=[],x=n,b=e.reparseOverscaled?i:n,w=e=>{if(t.assert_1(this._elevation),!this._elevation||!e.tileID)return;const n=this._elevation.getMinMaxForTile(e.tileID),i=e.aabb;n?(i.min[2]=n.min,i.max[2]=n.max,i.center[2]=(i.min[2]+i.max[2])/2):(e.shouldSplit=k(e),e.shouldSplit||(i.min[2]=i.max[2]=i.center[2]=this._centerAltitude))},M=t=>t*t,T=M((h-this._centerAltitude)*c),k=t=>{if(t.zoom<p)return!0;if(t.zoom===x)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const e=t.aabb.distanceX(d),n=t.aabb.distanceY(d);let i=T;r&&(i=M(t.aabb.distanceZ(d)*c));const o=e*e+n*n+i,a=(1<<x-t.zoom)*f;return o<M(a*((t,e)=>{if(e*M(.707)<t)return 1;const n=Math.sqrt(e/t),i=n-1.4144271570014144;return n/(1.4144271570014144+(Math.pow(1.1,i+1)-1)/(1.1-1)-1)})(Math.max(i,T),o))};if(this._renderWorldCopies)for(let t=1;t<=3;t++)y.push(g(-t)),y.push(g(t));for(y.push(g(0));y.length>0;){const i=y.pop(),o=i.x,a=i.y;let u=i.fullyVisible;if(!u){const t=i.aabb.intersects(l);if(0===t)continue;u=2===t}if(i.zoom!==x&&k(i))for(let e=0;e<4;e++){const n=(o<<1)+e%2,s=(a<<1)+(e>>1),l={aabb:i.aabb.quadrant(e),zoom:i.zoom+1,x:n,y:s,wrap:i.wrap,fullyVisible:u,tileID:void 0,shouldSplit:void 0};r&&(l.tileID=new t.OverscaledTileID(i.zoom+1===x?b:i.zoom+1,i.wrap,i.zoom+1,n,s),w(l)),y.push(l)}else{const r=i.zoom===x?b:i.zoom;if(e.minzoom&&e.minzoom>r)continue;const l=s[0]-(.5+o+(i.wrap<<i.zoom))*(1<<n-i.zoom),u=s[1]-.5-a,c=i.tileID?i.tileID:new t.OverscaledTileID(r,i.wrap,i.zoom,o,a);v.push({tileID:c,distanceSq:l*l+u*u})}}if(this.fogCullDistSq){const e=this.fogCullDistSq;v.splice(0,v.length,...v.filter((n=>{const i=[0,0,0,1],o=[t.EXTENT,t.EXTENT,0,1],a=this.calculateFogTileMatrix(n.tileID.toUnwrapped());t.transformMat4$1(i,i,a),t.transformMat4$1(o,o,a);const s=t.getAABBPointSquareDist(i,o);if(0===s)return!0;let l=!1;const u=this.horizonLineFromTop();if(s>e&&0!==u){const e=this.calculateProjMatrix(n.tileID.toUnwrapped());let i;r&&this._elevation&&(i=this._elevation.getMinMaxForTile(n.tileID)),i||(i={min:_,max:m});const o=t.furthestTileCorner(this.bearing),a=[o[0]*t.EXTENT,o[1]*t.EXTENT,i.max];t.transformMat4(a,a,e),l=(1-a[1])*this.height*.5<u}return s<e||l})))}const S=v.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID));return t.assert_1(!S.length||this.elevation||S[0].overscaledZ===b),S}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(e,n){const i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(t){this.center=this.coordinateLocation(t),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this._coordinatePoint(this.locationCoordinate(t),!1)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t.toLngLat()}pointRayIntersection(e,n){const i=null!=n?n:this._centerAltitude,r=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4$1(r,r,this.pixelMatrixInverse),t.transformMat4$1(o,o,this.pixelMatrixInverse);const a=r[3],s=o[3];t.scale$1(r,r,1/a),t.scale$1(o,o,1/s);const l=r[2],u=o[2];return{p0:r,p1:o,t:l===u?0:(i-l)/(u-l)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];return t.transformMat4$1(n,n,this.pixelMatrixInverse),t.transformMat4$1(i,i,this.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),t.scale$1(i,i,1/i[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,i[2]=t.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,t.scale$1(n,n,1/this.worldSize),t.scale$1(i,i,1/this.worldSize),new t.Ray([n[0],n[1],n[2]],t.normalize([],t.sub([],i,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:i,t:r}=e,o=t.mercatorZfromAltitude(n[2],this._center.lat),a=t.mercatorZfromAltitude(i[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],i[0],r)/this.worldSize,t.number(n[1],i[1],r)/this.worldSize,t.number(o,a,r))}pointCoordinate(e){const n=this.horizonLineFromTop(!1),i=new t.pointGeometry(e.x,Math.max(n,e.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(i))}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);const n=this.elevation;let i=this.elevation.pointCoordinate(e);if(i)return new t.MercatorCoordinate(i[0],i[1],i[2]);let r=0,o=this.horizonLineFromTop();if(e.y>o)return this.pointCoordinate(e);const a=.02*o,s=e.clone();for(let e=0;e<10&&o-r>a;e++){s.y=t.number(r,o,.66);const e=n.pointCoordinate(s);e?(o=s.y,i=e):r=s.y}return i?new t.MercatorCoordinate(i[0],i[1],i[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const e=this.horizonLineFromTop();return t.y<e}}_coordinatePoint(e,n){const i=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,r=[e.x*this.worldSize,e.y*this.worldSize,i+e.toAltitude(),1];return t.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new t.pointGeometry(r[0]/r[3],r[1]/r[3]):new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new t.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new t.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new t.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}_getBounds3D(){t.assert_1(this.elevation);const e=this.elevation,n=e.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});n.min*=e.exaggeration(),n.max*=e.exaggeration();const i=this.horizonLineFromTop();return[new t.pointGeometry(0,i),new t.pointGeometry(this.width,i),new t.pointGeometry(this.width,this.height),new t.pointGeometry(0,this.height)].reduce(((t,e)=>t.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,n.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,n.max))))),new t.LngLatBounds)}horizonLineFromTop(t=!0){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-.97*e;return t?Math.max(0,n):n}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,n){const i=e.canonical,r=n/this.zoomScale(i.z),o=i.x+Math.pow(2,i.z)*e.wrap,a=t.identity(new Float64Array(16));return t.translate(a,a,[o*r,i.y*r,0]),t.scale(a,a,[r/t.EXTENT,r/t.EXTENT,1]),a}calculateFogTileMatrix(e){const n=e.key,i=this._fogTileMatrixCache;if(i[n])return i[n];const r=this.calculatePosMatrix(e,this.cameraWorldSize);return t.multiply(r,this.worldToFogMatrix,r),i[n]=new Float32Array(r),i[n]}calculateProjMatrix(e,n=!1){const i=e.key,r=n?this._alignedProjMatrixCache:this._projMatrixCache;if(r[i])return r[i];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,n?this.alignedProjMatrix:this.projMatrix,o),r[i]=new Float32Array(o),r[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const n=this._camera.position,i=this._camera.forward();if(n[2]<=0||i[2]>=0)return;const r=t.mercatorZfromAltitude(1,this._center.lat);n[2]/=r,i[2]/=r,t.normalize(i,i);const o=e.raycast(n,i,e.exaggeration());if(o){const e=t.scaleAndAdd([],n,i,o),r=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=this._camera.position,s=[r.x-a[0],r.y-a[1],r.z-a[2]],l=r.z+t.length(s);this._cameraZoom=this._zoomFromMercatorZ(l),this._centerAltitude=r.toAltitude(),this._center=r.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const n=e.getAtPointOrZero(this._camera.mercatorPosition),i=this._minimumHeightOverTerrain()*Math.cos(t.degToRad(this._maxPitch)),r=t.mercatorZfromAltitude(n,this._center.lat),o=this._camera.position[2]-r;if(o<i){const e=t.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),n=this._camera.mercatorPosition,r=[e.x-n.x,e.y-n.y,e.z-n.z],a=t.length(r);r[2]-=i-o;const s=t.length(r);if(0===s)return;t.scale$2(r,r,a/s),this._camera.position=[e.x-r[0],e.y-r[1],e.z-r[2]],this._camera.orientation=Rn(r,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,n,i,r,o=-90,a=90,s=-180,l=180;const u=this.size,c=this._unmodified;if(this.latRange){const n=this.latRange;o=t.mercatorYfromLat(n[1])*this.worldSize,a=t.mercatorYfromLat(n[0])*this.worldSize,e=a-o<u.y?u.y/(a-o):0}if(this.lngRange){const e=this.lngRange;s=t.mercatorXfromLng(e[0])*this.worldSize,l=t.mercatorXfromLng(e[1])*this.worldSize,n=l-s<u.x?u.x/(l-s):0}const h=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.pointGeometry(n?(l+s)/2:h.x,e?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){const t=h.y,e=u.y/2;t-e<o&&(r=o+e),t+e>a&&(r=a-e)}if(this.lngRange){const t=h.x,e=u.x/2;t-e<s&&(i=s+e),t+e>l&&(i=l-e)}void 0===i&&void 0===r||(this.center=this.unproject(new t.pointGeometry(void 0!==i?i:h.x,void 0!==r?r:h.y))),this._constrainCameraAltitude(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){const e=(t,e)=>Math.log2(t/(this.tileSize*Math.abs(e[1]-e[0])));let n=0;if(this.latRange){const i=this.latRange;n=e(this.height,[t.mercatorYfromLat(i[0]),t.mercatorYfromLat(i[1])])}let i=0;if(this.lngRange){const n=this.lngRange;i=e(this.width,[t.mercatorXfromLng(n[0]),t.mercatorXfromLng(n[1])])}return Math.max(n,i)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this._fov/2,n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(e)*this.height;const i=this.pixelsPerMeter;this._updateCameraState();const r=Math.PI/2+this._pitch,o=this.fovAboveCenter,a=this.elevation?this.elevation.getMinElevationBelowMSL()*i:0,s=(this._camera.position[2]*this.worldSize-a)/Math.cos(this._pitch),l=Math.sin(o)*s/Math.sin(t.clamp(Math.PI-r-o,.01,Math.PI-.01)),u=this.point,c=u.x,h=u.y,d=Math.cos(Math.PI/2-this._pitch)*l+s,f=s*(1/this._horizonShift),p=Math.min(1.01*d,f),m=this.height/50,_=this._camera.getWorldToCamera(this.worldSize,i),g=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,m,p);g[8]=2*-n.x/this.width,g[9]=2*n.y/this.height;let y=t.mul([],g,_);this.mercatorMatrix=t.scale([],y,[this.worldSize,this.worldSize,this.worldSize/i]),this.projMatrix=y,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const v=new Float32Array(16);t.identity(v),t.scale(v,v,[1,-1,1]),t.rotateX(v,v,this._pitch),t.rotateZ(v,v,this.angle);const x=t.perspective(new Float32Array(16),this._fov,this.width/this.height,m,p),b=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;x[8]=2*-n.x/this.width,x[9]=2*(n.y+b)/this.height,this.skyboxMatrix=t.multiply(v,x,v);const w=this.width%2/2,M=this.height%2/2,T=Math.cos(this.angle),k=Math.sin(this.angle),S=c-Math.round(c)+T*w+k*M,E=h-Math.round(h)+T*M+k*w,C=new Float64Array(y);if(t.translate(C,C,[S>.5?S-1:S,E>.5?E-1:E,0]),this.alignedProjMatrix=C,y=t.create(),t.scale(y,y,[this.width/2,-this.height/2,1]),t.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=t.create(),t.scale(y,y,[1,-1,1]),t.translate(y,y,[-1,-1,0]),t.scale(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),y=t.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSize,n=this.cameraPixelsPerMeter,i=this._camera.position,r=1/this.height,o=[e,e,n];t.scale$2(o,o,r),t.scale$2(i,i,-1),t.multiply$1(i,i,o);const a=t.create();t.translate(a,a,i),t.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,r)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const e=this._camera.forward(),n=this.cameraToCenterDistance,i=this.point,r=this._cameraZoom?this._cameraZoom:this._zoom,o=this._mercatorZfromZoom(r)-t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this.cameraToCenterDistance/o;this._camera.position=[i.x/this.worldSize-e[0]*n/a,i.y/this.worldSize-e[1]*n/a,t.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-e[2]*n/a]}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),i=this._camera.position[2],r=e[2];let o=1;r>0&&(o=Math.min((n-i)/r,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,o),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:i,bearing:r}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),s=Math.max((e[2]-o)/Math.cos(i),a),l=this._zoomFromMercatorZ(s);t.scaleAndAdd(e,e,n,s),this._pitch=t.clamp(i,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(r,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new t.MercatorCoordinate(e[0],e[1],e[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(e,n){const i=Math.min(e.x,n.x),r=Math.max(e.x,n.x),o=Math.min(e.y,n.y),a=Math.max(e.y,n.y),s=[new t.pointGeometry(i,o),new t.pointGeometry(r,a),new t.pointGeometry(i,a),new t.pointGeometry(r,o)],l=this._renderWorldCopies?-3:0,u=this._renderWorldCopies?4:1;for(const t of s){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<l||n.y<0||n.x>u||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new t.pointGeometry(0,0),new t.pointGeometry(this.width,this.height))}zoomDeltaToMovement(e,n){const i=t.length(t.sub([],this._camera.position,e)),r=this._zoomFromMercatorZ(i)+n;return i-this._mercatorZfromZoom(r)}getCameraPoint(){const e=this._pitch,n=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,n))}}class Bn{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t,e){let n=!1,i=null;const r=()=>{i=null,n&&(t(),i=setTimeout(r,e),n=!1)};return()=>(n=!0,i||r(),i)}(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const n=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=this._map.getBearing(),u=this._map.getPitch();let c="";if(c+=e?`/${a}/${s}/${i}`:`${i}/${s}/${a}`,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+=`/${Math.round(u)}`),this._hashName){const e=this._hashName;let n=!1;const i=t.window.location.hash.slice(1).split("&").map((t=>{const i=t.split("=")[0];return i===e?(n=!0,`${i}=${c}`):t})).filter((t=>t));return n||i.push(`${e}=${c}`),`#${i.join("&")}`}return`#${c}`}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}const jn={linearity:.3,easing:t.bezier(0,0,.3,1)},Un=t.extend({deceleration:2500,maxSpeed:1400},jn),$n=t.extend({deceleration:20,maxSpeed:1400},jn),Hn=t.extend({deceleration:1e3,maxSpeed:360},jn),Vn=t.extend({deceleration:1e3,maxSpeed:90},jn);class qn{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const o=Gn(n.pan.mag(),i,t.extend({},Un,e||{}));r.offset=n.pan.mult(o.amount/n.pan.mag()),r.center=this._map.transform.center,Wn(r,o)}if(n.zoom){const t=Gn(n.zoom,i,$n);r.zoom=this._map.transform.zoom+t.amount,Wn(r,t)}if(n.bearing){const e=Gn(n.bearing,i,Hn);r.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),Wn(r,e)}if(n.pitch){const t=Gn(n.pitch,i,Vn);r.pitch=this._map.transform.pitch+t.amount,Wn(r,t)}if(r.zoom||r.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(r,{noMoveStart:!0})}}function Wn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Gn(e,n,i){const{maxSpeed:r,linearity:o,deceleration:a}=i,s=t.clamp(e*o/(n/1e3),-r,r),l=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}class Zn extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i,o={}){const a=r.mousePos(n.getCanvasContainer(),i),s=n.unproject(a);super(e,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=n}}class Xn extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){const o="touchend"===e?i.changedTouches:i.touches,a=r.touchPos(n.getCanvasContainer(),o),s=a.map((t=>n.unproject(t))),l=a.reduce(((t,e,n,i)=>t.add(e.div(i.length))),new t.pointGeometry(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:i}),this._defaultPrevented=!1}}class Kn extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class Jn{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Kn(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new Zn(t.type,this._map,t))}mouseup(t){this._map.fire(new Zn(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new Zn(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Zn(t.type,this._map,t))}mouseover(t){this._map.fire(new Zn(t.type,this._map,t))}mouseout(t){this._map.fire(new Zn(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Xn(t.type,this._map,t))}touchmove(t){this._map.fire(new Xn(t.type,this._map,t))}touchend(t){this._map.fire(new Xn(t.type,this._map,t))}touchcancel(t){this._map.fire(new Xn(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qn{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Zn(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Zn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new Zn(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ti{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(r.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=n,this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const o=Math.min(i.x,n.x),a=Math.max(i.x,n.x),s=Math.min(i.y,n.y),l=Math.max(i.y,n.y);this._map._requestDomTask((()=>{this._box&&(r.setTransform(this._box,`translate(${o}px,${s}px)`),this._box.style.width=a-o+"px",this._box.style.height=l-s+"px")}))}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const i=this._startPos,o=n;if(this.reset(),r.suppressClick(),i.x!==o.x||i.y!==o.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(i,o,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function ei(e,n){t.assert_1(e.length===n.length);const i={};for(let t=0;t<e.length;t++)i[e[t].identifier]=n[t];return i}class ni{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const n=new t.pointGeometry(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=ei(i,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const i=ei(n,e);for(const t in this.touches){const e=this.touches[t],n=i[t];(!n||n.dist(e)>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class ii{constructor(t){this.singleTap=new ni(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const i=this.singleTap.touchend(t,e,n);if(i){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class ri{constructor(){this._zoomIn=new ii({numTouches:1,numTaps:2}),this._zoomOut=new ii({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const i=this._zoomIn.touchend(t,e,n),r=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const oi={0:1,2:2};class ai{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=r.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){const n=oi[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&r.mouseButton(t)===this._eventButton&&(this._moved&&r.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class si extends ai{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class li extends ai{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class ui extends ai{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class ci{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,i){i.length>0&&(this._active=!0);const r=ei(i,n),o=new t.pointGeometry(0,0),a=new t.pointGeometry(0,0);let s=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,r[t]=e)}if(this._touches=r,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){if(!this._firstTwoTouches)return;t.preventDefault();const[i,r]=this._firstTwoTouches,o=di(n,e,i),a=di(n,e,r);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[i,o]=this._firstTwoTouches,a=di(n,e,i),s=di(n,e,o);a&&s||(this._active&&r.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function di(t,e,n){for(let i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function fi(t,e){return Math.log(t/e)/Math.LN2}class pi extends hi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(fi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:fi(this._distance,n),pinchAround:e}}}function mi(t,e){return 180*t.angleWith(e)/Math.PI}class _i extends hi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:mi(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=mi(t,this._startVector);return Math.abs(n)<e}}function gi(t){return Math.abs(t.y)>Math.abs(t.x)}class yi extends hi{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,gi(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,n){const i=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const i=t.mag()>=2,r=e.mag()>=2;if(!i&&!r)return;if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return gi(t)&&gi(e)&&o}}const vi={panStep:100,bearingStep:15,pitchStep:10};class xi{constructor(){const t=vi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,i=0,r=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:bi,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+i*this._pitchStep,offset:[-r*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function bi(t){return t*(2-t)}const wi=4.000244140625;class Mi{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const i=t.exported.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%wi==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=r.mousePos(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform,n=()=>e._terrainEnabled()?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>wi?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==i&&(i=1/i);const r=n(),o=Math.pow(2,r),a="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(a*i))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:n(),r=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&r&&o){t.assert_1(o&&"number"==typeof r);const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=o(e);a=t.number(r,i,n),e<1?this._frameId||(this._frameId=!0):s=!0}else a=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,i=(t.exported.now()-e.start)/e.duration,r=e.easing(i+.01)-e.easing(i),o=.27/Math.sqrt(r*r+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}reset(){this._active=!1}}class Ti{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ki{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Si{constructor(){this._tap=new ii({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ei{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ci{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Li{constructor(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Di=t=>t.zoom||t.drag||t.pitch||t.rotate;class Ai extends t.Event{}class Pi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const i=t.sub([],n,e);i[2]<0?this.radius=t.length(t.div([],i,this.constants)):this.radius=t.length([i[0],i[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const n=t.scale$2([],e,this.radius);if(n[2]>0){const e=t.scale$2([],[0,0,1],t.dot(n,[0,0,1])),i=t.scale$2([],t.normalize([],[n[0],n[1],0]),this.radius),r=t.add([],n,t.scale$2([],t.sub([],t.add([],i,e),n),2));n[0]=r[0],n[1]=r[1]}return n}}function Ii(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class zi{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new qn(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Pi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[e,n,i]of this._listeners)r.addEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[e,n,i]of this._listeners)r.removeEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new Jn(e,t));const i=e.boxZoom=new ti(e,t);this._add("boxZoom",i);const r=new ri,o=new ki;e.doubleClickZoom=new Ti(o,r),this._add("tapZoom",r),this._add("clickZoom",o);const a=new Si;this._add("tapDragZoom",a);const s=e.touchPitch=new yi;this._add("touchPitch",s);const l=new li(t),u=new ui(t);e.dragRotate=new Ci(t,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);const c=new si(t),h=new ci(t);e.dragPan=new Ei(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new _i,f=new pi;e.touchZoomRotate=new Li(n,f,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Qn(e));const p=e.scrollZoom=new Mi(e,this);this._add("scrollZoom",p,["mousePan"]);const m=e.keyboard=new xi;this._add("keyboard",m);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[n]&&e[n].enable(t[n])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Di(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,n){for(const i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const n of t){const t=n.target;this._el.contains(t)&&e.push(n)}return e}handleEvent(e,n){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0,t.assert_1(void 0!==e.timeStamp);const i="renderFrame"===e.type,o=i?void 0:e,a={needsRenderFrame:!1},s={},l={},u=e.touches?this._getMapTouches(e.touches):void 0,c=u?r.touchPos(this._el,u):i?void 0:r.mousePos(this._el,e);for(const{handlerName:t,handler:i,allowed:r}of this._handlers){if(!i.isEnabled())continue;let h;this._blockedByActive(l,r,t)?i.reset():i[n||e.type]&&(h=i[n||e.type](e,c,u),this.mergeHandlerResult(a,s,h,t,o),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||i.isActive())&&(l[t]=i)}const h={};for(const t in this._previousActiveHandlers)l[t]||(h[t]=o);this._previousActiveHandlers=l,(Object.keys(h).length||Ii(a))&&(this._changes.push([a,s,h]),this._triggerRenderFrame()),(Object.keys(l).length||Ii(a))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:d}=a;d&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],d(this._map))}mergeHandlerResult(e,n,i,r,o){if(!i)return;t.extend(e,i);const a={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=a),void 0!==i.panDelta&&(n.drag=a),void 0!==i.pitchDelta&&(n.pitch=a),void 0!==i.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},i={};for(const[r,o,a]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.aroundCoord&&(e.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.extend(n,o),t.extend(i,a);this._updateMapTransform(e,n,i),this._changes=[]}_updateMapTransform(e,n,i){const r=this._map,o=r.transform,a=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!Ii(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(!Ii(e))return this._fireEvents(n,i,!0);let{panDelta:s,zoomDelta:l,bearingDelta:u,pitchDelta:c,around:h,aroundCoord:d,pinchAround:f}=e;void 0!==f&&(h=f),(t=>n[t]&&!this._eventsInProgress[t])("drag")&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",r._stop(!0),h=h||r.transform.centerPoint,u&&(o.bearing+=u),c&&(o.pitch+=c),o._updateCameraState();const p=[0,0,0];if(s){t.assert_1(this._dragOrigin,"_dragOrigin should have been setup with a previous dragstart");const e=o.screenPointToMercatorRay(h),n=o.screenPointToMercatorRay(h.sub(s)),i=this._trackingEllipsoid.projectRay(e.dir),r=this._trackingEllipsoid.projectRay(n.dir);p[0]=r[0]-i[0],p[1]=r[1]-i[1]}const m=o.zoom,_=[0,0,0];if(l){const e=a(d||o.pointCoordinate3D(h)),n={dir:t.normalize([],t.sub([],e,o._camera.position))},i=o.screenPointToMercatorRay(o.centerPoint);if(n.dir[2]<0){const r=t.altitudeFromMercatorZ(e[2],e[1]),s=o.rayIntersectionCoordinate(o.pointRayIntersection(o.centerPoint,r)),u=o.zoomDeltaToMovement(a(s),l)*(i.dir[2]/n.dir[2]);t.scale$2(_,n.dir,u)}else if(o._terrainEnabled()){const i=o.zoomDeltaToMovement(e,l);t.scale$2(_,n.dir,i)}}const g=t.add(p,p,_);o._translateCameraConstrained(g),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,i,!0)}_fireEvents(e,n,i){const r=Di(this._eventsInProgress),o=Di(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!r&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||i,s[`${t}end`]=l)}for(const t in s)this._fireEvent(t,s[t]);const u=Di(this._eventsInProgress);if(i&&(r||o)&&!u){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Ai("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Fi extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,i){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)}panTo(e,n,i){return this.easeTo(t.extend({center:e},n),i)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const i=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),i,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_cameraForBoxAndBearing(e,n,i,r){const o=this._extendCameraOptions(r),a=this.transform,s=a.padding,l=a.project(t.LngLat.convert(e)),u=a.project(t.LngLat.convert(n)),c=l.rotate(-t.degToRad(i)),h=u.rotate(-t.degToRad(i)),d=new t.pointGeometry(Math.max(c.x,h.x),Math.max(c.y,h.y)),f=new t.pointGeometry(Math.min(c.x,h.x),Math.min(c.y,h.y)),p=d.sub(f),m=(a.width-(s.left+s.right+o.padding.left+o.padding.right))/p.x,_=(a.height-(s.top+s.bottom+o.padding.top+o.padding.bottom))/p.y;if(_<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const g=Math.min(a.scaleZoom(a.scale*Math.min(m,_)),o.maxZoom),y="number"==typeof o.offset.x?new t.pointGeometry(o.offset.x,o.offset.y):t.pointGeometry.convert(o.offset),v=(o.padding.left-o.padding.right)/2,x=(o.padding.top-o.padding.bottom)/2,b=new t.pointGeometry(v,x).rotate(i*Math.PI/180),w=y.add(b).mult(a.scale/a.zoomScale(g));return{center:a.unproject(l.add(u).div(2).sub(w)),zoom:g,bearing:i}}_cameraForBox(e,n,i,r,o){const a=this._extendCameraOptions(o);i=i||0,r=r||0,e=t.LngLat.convert(e),n=t.LngLat.convert(n);const s=this.transform.clone();s.padding=a.padding;const l=this.getFreeCameraOptions(),u=new t.LngLat(.5*(e.lng+n.lng),.5*(e.lat+n.lat)),c=.5*(i+r);if(s._camera.position[2]<t.mercatorZfromAltitude(c,u.lat))return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(u),s.setFreeCameraOptions(l);const h=t.MercatorCoordinate.fromLngLat(e),d=t.MercatorCoordinate.fromLngLat(n),f=s.pointRayIntersection(s.centerPoint,c),p=[(_=s.rayIntersectionCoordinate(f)).x,_.y,_.z],m=s.screenPointToMercatorRay(s.centerPoint);var _;let g,y=0;do{const e=Math.floor(s.zoom),n=1<<e,o=Math.min(n*h.x,n*d.x),a=Math.min(n*h.y,n*d.y),l=Math.max(n*h.x,n*d.x),u=Math.max(n*h.y,n*d.y),c=new t.Aabb([o,a,i],[l,u,r]),f=t.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,e);if(2!==c.intersects(f)){g&&(s._camera.position=t.scaleAndAdd([],s._camera.position,m.dir,-g),s._updateStateFromCamera());break}const _=t.sub([],s._camera.position,p);g=.5*t.length(_),s._camera.position=t.scaleAndAdd([],s._camera.position,m.dir,g);try{s._updateStateFromCamera()}catch(e){return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++y<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}_raycastElevationBox(e,n){const i=this.transform.elevation;if(!i)return;const r=new t.pointGeometry(e.x,n.y),o=new t.pointGeometry(n.x,e.y),a=i.pointCoordinate(e);if(!a)return;const s=i.pointCoordinate(n);if(!s)return;const l=i.pointCoordinate(r);if(!l)return;const u=i.pointCoordinate(o);if(!u)return;const c=new t.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new t.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new t.MercatorCoordinate(l[0],l[1]).toLngLat(),f=new t.MercatorCoordinate(u[0],u[1]).toLngLat(),p=Math.min(c.lng,Math.min(h.lng,Math.min(d.lng,f.lng))),m=Math.min(c.lat,Math.min(h.lat,Math.min(d.lat,f.lat))),_=Math.max(c.lng,Math.max(h.lng,Math.max(d.lng,f.lng))),g=Math.max(c.lat,Math.max(h.lat,Math.max(d.lat,f.lat))),y=Math.min(a[3],Math.min(s[3],Math.min(l[3],u[3]))),v=Math.max(a[3],Math.max(s[3],Math.max(l[3],u[3])));return{minLngLat:new t.LngLat(p,m),maxLngLat:new t.LngLat(_,g),minAltitude:y,maxAltitude:v}}fitScreenCoordinates(e,n,i,r,o){let a,s,l,u;const c=t.pointGeometry.convert(e),h=t.pointGeometry.convert(n),d=this._raycastElevationBox(c,h);if(d)a=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,u=d.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(c,h))return this;a=this.transform.pointLocation(c),s=this.transform.pointLocation(h)}return 0===this.transform.pitch?this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(n)),i,r),r,o):this._fitInternal(this._cameraForBox(a,s,l,u,r),r,o)}_fitInternal(e,n,i){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(e,n){this.stop();const i=this.transform;let r=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){this.stop();const i=this.transform,r=i.zoom,o=i.pitch,a=i.bearing;i.setFreeCameraOptions(e);const s=r!==i.zoom,l=o!==i.pitch,u=a!==i.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),s&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),u&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const i=this.transform,r=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:r,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:i.padding,d=t.pointGeometry.convert(e.offset);let f=i.centerPoint.add(d);const p=i.pointLocation(f),m=t.LngLat.convert(e.center||p);this._normalizeCenter(m);const _=i.project(p),g=i.project(m).sub(_),y=i.zoomScale(l-r);let v,x;e.around&&(v=t.LngLat.convert(e.around),x=i.locationPoint(v));const b={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==r,this._rotating=this._rotating||o!==u,this._pitching=this._pitching||c!==a,this._padding=!i.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,b),this._ease((e=>{if(this._zooming&&(i.zoom=t.number(r,l,e)),this._rotating&&(i.bearing=t.number(o,u,e)),this._pitching&&(i.pitch=t.number(a,c,e)),this._padding&&(i.interpolatePadding(s,h,e),f=i.centerPoint.add(d)),v)i.setLocationAtPoint(v,x);else{const t=i.zoomScale(i.zoom-r),n=l>r?Math.min(2,y):Math.max(.5,y),o=Math.pow(n,1-e),a=i.unproject(_.add(g.mult(e*o)).mult(t));i.setLocationAtPoint(i.renderWorldCopies?a.wrap():a,f)}this._fireMoveEvents(n)}),(t=>{i.recenterOnTerrain(),this._afterEase(n,t)}),e),this}_prepareEase(e,n,i={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.transform.cameraElevationReference="ground";const i=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(!e.essential&&t.exported.prefersReducedMotion){const i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const i=this.transform,r=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):r,u="bearing"in e?this._normalizeBearing(e.bearing,o):o,c="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:i.padding,d=i.zoomScale(l-r),f=t.pointGeometry.convert(e.offset);let p=i.centerPoint.add(f);const m=i.pointLocation(p),_=t.LngLat.convert(e.center||m);this._normalizeCenter(_);const g=i.project(m),y=i.project(_).sub(g);let v=e.curve;const x=Math.max(i.width,i.height),b=x/d,w=y.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,r,l),i.minZoom,i.maxZoom),o=x/i.zoomScale(n-r);v=Math.sqrt(o/w*2)}const M=v*v;function T(t){const e=(b*b-x*x+(t?-1:1)*M*M*w*w)/(2*(t?b:x)*M*w);return Math.log(Math.sqrt(e*e+1)-e)}function k(t){return(Math.exp(t)-Math.exp(-t))/2}function S(t){return(Math.exp(t)+Math.exp(-t))/2}const E=T(0);let C=function(t){return S(E)/S(E+v*t)},L=function(t){return x*((S(E)*(k(e=E+v*t)/S(e))-k(E))/M)/w;var e},D=(T(1)-E)/v;if(Math.abs(w)<1e-6||!isFinite(D)){if(Math.abs(x-b)<1e-6)return this.easeTo(e,n);const t=b<x?-1:1;D=Math.abs(Math.log(b/x))/v,L=function(){return 0},C=function(e){return Math.exp(t*v*e)}}if("duration"in e)e.duration=+e.duration;else{const t="screenSpeed"in e?+e.screenSpeed/v:+e.speed;e.duration=1e3*D/t}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==u,this._pitching=c!==a,this._padding=!i.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((e=>{const d=e*D,m=1/C(d);i.zoom=1===e?l:r+i.scaleZoom(m),this._rotating&&(i.bearing=t.number(o,u,e)),this._pitching&&(i.pitch=t.number(a,c,e)),this._padding&&(i.interpolatePadding(s,h,e),p=i.centerPoint.add(f));const v=1===e?_:i.unproject(g.add(y.mult(L(d))).mult(m));i.setLocationAtPoint(i.renderWorldCopies?v.wrap():v,p),i._updateCenterElevation(),this._fireMoveEvents(n)}),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}class Ri{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=r.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const i=n.reduce(((t,e,i)=>(e.value&&(t+=`${e.key}=${e.value}${i<n.length-1?"&":""}`),t)),"?");e.href=`${t.config.FEEDBACK_URL}/${i}${this._map._hash?this._map._hash.getHashString(!0):""}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const n in e){const i=e[n];if(i.used){const e=i.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Oi{constructor(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)}onAdd(t){this._map=t,this._container=r.create("div","mapboxgl-ctrl");const e=r.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Yi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const e of n)if(e.id===t)return void(e.cancelled=!0)}run(e=0){t.assert_1(!this._currentlyRunning);const n=this._currentlyRunning=this._queue;this._queue=[];for(const t of n)if(!t.cancelled&&(t.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Ni(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){const r=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-i.center.lng)/360),s=i.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>i.width||n.y>i.height;i.locationPoint(r).distSqr(n)<s&&(l||Math.abs(r.lng-i.center.lng)<a)?e=r:i.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-i.center.lng)<a)&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}const Bi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ji(t,e,n){const i=t.classList;for(const t in Bi)i.remove(`mapboxgl-${n}-anchor-${t}`);i.add(`mapboxgl-${n}-anchor-${e}`)}class Ui extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div"),this._element.setAttribute("aria-label","Map marker");const n=r.createNS("http://www.w3.org/2000/svg","svg"),i=41,o=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${i}px`),n.setAttributeNS(null,"width",`${o}px`),n.setAttributeNS(null,"viewBox",`0 0 ${o} ${i}`);const a=r.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=r.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of u){const e=r.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const c=r.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);const h=r.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(h);const d=r.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const f=r.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(f);const p=r.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(6.0, 7.0)"),p.setAttributeNS(null,"fill","#FFFFFF");const m=r.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const _=r.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#000000"),_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962");const g=r.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),m.appendChild(_),m.appendChild(g),s.appendChild(l),s.appendChild(c),s.appendChild(d),s.appendChild(p),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",i*this._scale+"px"),n.setAttributeNS(null,"width",o*this._scale+"px"),this._element.appendChild(n),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),ji(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),r.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[i,-1*(e-n+i)],"bottom-right":[-i,-1*(e-n+i)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_evaluateOpacity(){const t=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(t))return void this._clearFadeTimer();const e=this._map.unproject(t);let n=!1;if(this._map.getTerrain()){const t=this._map.getFreeCameraOptions();if(t.position){const i=t.position.toLngLat();n=i.distanceTo(e)<.9*i.distanceTo(this._lngLat)}}const i=(1-this._map._queryFogOpacity(e))*(n?.2:1);this._element.style.opacity=`${i}`,this._popup&&this._popup._setOpacity(`${i}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(t){const e=this._map.transform;return!!t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Ni(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),this._map._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&r.setTransform(this._element,`${Bi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${e}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}_transformedOffset(){if(!this._defaultMarker)return this._offset;const t=this._map.transform,e=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&e._rotate(t.angle),"map"===this._pitchAlignment&&(e.y*=Math.cos(t._pitch)),e}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class $i{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const Hi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:Vi,HTMLElement:qi,ImageBitmap:Wi}=t.window,Gi=85,Zi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Gi,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Xi(t){t.parentNode&&t.parentNode.removeChild(t)}const Ki={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ji{constructor(e,n,i=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new li({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,i&&(this.mousePitch=new ui({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener(n,"mousedown",this.mousedown),r.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),r.addEventListener(n,"touchmove",this.touchmove),r.addEventListener(n,"touchend",this.touchend),r.addEventListener(n,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),r.disableDrag()}move(t,e){const n=this.map,i=this.mouseRotate.mousemoveWindow(t,e);if(i&&i.bearingDelta&&n.setBearing(n.getBearing()+i.bearingDelta),this.mousePitch){const i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}}off(){const t=this.element;r.removeEventListener(t,"mousedown",this.mousedown),r.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),r.removeEventListener(t,"touchmove",this.touchmove),r.removeEventListener(t,"touchend",this.touchend),r.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){r.enableDrag(),r.removeEventListener(t.window,"mousemove",this.mousemove),r.removeEventListener(t.window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),r.mousePos(this.element,e)),r.addEventListener(t.window,"mousemove",this.mousemove),r.addEventListener(t.window,"mouseup",this.mouseup)}mousemove(t){this.move(t,r.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=r.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=r.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Qi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let tr;let er=0,nr=!1;class ir extends t.Evented{constructor(e){super(),this.options=t.extend({},Qi,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(e){return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==tr?n(tr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>{tr="denied"!==t.state,n(tr)})):(tr=!!t.window.navigator.geolocation,n(tr)),this._container;var n}onRemove(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),r.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,er=0,nr=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:t.assert_1(!1,`Unexpected watchState ${this._watchState}`)}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;default:t.assert_1(!1,`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){t.assert_1(this._circleElement);const e=this._map._container.clientHeight/2,n=this._map.unproject([0,e]),i=this._map.unproject([100,e]),r=n.distanceTo(i)/100,o=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&nr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=r.create("button","mapboxgl-ctrl-geolocate",this._container),r.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ui(this._dotElement),this._circleElement=r.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ui({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{const n=e.originalEvent&&"resize"===e.originalEvent.type;e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||n||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":er--,nr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break;default:t.assert_1(!1,`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break;case"OFF":break;default:t.assert_1(!1,`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),er++,er>1?(e={maximumAge:6e5,timeout:0},nr=!0):(e=this.options.positionOptions,nr=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}const rr={maxWidth:100,unit:"metric"};function or(t,e,n){const i=n&&n.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),a=t.unproject([i,r]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?ar(e,i,n/5280,t._getUIString("ScaleControl.Miles"),t):ar(e,i,n,t._getUIString("ScaleControl.Feet"),t)}else n&&"nautical"===n.unit?ar(e,i,s/1852,t._getUIString("ScaleControl.NauticalMiles"),t):s>=1e3?ar(e,i,s/1e3,t._getUIString("ScaleControl.Kilometers"),t):ar(e,i,s,t._getUIString("ScaleControl.Meters"),t)}function ar(t,e,n,i,r){const o=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n),a=o/n;r._requestDomTask((()=>{t.style.width=e*a+"px",t.innerHTML=`${o}&nbsp;${i}`}))}const sr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},lr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");class ur extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(sr),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");let r;for(i.innerHTML=e;r=i.firstChild,r;)n.appendChild(r);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=r.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){const e=this._lngLat||this._trackPointer;if(!this._map||!e||!this._content)return;if(this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ni(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const n=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let i=this.options.anchor;const o=cr(this.options.offset);if(!i){const t=this._container.offsetWidth,e=this._container.offsetHeight;let r;r=n.y+o.bottom.y<e?["top"]:n.y>this._map.transform.height-e?["bottom"]:[],n.x<t/2?r.push("left"):n.x>this._map.transform.width-t/2&&r.push("right"),i=0===r.length?"bottom":r.join("-")}const a=n.add(o[i]).round();this._map._requestDomTask((()=>{this._container&&i&&(r.setTransform(this._container,`${Bi[i]} translate(${a.x}px,${a.y}px)`),ji(this._container,i,"popup"))}))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(lr);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._content&&(this._content.style.opacity=t),this._tip&&(this._tip.style.opacity=t)}}function cr(e){if(e){if("number"==typeof e){const n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(n,n),"top-right":new t.pointGeometry(-n,n),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(n,-n),"bottom-right":new t.pointGeometry(-n,-n),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const n=t.pointGeometry.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return cr(new t.pointGeometry(0,0))}const hr=t.window.performance,dr={getPerformanceMetricsAsync(e){const n=t.PerformanceUtils.getPerformanceMetrics(),i=new T(q(),this),r=hr.getEntriesByName("create","mark")[0].startTime;i.broadcast("getWorkerPerformanceMetrics",{},((t,o)=>{if(i.remove(),t)return e(t);const a={};for(const t of o){for(const e of t.measures)a[e.name]=(a[e.name]||0)+e.duration;a.workerInitialization=t.timeOrigin-hr.timeOrigin-r}for(const t in a)n[t]=a[t]/o.length;return n.workerIdle=n.loadTime-n.workerInitialization-n.workerEvaluateScript-n.workerTask,n.workerIdlePercent=n.workerIdle/n.loadTime,n.parseTile=n.parseTile1+n.parseTile2,e(void 0,n)}))}},fr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Fi{constructor(e){if(t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},Zi,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>Gi)throw new Error("maxPitch must be less than or equal to 85");if(super(new Nn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._renderTaskQueue=new Yi,this._domRenderTaskQueue=new Yi,this._controls=[],this._markers=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Hi,e.locale),this._clickTolerance=e.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new $i(0),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof qi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new zi(this,e);const n="string"==typeof e.hash&&e.hash||void 0;this._hash=e.hash&&new Bn(n).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.attributionControl&&this.addControl(new Ri({customAttribution:e.customAttribution})),this._logoControl=new Oi,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}resize(e){const n=this._containerDimensions(),i=n[0],r=n[1];this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r);const o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?Gi:t)>Gi)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let i=!1;const r=r=>{const o=this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[];o.length?i||(i=!0,n.call(this,new Zn(t,this,r.originalEvent,{features:o}))):i=!1};return{layer:e,listener:n,delegates:{mousemove:r,mouseout:()=>{i=!1}}}}if("mouseleave"===t||"mouseout"===t){let i=!1;const r=r=>{(this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?i=!0:i&&(i=!1,n.call(this,new Zn(t,this,r.originalEvent)))},o=e=>{i&&(i=!1,n.call(this,new Zn(t,this,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:r,mouseout:o}}}{const i=t=>{const i=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(this,t),delete t.features)};return{layer:e,listener:n,delegates:{[t]:i}}}}on(t,e,n){if(void 0===n)return super.on(t,e);const i=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i);for(const t in i.delegates)this.on(t,i.delegates[t]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);const i=this._createDelegatedListener(t,e,n);for(const t in i.delegates)this.once(t,i.delegates[t]);return this}off(t,e,n){if(void 0===n)return super.off(t,e);return this._delegatedListeners&&this._delegatedListeners[t]&&(i=>{const r=i[t];for(let t=0;t<r.length;t++){const i=r[t];if(i.layer===e&&i.listener===n){for(const t in i.delegates)this.off(t,i.delegates[t]);return r.splice(t,1),this}}})(this._delegatedListeners),this}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),n=n||{},e=e||[[0,0],[this.transform.width,this.transform.height]],this.style.queryRenderedFeatures(e,n,this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),t&&(this.style=new Qt(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Qt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const i=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(r,((e,i)=>{e?this.fire(new t.ErrorEvent(e)):i&&this._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style._getSourceCaches(e);if(0!==n.length)return n.every((t=>t.loaded()));this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n,{pixelRatio:i=1,sdf:r=!1,stretchX:o,stretchY:a,content:s}={}){this._lazyInitEmptyStyle();if(n instanceof Vi||Wi&&n instanceof Wi){const{width:l,height:u,data:c}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:u},c),pixelRatio:i,stretchX:o,stretchY:a,content:s,sdf:r,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:u,data:c}=n,h=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:u},new Uint8Array(c)),pixelRatio:i,stretchX:o,stretchY:a,content:s,sdf:r,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,n){const i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof Vi||Wi&&n instanceof Wi?t.exported.getImageData(n):n,{width:o,height:a,data:s}=r;if(void 0===o||void 0===a)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==i.data.width||a!==i.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(n instanceof Vi||Wi&&n instanceof Wi);i.data.replace(s,l),this.style.updateImage(e,i)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,i)=>{n(e,i instanceof Vi?t.exported.getImageData(i):i)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e,n={}){return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n,i={}){return this.style.setPaintProperty(t,e,n,i),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n,i={}){return this.style.setLayoutProperty(t,e,n,i),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}queryTerrainElevation(e,n){const i=this.transform.elevation;return i?(n=t.extend({},{exaggerated:!0},n),i.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=r.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=r.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=r.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);const i=this._controlContainer=r.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{o[t]=r.create("div",`mapboxgl-ctrl-${t}`,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const i=t.exported.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${n}px`}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_setupPainter(){const n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(t.storeAuthState(i,!0),this.painter=new Ln(i,this.transform),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.isMoving()&&this.loaded()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const i=this.painter.context.extTimerQuery,r=t.exported.now();this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n));const o=t.PerformanceUtils.beginMeasure("render");let a=this._updateAverageElevation(r);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;let s=!1;const l=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=t.exported.now();this.style.zoomHistory.update(e,n);const i=new t.EvaluationParameters(e,{now:n,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=i.crossFadingFactor();1===r&&r===this._crossFadingFactor||(s=!0,this._crossFadingFactor=r),this.style.update(i)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||s)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const r=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))}),50)}if(t.PerformanceUtils.endMeasure(o),this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const u=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(u||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(a=this._updateAverageElevation(r,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||u||(this._fullyLoaded=!0,this._authenticate(),t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}_updateAverageElevation(t,e=!1){const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let i=this.transform.sampleAverageElevation();isNaN(i)?i=0:this._averageElevationLastSampledAt=t;const r=Math.abs(e-i);if(r>1)this._averageElevation.easeTo(i,t,300);else if(r>1e-4)return this._averageElevation.jumpTo(i),n(i)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof Oi&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,i=n.createFramebuffer();function r(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(r(t),e.canvasCopies.map(r),e.timeStamps)}_canvasPixelComparison(t,e,n){let i=n[1]-n[0];const r=t.length/4;for(let o=0;o<e.length;o++){const a=e[o];let s=0;for(let e=0;e<a.length;e+=4)a[e]===t[e]&&a[e+1]===t[e+1]&&a[e+2]===t[e+2]&&a[e+3]===t[e+3]&&(s+=1);i+=(n[o+2]-n[o+1])*(1-s/r)}return i}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),Xi(this._canvasContainer),Xi(this._controlContainer),Xi(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),t.PerformanceUtils.clearMetrics(),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((e=>{const n=!!this._renderNextFrame;t.PerformanceUtils.frame(e,n),this._frame=null,this._renderNextFrame=null,n&&this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},Ki,e),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),r.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),r.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=r.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ji(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=r.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){const n=this._map._getUIString(`NavigationControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}},GeolocateControl:ir,AttributionControl:Ri,ScaleControl:class{constructor(e){this.options=t.extend({},rr,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){or(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,or(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){r.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=r.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);r.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:ur,Marker:Ui,Style:Qt,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:On,Evented:t.Evented,config:t.config,prewarm:function(){q().acquire($)},clearPrewarmedResources:function(){const t=V;t&&(t.isPreloaded()&&1===t.numActive()?(t.release($),V=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return H.workerCount},set workerCount(t){H.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return t.Debug.extend(fr,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics,getPerformanceMetricsAsync:dr.getPerformanceMetricsAsync}),t.assert_1(!0,"canary assert"),fr})),i}()},2786:function(t,e,n){!function(t){"use strict";t.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(t){return/^nm$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},6440:function(t,e,n){!function(t){"use strict";var e={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},r=function(t){return function(e,r,o,a){var s=n(e),l=i[t][n(e)];return 2===s&&(l=l[r?0:1]),l.replace(/%d/i,e)}},o=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];t.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(t){return t.replace(/\u200f/g,"").replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(381))},7702:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}(n(381))},6040:function(t,e,n){!function(t){"use strict";var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};t.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(t){return t.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(381))},5671:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(381))},867:function(t,e,n){!function(t){"use strict";var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},r={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},o=function(t){return function(e,n,o,a){var s=i(e),l=r[t][i(e)];return 2===s&&(l=l[n?0:1]),l.replace(/%d/i,e)}},a=["كانون الثاني يناير","شباط فبراير","آذار مارس","نيسان أبريل","أيار مايو","حزيران يونيو","تموز يوليو","آب أغسطس","أيلول سبتمبر","تشرين الأول أكتوبر","تشرين الثاني نوفمبر","كانون الأول ديسمبر"];t.defineLocale("ar",{months:a,monthsShort:a,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(t){return t.replace(/\u200f/g,"").replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(381))},1083:function(t,e,n){!function(t){"use strict";var e={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};t.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(t){return/^(gündüz|axşam)$/.test(t)},meridiem:function(t,e,n){return t<4?"gecə":t<12?"səhər":t<17?"gündüz":"axşam"},ordinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(t){if(0===t)return t+"-ıncı";var n=t%10;return t+(e[n]||e[t%100-n]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},9808:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"хвіліна":"хвіліну":"h"===n?e?"гадзіна":"гадзіну":t+" "+(i=+t,r={mm:e?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:e?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}t.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:e,mm:e,h:e,hh:e,d:"дзень",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(t){return/^(дня|вечара)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночы":t<12?"раніцы":t<17?"дня":"вечара"},ordinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t%10!=2&&t%10!=3||t%100==12||t%100==13?t+"-ы":t+"-і";case"D":return t+"-га";default:return t}},week:{dow:1,doy:7}})}(n(381))},8338:function(t,e,n){!function(t){"use strict";t.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-ев":0===n?t+"-ен":n>10&&n<20?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}(n(381))},8905:function(t,e,n){!function(t){"use strict";var e={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};t.defineLocale("bn",{months:"জানুয়ারী_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপ্র_মে_জুন_জুল_আগ_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গ_বুধ_বৃহঃ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(t){return t.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(t,e){return 12===t&&(t=0),"রাত"===e&&t>=4||"দুপুর"===e&&t<5||"বিকাল"===e?t+12:t},meridiem:function(t,e,n){return t<4?"রাত":t<10?"সকাল":t<17?"দুপুর":t<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(381))},1560:function(t,e,n){!function(t){"use strict";var e={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};t.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(t){return t.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(t,e){return 12===t&&(t=0),"མཚན་མོ"===e&&t>=4||"ཉིན་གུང"===e&&t<5||"དགོང་དག"===e?t+12:t},meridiem:function(t,e,n){return t<4?"མཚན་མོ":t<10?"ཞོགས་ཀས":t<17?"ཉིན་གུང":t<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(381))},1278:function(t,e,n){!function(t){"use strict";function e(t,e,n){return t+" "+function(t,e){return 2===e?function(t){var e={m:"v",b:"v",d:"z"};return void 0===e[t.charAt(0)]?t:e[t.charAt(0)]+t.substring(1)}(t):t}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],t)}function n(t){return t>9?n(t%10):t}t.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:e,h:"un eur",hh:"%d eur",d:"un devezh",dd:e,M:"ur miz",MM:e,y:"ur bloaz",yy:function(t){switch(n(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}},ordinalParse:/\d{1,2}(añ|vet)/,ordinal:function(t){return t+(1===t?"añ":"vet")},week:{dow:1,doy:4}})}(n(381))},622:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=t+" ";switch(n){case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+(1===t?"minuta":2===t||3===t||4===t?"minute":"minuta");case"h":return e?"jedan sat":"jednog sata";case"hh":return i+(1===t?"sat":2===t||3===t||4===t?"sata":"sati");case"dd":return i+(1===t?"dan":"dana");case"MM":return i+(1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci");case"yy":return i+(1===t?"godina":2===t||3===t||4===t?"godine":"godina")}}t.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},2468:function(t,e,n){!function(t){"use strict";t.defineLocale("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(t,e){var n=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"è";return"w"!==e&&"W"!==e||(n="a"),t+n},week:{dow:1,doy:4}})}(n(381))},5822:function(t,e,n){!function(t){"use strict";var e="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");function i(t){return t>1&&t<5&&1!=~~(t/10)}function r(t,e,n,r){var o=t+" ";switch(n){case"s":return e||r?"pár sekund":"pár sekundami";case"m":return e?"minuta":r?"minutu":"minutou";case"mm":return e||r?o+(i(t)?"minuty":"minut"):o+"minutami";case"h":return e?"hodina":r?"hodinu":"hodinou";case"hh":return e||r?o+(i(t)?"hodiny":"hodin"):o+"hodinami";case"d":return e||r?"den":"dnem";case"dd":return e||r?o+(i(t)?"dny":"dní"):o+"dny";case"M":return e||r?"měsíc":"měsícem";case"MM":return e||r?o+(i(t)?"měsíce":"měsíců"):o+"měsíci";case"y":return e||r?"rok":"rokem";case"yy":return e||r?o+(i(t)?"roky":"let"):o+"lety"}}t.defineLocale("cs",{months:e,monthsShort:n,monthsParse:function(t,e){var n,i=[];for(n=0;n<12;n++)i[n]=new RegExp("^"+t[n]+"$|^"+e[n]+"$","i");return i}(e,n),shortMonthsParse:function(t){var e,n=[];for(e=0;e<12;e++)n[e]=new RegExp("^"+t[e]+"$","i");return n}(n),longMonthsParse:function(t){var e,n=[];for(e=0;e<12;e++)n[e]=new RegExp("^"+t[e]+"$","i");return n}(e),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},877:function(t,e,n){!function(t){"use strict";t.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(t){return t+(/сехет$/i.exec(t)?"рен":/ҫул$/i.exec(t)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},ordinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(381))},7373:function(t,e,n){!function(t){"use strict";t.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(t){var e="";return t>20?e=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(e=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][t]),t+e},week:{dow:1,doy:4}})}(n(381))},4780:function(t,e,n){!function(t){"use strict";t.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},217:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9740:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5300:function(t,e,n){!function(t){"use strict";var e=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];t.defineLocale("dv",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(t){return"މފ"===t},meridiem:function(t,e,n){return t<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(381))},837:function(t,e,n){!function(t){"use strict";t.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(t,e){return/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(t,e,n){return t>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(t){return"μ"===(t+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(t,e){var n,i=this._calendarEl[t],r=e&&e.hours();return((n=i)instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(i=i.apply(e)),i.replace("{}",r%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(381))},8348:function(t,e,n){!function(t){"use strict";t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},7925:function(t,e,n){!function(t){"use strict";t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(381))},2243:function(t,e,n){!function(t){"use strict";t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},6436:function(t,e,n){!function(t){"use strict";t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},9245:function(t,e,n){!function(t){"use strict";t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},2915:function(t,e,n){!function(t){"use strict";t.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(t){return"p"===t.charAt(0).toLowerCase()},meridiem:function(t,e,n){return t>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(381))},5251:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},5655:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},5603:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[t+" minuti",t+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[t+" tunni",t+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[t+" kuu",t+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[t+" aasta",t+" aastat"]};return e?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}t.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d päeva",M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},7763:function(t,e,n){!function(t){"use strict";t.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},6959:function(t,e,n){!function(t){"use strict";var e={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};t.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(t){return/بعد از ظهر/.test(t)},meridiem:function(t,e,n){return t<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(t){return t.replace(/[۰-۹]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},ordinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(381))},1897:function(t,e,n){!function(t){"use strict";var e="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",e[7],e[8],e[9]];function i(t,i,r,o){var a="";switch(r){case"s":return o?"muutaman sekunnin":"muutama sekunti";case"m":return o?"minuutin":"minuutti";case"mm":a=o?"minuutin":"minuuttia";break;case"h":return o?"tunnin":"tunti";case"hh":a=o?"tunnin":"tuntia";break;case"d":return o?"päivän":"päivä";case"dd":a=o?"päivän":"päivää";break;case"M":return o?"kuukauden":"kuukausi";case"MM":a=o?"kuukauden":"kuukautta";break;case"y":return o?"vuoden":"vuosi";case"yy":a=o?"vuoden":"vuotta"}return function(t,i){return t<10?i?n[t]:e[t]:t}(t,o)+" "+a}t.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},4694:function(t,e,n){!function(t){"use strict";t.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},3049:function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(t){return t+(1===t?"er":"e")}})}(n(381))},2330:function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(t){return t+(1===t?"er":"e")},week:{dow:1,doy:4}})}(n(381))},4470:function(t,e,n){!function(t){"use strict";t.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(t){return t+(1===t?"er":"")},week:{dow:1,doy:4}})}(n(381))},5044:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");t.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},2101:function(t,e,n){!function(t){"use strict";t.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],monthsShort:["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],monthsParseExact:!0,weekdays:["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["Dò","Lu","Mà","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(381))},8794:function(t,e,n){!function(t){"use strict";t.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return 0===t.indexOf("un")?"n"+t:"en "+t},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},4206:function(t,e,n){!function(t){"use strict";t.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(t){return 2===t?"שעתיים":t+" שעות"},d:"יום",dd:function(t){return 2===t?"יומיים":t+" ימים"},M:"חודש",MM:function(t){return 2===t?"חודשיים":t+" חודשים"},y:"שנה",yy:function(t){return 2===t?"שנתיים":t%10==0&&10!==t?t+" שנה":t+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(t){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(t)},meridiem:function(t,e,n){return t<5?"לפנות בוקר":t<10?"בבוקר":t<12?n?'לפנה"צ':"לפני הצהריים":t<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(381))},94:function(t,e,n){!function(t){"use strict";var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};t.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(t,e){return 12===t&&(t=0),"रात"===e?t<4?t:t+12:"सुबह"===e?t:"दोपहर"===e?t>=10?t:t+12:"शाम"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"रात":t<10?"सुबह":t<17?"दोपहर":t<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(381))},316:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=t+" ";switch(n){case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+(1===t?"minuta":2===t||3===t||4===t?"minute":"minuta");case"h":return e?"jedan sat":"jednog sata";case"hh":return i+(1===t?"sat":2===t||3===t||4===t?"sata":"sati");case"dd":return i+(1===t?"dan":"dana");case"MM":return i+(1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci");case"yy":return i+(1===t?"godina":2===t||3===t||4===t?"godine":"godina")}}t.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},2138:function(t,e,n){!function(t){"use strict";var e="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(t,e,n,i){var r=t;switch(n){case"s":return i||e?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(i||e?" perc":" perce");case"mm":return r+(i||e?" perc":" perce");case"h":return"egy"+(i||e?" óra":" órája");case"hh":return r+(i||e?" óra":" órája");case"d":return"egy"+(i||e?" nap":" napja");case"dd":return r+(i||e?" nap":" napja");case"M":return"egy"+(i||e?" hónap":" hónapja");case"MM":return r+(i||e?" hónap":" hónapja");case"y":return"egy"+(i||e?" év":" éve");case"yy":return r+(i||e?" év":" éve")}return""}function i(t){return(t?"":"[múlt] ")+"["+e[this.day()]+"] LT[-kor]"}t.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(t){return"u"===t.charAt(1).toLowerCase()},meridiem:function(t,e,n){return t<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},1423:function(t,e,n){!function(t){"use strict";t.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(t){return/^(ցերեկվա|երեկոյան)$/.test(t)},meridiem:function(t){return t<4?"գիշերվա":t<12?"առավոտվա":t<17?"ցերեկվա":"երեկոյան"},ordinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-ին":t+"-րդ";default:return t}},week:{dow:1,doy:7}})}(n(381))},9218:function(t,e,n){!function(t){"use strict";t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"siang"===e?t>=11?t:t+12:"sore"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"siang":t<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},135:function(t,e,n){!function(t){"use strict";function e(t){return t%100==11||t%10!=1}function n(t,n,i,r){var o=t+" ";switch(i){case"s":return n||r?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return n?"mínúta":"mínútu";case"mm":return e(t)?o+(n||r?"mínútur":"mínútum"):n?o+"mínúta":o+"mínútu";case"hh":return e(t)?o+(n||r?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":r?"dag":"degi";case"dd":return e(t)?n?o+"dagar":o+(r?"daga":"dögum"):n?o+"dagur":o+(r?"dag":"degi");case"M":return n?"mánuður":r?"mánuð":"mánuði";case"MM":return e(t)?n?o+"mánuðir":o+(r?"mánuði":"mánuðum"):n?o+"mánuður":o+(r?"mánuð":"mánuði");case"y":return n||r?"ár":"ári";case"yy":return e(t)?o+(n||r?"ár":"árum"):o+(n||r?"ár":"ári")}}t.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},626:function(t,e,n){!function(t){"use strict";t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},9183:function(t,e,n){!function(t){"use strict";t.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",LTS:"Ah時m分s秒",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah時m分",LLLL:"YYYY年M月D日Ah時m分 dddd"},meridiemParse:/午前|午後/i,isPM:function(t){return"午後"===t},meridiem:function(t,e,n){return t<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}日/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";default:return t}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(381))},4286:function(t,e,n){!function(t){"use strict";t.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(t,e){return 12===t&&(t=0),"enjing"===e?t:"siyang"===e?t>=11?t:t+12:"sonten"===e||"ndalu"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"enjing":t<15?"siyang":t<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(381))},2105:function(t,e,n){!function(t){"use strict";t.defineLocale("ka",{months:{standalone:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),format:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(t){return/(წამი|წუთი|საათი|წელი)/.test(t)?t.replace(/ი$/,"ში"):t+"ში"},past:function(t){return/(წამი|წუთი|საათი|დღე|თვე)/.test(t)?t.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(t)?t.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(t){return 0===t?t:1===t?t+"-ლი":t<20||t<=100&&t%20==0||t%100==0?"მე-"+t:t+"-ე"},week:{dow:1,doy:7}})}(n(381))},7772:function(t,e,n){!function(t){"use strict";var e={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};t.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},ordinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},8758:function(t,e,n){!function(t){"use strict";t.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}})}(n(381))},3730:function(t,e,n){!function(t){"use strict";t.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h시 m분",LLLL:"YYYY년 MMMM D일 dddd A h시 m분"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"일분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(t){return"오후"===t},meridiem:function(t,e,n){return t<12?"오전":"오후"}})}(n(381))},3291:function(t,e,n){!function(t){"use strict";var e={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};t.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кече саат] LT",lastWeek:"[Өткен аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},ordinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},6841:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return e?r[n][0]:r[n][1]}function n(t){if(t=parseInt(t,10),isNaN(t))return!1;if(t<0)return!0;if(t<10)return 4<=t&&t<=7;if(t<100){var e=t%10;return n(0===e?t/10:e)}if(t<1e4){for(;t>=10;)t/=10;return n(t)}return n(t/=1e3)}t.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(t){return n(t.substr(0,t.indexOf(" ")))?"a "+t:"an "+t},past:function(t){return n(t.substr(0,t.indexOf(" ")))?"viru "+t:"virun "+t},s:"e puer Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:"%d Deeg",M:e,MM:"%d Méint",y:e,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5466:function(t,e,n){!function(t){"use strict";t.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(t){return"ຕອນແລງ"===t},meridiem:function(t,e,n){return t<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},ordinalParse:/(ທີ່)\d{1,2}/,ordinal:function(t){return"ທີ່"+t}})}(n(381))},7010:function(t,e,n){!function(t){"use strict";var e={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(t,e,n,i){return e?r(n)[0]:i?r(n)[1]:r(n)[2]}function i(t){return t%10==0||t>10&&t<20}function r(t){return e[t].split("_")}function o(t,e,o,a){var s=t+" ";return 1===t?s+n(0,e,o[0],a):e?s+(i(t)?r(o)[1]:r(o)[0]):a?s+r(o)[1]:s+(i(t)?r(o)[1]:r(o)[2])}t.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?|MMMM?(\[[^\[\]]*\]|\s+)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:function(t,e,n,i){return e?"kelios sekundės":i?"kelių sekundžių":"kelias sekundes"},m:n,mm:o,h:n,hh:o,d:n,dd:o,M:n,MM:o,y:n,yy:o},ordinalParse:/\d{1,2}-oji/,ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}(n(381))},7595:function(t,e,n){!function(t){"use strict";var e={m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(t,e,n){return n?e%10==1&&e%100!=11?t[2]:t[3]:e%10==1&&e%100!=11?t[0]:t[1]}function i(t,i,r){return t+" "+n(e[r],t,i)}function r(t,i,r){return n(e[r],t,i)}t.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:function(t,e){return e?"dažas sekundes":"dažām sekundēm"},m:r,mm:i,h:r,hh:i,d:r,dd:i,M:r,MM:i,y:r,yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9861:function(t,e,n){!function(t){"use strict";var e={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mjesec",MM:e.translate,y:"godinu",yy:e.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},5493:function(t,e,n){!function(t){"use strict";t.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},5966:function(t,e,n){!function(t){"use strict";t.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-ев":0===n?t+"-ен":n>10&&n<20?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}(n(381))},7341:function(t,e,n){!function(t){"use strict";t.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(t,e){return 12===t&&(t=0),"രാത്രി"===e&&t>=4||"ഉച്ച കഴിഞ്ഞ്"===e||"വൈകുന്നേരം"===e?t+12:t},meridiem:function(t,e,n){return t<4?"രാത്രി":t<12?"രാവിലെ":t<17?"ഉച്ച കഴിഞ്ഞ്":t<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(381))},370:function(t,e,n){!function(t){"use strict";var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function i(t,e,n,i){var r="";if(e)switch(n){case"s":r="काही सेकंद";break;case"m":r="एक मिनिट";break;case"mm":r="%d मिनिटे";break;case"h":r="एक तास";break;case"hh":r="%d तास";break;case"d":r="एक दिवस";break;case"dd":r="%d दिवस";break;case"M":r="एक महिना";break;case"MM":r="%d महिने";break;case"y":r="एक वर्ष";break;case"yy":r="%d वर्षे"}else switch(n){case"s":r="काही सेकंदां";break;case"m":r="एका मिनिटा";break;case"mm":r="%d मिनिटां";break;case"h":r="एका तासा";break;case"hh":r="%d तासां";break;case"d":r="एका दिवसा";break;case"dd":r="%d दिवसां";break;case"M":r="एका महिन्या";break;case"MM":r="%d महिन्यां";break;case"y":r="एका वर्षा";break;case"yy":r="%d वर्षां"}return r.replace(/%d/i,t)}t.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(t,e){return 12===t&&(t=0),"रात्री"===e?t<4?t:t+12:"सकाळी"===e?t:"दुपारी"===e?t>=10?t:t+12:"सायंकाळी"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"रात्री":t<10?"सकाळी":t<17?"दुपारी":t<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(381))},1237:function(t,e,n){!function(t){"use strict";t.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},9847:function(t,e,n){!function(t){"use strict";t.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},6165:function(t,e,n){!function(t){"use strict";var e={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};t.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(t){return t.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},week:{dow:1,doy:4}})}(n(381))},4924:function(t,e,n){!function(t){"use strict";t.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},6744:function(t,e,n){!function(t){"use strict";var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};t.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(t,e){return 12===t&&(t=0),"राति"===e?t<4?t:t+12:"बिहान"===e?t:"दिउँसो"===e?t>=10?t:t+12:"साँझ"===e?t+12:void 0},meridiem:function(t,e,n){return t<3?"राति":t<12?"बिहान":t<16?"दिउँसो":t<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(381))},3901:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},3877:function(t,e,n){!function(t){"use strict";t.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5858:function(t,e,n){!function(t){"use strict";var e={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};t.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(t){return t.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(t,e){return 12===t&&(t=0),"ਰਾਤ"===e?t<4?t:t+12:"ਸਵੇਰ"===e?t:"ਦੁਪਹਿਰ"===e?t>=10?t:t+12:"ਸ਼ਾਮ"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"ਰਾਤ":t<10?"ਸਵੇਰ":t<17?"ਦੁਪਹਿਰ":t<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(381))},4495:function(t,e,n){!function(t){"use strict";var e="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");function i(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function r(t,e,n){var r=t+" ";switch(n){case"m":return e?"minuta":"minutę";case"mm":return r+(i(t)?"minuty":"minut");case"h":return e?"godzina":"godzinę";case"hh":return r+(i(t)?"godziny":"godzin");case"MM":return r+(i(t)?"miesiące":"miesięcy");case"yy":return r+(i(t)?"lata":"lat")}}t.defineLocale("pl",{months:function(t,i){return""===i?"("+n[t.month()]+"|"+e[t.month()]+")":/D MMMM/.test(i)?n[t.month()]:e[t.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:r,mm:r,h:r,hh:r,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:r,y:"rok",yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},7971:function(t,e,n){!function(t){"use strict";t.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"})}(n(381))},9520:function(t,e,n){!function(t){"use strict";t.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},6459:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=" ";return(t%100>=20||t>=100&&t%100==0)&&(i=" de "),t+i+{mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}t.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:e,h:"o oră",hh:e,d:"o zi",dd:e,M:"o lună",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})}(n(381))},1793:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"минута":"минуту":t+" "+(i=+t,r={mm:e?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}var n=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];t.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:e,mm:e,h:"час",hh:e,d:"день",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночи":t<12?"утра":t<17?"дня":"вечера"},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:7}})}(n(381))},490:function(t,e,n){!function(t){"use strict";t.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},124:function(t,e,n){!function(t){"use strict";t.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},ordinalParse:/\d{1,2} වැනි/,ordinal:function(t){return t+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(t){return"ප.ව."===t||"පස් වරු"===t},meridiem:function(t,e,n){return t>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(381))},4249:function(t,e,n){!function(t){"use strict";var e="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function i(t){return t>1&&t<5}function r(t,e,n,r){var o=t+" ";switch(n){case"s":return e||r?"pár sekúnd":"pár sekundami";case"m":return e?"minúta":r?"minútu":"minútou";case"mm":return e||r?o+(i(t)?"minúty":"minút"):o+"minútami";case"h":return e?"hodina":r?"hodinu":"hodinou";case"hh":return e||r?o+(i(t)?"hodiny":"hodín"):o+"hodinami";case"d":return e||r?"deň":"dňom";case"dd":return e||r?o+(i(t)?"dni":"dní"):o+"dňami";case"M":return e||r?"mesiac":"mesiacom";case"MM":return e||r?o+(i(t)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return e||r?"rok":"rokom";case"yy":return e||r?o+(i(t)?"roky":"rokov"):o+"rokmi"}}t.defineLocale("sk",{months:e,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},4985:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r=t+" ";switch(n){case"s":return e||i?"nekaj sekund":"nekaj sekundami";case"m":return e?"ena minuta":"eno minuto";case"mm":return r+(1===t?e?"minuta":"minuto":2===t?e||i?"minuti":"minutama":t<5?e||i?"minute":"minutami":e||i?"minut":"minutami");case"h":return e?"ena ura":"eno uro";case"hh":return r+(1===t?e?"ura":"uro":2===t?e||i?"uri":"urama":t<5?e||i?"ure":"urami":e||i?"ur":"urami");case"d":return e||i?"en dan":"enim dnem";case"dd":return r+(1===t?e||i?"dan":"dnem":2===t?e||i?"dni":"dnevoma":e||i?"dni":"dnevi");case"M":return e||i?"en mesec":"enim mesecem";case"MM":return r+(1===t?e||i?"mesec":"mesecem":2===t?e||i?"meseca":"mesecema":t<5?e||i?"mesece":"meseci":e||i?"mesecev":"meseci");case"y":return e||i?"eno leto":"enim letom";case"yy":return r+(1===t?e||i?"leto":"letom":2===t?e||i?"leti":"letoma":t<5?e||i?"leta":"leti":e||i?"let":"leti")}}t.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},1104:function(t,e,n){!function(t){"use strict";t.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(t){return"M"===t.charAt(0)},meridiem:function(t,e,n){return t<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9915:function(t,e,n){!function(t){"use strict";var e={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"дан",dd:e.translate,M:"месец",MM:e.translate,y:"годину",yy:e.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},9131:function(t,e,n){!function(t){"use strict";var e={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},5893:function(t,e,n){!function(t){"use strict";t.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(t,e,n){return t<11?"ekuseni":t<15?"emini":t<19?"entsambama":"ebusuku"},meridiemHour:function(t,e){return 12===t&&(t=0),"ekuseni"===e?t:"emini"===e?t>=11?t:t+12:"entsambama"===e||"ebusuku"===e?0===t?0:t+12:void 0},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},8760:function(t,e,n){!function(t){"use strict";t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"e":1===e||2===e?"a":"e")},week:{dow:1,doy:4}})}(n(381))},1172:function(t,e,n){!function(t){"use strict";t.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(381))},7333:function(t,e,n){!function(t){"use strict";var e={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};t.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinalParse:/\d{1,2}வது/,ordinal:function(t){return t+"வது"},preparse:function(t){return t.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(t,e,n){return t<2?" யாமம்":t<6?" வைகறை":t<10?" காலை":t<14?" நண்பகல்":t<18?" எற்பாடு":t<22?" மாலை":" யாமம்"},meridiemHour:function(t,e){return 12===t&&(t=0),"யாமம்"===e?t<2?t:t+12:"வைகறை"===e||"காலை"===e||"நண்பகல்"===e&&t>=10?t:t+12},week:{dow:0,doy:6}})}(n(381))},3110:function(t,e,n){!function(t){"use strict";t.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జూలై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జూలై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},ordinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(t,e){return 12===t&&(t=0),"రాత్రి"===e?t<4?t:t+12:"ఉదయం"===e?t:"మధ్యాహ్నం"===e?t>=10?t:t+12:"సాయంత్రం"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"రాత్రి":t<10?"ఉదయం":t<17?"మధ్యాహ్నం":t<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(381))},9041:function(t,e,n){!function(t){"use strict";t.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(t){return"หลังเที่ยง"===t},meridiem:function(t,e,n){return t<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(381))},5768:function(t,e,n){!function(t){"use strict";t.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(381))},9444:function(t,e,n){!function(t){"use strict";var e="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(t,n,i,r){var o=function(t){var n=Math.floor(t%1e3/100),i=Math.floor(t%100/10),r=t%10,o="";return n>0&&(o+=e[n]+"vatlh"),i>0&&(o+=(""!==o?" ":"")+e[i]+"maH"),r>0&&(o+=(""!==o?" ":"")+e[r]),""===o?"pagh":o}(t);switch(i){case"mm":return o+" tup";case"hh":return o+" rep";case"dd":return o+" jaj";case"MM":return o+" jar";case"yy":return o+" DIS"}}t.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(t){var e=t;return-1!==t.indexOf("jaj")?e.slice(0,-3)+"leS":-1!==t.indexOf("jar")?e.slice(0,-3)+"waQ":-1!==t.indexOf("DIS")?e.slice(0,-3)+"nem":e+" pIq"},past:function(t){var e=t;return-1!==t.indexOf("jaj")?e.slice(0,-3)+"Hu’":-1!==t.indexOf("jar")?e.slice(0,-3)+"wen":-1!==t.indexOf("DIS")?e.slice(0,-3)+"ben":e+" ret"},s:"puS lup",m:"wa’ tup",mm:n,h:"wa’ rep",hh:n,d:"wa’ jaj",dd:n,M:"wa’ jar",MM:n,y:"wa’ DIS",yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},2397:function(t,e,n){!function(t){"use strict";var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};t.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(t){if(0===t)return t+"'ıncı";var n=t%10;return t+(e[n]||e[t%100-n]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},8254:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["viensas secunds","'iensas secunds"],m:["'n míut","'iens míut"],mm:[t+" míuts",t+" míuts"],h:["'n þora","'iensa þora"],hh:[t+" þoras",t+" þoras"],d:["'n ziua","'iensa ziua"],dd:[t+" ziuas",t+" ziuas"],M:["'n mes","'iens mes"],MM:[t+" mesen",t+" mesen"],y:["'n ar","'iens ar"],yy:[t+" ars",t+" ars"]};return i||e?r[n][0]:r[n][1]}t.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(t){return"d'o"===t.toLowerCase()},meridiem:function(t,e,n){return t>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},699:function(t,e,n){!function(t){"use strict";t.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(381))},1106:function(t,e,n){!function(t){"use strict";t.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(381))},7691:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"хвилина":"хвилину":"h"===n?e?"година":"годину":t+" "+(i=+t,r={mm:e?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:e?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}function n(t){return function(){return t+"о"+(11===this.hours()?"б":"")+"] LT"}}t.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:function(t,e){return{nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")}[/(\[[ВвУу]\]) ?dddd/.test(e)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(e)?"genitive":"nominative"][t.day()]},weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:n("[Сьогодні "),nextDay:n("[Завтра "),lastDay:n("[Вчора "),nextWeek:n("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[Минулої] dddd [").call(this);case 1:case 2:case 4:return n("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:e,mm:e,h:"годину",hh:e,d:"день",dd:e,M:"місяць",MM:e,y:"рік",yy:e},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(t){return/^(дня|вечора)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночі":t<12?"ранку":t<17?"дня":"вечора"},ordinalParse:/\d{1,2}-(й|го)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-й";case"D":return t+"-го";default:return t}},week:{dow:1,doy:7}})}(n(381))},6791:function(t,e,n){!function(t){"use strict";t.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(381))},5666:function(t,e,n){!function(t){"use strict";t.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(t){return/^ch$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(381))},4378:function(t,e,n){!function(t){"use strict";t.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},3839:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var e,n;return e=t().startOf("week"),n=this.diff(e,"days")>=7?"[下]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},lastWeek:function(){var e,n;return e=t().startOf("week"),n=this.unix()<e.unix()?"[上]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(381))},5726:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm分",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah點mm分",LLLL:"YYYY年MMMD日ddddAh點mm分",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah點mm分",llll:"YYYY年MMMD日ddddAh點mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(381))},4152:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm分",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah點mm分",LLLL:"YYYY年MMMD日ddddAh點mm分",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah點mm分",llll:"YYYY年MMMD日ddddAh點mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(381))},381:function(t,e,n){(t=n.nmd(t)).exports=function(){"use strict";var e,i;function r(){return e.apply(null,arguments)}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var n in e)u(e,n)&&(t[n]=e[n]);return u(e,"toString")&&(t.toString=e.toString),u(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,n,i){return ge(t,e,n,i,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}),t._pf}function f(t){if(null==t._isValid){var e=d(t),n=i.call(e.parsedDateParts,(function(t){return null!=t})),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function p(t){var e=h(NaN);return null!=t?c(d(e),t):d(e).userInvalidated=!0,e}function m(t){return void 0===t}i=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var _=r.momentProperties=[];function g(t,e){var n,i,r;if(m(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),m(e._i)||(t._i=e._i),m(e._f)||(t._f=e._f),m(e._l)||(t._l=e._l),m(e._strict)||(t._strict=e._strict),m(e._tzm)||(t._tzm=e._tzm),m(e._isUTC)||(t._isUTC=e._isUTC),m(e._offset)||(t._offset=e._offset),m(e._pf)||(t._pf=d(e)),m(e._locale)||(t._locale=e._locale),_.length>0)for(n in _)m(r=e[i=_[n]])||(t[i]=r);return t}var y=!1;function v(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===y&&(y=!0,r.updateOffset(this),y=!1)}function x(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function b(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=b(e)),n}function M(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&w(t[i])!==w(e[i]))&&a++;return a+o}function T(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function k(t,e){var n=!0;return c((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}T(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var S,E={};function C(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),E[t]||(T(e),E[t]=!0)}function L(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t,e){var n,i=c({},t);for(n in e)u(e,n)&&(a(t[n])&&a(e[n])?(i[n]={},c(i[n],t[n]),c(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)u(t,n)&&!u(e,n)&&a(t[n])&&(i[n]=c({},i[n]));return i}function A(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,S=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)u(t,e)&&n.push(e);return n};var P={};function I(t,e){var n=t.toLowerCase();P[n]=P[n+"s"]=P[e]=t}function z(t){return"string"==typeof t?P[t]||P[t.toLowerCase()]:void 0}function F(t){var e,n,i={};for(n in t)u(t,n)&&(e=z(n))&&(i[e]=t[n]);return i}var R={};function O(t,e){R[t]=e}function Y(t,e){return function(n){return null!=n?(B(this,t,n),r.updateOffset(this,e),this):N(this,t)}}function N(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function B(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function j(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var U=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,$=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},V={};function q(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(V[t]=r),e&&(V[e[0]]=function(){return j(r.apply(this,arguments),e[1],e[2])}),n&&(V[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function W(t,e){return t.isValid()?(e=G(e,t.localeData()),H[e]=H[e]||function(t){var e,n,i,r=t.match(U);for(e=0,n=r.length;e<n;e++)V[r[e]]?r[e]=V[r[e]]:r[e]=(i=r[e]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(e){var i,o="";for(i=0;i<n;i++)o+=r[i]instanceof Function?r[i].call(e,t):r[i];return o}}(e),H[e](t)):t.localeData().invalidDate()}function G(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for($.lastIndex=0;n>=0&&$.test(t);)t=t.replace($,i),$.lastIndex=0,n-=1;return t}var Z=/\d/,X=/\d\d/,K=/\d{3}/,J=/\d{4}/,Q=/[+-]?\d{6}/,tt=/\d\d?/,et=/\d\d\d\d?/,nt=/\d\d\d\d\d\d?/,it=/\d{1,3}/,rt=/\d{1,4}/,ot=/[+-]?\d{1,6}/,at=/\d+/,st=/[+-]?\d+/,lt=/Z|[+-]\d\d:?\d\d/gi,ut=/Z|[+-]\d\d(?::?\d\d)?/gi,ct=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ht={};function dt(t,e,n){ht[t]=L(e)?e:function(t,i){return t&&n?n:e}}function ft(t,e){return u(ht,t)?ht[t](e._strict,e._locale):new RegExp(pt(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,r){return e||n||i||r}))))}function pt(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var mt={};function _t(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=w(t)}),n=0;n<t.length;n++)mt[t[n]]=i}function gt(t,e){_t(t,(function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)}))}function yt(t,e,n){null!=e&&u(mt,t)&&mt[t](e,n._a,n,t)}var vt;function xt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}vt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},q("M",["MM",2],"Mo",(function(){return this.month()+1})),q("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),q("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),I("month","M"),O("month",8),dt("M",tt),dt("MM",tt,X),dt("MMM",(function(t,e){return e.monthsShortRegex(t)})),dt("MMMM",(function(t,e){return e.monthsRegex(t)})),_t(["M","MM"],(function(t,e){e[1]=w(t)-1})),_t(["MMM","MMMM"],(function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[1]=r:d(n).invalidMonth=t}));var bt=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Mt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Tt(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=h([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=vt.call(this._shortMonthsParse,a))?r:null:-1!==(r=vt.call(this._longMonthsParse,a))?r:null:"MMM"===e?-1!==(r=vt.call(this._shortMonthsParse,a))||-1!==(r=vt.call(this._longMonthsParse,a))?r:null:-1!==(r=vt.call(this._longMonthsParse,a))||-1!==(r=vt.call(this._shortMonthsParse,a))?r:null}function kt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if("number"!=typeof(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),xt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function St(t){return null!=t?(kt(this,t),r.updateOffset(this,!0),this):N(this,"Month")}var Et=ct;var Ct=ct;function Lt(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],o=[];for(e=0;e<12;e++)n=h([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)i[e]=pt(i[e]),r[e]=pt(r[e]);for(e=0;e<24;e++)o[e]=pt(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Dt(t){return At(t)?366:365}function At(t){return t%4==0&&t%100!=0||t%400==0}q("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),q(0,["YY",2],0,(function(){return this.year()%100})),q(0,["YYYY",4],0,"year"),q(0,["YYYYY",5],0,"year"),q(0,["YYYYYY",6,!0],0,"year"),I("year","y"),O("year",1),dt("Y",st),dt("YY",tt,X),dt("YYYY",rt,J),dt("YYYYY",ot,Q),dt("YYYYYY",ot,Q),_t(["YYYYY","YYYYYY"],0),_t("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):w(t)})),_t("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),_t("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var Pt=Y("FullYear",!0);function It(t,e,n,i,r,o,a){var s=new Date(t,e,n,i,r,o,a);return t<100&&t>=0&&isFinite(s.getFullYear())&&s.setFullYear(t),s}function zt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function Ft(t,e,n){var i=7+e-n;return-(7+zt(t,0,i).getUTCDay()-e)%7+i-1}function Rt(t,e,n,i,r){var o,a,s=1+7*(e-1)+(7+n-i)%7+Ft(t,i,r);return s<=0?a=Dt(o=t-1)+s:s>Dt(t)?(o=t+1,a=s-Dt(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Ot(t,e,n){var i,r,o=Ft(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?i=a+Yt(r=t.year()-1,e,n):a>Yt(t.year(),e,n)?(i=a-Yt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Yt(t,e,n){var i=Ft(t,e,n),r=Ft(t+1,e,n);return(Dt(t)-i+r)/7}q("w",["ww",2],"wo","week"),q("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),O("week",5),O("isoWeek",5),dt("w",tt),dt("ww",tt,X),dt("W",tt),dt("WW",tt,X),gt(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=w(t)}));q("d",0,"do","day"),q("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),q("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),q("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),q("e",0,0,"weekday"),q("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),O("day",11),O("weekday",11),O("isoWeekday",11),dt("d",tt),dt("e",tt),dt("E",tt),dt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),dt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),dt("dddd",(function(t,e){return e.weekdaysRegex(t)})),gt(["dd","ddd","dddd"],(function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:d(n).invalidWeekday=t})),gt(["d","e","E"],(function(t,e,n,i){e[i]=w(t)}));var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Bt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var jt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ut(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=h([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=vt.call(this._weekdaysParse,a))?r:null:"ddd"===e?-1!==(r=vt.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=vt.call(this._minWeekdaysParse,a))?r:null:"dddd"===e?-1!==(r=vt.call(this._weekdaysParse,a))||-1!==(r=vt.call(this._shortWeekdaysParse,a))||-1!==(r=vt.call(this._minWeekdaysParse,a))?r:null:"ddd"===e?-1!==(r=vt.call(this._shortWeekdaysParse,a))||-1!==(r=vt.call(this._weekdaysParse,a))||-1!==(r=vt.call(this._minWeekdaysParse,a))?r:null:-1!==(r=vt.call(this._minWeekdaysParse,a))||-1!==(r=vt.call(this._weekdaysParse,a))||-1!==(r=vt.call(this._shortWeekdaysParse,a))?r:null}var $t=ct;var Ht=ct;var Vt=ct;function qt(){function t(t,e){return e.length-t.length}var e,n,i,r,o,a=[],s=[],l=[],u=[];for(e=0;e<7;e++)n=h([2e3,1]).day(e),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(i),s.push(r),l.push(o),u.push(i),u.push(r),u.push(o);for(a.sort(t),s.sort(t),l.sort(t),u.sort(t),e=0;e<7;e++)s[e]=pt(s[e]),l[e]=pt(l[e]),u[e]=pt(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Wt(){return this.hours()%12||12}function Gt(t,e){q(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Zt(t,e){return e._meridiemParse}q("H",["HH",2],0,"hour"),q("h",["hh",2],0,Wt),q("k",["kk",2],0,(function(){return this.hours()||24})),q("hmm",0,0,(function(){return""+Wt.apply(this)+j(this.minutes(),2)})),q("hmmss",0,0,(function(){return""+Wt.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)})),q("Hmm",0,0,(function(){return""+this.hours()+j(this.minutes(),2)})),q("Hmmss",0,0,(function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)})),Gt("a",!0),Gt("A",!1),I("hour","h"),O("hour",13),dt("a",Zt),dt("A",Zt),dt("H",tt),dt("h",tt),dt("HH",tt,X),dt("hh",tt,X),dt("hmm",et),dt("hmmss",nt),dt("Hmm",et),dt("Hmmss",nt),_t(["H","HH"],3),_t(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),_t(["h","hh"],(function(t,e,n){e[3]=w(t),d(n).bigHour=!0})),_t("hmm",(function(t,e,n){var i=t.length-2;e[3]=w(t.substr(0,i)),e[4]=w(t.substr(i)),d(n).bigHour=!0})),_t("hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[3]=w(t.substr(0,i)),e[4]=w(t.substr(i,2)),e[5]=w(t.substr(r)),d(n).bigHour=!0})),_t("Hmm",(function(t,e,n){var i=t.length-2;e[3]=w(t.substr(0,i)),e[4]=w(t.substr(i))})),_t("Hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[3]=w(t.substr(0,i)),e[4]=w(t.substr(i,2)),e[5]=w(t.substr(r))}));var Xt,Kt=Y("Hours",!0),Jt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",ordinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:wt,monthsShort:Mt,week:{dow:0,doy:6},weekdays:Nt,weekdaysMin:jt,weekdaysShort:Bt,meridiemParse:/[ap]\.?m?\.?/i},Qt={};function te(t){return t?t.toLowerCase().replace("_","-"):t}function ee(e){var i=null;if(!Qt[e]&&t&&t.exports)try{i=Xt._abbr,n(6700)("./"+e),ne(i)}catch(t){}return Qt[e]}function ne(t,e){var n;return t&&(n=m(e)?re(t):ie(t,e))&&(Xt=n),Xt._abbr}function ie(t,e){if(null!==e){var n=Jt;return e.abbr=t,null!=Qt[t]?(C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Qt[t]._config):null!=e.parentLocale&&(null!=Qt[e.parentLocale]?n=Qt[e.parentLocale]._config:C("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),Qt[t]=new A(D(n,e)),ne(t),Qt[t]}return delete Qt[t],null}function re(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Xt;if(!o(t)){if(e=ee(t))return e;t=[t]}return function(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=te(t[o]).split("-")).length,n=(n=te(t[o+1]))?n.split("-"):null;e>0;){if(i=ee(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&M(r,n,!0)>=e-1)break;e--}o++}return null}(t)}function oe(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>xt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,d(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),d(t)._overflowWeeks&&-1===e&&(e=7),d(t)._overflowWeekday&&-1===e&&(e=8),d(t).overflow=e),t}var ae=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,se=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,le=/Z|[+-]\d\d(?::?\d\d)?/,ue=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ce=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],he=/^\/?Date\((\-?\d+)/i;function de(t){var e,n,i,r,o,a,s=t._i,l=ae.exec(s)||se.exec(s);if(l){for(d(t).iso=!0,e=0,n=ue.length;e<n;e++)if(ue[e][1].exec(l[1])){r=ue[e][0],i=!1!==ue[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=ce.length;e<n;e++)if(ce[e][1].exec(l[3])){o=(l[2]||" ")+ce[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(l[4]){if(!le.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=r+(o||"")+(a||""),me(t)}else t._isValid=!1}function fe(t,e,n){return null!=t?t:null!=e?e:n}function pe(t){var e,n,i,o,a=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,i,r,o,a,s,l;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,a=4,n=fe(e.GG,t._a[0],Ot(ye(),1,4).year),i=fe(e.W,1),((r=fe(e.E,1))<1||r>7)&&(l=!0)):(o=t._locale._week.dow,a=t._locale._week.doy,n=fe(e.gg,t._a[0],Ot(ye(),o,a).year),i=fe(e.w,1),null!=e.d?((r=e.d)<0||r>6)&&(l=!0):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(l=!0)):r=o),i<1||i>Yt(n,o,a)?d(t)._overflowWeeks=!0:null!=l?d(t)._overflowWeekday=!0:(s=Rt(n,i,r,o,a),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),t._dayOfYear&&(o=fe(t._a[0],i[0]),t._dayOfYear>Dt(o)&&(d(t)._overflowDayOfYear=!0),n=zt(o,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?zt:It).apply(null,a),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24)}}function me(t){if(t._f!==r.ISO_8601){t._a=[],d(t).empty=!0;var e,n,i,o,a,s=""+t._i,l=s.length,u=0;for(i=G(t._f,t._locale).match(U)||[],e=0;e<i.length;e++)o=i[e],(n=(s.match(ft(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(n))).length>0&&d(t).unusedInput.push(a),s=s.slice(s.indexOf(n)+n.length),u+=n.length),V[o]?(n?d(t).empty=!1:d(t).unusedTokens.push(o),yt(o,n,t)):t._strict&&!n&&d(t).unusedTokens.push(o);d(t).charsLeftOver=l-u,s.length>0&&d(t).unusedInput.push(s),t._a[3]<=12&&!0===d(t).bigHour&&t._a[3]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),pe(t),oe(t)}else de(t)}function _e(t){var e=t._i,n=t._f;return t._locale=t._locale||re(t._l),null===e||void 0===n&&""===e?p({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),x(e)?new v(oe(e)):(o(n)?function(t){var e,n,i,r,o;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],me(e),f(e)&&(o+=d(e).charsLeftOver,o+=10*d(e).unusedTokens.length,d(e).score=o,(null==i||o<i)&&(i=o,n=e));c(t,n||e)}(t):s(e)?t._d=e:n?me(t):function(t){var e=t._i;void 0===e?t._d=new Date(r.now()):s(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=he.exec(t._i);null===e?(de(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t))):t._d=new Date(+e[1])}(t):o(e)?(t._a=l(e.slice(0),(function(t){return parseInt(t,10)})),pe(t)):"object"==typeof e?function(t){if(!t._d){var e=F(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),pe(t)}}(t):"number"==typeof e?t._d=new Date(e):r.createFromInputFallback(t)}(t),f(t)||(t._d=null),t))}function ge(t,e,n,i,r){var s,l={};return"boolean"==typeof n&&(i=n,n=void 0),(a(t)&&function(t){var e;for(e in t)return!1;return!0}(t)||o(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=r,l._l=n,l._i=t,l._f=e,l._strict=i,(s=new v(oe(_e(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function ye(t,e,n,i){return ge(t,e,n,i,!1)}r.createFromInputFallback=k("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){};var ve=k("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ye.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:p()})),xe=k("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ye.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:p()}));function be(t,e){var n,i;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return ye();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}function we(t){var e=F(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=re(),this._bubble()}function Me(t){return t instanceof we}function Te(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function ke(t,e){q(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+j(~~(t/60),2)+e+j(~~t%60,2)}))}ke("Z",":"),ke("ZZ",""),dt("Z",ut),dt("ZZ",ut),_t(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Ee(ut,t)}));var Se=/([\+\-]|\d\d)/gi;function Ee(t,e){var n=(e||"").match(t)||[],i=((n[n.length-1]||[])+"").match(Se)||["-",0,0],r=60*i[1]+w(i[2]);return"+"===i[0]?r:-r}function Ce(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(x(t)||s(t)?t.valueOf():ye(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):ye(t).local()}function Le(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function De(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ae=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Pe=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function Ie(t,e){var n,i,r,o,a,s,l=t,c=null;return Me(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(l={},e?l[e]=t:l.milliseconds=t):(c=Ae.exec(t))?(n="-"===c[1]?-1:1,l={y:0,d:w(c[2])*n,h:w(c[3])*n,m:w(c[4])*n,s:w(c[5])*n,ms:w(Te(1e3*c[6]))*n}):(c=Pe.exec(t))?(n="-"===c[1]?-1:1,l={y:ze(c[2],n),M:ze(c[3],n),w:ze(c[4],n),d:ze(c[5],n),h:ze(c[6],n),m:ze(c[7],n),s:ze(c[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=ye(l.from),a=ye(l.to),r=o.isValid()&&a.isValid()?(a=Ce(a,o),o.isBefore(a)?s=Fe(o,a):((s=Fe(a,o)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(l={}).ms=r.milliseconds,l.M=r.months),i=new we(l),Me(t)&&u(t,"_locale")&&(i._locale=t._locale),i}function ze(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Fe(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Re(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Oe(this,Ie(n="string"==typeof n?+n:n,i),t),this}}function Oe(t,e,n,i){var o=e._milliseconds,a=Te(e._days),s=Te(e._months);t.isValid()&&(i=null==i||i,o&&t._d.setTime(t._d.valueOf()+o*n),a&&B(t,"Date",N(t,"Date")+a*n),s&&kt(t,N(t,"Month")+s*n),i&&r.updateOffset(t,a||s))}Ie.fn=we.prototype;var Ye=Re(1,"add"),Ne=Re(-1,"subtract");function Be(t){var e;return void 0===t?this._locale._abbr:(null!=(e=re(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var je=k("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function Ue(){return this._locale}function $e(t,e){q(0,[t,t.length],0,e)}function He(t,e,n,i,r){var o;return null==t?Ot(this,i,r).year:(e>(o=Yt(t,i,r))&&(e=o),Ve.call(this,t,e,n,i,r))}function Ve(t,e,n,i,r){var o=Rt(t,e,n,i,r),a=zt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}q(0,["gg",2],0,(function(){return this.weekYear()%100})),q(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),$e("gggg","weekYear"),$e("ggggg","weekYear"),$e("GGGG","isoWeekYear"),$e("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),O("weekYear",1),O("isoWeekYear",1),dt("G",st),dt("g",st),dt("GG",tt,X),dt("gg",tt,X),dt("GGGG",rt,J),dt("gggg",rt,J),dt("GGGGG",ot,Q),dt("ggggg",ot,Q),gt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=w(t)})),gt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),q("Q",0,"Qo","quarter"),I("quarter","Q"),O("quarter",7),dt("Q",Z),_t("Q",(function(t,e){e[1]=3*(w(t)-1)})),q("D",["DD",2],"Do","date"),I("date","D"),O("date",9),dt("D",tt),dt("DD",tt,X),dt("Do",(function(t,e){return t?e._ordinalParse:e._ordinalParseLenient})),_t(["D","DD"],2),_t("Do",(function(t,e){e[2]=w(t.match(tt)[0])}));var qe=Y("Date",!0);q("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),O("dayOfYear",4),dt("DDD",it),dt("DDDD",K),_t(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=w(t)})),q("m",["mm",2],0,"minute"),I("minute","m"),O("minute",14),dt("m",tt),dt("mm",tt,X),_t(["m","mm"],4);var We=Y("Minutes",!1);q("s",["ss",2],0,"second"),I("second","s"),O("second",15),dt("s",tt),dt("ss",tt,X),_t(["s","ss"],5);var Ge,Ze=Y("Seconds",!1);for(q("S",0,0,(function(){return~~(this.millisecond()/100)})),q(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),q(0,["SSS",3],0,"millisecond"),q(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),q(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),q(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),q(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),q(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),q(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),I("millisecond","ms"),O("millisecond",16),dt("S",it,Z),dt("SS",it,X),dt("SSS",it,K),Ge="SSSS";Ge.length<=9;Ge+="S")dt(Ge,at);function Xe(t,e){e[6]=w(1e3*("0."+t))}for(Ge="S";Ge.length<=9;Ge+="S")_t(Ge,Xe);var Ke=Y("Milliseconds",!1);q("z",0,0,"zoneAbbr"),q("zz",0,0,"zoneName");var Je=v.prototype;Je.add=Ye,Je.calendar=function(t,e){var n=t||ye(),i=Ce(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=e&&(L(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,ye(n)))},Je.clone=function(){return new v(this)},Je.diff=function(t,e,n){var i,r,o,a,s,l,u,c;return this.isValid()&&(i=Ce(t,this)).isValid()?(r=6e4*(i.utcOffset()-this.utcOffset()),"year"===(e=z(e))||"month"===e||"quarter"===e?(s=this,u=12*((l=i).year()-s.year())+(l.month()-s.month()),c=s.clone().add(u,"months"),a=-(u+(l-c<0?(l-c)/(c-s.clone().add(u-1,"months")):(l-c)/(s.clone().add(u+1,"months")-c)))||0,"quarter"===e?a/=3:"year"===e&&(a/=12)):(o=this-i,a="second"===e?o/1e3:"minute"===e?o/6e4:"hour"===e?o/36e5:"day"===e?(o-r)/864e5:"week"===e?(o-r)/6048e5:o),n?a:b(a)):NaN},Je.endOf=function(t){return void 0===(t=z(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))},Je.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=W(this,t);return this.localeData().postformat(e)},Je.from=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||ye(t).isValid())?Ie({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Je.fromNow=function(t){return this.from(ye(),t)},Je.to=function(t,e){return this.isValid()&&(x(t)&&t.isValid()||ye(t).isValid())?Ie({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Je.toNow=function(t){return this.to(ye(),t)},Je.get=function(t){return L(this[t=z(t)])?this[t]():this},Je.invalidAt=function(){return d(this).overflow},Je.isAfter=function(t,e){var n=x(t)?t:ye(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=z(m(e)?"millisecond":e))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},Je.isBefore=function(t,e){var n=x(t)?t:ye(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=z(m(e)?"millisecond":e))?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},Je.isBetween=function(t,e,n,i){return("("===(i=i||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))},Je.isSame=function(t,e){var n,i=x(t)?t:ye(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=z(e||"millisecond"))?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},Je.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},Je.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},Je.isValid=function(){return f(this)},Je.lang=je,Je.locale=Be,Je.localeData=Ue,Je.max=xe,Je.min=ve,Je.parsingFlags=function(){return c({},d(this))},Je.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:R[n]});return e.sort((function(t,e){return t.priority-e.priority})),e}(t=F(t)),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit]);else if(L(this[t=z(t)]))return this[t](e);return this},Je.startOf=function(t){switch(t=z(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},Je.subtract=Ne,Je.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},Je.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},Je.toDate=function(){return new Date(this.valueOf())},Je.toISOString=function(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?L(Date.prototype.toISOString)?this.toDate().toISOString():W(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},Je.toJSON=function(){return this.isValid()?this.toISOString():null},Je.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Je.unix=function(){return Math.floor(this.valueOf()/1e3)},Je.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Je.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Je.year=Pt,Je.isLeapYear=function(){return At(this.year())},Je.weekYear=function(t){return He.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Je.isoWeekYear=function(t){return He.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},Je.quarter=Je.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},Je.month=St,Je.daysInMonth=function(){return xt(this.year(),this.month())},Je.week=Je.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},Je.isoWeek=Je.isoWeeks=function(t){var e=Ot(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},Je.weeksInYear=function(){var t=this.localeData()._week;return Yt(this.year(),t.dow,t.doy)},Je.isoWeeksInYear=function(){return Yt(this.year(),1,4)},Je.date=qe,Je.day=Je.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},Je.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},Je.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},Je.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},Je.hour=Je.hours=Kt,Je.minute=Je.minutes=We,Je.second=Je.seconds=Ze,Je.millisecond=Je.milliseconds=Ke,Je.utcOffset=function(t,e){var n,i=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Ee(ut,t):Math.abs(t)<16&&(t*=60),!this._isUTC&&e&&(n=Le(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==t&&(!e||this._changeInProgress?Oe(this,Ie(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Le(this):null!=t?this:NaN},Je.utc=function(t){return this.utcOffset(0,t)},Je.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Le(this),"m")),this},Je.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&(0===Ee(lt,this._i)?this.utcOffset(0,!0):this.utcOffset(Ee(lt,this._i))),this},Je.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?ye(t).utcOffset():0,(this.utcOffset()-t)%60==0)},Je.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Je.isLocal=function(){return!!this.isValid()&&!this._isUTC},Je.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Je.isUtc=De,Je.isUTC=De,Je.zoneAbbr=function(){return this._isUTC?"UTC":""},Je.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Je.dates=k("dates accessor is deprecated. Use date instead.",qe),Je.months=k("months accessor is deprecated. Use month instead",St),Je.years=k("years accessor is deprecated. Use year instead",Pt),Je.zone=k("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),Je.isDSTShifted=k("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!m(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=_e(t))._a){var e=t._isUTC?h(t._a):ye(t._a);this._isDSTShifted=this.isValid()&&M(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var Qe=Je;function tn(t){return t}var en=A.prototype;function nn(t,e,n,i){var r=re(),o=h().set(i,e);return r[n](o,t)}function rn(t,e,n){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return nn(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=nn(t,i,n,"month");return r}function on(t,e,n,i){"boolean"==typeof t?("number"==typeof e&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,"number"==typeof e&&(n=e,e=void 0),e=e||"");var r,o=re(),a=t?o._week.dow:0;if(null!=n)return nn(e,(n+a)%7,i,"day");var s=[];for(r=0;r<7;r++)s[r]=nn(e,(r+a)%7,i,"day");return s}en.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return L(i)?i.call(e,n):i},en.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])},en.invalidDate=function(){return this._invalidDate},en.ordinal=function(t){return this._ordinal.replace("%d",t)},en.preparse=tn,en.postformat=tn,en.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return L(r)?r(t,e,n,i):r.replace(/%d/i,t)},en.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return L(n)?n(e):n.replace(/%s/i,e)},en.set=function(t){var e,n;for(n in t)L(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},en.months=function(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||bt).test(e)?"format":"standalone"][t.month()]:this._months},en.monthsShort=function(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[bt.test(e)?"format":"standalone"][t.month()]:this._monthsShort},en.monthsParse=function(t,e,n){var i,r,o;if(this._monthsParseExact)return Tt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=h([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},en.monthsRegex=function(t){return this._monthsParseExact?(u(this,"_monthsRegex")||Lt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=Ct),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},en.monthsShortRegex=function(t){return this._monthsParseExact?(u(this,"_monthsRegex")||Lt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Et),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},en.week=function(t){return Ot(t,this._week.dow,this._week.doy).week},en.firstDayOfYear=function(){return this._week.doy},en.firstDayOfWeek=function(){return this._week.dow},en.weekdays=function(t,e){return t?o(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays},en.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},en.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},en.weekdaysParse=function(t,e,n){var i,r,o;if(this._weekdaysParseExact)return Ut.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=h([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},en.weekdaysRegex=function(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=$t),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},en.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ht),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},en.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Vt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},en.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},en.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},ne("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===w(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=k("moment.lang is deprecated. Use moment.locale instead.",ne),r.langData=k("moment.langData is deprecated. Use moment.localeData instead.",re);var an=Math.abs;function sn(t,e,n,i){var r=Ie(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function ln(t){return t<0?Math.floor(t):Math.ceil(t)}function un(t){return 4800*t/146097}function cn(t){return 146097*t/4800}function hn(t){return function(){return this.as(t)}}var dn=hn("ms"),fn=hn("s"),pn=hn("m"),mn=hn("h"),_n=hn("d"),gn=hn("w"),yn=hn("M"),vn=hn("y");function xn(t){return function(){return this._data[t]}}var bn=xn("milliseconds"),wn=xn("seconds"),Mn=xn("minutes"),Tn=xn("hours"),kn=xn("days"),Sn=xn("months"),En=xn("years");var Cn=Math.round,Ln={s:45,m:45,h:22,d:26,M:11};function Dn(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}var An=Math.abs;function Pn(){var t,e,n=An(this._milliseconds)/1e3,i=An(this._days),r=An(this._months);t=b(n/60),e=b(t/60),n%=60,t%=60;var o=b(r/12),a=r%=12,s=i,l=e,u=t,c=n,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(s?s+"D":"")+(l||u||c?"T":"")+(l?l+"H":"")+(u?u+"M":"")+(c?c+"S":""):"P0D"}var In=we.prototype;return In.abs=function(){var t=this._data;return this._milliseconds=an(this._milliseconds),this._days=an(this._days),this._months=an(this._months),t.milliseconds=an(t.milliseconds),t.seconds=an(t.seconds),t.minutes=an(t.minutes),t.hours=an(t.hours),t.months=an(t.months),t.years=an(t.years),this},In.add=function(t,e){return sn(this,t,e,1)},In.subtract=function(t,e){return sn(this,t,e,-1)},In.as=function(t){var e,n,i=this._milliseconds;if("month"===(t=z(t))||"year"===t)return e=this._days+i/864e5,n=this._months+un(e),"month"===t?n:n/12;switch(e=this._days+Math.round(cn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},In.asMilliseconds=dn,In.asSeconds=fn,In.asMinutes=pn,In.asHours=mn,In.asDays=_n,In.asWeeks=gn,In.asMonths=yn,In.asYears=vn,In.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12)},In._bubble=function(){var t,e,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*ln(cn(s)+a),a=0,s=0),l.milliseconds=o%1e3,t=b(o/1e3),l.seconds=t%60,e=b(t/60),l.minutes=e%60,n=b(e/60),l.hours=n%24,a+=b(n/24),s+=r=b(un(a)),a-=ln(cn(r)),i=b(s/12),s%=12,l.days=a,l.months=s,l.years=i,this},In.get=function(t){return this[(t=z(t))+"s"]()},In.milliseconds=bn,In.seconds=wn,In.minutes=Mn,In.hours=Tn,In.days=kn,In.weeks=function(){return b(this.days()/7)},In.months=Sn,In.years=En,In.humanize=function(t){var e=this.localeData(),n=function(t,e,n){var i=Ie(t).abs(),r=Cn(i.as("s")),o=Cn(i.as("m")),a=Cn(i.as("h")),s=Cn(i.as("d")),l=Cn(i.as("M")),u=Cn(i.as("y")),c=r<Ln.s&&["s",r]||o<=1&&["m"]||o<Ln.m&&["mm",o]||a<=1&&["h"]||a<Ln.h&&["hh",a]||s<=1&&["d"]||s<Ln.d&&["dd",s]||l<=1&&["M"]||l<Ln.M&&["MM",l]||u<=1&&["y"]||["yy",u];return c[2]=e,c[3]=+t>0,c[4]=n,Dn.apply(null,c)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},In.toISOString=Pn,In.toString=Pn,In.toJSON=Pn,In.locale=Be,In.localeData=Ue,In.toIsoString=k("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Pn),In.lang=je,q("X",0,0,"unix"),q("x",0,0,"valueOf"),dt("x",st),dt("X",/[+-]?\d+(\.\d{1,3})?/),_t("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))})),_t("x",(function(t,e,n){n._d=new Date(w(t))})),r.version="2.15.1",e=ye,r.fn=Qe,r.min=function(){return be("isBefore",[].slice.call(arguments,0))},r.max=function(){return be("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=h,r.unix=function(t){return ye(1e3*t)},r.months=function(t,e){return rn(t,e,"months")},r.isDate=s,r.locale=ne,r.invalid=p,r.duration=Ie,r.isMoment=x,r.weekdays=function(t,e,n){return on(t,e,n,"weekdays")},r.parseZone=function(){return ye.apply(null,arguments).parseZone()},r.localeData=re,r.isDuration=Me,r.monthsShort=function(t,e){return rn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return on(t,e,n,"weekdaysMin")},r.defineLocale=ie,r.updateLocale=function(t,e){if(null!=e){var n,i=Jt;null!=Qt[t]&&(i=Qt[t]._config),(n=new A(e=D(i,e))).parentLocale=Qt[t],Qt[t]=n,ne(t)}else null!=Qt[t]&&(null!=Qt[t].parentLocale?Qt[t]=Qt[t].parentLocale:null!=Qt[t]&&delete Qt[t]);return Qt[t]},r.locales=function(){return S(Qt)},r.weekdaysShort=function(t,e,n){return on(t,e,n,"weekdaysShort")},r.normalizeUnits=z,r.relativeTimeRounding=function(t){return void 0===t?Cn:"function"==typeof t&&(Cn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Ln[t]&&(void 0===e?Ln[t]:(Ln[t]=e,!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=Qe,r}()},2077:function(t,e,n){var i,r;void 0===(r="function"==typeof(i=function(){var t,e,n,i,r={},o={},a={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0"},s={currentLocale:a.currentLocale,zeroFormat:a.zeroFormat,nullFormat:a.nullFormat,defaultFormat:a.defaultFormat};function l(t,e){this._input=t,this._value=e}return(t=function(n){var i,o,a,u;if(t.isNumeral(n))i=n.value();else if(0===n||void 0===n)i=0;else if(null===n||e.isNaN(n))i=null;else if("string"==typeof n)if(s.zeroFormat&&n===s.zeroFormat)i=0;else if(s.nullFormat&&n===s.nullFormat||!n.replace(/[^0-9]+/g,"").length)i=null;else{for(o in r)if((u="function"==typeof r[o].regexps.unformat?r[o].regexps.unformat():r[o].regexps.unformat)&&n.match(u)){a=r[o].unformat;break}i=(a=a||t._.stringToNumber)(n)}else i=Number(n)||null;return new l(n,i)}).version="2.0.4",t.isNumeral=function(t){return t instanceof l},t._=e={numberToFormat:function(e,n,i){var r,a,s,l,u,c,h,d=o[t.options.currentLocale],f=!1,p=!1,m="",_=1e12,g=1e9,y=1e6,v="",x=!1;if(e=e||0,a=Math.abs(e),t._.includes(n,"(")?(f=!0,n=n.replace(/[\(|\)]/g,"")):(t._.includes(n,"+")||t._.includes(n,"-"))&&(u=t._.includes(n,"+")?n.indexOf("+"):e<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),t._.includes(n,"a")&&(r=!!(r=n.match(/a(k|m|b|t)?/))&&r[1],t._.includes(n," a")&&(m=" "),n=n.replace(new RegExp(m+"a[kmbt]?"),""),a>=_&&!r||"t"===r?(m+=d.abbreviations.trillion,e/=_):a<_&&a>=g&&!r||"b"===r?(m+=d.abbreviations.billion,e/=g):a<g&&a>=y&&!r||"m"===r?(m+=d.abbreviations.million,e/=y):(a<y&&a>=1e3&&!r||"k"===r)&&(m+=d.abbreviations.thousand,e/=1e3)),t._.includes(n,"[.]")&&(p=!0,n=n.replace("[.]",".")),s=e.toString().split(".")[0],l=n.split(".")[1],c=n.indexOf(","),l?(t._.includes(l,"[")?(l=(l=l.replace("]","")).split("["),v=t._.toFixed(e,l[0].length+l[1].length,i,l[1].length)):v=t._.toFixed(e,l.length,i),s=v.split(".")[0],v=t._.includes(v,".")?d.delimiters.decimal+v.split(".")[1]:"",p&&0===Number(v.slice(1))&&(v="")):s=t._.toFixed(e,null,i),m&&!r&&Number(s)>=1e3&&m!==d.abbreviations.trillion)switch(s=String(Number(s)/1e3),m){case d.abbreviations.thousand:m=d.abbreviations.million;break;case d.abbreviations.million:m=d.abbreviations.billion;break;case d.abbreviations.billion:m=d.abbreviations.trillion}return t._.includes(s,"-")&&(s=s.slice(1),x=!0),c>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d.delimiters.thousands)),0===n.indexOf(".")&&(s=""),h=s+v+(m||""),f?h=(f&&x?"(":"")+h+(f&&x?")":""):u>=0?h=0===u?(x?"-":"+")+h:h+(x?"-":"+"):x&&(h="-"+h),h},stringToNumber:function(t){var e,n,i,r=o[s.currentLocale],a=t,l={thousand:3,million:6,billion:9,trillion:12};if(s.zeroFormat&&t===s.zeroFormat)n=0;else if(s.nullFormat&&t===s.nullFormat||!t.replace(/[^0-9]+/g,"").length)n=null;else{for(e in n=1,"."!==r.delimiters.decimal&&(t=t.replace(/\./g,"").replace(r.delimiters.decimal,".")),l)if(i=new RegExp("[^a-zA-Z]"+r.abbreviations[e]+"(?:\\)|(\\"+r.currency.symbol+")?(?:\\))?)?$"),a.match(i)){n*=Math.pow(10,l[e]);break}n*=(t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1,t=t.replace(/[^0-9\.]+/g,""),n*=Number(t)}return n},isNaN:function(t){return"number"==typeof t&&isNaN(t)},includes:function(t,e){return-1!==t.indexOf(e)},insert:function(t,e,n){return t.slice(0,n)+e+t.slice(n)},reduce:function(t,e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,i=Object(t),r=i.length>>>0,o=0;if(3===arguments.length)n=arguments[2];else{for(;o<r&&!(o in i);)o++;if(o>=r)throw new TypeError("Reduce of empty array with no initial value");n=i[o++]}for(;o<r;o++)o in i&&(n=e(n,i[o],o,i));return n},multiplier:function(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce((function(t,n){var i=e.multiplier(n);return t>i?t:i}),1)},toFixed:function(t,e,n,i){var r,o,a,s,l=t.toString().split("."),u=e-(i||0);return r=2===l.length?Math.min(Math.max(l[1].length,u),e):u,s=(n(t*(a=Math.pow(10,r)))/a).toFixed(r),i>e-r&&(o=new RegExp("\\.?0{1,"+(i-(e-r))+"}$"),s=s.replace(o,"")),s}},t.options=s,t.formats=r,t.locales=o,t.locale=function(t){return t&&(s.currentLocale=t.toLowerCase()),s.currentLocale},t.localeData=function(t){if(!t)return o[s.currentLocale];if(t=t.toLowerCase(),!o[t])throw new Error("Unknown locale : "+t);return o[t]},t.reset=function(){for(var t in a)s[t]=a[t]},t.zeroFormat=function(t){s.zeroFormat="string"==typeof t?t:null},t.nullFormat=function(t){s.nullFormat="string"==typeof t?t:null},t.defaultFormat=function(t){s.defaultFormat="string"==typeof t?t:"0.0"},t.register=function(t,e,n){if(e=e.toLowerCase(),this[t+"s"][e])throw new TypeError(e+" "+t+" already registered.");return this[t+"s"][e]=n,n},t.validate=function(e,n){var i,r,o,a,s,l,u,c;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)),(e=e.trim()).match(/^\d+$/))return!0;if(""===e)return!1;try{u=t.localeData(n)}catch(e){u=t.localeData(t.locale())}return o=u.currency.symbol,s=u.abbreviations,i=u.delimiters.decimal,r="."===u.delimiters.thousands?"\\.":u.delimiters.thousands,!(null!==(c=e.match(/^[^\d]+/))&&(e=e.substr(1),c[0]!==o)||null!==(c=e.match(/[^\d]+$/))&&(e=e.slice(0,-1),c[0]!==s.thousand&&c[0]!==s.million&&c[0]!==s.billion&&c[0]!==s.trillion)||(l=new RegExp(r+"{2}"),e.match(/[^\d.,]/g)||(a=e.split(i)).length>2||(a.length<2?!a[0].match(/^\d+.*\d$/)||a[0].match(l):1===a[0].length?!a[0].match(/^\d+$/)||a[0].match(l)||!a[1].match(/^\d+$/):!a[0].match(/^\d+.*\d$/)||a[0].match(l)||!a[1].match(/^\d+$/))))},t.fn=l.prototype={clone:function(){return t(this)},format:function(e,n){var i,o,a,l=this._value,u=e||s.defaultFormat;if(n=n||Math.round,0===l&&null!==s.zeroFormat)o=s.zeroFormat;else if(null===l&&null!==s.nullFormat)o=s.nullFormat;else{for(i in r)if(u.match(r[i].regexps.format)){a=r[i].format;break}o=(a=a||t._.numberToFormat)(l,u,n)}return o},value:function(){return this._value},input:function(){return this._input},set:function(t){return this._value=Number(t),this},add:function(t){var n=e.correctionFactor.call(null,this._value,t);return this._value=e.reduce([this._value,t],(function(t,e,i,r){return t+Math.round(n*e)}),0)/n,this},subtract:function(t){var n=e.correctionFactor.call(null,this._value,t);return this._value=e.reduce([t],(function(t,e,i,r){return t-Math.round(n*e)}),Math.round(this._value*n))/n,this},multiply:function(t){return this._value=e.reduce([this._value,t],(function(t,n,i,r){var o=e.correctionFactor(t,n);return Math.round(t*o)*Math.round(n*o)/Math.round(o*o)}),1),this},divide:function(t){return this._value=e.reduce([this._value,t],(function(t,n,i,r){var o=e.correctionFactor(t,n);return Math.round(t*o)/Math.round(n*o)})),this},difference:function(e){return Math.abs(t(this._value).subtract(e).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},i={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp("("+n.suffixes.concat(i.suffixes).join("|")+")")},format:function(e,r,o){var a,s,l,u=t._.includes(r,"ib")?i:n,c=t._.includes(r," b")||t._.includes(r," ib")?" ":"";for(r=r.replace(/\s?i?b/,""),a=0;a<=u.suffixes.length;a++)if(s=Math.pow(u.base,a),l=Math.pow(u.base,a+1),null===e||0===e||e>=s&&e<l){c+=u.suffixes[a],s>0&&(e/=s);break}return t._.numberToFormat(e,r,o)+c},unformat:function(e){var r,o,a=t._.stringToNumber(e);if(a){for(r=n.suffixes.length-1;r>=0;r--){if(t._.includes(e,n.suffixes[r])){o=Math.pow(n.base,r);break}if(t._.includes(e,i.suffixes[r])){o=Math.pow(i.base,r);break}}a*=o||1}return a}}),t.register("format","currency",{regexps:{format:/(\$)/},format:function(e,n,i){var r,o,a=t.locales[t.options.currentLocale],s={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),r=t._.numberToFormat(e,n,i),e>=0?(s.before=s.before.replace(/[\-\(]/,""),s.after=s.after.replace(/[\-\)]/,"")):e<0&&!t._.includes(s.before,"-")&&!t._.includes(s.before,"(")&&(s.before="-"+s.before),o=0;o<s.before.length;o++)switch(s.before[o]){case"$":r=t._.insert(r,a.currency.symbol,o);break;case" ":r=t._.insert(r," ",o)}for(o=s.after.length-1;o>=0;o--)switch(s.after[o]){case"$":r=o===s.after.length-1?r+a.currency.symbol:t._.insert(r,a.currency.symbol,-(s.after.length-(1+o)));break;case" ":r=o===s.after.length-1?r+" ":t._.insert(r," ",-(s.after.length-(1+o)))}return r}}),t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(e,n,i){var r=("number"!=typeof e||t._.isNaN(e)?"0e+0":e.toExponential()).split("e");return n=n.replace(/e[\+|\-]{1}0/,""),t._.numberToFormat(Number(r[0]),n,i)+"e"+r[1]},unformat:function(e){var n=t._.includes(e,"e+")?e.split("e+"):e.split("e-"),i=Number(n[0]),r=Number(n[1]);return r=t._.includes(e,"e-")?r*=-1:r,t._.reduce([i,Math.pow(10,r)],(function(e,n,i,r){var o=t._.correctionFactor(e,n);return e*o*(n*o)/(o*o)}),1)}}),t.register("format","ordinal",{regexps:{format:/(o)/},format:function(e,n,i){var r=t.locales[t.options.currentLocale],o=t._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),o+=r.ordinal(e),t._.numberToFormat(e,n,i)+o}}),t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(e,n,i){var r,o=t._.includes(n," %")?" ":"";return e*=100,n=n.replace(/\s?\%/,""),r=t._.numberToFormat(e,n,i),t._.includes(r,")")?((r=r.split("")).splice(-1,0,o+"%"),r=r.join("")):r=r+o+"%",r},unformat:function(e){return.01*t._.stringToNumber(e)}}),t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(t,e,n){var i=Math.floor(t/60/60),r=Math.floor((t-60*i*60)/60),o=Math.round(t-60*i*60-60*r);return i+":"+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)},unformat:function(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}}),t})?i.call(e,n,e,t):i)||(t.exports=r)},7418:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var a,s,l=r(t),u=1;u<arguments.length;u++){for(var c in a=Object(arguments[u]))n.call(a,c)&&(l[c]=a[c]);if(e){s=e(a);for(var h=0;h<s.length;h++)i.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},3360:function(t,e,n){var i,r,o;o=this,i=[n(6486)],void 0===(r=function(t){return function(t,e,i){var r=e&&e.postal,o=e&&e._;o&&o!==t&&(t=t.noConflict());var a={configuration:t.extend({},{DEFAULT_CHANNEL:"/",SYSTEM_CHANNEL:"postal",enableSystemMessages:!0,cacheKeyDelimiter:"|",autoCompactResolver:!1})},s=a.configuration,l=function(t,e){this.bus=e,this.channel=t||s.DEFAULT_CHANNEL};l.prototype.subscribe=function(){return this.bus.subscribe({channel:this.channel,topic:1===arguments.length?arguments[0].topic:arguments[0],callback:1===arguments.length?arguments[0].callback:arguments[1]})},l.prototype.publish=function(){var e,n={};if("string"==typeof arguments[0]?(n.topic=arguments[0],n.data=arguments[1],e=arguments[2]):(n=arguments[0],e=arguments[1]),"object"!=typeof n)throw new Error("The first argument to ChannelDefinition.publish should be either an envelope object or a string topic.");n.headers=t.extend(n.headers||{resolverNoCache:s.resolverNoCache}),n.channel=this.channel,this.bus.publish(n,e)};var u=function(t,e,n){if(3!==arguments.length)throw new Error("You must provide a channel, topic and callback when creating a SubscriptionDefinition instance.");if(0===e.length)throw new Error("Topics cannot be empty");this.channel=t,this.topic=e,this.callback=n,this.pipeline=[],this.cacheKeys=[],this._context=i},c=function(){var e;return function(n){var i=!1;return"string"==typeof n?(i=n===e,e=n):(i=t.isEqual(n,e),e=t.extend({},n)),!i}},h=function(){var e=[];return function(n){var i=!t.some(e,(function(e){return t.isEqual(n,e)}));return i&&e.push(n),i}};u.prototype={catch:function(t){var e=this.callback;return this.callback=function(){try{e.apply(this,arguments)}catch(e){t(e,arguments[0])}},this},defer:function(){return this.delay(0)},disposeAfter:function(e){if("number"!=typeof e||e<=0)throw new Error("The value provided to disposeAfter (maxCalls) must be a number greater than zero.");var n=t.after(e,this.unsubscribe.bind(this));return this.pipeline.push((function(t,e,i){i(t,e),n()})),this},distinct:function(){return this.constraint(new h)},distinctUntilChanged:function(){return this.constraint(new c)},invokeSubscriber:function(t,e){if(!this.inactive){var n=this,i=n.pipeline,r=i.length,o=n._context,a=-1,s=!1;return r?(i=i.concat([n.callback]),function t(e,l){(a+=1)<r?i[a].call(o,e,l,t):(n.callback.call(o,e,l),s=!0)}(t,e)):(n.callback.call(o,t,e),s=!0),s}},logError:function(){var t;return console&&(t=console.warn?console.warn:console.log,this.catch(t)),this},once:function(){return this.disposeAfter(1)},subscribe:function(t){return this.callback=t,this},unsubscribe:function(){this.inactive||a.unsubscribe(this)},constraint:function(t){if("function"!=typeof t)throw new Error("Predicate constraint must be a function");return this.pipeline.push((function(e,n,i){t.call(this,e,n)&&i(e,n)})),this},constraints:function(e){var n=this;return t.each(e,(function(t){n.constraint(t)})),n},context:function(t){return this._context=t,this},debounce:function(e,n){if("number"!=typeof e)throw new Error("Milliseconds must be a number");var i={};return 1==!!n&&(i.leading=!0,i.trailing=!1),this.pipeline.push(t.debounce((function(t,e,n){n(t,e)}),e,i)),this},delay:function(t){if("number"!=typeof t)throw new Error("Milliseconds must be a number");return this.pipeline.push((function(e,n,i){setTimeout((function(){i(e,n)}),t)})),this},throttle:function(e){if("number"!=typeof e)throw new Error("Milliseconds must be a number");return this.pipeline.push(t.throttle((function(t,e,n){n(t,e)}),e)),this}},s.resolver={cache:{},regex:{},enableCache:!0,compare:function(e,n,i){var r,o,a,l=n+s.cacheKeyDelimiter+e,u=this.cache[l],c=i||{},h=this.enableCache&&!c.resolverNoCache;return!0===u?u:-1===e.indexOf("#")&&-1===e.indexOf("*")?(u=n===e,h&&(this.cache[l]=u),u):((o=this.regex[e])||(r="^"+t.map(e.split("."),(function(t){var e="";return a&&(e="#"!==a?"\\.\\b":"\\b"),a=t,e+("#"===t?"[\\s\\S]*":"*"===t?"[^.]+":t)})).join("")+"$",o=this.regex[e]=new RegExp(r)),u=o.test(n),h&&(this.cache[l]=u),u)},reset:function(){this.cache={},this.regex={}},purge:function(e){var n=this,i=s.cacheKeyDelimiter;if(void 0===e)this.reset();else{var r=!0===e.compact?function(t,e){var r=e.split(i);0===a.getSubscribersFor({topic:r[0]}).length&&delete n.cache[e]}:function(t,r){var o=r.split(i),a=o[0],s=o[1];void 0!==e.topic&&e.topic!==a||void 0!==e.binding&&e.binding!==s||delete n.cache[r]};t.each(this.cache,r)}}};var d=0,f=[],p=0;function m(t,e,n){return function(i,r,o){i===t&&o.splice(r,1),0===o.length&&delete n[e]}}function _(t,e,n,i,r){var o=r&&r.headers||{};return function(r){s.resolver.compare(r.topic,t,o)&&(o.resolverNoCache||((e[n]=e[n]||[]).push(r),r.cacheKeys.push(n)),i&&i(r))}}function g(t,e){return{channel:s.SYSTEM_CHANNEL,topic:"subscription."+t,data:{event:"subscription."+t,channel:e.channel,topic:e.topic}}}var y=g.bind(i,"created"),v=g.bind(i,"removed");if(t.extend(a,{cache:{},subscriptions:{},wireTaps:[],ChannelDefinition:l,SubscriptionDefinition:u,channel:function(t){return new l(t,this)},addWireTap:function(t){var e=this;return e.wireTaps.push(t),function(){var n=e.wireTaps.indexOf(t);-1!==n&&e.wireTaps.splice(n,1)}},noConflict:function(){if("undefined"==typeof window||"undefined"!=typeof window&&n.amdO)throw new Error("noConflict can only be used in browser clients which aren't using AMD modules");return e.postal=r,this},getSubscribersFor:function(e){var n=[];return t.each(this.subscriptions,(function(i){t.each(i,(function(i){n=n.concat(t.filter(i,function(e,n){return"function"==typeof e?e:e?function(i){var r=0,o=0;return t.each(e,(function(t,a){r+=1,("topic"===a&&n.compare(i.topic,e.topic,{resolverNoCache:!0})||"context"===a&&e.context===i._context||i[a]===e[a])&&(o+=1)})),r===o}:function(){return!0}}(e,s.resolver)))}))})),n},publish:function(e,n){++d;var i=e.channel=e.channel||s.DEFAULT_CHANNEL,r=e.topic;e.timeStamp=new Date,this.wireTaps.length&&t.each(this.wireTaps,(function(t){t(e.data,e,d)}));var o=i+s.cacheKeyDelimiter+r,l=this.cache[o],u=0,c=0;if(l)t.each(l,(function(t){t.invokeSubscriber(e.data,e)?c++:u++}));else{var h=_(r,this.cache,o,(function(t){t.invokeSubscriber(e.data,e)?c++:u++}),e);t.each(this.subscriptions[i],(function(e){t.each(e,h)}))}0==--d&&function(){for(;f.length;)a.unsubscribe(f.shift())}(),n&&n({activated:c,skipped:u})},reset:function(){this.unsubscribeFor(),s.resolver.reset(),this.subscriptions={},this.cache={}},subscribe:function(e){var n,i=this.subscriptions,r=new u(e.channel||s.DEFAULT_CHANNEL,e.topic,e.callback),o=i[r.channel],a=r.channel.length;o||(o=i[r.channel]={}),(n=i[r.channel][r.topic])||(n=i[r.channel][r.topic]=[]),n.push(r);var l=this.cache;return t.each(t.keys(l),(function(t){t.substr(0,a)===r.channel&&_(t.split(s.cacheKeyDelimiter)[1],l,t)(r)})),s.enableSystemMessages&&this.publish(y(r)),r},unsubscribe:function(){for(var e,n,i,r,o=arguments.length,a=0;a<o;a++){if((e=arguments[a]).inactive=!0,d)return void f.push(e);if(i=(n=this.subscriptions[e.channel])&&n[e.topic]){var l=i.length;for(r=0;r<l;){if(i[r]===e){i.splice(r,1);break}r+=1}if(0===i.length&&(delete n[e.topic],t.keys(n).length||delete this.subscriptions[e.channel]),e.cacheKeys&&e.cacheKeys.length)for(var u;u=e.cacheKeys.pop();)t.each(this.cache[u],m(e,u,this.cache));if("function"==typeof s.resolver.purge){var c=!0===s.autoCompactResolver?0:"number"==typeof s.autoCompactResolver&&s.autoCompactResolver-1;c>=0&&p===c?(s.resolver.purge({compact:!0}),p=0):c>=0&&p<c&&(p+=1)}}s.enableSystemMessages&&this.publish(v(e))}},unsubscribeFor:function(t){var e=[];this.subscriptions&&(e=this.getSubscribersFor(t),this.unsubscribe.apply(this,e))}}),e&&Object.prototype.hasOwnProperty.call(e,"__postalReady__")&&t.isArray(e.__postalReady__))for(;e.__postalReady__.length;)e.__postalReady__.shift().onReady(a);return a}(t,o)}.apply(e,i))||(t.exports=r)},3935:(t,e,n)=>{"use strict";t.exports=n(8951)},1152:(t,e,n)=>{"use strict";t.exports=n(6257)},456:function(t,e,n){t.exports=function(t,e,n){"use strict";var i={changeOptions:"add remove reset sort",updateScheduler:function(t){return n.debounce(t,0)}},r={changeOptions:"change",updateScheduler:n.identity},o=function(t,n,o){if(n){var a=e.BackboneMixin.ConsiderAsCollection(n)?i:r,s=a.updateScheduler((function(){t.isMounted()&&(t.onModelChange||t.forceUpdate).call(t)})),l=o||t.changeOptions||a.changeOptions;n.on(l,s,t)}},a=function(t,e){e&&e.off(null,null,t)};return e.BackboneMixin=function(t,e){var n,i;return"object"==typeof t?(e=t.renderOn,n=t.propName,i=t.modelOrCollection):n=t,i||(i=function(t){return t[n]}),{componentDidMount:function(){o(this,i(this.props),e)},componentWillReceiveProps:function(t){i(this.props)!==i(t)&&(a(this,i(this.props)),o(this,i(t),e),"function"==typeof this.componentWillChangeModel&&this.componentWillChangeModel())},componentDidUpdate:function(t,e){i(this.props)!==i(t)&&"function"==typeof this.componentDidChangeModel&&this.componentDidChangeModel()},componentWillUnmount:function(){a(this,i(this.props))}}},e.BackboneMixin.ConsiderAsCollection=function(e){return e instanceof t.Collection},e.BackboneViewMixin={getModel:function(){return this.props.model},model:function(){return this.getModel()},getCollection:function(){return this.props.collection},collection:function(){return this.getCollection()}},e.createBackboneClass=function(t){var n=t.mixins||[];return t.mixins=n.concat([e.BackboneMixin("model"),e.BackboneMixin("collection"),e.BackboneViewMixin]),e.createClass(t)},e}(n(2316),n(7588),n(1311))},686:(t,e,n)=>{"use strict";var i=n(3990),r=n(8387),o={focusDOMComponent:function(){r(i.getNodeFromInstance(this))}};t.exports=o},2289:(t,e,n)=>{"use strict";var i=n(5338),r=n(7614),o=n(6508),a=n(9160),s=n(4900),l=n(6259),u=n(5721),c=[9,13,27,32],h=o.canUseDOM&&"CompositionEvent"in window,d=null;o.canUseDOM&&"documentMode"in document&&(d=document.documentMode);var f,p=o.canUseDOM&&"TextEvent"in window&&!d&&!("object"==typeof(f=window.opera)&&"function"==typeof f.version&&parseInt(f.version(),10)<=12),m=o.canUseDOM&&(!h||d&&d>8&&d<=11),_=String.fromCharCode(32),g=i.topLevelTypes,y={beforeInput:{phasedRegistrationNames:{bubbled:u({onBeforeInput:null}),captured:u({onBeforeInputCapture:null})},dependencies:[g.topCompositionEnd,g.topKeyPress,g.topTextInput,g.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:u({onCompositionEnd:null}),captured:u({onCompositionEndCapture:null})},dependencies:[g.topBlur,g.topCompositionEnd,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:u({onCompositionStart:null}),captured:u({onCompositionStartCapture:null})},dependencies:[g.topBlur,g.topCompositionStart,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:u({onCompositionUpdate:null}),captured:u({onCompositionUpdateCapture:null})},dependencies:[g.topBlur,g.topCompositionUpdate,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]}},v=!1;function x(t,e){switch(t){case g.topKeyUp:return-1!==c.indexOf(e.keyCode);case g.topKeyDown:return 229!==e.keyCode;case g.topKeyPress:case g.topMouseDown:case g.topBlur:return!0;default:return!1}}function b(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}var w=null;function M(t,e,n,i){var o,l;if(h?o=function(t){switch(t){case g.topCompositionStart:return y.compositionStart;case g.topCompositionEnd:return y.compositionEnd;case g.topCompositionUpdate:return y.compositionUpdate}}(t):w?x(t,n)&&(o=y.compositionEnd):function(t,e){return t===g.topKeyDown&&229===e.keyCode}(t,n)&&(o=y.compositionStart),!o)return null;m&&(w||o!==y.compositionStart?o===y.compositionEnd&&w&&(l=w.getData()):w=a.getPooled(i));var u=s.getPooled(o,e,n,i);if(l)u.data=l;else{var c=b(n);null!==c&&(u.data=c)}return r.accumulateTwoPhaseDispatches(u),u}function T(t,e,n,i){var o;if(!(o=p?function(t,e){switch(t){case g.topCompositionEnd:return b(e);case g.topKeyPress:return 32!==e.which?null:(v=!0,_);case g.topTextInput:var n=e.data;return n===_&&v?null:n;default:return null}}(t,n):function(t,e){if(w){if(t===g.topCompositionEnd||x(t,e)){var n=w.getData();return a.release(w),w=null,n}return null}switch(t){case g.topPaste:return null;case g.topKeyPress:return e.which&&!function(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}(e)?String.fromCharCode(e.which):null;case g.topCompositionEnd:return m?null:e.data;default:return null}}(t,n)))return null;var s=l.getPooled(y.beforeInput,e,n,i);return s.data=o,r.accumulateTwoPhaseDispatches(s),s}var k={eventTypes:y,extractEvents:function(t,e,n,i){return[M(t,e,n,i),T(t,e,n,i)]}};t.exports=k},5373:t=>{"use strict";var e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n=["Webkit","ms","Moz","O"];Object.keys(e).forEach((function(t){n.forEach((function(n){e[function(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}(n,t)]=e[t]}))}));var i={isUnitlessNumber:e,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}};t.exports=i},5786:(t,e,n)=>{"use strict";var i=n(5373),r=n(6508),o=(n(8744),n(250),n(571)),a=n(7100),s=n(1767),l=(n(3620),s((function(t){return a(t)}))),u=!1,c="cssFloat";if(r.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(t){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var d={createMarkupForStyles:function(t,e){var n="";for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];null!=r&&(n+=l(i)+":",n+=o(i,r,e)+";")}return n||null},setValueForStyles:function(t,e,n){var r=t.style;for(var a in e)if(e.hasOwnProperty(a)){var s=o(a,e[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)r[a]=s;else{var l=u&&i.shorthandPropertyExpansions[a];if(l)for(var h in l)r[h]="";else r[a]=""}}}};t.exports=d},955:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(3303);function a(){this._callbacks=null,this._contexts=null}n(3759),r(a.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){t.length!==e.length&&i("24"),this._callbacks=null,this._contexts=null;for(var n=0;n<t.length;n++)t[n].call(e[n]);t.length=0,e.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(t){this._callbacks&&(this._callbacks.length=t,this._contexts.length=t)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),o.addPoolingTo(a),t.exports=a},2029:(t,e,n)=>{"use strict";var i=n(5338),r=n(7538),o=n(7614),a=n(6508),s=n(3990),l=n(8638),u=n(674),c=n(3749),h=n(1708),d=n(3980),f=n(5721),p=i.topLevelTypes,m={change:{phasedRegistrationNames:{bubbled:f({onChange:null}),captured:f({onChangeCapture:null})},dependencies:[p.topBlur,p.topChange,p.topClick,p.topFocus,p.topInput,p.topKeyDown,p.topKeyUp,p.topSelectionChange]}},_=null,g=null,y=null,v=null,x=!1;function b(t){var e=u.getPooled(m.change,g,t,c(t));o.accumulateTwoPhaseDispatches(e),l.batchedUpdates(w,e)}function w(t){r.enqueueEvents(t),r.processEventQueue(!1)}function M(){_&&(_.detachEvent("onchange",b),_=null,g=null)}function T(t,e){if(t===p.topChange)return e}function k(t,e,n){t===p.topFocus?(M(),function(t,e){g=e,(_=t).attachEvent("onchange",b)}(e,n)):t===p.topBlur&&M()}a.canUseDOM&&(x=h("change")&&(!("documentMode"in document)||document.documentMode>8));var S=!1;a.canUseDOM&&(S=h("input")&&(!("documentMode"in document)||document.documentMode>11));var E={get:function(){return v.get.call(this)},set:function(t){y=""+t,v.set.call(this,t)}};function C(){_&&(delete _.value,_.detachEvent?_.detachEvent("onpropertychange",L):_.removeEventListener("propertychange",L,!1),_=null,g=null,y=null,v=null)}function L(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==y&&(y=e,b(t))}}function D(t,e){if(t===p.topInput)return e}function A(t,e,n){t===p.topFocus?(C(),function(t,e){_=t,g=e,y=t.value,v=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(_,"value",E),_.attachEvent?_.attachEvent("onpropertychange",L):_.addEventListener("propertychange",L,!1)}(e,n)):t===p.topBlur&&C()}function P(t,e){if((t===p.topSelectionChange||t===p.topKeyUp||t===p.topKeyDown)&&_&&_.value!==y)return y=_.value,g}function I(t,e){if(t===p.topClick)return e}var z={eventTypes:m,extractEvents:function(t,e,n,i){var r,a,l,c,h=e?s.getNodeFromInstance(e):window;if("select"===(c=(l=h).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type?x?r=T:a=k:d(h)?S?r=D:(r=P,a=A):function(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}(h)&&(r=I),r){var f=r(t,e);if(f){var p=u.getPooled(m.change,f,n,i);return p.type="change",o.accumulateTwoPhaseDispatches(p),p}}a&&a(t,h,e)}};t.exports=z},5392:(t,e,n)=>{"use strict";var i=n(1051),r=n(3342),o=n(1873),a=(n(3990),n(8744),n(398)),s=n(2100),l=n(9712);function u(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}var c=a((function(t,e,n){t.insertBefore(e,n)}));function h(t,e,n){i.insertTreeBefore(t,e,n)}function d(t,e,n){Array.isArray(e)?function(t,e,n,i){for(var r=e;;){var o=r.nextSibling;if(c(t,r,i),r===n)break;r=o}}(t,e[0],e[1],n):c(t,e,n)}function f(t,e){if(Array.isArray(e)){var n=e[1];p(t,e=e[0],n),t.removeChild(n)}t.removeChild(e)}function p(t,e,n){for(;;){var i=e.nextSibling;if(i===n)break;t.removeChild(i)}}var m={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:function(t,e,n){var i=t.parentNode,r=t.nextSibling;r===e?n&&c(i,document.createTextNode(n),r):n?(l(r,n),p(i,r,e)):p(i,t,e)},processUpdates:function(t,e){for(var n=0;n<e.length;n++){var i=e[n];switch(i.type){case o.INSERT_MARKUP:h(t,i.content,u(t,i.afterNode));break;case o.MOVE_EXISTING:d(t,i.fromNode,u(t,i.afterNode));break;case o.SET_MARKUP:s(t,i.content);break;case o.TEXT_CONTENT:l(t,i.content);break;case o.REMOVE_NODE:f(t,i.fromNode)}}}};t.exports=m},1051:(t,e,n)=>{"use strict";var i=n(6722),r=n(2100),o=n(398),a=n(9712),s="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent);function l(t){if(s){var e=t.node,n=t.children;if(n.length)for(var i=0;i<n.length;i++)u(e,n[i],null);else null!=t.html?r(e,t.html):null!=t.text&&a(e,t.text)}}var u=o((function(t,e,n){11===e.node.nodeType||1===e.node.nodeType&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===i.html)?(l(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),l(e))}));function c(){return this.node.nodeName}function h(t){return{node:t,children:[],html:null,text:null,toString:c}}h.insertTreeBefore=u,h.replaceChildWithTree=function(t,e){t.parentNode.replaceChild(e.node,t),l(e)},h.queueChild=function(t,e){s?t.children.push(e):t.node.appendChild(e.node)},h.queueHTML=function(t,e){s?t.html=e:r(t.node,e)},h.queueText=function(t,e){s?t.text=e:a(t.node,e)},t.exports=h},6722:t=>{"use strict";t.exports={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"}},6937:(t,e,n)=>{"use strict";var i=n(2317);function r(t,e){return(t&e)===e}n(3759);var o={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=o,n=t.Properties||{},a=t.DOMAttributeNamespaces||{},l=t.DOMAttributeNames||{},u=t.DOMPropertyNames||{},c=t.DOMMutationMethods||{};for(var h in t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute),n){s.properties.hasOwnProperty(h)&&i("48",h);var d=h.toLowerCase(),f=n[h],p={attributeName:d,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:r(f,e.MUST_USE_PROPERTY),hasBooleanValue:r(f,e.HAS_BOOLEAN_VALUE),hasNumericValue:r(f,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(f,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(f,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(p.hasBooleanValue+p.hasNumericValue+p.hasOverloadedBooleanValue<=1||i("50",h),l.hasOwnProperty(h)){var m=l[h];p.attributeName=m}a.hasOwnProperty(h)&&(p.attributeNamespace=a[h]),u.hasOwnProperty(h)&&(p.propertyName=u[h]),c.hasOwnProperty(h)&&(p.mutationMethod=c[h]),s.properties[h]=p}}},a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++)if((0,s._isCustomAttributeFunctions[e])(t))return!0;return!1},injection:o};t.exports=s},8376:(t,e,n)=>{"use strict";var i=n(6937),r=(n(3990),n(8744),n(5431)),o=(n(3620),new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$")),a={},s={};function l(t){return!!s.hasOwnProperty(t)||!a.hasOwnProperty(t)&&(o.test(t)?(s[t]=!0,!0):(a[t]=!0,!1))}function u(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&!1===e}var c={createMarkupForID:function(t){return i.ID_ATTRIBUTE_NAME+"="+r(t)},setAttributeForID:function(t,e){t.setAttribute(i.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(n){if(u(n,e))return"";var o=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===e?o+'=""':o+"="+r(e)}return i.isCustomAttribute(t)?null==e?"":t+"="+r(e):null},createMarkupForCustomAttribute:function(t,e){return l(t)&&null!=e?t+"="+r(e):""},setValueForProperty:function(t,e,n){var r=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(r){var o=r.mutationMethod;if(o)o(t,n);else{if(u(r,n))return void this.deleteValueForProperty(t,e);if(r.mustUseProperty)t[r.propertyName]=n;else{var a=r.attributeName,s=r.attributeNamespace;s?t.setAttributeNS(s,a,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?t.setAttribute(a,""):t.setAttribute(a,""+n)}}}else if(i.isCustomAttribute(e))return void c.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){l(e)&&(null==n?t.removeAttribute(e):t.setAttribute(e,""+n))},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){var r=n.mutationMethod;if(r)r(t,void 0);else if(n.mustUseProperty){var o=n.propertyName;n.hasBooleanValue?t[o]=!1:t[o]=""}else t.removeAttribute(n.attributeName)}else i.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=c},3342:(t,e,n)=>{"use strict";var i=n(2317),r=n(1051),o=n(6508),a=n(188),s=n(139),l=(n(3759),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(o.canUseDOM||i("56"),e||i("57"),"HTML"===t.nodeName&&i("58"),"string"==typeof e){var n=a(e,s)[0];t.parentNode.replaceChild(n,t)}else r.replaceChildWithTree(t,e)}});t.exports=l},8084:(t,e,n)=>{"use strict";var i=n(5721),r=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({BeforeInputEventPlugin:null})];t.exports=r},1790:t=>{"use strict";var e={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},n={getHostProps:function(t,n){if(!n.disabled)return n;var i={};for(var r in n)!e[r]&&n.hasOwnProperty(r)&&(i[r]=n[r]);return i}};t.exports=n},5267:(t,e,n)=>{"use strict";var i=n(5338),r=n(7614),o=n(3990),a=n(3590),s=n(5721),l=i.topLevelTypes,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},c={eventTypes:u,extractEvents:function(t,e,n,i){if(t===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==l.topMouseOut&&t!==l.topMouseOver)return null;var s,c,h;if(i.window===i)s=i;else{var d=i.ownerDocument;s=d?d.defaultView||d.parentWindow:window}if(t===l.topMouseOut){c=e;var f=n.relatedTarget||n.toElement;h=f?o.getClosestInstanceFromNode(f):null}else c=null,h=e;if(c===h)return null;var p=null==c?s:o.getNodeFromInstance(c),m=null==h?s:o.getNodeFromInstance(h),_=a.getPooled(u.mouseLeave,c,n,i);_.type="mouseleave",_.target=p,_.relatedTarget=m;var g=a.getPooled(u.mouseEnter,h,n,i);return g.type="mouseenter",g.target=m,g.relatedTarget=p,r.accumulateEnterLeaveDispatches(_,g,c,h),[_,g]}};t.exports=c},5338:(t,e,n)=>{"use strict";var i=n(8918),r=i({bubbled:null,captured:null}),o={topLevelTypes:i({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),PropagationPhases:r};t.exports=o},7538:(t,e,n)=>{"use strict";var i=n(2317),r=n(1831),o=n(3904),a=n(5429),s=n(1317),l=n(6810),u=(n(3759),{}),c=null,h=function(t,e){t&&(o.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},d=function(t){return h(t,!0)},f=function(t){return h(t,!1)},p=function(t){return"."+t._rootNodeID},m={injection:{injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},putListener:function(t,e,n){"function"!=typeof n&&i("94",e,typeof n);var o=p(t);(u[e]||(u[e]={}))[o]=n;var a=r.registrationNameModules[e];a&&a.didPutListener&&a.didPutListener(t,e,n)},getListener:function(t,e){var n=u[e],i=p(t);return n&&n[i]},deleteListener:function(t,e){var n=r.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var i=u[e];i&&delete i[p(t)]},deleteAllListeners:function(t){var e=p(t);for(var n in u)if(u.hasOwnProperty(n)&&u[n][e]){var i=r.registrationNameModules[n];i&&i.willDeleteListener&&i.willDeleteListener(t,n),delete u[n][e]}},extractEvents:function(t,e,n,i){for(var o,a=r.plugins,l=0;l<a.length;l++){var u=a[l];if(u){var c=u.extractEvents(t,e,n,i);c&&(o=s(o,c))}}return o},enqueueEvents:function(t){t&&(c=s(c,t))},processEventQueue:function(t){var e=c;c=null,l(e,t?d:f),c&&i("95"),a.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=m},1831:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),null),o={};function a(){if(r)for(var t in o){var e=o[t],n=r.indexOf(t);if(n>-1||i("96",t),!u.plugins[n]){e.extractEvents||i("97",t),u.plugins[n]=e;var a=e.eventTypes;for(var l in a)s(a[l],e,l)||i("98",l,t)}}}function s(t,e,n){u.eventNameDispatchConfigs.hasOwnProperty(n)&&i("99",n),u.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var o in r)r.hasOwnProperty(o)&&l(r[o],e,n);return!0}return!!t.registrationName&&(l(t.registrationName,e,n),!0)}function l(t,e,n){u.registrationNameModules[t]&&i("100",t),u.registrationNameModules[t]=e,u.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){r&&i("101"),r=Array.prototype.slice.call(t),a()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];o.hasOwnProperty(n)&&o[n]===r||(o[n]&&i("102",n),o[n]=r,e=!0)}e&&a()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return u.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var i=u.registrationNameModules[e.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){for(var t in r=null,o)o.hasOwnProperty(t)&&delete o[t];u.plugins.length=0;var e=u.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var i=u.registrationNameModules;for(var a in i)i.hasOwnProperty(a)&&delete i[a]}};t.exports=u},3904:(t,e,n)=>{"use strict";var i,r,o=n(2317),a=n(5338),s=n(5429),l=(n(3759),n(3620),{injectComponentTree:function(t){i=t},injectTreeTraversal:function(t){r=t}}),u=a.topLevelTypes;function c(t,e,n,i){var r=t.type||"unknown-event";t.currentTarget=h.getNodeFromInstance(i),e?s.invokeGuardedCallbackWithCatch(r,n,t):s.invokeGuardedCallback(r,n,t),t.currentTarget=null}var h={isEndish:function(t){return t===u.topMouseUp||t===u.topTouchEnd||t===u.topTouchCancel},isMoveish:function(t){return t===u.topMouseMove||t===u.topTouchMove},isStartish:function(t){return t===u.topMouseDown||t===u.topTouchStart},executeDirectDispatch:function(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)&&o("103"),t.currentTarget=e?h.getNodeFromInstance(n):null;var i=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,i},executeDispatchesInOrder:function(t,e){var n=t._dispatchListeners,i=t._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!t.isPropagationStopped();r++)c(t,e,n[r],i[r]);else n&&c(t,e,n,i);t._dispatchListeners=null,t._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(t){var e=function(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var i=0;i<e.length&&!t.isPropagationStopped();i++)if(e[i](t,n[i]))return n[i]}else if(e&&e(t,n))return n;return null}(t);return t._dispatchInstances=null,t._dispatchListeners=null,e},hasDispatches:function(t){return!!t._dispatchListeners},getInstanceFromNode:function(t){return i.getInstanceFromNode(t)},getNodeFromInstance:function(t){return i.getNodeFromInstance(t)},isAncestor:function(t,e){return r.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return r.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return r.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return r.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,i,o){return r.traverseEnterLeave(t,e,n,i,o)},injection:l};t.exports=h},7614:(t,e,n)=>{"use strict";var i=n(5338),r=n(7538),o=n(3904),a=n(1317),s=n(6810),l=(n(3620),i.PropagationPhases),u=r.getListener;function c(t,e,n){var i=function(t,e,n){var i=e.dispatchConfig.phasedRegistrationNames[n];return u(t,i)}(t,n,e?l.bubbled:l.captured);i&&(n._dispatchListeners=a(n._dispatchListeners,i),n._dispatchInstances=a(n._dispatchInstances,t))}function h(t){t&&t.dispatchConfig.phasedRegistrationNames&&o.traverseTwoPhase(t._targetInst,c,t)}function d(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?o.getParentInstance(e):null;o.traverseTwoPhase(n,c,t)}}function f(t,e,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=u(t,i);r&&(n._dispatchListeners=a(n._dispatchListeners,r),n._dispatchInstances=a(n._dispatchInstances,t))}}function p(t){t&&t.dispatchConfig.registrationName&&f(t._targetInst,0,t)}var m={accumulateTwoPhaseDispatches:function(t){s(t,h)},accumulateTwoPhaseDispatchesSkipTarget:function(t){s(t,d)},accumulateDirectDispatches:function(t){s(t,p)},accumulateEnterLeaveDispatches:function(t,e,n,i){o.traverseEnterLeave(n,i,f,t,e)}};t.exports=m},9160:(t,e,n)=>{"use strict";var i=n(7418),r=n(3303),o=n(2706);function a(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}i(a.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,i=n.length,r=this.getText(),o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=r.slice(t,s),this._fallbackText}}),r.addPoolingTo(a),t.exports=a},8926:(t,e,n)=>{"use strict";var i=n(6937),r=i.injection.MUST_USE_PROPERTY,o=i.injection.HAS_BOOLEAN_VALUE,a=i.injection.HAS_NUMERIC_VALUE,s=i.injection.HAS_POSITIVE_NUMERIC_VALUE,l=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+i.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:r|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:r|o,muted:r|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:r|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=u},6037:t=>{"use strict";t.exports={escape:function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))},unescape:function(t){var e={"=0":"=","=2":":"};return(""+("."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1))).replace(/(=0|=2)/g,(function(t){return e[t]}))}}},3240:(t,e,n)=>{"use strict";var i=n(2317),r=n(5339),o=n(9321),a=n(1399),s=(n(3759),n(3620),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0});function l(t){null!=t.checkedLink&&null!=t.valueLink&&i("87")}function u(t){l(t),(null!=t.value||null!=t.onChange)&&i("88")}function c(t){l(t),(null!=t.checked||null!=t.onChange)&&i("89")}var h={value:function(t,e,n){return!t[e]||s[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:r.func},d={};function f(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var p={checkPropTypes:function(t,e,n){for(var i in h){if(h.hasOwnProperty(i))var r=h[i](e,i,t,o.prop,null,a);r instanceof Error&&!(r.message in d)&&(d[r.message]=!0,f(n))}},getValue:function(t){return t.valueLink?(u(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(c(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(u(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(c(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=p},3303:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),o=function(t){var e=this;t instanceof e||i("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},a=r,s={addPoolingTo:function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||a,n.poolSize||(n.poolSize=10),n.release=o,n},oneArgumentPooler:r,twoArgumentPooler:function(t,e){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,t,e),i}return new n(t,e)},threeArgumentPooler:function(t,e,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,t,e,n),r}return new i(t,e,n)},fourArgumentPooler:function(t,e,n,i){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,t,e,n,i),o}return new r(t,e,n,i)},fiveArgumentPooler:function(t,e,n,i,r){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,t,e,n,i,r),a}return new o(t,e,n,i,r)}};t.exports=s},8954:(t,e,n)=>{"use strict";var i=n(7418),r=n(7196),o=n(6047),a=n(9637),s=n(8540),l=n(8861),u=n(1506),c=n(5339),h=n(7268),d=n(661),f=(n(3620),u.createElement),p=u.createFactory,m=u.cloneElement,_=i,g={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:d},Component:o,PureComponent:a,createElement:f,cloneElement:m,isValidElement:u.isValidElement,PropTypes:c,createClass:s.createClass,createFactory:p,createMixin:function(t){return t},DOM:l,version:h,__spread:_};t.exports=g},2134:(t,e,n)=>{"use strict";var i,r=n(7418),o=n(5338),a=n(1831),s=n(2666),l=n(7987),u=n(3705),c=n(1708),h={},d=!1,f=0,p={topAbort:"abort",topAnimationEnd:u("animationend")||"animationend",topAnimationIteration:u("animationiteration")||"animationiteration",topAnimationStart:u("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:u("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),_=r({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(_.handleTopLevel),_.ReactEventListener=t}},setEnabled:function(t){_.ReactEventListener&&_.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!_.ReactEventListener||!_.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,i=function(t){return Object.prototype.hasOwnProperty.call(t,m)||(t[m]=f++,h[t[m]]={}),h[t[m]]}(n),r=a.registrationNameDependencies[t],s=o.topLevelTypes,l=0;l<r.length;l++){var u=r[l];i.hasOwnProperty(u)&&i[u]||(u===s.topWheel?c("wheel")?_.ReactEventListener.trapBubbledEvent(s.topWheel,"wheel",n):c("mousewheel")?_.ReactEventListener.trapBubbledEvent(s.topWheel,"mousewheel",n):_.ReactEventListener.trapBubbledEvent(s.topWheel,"DOMMouseScroll",n):u===s.topScroll?c("scroll",!0)?_.ReactEventListener.trapCapturedEvent(s.topScroll,"scroll",n):_.ReactEventListener.trapBubbledEvent(s.topScroll,"scroll",_.ReactEventListener.WINDOW_HANDLE):u===s.topFocus||u===s.topBlur?(c("focus",!0)?(_.ReactEventListener.trapCapturedEvent(s.topFocus,"focus",n),_.ReactEventListener.trapCapturedEvent(s.topBlur,"blur",n)):c("focusin")&&(_.ReactEventListener.trapBubbledEvent(s.topFocus,"focusin",n),_.ReactEventListener.trapBubbledEvent(s.topBlur,"focusout",n)),i[s.topBlur]=!0,i[s.topFocus]=!0):p.hasOwnProperty(u)&&_.ReactEventListener.trapBubbledEvent(u,p[u],n),i[u]=!0)}},trapBubbledEvent:function(t,e,n){return _.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return _.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!i&&!d){var t=l.refreshScrollValues;_.ReactEventListener.monitorScrollValue(t),d=!0}}});t.exports=_},5169:(t,e,n)=>{"use strict";var i=n(974),r=n(4301),o=(n(6037),n(588)),a=n(9898);function s(t,e,n,i){var o=void 0===t[n];null!=e&&o&&(t[n]=r(e,!0))}n(3620),"undefined"!=typeof process&&process.env;var l={instantiateChildren:function(t,e,n,i){if(null==t)return null;var r={};return a(t,s,r),r},updateChildren:function(t,e,n,a,s,l,u,c,h){if(e||t){var d,f;for(d in e)if(e.hasOwnProperty(d)){var p=(f=t&&t[d])&&f._currentElement,m=e[d];if(null!=f&&o(p,m))i.receiveComponent(f,m,s,c),e[d]=f;else{f&&(a[d]=i.getHostNode(f),i.unmountComponent(f,!1));var _=r(m,!0);e[d]=_;var g=i.mountComponent(_,s,l,u,c,h);n.push(g)}}for(d in t)!t.hasOwnProperty(d)||e&&e.hasOwnProperty(d)||(f=t[d],a[d]=i.getHostNode(f),i.unmountComponent(f,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];i.unmountComponent(r,e)}}};t.exports=l},7196:(t,e,n)=>{"use strict";var i=n(3303),r=n(1506),o=n(139),a=n(9898),s=i.twoArgumentPooler,l=i.fourArgumentPooler,u=/\/+/g;function c(t){return(""+t).replace(u,"$&/")}function h(t,e){this.func=t,this.context=e,this.count=0}function d(t,e,n){var i=t.func,r=t.context;i.call(r,e,t.count++)}function f(t,e,n,i){this.result=t,this.keyPrefix=e,this.func=n,this.context=i,this.count=0}function p(t,e,n){var i=t.result,a=t.keyPrefix,s=t.func,l=t.context,u=s.call(l,e,t.count++);Array.isArray(u)?m(u,i,n,o.thatReturnsArgument):null!=u&&(r.isValidElement(u)&&(u=r.cloneAndReplaceKey(u,a+(!u.key||e&&e.key===u.key?"":c(u.key)+"/")+n)),i.push(u))}function m(t,e,n,i,r){var o="";null!=n&&(o=c(n)+"/");var s=f.getPooled(e,o,i,r);a(t,p,s),f.release(s)}function _(t,e,n){return null}h.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},i.addPoolingTo(h,s),f.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},i.addPoolingTo(f,l);var g={forEach:function(t,e,n){if(null==t)return t;var i=h.getPooled(e,n);a(t,d,i),h.release(i)},map:function(t,e,n){if(null==t)return t;var i=[];return m(t,i,null,e,n),i},mapIntoWithKeyPrefixInternal:m,count:function(t,e){return a(t,_,null)},toArray:function(t){var e=[];return m(t,e,null,o.thatReturnsArgument),e}};t.exports=g},8540:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(6047),a=n(1506),s=(n(9321),n(727),n(3662)),l=n(3677),u=(n(3759),n(8918)),c=n(5721),h=(n(3620),c({mixins:null})),d=u({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),f=[],p={mixins:d.DEFINE_MANY,statics:d.DEFINE_MANY,propTypes:d.DEFINE_MANY,contextTypes:d.DEFINE_MANY,childContextTypes:d.DEFINE_MANY,getDefaultProps:d.DEFINE_MANY_MERGED,getInitialState:d.DEFINE_MANY_MERGED,getChildContext:d.DEFINE_MANY_MERGED,render:d.DEFINE_ONCE,componentWillMount:d.DEFINE_MANY,componentDidMount:d.DEFINE_MANY,componentWillReceiveProps:d.DEFINE_MANY,shouldComponentUpdate:d.DEFINE_ONCE,componentWillUpdate:d.DEFINE_MANY,componentDidUpdate:d.DEFINE_MANY,componentWillUnmount:d.DEFINE_MANY,updateComponent:d.OVERRIDE_BASE},m={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)g(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=r({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=r({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=v(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=r({},t.propTypes,e)},statics:function(t,e){!function(t,e){if(e)for(var n in e){var r=e[n];e.hasOwnProperty(n)&&(n in m&&i("78",n),n in t&&i("79",n),t[n]=r)}}(t,e)},autobind:function(){}};function _(t,e){var n=p.hasOwnProperty(e)?p[e]:null;w.hasOwnProperty(e)&&n!==d.OVERRIDE_BASE&&i("73",e),t&&n!==d.DEFINE_MANY&&n!==d.DEFINE_MANY_MERGED&&i("74",e)}function g(t,e){if(e){"function"==typeof e&&i("75"),a.isValidElement(e)&&i("76");var n=t.prototype,r=n.__reactAutoBindPairs;for(var o in e.hasOwnProperty(h)&&m.mixins(t,e.mixins),e)if(e.hasOwnProperty(o)&&o!==h){var s=e[o],l=n.hasOwnProperty(o);if(_(l,o),m.hasOwnProperty(o))m[o](t,s);else{var u=p.hasOwnProperty(o);if("function"!=typeof s||u||l||!1===e.autobind)if(l){var c=p[o];(!u||c!==d.DEFINE_MANY_MERGED&&c!==d.DEFINE_MANY)&&i("77",c,o),c===d.DEFINE_MANY_MERGED?n[o]=v(n[o],s):c===d.DEFINE_MANY&&(n[o]=x(n[o],s))}else n[o]=s;else r.push(o,s),n[o]=s}}}}function y(t,e){for(var n in t&&e&&"object"==typeof t&&"object"==typeof e||i("80"),e)e.hasOwnProperty(n)&&(void 0!==t[n]&&i("81",n),t[n]=e[n]);return t}function v(t,e){return function(){var n=t.apply(this,arguments),i=e.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return y(r,n),y(r,i),r}}function x(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function b(t,e){return e.bind(t)}var w={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},M=function(){};r(M.prototype,o.prototype,w);var T={createClass:function(t){var e=function(t,n,r){this.__reactAutoBindPairs.length&&function(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var i=e[n],r=e[n+1];t[i]=b(t,r)}}(this),this.props=t,this.context=n,this.refs=l,this.updater=r||s,this.state=null;var o=this.getInitialState?this.getInitialState():null;("object"!=typeof o||Array.isArray(o))&&i("82",e.displayName||"ReactCompositeComponent"),this.state=o};for(var n in e.prototype=new M,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],f.forEach(g.bind(null,e)),g(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.prototype.render||i("83"),p)e.prototype[n]||(e.prototype[n]=null);return e},injection:{injectMixin:function(t){f.push(t)}}};t.exports=T},6047:(t,e,n)=>{"use strict";var i=n(2317),r=n(3662),o=(n(3545),n(3677));function a(t,e,n){this.props=t,this.context=e,this.refs=o,this.updater=n||r}n(3759),n(3620),a.prototype.isReactComponent={},a.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&i("85"),this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")},t.exports=a},6299:(t,e,n)=>{"use strict";var i=n(5392),r={processChildrenUpdates:n(63).dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup};t.exports=r},5782:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){r&&i("104"),o.replaceNodeWithMarkup=t.replaceNodeWithMarkup,o.processChildrenUpdates=t.processChildrenUpdates,r=!0}}};t.exports=o},2795:(t,e,n)=>{"use strict";var i=n(2317),r=n(4066);function o(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,i=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var r=e.call(t);return i.test(r)}catch(t){return!1}}n(3759),n(3620);var a,s,l,u,c="function"==typeof Array.from&&"function"==typeof Map&&o(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&o(Map.prototype.keys)&&"function"==typeof Set&&o(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&o(Set.prototype.keys);c?(a=new Map,s=new Set):(l={},u={});var h=[];function d(t){return"."+t}function f(t){return parseInt(t.substr(1),10)}function p(t){if(c)return a.get(t);var e=d(t);return l[e]}function m(t){var e=p(t);if(e){var n=e.childIDs;!function(t){if(c)a.delete(t);else{var e=d(t);delete l[e]}}(t),n.forEach(m)}}function _(t,e,n){return"\n    in "+t+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function g(t){var e,n=y.getDisplayName(t),i=y.getElement(t),r=y.getOwnerID(t);return r&&(e=y.getDisplayName(r)),_(n,i&&i._source,e)}var y={onSetChildren:function(t,e){p(t).childIDs=e;for(var n=0;n<e.length;n++){var r=e[n],o=p(r);o||i("140"),null==o.childIDs&&"object"==typeof o.element&&null!=o.element&&i("141"),o.isMounted||i("71"),null==o.parentID&&(o.parentID=t),o.parentID!==t&&i("142",r,o.parentID,t)}},onBeforeMountComponent:function(t,e,n){!function(t,e,n){var i={element:e,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};if(c)a.set(t,i);else{var r=d(t);l[r]=i}}(t,e,n)},onBeforeUpdateComponent:function(t,e){var n=p(t);n&&n.isMounted&&(n.element=e)},onMountComponent:function(t){var e=p(t);e.isMounted=!0,0===e.parentID&&function(t){if(c)s.add(t);else{var e=d(t);u[e]=!0}}(t)},onUpdateComponent:function(t){var e=p(t);e&&e.isMounted&&e.updateCount++},onUnmountComponent:function(t){var e=p(t);e&&(e.isMounted=!1,0===e.parentID&&function(t){if(c)s.delete(t);else{var e=d(t);delete u[e]}}(t)),h.push(t)},purgeUnmountedComponents:function(){if(!y._preventPurging){for(var t=0;t<h.length;t++)m(h[t]);h.length=0}},isMounted:function(t){var e=p(t);return!!e&&e.isMounted},getCurrentStackAddendum:function(t){var e="";if(t){var n=t.type,i="function"==typeof n?n.displayName||n.name:n,o=t._owner;e+=_(i||"Unknown",t._source,o&&o.getName())}var a=r.current,s=a&&a._debugID;return e+y.getStackAddendumByID(s)},getStackAddendumByID:function(t){for(var e="";t;)e+=g(t),t=y.getParentID(t);return e},getChildIDs:function(t){var e=p(t);return e?e.childIDs:[]},getDisplayName:function(t){var e=y.getElement(t);return e?function(t){return null==t?"#empty":"string"==typeof t||"number"==typeof t?"#text":"string"==typeof t.type?t.type:t.type.displayName||t.type.name||"Unknown"}(e):null},getElement:function(t){var e=p(t);return e?e.element:null},getOwnerID:function(t){var e=y.getElement(t);return e&&e._owner?e._owner._debugID:null},getParentID:function(t){var e=p(t);return e?e.parentID:null},getSource:function(t){var e=p(t),n=e?e.element:null;return null!=n?n._source:null},getText:function(t){var e=y.getElement(t);return"string"==typeof e?e:"number"==typeof e?""+e:null},getUpdateCount:function(t){var e=p(t);return e?e.updateCount:0},getRegisteredIDs:function(){return c?Array.from(a.keys()):Object.keys(l).map(f)},getRootIDs:function(){return c?Array.from(s.keys()):Object.keys(u).map(f)}};t.exports=y},5238:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(5782),a=n(4066),s=n(1506),l=n(5429),u=n(2715),c=(n(8744),n(7807)),h=(n(9321),n(974)),d=n(5118),f=n(3677),p=(n(3759),n(9303)),m=n(588),_=(n(3620),0);function g(t){}g.prototype.render=function(){var t=u.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return e};var y=1,v={Mixin:{construct:function(t){this._currentElement=t,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,r){this._context=r,this._mountOrder=y++,this._hostParent=e,this._hostContainerInfo=n;var o,a=this._currentElement.props,l=this._processContext(r),c=this._currentElement.type,h=t.getUpdateQueue(),d=function(t){return!(!t.prototype||!t.prototype.isReactComponent)}(c),p=this._constructComponent(d,a,l,h);d||null!=p&&null!=p.render?function(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}(c)?this._compositeType=1:this._compositeType=_:(o=p,null===p||!1===p||s.isValidElement(p)||i("105",c.displayName||c.name||"Component"),p=new g(c),this._compositeType=2),p.props=a,p.context=l,p.refs=f,p.updater=h,this._instance=p,u.set(p,this);var m,v=p.state;return void 0===v&&(p.state=v=null),("object"!=typeof v||Array.isArray(v))&&i("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,m=p.unstable_handleError?this.performInitialMountWithErrorHandling(o,e,n,t,r):this.performInitialMount(o,e,n,t,r),p.componentDidMount&&t.getReactMountReady().enqueue(p.componentDidMount,p),m},_constructComponent:function(t,e,n,i){return this._constructComponentWithoutOwner(t,e,n,i)},_constructComponentWithoutOwner:function(t,e,n,i){var r=this._currentElement.type;return t?new r(e,n,i):r(e,n,i)},performInitialMountWithErrorHandling:function(t,e,n,i,r){var o,a=i.checkpoint();try{o=this.performInitialMount(t,e,n,i,r)}catch(s){i.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=i.checkpoint(),this._renderedComponent.unmountComponent(!0),i.rollback(a),o=this.performInitialMount(t,e,n,i,r)}return o},performInitialMount:function(t,e,n,i,r){var o=this._instance;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===t&&(t=this._renderValidatedComponent());var a=c.getType(t);this._renderedNodeType=a;var s=this._instantiateReactComponent(t,a!==c.EMPTY);return this._renderedComponent=s,h.mountComponent(s,i,e,n,this._processChildContext(r),0)},getHostNode:function(){return h.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";l.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(h.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,u.remove(e)}},_maskContext:function(t){var e=this._currentElement.type.contextTypes;if(!e)return f;var n={};for(var i in e)n[i]=t[i];return n},_processContext:function(t){return this._maskContext(t)},_processChildContext:function(t){var e=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){for(var a in"object"!=typeof e.childContextTypes&&i("107",this.getName()||"ReactCompositeComponent"),o)a in e.childContextTypes||i("108",this.getName()||"ReactCompositeComponent",a);return r({},t,o)}return t},_checkContextTypes:function(t,e,n){d(t,e,n,this.getName(),null,this._debugID)},receiveComponent:function(t,e,n){var i=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(e,i,t,r,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?h.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,r,o){var a=this._instance;null==a&&i("136",this.getName()||"ReactCompositeComponent");var s,l=!1;this._context===o?s=a.context:(s=this._processContext(o),l=!0);var u=e.props,c=n.props;e!==n&&(l=!0),l&&a.componentWillReceiveProps&&a.componentWillReceiveProps(c,s);var h=this._processPendingState(c,s),d=!0;this._pendingForceUpdate||(a.shouldComponentUpdate?d=a.shouldComponentUpdate(c,h,s):1===this._compositeType&&(d=!p(u,c)||!p(a.state,h))),this._updateBatchNumber=null,d?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,h,s,t,o)):(this._currentElement=n,this._context=o,a.props=c,a.state=h,a.context=s)},_processPendingState:function(t,e){var n=this._instance,i=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(o&&1===i.length)return i[0];for(var a=r({},o?i[0]:n.state),s=o?1:0;s<i.length;s++){var l=i[s];r(a,"function"==typeof l?l.call(n,a,t,e):l)}return a},_performComponentUpdate:function(t,e,n,i,r,o){var a,s,l,u=this._instance,c=Boolean(u.componentDidUpdate);c&&(a=u.props,s=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(e,n,i),this._currentElement=t,this._context=o,u.props=e,u.state=n,u.context=i,this._updateRenderedComponent(r,o),c&&r.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,a,s,l),u)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,i=n._currentElement,r=this._renderValidatedComponent();if(m(i,r))h.receiveComponent(n,r,t,this._processChildContext(e));else{var o=h.getHostNode(n);h.unmountComponent(n,!1);var a=c.getType(r);this._renderedNodeType=a;var s=this._instantiateReactComponent(r,a!==c.EMPTY);this._renderedComponent=s;var l=h.mountComponent(s,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e),0);this._replaceNodeWithMarkup(o,l,n)}},_replaceNodeWithMarkup:function(t,e,n){o.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},_renderValidatedComponent:function(){var t;if(2!==this._compositeType){a.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||!1===t||s.isValidElement(t)||i("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n&&i("110");var r=e.getPublicInstance();(n.refs===f?n.refs={}:n.refs)[t]=r},detachRef:function(t){delete this.getPublicInstance().refs[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return 2===this._compositeType?null:t},_instantiateReactComponent:null}};t.exports=v},4066:t=>{"use strict";t.exports={current:null}},8951:(t,e,n)=>{"use strict";var i=n(3990),r=n(3583),o=n(728),a=n(974),s=n(8638),l=n(7268),u=n(2116),c=n(3333),h=n(5172);n(3620),r.inject();var d={findDOMNode:u,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:i.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=c(t)),t?i.getNodeFromInstance(t):null}},Mount:o,Reconciler:a}),t.exports=d},3883:(t,e,n)=>{"use strict";var i={getHostProps:n(1790).getHostProps};t.exports=i},3647:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(686),a=n(5786),s=n(1051),l=n(6722),u=n(6937),c=n(8376),h=n(5338),d=n(7538),f=n(1831),p=n(2134),m=n(3883),_=n(9115),g=n(3990),y=n(5764),v=n(4360),x=n(2444),b=n(1388),w=(n(8744),n(4393)),M=n(1853),T=(n(139),n(6570)),k=(n(3759),n(1708),n(5721)),S=(n(9303),n(6577),n(3620),_),E=d.deleteListener,C=g.getNodeFromInstance,L=p.listenTo,D=f.registrationNameModules,A={string:!0,number:!0},P=k({style:null}),I=k({__html:null}),z={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null};function F(t,e){e&&(q[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&i("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&i("60"),"object"==typeof e.dangerouslySetInnerHTML&&I in e.dangerouslySetInnerHTML||i("61")),null!=e.style&&"object"!=typeof e.style&&i("62",function(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}(t)))}function R(t,e,n,i){if(!(i instanceof M)){var r=t._hostContainerInfo,o=r._node&&11===r._node.nodeType?r._node:r._ownerDocument;L(e,o),i.getReactMountReady().enqueue(O,{inst:t,registrationName:e,listener:n})}}function O(){var t=this;d.putListener(t.inst,t.registrationName,t.listener)}function Y(){y.postMountWrapper(this)}function N(){b.postMountWrapper(this)}function B(){v.postMountWrapper(this)}var j={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function U(){var t=this;t._rootNodeID||i("63");var e=C(t);switch(e||i("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[p.trapBubbledEvent(h.topLevelTypes.topLoad,"load",e)];break;case"video":case"audio":for(var n in t._wrapperState.listeners=[],j)j.hasOwnProperty(n)&&t._wrapperState.listeners.push(p.trapBubbledEvent(h.topLevelTypes[n],j[n],e));break;case"source":t._wrapperState.listeners=[p.trapBubbledEvent(h.topLevelTypes.topError,"error",e)];break;case"img":t._wrapperState.listeners=[p.trapBubbledEvent(h.topLevelTypes.topError,"error",e),p.trapBubbledEvent(h.topLevelTypes.topLoad,"load",e)];break;case"form":t._wrapperState.listeners=[p.trapBubbledEvent(h.topLevelTypes.topReset,"reset",e),p.trapBubbledEvent(h.topLevelTypes.topSubmit,"submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[p.trapBubbledEvent(h.topLevelTypes.topInvalid,"invalid",e)]}}function $(){x.postUpdateWrapper(this)}var H={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},V={listing:!0,pre:!0,textarea:!0},q=r({menuitem:!0},H),W=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,G={},Z={}.hasOwnProperty;function X(t,e){return t.indexOf("-")>=0||null!=e.is}var K=1;function J(t){var e=t.type;!function(t){Z.call(G,t)||(W.test(t)||i("65",t),G[t]=!0)}(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}J.displayName="ReactDOMComponent",J.Mixin={mountComponent:function(t,e,n,i){this._rootNodeID=K++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var r,a,u,h=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(U,this);break;case"button":h=m.getHostProps(this,h,e);break;case"input":y.mountWrapper(this,h,e),h=y.getHostProps(this,h),t.getReactMountReady().enqueue(U,this);break;case"option":v.mountWrapper(this,h,e),h=v.getHostProps(this,h);break;case"select":x.mountWrapper(this,h,e),h=x.getHostProps(this,h),t.getReactMountReady().enqueue(U,this);break;case"textarea":b.mountWrapper(this,h,e),h=b.getHostProps(this,h),t.getReactMountReady().enqueue(U,this)}if(F(this,h),null!=e?(r=e._namespaceURI,a=e._tag):n._tag&&(r=n._namespaceURI,a=n._tag),(null==r||r===l.svg&&"foreignobject"===a)&&(r=l.html),r===l.html&&("svg"===this._tag?r=l.svg:"math"===this._tag&&(r=l.mathml)),this._namespaceURI=r,t.useCreateElement){var d,f=n._ownerDocument;if(r===l.html)if("script"===this._tag){var p=f.createElement("div"),_=this._currentElement.type;p.innerHTML="<"+_+"></"+_+">",d=p.removeChild(p.firstChild)}else d=h.is?f.createElement(this._currentElement.type,h.is):f.createElement(this._currentElement.type);else d=f.createElementNS(r,this._currentElement.type);g.precacheNode(this,d),this._flags|=S.hasCachedChildNodes,this._hostParent||c.setAttributeForRoot(d),this._updateDOMProperties(null,h,t);var w=s(d);this._createInitialChildren(t,h,i,w),u=w}else{var M=this._createOpenTagMarkupAndPutListeners(t,h),T=this._createContentMarkup(t,h,i);u=!T&&H[this._tag]?M+"/>":M+">"+T+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(Y,this),h.autoFocus&&t.getReactMountReady().enqueue(o.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(N,this),h.autoFocus&&t.getReactMountReady().enqueue(o.focusDOMComponent,this);break;case"select":case"button":h.autoFocus&&t.getReactMountReady().enqueue(o.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(B,this)}return u},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(null!=o)if(D.hasOwnProperty(i))o&&R(this,i,o,t);else{i===P&&(o&&(o=this._previousStyleCopy=r({},e.style)),o=a.createMarkupForStyles(o,this));var s=null;null!=this._tag&&X(this._tag,e)?z.hasOwnProperty(i)||(s=c.createMarkupForCustomAttribute(i,o)):s=c.createMarkupForProperty(i,o),s&&(n+=" "+s)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+c.createMarkupForRoot()),n+=" "+c.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var i="",r=e.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(i=r.__html);else{var o=A[typeof e.children]?e.children:null,a=null!=o?null:e.children;null!=o?i=T(o):null!=a&&(i=this.mountChildren(a,t,n).join(""))}return V[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(t,e,n,i){var r=e.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&s.queueHTML(i,r.__html);else{var o=A[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)s.queueText(i,o);else if(null!=a)for(var l=this.mountChildren(a,t,n),u=0;u<l.length;u++)s.queueChild(i,l[u])}},receiveComponent:function(t,e,n){var i=this._currentElement;this._currentElement=t,this.updateComponent(e,i,t,n)},updateComponent:function(t,e,n,i){var r=e.props,o=this._currentElement.props;switch(this._tag){case"button":r=m.getHostProps(this,r),o=m.getHostProps(this,o);break;case"input":r=y.getHostProps(this,r),o=y.getHostProps(this,o);break;case"option":r=v.getHostProps(this,r),o=v.getHostProps(this,o);break;case"select":r=x.getHostProps(this,r),o=x.getHostProps(this,o);break;case"textarea":r=b.getHostProps(this,r),o=b.getHostProps(this,o)}switch(F(this,o),this._updateDOMProperties(r,o,t),this._updateDOMChildren(r,o,t,i),this._tag){case"input":y.updateWrapper(this);break;case"textarea":b.updateWrapper(this);break;case"select":t.getReactMountReady().enqueue($,this)}},_updateDOMProperties:function(t,e,n){var i,o,s;for(i in t)if(!e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&null!=t[i])if(i===P){var l=this._previousStyleCopy;for(o in l)l.hasOwnProperty(o)&&((s=s||{})[o]="");this._previousStyleCopy=null}else D.hasOwnProperty(i)?t[i]&&E(this,i):X(this._tag,t)?z.hasOwnProperty(i)||c.deleteValueForAttribute(C(this),i):(u.properties[i]||u.isCustomAttribute(i))&&c.deleteValueForProperty(C(this),i);for(i in e){var h=e[i],d=i===P?this._previousStyleCopy:null!=t?t[i]:void 0;if(e.hasOwnProperty(i)&&h!==d&&(null!=h||null!=d))if(i===P)if(h?h=this._previousStyleCopy=r({},h):this._previousStyleCopy=null,d){for(o in d)!d.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||((s=s||{})[o]="");for(o in h)h.hasOwnProperty(o)&&d[o]!==h[o]&&((s=s||{})[o]=h[o])}else s=h;else if(D.hasOwnProperty(i))h?R(this,i,h,n):d&&E(this,i);else if(X(this._tag,e))z.hasOwnProperty(i)||c.setValueForAttribute(C(this),i,h);else if(u.properties[i]||u.isCustomAttribute(i)){var f=C(this);null!=h?c.setValueForProperty(f,i,h):c.deleteValueForProperty(f,i)}}s&&a.setValueForStyles(C(this),s,this)},_updateDOMChildren:function(t,e,n,i){var r=A[typeof t.children]?t.children:null,o=A[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,l=null!=r?null:t.children,u=null!=o?null:e.children,c=null!=r||null!=a,h=null!=o||null!=s;null!=l&&null==u?this.updateChildren(null,n,i):c&&!h&&this.updateTextContent(""),null!=o?r!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,n,i)},getHostNode:function(){return C(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"html":case"head":case"body":i("66",this._tag)}this.unmountChildren(t),g.uncacheNode(this),d.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return C(this)}},r(J.prototype,J.Mixin,w.Mixin),t.exports=J},9115:t=>{"use strict";t.exports={hasCachedChildNodes:1}},3990:(t,e,n)=>{"use strict";var i=n(2317),r=n(6937),o=n(9115),a=(n(3759),r.ID_ATTRIBUTE_NAME),s=o,l="__reactInternalInstance$"+Math.random().toString(36).slice(2);function u(t){for(var e;e=t._renderedComponent;)t=e;return t}function c(t,e){var n=u(t);n._hostNode=e,e[l]=n}function h(t,e){if(!(t._flags&s.hasCachedChildNodes)){var n=t._renderedChildren,r=e.firstChild;t:for(var o in n)if(n.hasOwnProperty(o)){var l=n[o],h=u(l)._domID;if(0!==h){for(;null!==r;r=r.nextSibling)if(1===r.nodeType&&r.getAttribute(a)===String(h)||8===r.nodeType&&r.nodeValue===" react-text: "+h+" "||8===r.nodeType&&r.nodeValue===" react-empty: "+h+" "){c(l,r);continue t}i("32",h)}}t._flags|=s.hasCachedChildNodes}}function d(t){if(t[l])return t[l];for(var e,n,i=[];!t[l];){if(i.push(t),!t.parentNode)return null;t=t.parentNode}for(;t&&(n=t[l]);t=i.pop())e=n,i.length&&h(n,t);return e}var f={getClosestInstanceFromNode:d,getInstanceFromNode:function(t){var e=d(t);return null!=e&&e._hostNode===t?e:null},getNodeFromInstance:function(t){if(void 0===t._hostNode&&i("33"),t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent||i("34"),t=t._hostParent;for(;e.length;t=e.pop())h(t,t._hostNode);return t._hostNode},precacheChildNodes:h,precacheNode:c,uncacheNode:function(t){var e=t._hostNode;e&&(delete e[l],t._hostNode=null)}};t.exports=f},2799:(t,e,n)=>{"use strict";n(6577),t.exports=function(t,e){return{_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?9===e.nodeType?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null}}},778:(t,e,n)=>{"use strict";var i=n(7418),r=n(1051),o=n(3990),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};i(a.prototype,{mountComponent:function(t,e,n,i){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var l=n._ownerDocument.createComment(s);return o.precacheNode(this,l),r(l)}return t.renderToStaticMarkup?"":"\x3c!--"+s+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),t.exports=a},8861:(t,e,n)=>{"use strict";var i=n(1506).createFactory,r={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};t.exports=r},3152:t=>{"use strict";t.exports={useCreateElement:!0}},63:(t,e,n)=>{"use strict";var i=n(5392),r=n(3990),o={dangerouslyProcessChildrenUpdates:function(t,e){var n=r.getNodeFromInstance(t);i.processUpdates(n,e)}};t.exports=o},5764:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(1790),a=n(8376),s=n(3240),l=n(3990),u=n(8638);function c(){this._rootNodeID&&h.updateWrapper(this)}n(3759),n(3620);var h={getHostProps:function(t,e){var n=s.getValue(e),i=s.getChecked(e);return r({type:void 0,step:void 0,min:void 0,max:void 0},o.getHostProps(t,e),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=i?i:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange})},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:d.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&a.setValueForProperty(l.getNodeFromInstance(t),"checked",n||!1);var i=l.getNodeFromInstance(t),r=s.getValue(e);if(null!=r){var o=""+r;o!==i.value&&(i.value=o)}else null==e.value&&null!=e.defaultValue&&(i.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(i.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=l.getNodeFromInstance(t);switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var i=n.name;""!==i&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==i&&(n.name=i)}};function d(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);u.asap(c,this);var r=e.name;if("radio"===e.type&&null!=r){for(var o=l.getNodeFromInstance(this),a=o;a.parentNode;)a=a.parentNode;for(var h=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),d=0;d<h.length;d++){var f=h[d];if(f!==o&&f.form===o.form){var p=l.getInstanceFromNode(f);p||i("90"),u.asap(c,p)}}}return n}t.exports=h},4360:(t,e,n)=>{"use strict";var i=n(7418),r=n(7196),o=n(3990),a=n(2444),s=(n(3620),!1);function l(t){var e="";return r.forEach(t,(function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:s||(s=!0))})),e}var u={mountWrapper:function(t,e,n){var i=null;if(null!=n){var r=n;"optgroup"===r._tag&&(r=r._hostParent),null!=r&&"select"===r._tag&&(i=a.getSelectValueContext(r))}var o,s=null;if(null!=i)if(o=null!=e.value?e.value+"":l(e.children),s=!1,Array.isArray(i)){for(var u=0;u<i.length;u++)if(""+i[u]===o){s=!0;break}}else s=""+i===o;t._wrapperState={selected:s}},postMountWrapper:function(t){var e=t._currentElement.props;null!=e.value&&o.getNodeFromInstance(t).setAttribute("value",e.value)},getHostProps:function(t,e){var n=i({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var r=l(e.children);return r&&(n.children=r),n}};t.exports=u},2444:(t,e,n)=>{"use strict";var i=n(7418),r=n(1790),o=n(3240),a=n(3990),s=n(8638),l=(n(3620),!1);function u(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=o.getValue(t);null!=e&&c(this,Boolean(t.multiple),e)}}function c(t,e,n){var i,r,o=a.getNodeFromInstance(t).options;if(e){for(i={},r=0;r<n.length;r++)i[""+n[r]]=!0;for(r=0;r<o.length;r++){var s=i.hasOwnProperty(o[r].value);o[r].selected!==s&&(o[r].selected=s)}}else{for(i=""+n,r=0;r<o.length;r++)if(o[r].value===i)return void(o[r].selected=!0);o.length&&(o[0].selected=!0)}}var h={getHostProps:function(t,e){return i({},r.getHostProps(t,e),{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=o.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:d.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||l||(l=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var i=o.getValue(e);null!=i?(t._wrapperState.pendingUpdate=!1,c(t,Boolean(e.multiple),i)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?c(t,Boolean(e.multiple),e.defaultValue):c(t,Boolean(e.multiple),e.multiple?[]:""))}};function d(t){var e=this._currentElement.props,n=o.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),s.asap(u,this),n}t.exports=h},3016:(t,e,n)=>{"use strict";var i=n(6508),r=n(2271),o=n(2706);function a(t,e,n,i){return t===n&&e===i}var s=i.canUseDOM&&"selection"in document&&!("getSelection"in window),l={getOffsets:s?function(t){var e=document.selection.createRange(),n=e.text.length,i=e.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",e);var r=i.text.length;return{start:r,end:r+n}}:function(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,r=e.focusNode,o=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(t){return null}var l=a(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)?0:s.toString().length,u=s.cloneRange();u.selectNodeContents(t),u.setEnd(s.startContainer,s.startOffset);var c=a(u.startContainer,u.startOffset,u.endContainer,u.endOffset)?0:u.toString().length,h=c+l,d=document.createRange();d.setStart(n,i),d.setEnd(r,o);var f=d.collapsed;return{start:f?h:c,end:f?c:h}},setOffsets:s?function(t,e){var n,i,r=document.selection.createRange().duplicate();void 0===e.end?i=n=e.start:e.start>e.end?(n=e.end,i=e.start):(n=e.start,i=e.end),r.moveToElementText(t),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}:function(t,e){if(window.getSelection){var n=window.getSelection(),i=t[o()].length,a=Math.min(e.start,i),s=void 0===e.end?a:Math.min(e.end,i);if(!n.extend&&a>s){var l=s;s=a,a=l}var u=r(t,a),c=r(t,s);if(u&&c){var h=document.createRange();h.setStart(u.node,u.offset),n.removeAllRanges(),a>s?(n.addRange(h),n.extend(c.node,c.offset)):(h.setEnd(c.node,c.offset),n.addRange(h))}}}};t.exports=l},6257:(t,e,n)=>{"use strict";var i=n(3583),r=n(1865),o=n(7268);i.inject();var a={renderToString:r.renderToString,renderToStaticMarkup:r.renderToStaticMarkup,version:o};t.exports=a},7461:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(5392),a=n(1051),s=n(3990),l=n(6570),u=(n(3759),n(6577),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});r(u.prototype,{mountComponent:function(t,e,n,i){var r=n._idCounter++,o=" react-text: "+r+" ";if(this._domID=r,this._hostParent=e,t.useCreateElement){var u=n._ownerDocument,c=u.createComment(o),h=u.createComment(" /react-text "),d=a(u.createDocumentFragment());return a.queueChild(d,a(c)),this._stringText&&a.queueChild(d,a(u.createTextNode(this._stringText))),a.queueChild(d,a(h)),s.precacheNode(this,c),this._closingComment=h,d}var f=l(this._stringText);return t.renderToStaticMarkup?f:"\x3c!--"+o+"--\x3e"+f+"\x3c!-- /react-text --\x3e"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var i=this.getHostNode();o.replaceDelimitedText(i[0],i[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this).nextSibling;;){if(null==e&&i("67",this._domID),8===e.nodeType&&" /react-text "===e.nodeValue){this._closingComment=e;break}e=e.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=u},1388:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(1790),a=n(3240),s=n(3990),l=n(8638);function u(){this._rootNodeID&&c.updateWrapper(this)}n(3759),n(3620);var c={getHostProps:function(t,e){return null!=e.dangerouslySetInnerHTML&&i("91"),r({},o.getHostProps(t,e),{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange})},mountWrapper:function(t,e){var n=a.getValue(e),r=n;if(null==n){var o=e.defaultValue,s=e.children;null!=s&&(null!=o&&i("92"),Array.isArray(s)&&(s.length<=1||i("93"),s=s[0]),o=""+s),null==o&&(o=""),r=o}t._wrapperState={initialValue:""+r,listeners:null,onChange:h.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=s.getNodeFromInstance(t),i=a.getValue(e);if(null!=i){var r=""+i;r!==n.value&&(n.value=r),null==e.defaultValue&&(n.defaultValue=r)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=s.getNodeFromInstance(t);e.value=e.textContent}};function h(t){var e=this._currentElement.props,n=a.executeOnChange(e,t);return l.asap(u,this),n}t.exports=c},8566:(t,e,n)=>{"use strict";var i=n(2317);function r(t,e){"_hostNode"in t||i("33"),"_hostNode"in e||i("33");for(var n=0,r=t;r;r=r._hostParent)n++;for(var o=0,a=e;a;a=a._hostParent)o++;for(;n-o>0;)t=t._hostParent,n--;for(;o-n>0;)e=e._hostParent,o--;for(var s=n;s--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}n(3759),t.exports={isAncestor:function(t,e){"_hostNode"in t||i("35"),"_hostNode"in e||i("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1},getLowestCommonAncestor:r,getParentInstance:function(t){return"_hostNode"in t||i("36"),t._hostParent},traverseTwoPhase:function(t,e,n){for(var i,r=[];t;)r.push(t),t=t._hostParent;for(i=r.length;i-- >0;)e(r[i],!1,n);for(i=0;i<r.length;i++)e(r[i],!0,n)},traverseEnterLeave:function(t,e,n,i,o){for(var a=t&&e?r(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var l,u=[];e&&e!==a;)u.push(e),e=e._hostParent;for(l=0;l<s.length;l++)n(s[l],!0,i);for(l=u.length;l-- >0;)n(u[l],!1,o)}}},4377:(t,e,n)=>{"use strict";var i=n(7418),r=n(8638),o=n(5316),a=n(139),s={initialize:a,close:function(){h.isBatchingUpdates=!1}},l=[{initialize:a,close:r.flushBatchedUpdates.bind(r)},s];function u(){this.reinitializeTransaction()}i(u.prototype,o.Mixin,{getTransactionWrappers:function(){return l}});var c=new u,h={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,i,r,o){var a=h.isBatchingUpdates;h.isBatchingUpdates=!0,a?t(e,n,i,r,o):c.perform(t,null,e,n,i,r,o)}};t.exports=h},3583:(t,e,n)=>{"use strict";var i=n(2289),r=n(2029),o=n(8084),a=n(5267),s=n(8926),l=n(6299),u=n(3647),c=n(3990),h=n(778),d=n(8566),f=n(7461),p=n(4377),m=n(8017),_=n(6848),g=n(2944),y=n(6942),v=n(4049),x=n(2644),b=!1;t.exports={inject:function(){b||(b=!0,_.EventEmitter.injectReactEventListener(m),_.EventPluginHub.injectEventPluginOrder(o),_.EventPluginUtils.injectComponentTree(c),_.EventPluginUtils.injectTreeTraversal(d),_.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:x,EnterLeaveEventPlugin:a,ChangeEventPlugin:r,SelectEventPlugin:v,BeforeInputEventPlugin:i}),_.HostComponent.injectGenericComponentClass(u),_.HostComponent.injectTextComponentClass(f),_.DOMProperty.injectDOMPropertyConfig(s),_.DOMProperty.injectDOMPropertyConfig(y),_.EmptyComponent.injectEmptyComponentFactory((function(t){return new h(t)})),_.Updates.injectReconcileTransaction(g),_.Updates.injectBatchingStrategy(p),_.Component.injectEnvironment(l))}}},1506:(t,e,n)=>{"use strict";var i=n(7418),r=n(4066),o=(n(3620),n(3545),Object.prototype.hasOwnProperty),a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,s={key:!0,ref:!0,__self:!0,__source:!0};function l(t){return void 0!==t.ref}function u(t){return void 0!==t.key}var c=function(t,e,n,i,r,o,s){return{$$typeof:a,type:t,key:e,ref:n,props:s,_owner:o}};c.createElement=function(t,e,n){var i,a={},h=null,d=null;if(null!=e)for(i in l(e)&&(d=e.ref),u(e)&&(h=""+e.key),void 0===e.__self||e.__self,void 0===e.__source||e.__source,e)o.call(e,i)&&!s.hasOwnProperty(i)&&(a[i]=e[i]);var f=arguments.length-2;if(1===f)a.children=n;else if(f>1){for(var p=Array(f),m=0;m<f;m++)p[m]=arguments[m+2];a.children=p}if(t&&t.defaultProps){var _=t.defaultProps;for(i in _)void 0===a[i]&&(a[i]=_[i])}return c(t,h,d,0,0,r.current,a)},c.createFactory=function(t){var e=c.createElement.bind(null,t);return e.type=t,e},c.cloneAndReplaceKey=function(t,e){return c(t.type,e,t.ref,t._self,t._source,t._owner,t.props)},c.cloneElement=function(t,e,n){var a,h,d=i({},t.props),f=t.key,p=t.ref,m=(t._self,t._source,t._owner);if(null!=e)for(a in l(e)&&(p=e.ref,m=r.current),u(e)&&(f=""+e.key),t.type&&t.type.defaultProps&&(h=t.type.defaultProps),e)o.call(e,a)&&!s.hasOwnProperty(a)&&(void 0===e[a]&&void 0!==h?d[a]=h[a]:d[a]=e[a]);var _=arguments.length-2;if(1===_)d.children=n;else if(_>1){for(var g=Array(_),y=0;y<_;y++)g[y]=arguments[y+2];d.children=g}return c(t.type,f,p,0,0,m,d)},c.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===a},c.REACT_ELEMENT_TYPE=a,t.exports=c},1491:t=>{"use strict";var e,n={injectEmptyComponentFactory:function(t){e=t}},i={create:function(t){return e(t)}};i.injection=n,t.exports=i},5429:t=>{"use strict";var e=null;function n(t,n,i,r){try{return n(i,r)}catch(t){return void(null===e&&(e=t))}}var i={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(e){var t=e;throw e=null,t}}};t.exports=i},2666:(t,e,n)=>{"use strict";var i=n(7538),r={handleTopLevel:function(t,e,n,r){var o;o=i.extractEvents(t,e,n,r),i.enqueueEvents(o),i.processEventQueue(!1)}};t.exports=r},8017:(t,e,n)=>{"use strict";var i=n(7418),r=n(8628),o=n(6508),a=n(3303),s=n(3990),l=n(8638),u=n(3749),c=n(787);function h(t){for(;t._hostParent;)t=t._hostParent;var e=s.getNodeFromInstance(t).parentNode;return s.getClosestInstanceFromNode(e)}function d(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function f(t){var e=u(t.nativeEvent),n=s.getClosestInstanceFromNode(e),i=n;do{t.ancestors.push(i),i=i&&h(i)}while(i);for(var r=0;r<t.ancestors.length;r++)n=t.ancestors[r],m._handleTopLevel(t.topLevelType,n,t.nativeEvent,u(t.nativeEvent))}function p(t){t(c(window))}i(d.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),a.addPoolingTo(d,a.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:o.canUseDOM?window:null,setHandleTopLevel:function(t){m._handleTopLevel=t},setEnabled:function(t){m._enabled=!!t},isEnabled:function(){return m._enabled},trapBubbledEvent:function(t,e,n){var i=n;return i?r.listen(i,e,m.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var i=n;return i?r.capture(i,e,m.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=p.bind(null,t);r.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(m._enabled){var n=d.getPooled(t,e);try{l.batchedUpdates(f,n)}finally{d.release(n)}}}};t.exports=m},4323:t=>{"use strict";t.exports={logTopLevelRenders:!1}},657:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=(n(3759),null),a={},s=null,l={createInternalComponent:function(t){return o||i("111",t.type),new o(t)},createInstanceForText:function(t){return new s(t)},isTextComponent:function(t){return t instanceof s},injection:{injectGenericComponentClass:function(t){o=t},injectTextComponentClass:function(t){s=t},injectComponentClasses:function(t){r(a,t)}}};t.exports=l},6848:(t,e,n)=>{"use strict";var i=n(6937),r=n(7538),o=n(3904),a=n(5782),s=n(8540),l=n(1491),u=n(2134),c=n(657),h=n(8638),d={Component:a.injection,Class:s.injection,DOMProperty:i.injection,EmptyComponent:l.injection,EventPluginHub:r.injection,EventPluginUtils:o.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:h.injection};t.exports=d},7927:(t,e,n)=>{"use strict";var i=n(3016),r=n(7476),o=n(8387),a=n(1003),s={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=a();return{focusedElem:t,selectionRange:s.hasSelectionCapabilities(t)?s.getSelection(t):null}},restoreSelection:function(t){var e,n=a(),i=t.focusedElem,l=t.selectionRange;n!==i&&(e=i,r(document.documentElement,e))&&(s.hasSelectionCapabilities(i)&&s.setSelection(i,l),o(i))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if(void 0===r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};t.exports=s},2715:t=>{"use strict";t.exports={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}}},8744:t=>{"use strict";t.exports={debugTool:null}},9683:(t,e,n)=>{"use strict";var i=n(6319),r=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=i(t);return o.test(t)?t:t.replace(r," "+a.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(a.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),i(t)===n}};t.exports=a},728:(t,e,n)=>{"use strict";var i=n(2317),r=n(1051),o=n(6937),a=n(2134),s=(n(4066),n(3990)),l=n(2799),u=n(3152),c=n(1506),h=n(4323),d=n(2715),f=(n(8744),n(9683)),p=n(974),m=n(1699),_=n(8638),g=n(3677),y=n(4301),v=(n(3759),n(2100)),x=n(588),b=(n(3620),o.ID_ATTRIBUTE_NAME),w=o.ROOT_ATTRIBUTE_NAME,M={};function T(t){return t?9===t.nodeType?t.documentElement:t.firstChild:null}function k(t,e,n,i,r){var o;if(h.logTopLevelRenders){var a=t._currentElement.props.type;o="React mount: "+("string"==typeof a?a:a.displayName||a.name),console.time(o)}var s=p.mountComponent(t,n,null,l(t,e),r,0);o&&console.timeEnd(o),t._renderedComponent._topLevelWrapper=t,I._mountImageIntoNode(s,e,t,i,n)}function S(t,e,n,i){var r=_.ReactReconcileTransaction.getPooled(!n&&u.useCreateElement);r.perform(k,null,t,e,r,n,i),_.ReactReconcileTransaction.release(r)}function E(t,e,n){for(p.unmountComponent(t,n),9===e.nodeType&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function C(t){var e=T(t);if(e){var n=s.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function L(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function D(t){var e=function(t){var e=T(t),n=e&&s.getInstanceFromNode(e);return n&&!n._hostParent?n:null}(t);return e?e._hostContainerInfo._topLevelWrapper:null}var A=1,P=function(){this.rootID=A++};P.prototype.isReactComponent={},P.prototype.render=function(){return this.props};var I={TopLevelWrapper:P,_instancesByReactRootID:M,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,i,r){return I.scrollMonitor(i,(function(){m.enqueueElementInternal(t,e,n),r&&m.enqueueCallbackInternal(t,r)})),t},_renderNewRootComponent:function(t,e,n,r){L(e)||i("37"),a.ensureScrollValueMonitoring();var o=y(t,!1);_.batchedUpdates(S,o,e,n,r);var s=o._instance.rootID;return M[s]=o,o},renderSubtreeIntoContainer:function(t,e,n,r){return null!=t&&d.has(t)||i("38"),I._renderSubtreeIntoContainer(t,e,n,r)},_renderSubtreeIntoContainer:function(t,e,n,r){m.validateCallback(r,"ReactDOM.render"),c.isValidElement(e)||i("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var o,a=c(P,null,null,null,null,null,e);if(t){var s=d.get(t);o=s._processChildContext(s._context)}else o=g;var l=D(n);if(l){var u=l._currentElement.props;if(x(u,e)){var h=l._renderedComponent.getPublicInstance(),f=r&&function(){r.call(h)};return I._updateRootComponent(l,a,o,n,f),h}I.unmountComponentAtNode(n)}var p,_=T(n),y=_&&!(!(p=_).getAttribute||!p.getAttribute(b)),v=C(n),w=y&&!l&&!v,M=I._renderNewRootComponent(a,n,w,o)._renderedComponent.getPublicInstance();return r&&r.call(M),M},render:function(t,e,n){return I._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){L(t)||i("40");var e=D(t);return e?(delete M[e._instance.rootID],_.batchedUpdates(E,e,t,!1),!0):(C(t),1===t.nodeType&&t.hasAttribute(w),!1)},_mountImageIntoNode:function(t,e,n,o,a){if(L(e)||i("41"),o){var l=T(e);if(f.canReuseMarkup(t,l))return void s.precacheNode(n,l);var u=l.getAttribute(f.CHECKSUM_ATTR_NAME);l.removeAttribute(f.CHECKSUM_ATTR_NAME);var c=l.outerHTML;l.setAttribute(f.CHECKSUM_ATTR_NAME,u);var h=t,d=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++)if(t.charAt(i)!==e.charAt(i))return i;return t.length===e.length?-1:n}(h,c),p=" (client) "+h.substring(d-20,d+20)+"\n (server) "+c.substring(d-20,d+20);9===e.nodeType&&i("42",p)}if(9===e.nodeType&&i("43"),a.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);r.insertTreeBefore(e,t,null)}else v(e,t),s.precacheNode(n,e.firstChild)}};t.exports=I},4393:(t,e,n)=>{"use strict";var i=n(2317),r=n(5782),o=(n(2715),n(8744),n(1873)),a=(n(4066),n(974)),s=n(5169),l=(n(139),n(5489));function u(t,e){return e&&(t=t||[]).push(e),t}function c(t,e){r.processChildrenUpdates(t,e)}n(3759);var h={Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return s.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,i,r,o){var a;return a=l(e,0),s.updateChildren(t,a,n,i,r,this,this._hostContainerInfo,o,0),a},mountChildren:function(t,e,n){var i=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=i;var r=[],o=0;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s],u=a.mountComponent(l,e,this,this._hostContainerInfo,n,0);l._mountIndex=o++,r.push(u)}return r},updateTextContent:function(t){var e,n=this._renderedChildren;for(var r in s.unmountChildren(n,!1),n)n.hasOwnProperty(r)&&i("118");c(this,[(e=t,{type:o.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null})])},updateMarkup:function(t){var e,n=this._renderedChildren;for(var r in s.unmountChildren(n,!1),n)n.hasOwnProperty(r)&&i("118");c(this,[(e=t,{type:o.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null})])},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var i=this._renderedChildren,r={},o=[],s=this._reconcilerUpdateChildren(i,t,o,r,e,n);if(s||i){var l,h=null,d=0,f=0,p=0,m=null;for(l in s)if(s.hasOwnProperty(l)){var _=i&&i[l],g=s[l];_===g?(h=u(h,this.moveChild(_,m,d,f)),f=Math.max(_._mountIndex,f),_._mountIndex=d):(_&&(f=Math.max(_._mountIndex,f)),h=u(h,this._mountChildAtIndex(g,o[p],m,d,e,n)),p++),d++,m=a.getHostNode(g)}for(l in r)r.hasOwnProperty(l)&&(h=u(h,this._unmountChild(i[l],r[l])));h&&c(this,h),this._renderedChildren=s}},unmountChildren:function(t){var e=this._renderedChildren;s.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,i){if(t._mountIndex<i)return function(t,e,n){return{type:o.MOVE_EXISTING,content:null,fromIndex:t._mountIndex,fromNode:a.getHostNode(t),toIndex:n,afterNode:e}}(t,e,n)},createChild:function(t,e,n){return function(t,e,n){return{type:o.INSERT_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}(n,e,t._mountIndex)},removeChild:function(t,e){return function(t,e){return{type:o.REMOVE_NODE,content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}(t,e)},_mountChildAtIndex:function(t,e,n,i,r,o){return t._mountIndex=i,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}};t.exports=h},1873:(t,e,n)=>{"use strict";var i=n(8918)({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=i},7807:(t,e,n)=>{"use strict";var i=n(2317),r=n(1506),o=(n(3759),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||!1===t?o.EMPTY:r.isValidElement(t)?"function"==typeof t.type?o.COMPOSITE:o.HOST:void i("26",t)}});t.exports=o},3662:(t,e,n)=>{"use strict";n(3620);t.exports={isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){},enqueueReplaceState:function(t,e){},enqueueSetState:function(t,e){}}},2663:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),{isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){r.isValidOwner(n)||i("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){r.isValidOwner(n)||i("120");var o=n.getPublicInstance();o&&o.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=r},727:t=>{"use strict";t.exports={}},9321:(t,e,n)=>{"use strict";var i=n(8918)({prop:null,context:null,childContext:null});t.exports=i},5339:(t,e,n)=>{"use strict";var i=n(1506),r=n(727),o=n(1399),a=n(139),s=n(2183),l=(n(3620),"<<anonymous>>"),u={array:d("array"),bool:d("boolean"),func:d("function"),number:d("number"),object:d("object"),string:d("string"),symbol:d("symbol"),any:h(a.thatReturns(null)),arrayOf:function(t){return h((function(e,n,i,a,s){if("function"!=typeof t)return new c("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var l=e[n];if(!Array.isArray(l))return new c("Invalid "+r[a]+" `"+s+"` of type `"+p(l)+"` supplied to `"+i+"`, expected an array.");for(var u=0;u<l.length;u++){var h=t(l,u,i,a,s+"["+u+"]",o);if(h instanceof Error)return h}return null}))},element:h((function(t,e,n,o,a){var s=t[e];return i.isValidElement(s)?null:new c("Invalid "+r[o]+" `"+a+"` of type `"+p(s)+"` supplied to `"+n+"`, expected a single ReactElement.")})),instanceOf:function(t){return h((function(e,n,i,o,a){if(!(e[n]instanceof t)){var s=r[o],u=t.name||l;return new c("Invalid "+s+" `"+a+"` of type `"+((h=e[n]).constructor&&h.constructor.name?h.constructor.name:l)+"` supplied to `"+i+"`, expected instance of `"+u+"`.")}var h;return null}))},node:h((function(t,e,n,i,o){return f(t[e])?null:new c("Invalid "+r[i]+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(t){return h((function(e,n,i,a,s){if("function"!=typeof t)return new c("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var l=e[n],u=p(l);if("object"!==u)return new c("Invalid "+r[a]+" `"+s+"` of type `"+u+"` supplied to `"+i+"`, expected an object.");for(var h in l)if(l.hasOwnProperty(h)){var d=t(l,h,i,a,s+"."+h,o);if(d instanceof Error)return d}return null}))},oneOf:function(t){return Array.isArray(t)?h((function(e,n,i,o,a){for(var s=e[n],l=0;l<t.length;l++)if(u=s,h=t[l],u===h?0!==u||1/u==1/h:u!=u&&h!=h)return null;var u,h;return new c("Invalid "+r[o]+" `"+a+"` of value `"+s+"` supplied to `"+i+"`, expected one of "+JSON.stringify(t)+".")})):a.thatReturnsNull},oneOfType:function(t){return Array.isArray(t)?h((function(e,n,i,a,s){for(var l=0;l<t.length;l++)if(null==(0,t[l])(e,n,i,a,s,o))return null;return new c("Invalid "+r[a]+" `"+s+"` supplied to `"+i+"`.")})):a.thatReturnsNull},shape:function(t){return h((function(e,n,i,a,s){var l=e[n],u=p(l);if("object"!==u)return new c("Invalid "+r[a]+" `"+s+"` of type `"+u+"` supplied to `"+i+"`, expected `object`.");for(var h in t){var d=t[h];if(d){var f=d(l,h,i,a,s+"."+h,o);if(f)return f}}return null}))}};function c(t){this.message=t,this.stack=""}function h(t){function e(e,n,i,o,a,s,u){if(o=o||l,s=s||i,null==n[i]){var h=r[a];return e?new c("Required "+h+" `"+s+"` was not specified in `"+o+"`."):null}return t(n,i,o,a,s)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function d(t){return h((function(e,n,i,o,a,s){var l=e[n];return p(l)!==t?new c("Invalid "+r[o]+" `"+a+"` of type `"+function(t){var e=p(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}(l)+"` supplied to `"+i+"`, expected `"+t+"`."):null}))}function f(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(f);if(null===t||i.isValidElement(t))return!0;var e=s(t);if(!e)return!1;var n,r=e.call(t);if(e!==t.entries){for(;!(n=r.next()).done;)if(!f(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!f(o[1]))return!1}return!0;default:return!1}}function p(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||"Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol}(e,t)?"symbol":e}c.prototype=Error.prototype,t.exports=u},1399:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9637:(t,e,n)=>{"use strict";var i=n(7418),r=n(6047),o=n(3662),a=n(3677);function s(t,e,n){this.props=t,this.context=e,this.refs=a,this.updater=n||o}function l(){}l.prototype=r.prototype,s.prototype=new l,s.prototype.constructor=s,i(s.prototype,r.prototype),s.prototype.isPureReactComponent=!0,t.exports=s},2944:(t,e,n)=>{"use strict";var i=n(7418),r=n(955),o=n(3303),a=n(2134),s=n(7927),l=(n(8744),n(5316)),u=n(1699),c=[{initialize:s.getSelectionInformation,close:s.restoreSelection},{initialize:function(){var t=a.isEnabled();return a.setEnabled(!1),t},close:function(t){a.setEnabled(t)}},{initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}}];function h(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.useCreateElement=t}var d={getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return u},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null}};i(h.prototype,l.Mixin,d),o.addPoolingTo(h),t.exports=h},974:(t,e,n)=>{"use strict";var i=n(6233);function r(){i.attachRefs(this,this._currentElement)}n(8744),n(3620);var o={mountComponent:function(t,e,n,i,o,a){var s=t.mountComponent(e,n,i,o,a);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(r,t),s},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){i.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,o){var a=t._currentElement;if(e!==a||o!==t._context){var s=i.shouldUpdateRefs(a,e);s&&i.detachRefs(t,a),t.receiveComponent(e,n,o),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e,n){t._updateBatchNumber===n&&t.performUpdateIfNecessary(e)}};t.exports=o},6233:(t,e,n)=>{"use strict";var i=n(2663),r={attachRefs:function(t,e){if(null!==e&&!1!==e){var n=e.ref;null!=n&&function(t,e,n){"function"==typeof t?t(e.getPublicInstance()):i.addComponentAsRefTo(e,t,n)}(n,t,e._owner)}},shouldUpdateRefs:function(t,e){return null===t||!1===t||null===e||!1===e||e.ref!==t.ref||"string"==typeof e.ref&&e._owner!==t._owner},detachRefs:function(t,e){if(null!==e&&!1!==e){var n=e.ref;null!=n&&function(t,e,n){"function"==typeof t?t(null):i.removeComponentAsRefFrom(e,t,n)}(n,t,e._owner)}}};t.exports=r},6672:t=>{"use strict";t.exports={isBatchingUpdates:!1,batchedUpdates:function(t){}}},1865:(t,e,n)=>{"use strict";var i=n(2317),r=n(2799),o=n(4377),a=n(1506),s=(n(8744),n(9683)),l=n(974),u=n(6672),c=n(1853),h=n(8638),d=n(3677),f=n(4301),p=(n(3759),0);function m(t,e){var n;try{return h.injection.injectBatchingStrategy(u),n=c.getPooled(e),p++,n.perform((function(){var i=f(t,!0),o=l.mountComponent(i,n,null,r(),d,0);return e||(o=s.addChecksumToMarkup(o)),o}),null)}finally{p--,c.release(n),p||h.injection.injectBatchingStrategy(o)}}t.exports={renderToString:function(t){return a.isValidElement(t)||i("46"),m(t,!1)},renderToStaticMarkup:function(t){return a.isValidElement(t)||i("47"),m(t,!0)}}},1853:(t,e,n)=>{"use strict";var i=n(7418),r=n(3303),o=n(5316),a=(n(8744),n(7236)),s=[],l={enqueue:function(){}};function u(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new a(this)}var c={getTransactionWrappers:function(){return s},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(u.prototype,o.Mixin,c),r.addPoolingTo(u),t.exports=u},7236:(t,e,n)=>{"use strict";var i=n(1699);n(5316),n(3620);var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&i.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()&&i.enqueueForceUpdate(t)},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()&&i.enqueueReplaceState(t,e)},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()&&i.enqueueSetState(t,e)},t}();t.exports=r},1699:(t,e,n)=>{"use strict";var i=n(2317),r=(n(4066),n(2715)),o=(n(8744),n(8638));function a(t){o.enqueueUpdate(t)}function s(t,e){return r.get(t)||null}n(3759),n(3620);var l={isMounted:function(t){var e=r.get(t);return!!e&&!!e._renderedComponent},enqueueCallback:function(t,e,n){l.validateCallback(e,n);var i=s(t);if(!i)return null;i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],a(i)},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],a(t)},enqueueForceUpdate:function(t){var e=s(t);e&&(e._pendingForceUpdate=!0,a(e))},enqueueReplaceState:function(t,e){var n=s(t);n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,a(n))},enqueueSetState:function(t,e){var n=s(t);n&&((n._pendingStateQueue||(n._pendingStateQueue=[])).push(e),a(n))},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,a(t)},validateCallback:function(t,e){t&&"function"!=typeof t&&i("122",e,function(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,i=Object.keys(t);return i.length>0&&i.length<20?n+" (keys: "+i.join(", ")+")":n}(t))}};t.exports=l},8638:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(955),a=n(3303),s=n(4323),l=n(974),u=n(5316),c=(n(3759),[]),h=0,d=o.getPooled(),f=!1,p=null;function m(){b.ReactReconcileTransaction&&p||i("123")}var _=[{initialize:function(){this.dirtyComponentsLength=c.length},close:function(){this.dirtyComponentsLength!==c.length?(c.splice(0,this.dirtyComponentsLength),x()):c.length=0}},{initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}}];function g(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=o.getPooled(),this.reconcileTransaction=b.ReactReconcileTransaction.getPooled(!0)}function y(t,e){return t._mountOrder-e._mountOrder}function v(t){var e=t.dirtyComponentsLength;e!==c.length&&i("124",e,c.length),c.sort(y),h++;for(var n=0;n<e;n++){var r,o=c[n],a=o._pendingCallbacks;if(o._pendingCallbacks=null,s.logTopLevelRenders){var u=o;o._currentElement.props===o._renderedComponent._currentElement&&(u=o._renderedComponent),r="React update: "+u.getName(),console.time(r)}if(l.performUpdateIfNecessary(o,t.reconcileTransaction,h),r&&console.timeEnd(r),a)for(var d=0;d<a.length;d++)t.callbackQueue.enqueue(a[d],o.getPublicInstance())}}r(g.prototype,u.Mixin,{getTransactionWrappers:function(){return _},destructor:function(){this.dirtyComponentsLength=null,o.release(this.callbackQueue),this.callbackQueue=null,b.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return u.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),a.addPoolingTo(g);var x=function(){for(;c.length||f;){if(c.length){var t=g.getPooled();t.perform(v,null,t),g.release(t)}if(f){f=!1;var e=d;d=o.getPooled(),e.notifyAll(),o.release(e)}}},b={ReactReconcileTransaction:null,batchedUpdates:function(t,e,n,i,r,o){m(),p.batchedUpdates(t,e,n,i,r,o)},enqueueUpdate:function t(e){m(),p.isBatchingUpdates?(c.push(e),null==e._updateBatchNumber&&(e._updateBatchNumber=h+1)):p.batchedUpdates(t,e)},flushBatchedUpdates:x,injection:{injectReconcileTransaction:function(t){t||i("126"),b.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t||i("127"),"function"!=typeof t.batchedUpdates&&i("128"),"boolean"!=typeof t.isBatchingUpdates&&i("129"),p=t}},asap:function(t,e){p.isBatchingUpdates||i("125"),d.enqueue(t,e),f=!0}};t.exports=b},7268:t=>{"use strict";t.exports="15.3.1"},6942:t=>{"use strict";var e="http://www.w3.org/1999/xlink",n="http://www.w3.org/XML/1998/namespace",i={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},r={Properties:{},DOMAttributeNamespaces:{xlinkActuate:e,xlinkArcrole:e,xlinkHref:e,xlinkRole:e,xlinkShow:e,xlinkTitle:e,xlinkType:e,xmlBase:n,xmlLang:n,xmlSpace:n},DOMAttributeNames:{}};Object.keys(i).forEach((function(t){r.Properties[t]=0,i[t]&&(r.DOMAttributeNames[t]=i[t])})),t.exports=r},4049:(t,e,n)=>{"use strict";var i=n(5338),r=n(7614),o=n(6508),a=n(3990),s=n(7927),l=n(674),u=n(1003),c=n(3980),h=n(5721),d=n(9303),f=i.topLevelTypes,p=o.canUseDOM&&"documentMode"in document&&document.documentMode<=11,m={select:{phasedRegistrationNames:{bubbled:h({onSelect:null}),captured:h({onSelectCapture:null})},dependencies:[f.topBlur,f.topContextMenu,f.topFocus,f.topKeyDown,f.topMouseDown,f.topMouseUp,f.topSelectionChange]}},_=null,g=null,y=null,v=!1,x=!1,b=h({onSelect:null});function w(t,e){if(v||null==_||_!==u())return null;var n=function(t){if("selectionStart"in t&&s.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}(_);if(!y||!d(y,n)){y=n;var i=l.getPooled(m.select,g,t,e);return i.type="select",i.target=_,r.accumulateTwoPhaseDispatches(i),i}return null}var M={eventTypes:m,extractEvents:function(t,e,n,i){if(!x)return null;var r=e?a.getNodeFromInstance(e):window;switch(t){case f.topFocus:(c(r)||"true"===r.contentEditable)&&(_=r,g=e,y=null);break;case f.topBlur:_=null,g=null,y=null;break;case f.topMouseDown:v=!0;break;case f.topContextMenu:case f.topMouseUp:return v=!1,w(n,i);case f.topSelectionChange:if(p)break;case f.topKeyDown:case f.topKeyUp:return w(n,i)}return null},didPutListener:function(t,e,n){e===b&&(x=!0)}};t.exports=M},2644:(t,e,n)=>{"use strict";var i=n(2317),r=n(5338),o=n(8628),a=n(7614),s=n(3990),l=n(1500),u=n(888),c=n(674),h=n(270),d=n(7873),f=n(3590),p=n(7980),m=n(4846),_=n(1693),g=n(6062),y=n(5181),v=n(139),x=n(8362),b=(n(3759),n(5721)),w=r.topLevelTypes,M={abort:{phasedRegistrationNames:{bubbled:b({onAbort:!0}),captured:b({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:b({onAnimationEnd:!0}),captured:b({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:b({onAnimationIteration:!0}),captured:b({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:b({onAnimationStart:!0}),captured:b({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:b({onBlur:!0}),captured:b({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:b({onCanPlay:!0}),captured:b({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:b({onCanPlayThrough:!0}),captured:b({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:b({onClick:!0}),captured:b({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:b({onContextMenu:!0}),captured:b({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:b({onCopy:!0}),captured:b({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:b({onCut:!0}),captured:b({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:b({onDoubleClick:!0}),captured:b({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:b({onDrag:!0}),captured:b({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:b({onDragEnd:!0}),captured:b({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:b({onDragEnter:!0}),captured:b({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:b({onDragExit:!0}),captured:b({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:b({onDragLeave:!0}),captured:b({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:b({onDragOver:!0}),captured:b({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:b({onDragStart:!0}),captured:b({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:b({onDrop:!0}),captured:b({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:b({onDurationChange:!0}),captured:b({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:b({onEmptied:!0}),captured:b({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:b({onEncrypted:!0}),captured:b({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:b({onEnded:!0}),captured:b({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:b({onError:!0}),captured:b({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:b({onFocus:!0}),captured:b({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:b({onInput:!0}),captured:b({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:b({onInvalid:!0}),captured:b({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:b({onKeyDown:!0}),captured:b({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:b({onKeyPress:!0}),captured:b({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:b({onKeyUp:!0}),captured:b({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:b({onLoad:!0}),captured:b({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:b({onLoadedData:!0}),captured:b({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:b({onLoadedMetadata:!0}),captured:b({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:b({onLoadStart:!0}),captured:b({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:b({onMouseDown:!0}),captured:b({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:b({onMouseMove:!0}),captured:b({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:b({onMouseOut:!0}),captured:b({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:b({onMouseOver:!0}),captured:b({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:b({onMouseUp:!0}),captured:b({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:b({onPaste:!0}),captured:b({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:b({onPause:!0}),captured:b({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:b({onPlay:!0}),captured:b({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:b({onPlaying:!0}),captured:b({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:b({onProgress:!0}),captured:b({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:b({onRateChange:!0}),captured:b({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:b({onReset:!0}),captured:b({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:b({onScroll:!0}),captured:b({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:b({onSeeked:!0}),captured:b({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:b({onSeeking:!0}),captured:b({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:b({onStalled:!0}),captured:b({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:b({onSubmit:!0}),captured:b({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:b({onSuspend:!0}),captured:b({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:b({onTimeUpdate:!0}),captured:b({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:b({onTouchCancel:!0}),captured:b({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:b({onTouchEnd:!0}),captured:b({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:b({onTouchMove:!0}),captured:b({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:b({onTouchStart:!0}),captured:b({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:b({onTransitionEnd:!0}),captured:b({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:b({onVolumeChange:!0}),captured:b({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:b({onWaiting:!0}),captured:b({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:b({onWheel:!0}),captured:b({onWheelCapture:!0})}}},T={topAbort:M.abort,topAnimationEnd:M.animationEnd,topAnimationIteration:M.animationIteration,topAnimationStart:M.animationStart,topBlur:M.blur,topCanPlay:M.canPlay,topCanPlayThrough:M.canPlayThrough,topClick:M.click,topContextMenu:M.contextMenu,topCopy:M.copy,topCut:M.cut,topDoubleClick:M.doubleClick,topDrag:M.drag,topDragEnd:M.dragEnd,topDragEnter:M.dragEnter,topDragExit:M.dragExit,topDragLeave:M.dragLeave,topDragOver:M.dragOver,topDragStart:M.dragStart,topDrop:M.drop,topDurationChange:M.durationChange,topEmptied:M.emptied,topEncrypted:M.encrypted,topEnded:M.ended,topError:M.error,topFocus:M.focus,topInput:M.input,topInvalid:M.invalid,topKeyDown:M.keyDown,topKeyPress:M.keyPress,topKeyUp:M.keyUp,topLoad:M.load,topLoadedData:M.loadedData,topLoadedMetadata:M.loadedMetadata,topLoadStart:M.loadStart,topMouseDown:M.mouseDown,topMouseMove:M.mouseMove,topMouseOut:M.mouseOut,topMouseOver:M.mouseOver,topMouseUp:M.mouseUp,topPaste:M.paste,topPause:M.pause,topPlay:M.play,topPlaying:M.playing,topProgress:M.progress,topRateChange:M.rateChange,topReset:M.reset,topScroll:M.scroll,topSeeked:M.seeked,topSeeking:M.seeking,topStalled:M.stalled,topSubmit:M.submit,topSuspend:M.suspend,topTimeUpdate:M.timeUpdate,topTouchCancel:M.touchCancel,topTouchEnd:M.touchEnd,topTouchMove:M.touchMove,topTouchStart:M.touchStart,topTransitionEnd:M.transitionEnd,topVolumeChange:M.volumeChange,topWaiting:M.waiting,topWheel:M.wheel};for(var k in T)T[k].dependencies=[k];var S=b({onClick:null}),E={};function C(t){return"."+t._rootNodeID}var L={eventTypes:M,extractEvents:function(t,e,n,r){var o,s=T[t];if(!s)return null;switch(t){case w.topAbort:case w.topCanPlay:case w.topCanPlayThrough:case w.topDurationChange:case w.topEmptied:case w.topEncrypted:case w.topEnded:case w.topError:case w.topInput:case w.topInvalid:case w.topLoad:case w.topLoadedData:case w.topLoadedMetadata:case w.topLoadStart:case w.topPause:case w.topPlay:case w.topPlaying:case w.topProgress:case w.topRateChange:case w.topReset:case w.topSeeked:case w.topSeeking:case w.topStalled:case w.topSubmit:case w.topSuspend:case w.topTimeUpdate:case w.topVolumeChange:case w.topWaiting:o=c;break;case w.topKeyPress:if(0===x(n))return null;case w.topKeyDown:case w.topKeyUp:o=d;break;case w.topBlur:case w.topFocus:o=h;break;case w.topClick:if(2===n.button)return null;case w.topContextMenu:case w.topDoubleClick:case w.topMouseDown:case w.topMouseMove:case w.topMouseOut:case w.topMouseOver:case w.topMouseUp:o=f;break;case w.topDrag:case w.topDragEnd:case w.topDragEnter:case w.topDragExit:case w.topDragLeave:case w.topDragOver:case w.topDragStart:case w.topDrop:o=p;break;case w.topTouchCancel:case w.topTouchEnd:case w.topTouchMove:case w.topTouchStart:o=m;break;case w.topAnimationEnd:case w.topAnimationIteration:case w.topAnimationStart:o=l;break;case w.topTransitionEnd:o=_;break;case w.topScroll:o=g;break;case w.topWheel:o=y;break;case w.topCopy:case w.topCut:case w.topPaste:o=u}o||i("86",t);var v=o.getPooled(s,e,n,r);return a.accumulateTwoPhaseDispatches(v),v},didPutListener:function(t,e,n){if(e===S){var i=C(t),r=s.getNodeFromInstance(t);E[i]||(E[i]=o.listen(r,"click",v))}},willDeleteListener:function(t,e){if(e===S){var n=C(t);E[n].remove(),delete E[n]}}};t.exports=L},1500:(t,e,n)=>{"use strict";var i=n(674);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{animationName:null,elapsedTime:null,pseudoElement:null}),t.exports=r},888:(t,e,n)=>{"use strict";var i=n(674),r={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};function o(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(o,r),t.exports=o},4900:(t,e,n)=>{"use strict";var i=n(674);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{data:null}),t.exports=r},7980:(t,e,n)=>{"use strict";var i=n(3590);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{dataTransfer:null}),t.exports=r},674:(t,e,n)=>{"use strict";var i=n(7418),r=n(3303),o=n(139),a=(n(3620),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),s={type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function l(t,e,n,i){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var r=this.constructor.Interface;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];s?this[a]=s(n):"target"===a?this.target=i:this[a]=n[a]}var l=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=l?o.thatReturnsTrue:o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse,this}i(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<a.length;n++)this[a[n]]=null}}),l.Interface=s,l.augmentClass=function(t,e){var n=this,o=function(){};o.prototype=n.prototype;var a=new o;i(a,t.prototype),t.prototype=a,t.prototype.constructor=t,t.Interface=i({},n.Interface,e),t.augmentClass=n.augmentClass,r.addPoolingTo(t,r.fourArgumentPooler)},r.addPoolingTo(l,r.fourArgumentPooler),t.exports=l},270:(t,e,n)=>{"use strict";var i=n(6062);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{relatedTarget:null}),t.exports=r},6259:(t,e,n)=>{"use strict";var i=n(674);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{data:null}),t.exports=r},7873:(t,e,n)=>{"use strict";var i=n(6062),r=n(8362),o={key:n(2726),location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:n(9827),charCode:function(t){return"keypress"===t.type?r(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?r(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};function a(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(a,o),t.exports=a},3590:(t,e,n)=>{"use strict";var i=n(6062),r=n(7987),o={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:n(9827),button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+r.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+r.currentScrollTop}};function a(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(a,o),t.exports=a},4846:(t,e,n)=>{"use strict";var i=n(6062),r={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:n(9827)};function o(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(o,r),t.exports=o},1693:(t,e,n)=>{"use strict";var i=n(674);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{propertyName:null,elapsedTime:null,pseudoElement:null}),t.exports=r},6062:(t,e,n)=>{"use strict";var i=n(674),r=n(3749),o={view:function(t){if(t.view)return t.view;var e=r(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};function a(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(a,o),t.exports=a},5181:(t,e,n)=>{"use strict";var i=n(3590);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),t.exports=r},5316:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),{Mixin:{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,r,o,a,s,l){var u,c;this.isInTransaction()&&i("27");try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=t.call(e,n,r,o,a,s,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(t){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var i=e[n];try{this.wrapperInitData[n]=r.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(t){}}}},closeAll:function(t){this.isInTransaction()||i("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o,a=e[n],s=this.wrapperInitData[n];try{o=!0,s!==r.OBSERVED_ERROR&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(t){}}}this.wrapperInitData.length=0}},OBSERVED_ERROR:{}});t.exports=r},7987:t=>{"use strict";var e={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){e.currentScrollLeft=t.x,e.currentScrollTop=t.y}};t.exports=e},1317:(t,e,n)=>{"use strict";var i=n(2317);n(3759),t.exports=function(t,e){return null==e&&i("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}},6319:t=>{"use strict";var e=65521;t.exports=function(t){for(var n=1,i=0,r=0,o=t.length,a=-4&o;r<a;){for(var s=Math.min(r+4096,a);r<s;r+=4)i+=(n+=t.charCodeAt(r))+(n+=t.charCodeAt(r+1))+(n+=t.charCodeAt(r+2))+(n+=t.charCodeAt(r+3));n%=e,i%=e}for(;r<o;r++)i+=n+=t.charCodeAt(r);return(n%=e)|(i%=e)<<16}},3545:t=>{"use strict";t.exports=!1},5118:(t,e,n)=>{"use strict";var i=n(2317),r=n(727),o=n(1399);n(3759),n(3620),"undefined"!=typeof process&&process.env;var a={};t.exports=function(t,e,n,s,l,u){for(var c in t)if(t.hasOwnProperty(c)){var h;try{"function"!=typeof t[c]&&i("84",s||"React class",r[n],c),h=t[c](e,c,s,n,null,o)}catch(t){h=t}h instanceof Error&&!(h.message in a)&&(a[h.message]=!0)}}},398:t=>{"use strict";t.exports=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction((function(){return t(e,n,i,r)}))}:t}},571:(t,e,n)=>{"use strict";var i=n(5373),r=(n(3620),i.isUnitlessNumber);t.exports=function(t,e,n){return null==e||"boolean"==typeof e||""===e?"":isNaN(e)||0===e||r.hasOwnProperty(t)&&r[t]?""+e:("string"==typeof e&&(e=e.trim()),e+"px")}},6570:t=>{"use strict";var e=/["'&<>]/;t.exports=function(t){return"boolean"==typeof t||"number"==typeof t?""+t:function(t){var n,i=""+t,r=e.exec(i);if(!r)return i;var o="",a=0,s=0;for(a=r.index;a<i.length;a++){switch(i.charCodeAt(a)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}s!==a&&(o+=i.substring(s,a)),s=a+1,o+=n}return s!==a?o+i.substring(s,a):o}(t)}},2116:(t,e,n)=>{"use strict";var i=n(2317),r=(n(4066),n(3990)),o=n(2715),a=n(3333);n(3759),n(3620),t.exports=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=o.get(t);if(e)return(e=a(e))?r.getNodeFromInstance(e):null;"function"==typeof t.render?i("44"):i("45",Object.keys(t))}},5489:(t,e,n)=>{"use strict";n(6037);var i=n(9898);function r(t,e,n,i){if(t&&"object"==typeof t){var r=t;void 0===r[n]&&null!=e&&(r[n]=e)}}n(3620),"undefined"!=typeof process&&process.env,t.exports=function(t,e){if(null==t)return t;var n={};return i(t,r,n),n}},6810:t=>{"use strict";t.exports=function(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}},8362:t=>{"use strict";t.exports=function(t){var e,n=t.keyCode;return"charCode"in t?0===(e=t.charCode)&&13===n&&(e=13):e=n,e>=32||13===e?e:0}},2726:(t,e,n)=>{"use strict";var i=n(8362),r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=function(t){if(t.key){var e=r[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?o[t.keyCode]||"Unidentified":""}},9827:t=>{"use strict";var e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n(t){var n=this.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var i=e[t];return!!i&&!!n[i]}t.exports=function(t){return n}},3749:t=>{"use strict";t.exports=function(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}},3333:(t,e,n)=>{"use strict";var i=n(7807);t.exports=function(t){for(var e;(e=t._renderedNodeType)===i.COMPOSITE;)t=t._renderedComponent;return e===i.HOST?t._renderedComponent:e===i.EMPTY?null:void 0}},2183:t=>{"use strict";var e="function"==typeof Symbol&&Symbol.iterator;t.exports=function(t){var n=t&&(e&&t[e]||t["@@iterator"]);if("function"==typeof n)return n}},2271:t=>{"use strict";function e(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function n(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}t.exports=function(t,i){for(var r=e(t),o=0,a=0;r;){if(3===r.nodeType){if(a=o+r.textContent.length,o<=i&&a>=i)return{node:r,offset:i-o};o=a}r=e(n(r))}}},2706:(t,e,n)=>{"use strict";var i=n(6508),r=null;t.exports=function(){return!r&&i.canUseDOM&&(r="textContent"in document.documentElement?"textContent":"innerText"),r}},3705:(t,e,n)=>{"use strict";var i=n(6508);function r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}var o={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},a={},s={};i.canUseDOM&&(s=document.createElement("div").style,"AnimationEvent"in window||(delete o.animationend.animation,delete o.animationiteration.animation,delete o.animationstart.animation),"TransitionEvent"in window||delete o.transitionend.transition),t.exports=function(t){if(a[t])return a[t];if(!o[t])return t;var e=o[t];for(var n in e)if(e.hasOwnProperty(n)&&n in s)return a[t]=e[n];return""}},4301:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(5238),a=n(1491),s=n(657),l=(n(3759),n(3620),function(t){this.construct(t)});function u(t,e){var n,r;if(null===t||!1===t)n=a.create(u);else if("object"==typeof t){var o=t;(!o||"function"!=typeof o.type&&"string"!=typeof o.type)&&i("130",null==o.type?o.type:typeof o.type,function(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}(o._owner)),"string"==typeof o.type?n=s.createInternalComponent(o):"function"==typeof(r=o.type)&&void 0!==r.prototype&&"function"==typeof r.prototype.mountComponent&&"function"==typeof r.prototype.receiveComponent?(n=new o.type(o)).getHostNode||(n.getHostNode=n.getNativeNode):n=new l(o)}else"string"==typeof t||"number"==typeof t?n=s.createInstanceForText(t):i("131",typeof t);return n._mountIndex=0,n._mountImage=null,n}r(l.prototype,o.Mixin,{_instantiateReactComponent:u}),t.exports=u},1708:(t,e,n)=>{"use strict";var i,r=n(6508);r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(t,e){if(!r.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&i&&"wheel"===t&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},3980:t=>{"use strict";var e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=function(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===n?!!e[t.type]:"textarea"===n}},661:(t,e,n)=>{"use strict";var i=n(2317),r=n(1506);n(3759),t.exports=function(t){return r.isValidElement(t)||i("143"),t}},5431:(t,e,n)=>{"use strict";var i=n(6570);t.exports=function(t){return'"'+i(t)+'"'}},2317:t=>{"use strict";t.exports=function(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,i=0;i<e;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var r=new Error(n);throw r.name="Invariant Violation",r.framesToPop=1,r}},5172:(t,e,n)=>{"use strict";var i=n(728);t.exports=i.renderSubtreeIntoContainer},2100:(t,e,n)=>{"use strict";var i,r=n(6508),o=n(6722),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(398)((function(t,e){if(t.namespaceURI!==o.svg||"innerHTML"in t)t.innerHTML=e;else{(i=i||document.createElement("div")).innerHTML="<svg>"+e+"</svg>";for(var n=i.firstChild.childNodes,r=0;r<n.length;r++)t.appendChild(n[r])}}));if(r.canUseDOM){var u=document.createElement("div");u.innerHTML=" ",""===u.innerHTML&&(l=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),u=null}t.exports=l},9712:(t,e,n)=>{"use strict";var i=n(6508),r=n(6570),o=n(2100),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};i.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){o(t,r(e))})),t.exports=a},588:t=>{"use strict";t.exports=function(t,e){var n=null===t||!1===t,i=null===e||!1===e;if(n||i)return n===i;var r=typeof t,o=typeof e;return"string"===r||"number"===r?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}},9898:(t,e,n)=>{"use strict";var i=n(2317),r=(n(4066),n(1506)),o=n(2183),a=(n(3759),n(6037));function s(t,e){return t&&"object"==typeof t&&null!=t.key?a.escape(t.key):e.toString(36)}function l(t,e,n,u){var c,h=typeof t;if("undefined"!==h&&"boolean"!==h||(t=null),null===t||"string"===h||"number"===h||r.isValidElement(t))return n(u,t,""===e?"."+s(t,0):e),1;var d=0,f=""===e?".":e+":";if(Array.isArray(t))for(var p=0;p<t.length;p++)d+=l(c=t[p],f+s(c,p),n,u);else{var m=o(t);if(m){var _,g=m.call(t);if(m!==t.entries)for(var y=0;!(_=g.next()).done;)d+=l(c=_.value,f+s(c,y++),n,u);else for(;!(_=g.next()).done;){var v=_.value;v&&(d+=l(c=v[1],f+a.escape(v[0])+":"+s(c,0),n,u))}}else if("object"===h){var x=String(t);i("31","[object Object]"===x?"object with keys {"+Object.keys(t).join(", ")+"}":x,"")}}return d}n(3620),t.exports=function(t,e,n){return null==t?0:l(t,"",e,n)}},6577:(t,e,n)=>{"use strict";n(7418);var i=n(139),r=(n(3620),i);t.exports=r},7588:(t,e,n)=>{"use strict";t.exports=n(8954)},2345:(t,e,n)=>{var i,r,o;r=[n(3609)],void 0===(o="function"==typeof(i=function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;return e&&e.requirejs||(e?i=e:e={},function(t){var e,o,a,s,l={},u={},c={},h={},d=Object.prototype.hasOwnProperty,f=[].slice,p=/\.js$/;function m(t,e){return d.call(t,e)}function _(t,e){var n,i,r,o,a,s,l,u,h,d,f,m=e&&e.split("/"),_=c.map,g=_&&_["*"]||{};if(t&&"."===t.charAt(0))if(e){for(a=(t=t.split("/")).length-1,c.nodeIdCompat&&p.test(t[a])&&(t[a]=t[a].replace(p,"")),t=m.slice(0,m.length-1).concat(t),h=0;h<t.length;h+=1)if("."===(f=t[h]))t.splice(h,1),h-=1;else if(".."===f){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((m||g)&&_){for(h=(n=t.split("/")).length;h>0;h-=1){if(i=n.slice(0,h).join("/"),m)for(d=m.length;d>0;d-=1)if((r=_[m.slice(0,d).join("/")])&&(r=r[i])){o=r,s=h;break}if(o)break;!l&&g&&g[i]&&(l=g[i],u=h)}!o&&l&&(o=l,s=u),o&&(n.splice(0,s,o),t=n.join("/"))}return t}function g(e,n){return function(){var i=f.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),o.apply(t,i.concat([e,n]))}}function y(t){return function(e){l[t]=e}}function v(n){if(m(u,n)){var i=u[n];delete u[n],h[n]=!0,e.apply(t,i)}if(!m(l,n)&&!m(h,n))throw new Error("No "+n);return l[n]}function x(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function b(t){return function(){return c&&c.config&&c.config[t]||{}}}a=function(t,e){var n,i=x(t),r=i[0];return t=i[1],r&&(n=v(r=_(r,e))),r?t=n&&n.normalize?n.normalize(t,function(t){return function(e){return _(e,t)}}(e)):_(t,e):(r=(i=x(t=_(t,e)))[0],t=i[1],r&&(n=v(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},s={require:function(t){return g(t)},exports:function(t){var e=l[t];return void 0!==e?e:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:b(t)}}},e=function(e,n,i,r){var o,c,d,f,p,_,x=[],b=typeof i;if(r=r||e,"undefined"===b||"function"===b){for(n=!n.length&&i.length?["require","exports","module"]:n,p=0;p<n.length;p+=1)if("require"===(c=(f=a(n[p],r)).f))x[p]=s.require(e);else if("exports"===c)x[p]=s.exports(e),_=!0;else if("module"===c)o=x[p]=s.module(e);else if(m(l,c)||m(u,c)||m(h,c))x[p]=v(c);else{if(!f.p)throw new Error(e+" missing "+c);f.p.load(f.n,g(r,!0),y(c),{}),x[p]=l[c]}d=i?i.apply(l[e],x):void 0,e&&(o&&o.exports!==t&&o.exports!==l[e]?l[e]=o.exports:d===t&&_||(l[e]=d))}else e&&(l[e]=i)},n=i=o=function(n,i,r,l,u){if("string"==typeof n)return s[n]?s[n](i):v(a(n,i).f);if(!n.splice){if((c=n).deps&&o(c.deps,c.callback),!i)return;i.splice?(n=i,i=r,r=null):n=t}return i=i||function(){},"function"==typeof r&&(r=l,l=u),l?e(t,n,i,r):setTimeout((function(){e(t,n,i,r)}),4),o},o.config=function(t){return o(t)},n._defined=l,(r=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),m(l,t)||m(u,t)||(u[t]=[t,e,n])}).amd={jQuery:!0}}(),e.requirejs=n,e.require=i,e.define=r),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function n(t){var e=t.prototype,n=[];for(var i in e)"function"==typeof e[i]&&"constructor"!==i&&n.push(i);return n}e.Extend=function(t,e){var n={}.hasOwnProperty;function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},e.Decorate=function(t,e){var i=n(e),r=n(t);function o(){var n=Array.prototype.unshift,i=e.prototype.constructor.length,r=t.prototype.constructor;i>0&&(n.call(arguments,t.prototype.constructor),r=e.prototype.constructor),r.apply(this,arguments)}e.displayName=t.displayName,o.prototype=new function(){this.constructor=o};for(var a=0;a<r.length;a++){var s=r[a];o.prototype[s]=t.prototype[s]}for(var l=function(t){var n=function(){};t in o.prototype&&(n=o.prototype[t]);var i=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,n),i.apply(this,arguments)}},u=0;u<i.length;u++){var c=i[u];o.prototype[c]=l(c)}return o};var i=function(){this.listeners={}};return i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice,n=e.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].apply(this,e)},e.Observable=i,e.generateChars=function(t){for(var e="",n=0;n<t;n++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var r=0;r<n.length;r++){var o=n[r];(o=o.substring(0,1).toLowerCase()+o.substring(1))in i||(i[o]={}),r==n.length-1&&(i[o]=t[e]),i=i[o]}delete t[e]}}return t},e.hasScroll=function(e,n){var i=t(n),r=n.style.overflowX,o=n.style.overflowY;return(r!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===r||"scroll"===o||i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.appendMany=function(e,n){if("1.7"===t.fn.jquery.substr(0,3)){var i=t();t.map(n,(function(t){i=i.add(t)})),n=i}e.append(n)},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);i.append(n(r(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],r=this.option(i);e.push(r)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var e=this;this.data.current((function(n){var i=t.map(n,(function(t){return t.id.toString()}));e.$results.find(".select2-results__option[aria-selected]").each((function(){var e=t(this),n=t.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(r,i)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")}))}))},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},n=this.option(e);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(e){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};for(var r in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(n.id=e._resultId),e.title&&(n.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var o=i[r];n.setAttribute(r,o)}if(e.children){var a=t(n),s=document.createElement("strong");s.className="select2-results__group",t(s),this.template(e,s);for(var l=[],u=0;u<e.children.length;u++){var c=e.children[u],h=this.option(c);l.push(h)}var d=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(l),a.append(s),a.append(d)}else this.template(e,n);return t.data(n,"data",e),n},n.prototype.bind=function(e,n){var i=this,r=e.id+"-results";this.$results.attr("id",r),e.on("results:all",(function(t){i.clear(),i.append(t.data),e.isOpen()&&(i.setClasses(),i.highlightFirstItem())})),e.on("results:append",(function(t){i.append(t.data),e.isOpen()&&i.setClasses()})),e.on("query",(function(t){i.hideMessages(),i.showLoading(t)})),e.on("select",(function(){e.isOpen()&&(i.setClasses(),i.highlightFirstItem())})),e.on("unselect",(function(){e.isOpen()&&(i.setClasses(),i.highlightFirstItem())})),e.on("open",(function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()})),e.on("close",(function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")})),e.on("results:toggle",(function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),e.on("results:select",(function(){var t=i.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:e})}})),e.on("results:previous",(function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t);if(0!==n){var r=n-1;0===t.length&&(r=0);var o=e.eq(r);o.trigger("mouseenter");var a=i.$results.offset().top,s=o.offset().top,l=i.$results.scrollTop()+(s-a);0===r?i.$results.scrollTop(0):s-a<0&&i.$results.scrollTop(l)}})),e.on("results:next",(function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t)+1;if(!(n>=e.length)){var r=e.eq(n);r.trigger("mouseenter");var o=i.$results.offset().top+i.$results.outerHeight(!1),a=r.offset().top+r.outerHeight(!1),s=i.$results.scrollTop()+a-o;0===n?i.$results.scrollTop(0):a>o&&i.$results.scrollTop(s)}})),e.on("results:focus",(function(t){t.element.addClass("select2-results__option--highlighted")})),e.on("results:message",(function(t){i.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-e+t.deltaY,r=t.deltaY>0&&e-t.deltaY<=0,o=t.deltaY<0&&n<=i.$results.height();r?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):o&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(e){var n=t(this),r=n.data("data");"true"!==n.attr("aria-selected")?i.trigger("select",{originalEvent:e,data:r}):i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:r}):i.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(e){var n=t(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:t(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),n=this.$results.offset().top,i=t.offset().top,r=this.$results.scrollTop()+(i-n),o=i-n;r-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(r)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),o=i(e,n);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=r(o):t(n).append(o)},n})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},i.prototype.bind=function(t,e){var i=this,r=(t.id,t.id+"-results");this.container=t,this.$selection.on("focus",(function(t){i.trigger("focus",t)})),this.$selection.on("blur",(function(t){i._handleBlur(t)})),this.$selection.on("keydown",(function(t){i.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){i.update(t.data)})),t.on("open",(function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",r),i._attachCloseHandler(t)})),t.on("close",(function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(t)})),t.on("enable",(function(){i.$selection.attr("tabindex",i._tabindex)})),t.on("disable",(function(){i.$selection.attr("tabindex","-1")}))},i.prototype._handleBlur=function(e){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)}),1)},i.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,(function(e){var n=t(e.target).closest(".select2");t(".select2.select2-container--open").each((function(){var e=t(this);this!=n[0]&&e.data("element").select2("close")}))}))},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){e.find(".selection").append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},i})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,n,i){function r(){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,e),r.prototype.render=function(){var t=r.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},r.prototype.bind=function(t,e){var n=this;r.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",(function(t){1===t.which&&n.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||n.$selection.focus()})),t.on("selection:update",(function(t){n.update(t.data)}))},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},r.prototype.selectionContainer=function(){return t("<span></span>")},r.prototype.update=function(t){if(0!==t.length){var e=t[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(e,n);n.empty().append(i),n.prop("title",e.title||e.text)}else this.clear()},r})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,n){function i(t,e){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(e,n){var r=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(t){r.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!r.options.get("disabled")){var n=t(this).parent().data("data");r.trigger("unselect",{originalEvent:e,data:n})}}))},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},i.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var r=t[i],o=this.selectionContainer(),a=this.display(r,o);o.append(a),o.prop("title",r.title||r.text),o.data("data",r),e.push(o)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,e)}},i})),e.define("select2/selection/placeholder",["../utils"],(function(t){function e(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();return n.html(this.display(e)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},e.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||n)return t.call(this,e);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},e})),e.define("select2/selection/allowClear",["jquery","../keys"],(function(t,e){function n(){}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){i._handleClear(t)})),e.on("keypress",(function(t){i._handleKeyboardClear(t,e)}))},n.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var o={data:i[r]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||n.which!=e.DELETE&&n.which!=e.BACKSPACE||this._handleClear(n)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=t('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e,n){t.call(this,e,n)}return i.prototype.render=function(e){var n=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=e.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(t,e,i){var r=this;t.call(this,e,i),e.on("open",(function(){r.$search.trigger("focus")})),e.on("close",(function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")})),e.on("enable",(function(){r.$search.prop("disabled",!1),r._transferTabIndex()})),e.on("disable",(function(){r.$search.prop("disabled",!0)})),e.on("focus",(function(t){r.$search.trigger("focus")})),e.on("results:focus",(function(t){r.$search.attr("aria-activedescendant",t.id)})),this.$selection.on("focusin",".select2-search--inline",(function(t){r.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){r._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===r.$search.val()){var e=r.$searchContainer.prev(".select2-selection__choice");if(e.length>0){var i=e.data("data");r.searchRemoveChoice(i),t.preventDefault()}}}));var o=document.documentMode,a=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){a?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(a&&"input"===t.type)r.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=n.SHIFT&&e!=n.CTRL&&e!=n.ALT&&e!=n.TAB&&r.handleSearch(t)}}))},i.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},i.prototype.update=function(t,e){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var t;t=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em",this.$search.css("width",t)},i})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,n,i){var r=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];e.call(this,n,i),n.on("*",(function(e,n){if(-1!==t.inArray(e,o)){n=n||{};var i=t.Event("select2:"+e,{params:n});r.$element.trigger(i),-1!==t.inArray(e,a)&&(n.prevented=i.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n})),e.define("select2/diacritics",[],(function(){return{"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,n){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+t.generateChars(4),i},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=[],i=this;this.$element.find(":selected").each((function(){var t=n(this),r=i.item(t);e.push(r)})),t(e)},i.prototype.select=function(t){var e=this;if(t.selected=!0,n(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current((function(i){var r=[];(t=[t]).push.apply(t,i);for(var o=0;o<t.length;o++){var a=t[o].id;-1===n.inArray(a,r)&&r.push(a)}e.$element.val(r),e.$element.trigger("change")}));else{var i=t.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,n(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("change");this.current((function(i){for(var r=[],o=0;o<i.length;o++){var a=i[o].id;a!==t.id&&-1===n.inArray(a,r)&&r.push(a)}e.$element.val(r),e.$element.trigger("change")}))}},i.prototype.bind=function(t,e){var n=this;this.container=t,t.on("select",(function(t){n.select(t.data)})),t.on("unselect",(function(t){n.unselect(t.data)}))},i.prototype.destroy=function(){this.$element.find("*").each((function(){n.removeData(this,"data")}))},i.prototype.query=function(t,e){var i=[],r=this;this.$element.children().each((function(){var e=n(this);if(e.is("option")||e.is("optgroup")){var o=r.item(e),a=r.matches(t,o);null!==a&&i.push(a)}})),e({results:i})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup")).label=t.text:void 0!==(e=document.createElement("option")).textContent?e.textContent=t.text:e.innerText=t.text,t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var i=n(e),r=this._normalizeItem(t);return r.element=e,n.data(e,"data",r),i},i.prototype.item=function(t){var e={};if(null!=(e=n.data(t[0],"data")))return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var i=t.children("option"),r=[],o=0;o<i.length;o++){var a=n(i[o]),s=this.item(a);r.push(s)}e.children=r}return(e=this._normalizeItem(e)).element=t[0],n.data(t[0],"data",e),e},i.prototype._normalizeItem=function(t){n.isPlainObject(t)||(t={id:t,text:t});return null!=(t=n.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},{selected:!1,disabled:!1},t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,n){function i(t,e){var n=e.get("data")||[];i.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(n))}return e.Extend(i,t),i.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,n){return n.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){var i=this,r=this.$element.find("option"),o=r.map((function(){return i.item(n(this)).id})).get(),a=[];function s(t){return function(){return n(this).val()==t.id}}for(var l=0;l<t.length;l++){var u=this._normalizeItem(t[l]);if(n.inArray(u.id,o)>=0){var c=r.filter(s(u)),h=this.item(c),d=n.extend(!0,{},u,h),f=this.option(d);c.replaceWith(f)}else{var p=this.option(u);if(u.children){var m=this.convertToOptions(u.children);e.appendMany(p,m)}a.push(p)}}return a},i})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,n){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return n.extend({},t,{q:t.term})},transport:function(t,e,i){var r=n.ajax(t);return r.then(e),r.fail(i),r}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){var i=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=n.extend({type:"GET"},this.ajaxOptions);function o(){var o=r.transport(r,(function(r){var o=i.processResults(r,t);i.options.get("debug")&&window.console&&console.error&&(o&&o.results&&n.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(o)}),(function(){o.status&&"0"===o.status||i.trigger("results:message",{message:"errorLoading"})}));i._request=o}"function"==typeof r.url&&(r.url=r.url.call(this.$element,t)),"function"==typeof r.data&&(r.data=r.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(o,this.ajaxOptions.delay)):o()},i})),e.define("select2/data/tags",["jquery"],(function(t){function e(e,n,i){var r=i.get("tags"),o=i.get("createTag");void 0!==o&&(this.createTag=o);var a=i.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,n,i),t.isArray(r))for(var s=0;s<r.length;s++){var l=r[s],u=this._normalizeItem(l),c=this.option(u);this.$element.append(c)}}return e.prototype.query=function(t,e,n){var i=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(r,o){for(var a=r.results,s=0;s<a.length;s++){var l=a[s],u=null!=l.children&&!t({results:l.children},!0);if(l.text===e.term||u)return!o&&(r.data=a,void n(r))}if(o)return!0;var c=i.createTag(e);if(null!=c){var h=i.option(c);h.attr("data-select2-tag",!0),i.addOptions([h]),i.insertTag(a,c)}r.results=a,n(r)})):t.call(this,e,n)},e.prototype.createTag=function(e,n){var i=t.trim(n.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(e){this._lastTag,this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,n,i){var r=this;n.term=n.term||"";var o=this.tokenizer(n,this.options,(function(e){var n=r._normalizeItem(e);if(!r.$element.find("option").filter((function(){return t(this).val()===n.id})).length){var i=r.option(n);i.attr("data-select2-tag",!0),r._removeOldTags(),r.addOptions([i])}!function(t){r.trigger("select",{data:t})}(n)}));o.term!==n.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),n.term=o.term),e.call(this,n,i)},e.prototype.tokenizer=function(e,n,i,r){for(var o=i.get("tokenSeparators")||[],a=n.term,s=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};s<a.length;){var u=a[s];if(-1!==t.inArray(u,o)){var c=a.substr(0,s),h=l(t.extend({},n,{term:c}));null!=h?(r(h),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){var i=this;this.current((function(r){var o=null!=r?r.length:0;i.maximumSelectionLength>0&&o>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t.call(i,e,n)}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.bind=function(){},n.prototype.position=function(t,e){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery","../utils"],(function(t,e){function n(){}return n.prototype.render=function(e){var n=e.call(this),i=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(e,n,i){var r=this;e.call(this,n,i),this.$search.on("keydown",(function(t){r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){r.handleSearch(t)})),n.on("open",(function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout((function(){r.$search.focus()}),0)})),n.on("close",(function(){r.$search.attr("tabindex",-1),r.$search.val("")})),n.on("focus",(function(){n.isOpen()&&r.$search.focus()})),n.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(r.showSearch(t)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide"))}))},n.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},n.prototype.showSearch=function(t,e){return!0},n})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;i>=0;i--){var r=e[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,n,i){var r=this;e.call(this,n,i),n.on("query",(function(t){r.lastParams=t,r.loading=!0})),n.on("query:append",(function(t){r.lastParams=t,r.loading=!0})),this.$results.on("scroll",(function(){var e=t.contains(document.documentElement,r.$loadingMore[0]);!r.loading&&e&&r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore()}))},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function n(e,n,i){this.$dropdownParent=i.get("dropdownParent")||t(document.body),e.call(this,n,i)}return n.prototype.bind=function(t,e,n){var i=this,r=!1;t.call(this,e,n),e.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(e),r||(r=!0,e.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})))})),e.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},n.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var r=this,o="scroll.select2."+i.id,a="resize.select2."+i.id,s="orientationchange.select2."+i.id,l=this.$container.parents().filter(e.hasScroll);l.each((function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),l.on(o,(function(e){var n=t(this).data("select2-scroll-position");t(this).scrollTop(n.y)})),t(window).on(o+" "+a+" "+s,(function(t){r._positionDropdown(),r._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,i){var r="scroll.select2."+i.id,o="resize.select2."+i.id,a="orientationchange.select2."+i.id;this.$container.parents().filter(e.hasScroll).off(r),t(window).off(r+" "+o+" "+a)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=o.top,a.bottom=o.top+a.height;var s=this.$dropdown.outerHeight(!1),l=e.scrollTop(),u=e.scrollTop()+e.height(),c=l<o.top-s,h=u>o.bottom+s,d={left:o.left,top:a.bottom},f=this.$dropdownParent;"static"===f.css("position")&&(f=f.offsetParent());var p=f.offset();d.top-=p.top,d.left-=p.left,n||i||(r="below"),h||!c||n?!c&&h&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(d.top=a.top-p.top-s),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},n.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var n=0,i=0;i<e.length;i++){var r=e[i];r.children?n+=t(r.children):n++}return n}function e(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,i)}return e.prototype.showSearch=function(e,n){return!(t(n.data.results)<this.minimumResultsForSearch)&&e.call(this,n)},e})),e.define("select2/dropdown/selectOnClose",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",(function(t){i._handleSelectOnClose(t)}))},t.prototype._handleSelectOnClose=function(t,e){if(e&&null!=e.originalSelect2Event){var n=e.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var r=i.data("data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},t})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(t){i._selectTriggered(t)})),e.on("unselect",(function(t){i._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:e})},t})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(t,e,n,i,r,o,a,s,l,u,c,h,d,f,p,m,_,g,y,v,x,b,w,M,T,k,S,E,C){function L(){this.reset()}return L.prototype.apply=function(h){if(null==(h=t.extend(!0,{},this.defaults,h)).dataAdapter){if(null!=h.ajax?h.dataAdapter=p:null!=h.data?h.dataAdapter=f:h.dataAdapter=d,h.minimumInputLength>0&&(h.dataAdapter=u.Decorate(h.dataAdapter,g)),h.maximumInputLength>0&&(h.dataAdapter=u.Decorate(h.dataAdapter,y)),h.maximumSelectionLength>0&&(h.dataAdapter=u.Decorate(h.dataAdapter,v)),h.tags&&(h.dataAdapter=u.Decorate(h.dataAdapter,m)),null==h.tokenSeparators&&null==h.tokenizer||(h.dataAdapter=u.Decorate(h.dataAdapter,_)),null!=h.query){var C=e(h.amdBase+"compat/query");h.dataAdapter=u.Decorate(h.dataAdapter,C)}if(null!=h.initSelection){var L=e(h.amdBase+"compat/initSelection");h.dataAdapter=u.Decorate(h.dataAdapter,L)}}if(null==h.resultsAdapter&&(h.resultsAdapter=n,null!=h.ajax&&(h.resultsAdapter=u.Decorate(h.resultsAdapter,M)),null!=h.placeholder&&(h.resultsAdapter=u.Decorate(h.resultsAdapter,w)),h.selectOnClose&&(h.resultsAdapter=u.Decorate(h.resultsAdapter,S))),null==h.dropdownAdapter){if(h.multiple)h.dropdownAdapter=x;else{var D=u.Decorate(x,b);h.dropdownAdapter=D}if(0!==h.minimumResultsForSearch&&(h.dropdownAdapter=u.Decorate(h.dropdownAdapter,k)),h.closeOnSelect&&(h.dropdownAdapter=u.Decorate(h.dropdownAdapter,E)),null!=h.dropdownCssClass||null!=h.dropdownCss||null!=h.adaptDropdownCssClass){var A=e(h.amdBase+"compat/dropdownCss");h.dropdownAdapter=u.Decorate(h.dropdownAdapter,A)}h.dropdownAdapter=u.Decorate(h.dropdownAdapter,T)}if(null==h.selectionAdapter){if(h.multiple?h.selectionAdapter=r:h.selectionAdapter=i,null!=h.placeholder&&(h.selectionAdapter=u.Decorate(h.selectionAdapter,o)),h.allowClear&&(h.selectionAdapter=u.Decorate(h.selectionAdapter,a)),h.multiple&&(h.selectionAdapter=u.Decorate(h.selectionAdapter,s)),null!=h.containerCssClass||null!=h.containerCss||null!=h.adaptContainerCssClass){var P=e(h.amdBase+"compat/containerCss");h.selectionAdapter=u.Decorate(h.selectionAdapter,P)}h.selectionAdapter=u.Decorate(h.selectionAdapter,l)}if("string"==typeof h.language)if(h.language.indexOf("-")>0){var I=h.language.split("-")[0];h.language=[h.language,I]}else h.language=[h.language];if(t.isArray(h.language)){var z=new c;h.language.push("en");for(var F=h.language,R=0;R<F.length;R++){var O=F[R],Y={};try{Y=c.loadPath(O)}catch(t){try{O=this.defaults.amdLanguageBase+O,Y=c.loadPath(O)}catch(t){h.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+O+'" could not be automatically loaded. A fallback will be used instead.');continue}}z.extend(Y)}h.translations=z}else{var N=c.loadPath(this.defaults.amdLanguageBase+"en"),B=new c(h.language);B.extend(N),h.translations=B}return h},L.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return h[t]||t}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:u.escapeMarkup,language:C,matcher:function n(i,r){if(""===t.trim(i.term))return r;if(r.children&&r.children.length>0){for(var o=t.extend(!0,{},r),a=r.children.length-1;a>=0;a--)null==n(i,r.children[a])&&o.children.splice(a,1);return o.children.length>0?o:n(i,o)}var s=e(r.text).toUpperCase(),l=e(i.term).toUpperCase();return s.indexOf(l)>-1?r:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},L.prototype.set=function(e,n){var i={};i[t.camelCase(e)]=n;var r=u._convertData(i);t.extend(this.defaults,r)},new L})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(t,e,n,i){function r(e,r){if(this.options=e,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var o=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,o)}}return r.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var r;r=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var o=e.extend(!0,{},r);for(var a in o=i._convertData(o))e.inArray(a,n)>-1||(e.isPlainObject(this.options[a])?e.extend(this.options[a],o[a]):this.options[a]=o[a]);return this},r.prototype.get=function(t){return this.options[t]},r.prototype.set=function(t,e){this.options[t]=e},r})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,n,i){var r=function(t,n){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),r.__super__.constructor.call(this);var i=t.attr("tabindex")||0;t.data("old-tabindex",i),t.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(t,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var u=this.options.get("resultsAdapter");this.results=new u(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){c.trigger("selection:update",{data:t})})),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},r.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},r.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var r=t.outerWidth(!1);return r<=0?"auto":r+"px"}if("style"==e){var o=t.attr("style");if("string"!=typeof o)return null;for(var a=o.split(";"),s=0,l=a.length;s<l;s+=1){var u=a[s].replace(/\s/g,"").match(n);if(null!==u&&u.length>=1)return u[1]}return null}return e},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this.$element.on("focus.select2",(function(t){e.trigger("focus",t)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i((function(n){t.each(n,e._syncA),t.each(n,e._syncS)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",e._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",e._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,!1))},r.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerSelectionEvents=function(){var e=this,n=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(i,r){-1===t.inArray(i,n)&&e.trigger(i,r)}))},r.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container.addClass("select2-container--open")})),this.on("close",(function(){t.$container.removeClass("select2-container--open")})),this.on("enable",(function(){t.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){t.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){t.$container.removeClass("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(n){t.trigger("results:all",{data:n,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(n){t.trigger("results:append",{data:n,query:e})}))})),this.on("keypress",(function(e){var n=e.which;t.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&e.altKey?(t.close(),e.preventDefault()):n===i.ENTER?(t.trigger("results:select",{}),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):n===i.UP?(t.trigger("results:previous",{}),e.preventDefault()):n===i.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(t,e){var n=!1,i=this;if(!t||!t.target||"OPTION"===t.target.nodeName||"OPTGROUP"===t.target.nodeName){if(e)if(e.addedNodes&&e.addedNodes.length>0)for(var r=0;r<e.addedNodes.length;r++)e.addedNodes[r].selected&&(n=!0);else e.removedNodes&&e.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current((function(t){i.trigger("selection:update",{data:t})}))}},r.prototype.trigger=function(t,e){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===e&&(e={}),t in i){var o=i[t],a={prevented:!1,name:t,args:e};if(n.call(this,o,a),a.prevented)return void(e.prevented=!0)}n.call(this,t,e)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var n=e[0];t.isArray(n)&&(n=t.map(n,(function(t){return t.toString()}))),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},r})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],(function(t,e,n,i){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var i=t.extend(!0,{},e);new n(t(this),i)})),this;if("string"==typeof e){var i,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=t(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),i=n[e].apply(n,o)})),t.inArray(e,r)>-1?this:i}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n})),{define:e.define,require:e.require};var n,i,r}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n})?i.apply(e,r):i)||(t.exports=o)},5911:(t,e,n)=>{var i,r,o;!function(a){"use strict";r=[n(3609)],void 0===(o="function"==typeof(i=function(t,e){var n={beforeShow:c,move:c,change:c,show:c,hide:c,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},i=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),s=function(){var t="";if(r)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(e,n,i,r){for(var a=[],s=0;s<e.length;s++){var l=e[s];if(l){var u=tinycolor(l),c=u.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=tinycolor.equals(n,l)?" sp-thumb-active":"";var h=u.toString(r.preferredFormat||"rgb"),d=o?"background-color:"+u.toRgbString():"filter:"+u.toFilter();a.push('<span title="'+h+'" data-color="'+u.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{a.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+a.join("")+"</div>"}function u(u,c){var m,_,g,y,v=function(e,i){var r=t.extend({},n,e);return r.callbacks={move:d(r.move,i),change:d(r.change,i),show:d(r.show,i),hide:d(r.hide,i),beforeShow:d(r.beforeShow,i)},r}(c,u),x=v.flat,b=v.showSelectionPalette,w=v.localStorageKey,M=v.theme,T=v.callbacks,k=(m=$t,_=10,function(){var t=this,e=arguments,n=function(){y=null,m.apply(t,e)};g&&clearTimeout(y),!g&&y||(y=setTimeout(n,_))}),S=!1,E=!1,C=0,L=0,D=0,A=0,P=0,I=0,z=0,F=0,R=0,O=0,Y=1,N=[],B=[],j={},U=v.selectionPalette.slice(0),$=v.maxSelectionSize,H="sp-dragging",V=null,q=u.ownerDocument,W=(q.body,t(u)),G=!1,Z=t(s,q).addClass(M),X=Z.find(".sp-picker-container"),K=Z.find(".sp-color"),J=Z.find(".sp-dragger"),Q=Z.find(".sp-hue"),tt=Z.find(".sp-slider"),et=Z.find(".sp-alpha-inner"),nt=Z.find(".sp-alpha"),it=Z.find(".sp-alpha-handle"),rt=Z.find(".sp-input"),ot=Z.find(".sp-palette"),at=Z.find(".sp-initial"),st=Z.find(".sp-cancel"),lt=Z.find(".sp-clear"),ut=Z.find(".sp-choose"),ct=Z.find(".sp-palette-toggle"),ht=W.is("input"),dt=ht&&"color"===W.attr("type")&&p(),ft=ht&&!x,pt=ft?t(a).addClass(M).addClass(v.className).addClass(v.replacerClassName):t([]),mt=ft?pt:W,_t=pt.find(".sp-preview-inner"),gt=v.color||ht&&W.val(),yt=!1,vt=v.preferredFormat,xt=!v.showButtons||v.clickoutFiresChange,bt=!gt,wt=v.allowEmpty&&!dt;function Mt(){if(v.showPaletteOnly&&(v.showPalette=!0),ct.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),v.palette){N=v.palette.slice(0),B=t.isArray(N[0])?N:[N],j={};for(var e=0;e<B.length;e++)for(var n=0;n<B[e].length;n++){var i=tinycolor(B[e][n]).toRgbString();j[i]=!0}}Z.toggleClass("sp-flat",x),Z.toggleClass("sp-input-disabled",!v.showInput),Z.toggleClass("sp-alpha-enabled",v.showAlpha),Z.toggleClass("sp-clear-enabled",wt),Z.toggleClass("sp-buttons-disabled",!v.showButtons),Z.toggleClass("sp-palette-buttons-disabled",!v.togglePaletteOnly),Z.toggleClass("sp-palette-disabled",!v.showPalette),Z.toggleClass("sp-palette-only",v.showPaletteOnly),Z.toggleClass("sp-initial-disabled",!v.showInitial),Z.addClass(v.className).addClass(v.containerClassName),$t()}function Tt(){if(w&&window.localStorage){try{var e=window.localStorage[w].split(",#");e.length>1&&(delete window.localStorage[w],t.each(e,(function(t,e){kt(e)})))}catch(t){}try{U=window.localStorage[w].split(";")}catch(t){}}}function kt(e){if(b){var n=tinycolor(e).toRgbString();if(!j[n]&&-1===t.inArray(n,U))for(U.push(n);U.length>$;)U.shift();if(w&&window.localStorage)try{window.localStorage[w]=U.join(";")}catch(t){}}}function St(){var e=Yt(),n=t.map(B,(function(t,n){return l(t,e,"sp-palette-row sp-palette-row-"+n,v)}));Tt(),U&&n.push(l(function(){var t=[];if(v.showPalette)for(var e=0;e<U.length;e++){var n=tinycolor(U[e]).toRgbString();j[n]||t.push(U[e])}return t.reverse().slice(0,v.maxSelectionSize)}(),e,"sp-palette-row sp-palette-row-selection",v)),ot.html(n.join(""))}function Et(){if(v.showInitial){var t=yt,e=Yt();at.html(l([t,e],e,"sp-palette-row-initial",v))}}function Ct(){(L<=0||C<=0||A<=0)&&$t(),E=!0,Z.addClass(H),V=null,W.trigger("dragstart.spectrum",[Yt()])}function Lt(){E=!1,Z.removeClass(H),W.trigger("dragstop.spectrum",[Yt()])}function Dt(){var t=rt.val();if(null!==t&&""!==t||!wt){var e=tinycolor(t);e.isValid()?(Ot(e),Ut(!0)):rt.addClass("sp-validation-error")}else Ot(null),Ut(!0)}function At(){S?Ft():Pt()}function Pt(){var e=t.Event("beforeShow.spectrum");S?$t():(W.trigger(e,[Yt()]),!1===T.beforeShow(Yt())||e.isDefaultPrevented()||(function(){for(var t=0;t<i.length;t++)i[t]&&i[t].hide()}(),S=!0,t(q).bind("keydown.spectrum",It),t(q).bind("click.spectrum",zt),t(window).bind("resize.spectrum",k),pt.addClass("sp-active"),Z.removeClass("sp-hidden"),$t(),Bt(),yt=Yt(),Et(),T.show(yt),W.trigger("show.spectrum",[yt])))}function It(t){27===t.keyCode&&Ft()}function zt(t){2!=t.button&&(E||(xt?Ut(!0):Rt(),Ft()))}function Ft(){S&&!x&&(S=!1,t(q).unbind("keydown.spectrum",It),t(q).unbind("click.spectrum",zt),t(window).unbind("resize.spectrum",k),pt.removeClass("sp-active"),Z.addClass("sp-hidden"),T.hide(Yt()),W.trigger("hide.spectrum",[Yt()]))}function Rt(){Ot(yt,!0)}function Ot(t,e){var n,i;tinycolor.equals(t,Yt())?Bt():(!t&&wt?bt=!0:(bt=!1,i=(n=tinycolor(t)).toHsv(),F=i.h%360/360,R=i.s,O=i.v,Y=i.a),Bt(),n&&n.isValid()&&!e&&(vt=v.preferredFormat||n.getFormat()))}function Yt(t){return t=t||{},wt&&bt?null:tinycolor.fromRatio({h:F,s:R,v:O,a:Math.round(100*Y)/100},{format:t.format||vt})}function Nt(){Bt(),T.move(Yt()),W.trigger("move.spectrum",[Yt()])}function Bt(){rt.removeClass("sp-validation-error"),jt();var t=tinycolor.fromRatio({h:F,s:1,v:1});K.css("background-color",t.toHexString());var e=vt;Y<1&&(0!==Y||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var n=Yt({format:e}),i="";if(_t.removeClass("sp-clear-display"),_t.css("background-color","transparent"),!n&&wt)_t.addClass("sp-clear-display");else{var a=n.toHexString(),s=n.toRgbString();if(o||1===n.alpha?_t.css("background-color",s):(_t.css("background-color","transparent"),_t.css("filter",n.toFilter())),v.showAlpha){var l=n.toRgb();l.a=0;var u=tinycolor(l).toRgbString(),c="linear-gradient(left, "+u+", "+a+")";r?et.css("filter",tinycolor(u).toFilter({gradientType:1},a)):(et.css("background","-webkit-"+c),et.css("background","-moz-"+c),et.css("background","-ms-"+c),et.css("background","linear-gradient(to right, "+u+", "+a+")"))}i=n.toString(e)}v.showInput&&rt.val(i),v.showPalette&&St(),Et()}function jt(){var t=R,e=O;if(wt&&bt)it.hide(),tt.hide(),J.hide();else{it.show(),tt.show(),J.show();var n=t*C,i=L-e*L;n=Math.max(-D,Math.min(C-D,n-D)),i=Math.max(-D,Math.min(L-D,i-D)),J.css({top:i+"px",left:n+"px"});var r=Y*P;it.css({left:r-I/2+"px"});var o=F*A;tt.css({top:o-z+"px"})}}function Ut(t){var e=Yt(),n="",i=!tinycolor.equals(e,yt);e&&(n=e.toString(vt),kt(e)),ht&&W.val(n),t&&i&&(T.change(e),W.trigger("change",[e]))}function $t(){S&&(C=K.width(),L=K.height(),D=J.height(),Q.width(),A=Q.height(),z=tt.height(),P=nt.width(),I=it.width(),x||(Z.css("position","absolute"),v.offset?Z.offset(v.offset):Z.offset(function(e,n){var i=0,r=e.outerWidth(),o=e.outerHeight(),a=n.outerHeight(),s=e[0].ownerDocument,l=s.documentElement,u=l.clientWidth+t(s).scrollLeft(),c=l.clientHeight+t(s).scrollTop(),h=n.offset();return h.top+=a,h.left-=Math.min(h.left,h.left+r>u&&u>r?Math.abs(h.left+r-u):0),h.top-=Math.min(h.top,h.top+o>c&&c>o?Math.abs(o+a-i):i),h}(Z,mt))),jt(),v.showPalette&&St(),W.trigger("reflow.spectrum"))}function Ht(){Ft(),G=!0,W.attr("disabled",!0),mt.addClass("sp-disabled")}!function(){if(r&&Z.find("*:not(input)").attr("unselectable","on"),Mt(),ft&&W.after(pt).hide(),wt||lt.hide(),x)W.after(Z).hide();else{var e="parent"===v.appendTo?W.parent():t(v.appendTo);1!==e.length&&(e=t("body")),e.append(Z)}function n(e){return e.data&&e.data.ignore?(Ot(t(e.target).closest(".sp-thumb-el").data("color")),Nt()):(Ot(t(e.target).closest(".sp-thumb-el").data("color")),Nt(),Ut(!0),v.hideAfterPaletteSelect&&Ft()),!1}Tt(),mt.bind("click.spectrum touchstart.spectrum",(function(e){G||At(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()})),(W.is(":disabled")||!0===v.disabled)&&Ht(),Z.click(h),rt.change(Dt),rt.bind("paste",(function(){setTimeout(Dt,1)})),rt.keydown((function(t){13==t.keyCode&&Dt()})),st.text(v.cancelText),st.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),Rt(),Ft()})),lt.attr("title",v.clearText),lt.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),bt=!0,Nt(),x&&Ut(!0)})),ut.text(v.chooseText),ut.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),r&&rt.is(":focus")&&rt.trigger("change"),!rt.hasClass("sp-validation-error")&&(Ut(!0),Ft())})),ct.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),ct.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),v.showPaletteOnly=!v.showPaletteOnly,v.showPaletteOnly||x||Z.css("left","-="+(X.outerWidth(!0)+5)),Mt()})),f(nt,(function(t,e,n){Y=t/P,bt=!1,n.shiftKey&&(Y=Math.round(10*Y)/10),Nt()}),Ct,Lt),f(Q,(function(t,e){F=parseFloat(e/A),bt=!1,v.showAlpha||(Y=1),Nt()}),Ct,Lt),f(K,(function(t,e,n){if(n.shiftKey){if(!V){var i=R*C,r=L-O*L,o=Math.abs(t-i)>Math.abs(e-r);V=o?"x":"y"}}else V=null;var a=!V||"y"===V;(!V||"x"===V)&&(R=parseFloat(t/C)),a&&(O=parseFloat((L-e)/L)),bt=!1,v.showAlpha||(Y=1),Nt()}),Ct,Lt),gt?(Ot(gt),Bt(),vt=v.preferredFormat||tinycolor(gt).format,kt(gt)):Bt(),x&&Pt();var i=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ot.delegate(".sp-thumb-el",i,n),at.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},n)}();var Vt={show:Pt,hide:Ft,toggle:At,reflow:$t,option:function(n,i){return n===e?t.extend({},v):i===e?v[n]:(v[n]=i,"preferredFormat"===n&&(vt=v.preferredFormat),void Mt())},enable:function(){G=!1,W.attr("disabled",!1),mt.removeClass("sp-disabled")},disable:Ht,offset:function(t){v.offset=t,$t()},set:function(t){Ot(t),Ut()},get:Yt,destroy:function(){W.show(),mt.unbind("click.spectrum touchstart.spectrum"),Z.remove(),pt.remove(),i[Vt.id]=null},container:Z};return Vt.id=i.push(Vt)-1,Vt}function c(){}function h(t){t.stopPropagation()}function d(t,e){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function f(e,n,i,o){n=n||function(){},i=i||function(){},o=o||function(){};var a=document,s=!1,l={},u=0,c=0,h="ontouchstart"in window,d={};function f(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function p(t){if(s){if(r&&a.documentMode<9&&!t.button)return m();var i=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],o=i&&i.pageX||t.pageX,d=i&&i.pageY||t.pageY,p=Math.max(0,Math.min(o-l.left,c)),_=Math.max(0,Math.min(d-l.top,u));h&&f(t),n.apply(e,[p,_,t])}}function m(){s&&(t(a).unbind(d),t(a.body).removeClass("sp-dragging"),setTimeout((function(){o.apply(e,arguments)}),0)),s=!1}d.selectstart=f,d.dragstart=f,d["touchmove mousemove"]=p,d["touchend mouseup"]=m,t(e).bind("touchstart mousedown",(function(n){(n.which?3==n.which:2==n.button)||s||!1!==i.apply(e,arguments)&&(s=!0,u=t(e).height(),c=t(e).width(),l=t(e).offset(),t(a).bind(d),t(a.body).addClass("sp-dragging"),p(n),f(n))}))}function p(){return t.fn.spectrum.inputTypeColorSupport()}var m="spectrum.id";t.fn.spectrum=function(e,n){if("string"==typeof e){var r=this,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=i[t(this).data(m)];if(n){var a=n[e];if(!a)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?r=n.get():"container"==e?r=n.container:"option"==e?r=n.option.apply(n,o):"destroy"==e?(n.destroy(),t(this).removeData(m)):a.apply(n,o)}})),r}return this.spectrum("destroy").each((function(){var n=u(this,t.extend({},e,t(this).data()));t(this).data(m,n.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=f,t.fn.spectrum.defaults=n,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var n=t("<input type='color'/>")[0];e._cachedResult="color"===n.type&&""!==n.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!p()&&e.spectrum({preferredFormat:"hex6"})},function(){var t=/^[\s,#]+/,e=/\s+$/,n=0,i=Math,r=i.round,o=i.min,a=i.max,s=i.random,l=function(s,u){if(u=u||{},(s=s||"")instanceof l)return s;if(!(this instanceof l))return new l(s,u);var c=function(n){var r={r:0,g:0,b:0},s=1,l=!1,u=!1;return"string"==typeof n&&(n=function(n){n=n.replace(t,"").replace(e,"").toLowerCase();var i,r=!1;if(S[n])n=S[n],r=!0;else if("transparent"==n)return{r:0,g:0,b:0,a:0,format:"name"};return(i=Y.rgb.exec(n))?{r:i[1],g:i[2],b:i[3]}:(i=Y.rgba.exec(n))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=Y.hsl.exec(n))?{h:i[1],s:i[2],l:i[3]}:(i=Y.hsla.exec(n))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=Y.hsv.exec(n))?{h:i[1],s:i[2],v:i[3]}:(i=Y.hsva.exec(n))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=Y.hex8.exec(n))?{a:z(i[1]),r:A(i[2]),g:A(i[3]),b:A(i[4]),format:r?"name":"hex8"}:(i=Y.hex6.exec(n))?{r:A(i[1]),g:A(i[2]),b:A(i[3]),format:r?"name":"hex"}:!!(i=Y.hex3.exec(n))&&{r:A(i[1]+""+i[1]),g:A(i[2]+""+i[2]),b:A(i[3]+""+i[3]),format:r?"name":"hex"}}(n)),"object"==typeof n&&(n.hasOwnProperty("r")&&n.hasOwnProperty("g")&&n.hasOwnProperty("b")?(c=n.r,h=n.g,d=n.b,r={r:255*L(c,255),g:255*L(h,255),b:255*L(d,255)},l=!0,u="%"===String(n.r).substr(-1)?"prgb":"rgb"):n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("v")?(n.s=I(n.s),n.v=I(n.v),r=function(t,e,n){t=6*L(t,360),e=L(e,100),n=L(n,100);var r=i.floor(t),o=t-r,a=n*(1-e),s=n*(1-o*e),l=n*(1-(1-o)*e),u=r%6;return{r:255*[n,s,a,a,l,n][u],g:255*[l,n,n,s,a,a][u],b:255*[a,a,l,n,n,s][u]}}(n.h,n.s,n.v),l=!0,u="hsv"):n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("l")&&(n.s=I(n.s),n.l=I(n.l),r=function(t,e,n){var i,r,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=L(t,360),e=L(e,100),n=L(n,100),0===e)i=r=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=a(l,s,t+1/3),r=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*i,g:255*r,b:255*o}}(n.h,n.s,n.l),l=!0,u="hsl"),n.hasOwnProperty("a")&&(s=n.a)),s=C(s),{ok:l,format:n.format||u,r:o(255,a(r.r,0)),g:o(255,a(r.g,0)),b:o(255,a(r.b,0)),a:s};var c,h,d}(s);this._originalInput=s,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=r(100*this._a)/100,this._format=u.format||c.format,this._gradientType=u.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=c.ok,this._tc_id=n++};function u(t,e,n){t=L(t,255),e=L(e,255),n=L(n,255);var i,r,s=a(t,e,n),l=o(t,e,n),u=(s+l)/2;if(s==l)i=r=0;else{var c=s-l;switch(r=u>.5?c/(2-s-l):c/(s+l),s){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4}i/=6}return{h:i,s:r,l:u}}function c(t,e,n){t=L(t,255),e=L(e,255),n=L(n,255);var i,r,s=a(t,e,n),l=o(t,e,n),u=s,c=s-l;if(r=0===s?0:c/s,s==l)i=0;else{switch(s){case t:i=(e-n)/c+(e<n?6:0);break;case e:i=(n-t)/c+2;break;case n:i=(t-e)/c+4}i/=6}return{h:i,s:r,v:u}}function h(t,e,n,i){var o=[P(r(t).toString(16)),P(r(e).toString(16)),P(r(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function d(t,e,n,i){return[P((o=i,Math.round(255*parseFloat(o)).toString(16))),P(r(t).toString(16)),P(r(e).toString(16)),P(r(n).toString(16))].join("");var o}function f(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s-=e/100,n.s=D(n.s),l(n)}function p(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s+=e/100,n.s=D(n.s),l(n)}function m(t){return l(t).desaturate(100)}function _(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l+=e/100,n.l=D(n.l),l(n)}function g(t,e){e=0===e?0:e||10;var n=l(t).toRgb();return n.r=a(0,o(255,n.r-r(-e/100*255))),n.g=a(0,o(255,n.g-r(-e/100*255))),n.b=a(0,o(255,n.b-r(-e/100*255))),l(n)}function y(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l-=e/100,n.l=D(n.l),l(n)}function v(t,e){var n=l(t).toHsl(),i=(r(n.h)+e)%360;return n.h=i<0?360+i:i,l(n)}function x(t){var e=l(t).toHsl();return e.h=(e.h+180)%360,l(e)}function b(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+120)%360,s:e.s,l:e.l}),l({h:(n+240)%360,s:e.s,l:e.l})]}function w(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+90)%360,s:e.s,l:e.l}),l({h:(n+180)%360,s:e.s,l:e.l}),l({h:(n+270)%360,s:e.s,l:e.l})]}function M(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+72)%360,s:e.s,l:e.l}),l({h:(n+216)%360,s:e.s,l:e.l})]}function T(t,e,n){e=e||6,n=n||30;var i=l(t).toHsl(),r=360/n,o=[l(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(l(i));return o}function k(t,e){e=e||6;for(var n=l(t).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(l({h:i,s:r,v:o})),o=(o+s)%1;return a}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=C(t),this._roundA=r(100*this._a)/100,this},toHsv:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=c(this._r,this._g,this._b),e=r(360*t.h),n=r(100*t.s),i=r(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=r(360*t.h),n=r(100*t.s),i=r(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return d(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*L(this._r,255))+"%",g:r(100*L(this._g,255))+"%",b:r(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*L(this._r,255))+"%, "+r(100*L(this._g,255))+"%, "+r(100*L(this._b,255))+"%)":"rgba("+r(100*L(this._r,255))+"%, "+r(100*L(this._g,255))+"%, "+r(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(E[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";return t&&(n=l(t).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},l.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:I(t[i]));t=n}return l(t,e)},l.equals=function(t,e){return!(!t||!e)&&l(t).toRgbString()==l(e).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})},l.mix=function(t,e,n){n=0===n?0:n||50;var i,r=l(t).toRgb(),o=l(e).toRgb(),a=n/100,s=2*a-1,u=o.a-r.a,c=1-(i=((i=s*u==-1?s:(s+u)/(1+s*u))+1)/2),h={r:o.r*i+r.r*c,g:o.g*i+r.g*c,b:o.b*i+r.b*c,a:o.a*a+r.a*(1-a)};return l(h)},l.readability=function(t,e){var n=l(t),i=l(e),r=n.toRgb(),o=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),u=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:u}},l.isReadable=function(t,e){var n=l.readability(t,e);return n.brightness>125&&n.color>500},l.mostReadable=function(t,e){for(var n=null,i=0,r=!1,o=0;o<e.length;o++){var a=l.readability(t,e[o]),s=a.brightness>125&&a.color>500,u=a.brightness/125*3+a.color/500;(s&&!r||s&&r&&u>i||!s&&!r&&u>i)&&(r=s,i=u,n=l(e[o]))}return n};var S=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},E=l.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(S);function C(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function L(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=o(e,a(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function D(t){return o(1,a(0,t))}function A(t){return parseInt(t,16)}function P(t){return 1==t.length?"0"+t:""+t}function I(t){return t<=1&&(t=100*t+"%"),t}function z(t){return A(t)/255}var F,R,O,Y=(R="[\\s|\\(]+("+(F="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",O="[\\s|\\(]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",{rgb:new RegExp("rgb"+R),rgba:new RegExp("rgba"+O),hsl:new RegExp("hsl"+R),hsla:new RegExp("hsla"+O),hsv:new RegExp("hsv"+R),hsva:new RegExp("hsva"+O),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=l}(),t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))})?i.apply(e,r):i)||(t.exports=o)}()},3379:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},a=[],s=0;s<t.length;s++){var l=t[s],u=i.base?l[0]+i.base:l[0],c=o[u]||0,h="".concat(u," ").concat(c);o[u]=c+1;var d=n(h),f={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(e[d].references++,e[d].updater(f)):e.push({identifier:h,updater:r(f,i),references:1}),a.push(h)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var l=i(t,r),u=0;u<o.length;u++){var c=n(o[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=l}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},3565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i=n.css,r=n.media,o=n.sourceMap;r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},1311:function(t,e,n){t.exports=function(){var t="1.13.1",e="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||Function("return this")()||{},i=Array.prototype,r=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,a=i.push,s=i.slice,l=r.toString,u=r.hasOwnProperty,c="undefined"!=typeof ArrayBuffer,h="undefined"!=typeof DataView,d=Array.isArray,f=Object.keys,p=Object.create,m=c&&ArrayBuffer.isView,_=isNaN,g=isFinite,y=!{toString:null}.propertyIsEnumerable("toString"),v=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],x=Math.pow(2,53)-1;function b(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var o=Array(e+1);for(r=0;r<e;r++)o[r]=arguments[r];return o[e]=i,t.apply(this,o)}}function w(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function M(t){return void 0===t}function T(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)}function k(t){var e="[object "+t+"]";return function(t){return l.call(t)===e}}var S=k("String"),E=k("Number"),C=k("Date"),L=k("RegExp"),D=k("Error"),A=k("Symbol"),P=k("ArrayBuffer"),I=k("Function"),z=e.document&&e.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof z&&(I=function(t){return"function"==typeof t||!1});var F=I,R=k("Object"),O=h&&R(new DataView(new ArrayBuffer(8))),Y="undefined"!=typeof Map&&R(new Map),N=k("DataView"),B=O?function(t){return null!=t&&F(t.getInt8)&&P(t.buffer)}:N,j=d||k("Array");function U(t,e){return null!=t&&u.call(t,e)}var $=k("Arguments");!function(){$(arguments)||($=function(t){return U(t,"callee")})}();var H=$;function V(t){return E(t)&&_(t)}function q(t){return function(){return t}}function W(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=x}}function G(t){return function(e){return null==e?void 0:e[t]}}var Z=G("byteLength"),X=W(Z),K=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,J=c?function(t){return m?m(t)&&!B(t):X(t)&&K.test(l.call(t))}:q(!1),Q=G("length");function tt(t,e){e=function(t){for(var e={},n=t.length,i=0;i<n;++i)e[t[i]]=!0;return{contains:function(t){return e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=v.length,i=t.constructor,o=F(i)&&i.prototype||r,a="constructor";for(U(t,a)&&!e.contains(a)&&e.push(a);n--;)(a=v[n])in t&&t[a]!==o[a]&&!e.contains(a)&&e.push(a)}function et(t){if(!w(t))return[];if(f)return f(t);var e=[];for(var n in t)U(t,n)&&e.push(n);return y&&tt(t,e),e}function nt(t,e){var n=et(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var a=n[o];if(e[a]!==r[a]||!(a in r))return!1}return!0}function it(t){return t instanceof it?t:this instanceof it?void(this._wrapped=t):new it(t)}function rt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,Z(t))}it.VERSION=t,it.prototype.value=function(){return this._wrapped},it.prototype.valueOf=it.prototype.toJSON=it.prototype.value,it.prototype.toString=function(){return String(this._wrapped)};var ot="[object DataView]";function at(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&function t(e,n,i,r){e instanceof it&&(e=e._wrapped),n instanceof it&&(n=n._wrapped);var a=l.call(e);if(a!==l.call(n))return!1;if(O&&"[object Object]"==a&&B(e)){if(!B(n))return!1;a=ot}switch(a){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return o.valueOf.call(e)===o.valueOf.call(n);case"[object ArrayBuffer]":case ot:return t(rt(e),rt(n),i,r)}var s="[object Array]"===a;if(!s&&J(e)){if(Z(e)!==Z(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof e||"object"!=typeof n)return!1;var u=e.constructor,c=n.constructor;if(u!==c&&!(F(u)&&u instanceof u&&F(c)&&c instanceof c)&&"constructor"in e&&"constructor"in n)return!1}r=r||[];for(var h=(i=i||[]).length;h--;)if(i[h]===e)return r[h]===n;if(i.push(e),r.push(n),s){if((h=e.length)!==n.length)return!1;for(;h--;)if(!at(e[h],n[h],i,r))return!1}else{var d,f=et(e);if(h=f.length,et(n).length!==h)return!1;for(;h--;)if(!U(n,d=f[h])||!at(e[d],n[d],i,r))return!1}return i.pop(),r.pop(),!0}(t,e,n,i)}function st(t){if(!w(t))return[];var e=[];for(var n in t)e.push(n);return y&&tt(t,e),e}function lt(t){var e=Q(t);return function(n){if(null==n)return!1;var i=st(n);if(Q(i))return!1;for(var r=0;r<e;r++)if(!F(n[t[r]]))return!1;return t!==ft||!F(n[ut])}}var ut="forEach",ct=["clear","delete"],ht=["get","has","set"],dt=ct.concat(ut,ht),ft=ct.concat(ht),pt=["add"].concat(ct,ut,"has"),mt=Y?lt(dt):k("Map"),_t=Y?lt(ft):k("WeakMap"),gt=Y?lt(pt):k("Set"),yt=k("WeakSet");function vt(t){for(var e=et(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}function xt(t){for(var e={},n=et(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e}function bt(t){var e=[];for(var n in t)F(t[n])&&e.push(n);return e.sort()}function wt(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=t(o),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}}var Mt=wt(st),Tt=wt(et),kt=wt(st,!0);function St(t){if(!w(t))return{};if(p)return p(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Et(t){return w(t)?j(t)?t.slice():Mt({},t):t}function Ct(t){return j(t)?t:[t]}function Lt(t){return it.toPath(t)}function Dt(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0}function At(t,e,n){var i=Dt(t,Lt(e));return M(i)?n:i}function Pt(t){return t}function It(t){return t=Tt({},t),function(e){return nt(e,t)}}function zt(t){return t=Lt(t),function(e){return Dt(e,t)}}function Ft(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}}function Rt(t,e,n){return null==t?Pt:F(t)?Ft(t,e,n):w(t)&&!j(t)?It(t):zt(t)}function Ot(t,e){return Rt(t,e,1/0)}function Yt(t,e,n){return it.iteratee!==Ot?it.iteratee(t,e):Rt(t,e,n)}function Nt(){}function Bt(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}it.toPath=Ct,it.iteratee=Ot;var jt=Date.now||function(){return(new Date).getTime()};function Ut(t){var e=function(e){return t[e]},n="(?:"+et(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}}var $t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ht=Ut($t),Vt=Ut(xt($t)),qt=it.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Wt=/(.)^/,Gt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Zt=/\\|'|\r|\n|\u2028|\u2029/g;function Xt(t){return"\\"+Gt[t]}var Kt=/^\s*(\w|\$)+\s*$/,Jt=0;function Qt(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=St(t.prototype),a=t.apply(o,r);return w(a)?a:o}var te=b((function(t,e){var n=te.placeholder,i=function(){for(var r=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===n?arguments[r++]:e[s];for(;r<arguments.length;)a.push(arguments[r++]);return Qt(t,i,this,this,a)};return i}));te.placeholder=it;var ee=b((function(t,e,n){if(!F(t))throw new TypeError("Bind must be called on a function");var i=b((function(r){return Qt(t,i,e,this,n.concat(r))}));return i})),ne=W(Q);function ie(t,e,n,i){if(i=i||[],e||0===e){if(e<=0)return i.concat(t)}else e=1/0;for(var r=i.length,o=0,a=Q(t);o<a;o++){var s=t[o];if(ne(s)&&(j(s)||H(s)))if(e>1)ie(s,e-1,n,i),r=i.length;else for(var l=0,u=s.length;l<u;)i[r++]=s[l++];else n||(i[r++]=s)}return i}var re=b((function(t,e){var n=(e=ie(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=ee(t[i],t)}return t})),oe=b((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),ae=te(oe,it,1);function se(t){return function(){return!t.apply(this,arguments)}}function le(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var ue=te(le,2);function ce(t,e,n){e=Yt(e,n);for(var i,r=et(t),o=0,a=r.length;o<a;o++)if(e(t[i=r[o]],i,t))return i}function he(t){return function(e,n,i){n=Yt(n,i);for(var r=Q(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(n(e[o],o,e))return o;return-1}}var de=he(1),fe=he(-1);function pe(t,e,n,i){for(var r=(n=Yt(n,i,1))(e),o=0,a=Q(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<r?o=s+1:a=s}return o}function me(t,e,n){return function(i,r,o){var a=0,l=Q(i);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+l,a):l=o>=0?Math.min(o+1,l):o+l+1;else if(n&&o&&l)return i[o=n(i,r)]===r?o:-1;if(r!=r)return(o=e(s.call(i,a,l),V))>=0?o+a:-1;for(o=t>0?a:l-1;o>=0&&o<l;o+=t)if(i[o]===r)return o;return-1}}var _e=me(1,de,pe),ge=me(-1,fe);function ye(t,e,n){var i=(ne(t)?de:ce)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}function ve(t,e,n){var i,r;if(e=Ft(e,n),ne(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=et(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t}function xe(t,e,n){e=Yt(e,n);for(var i=!ne(t)&&et(t),r=(i||t).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=e(t[s],s,t)}return o}function be(t){var e=function(e,n,i,r){var o=!ne(e)&&et(e),a=(o||e).length,s=t>0?0:a-1;for(r||(i=e[o?o[s]:s],s+=t);s>=0&&s<a;s+=t){var l=o?o[s]:s;i=n(i,e[l],l,e)}return i};return function(t,n,i,r){var o=arguments.length>=3;return e(t,Ft(n,r,4),i,o)}}var we=be(1),Me=be(-1);function Te(t,e,n){var i=[];return e=Yt(e,n),ve(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function ke(t,e,n){e=Yt(e,n);for(var i=!ne(t)&&et(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(!e(t[a],a,t))return!1}return!0}function Se(t,e,n){e=Yt(e,n);for(var i=!ne(t)&&et(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(e(t[a],a,t))return!0}return!1}function Ee(t,e,n,i){return ne(t)||(t=vt(t)),("number"!=typeof n||i)&&(n=0),_e(t,e,n)>=0}var Ce=b((function(t,e,n){var i,r;return F(e)?r=e:(e=Lt(e),i=e.slice(0,-1),e=e[e.length-1]),xe(t,(function(t){var o=r;if(!o){if(i&&i.length&&(t=Dt(t,i)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function Le(t,e){return xe(t,zt(e))}function De(t,e,n){var i,r,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=ne(t)?t:vt(t)).length;s<l;s++)null!=(i=t[s])&&i>o&&(o=i);else e=Yt(e,n),ve(t,(function(t,n,i){((r=e(t,n,i))>a||r===-1/0&&o===-1/0)&&(o=t,a=r)}));return o}function Ae(t,e,n){if(null==e||n)return ne(t)||(t=vt(t)),t[Bt(t.length-1)];var i=ne(t)?Et(t):vt(t),r=Q(i);e=Math.max(Math.min(e,r),0);for(var o=r-1,a=0;a<e;a++){var s=Bt(a,o),l=i[a];i[a]=i[s],i[s]=l}return i.slice(0,e)}function Pe(t,e){return function(n,i,r){var o=e?[[],[]]:{};return i=Yt(i,r),ve(n,(function(e,r){var a=i(e,r,n);t(o,e,a)})),o}}var Ie=Pe((function(t,e,n){U(t,n)?t[n].push(e):t[n]=[e]})),ze=Pe((function(t,e,n){t[n]=e})),Fe=Pe((function(t,e,n){U(t,n)?t[n]++:t[n]=1})),Re=Pe((function(t,e,n){t[n?0:1].push(e)}),!0),Oe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ye(t,e,n){return e in n}var Ne=b((function(t,e){var n={},i=e[0];if(null==t)return n;F(i)?(e.length>1&&(i=Ft(i,e[1])),e=st(t)):(i=Ye,e=ie(e,!1,!1),t=Object(t));for(var r=0,o=e.length;r<o;r++){var a=e[r],s=t[a];i(s,a,t)&&(n[a]=s)}return n})),Be=b((function(t,e){var n,i=e[0];return F(i)?(i=se(i),e.length>1&&(n=e[1])):(e=xe(ie(e,!1,!1),String),i=function(t,n){return!Ee(e,n)}),Ne(t,i,n)}));function je(t,e,n){return s.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function Ue(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:je(t,t.length-e)}function $e(t,e,n){return s.call(t,null==e||n?1:e)}var He=b((function(t,e){return e=ie(e,!0,!0),Te(t,(function(t){return!Ee(e,t)}))})),Ve=b((function(t,e){return He(t,e)}));function qe(t,e,n,i){T(e)||(i=n,n=e,e=!1),null!=n&&(n=Yt(n,i));for(var r=[],o=[],a=0,s=Q(t);a<s;a++){var l=t[a],u=n?n(l,a,t):l;e&&!n?(a&&o===u||r.push(l),o=u):n?Ee(o,u)||(o.push(u),r.push(l)):Ee(r,l)||r.push(l)}return r}var We=b((function(t){return qe(ie(t,!0,!0))}));function Ge(t){for(var e=t&&De(t,Q).length||0,n=Array(e),i=0;i<e;i++)n[i]=Le(t,i);return n}var Ze=b(Ge);function Xe(t,e){return t._chain?it(e).chain():e}function Ke(t){return ve(bt(t),(function(e){var n=it[e]=t[e];it.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),Xe(this,n.apply(it,t))}})),it}ve(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=i[t];it.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),Xe(this,n)}})),ve(["concat","join","slice"],(function(t){var e=i[t];it.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Xe(this,t)}}));var Je=Ke({__proto__:null,VERSION:t,restArguments:b,isObject:w,isNull:function(t){return null===t},isUndefined:M,isBoolean:T,isElement:function(t){return!(!t||1!==t.nodeType)},isString:S,isNumber:E,isDate:C,isRegExp:L,isError:D,isSymbol:A,isArrayBuffer:P,isDataView:B,isArray:j,isFunction:F,isArguments:H,isFinite:function(t){return!A(t)&&g(t)&&!isNaN(parseFloat(t))},isNaN:V,isTypedArray:J,isEmpty:function(t){if(null==t)return!0;var e=Q(t);return"number"==typeof e&&(j(t)||S(t)||H(t))?0===e:0===Q(et(t))},isMatch:nt,isEqual:function(t,e){return at(t,e)},isMap:mt,isWeakMap:_t,isSet:gt,isWeakSet:yt,keys:et,allKeys:st,values:vt,pairs:function(t){for(var e=et(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},invert:xt,functions:bt,methods:bt,extend:Mt,extendOwn:Tt,assign:Tt,defaults:kt,create:function(t,e){var n=St(t);return e&&Tt(n,e),n},clone:Et,tap:function(t,e){return e(t),t},get:At,has:function(t,e){for(var n=(e=Lt(e)).length,i=0;i<n;i++){var r=e[i];if(!U(t,r))return!1;t=t[r]}return!!n},mapObject:function(t,e,n){e=Yt(e,n);for(var i=et(t),r=i.length,o={},a=0;a<r;a++){var s=i[a];o[s]=e(t[s],s,t)}return o},identity:Pt,constant:q,noop:Nt,toPath:Ct,property:zt,propertyOf:function(t){return null==t?Nt:function(e){return At(t,e)}},matcher:It,matches:It,times:function(t,e,n){var i=Array(Math.max(0,t));e=Ft(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},random:Bt,now:jt,escape:Ht,unescape:Vt,templateSettings:qt,template:function(t,e,n){!e&&n&&(e=n),e=kt({},e,it.templateSettings);var i=RegExp([(e.escape||Wt).source,(e.interpolate||Wt).source,(e.evaluate||Wt).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,(function(e,n,i,a,s){return o+=t.slice(r,s).replace(Zt,Xt),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e})),o+="';\n";var a,s=e.variable;if(s){if(!Kt.test(s))throw new Error("variable is not a bare identifier: "+s)}else o="with(obj||{}){\n"+o+"}\n",s="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(s,"_",o)}catch(t){throw t.source=o,t}var l=function(t){return a.call(this,t,it)};return l.source="function("+s+"){\n"+o+"}",l},result:function(t,e,n){var i=(e=Lt(e)).length;if(!i)return F(n)?n.call(t):n;for(var r=0;r<i;r++){var o=null==t?void 0:t[e[r]];void 0===o&&(o=n,r=i),t=F(o)?o.call(t):o}return t},uniqueId:function(t){var e=++Jt+"";return t?t+e:e},chain:function(t){var e=it(t);return e._chain=!0,e},iteratee:Ot,partial:te,bind:ee,bindAll:re,memoize:function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return U(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},delay:oe,defer:ae,throttle:function(t,e,n){var i,r,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:jt(),i=null,a=t.apply(r,o),i||(r=o=null)},u=function(){var u=jt();s||!1!==n.leading||(s=u);var c=e-(u-s);return r=this,o=arguments,c<=0||c>e?(i&&(clearTimeout(i),i=null),s=u,a=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(l,c)),a};return u.cancel=function(){clearTimeout(i),s=0,i=r=o=null},u},debounce:function(t,e,n){var i,r,o,a,s,l=function(){var u=jt()-r;e>u?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(s,o)),i||(o=s=null))},u=b((function(u){return s=this,o=u,r=jt(),i||(i=setTimeout(l,e),n&&(a=t.apply(s,o))),a}));return u.cancel=function(){clearTimeout(i),i=o=s=null},u},wrap:function(t,e){return te(e,t)},negate:se,compose:function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},before:le,once:ue,findKey:ce,findIndex:de,findLastIndex:fe,sortedIndex:pe,indexOf:_e,lastIndexOf:ge,find:ye,detect:ye,findWhere:function(t,e){return ye(t,It(e))},each:ve,forEach:ve,map:xe,collect:xe,reduce:we,foldl:we,inject:we,reduceRight:Me,foldr:Me,filter:Te,select:Te,reject:function(t,e,n){return Te(t,se(Yt(e)),n)},every:ke,all:ke,some:Se,any:Se,contains:Ee,includes:Ee,include:Ee,invoke:Ce,pluck:Le,where:function(t,e){return Te(t,It(e))},max:De,min:function(t,e,n){var i,r,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=ne(t)?t:vt(t)).length;s<l;s++)null!=(i=t[s])&&i<o&&(o=i);else e=Yt(e,n),ve(t,(function(t,n,i){((r=e(t,n,i))<a||r===1/0&&o===1/0)&&(o=t,a=r)}));return o},shuffle:function(t){return Ae(t,1/0)},sample:Ae,sortBy:function(t,e,n){var i=0;return e=Yt(e,n),Le(xe(t,(function(t,n,r){return{value:t,index:i++,criteria:e(t,n,r)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")},groupBy:Ie,indexBy:ze,countBy:Fe,partition:Re,toArray:function(t){return t?j(t)?s.call(t):S(t)?t.match(Oe):ne(t)?xe(t,Pt):vt(t):[]},size:function(t){return null==t?0:ne(t)?t.length:et(t).length},pick:Ne,omit:Be,first:Ue,head:Ue,take:Ue,initial:je,last:function(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:$e(t,Math.max(0,t.length-e))},rest:$e,tail:$e,drop:$e,compact:function(t){return Te(t,Boolean)},flatten:function(t,e){return ie(t,e,!1)},without:Ve,uniq:qe,unique:qe,union:We,intersection:function(t){for(var e=[],n=arguments.length,i=0,r=Q(t);i<r;i++){var o=t[i];if(!Ee(e,o)){var a;for(a=1;a<n&&Ee(arguments[a],o);a++);a===n&&e.push(o)}}return e},difference:He,unzip:Ge,transpose:Ge,zip:Ze,object:function(t,e){for(var n={},i=0,r=Q(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},range:function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r},chunk:function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(s.call(t,i,i+=e));return n},mixin:Ke,default:it});return Je._=Je,Je}()}}]);