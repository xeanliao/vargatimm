/*! For license information please see main.fb264729e4828ac69a9d.js.LICENSE.txt */
(()=>{var t={9247:(t,e,n)=>{"use strict";t.exports=n.p+"9b4dba5240788b2798e0.jpg"},1039:(t,e,n)=>{"use strict";t.exports=n.p+"0e8b8932c8b712d235f7.jpg"},3595:(t,e,n)=>{"use strict";t.exports=n.p+"974c88f17e4a5d70f8ef.png"},8159:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(271);function r(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),a=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r],l=[n,a],c=[o,a],u=[o,r];return(0,i.yu)([[s,u,c,l,s]],e.properties,{bbox:t,id:e.id})}},1672:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(2322);function r(t){var e=[1/0,1/0,-1/0,-1/0];return(0,i.pZ)(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}r.default=r;const o=r},9705:(t,e,n)=>{"use strict";var i=n(1540);function r(t){var e=[1/0,1/0,-1/0,-1/0];return i.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}r.default=r,e.Z=r},968:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(2322),r=n(271);const o=function(t,e){void 0===e&&(e={});var n=0,o=0,a=0;return(0,i.pZ)(t,(function(t){n+=t[0],o+=t[1],a++}),!0),(0,r.xm)([n/a,o/a],e.properties)}},7269:function(t){t.exports=function(){"use strict";function t(n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=i-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*u/s+h)),Math.min(o,Math.floor(i+(s-l)*u/s+h)),a)}var d=n[i],p=r,f=o;for(e(n,r,i),a(n[o],d)>0&&e(n,r,o);p<f;){for(e(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[r],d)?e(n,r,f):e(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}return function(e,i,r,o,a){t(e,i,r||0,o||e.length-1,a||n)}}()},67:(t,e,n)=>{"use strict";t.exports=r,t.exports.default=r;var i=n(7269);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){r||(r=m(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],l(r,t.leaf?i(o):o);return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,n,r,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(a=e+Math.ceil((n-e)/r/2)*r,i(t,a,e,n,o),s.push(e,a,a,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!f(t,e))return n;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],f(t,s=e.leaf?i(a):a)&&(e.leaf?n.push(a):p(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!f(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],f(t,a=e.leaf?n(o):o)){if(e.leaf||p(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,a,s=this.data,l=this.toBBox(t),c=[],u=[];s||c.length;){if(s||(s=c.pop(),i=c[c.length-1],n=u.pop(),a=!0),s.leaf&&-1!==(r=o(t,s.children,e)))return s.children.splice(r,1),c.push(s),this._condense(c),this;a||s.leaf||!p(s,l)?i?(n++,s=i.children[n],a=!1):s=null:(c.push(s),u.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return a(r=m(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=m([])).leaf=!1,r.height=i;var l,c,u,h,d=Math.ceil(o/s),p=d*Math.ceil(Math.sqrt(s));for(g(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(g(t,l,u=Math.min(l+p-1,n),d,this.compareMinY),c=l;c<=u;c+=d)h=Math.min(c+d-1,u),r.children.push(this._build(t,c,h,i-1));return a(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,s,l,c,u,d,p,f;i.push(e),!e.leaf&&i.length-1!==n;){for(u=d=1/0,r=0,o=e.children.length;r<o;r++)l=h(a=e.children[r]),p=t,f=a,(c=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l)<d?(d=c,u=l<u?l:u,s=a):c===d&&l<u&&(u=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),l(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=m(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,l,c,u,d,p,f,m,g,_,y;for(c=u=1/0,i=e;i<=n-e;i++)p=r=s(t,0,i,this.toBBox),f=o=s(t,i,n,this.toBBox),void 0,void 0,void 0,void 0,m=Math.max(p.minX,f.minX),g=Math.max(p.minY,f.minY),_=Math.min(p.maxX,f.maxX),y=Math.min(p.maxY,f.maxY),a=Math.max(0,_-m)*Math.max(0,y-g),l=h(r)+h(o),a<c?(c=a,d=i,u=l<u?l:u):a===c&&l<u&&(u=l,d=i);return d},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:c,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,c=s(t,0,e,a),u=s(t,n-e,n,a),h=d(c)+d(u);for(r=e;r<n-e;r++)o=t.children[r],l(c,t.leaf?a(o):o),h+=d(c);for(r=n-e-1;r>=e;r--)o=t.children[r],l(u,t.leaf?a(o):o),h+=d(u);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},7219:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(1672),r=n(8159);const o=function(t){return(0,r.Z)((0,i.Z)(t))}},271:(t,e,n)=>{"use strict";function i(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function r(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!l(t[0])||!l(t[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var r=0,o=t;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},e,n)}function s(t,e,n){return void 0===n&&(n={}),i({type:"MultiPoint",coordinates:t},e,n)}function l(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}n.d(e,{zL:()=>i,xm:()=>r,yu:()=>o,Tu:()=>a,ot:()=>s})},4102:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function i(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var r=0,o=t;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function o(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,i)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function l(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function c(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function u(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t*i}function h(t,n){void 0===n&&(n="kilometers");var i=e.factors[n];if(!i)throw new Error(n+" units is invalid");return t/i}function d(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return i(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return l(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=i,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.polygon=r,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=l,e.multiPolygon=c,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=u,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return d(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=d,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return u(h(t,e),n)},e.convertArea=function(t,n,i){if(void 0===n&&(n="meters"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[n];if(!r)throw new Error("invalid original units");var o=e.areaFactors[i];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},2322:(t,e,n)=>{"use strict";n.d(e,{pZ:()=>r,Lo:()=>o,nG:()=>a});var i=n(271);function r(t,e,n){if(null!==t)for(var i,o,a,s,l,c,u,h,d=0,p=0,f=t.type,m="FeatureCollection"===f,g="Feature"===f,_=m?t.features.length:1,y=0;y<_;y++){l=(h=!!(u=m?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<l;v++){var b=0,x=0;if(null!==(s=h?u.geometries[v]:u)){c=s.coordinates;var w=s.type;switch(d=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,y,b,x))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],p,y,b,x))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(o=0;o<c[i].length-d;o++){if(!1===e(c[i][o],p,y,b,x))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(x=0,o=0;o<c[i].length;o++){for(a=0;a<c[i][o].length-d;a++){if(!1===e(c[i][o][a],p,y,b,x))return!1;p++}x++}b++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e,n,i){var o=n;return r(t,(function(t,i,r,a,s){o=0===i&&void 0===n?t:e(o,t,i,r,a,s)}),i),o}function a(t,e){!function(t,e){var n,i,r,o,a,s,l,c,u,h,d=0,p="FeatureCollection"===t.type,f="Feature"===t.type,m=p?t.features.length:1;for(n=0;n<m;n++){for(s=p?t.features[n].geometry:f?t.geometry:t,c=p?t.features[n].properties:f?t.properties:{},u=p?t.features[n].bbox:f?t.bbox:void 0,h=p?t.features[n].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,d,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,c,u,h))return!1;d++}}(t,(function(t,n,r,o,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e((0,i.zL)(t,r,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var u={type:s,coordinates:t.coordinates[c]};if(!1===e((0,i.zL)(u,r),n,c))return!1}}))}},1540:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4102);function r(t,e,n){if(null!==t)for(var i,o,a,s,l,c,u,h,d=0,p=0,f=t.type,m="FeatureCollection"===f,g="Feature"===f,_=m?t.features.length:1,y=0;y<_;y++){l=(h=!!(u=m?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var v=0;v<l;v++){var b=0,x=0;if(null!==(s=h?u.geometries[v]:u)){c=s.coordinates;var w=s.type;switch(d=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,y,b,x))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],p,y,b,x))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(o=0;o<c[i].length-d;o++){if(!1===e(c[i][o],p,y,b,x))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(x=0,o=0;o<c[i].length;o++){for(a=0;a<c[i][o].length-d;a++){if(!1===e(c[i][o][a],p,y,b,x))return!1;p++}x++}b++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,i,r,o,a,s,l,c,u,h,d=0,p="FeatureCollection"===t.type,f="Feature"===t.type,m=p?t.features.length:1;for(n=0;n<m;n++){for(s=p?t.features[n].geometry:f?t.geometry:t,c=p?t.features[n].properties:f?t.properties:{},u=p?t.features[n].bbox:f?t.bbox:void 0,h=p?t.features[n].id:f?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=l?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,d,c,u,h))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],d,c,u,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,d,c,u,h))return!1;d++}}function l(t,e){s(t,(function(t,n,r,o,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(i.feature(t,r,{bbox:o,id:a}),n,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var u={type:s,coordinates:t.coordinates[c]};if(!1===e(i.feature(u,r),n,c))return!1}}))}function c(t,e){l(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,c=0,u=0,h=0;return!1!==r(t,(function(r,s,d,p,f){if(void 0===l||n>c||p>u||f>h)return l=r,c=n,u=p,h=f,void(a=0);var m=i.lineString([l,r],t.properties);if(!1===e(m,n,o,f,a))return!1;a++,l=r}))&&void 0}}}))}function u(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(i.lineString(a[s],t.properties),n,r,s))return!1}}}))}e.coordAll=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},e.coordEach=r,e.coordReduce=function(t,e,n,i){var o=n;return r(t,(function(t,i,r,a,s){o=0===i&&void 0===n?t:e(o,t,i,r,a,s)}),i),o},e.featureEach=a,e.featureReduce=function(t,e,n){var i=n;return a(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.findPoint=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return i.point(c,l,e);case"MultiPoint":return o<0&&(o=c.length+o),i.point(c[o],l,e);case"LineString":return s<0&&(s=c.length+s),i.point(c[s],l,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),i.point(c[a][s],l,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),i.point(c[o][s],l,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),i.point(c[o][a][s],l,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!i.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),i.lineString([c[s],c[s+1]],l,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),i.lineString([c[a][s],c[a][s+1]],l,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),i.lineString([c[o][s],c[o][s+1]],l,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),i.lineString([c[o][a][s],c[o][a][s+1]],l,e)}throw new Error("geojson is invalid")},e.flattenEach=l,e.flattenReduce=function(t,e,n){var i=n;return l(t,(function(t,r,o){i=0===r&&0===o&&void 0===n?t:e(i,t,r,o)})),i},e.geomEach=s,e.geomReduce=function(t,e,n){var i=n;return s(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)})),i},e.lineEach=u,e.lineReduce=function(t,e,n){var i=n;return u(t,(function(t,r,o,a){i=0===r&&void 0===n?t:e(i,t,r,o,a)})),i},e.propEach=o,e.propReduce=function(t,e,n){var i=n;return o(t,(function(t,r){i=0===r&&void 0===n?t:e(i,t,r)})),i},e.segmentEach=c,e.segmentReduce=function(t,e,n){var i=n,r=!1;return c(t,(function(t,o,a,s,l){i=!1===r&&void 0===n?t:e(i,t,o,a,s,l),r=!0})),i}},9538:function(t){t.exports=function(){"use strict";function t(n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=i-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*u/s+h)),Math.min(o,Math.floor(i+(s-l)*u/s+h)),a)}var d=n[i],p=r,f=o;for(e(n,r,i),a(n[o],d)>0&&e(n,r,o);p<f;){for(e(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[r],d)?e(n,r,f):e(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}return function(e,i,r,o,a){t(e,i,r||0,o||e.length-1,a||n)}}()},4860:(t,e,n)=>{"use strict";t.exports=r,t.exports.default=r;var i=n(9538);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,i,r){r||(r=m(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],l(r,t.leaf?i(o):o);return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function m(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,n,r,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(a=e+Math.ceil((n-e)/r/2)*r,i(t,a,e,n,o),s.push(e,a,a,n))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!f(t,e))return n;for(var r,o,a,s,l=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],f(t,s=e.leaf?i(a):a)&&(e.leaf?n.push(a):p(t,s)?this._all(a,n):l.push(a));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!f(t,e))return!1;for(var i,r,o,a,s=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],f(t,a=e.leaf?n(o):o)){if(e.leaf||p(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,a,s=this.data,l=this.toBBox(t),c=[],u=[];s||c.length;){if(s||(s=c.pop(),i=c[c.length-1],n=u.pop(),a=!0),s.leaf&&-1!==(r=o(t,s.children,e)))return s.children.splice(r,1),c.push(s),this._condense(c),this;a||s.leaf||!p(s,l)?i?(n++,s=i.children[n],a=!1):s=null:(c.push(s),u.push(n),n=0,i=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:u,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return a(r=m(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=m([])).leaf=!1,r.height=i;var l,c,u,h,d=Math.ceil(o/s),p=d*Math.ceil(Math.sqrt(s));for(g(t,e,n,p,this.compareMinX),l=e;l<=n;l+=p)for(g(t,l,u=Math.min(l+p-1,n),d,this.compareMinY),c=l;c<=u;c+=d)h=Math.min(c+d-1,u),r.children.push(this._build(t,c,h,i-1));return a(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,s,l,c,u,d,p,f;i.push(e),!e.leaf&&i.length-1!==n;){for(u=d=1/0,r=0,o=e.children.length;r<o;r++)l=h(a=e.children[r]),p=t,f=a,(c=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-l)<d?(d=c,u=l<u?l:u,s=a):c===d&&l<u&&(u=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),l(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=m(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=m([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,l,c,u,d,p,f,m,g,_,y;for(c=u=1/0,i=e;i<=n-e;i++)p=r=s(t,0,i,this.toBBox),f=o=s(t,i,n,this.toBBox),void 0,void 0,void 0,void 0,m=Math.max(p.minX,f.minX),g=Math.max(p.minY,f.minY),_=Math.min(p.maxX,f.maxX),y=Math.min(p.maxY,f.maxY),a=Math.max(0,_-m)*Math.max(0,y-g),l=h(r)+h(o),a<c?(c=a,d=i,u=l<u?l:u):a===c&&l<u&&(u=l,d=i);return d},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:c,r=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,c=s(t,0,e,a),u=s(t,n-e,n,a),h=d(c)+d(u);for(r=e;r<n-e;r++)o=t.children[r],l(c,t.leaf?a(o):o),h+=d(c);for(r=n-e-1;r>=e;r--)o=t.children[r],l(u,t.leaf?a(o):o),h+=d(u);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)l(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},9669:(t,e,n)=>{t.exports=n(1609)},5448:(t,e,n)=>{"use strict";var i=n(4867),r=n(6026),o=n(4372),a=n(5327),s=n(4097),l=n(4109),c=n(7985),u=n(5061);t.exports=function(t){return new Promise((function(e,n){var h=t.data,d=t.headers;i.isFormData(h)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";d.Authorization="Basic "+btoa(f+":"+m)}var g=s(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),a(g,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,o={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:t,request:p};r(e,n,o),p=null}},p.onabort=function(){p&&(n(u("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(u(e,t,"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var _=(t.withCredentials||c(g))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;_&&(d[t.xsrfHeaderName]=_)}if("setRequestHeader"in p&&i.forEach(d,(function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete d[e]:p.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),n(t),p=null)})),h||(h=null),p.send(h)}))}},1609:(t,e,n)=>{"use strict";var i=n(4867),r=n(1849),o=n(321),a=n(7185);function s(t){var e=new o(t),n=r(o.prototype.request,e);return i.extend(n,o.prototype,e),i.extend(n,e),n}var l=s(n(5655));l.Axios=o,l.create=function(t){return s(a(l.defaults,t))},l.Cancel=n(5263),l.CancelToken=n(4972),l.isCancel=n(6502),l.all=function(t){return Promise.all(t)},l.spread=n(8713),l.isAxiosError=n(6268),t.exports=l,t.exports.default=l},5263:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},4972:(t,e,n)=>{"use strict";var i=n(5263);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new i(t),e(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r((function(e){t=e})),cancel:t}},t.exports=r},6502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,n)=>{"use strict";var i=n(4867),r=n(5327),o=n(782),a=n(3572),s=n(7185);function l(t){this.defaults=t,this.interceptors={request:new o,response:new o}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},l.prototype.getUri=function(t){return t=s(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,n,i){return this.request(s(i||{},{method:t,url:e,data:n}))}})),t.exports=l},782:(t,e,n)=>{"use strict";var i=n(4867);function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=r},4097:(t,e,n)=>{"use strict";var i=n(1793),r=n(7303);t.exports=function(t,e){return t&&!i(e)?r(t,e):e}},5061:(t,e,n)=>{"use strict";var i=n(481);t.exports=function(t,e,n,r,o){var a=new Error(t);return i(a,e,n,r,o)}},3572:(t,e,n)=>{"use strict";var i=n(4867),r=n(8527),o=n(6502),a=n(5655);function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return s(t),e.data=r(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(s(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},7185:(t,e,n)=>{"use strict";var i=n(4867);t.exports=function(t,e){e=e||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function c(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=l(void 0,t[r])):n[r]=l(t[r],e[r])}i.forEach(r,(function(t){i.isUndefined(e[t])||(n[t]=l(void 0,e[t]))})),i.forEach(o,c),i.forEach(a,(function(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=l(void 0,t[r])):n[r]=l(void 0,e[r])})),i.forEach(s,(function(i){i in e?n[i]=l(t[i],e[i]):i in t&&(n[i]=l(void 0,t[i]))}));var u=r.concat(o).concat(a).concat(s),h=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===u.indexOf(t)}));return i.forEach(h,c),n}},6026:(t,e,n)=>{"use strict";var i=n(5061);t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},8527:(t,e,n)=>{"use strict";var i=n(4867);t.exports=function(t,e,n){return i.forEach(n,(function(n){t=n(t,e)})),t}},5655:(t,e,n)=>{"use strict";var i=n(4867),r=n(6016),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,l={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=n(5448)),s),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(t){l.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){l.headers[t]=i.merge(o)})),t.exports=l},1849:t=>{"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},5327:(t,e,n)=>{"use strict";var i=n(4867);function r(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,(function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))})))})),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},7303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},4372:(t,e,n)=>{"use strict";var i=n(4867);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,r,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},6268:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},7985:(t,e,n)=>{"use strict";var i=n(4867);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},6016:(t,e,n)=>{"use strict";var i=n(4867);t.exports=function(t,e){i.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))}},4109:(t,e,n)=>{"use strict";var i=n(4867),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(i.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),n=i.trim(t.substr(o+1)),e){if(a[e]&&r.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},8713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},4867:(t,e,n)=>{"use strict";var i=n(1849),r=Object.prototype.toString;function o(t){return"[object Array]"===r.call(t)}function a(t){return void 0===t}function s(t){return null!==t&&"object"==typeof t}function l(t){if("[object Object]"!==r.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===r.call(t)}function u(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===r.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isPlainObject:l,isUndefined:a,isDate:function(t){return"[object Date]"===r.call(t)},isFile:function(t){return"[object File]"===r.call(t)},isBlob:function(t){return"[object Blob]"===r.call(t)},isFunction:c,isStream:function(t){return s(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function t(){var e={};function n(n,i){l(e[i])&&l(n)?e[i]=t(e[i],n):l(n)?e[i]=t({},n):o(n)?e[i]=n.slice():e[i]=n}for(var i=0,r=arguments.length;i<r;i++)u(arguments[i],n);return e},extend:function(t,e,n){return u(e,(function(e,r){t[r]=n&&"function"==typeof e?i(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},5086:(t,e,n)=>{"use strict";n.d(e,{gk:()=>Xt,ZP:()=>Kt,TI:()=>Wt,nY:()=>Zt});var i=n(2316),r=n.n(i),o=n(7588),a=n.n(o),s=n(3360),l=n.n(s),c=n(6624),u=n.n(c),h=n(6486),d=n(3609),p=n.n(d);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),t}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function b(t,e){return b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},b(t,e)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return x(t)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return w(this,n)}}function M(t,e,n){return M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}},M(t,e,n||t)}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function S(){return"rtl"===p()("html").attr("dir")}function k(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,e=arguments.length>1?arguments[1]:void 0,n="",i="0123456789abcdefghijklmnopqrstuvwxyz",r=i.length,o=0;o<t;o++)n+=i[Math.floor(Math.random()*r)];return e?"".concat(n,"-").concat(e):n}function C(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function I(t){var e,n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},i=document.createElement("div");for(var r in n)void 0!==i.style[r]&&(e=n[r]);return e||(setTimeout((function(){t.triggerHandler("transitionend",[t])}),1),"transitionend")}function L(t,e){var n="complete"===document.readyState,i=(n?"_didLoad":"load")+".zf.util.onLoad",r=function(){return t.triggerHandler(i)};return t&&(e&&t.one(i,e),n?setTimeout(r):p()(window).one("load",r)),i}function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ignoreLeaveWindow,i=void 0!==n&&n,r=e.ignoreReappear,o=void 0!==r&&r;return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var s=t.bind.apply(t,[this,e].concat(r));if(null!==e.relatedTarget)return s();setTimeout((function(){if(!i&&document.hasFocus&&!document.hasFocus())return s();o||p()(document).one("mouseenter",(function(t){p()(e.currentTarget).has(t.target).length||(e.relatedTarget=t.target,s())}))}),0)}}window.matchMedia||(window.matchMedia=function(){var t=window.styleMedia||window.media;if(!t){var e,n=document.createElement("style"),i=document.getElementsByTagName("script")[0];n.type="text/css",n.id="matchmediajs-test",i?i.parentNode.insertBefore(n,i):document.head.appendChild(n),e="getComputedStyle"in window&&window.getComputedStyle(n,null)||n.currentStyle,t={matchMedium:function(t){var i="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return n.styleSheet?n.styleSheet.cssText=i:n.textContent=i,"1px"===e.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}());var A={queries:[],current:"",_init:function(){if(!0===this.isInitialized)return this;this.isInitialized=!0,p()("meta.foundation-mq").length||p()('<meta class="foundation-mq" name="foundation-mq" content>').appendTo(document.head);var t,e,n,i=p()(".foundation-mq").css("font-family");for(var r in n=void 0,n={},t="string"!=typeof(e=i)?n:(e=e.trim().slice(1,-1))?(n=e.split("&").reduce((function(t,e){var n=e.replace(/\+/g," ").split("="),i=n[0],r=n[1];return i=decodeURIComponent(i),r=void 0===r?null:decodeURIComponent(r),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]:t[i]=r,t}),{}),n):n,this.queries=[],t)t.hasOwnProperty(r)&&this.queries.push({name:r,value:"only screen and (min-width: ".concat(t[r],")")});this.current=this._getCurrentSize(),this._watcher()},_reInit:function(){this.isInitialized=!1,this._init()},atLeast:function(t){var e=this.get(t);return!!e&&window.matchMedia(e).matches},only:function(t){return t===this._getCurrentSize()},upTo:function(t){var e=this.next(t);return!e||!this.atLeast(e)},is:function(t){var e,n,i=(e=t.trim().split(" ").filter((function(t){return!!t.length})),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,n)||function(t,e){if(t){if("string"==typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=i[0],o=i[1],a=void 0===o?"":o;if("only"===a)return this.only(r);if(!a||"up"===a)return this.atLeast(r);if("down"===a)return this.upTo(r);throw new Error('\n      Invalid breakpoint passed to MediaQuery.is().\n      Expected a breakpoint name formatted like "<size> <modifier>", got "'.concat(t,'".\n    '))},get:function(t){for(var e in this.queries)if(this.queries.hasOwnProperty(e)){var n=this.queries[e];if(t===n.name)return n.value}return null},next:function(t){var e=this,n=this.queries.findIndex((function(n){return e._getQueryName(n)===t}));if(-1===n)throw new Error('\n        Unknown breakpoint "'.concat(t,'" passed to MediaQuery.next().\n        Ensure it is present in your Sass "$breakpoints" setting.\n      '));var i=this.queries[n+1];return i?i.name:null},_getQueryName:function(t){if("string"==typeof t)return t;if("object"===f(t))return t.name;throw new TypeError('\n      Invalid value passed to MediaQuery._getQueryName().\n      Expected a breakpoint name (String) or a breakpoint query (Object), got "'.concat(t,'" (').concat(f(t),")\n    "))},_getCurrentSize:function(){for(var t,e=0;e<this.queries.length;e++){var n=this.queries[e];window.matchMedia(n.value).matches&&(t=n)}return t&&this._getQueryName(t)},_watcher:function(){var t=this;p()(window).on("resize.zf.trigger",(function(){var e=t._getCurrentSize(),n=t.current;e!==n&&(t.current=e,p()(window).trigger("changed.zf.mediaquery",[e,n]))}))}},P={version:"6.7.4",_plugins:{},_uuids:[],plugin:function(t,e){var n=e||z(t),i=N(n);this._plugins[i]=this[n]=t},registerPlugin:function(t,e){var n=e?N(e):z(t.constructor).toLowerCase();t.uuid=k(6,n),t.$element.attr("data-".concat(n))||t.$element.attr("data-".concat(n),t.uuid),t.$element.data("zfPlugin")||t.$element.data("zfPlugin",t),t.$element.trigger("init.zf.".concat(n)),this._uuids.push(t.uuid)},unregisterPlugin:function(t){var e=N(z(t.$element.data("zfPlugin").constructor));for(var n in this._uuids.splice(this._uuids.indexOf(t.uuid),1),t.$element.removeAttr("data-".concat(e)).removeData("zfPlugin").trigger("destroyed.zf.".concat(e)),t)"function"==typeof t[n]&&(t[n]=null)},reInit:function(t){var e=t instanceof p();try{if(e)t.each((function(){p()(this).data("zfPlugin")._init()}));else{var n=f(t),i=this;({object:function(t){t.forEach((function(t){t=N(t),p()("[data-"+t+"]").foundation("_init")}))},string:function(){t=N(t),p()("[data-"+t+"]").foundation("_init")},undefined:function(){this.object(Object.keys(i._plugins))}})[n](t)}}catch(t){console.error(t)}finally{return t}},reflow:function(t,e){void 0===e?e=Object.keys(this._plugins):"string"==typeof e&&(e=[e]);var n=this;p().each(e,(function(e,i){var r=n._plugins[i];p()(t).find("[data-"+i+"]").addBack("[data-"+i+"]").filter((function(){return void 0===p()(this).data("zfPlugin")})).each((function(){var t=p()(this),e={reflow:!0};t.attr("data-options")&&t.attr("data-options").split(";").forEach((function(t){var n,i=t.split(":").map((function(t){return t.trim()}));i[0]&&(e[i[0]]="true"===(n=i[1])||"false"!==n&&(isNaN(1*n)?n:parseFloat(n)))}));try{t.data("zfPlugin",new r(p()(this),e))}catch(t){console.error(t)}finally{return}}))}))},getFnName:z,addToJquery:function(){return p().fn.foundation=function(t){var e=f(t),n=p()(".no-js");if(n.length&&n.removeClass("no-js"),"undefined"===e)A._init(),P.reflow(this);else{if("string"!==e)throw new TypeError("We're sorry, ".concat(e," is not a valid parameter. You must use a string representing the method you wish to invoke."));var i=Array.prototype.slice.call(arguments,1),r=this.data("zfPlugin");if(void 0===r||void 0===r[t])throw new ReferenceError("We're sorry, '"+t+"' is not an available method for "+(r?z(r):"this element")+".");1===this.length?r[t].apply(r,i):this.each((function(e,n){r[t].apply(p()(n).data("zfPlugin"),i)}))}return this},p()}};function z(t){if(void 0===Function.prototype.name){var e=/function\s([^(]{1,})\(/.exec(t.toString());return e&&e.length>1?e[1].trim():""}return void 0===t.prototype?t.constructor.name:t.prototype.constructor.name}function N(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}P.util={throttle:function(t,e){var n=null;return function(){var i=this,r=arguments;null===n&&(n=setTimeout((function(){t.apply(i,r),n=null}),e))}}},window.Foundation=P,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout((function(){t(i=n)}),n-e)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r});var R={ImNotTouchingYou:function(t,e,n,i,r){return 0===O(t,e,n,i,r)},OverlapArea:O,GetDimensions:F,GetExplicitOffsets:function(t,e,n,i,r,o,a){var s,l,c=F(t),u=e?F(e):null;if(null!==u){switch(n){case"top":s=u.offset.top-(c.height+r);break;case"bottom":s=u.offset.top+u.height+r;break;case"left":l=u.offset.left-(c.width+o);break;case"right":l=u.offset.left+u.width+o}switch(n){case"top":case"bottom":switch(i){case"left":l=u.offset.left+o;break;case"right":l=u.offset.left-c.width+u.width-o;break;case"center":l=a?o:u.offset.left+u.width/2-c.width/2+o}break;case"right":case"left":switch(i){case"bottom":s=u.offset.top-r+u.height-c.height;break;case"top":s=u.offset.top+r;break;case"center":s=u.offset.top+r+u.height/2-c.height/2}}}return{top:s,left:l}}};function O(t,e,n,i,r){var o,a,s,l,c=F(t);if(e){var u=F(e);a=u.height+u.offset.top-(c.offset.top+c.height),o=c.offset.top-u.offset.top,s=c.offset.left-u.offset.left,l=u.width+u.offset.left-(c.offset.left+c.width)}else a=c.windowDims.height+c.windowDims.offset.top-(c.offset.top+c.height),o=c.offset.top-c.windowDims.offset.top,s=c.offset.left-c.windowDims.offset.left,l=c.windowDims.width-(c.offset.left+c.width);return a=r?0:Math.min(a,0),o=Math.min(o,0),s=Math.min(s,0),l=Math.min(l,0),n?s+l:i?o+a:Math.sqrt(o*o+a*a+s*s+l*l)}function F(t){if((t=t.length?t[0]:t)===window||t===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var e=t.getBoundingClientRect(),n=t.parentNode.getBoundingClientRect(),i=document.body.getBoundingClientRect(),r=window.pageYOffset,o=window.pageXOffset;return{width:e.width,height:e.height,offset:{top:e.top+r,left:e.left+o},parentDims:{width:n.width,height:n.height,offset:{top:n.top+r,left:n.left+o}},windowDims:{width:i.width,height:i.height,offset:{top:r,left:o}}}}function B(t,e){var n=t.length;function i(){0==--n&&e()}0===n&&e(),t.each((function(){if(this.complete&&void 0!==this.naturalWidth)i();else{var t=new Image,e="load.zf.images error.zf.images";p()(t).one(e,(function t(){p()(this).off(e,t),i()})),t.src=p()(this).attr("src")}}))}var U={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",35:"END",36:"HOME",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},Y={};function j(t){return!!t&&t.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter((function(){return!(!p()(this).is(":visible")||p()(this).attr("tabindex")<0)})).sort((function(t,e){if(p()(t).attr("tabindex")===p()(e).attr("tabindex"))return 0;var n=parseInt(p()(t).attr("tabindex"),10),i=parseInt(p()(e).attr("tabindex"),10);return void 0===p()(t).attr("tabindex")&&i>0?1:void 0===p()(e).attr("tabindex")&&n>0?-1:0===n&&i>0?1:0===i&&n>0||n<i?-1:n>i?1:void 0}))}function V(t){var e=U[t.which||t.keyCode]||String.fromCharCode(t.which).toUpperCase();return e=e.replace(/\W+/,""),t.shiftKey&&(e="SHIFT_".concat(e)),t.ctrlKey&&(e="CTRL_".concat(e)),t.altKey&&(e="ALT_".concat(e)),e.replace(/_$/,"")}var G={keys:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=t[n]);return e}(U),parseKey:V,handleKey:function(t,e,n){var i,r=Y[e],o=this.parseKey(t);if(!r)return console.warn("Component not defined!");if(!0!==t.zfIsKeyHandled)if((i=n[(void 0===r.ltr?r:S()?p().extend({},r.ltr,r.rtl):p().extend({},r.rtl,r.ltr))[o]])&&"function"==typeof i){var a=i.apply();t.zfIsKeyHandled=!0,(n.handled||"function"==typeof n.handled)&&n.handled(a)}else(n.unhandled||"function"==typeof n.unhandled)&&n.unhandled()},findFocusable:j,register:function(t,e){Y[t]=e},trapFocus:function(t){var e=j(t),n=e.eq(0),i=e.eq(-1);t.on("keydown.zf.trapfocus",(function(t){t.target===i[0]&&"TAB"===V(t)?(t.preventDefault(),n.focus()):t.target===n[0]&&"SHIFT_TAB"===V(t)&&(t.preventDefault(),i.focus())}))},releaseFocus:function(t){t.off("keydown.zf.trapfocus")}},q=["mui-enter","mui-leave"],H=["mui-enter-active","mui-leave-active"],$={animateIn:function(t,e,n){W(!0,t,e,n)},animateOut:function(t,e,n){W(!1,t,e,n)}};function Z(t,e,n){var i,r,o=null;if(0===t)return n.apply(e),void e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e]);i=window.requestAnimationFrame((function a(s){o||(o=s),r=s-o,n.apply(e),r<t?i=window.requestAnimationFrame(a,e):(window.cancelAnimationFrame(i),e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e]))}))}function W(t,e,n,i){if((e=p()(e).eq(0)).length){var r=t?q[0]:q[1],o=t?H[0]:H[1];a(),e.addClass(n).css("transition","none"),requestAnimationFrame((function(){e.addClass(r),t&&e.show()})),requestAnimationFrame((function(){e[0].offsetWidth,e.css("transition","").addClass(o)})),e.one(I(e),(function(){t||e.hide(),a(),i&&i.apply(e)}))}function a(){e[0].style.transitionDuration=0,e.removeClass("".concat(r," ").concat(o," ").concat(n))}}var X={Feather:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zf";t.attr("role","menubar"),t.find("a").attr({role:"menuitem"});var n=t.find("li").attr({role:"none"}),i="is-".concat(e,"-submenu"),r="".concat(i,"-item"),o="is-".concat(e,"-submenu-parent"),a="accordion"!==e;n.each((function(){var t=p()(this),n=t.children("ul");n.length&&(t.addClass(o),a&&(t.children("a:first").attr({"aria-haspopup":!0,"aria-label":t.children("a:first").text()}),"drilldown"===e&&t.attr({"aria-expanded":!1})),n.addClass("submenu ".concat(i)).attr({"data-submenu":"",role:"menubar"}),"drilldown"===e&&n.attr({"aria-hidden":!0})),t.parent("[data-submenu]").length&&t.addClass("is-submenu-item ".concat(r))}))},Burn:function(t,e){var n="is-".concat(e,"-submenu"),i="".concat(n,"-item"),r="is-".concat(e,"-submenu-parent");t.find(">li, > li > ul, .menu, .menu > li, [data-submenu] > li").removeClass("".concat(n," ").concat(i," ").concat(r," is-submenu-item submenu is-active")).removeAttr("data-submenu").css("display","")}};function K(t,e,n){var i,r,o=this,a=e.duration,s=Object.keys(t.data())[0]||"timer",l=-1;this.isPaused=!1,this.restart=function(){l=-1,clearTimeout(r),this.start()},this.start=function(){this.isPaused=!1,clearTimeout(r),l=l<=0?a:l,t.data("paused",!1),i=Date.now(),r=setTimeout((function(){e.infinite&&o.restart(),n&&"function"==typeof n&&n()}),l),t.trigger("timerstart.zf.".concat(s))},this.pause=function(){this.isPaused=!0,clearTimeout(r),t.data("paused",!0);var e=Date.now();l-=e-i,t.trigger("timerpaused.zf.".concat(s))}}var J,Q,tt,et,nt={},it=!1,rt=!1;function ot(t){if(this.removeEventListener("touchmove",at),this.removeEventListener("touchend",ot),!rt){var e=p().Event("tap",et||t);p()(this).trigger(e)}et=null,it=!1,rt=!1}function at(t){if(!0===p().spotSwipe.preventDefault&&t.preventDefault(),it){var e,n=t.touches[0].pageX,i=J-n;rt=!0,tt=(new Date).getTime()-Q,Math.abs(i)>=p().spotSwipe.moveThreshold&&tt<=p().spotSwipe.timeThreshold&&(e=i>0?"left":"right"),e&&(t.preventDefault(),ot.apply(this,arguments),p()(this).trigger(p().Event("swipe",Object.assign({},t)),e).trigger(p().Event("swipe".concat(e),Object.assign({},t))))}}function st(t){1===t.touches.length&&(J=t.touches[0].pageX,et=t,it=!0,rt=!1,Q=(new Date).getTime(),this.addEventListener("touchmove",at,{passive:!0===p().spotSwipe.preventDefault}),this.addEventListener("touchend",ot,!1))}function lt(){this.addEventListener&&this.addEventListener("touchstart",st,{passive:!0})}var ct=function(){function t(){m(this,t),this.version="1.0.0",this.enabled="ontouchstart"in document.documentElement,this.preventDefault=!1,this.moveThreshold=75,this.timeThreshold=200,this._init()}return _(t,[{key:"_init",value:function(){p().event.special.swipe={setup:lt},p().event.special.tap={setup:lt},p().each(["left","up","down","right"],(function(){p().event.special["swipe".concat(this)]={setup:function(){p()(this).on("swipe",p().noop)}}}))}}]),t}();nt.setupSpotSwipe=function(){p().spotSwipe=new ct(p())},nt.setupTouchHandler=function(){p().fn.addTouch=function(){this.each((function(e,n){p()(n).bind("touchstart touchmove touchend touchcancel",(function(e){t(e)}))}));var t=function(t){var e,n=t.changedTouches[0],i={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[t.type];"MouseEvent"in window&&"function"==typeof window.MouseEvent?e=new window.MouseEvent(i,{bubbles:!0,cancelable:!0,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY}):(e=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(e)}}},nt.init=function(){void 0===p().spotSwipe&&(nt.setupSpotSwipe(p()),nt.setupTouchHandler(p()))};var ut=function(){for(var t=["WebKit","Moz","O","Ms",""],e=0;e<t.length;e++)if("".concat(t[e],"MutationObserver")in window)return window["".concat(t[e],"MutationObserver")];return!1}(),ht=function(t,e){t.data(e).split(" ").forEach((function(n){p()("#".concat(n))["close"===e?"trigger":"triggerHandler"]("".concat(e,".zf.trigger"),[t])}))},dt={Listeners:{Basic:{},Global:{}},Initializers:{}};function pt(t,e,n){var i,r=Array.prototype.slice.call(arguments,3);p()(window).on(e,(function(){i&&clearTimeout(i),i=setTimeout((function(){n.apply(null,r)}),t||10)}))}dt.Listeners.Basic={openListener:function(){ht(p()(this),"open")},closeListener:function(){p()(this).data("close")?ht(p()(this),"close"):p()(this).trigger("close.zf.trigger")},toggleListener:function(){p()(this).data("toggle")?ht(p()(this),"toggle"):p()(this).trigger("toggle.zf.trigger")},closeableListener:function(t){var e=p()(this).data("closable");t.stopPropagation(),""!==e?$.animateOut(p()(this),e,(function(){p()(this).trigger("closed.zf")})):p()(this).fadeOut().trigger("closed.zf")},toggleFocusListener:function(){var t=p()(this).data("toggle-focus");p()("#".concat(t)).triggerHandler("toggle.zf.trigger",[p()(this)])}},dt.Initializers.addOpenListener=function(t){t.off("click.zf.trigger",dt.Listeners.Basic.openListener),t.on("click.zf.trigger","[data-open]",dt.Listeners.Basic.openListener)},dt.Initializers.addCloseListener=function(t){t.off("click.zf.trigger",dt.Listeners.Basic.closeListener),t.on("click.zf.trigger","[data-close]",dt.Listeners.Basic.closeListener)},dt.Initializers.addToggleListener=function(t){t.off("click.zf.trigger",dt.Listeners.Basic.toggleListener),t.on("click.zf.trigger","[data-toggle]",dt.Listeners.Basic.toggleListener)},dt.Initializers.addCloseableListener=function(t){t.off("close.zf.trigger",dt.Listeners.Basic.closeableListener),t.on("close.zf.trigger","[data-closeable], [data-closable]",dt.Listeners.Basic.closeableListener)},dt.Initializers.addToggleFocusListener=function(t){t.off("focus.zf.trigger blur.zf.trigger",dt.Listeners.Basic.toggleFocusListener),t.on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",dt.Listeners.Basic.toggleFocusListener)},dt.Listeners.Global={resizeListener:function(t){ut||t.each((function(){p()(this).triggerHandler("resizeme.zf.trigger")})),t.attr("data-events","resize")},scrollListener:function(t){ut||t.each((function(){p()(this).triggerHandler("scrollme.zf.trigger")})),t.attr("data-events","scroll")},closeMeListener:function(t,e){var n=t.namespace.split(".")[0];p()("[data-".concat(n,"]")).not('[data-yeti-box="'.concat(e,'"]')).each((function(){var t=p()(this);t.triggerHandler("close.zf.trigger",[t])}))}},dt.Initializers.addClosemeListener=function(t){var e=p()("[data-yeti-box]"),n=["dropdown","tooltip","reveal"];if(t&&("string"==typeof t?n.push(t):"object"===f(t)&&"string"==typeof t[0]?n=n.concat(t):console.error("Plugin names must be strings")),e.length){var i=n.map((function(t){return"closeme.zf.".concat(t)})).join(" ");p()(window).off(i).on(i,dt.Listeners.Global.closeMeListener)}},dt.Initializers.addResizeListener=function(t){var e=p()("[data-resize]");e.length&&pt(t,"resize.zf.trigger",dt.Listeners.Global.resizeListener,e)},dt.Initializers.addScrollListener=function(t){var e=p()("[data-scroll]");e.length&&pt(t,"scroll.zf.trigger",dt.Listeners.Global.scrollListener,e)},dt.Initializers.addMutationEventsListener=function(t){if(!ut)return!1;var e=t.find("[data-resize], [data-scroll], [data-mutate]"),n=function(t){var e=p()(t[0].target);switch(t[0].type){case"attributes":"scroll"===e.attr("data-events")&&"data-events"===t[0].attributeName&&e.triggerHandler("scrollme.zf.trigger",[e,window.pageYOffset]),"resize"===e.attr("data-events")&&"data-events"===t[0].attributeName&&e.triggerHandler("resizeme.zf.trigger",[e]),"style"===t[0].attributeName&&(e.closest("[data-mutate]").attr("data-events","mutate"),e.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[e.closest("[data-mutate]")]));break;case"childList":e.closest("[data-mutate]").attr("data-events","mutate"),e.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[e.closest("[data-mutate]")]);break;default:return!1}};if(e.length)for(var i=0;i<=e.length-1;i++)new ut(n).observe(e[i],{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-events","style"]})},dt.Initializers.addSimpleListeners=function(){var t=p()(document);dt.Initializers.addOpenListener(t),dt.Initializers.addCloseListener(t),dt.Initializers.addToggleListener(t),dt.Initializers.addCloseableListener(t),dt.Initializers.addToggleFocusListener(t)},dt.Initializers.addGlobalListeners=function(){var t=p()(document);dt.Initializers.addMutationEventsListener(t),dt.Initializers.addResizeListener(250),dt.Initializers.addScrollListener(),dt.Initializers.addClosemeListener()},dt.init=function(t,e){L(p()(window),(function(){!0!==p().triggersInitialized&&(dt.Initializers.addSimpleListeners(),dt.Initializers.addGlobalListeners(),p().triggersInitialized=!0)})),e&&(e.Triggers=dt,e.IHearYou=dt.Initializers.addGlobalListeners)};var ft=function(){function t(e,n){m(this,t),this._setup(e,n);var i=mt(this);this.uuid=k(6,i),this.$element.attr("data-".concat(i))||this.$element.attr("data-".concat(i),this.uuid),this.$element.data("zfPlugin")||this.$element.data("zfPlugin",this),this.$element.trigger("init.zf.".concat(i))}return _(t,[{key:"destroy",value:function(){this._destroy();var t=mt(this);for(var e in this.$element.removeAttr("data-".concat(t)).removeData("zfPlugin").trigger("destroyed.zf.".concat(t)),this)this.hasOwnProperty(e)&&(this[e]=null)}}]),t}();function mt(t){return t.className.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var gt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$element=t,this.options=p().extend(!0,{},n.defaults,this.$element.data(),e),this.isEnabled=!0,this.formnovalidate=null,this.className="Abide",this._init()}},{key:"_init",value:function(){var t=this;this.$inputs=p().merge(this.$element.find("input").not('[type="submit"]'),this.$element.find("textarea, select")),this.$submits=this.$element.find('[type="submit"]');var e=this.$element.find("[data-abide-error]");this.options.a11yAttributes&&(this.$inputs.each((function(e,n){return t.addA11yAttributes(p()(n))})),e.each((function(e,n){return t.addGlobalErrorA11yAttributes(p()(n))}))),this._events()}},{key:"_events",value:function(){var t=this;this.$element.off(".abide").on("reset.zf.abide",(function(){t.resetForm()})).on("submit.zf.abide",(function(){return t.validateForm()})),this.$submits.off("click.zf.abide keydown.zf.abide").on("click.zf.abide keydown.zf.abide",(function(e){e.key&&" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),t.formnovalidate=null!==e.target.getAttribute("formnovalidate"),t.$element.submit())})),"fieldChange"===this.options.validateOn&&this.$inputs.off("change.zf.abide").on("change.zf.abide",(function(e){t.validateInput(p()(e.target))})),this.options.liveValidate&&this.$inputs.off("input.zf.abide").on("input.zf.abide",(function(e){t.validateInput(p()(e.target))})),this.options.validateOnBlur&&this.$inputs.off("blur.zf.abide").on("blur.zf.abide",(function(e){t.validateInput(p()(e.target))}))}},{key:"_reflow",value:function(){this._init()}},{key:"_validationIsDisabled",value:function(){return!1===this.isEnabled||("boolean"==typeof this.formnovalidate?this.formnovalidate:!!this.$submits.length&&null!==this.$submits[0].getAttribute("formnovalidate"))}},{key:"enableValidation",value:function(){this.isEnabled=!0}},{key:"disableValidation",value:function(){this.isEnabled=!1}},{key:"requiredCheck",value:function(t){if(!t.attr("required"))return!0;var e=!0;switch(t[0].type){case"checkbox":e=t[0].checked;break;case"select":case"select-one":case"select-multiple":var n=t.find("option:selected");n.length&&n.val()||(e=!1);break;default:t.val()&&t.val().length||(e=!1)}return e}},{key:"findFormError",value:function(t,e){var n=this,i=t.length?t[0].id:"",r=t.siblings(this.options.formErrorSelector);return r.length||(r=t.parent().find(this.options.formErrorSelector)),i&&(r=r.add(this.$element.find('[data-form-error-for="'.concat(i,'"]')))),e&&(r=r.not("[data-form-error-on]"),e.forEach((function(e){r=(r=r.add(t.siblings('[data-form-error-on="'.concat(e,'"]')))).add(n.$element.find('[data-form-error-for="'.concat(i,'"][data-form-error-on="').concat(e,'"]')))}))),r}},{key:"findLabel",value:function(t){var e=t[0].id,n=this.$element.find('label[for="'.concat(e,'"]'));return n.length?n:t.closest("label")}},{key:"findRadioLabels",value:function(t){var e=this,n=t.map((function(t,n){var i=n.id,r=e.$element.find('label[for="'.concat(i,'"]'));return r.length||(r=p()(n).closest("label")),r[0]}));return p()(n)}},{key:"findCheckboxLabels",value:function(t){var e=this,n=t.map((function(t,n){var i=n.id,r=e.$element.find('label[for="'.concat(i,'"]'));return r.length||(r=p()(n).closest("label")),r[0]}));return p()(n)}},{key:"addErrorClasses",value:function(t,e){var n=this.findLabel(t),i=this.findFormError(t,e);n.length&&n.addClass(this.options.labelErrorClass),i.length&&i.addClass(this.options.formErrorClass),t.addClass(this.options.inputErrorClass).attr({"data-invalid":"","aria-invalid":!0})}},{key:"addA11yAttributes",value:function(t){var e=this.findFormError(t),n=e.filter("label"),i=e.first();if(e.length){if(void 0===t.attr("aria-describedby")){var r=i.attr("id");void 0===r&&(r=k(6,"abide-error"),i.attr("id",r)),t.attr("aria-describedby",r)}if(n.filter("[for]").length<n.length){var o=t.attr("id");void 0===o&&(o=k(6,"abide-input"),t.attr("id",o)),n.each((function(t,e){var n=p()(e);void 0===n.attr("for")&&n.attr("for",o)}))}e.each((function(t,e){var n=p()(e);void 0===n.attr("role")&&n.attr("role","alert")})).end()}}},{key:"addGlobalErrorA11yAttributes",value:function(t){void 0===t.attr("aria-live")&&t.attr("aria-live",this.options.a11yErrorLevel)}},{key:"removeRadioErrorClasses",value:function(t){var e=this.$element.find(':radio[name="'.concat(t,'"]')),n=this.findRadioLabels(e),i=this.findFormError(e);n.length&&n.removeClass(this.options.labelErrorClass),i.length&&i.removeClass(this.options.formErrorClass),e.removeClass(this.options.inputErrorClass).attr({"data-invalid":null,"aria-invalid":null})}},{key:"removeCheckboxErrorClasses",value:function(t){var e=this.$element.find(':checkbox[name="'.concat(t,'"]')),n=this.findCheckboxLabels(e),i=this.findFormError(e);n.length&&n.removeClass(this.options.labelErrorClass),i.length&&i.removeClass(this.options.formErrorClass),e.removeClass(this.options.inputErrorClass).attr({"data-invalid":null,"aria-invalid":null})}},{key:"removeErrorClasses",value:function(t){if("radio"===t[0].type)return this.removeRadioErrorClasses(t.attr("name"));if("checkbox"===t[0].type)return this.removeCheckboxErrorClasses(t.attr("name"));var e=this.findLabel(t),n=this.findFormError(t);e.length&&e.removeClass(this.options.labelErrorClass),n.length&&n.removeClass(this.options.formErrorClass),t.removeClass(this.options.inputErrorClass).attr({"data-invalid":null,"aria-invalid":null})}},{key:"validateInput",value:function(t){var e=this,n=this.requiredCheck(t),i=t.attr("data-validator"),r=[],o=!0;if(this._validationIsDisabled())return!0;if(t.is("[data-abide-ignore]")||t.is('[type="hidden"]')||t.is("[disabled]"))return!0;switch(t[0].type){case"radio":this.validateRadio(t.attr("name"))||r.push("required");break;case"checkbox":this.validateCheckbox(t.attr("name"))||r.push("required"),o=!1;break;case"select":case"select-one":case"select-multiple":n||r.push("required");break;default:n||r.push("required"),this.validateText(t)||r.push("pattern")}if(i){var a=!!t.attr("required");i.split(" ").forEach((function(n){e.options.validators[n](t,a,t.parent())||r.push(n)}))}t.attr("data-equalto")&&(this.options.validators.equalTo(t)||r.push("equalTo"));var s=0===r.length,l=(s?"valid":"invalid")+".zf.abide";if(s){var c=this.$element.find('[data-equalto="'.concat(t.attr("id"),'"]'));if(c.length){var u=this;c.each((function(){p()(this).val()&&u.validateInput(p()(this))}))}}return o&&(s?this.removeErrorClasses(t):this.addErrorClasses(t,r)),t.trigger(l,[t]),s}},{key:"validateForm",value:function(){var t,e=this,n=[],i=this;if(this.initialized||(this.initialized=!0),this._validationIsDisabled())return this.formnovalidate=null,!0;this.$inputs.each((function(){if("checkbox"===p()(this)[0].type){if(p()(this).attr("name")===t)return!0;t=p()(this).attr("name")}n.push(i.validateInput(p()(this)))}));var r=-1===n.indexOf(!1);return this.$element.find("[data-abide-error]").each((function(t,n){var i=p()(n);e.options.a11yAttributes&&e.addGlobalErrorA11yAttributes(i),i.css("display",r?"none":"block")})),this.$element.trigger((r?"formvalid":"forminvalid")+".zf.abide",[this.$element]),r}},{key:"validateText",value:function(t,e){e=e||t.attr("data-pattern")||t.attr("pattern")||t.attr("type");var n=t.val(),i=!0;return n.length&&(this.options.patterns.hasOwnProperty(e)?i=this.options.patterns[e].test(n):e!==t.attr("type")&&(i=new RegExp(e).test(n))),i}},{key:"validateRadio",value:function(t){var e=this.$element.find(':radio[name="'.concat(t,'"]')),n=!1,i=!1;return e.each((function(t,e){p()(e).attr("required")&&(i=!0)})),i||(n=!0),n||e.each((function(t,e){p()(e).prop("checked")&&(n=!0)})),n}},{key:"validateCheckbox",value:function(t){var e=this,n=this.$element.find(':checkbox[name="'.concat(t,'"]')),i=!1,r=!1,o=1,a=0;return n.each((function(t,e){p()(e).attr("required")&&(r=!0)})),r||(i=!0),i||(n.each((function(t,e){p()(e).prop("checked")&&a++,void 0!==p()(e).attr("data-min-required")&&(o=parseInt(p()(e).attr("data-min-required"),10))})),a>=o&&(i=!0)),!0!==this.initialized&&o>1||(n.each((function(t,n){i?e.removeErrorClasses(p()(n)):e.addErrorClasses(p()(n),["required"])})),i)}},{key:"matchValidation",value:function(t,e,n){var i=this;return n=!!n,-1===e.split(" ").map((function(e){return i.options.validators[e](t,n,t.parent())})).indexOf(!1)}},{key:"resetForm",value:function(){var t=this.$element,e=this.options;p()(".".concat(e.labelErrorClass),t).not("small").removeClass(e.labelErrorClass),p()(".".concat(e.inputErrorClass),t).not("small").removeClass(e.inputErrorClass),p()("".concat(e.formErrorSelector,".").concat(e.formErrorClass)).removeClass(e.formErrorClass),t.find("[data-abide-error]").css("display","none"),p()(":input",t).not(":button, :submit, :reset, :hidden, :radio, :checkbox, [data-abide-ignore]").val("").attr({"data-invalid":null,"aria-invalid":null}),p()(":input:radio",t).not("[data-abide-ignore]").prop("checked",!1).attr({"data-invalid":null,"aria-invalid":null}),p()(":input:checkbox",t).not("[data-abide-ignore]").prop("checked",!1).attr({"data-invalid":null,"aria-invalid":null}),t.trigger("formreset.zf.abide",[t])}},{key:"_destroy",value:function(){var t=this;this.$element.off(".abide").find("[data-abide-error]").css("display","none"),this.$inputs.off(".abide").each((function(){t.removeErrorClasses(p()(this))})),this.$submits.off(".abide")}}]),n}(ft);gt.defaults={validateOn:"fieldChange",labelErrorClass:"is-invalid-label",inputErrorClass:"is-invalid-input",formErrorSelector:".form-error",formErrorClass:"is-visible",a11yAttributes:!0,a11yErrorLevel:"assertive",liveValidate:!1,validateOnBlur:!1,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(?:222[1-9]|2[3-6][0-9]{2}|27[0-1][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^((?:(https?|ftps?|file|ssh|sftp):\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,website:{test:function(t){return gt.defaults.patterns.domain.test(t)||gt.defaults.patterns.url.test(t)}}},validators:{equalTo:function(t){return p()("#".concat(t.attr("data-equalto"))).val()===t.val()}}};var _t=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Accordion",this._init(),G.register("Accordion",{ENTER:"toggle",SPACE:"toggle",ARROW_DOWN:"next",ARROW_UP:"previous",HOME:"first",END:"last"})}},{key:"_init",value:function(){var t=this;this._isInitializing=!0,this.$tabs=this.$element.children("[data-accordion-item]"),this.$tabs.each((function(t,e){var n=p()(e),i=n.children("[data-tab-content]"),r=i[0].id||k(6,"accordion"),o=e.id?"".concat(e.id,"-label"):"".concat(r,"-label");n.find("a:first").attr({"aria-controls":r,id:o,"aria-expanded":!1}),i.attr({role:"region","aria-labelledby":o,"aria-hidden":!0,id:r})}));var e=this.$element.find(".is-active").children("[data-tab-content]");e.length&&(this._initialAnchor=e.prev("a").attr("href"),this._openSingleTab(e)),this._checkDeepLink=function(){var e=window.location.hash;if(!e.length){if(t._isInitializing)return;t._initialAnchor&&(e=t._initialAnchor)}var n=e&&p()(e),i=e&&t.$element.find('[href$="'.concat(e,'"]'));n.length&&i.length&&(n&&i&&i.length?i.parent("[data-accordion-item]").hasClass("is-active")||t._openSingleTab(n):t._closeAllTabs(),t.options.deepLinkSmudge&&L(p()(window),(function(){var e=t.$element.offset();p()("html, body").animate({scrollTop:e.top-t.options.deepLinkSmudgeOffset},t.options.deepLinkSmudgeDelay)})),t.$element.trigger("deeplink.zf.accordion",[i,n]))},this.options.deepLink&&this._checkDeepLink(),this._events(),this._isInitializing=!1}},{key:"_events",value:function(){var t=this;this.$tabs.each((function(){var e=p()(this),n=e.children("[data-tab-content]");n.length&&e.children("a").off("click.zf.accordion keydown.zf.accordion").on("click.zf.accordion",(function(e){e.preventDefault(),t.toggle(n)})).on("keydown.zf.accordion",(function(i){G.handleKey(i,"Accordion",{toggle:function(){t.toggle(n)},next:function(){var n=e.next().find("a").focus();t.options.multiExpand||n.trigger("click.zf.accordion")},previous:function(){var n=e.prev().find("a").focus();t.options.multiExpand||n.trigger("click.zf.accordion")},first:function(){var e=t.$tabs.first().find(".accordion-title").focus();t.options.multiExpand||e.trigger("click.zf.accordion")},last:function(){var e=t.$tabs.last().find(".accordion-title").focus();t.options.multiExpand||e.trigger("click.zf.accordion")},handled:function(){i.preventDefault()}})}))})),this.options.deepLink&&p()(window).on("hashchange",this._checkDeepLink)}},{key:"toggle",value:function(t){if(t.closest("[data-accordion]").is("[disabled]"))console.info("Cannot toggle an accordion that is disabled.");else if(t.parent().hasClass("is-active")?this.up(t):this.down(t),this.options.deepLink){var e=t.prev("a").attr("href");this.options.updateHistory?history.pushState({},"",e):history.replaceState({},"",e)}}},{key:"down",value:function(t){t.closest("[data-accordion]").is("[disabled]")?console.info("Cannot call down on an accordion that is disabled."):this.options.multiExpand?this._openTab(t):this._openSingleTab(t)}},{key:"up",value:function(t){if(this.$element.is("[disabled]"))console.info("Cannot call up on an accordion that is disabled.");else{var e=t.parent();if(e.hasClass("is-active")){var n=e.siblings();(this.options.allowAllClosed||n.hasClass("is-active"))&&this._closeTab(t)}}}},{key:"_openSingleTab",value:function(t){var e=this.$element.children(".is-active").children("[data-tab-content]");e.length&&this._closeTab(e.not(t)),this._openTab(t)}},{key:"_openTab",value:function(t){var e=this,n=t.parent(),i=t.attr("aria-labelledby");t.attr("aria-hidden",!1),n.addClass("is-active"),p()("#".concat(i)).attr({"aria-expanded":!0}),t.finish().slideDown(this.options.slideSpeed,(function(){e.$element.trigger("down.zf.accordion",[t])}))}},{key:"_closeTab",value:function(t){var e=this,n=t.parent(),i=t.attr("aria-labelledby");t.attr("aria-hidden",!0),n.removeClass("is-active"),p()("#".concat(i)).attr({"aria-expanded":!1}),t.finish().slideUp(this.options.slideSpeed,(function(){e.$element.trigger("up.zf.accordion",[t])}))}},{key:"_closeAllTabs",value:function(){var t=this.$element.children(".is-active").children("[data-tab-content]");t.length&&this._closeTab(t)}},{key:"_destroy",value:function(){this.$element.find("[data-tab-content]").stop(!0).slideUp(0).css("display",""),this.$element.find("a").off(".zf.accordion"),this.options.deepLink&&p()(window).off("hashchange",this._checkDeepLink)}}]),n}(ft);_t.defaults={slideSpeed:250,multiExpand:!1,allowAllClosed:!1,deepLink:!1,deepLinkSmudge:!1,deepLinkSmudgeDelay:300,deepLinkSmudgeOffset:0,updateHistory:!1};var yt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="AccordionMenu",this._init(),G.register("AccordionMenu",{ENTER:"toggle",SPACE:"toggle",ARROW_RIGHT:"open",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"close",ESCAPE:"closeAll"})}},{key:"_init",value:function(){X.Feather(this.$element,"accordion");var t=this;this.$element.find("[data-submenu]").not(".is-active").slideUp(0),this.$element.attr({"aria-multiselectable":this.options.multiOpen}),this.$menuLinks=this.$element.find(".is-accordion-submenu-parent"),this.$menuLinks.each((function(){var e=this.id||k(6,"acc-menu-link"),n=p()(this),i=n.children("[data-submenu]"),r=i[0].id||k(6,"acc-menu"),o=i.hasClass("is-active");t.options.parentLink&&n.children("a").clone().prependTo(i).wrap('<li data-is-parent-link class="is-submenu-parent-item is-submenu-item is-accordion-submenu-item"></li>'),t.options.submenuToggle?(n.addClass("has-submenu-toggle"),n.children("a").after('<button id="'+e+'" class="submenu-toggle" aria-controls="'+r+'" aria-expanded="'+o+'" title="'+t.options.submenuToggleText+'"><span class="submenu-toggle-text">'+t.options.submenuToggleText+"</span></button>")):n.attr({"aria-controls":r,"aria-expanded":o,id:e}),i.attr({"aria-labelledby":e,"aria-hidden":!o,role:"group",id:r})}));var e=this.$element.find(".is-active");e.length&&e.each((function(){t.down(p()(this))})),this._events()}},{key:"_events",value:function(){var t=this;this.$element.find("li").each((function(){var e=p()(this).children("[data-submenu]");e.length&&(t.options.submenuToggle?p()(this).children(".submenu-toggle").off("click.zf.accordionMenu").on("click.zf.accordionMenu",(function(){t.toggle(e)})):p()(this).children("a").off("click.zf.accordionMenu").on("click.zf.accordionMenu",(function(n){n.preventDefault(),t.toggle(e)})))})).on("keydown.zf.accordionMenu",(function(e){var n,i,r=p()(this),o=r.parent("ul").children("li"),a=r.children("[data-submenu]");o.each((function(t){if(p()(this).is(r))return n=o.eq(Math.max(0,t-1)).find("a").first(),i=o.eq(Math.min(t+1,o.length-1)).find("a").first(),p()(this).children("[data-submenu]:visible").length&&(i=r.find("li:first-child").find("a").first()),p()(this).is(":first-child")?n=r.parents("li").first().find("a").first():n.parents("li").first().children("[data-submenu]:visible").length&&(n=n.parents("li").find("li:last-child").find("a").first()),void(p()(this).is(":last-child")&&(i=r.parents("li").first().next("li").find("a").first()))})),G.handleKey(e,"AccordionMenu",{open:function(){a.is(":hidden")&&(t.down(a),a.find("li").first().find("a").first().focus())},close:function(){a.length&&!a.is(":hidden")?t.up(a):r.parent("[data-submenu]").length&&(t.up(r.parent("[data-submenu]")),r.parents("li").first().find("a").first().focus())},up:function(){return n.focus(),!0},down:function(){return i.focus(),!0},toggle:function(){return!t.options.submenuToggle&&(r.children("[data-submenu]").length?(t.toggle(r.children("[data-submenu]")),!0):void 0)},closeAll:function(){t.hideAll()},handled:function(t){t&&e.preventDefault()}})}))}},{key:"hideAll",value:function(){this.up(this.$element.find("[data-submenu]"))}},{key:"showAll",value:function(){this.down(this.$element.find("[data-submenu]"))}},{key:"toggle",value:function(t){t.is(":animated")||(t.is(":hidden")?this.down(t):this.up(t))}},{key:"down",value:function(t){var e=this;if(!this.options.multiOpen){var n=t.parentsUntil(this.$element).add(t).add(t.find(".is-active")),i=this.$element.find(".is-active").not(n);this.up(i)}t.addClass("is-active").attr({"aria-hidden":!1}),this.options.submenuToggle?t.prev(".submenu-toggle").attr({"aria-expanded":!0}):t.parent(".is-accordion-submenu-parent").attr({"aria-expanded":!0}),t.slideDown(this.options.slideSpeed,(function(){e.$element.trigger("down.zf.accordionMenu",[t])}))}},{key:"up",value:function(t){var e=this,n=t.find("[data-submenu]"),i=t.add(n);n.slideUp(0),i.removeClass("is-active").attr("aria-hidden",!0),this.options.submenuToggle?i.prev(".submenu-toggle").attr("aria-expanded",!1):i.parent(".is-accordion-submenu-parent").attr("aria-expanded",!1),t.slideUp(this.options.slideSpeed,(function(){e.$element.trigger("up.zf.accordionMenu",[t])}))}},{key:"_destroy",value:function(){this.$element.find("[data-submenu]").slideDown(0).css("display",""),this.$element.find("a").off("click.zf.accordionMenu"),this.$element.find("[data-is-parent-link]").detach(),this.options.submenuToggle&&(this.$element.find(".has-submenu-toggle").removeClass("has-submenu-toggle"),this.$element.find(".submenu-toggle").remove()),X.Burn(this.$element,"accordion")}}]),n}(ft);yt.defaults={parentLink:!1,slideSpeed:250,submenuToggle:!1,submenuToggleText:"Toggle menu",multiOpen:!0};var vt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Drilldown",this._init(),G.register("Drilldown",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}},{key:"_init",value:function(){X.Feather(this.$element,"drilldown"),this.options.autoApplyClass&&this.$element.addClass("drilldown"),this.$element.attr({"aria-multiselectable":!1}),this.$submenuAnchors=this.$element.find("li.is-drilldown-submenu-parent").children("a"),this.$submenus=this.$submenuAnchors.parent("li").children("[data-submenu]").attr("role","group"),this.$menuItems=this.$element.find("li").not(".js-drilldown-back").find("a"),this.$currentMenu=this.$element,this.$element.attr("data-mutate",this.$element.attr("data-drilldown")||k(6,"drilldown")),this._prepareMenu(),this._registerEvents(),this._keyboardEvents()}},{key:"_prepareMenu",value:function(){var t=this;this.$submenuAnchors.each((function(){var e=p()(this),n=e.parent();t.options.parentLink&&e.clone().prependTo(n.children("[data-submenu]")).wrap('<li data-is-parent-link class="is-submenu-parent-item is-submenu-item is-drilldown-submenu-item" role="none"></li>'),e.data("savedHref",e.attr("href")).removeAttr("href").attr("tabindex",0),e.children("[data-submenu]").attr({"aria-hidden":!0,tabindex:0,role:"group"}),t._events(e)})),this.$submenus.each((function(){var e=p()(this);if(!e.find(".js-drilldown-back").length)switch(t.options.backButtonPosition){case"bottom":e.append(t.options.backButton);break;case"top":e.prepend(t.options.backButton);break;default:console.error("Unsupported backButtonPosition value '"+t.options.backButtonPosition+"'")}t._back(e)})),this.$submenus.addClass("invisible"),this.options.autoHeight||this.$submenus.addClass("drilldown-submenu-cover-previous"),this.$element.parent().hasClass("is-drilldown")||(this.$wrapper=p()(this.options.wrapper).addClass("is-drilldown"),this.options.animateHeight&&this.$wrapper.addClass("animate-height"),this.$element.wrap(this.$wrapper)),this.$wrapper=this.$element.parent(),this.$wrapper.css(this._getMaxDims())}},{key:"_resize",value:function(){this.$wrapper.css({"max-width":"none","min-height":"none"}),this.$wrapper.css(this._getMaxDims())}},{key:"_events",value:function(t){var e=this;t.off("click.zf.drilldown").on("click.zf.drilldown",(function(n){if(p()(n.target).parentsUntil("ul","li").hasClass("is-drilldown-submenu-parent")&&n.preventDefault(),e._show(t.parent("li")),e.options.closeOnClick){var i=p()("body");i.off(".zf.drilldown").on("click.zf.drilldown",(function(t){t.target===e.$element[0]||p().contains(e.$element[0],t.target)||(t.preventDefault(),e._hideAll(),i.off(".zf.drilldown"))}))}}))}},{key:"_registerEvents",value:function(){this.options.scrollTop&&(this._bindHandler=this._scrollTop.bind(this),this.$element.on("open.zf.drilldown hide.zf.drilldown close.zf.drilldown closed.zf.drilldown",this._bindHandler)),this.$element.on("mutateme.zf.trigger",this._resize.bind(this))}},{key:"_scrollTop",value:function(){var t=this,e=""!==t.options.scrollTopElement?p()(t.options.scrollTopElement):t.$element,n=parseInt(e.offset().top+t.options.scrollTopOffset,10);p()("html, body").stop(!0).animate({scrollTop:n},t.options.animationDuration,t.options.animationEasing,(function(){this===p()("html")[0]&&t.$element.trigger("scrollme.zf.drilldown")}))}},{key:"_keyboardEvents",value:function(){var t=this;this.$menuItems.add(this.$element.find(".js-drilldown-back > a, .is-submenu-parent-item > a")).on("keydown.zf.drilldown",(function(e){var n,i,r=p()(this),o=r.parent("li").parent("ul").children("li").children("a");o.each((function(t){if(p()(this).is(r))return n=o.eq(Math.max(0,t-1)),void(i=o.eq(Math.min(t+1,o.length-1)))})),G.handleKey(e,"Drilldown",{next:function(){if(r.is(t.$submenuAnchors))return t._show(r.parent("li")),r.parent("li").one(I(r),(function(){r.parent("li").find("ul li a").not(".js-drilldown-back a").first().focus()})),!0},previous:function(){return t._hide(r.parent("li").parent("ul")),r.parent("li").parent("ul").one(I(r),(function(){setTimeout((function(){r.parent("li").parent("ul").parent("li").children("a").first().focus()}),1)})),!0},up:function(){return n.focus(),!r.is(t.$element.find("> li:first-child > a"))},down:function(){return i.focus(),!r.is(t.$element.find("> li:last-child > a"))},close:function(){r.is(t.$element.find("> li > a"))||(t._hide(r.parent().parent()),r.parent().parent().siblings("a").focus())},open:function(){return(!t.options.parentLink||!r.attr("href"))&&(r.is(t.$menuItems)?r.is(t.$submenuAnchors)?(t._show(r.parent("li")),r.parent("li").one(I(r),(function(){r.parent("li").find("ul li a").not(".js-drilldown-back a").first().focus()})),!0):void 0:(t._hide(r.parent("li").parent("ul")),r.parent("li").parent("ul").one(I(r),(function(){setTimeout((function(){r.parent("li").parent("ul").parent("li").children("a").first().focus()}),1)})),!0))},handled:function(t){t&&e.preventDefault()}})}))}},{key:"_hideAll",value:function(){var t=this,e=this.$element.find(".is-drilldown-submenu.is-active");if(e.addClass("is-closing"),this.options.autoHeight){var n=e.parent().closest("ul").data("calcHeight");this.$wrapper.css({height:n})}this.$element.trigger("close.zf.drilldown"),e.one(I(e),(function(){e.removeClass("is-active is-closing"),t.$element.trigger("closed.zf.drilldown")}))}},{key:"_back",value:function(t){var e=this;t.off("click.zf.drilldown"),t.children(".js-drilldown-back").on("click.zf.drilldown",(function(){e._hide(t);var n=t.parent("li").parent("ul").parent("li");n.length?e._show(n):e.$currentMenu=e.$element}))}},{key:"_menuLinkEvents",value:function(){var t=this;this.$menuItems.not(".is-drilldown-submenu-parent").off("click.zf.drilldown").on("click.zf.drilldown",(function(){setTimeout((function(){t._hideAll()}),0)}))}},{key:"_setShowSubMenuClasses",value:function(t,e){t.addClass("is-active").removeClass("invisible").attr("aria-hidden",!1),t.parent("li").attr("aria-expanded",!0),!0===e&&this.$element.trigger("open.zf.drilldown",[t])}},{key:"_setHideSubMenuClasses",value:function(t,e){t.removeClass("is-active").addClass("invisible").attr("aria-hidden",!0),t.parent("li").attr("aria-expanded",!1),!0===e&&t.trigger("hide.zf.drilldown",[t])}},{key:"_showMenu",value:function(t,e){var n=this;if(this.$element.find('li[aria-expanded="true"] > ul[data-submenu]').each((function(){n._setHideSubMenuClasses(p()(this))})),this.$currentMenu=t,t.is("[data-drilldown]"))return!0===e&&t.find("li > a").first().focus(),void(this.options.autoHeight&&this.$wrapper.css("height",t.data("calcHeight")));var i=t.children().first().parentsUntil("[data-drilldown]","[data-submenu]");i.each((function(r){0===r&&n.options.autoHeight&&n.$wrapper.css("height",p()(this).data("calcHeight"));var o=r===i.length-1;!0===o&&p()(this).one(I(p()(this)),(function(){!0===e&&t.find("li > a").first().focus()})),n._setShowSubMenuClasses(p()(this),o)}))}},{key:"_show",value:function(t){var e=t.children("[data-submenu]");t.attr("aria-expanded",!0),this.$currentMenu=e,t.parent().closest("ul").addClass("invisible"),e.addClass("is-active visible").removeClass("invisible").attr("aria-hidden",!1),this.options.autoHeight&&this.$wrapper.css({height:e.data("calcHeight")}),this.$element.trigger("open.zf.drilldown",[t])}},{key:"_hide",value:function(t){this.options.autoHeight&&this.$wrapper.css({height:t.parent().closest("ul").data("calcHeight")}),t.parent().closest("ul").removeClass("invisible"),t.parent("li").attr("aria-expanded",!1),t.attr("aria-hidden",!0),t.addClass("is-closing").one(I(t),(function(){t.removeClass("is-active is-closing visible"),t.blur().addClass("invisible")})),t.trigger("hide.zf.drilldown",[t])}},{key:"_getMaxDims",value:function(){var t=0,e={},n=this;return this.$submenus.add(this.$element).each((function(){var e=R.GetDimensions(this).height;t=e>t?e:t,n.options.autoHeight&&p()(this).data("calcHeight",e)})),this.options.autoHeight?e.height=this.$currentMenu.data("calcHeight"):e["min-height"]="".concat(t,"px"),e["max-width"]="".concat(this.$element[0].getBoundingClientRect().width,"px"),e}},{key:"_destroy",value:function(){p()("body").off(".zf.drilldown"),this.options.scrollTop&&this.$element.off(".zf.drilldown",this._bindHandler),this._hideAll(),this.$element.off("mutateme.zf.trigger"),X.Burn(this.$element,"drilldown"),this.$element.unwrap().find(".js-drilldown-back, .is-submenu-parent-item").remove().end().find(".is-active, .is-closing, .is-drilldown-submenu").removeClass("is-active is-closing is-drilldown-submenu").off("transitionend otransitionend webkitTransitionEnd").end().find("[data-submenu]").removeAttr("aria-hidden tabindex role"),this.$submenuAnchors.each((function(){p()(this).off(".zf.drilldown")})),this.$element.find("[data-is-parent-link]").detach(),this.$submenus.removeClass("drilldown-submenu-cover-previous invisible"),this.$element.find("a").each((function(){var t=p()(this);t.removeAttr("tabindex"),t.data("savedHref")&&t.attr("href",t.data("savedHref")).removeData("savedHref")}))}}]),n}(ft);vt.defaults={autoApplyClass:!0,backButton:'<li class="js-drilldown-back"><a tabindex="0">Back</a></li>',backButtonPosition:"top",wrapper:"<div></div>",parentLink:!1,closeOnClick:!1,autoHeight:!1,animateHeight:!1,scrollTop:!1,scrollTopElement:"",scrollTopOffset:0,animationDuration:500,animationEasing:"swing"};var bt=["left","right","top","bottom"],xt=["top","bottom","center"],wt=["left","right","center"],Et={left:xt,right:xt,top:wt,bottom:wt};function Mt(t,e){var n=e.indexOf(t);return n===e.length-1?e[0]:e[n+1]}var Tt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_init",value:function(){this.triedPositions={},this.position="auto"===this.options.position?this._getDefaultPosition():this.options.position,this.alignment="auto"===this.options.alignment?this._getDefaultAlignment():this.options.alignment,this.originalPosition=this.position,this.originalAlignment=this.alignment}},{key:"_getDefaultPosition",value:function(){return"bottom"}},{key:"_getDefaultAlignment",value:function(){switch(this.position){case"bottom":case"top":return S()?"right":"left";case"left":case"right":return"bottom"}}},{key:"_reposition",value:function(){this._alignmentsExhausted(this.position)?(this.position=Mt(this.position,bt),this.alignment=Et[this.position][0]):this._realign()}},{key:"_realign",value:function(){this._addTriedPosition(this.position,this.alignment),this.alignment=Mt(this.alignment,Et[this.position])}},{key:"_addTriedPosition",value:function(t,e){this.triedPositions[t]=this.triedPositions[t]||[],this.triedPositions[t].push(e)}},{key:"_positionsExhausted",value:function(){for(var t=!0,e=0;e<bt.length;e++)t=t&&this._alignmentsExhausted(bt[e]);return t}},{key:"_alignmentsExhausted",value:function(t){return this.triedPositions[t]&&this.triedPositions[t].length===Et[t].length}},{key:"_getVOffset",value:function(){return this.options.vOffset}},{key:"_getHOffset",value:function(){return this.options.hOffset}},{key:"_setPosition",value:function(t,e,n){if("false"===t.attr("aria-expanded"))return!1;if(this.options.allowOverlap||(this.position=this.originalPosition,this.alignment=this.originalAlignment),e.offset(R.GetExplicitOffsets(e,t,this.position,this.alignment,this._getVOffset(),this._getHOffset())),!this.options.allowOverlap){for(var i=1e8,r={position:this.position,alignment:this.alignment};!this._positionsExhausted();){var o=R.OverlapArea(e,n,!1,!1,this.options.allowBottomOverlap);if(0===o)return;o<i&&(i=o,r={position:this.position,alignment:this.alignment}),this._reposition(),e.offset(R.GetExplicitOffsets(e,t,this.position,this.alignment,this._getVOffset(),this._getHOffset()))}this.position=r.position,this.alignment=r.alignment,e.offset(R.GetExplicitOffsets(e,t,this.position,this.alignment,this._getVOffset(),this._getHOffset()))}}}]),n}(ft);Tt.defaults={position:"auto",alignment:"auto",allowOverlap:!1,allowBottomOverlap:!0,vOffset:0,hOffset:0};var St=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Dropdown",nt.init(p()),dt.init(p()),this._init(),G.register("Dropdown",{ENTER:"toggle",SPACE:"toggle",ESCAPE:"close"})}},{key:"_init",value:function(){var t=this.$element.attr("id");this.$anchors=p()('[data-toggle="'.concat(t,'"]')).length?p()('[data-toggle="'.concat(t,'"]')):p()('[data-open="'.concat(t,'"]')),this.$anchors.attr({"aria-controls":t,"data-is-focus":!1,"data-yeti-box":t,"aria-haspopup":!0,"aria-expanded":!1}),this._setCurrentAnchor(this.$anchors.first()),this.options.parentClass?this.$parent=this.$element.parents("."+this.options.parentClass):this.$parent=null,void 0===this.$element.attr("aria-labelledby")&&(void 0===this.$currentAnchor.attr("id")&&this.$currentAnchor.attr("id",k(6,"dd-anchor")),this.$element.attr("aria-labelledby",this.$currentAnchor.attr("id"))),this.$element.attr({"aria-hidden":"true","data-yeti-box":t,"data-resize":t}),M(v(n.prototype),"_init",this).call(this),this._events()}},{key:"_getDefaultPosition",value:function(){var t=this.$element[0].className.match(/(top|left|right|bottom)/g);return t?t[0]:"bottom"}},{key:"_getDefaultAlignment",value:function(){var t=/float-(\S+)/.exec(this.$currentAnchor.attr("class"));return t?t[1]:M(v(n.prototype),"_getDefaultAlignment",this).call(this)}},{key:"_setPosition",value:function(){this.$element.removeClass("has-position-".concat(this.position," has-alignment-").concat(this.alignment)),M(v(n.prototype),"_setPosition",this).call(this,this.$currentAnchor,this.$element,this.$parent),this.$element.addClass("has-position-".concat(this.position," has-alignment-").concat(this.alignment))}},{key:"_setCurrentAnchor",value:function(t){this.$currentAnchor=p()(t)}},{key:"_events",value:function(){var t=this,e="ontouchstart"in window||void 0!==window.ontouchstart;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)}),this.$anchors.off("click.zf.trigger").on("click.zf.trigger",(function(n){t._setCurrentAnchor(this),(!1===t.options.forceFollow||e&&t.options.hover&&!1===t.$element.hasClass("is-open"))&&n.preventDefault()})),this.options.hover&&(this.$anchors.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",(function(){t._setCurrentAnchor(this);var e=p()("body").data();void 0!==e.whatinput&&"mouse"!==e.whatinput||(clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.open(),t.$anchors.data("hover",!0)}),t.options.hoverDelay))})).on("mouseleave.zf.dropdown",D((function(){clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.close(),t.$anchors.data("hover",!1)}),t.options.hoverDelay)}))),this.options.hoverPane&&this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",(function(){clearTimeout(t.timeout)})).on("mouseleave.zf.dropdown",D((function(){clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.close(),t.$anchors.data("hover",!1)}),t.options.hoverDelay)})))),this.$anchors.add(this.$element).on("keydown.zf.dropdown",(function(e){var n=p()(this);G.handleKey(e,"Dropdown",{open:function(){n.is(t.$anchors)&&!n.is("input, textarea")&&(t.open(),t.$element.attr("tabindex",-1).focus(),e.preventDefault())},close:function(){t.close(),t.$anchors.focus()}})}))}},{key:"_addBodyHandler",value:function(){var t=p()(document.body).not(this.$element),e=this;t.off("click.zf.dropdown tap.zf.dropdown").on("click.zf.dropdown tap.zf.dropdown",(function(n){e.$anchors.is(n.target)||e.$anchors.find(n.target).length||e.$element.is(n.target)||e.$element.find(n.target).length||(e.close(),t.off("click.zf.dropdown tap.zf.dropdown"))}))}},{key:"open",value:function(){if(this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id")),this.$anchors.addClass("hover").attr({"aria-expanded":!0}),this.$element.addClass("is-opening"),this._setPosition(),this.$element.removeClass("is-opening").addClass("is-open").attr({"aria-hidden":!1}),this.options.autoFocus){var t=G.findFocusable(this.$element);t.length&&t.eq(0).focus()}this.options.closeOnClick&&this._addBodyHandler(),this.options.trapFocus&&G.trapFocus(this.$element),this.$element.trigger("show.zf.dropdown",[this.$element])}},{key:"close",value:function(){if(!this.$element.hasClass("is-open"))return!1;this.$element.removeClass("is-open").attr({"aria-hidden":!0}),this.$anchors.removeClass("hover").attr("aria-expanded",!1),this.$element.trigger("hide.zf.dropdown",[this.$element]),this.options.trapFocus&&G.releaseFocus(this.$element)}},{key:"toggle",value:function(){if(this.$element.hasClass("is-open")){if(this.$anchors.data("hover"))return;this.close()}else this.open()}},{key:"_destroy",value:function(){this.$element.off(".zf.trigger").hide(),this.$anchors.off(".zf.dropdown"),p()(document.body).off("click.zf.dropdown tap.zf.dropdown")}}]),n}(Tt);St.defaults={parentClass:null,hoverDelay:250,hover:!1,hoverPane:!1,vOffset:0,hOffset:0,position:"auto",alignment:"auto",allowOverlap:!1,allowBottomOverlap:!0,trapFocus:!1,autoFocus:!1,closeOnClick:!1,forceFollow:!0};var kt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="DropdownMenu",nt.init(p()),this._init(),G.register("DropdownMenu",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}},{key:"_init",value:function(){X.Feather(this.$element,"dropdown");var t=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub"),this.$menuItems=this.$element.find('li[role="none"]'),this.$tabs=this.$element.children('li[role="none"]'),this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass),"auto"===this.options.alignment?this.$element.hasClass(this.options.rightClass)||S()||this.$element.parents(".top-bar-right").is("*")?(this.options.alignment="right",t.addClass("opens-left")):(this.options.alignment="left",t.addClass("opens-right")):"right"===this.options.alignment?t.addClass("opens-left"):t.addClass("opens-right"),this.changed=!1,this._events()}},{key:"_isVertical",value:function(){return"block"===this.$tabs.css("display")||"column"===this.$element.css("flex-direction")}},{key:"_isRtl",value:function(){return this.$element.hasClass("align-right")||S()&&!this.$element.hasClass("align-left")}},{key:"_events",value:function(){var t=this,e="ontouchstart"in window||void 0!==window.ontouchstart,n="is-dropdown-submenu-parent";(this.options.clickOpen||e)&&this.$menuItems.on("click.zf.dropdownMenu touchstart.zf.dropdownMenu",(function(i){var r=p()(i.target).parentsUntil("ul",".".concat(n)),o=r.hasClass(n),a="true"===r.attr("data-is-click"),s=r.children(".is-dropdown-submenu");if(o)if(a){if(!t.options.closeOnClick||!t.options.clickOpen&&!e||t.options.forceFollow&&e)return;i.stopImmediatePropagation(),i.preventDefault(),t._hide(r)}else i.stopImmediatePropagation(),i.preventDefault(),t._show(s),r.add(r.parentsUntil(t.$element,".".concat(n))).attr("data-is-click",!0)})),t.options.closeOnClickInside&&this.$menuItems.on("click.zf.dropdownMenu",(function(){p()(this).hasClass(n)||t._hide()})),e&&this.options.disableHoverOnTouch&&(this.options.disableHover=!0),this.options.disableHover||this.$menuItems.on("mouseenter.zf.dropdownMenu",(function(){var e=p()(this);e.hasClass(n)&&(clearTimeout(e.data("_delay")),e.data("_delay",setTimeout((function(){t._show(e.children(".is-dropdown-submenu"))}),t.options.hoverDelay)))})).on("mouseleave.zf.dropdownMenu",D((function(){var e=p()(this);if(e.hasClass(n)&&t.options.autoclose){if("true"===e.attr("data-is-click")&&t.options.clickOpen)return!1;clearTimeout(e.data("_delay")),e.data("_delay",setTimeout((function(){t._hide(e)}),t.options.closingTime))}}))),this.$menuItems.on("keydown.zf.dropdownMenu",(function(e){var n,i,r=p()(e.target).parentsUntil("ul",'[role="none"]'),o=t.$tabs.index(r)>-1,a=o?t.$tabs:r.siblings("li").add(r);a.each((function(t){if(p()(this).is(r))return n=a.eq(t-1),void(i=a.eq(t+1))}));var s=function(){i.children("a:first").focus(),e.preventDefault()},l=function(){n.children("a:first").focus(),e.preventDefault()},c=function(){var n=r.children("ul.is-dropdown-submenu");n.length&&(t._show(n),r.find("li > a:first").focus(),e.preventDefault())},u=function(){var n=r.parent("ul").parent("li");n.children("a:first").focus(),t._hide(n),e.preventDefault()},h={open:c,close:function(){t._hide(t.$element),t.$menuItems.eq(0).children("a").focus(),e.preventDefault()}};o?t._isVertical()?t._isRtl()?p().extend(h,{down:s,up:l,next:u,previous:c}):p().extend(h,{down:s,up:l,next:c,previous:u}):t._isRtl()?p().extend(h,{next:l,previous:s,down:c,up:u}):p().extend(h,{next:s,previous:l,down:c,up:u}):t._isRtl()?p().extend(h,{next:u,previous:c,down:s,up:l}):p().extend(h,{next:c,previous:u,down:s,up:l}),G.handleKey(e,"DropdownMenu",h)}))}},{key:"_addBodyHandler",value:function(){var t=this,e=p()(document.body);this._removeBodyHandler(),e.on("click.zf.dropdownMenu tap.zf.dropdownMenu",(function(e){p()(e.target).closest(t.$element).length||(t._hide(),t._removeBodyHandler())}))}},{key:"_removeBodyHandler",value:function(){p()(document.body).off("click.zf.dropdownMenu tap.zf.dropdownMenu")}},{key:"_show",value:function(t){var e=this.$tabs.index(this.$tabs.filter((function(e,n){return p()(n).find(t).length>0}))),n=t.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(n,e),t.css("visibility","hidden").addClass("js-dropdown-active").parent("li.is-dropdown-submenu-parent").addClass("is-active");var i=R.ImNotTouchingYou(t,null,!0);if(!i){var r="left"===this.options.alignment?"-right":"-left",o=t.parent(".is-dropdown-submenu-parent");o.removeClass("opens".concat(r)).addClass("opens-".concat(this.options.alignment)),(i=R.ImNotTouchingYou(t,null,!0))||o.removeClass("opens-".concat(this.options.alignment)).addClass("opens-inner"),this.changed=!0}t.css("visibility",""),this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdownMenu",[t])}},{key:"_hide",value:function(t,e){var n;if((n=t&&t.length?t:void 0!==e?this.$tabs.not((function(t){return t===e})):this.$element).hasClass("is-active")||n.find(".is-active").length>0){var i=n.find("li.is-active");if(i.add(n).attr({"data-is-click":!1}).removeClass("is-active"),n.find("ul.js-dropdown-active").removeClass("js-dropdown-active"),this.changed||n.find("opens-inner").length){var r="left"===this.options.alignment?"right":"left";n.find("li.is-dropdown-submenu-parent").add(n).removeClass("opens-inner opens-".concat(this.options.alignment)).addClass("opens-".concat(r)),this.changed=!1}clearTimeout(i.data("_delay")),this._removeBodyHandler(),this.$element.trigger("hide.zf.dropdownMenu",[n])}}},{key:"_destroy",value:function(){this.$menuItems.off(".zf.dropdownMenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner"),p()(document.body).off(".zf.dropdownMenu"),X.Burn(this.$element,"dropdown")}}]),n}(ft);kt.defaults={disableHover:!1,disableHoverOnTouch:!0,autoclose:!0,hoverDelay:50,clickOpen:!1,closingTime:500,alignment:"auto",closeOnClick:!0,closeOnClickInside:!0,verticalClass:"vertical",rightClass:"align-right",forceFollow:!0};var Ct=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Equalizer",this._init()}},{key:"_init",value:function(){var t=this.$element.attr("data-equalizer")||"",e=this.$element.find('[data-equalizer-watch="'.concat(t,'"]'));A._init(),this.$watched=e.length?e:this.$element.find("[data-equalizer-watch]"),this.$element.attr("data-resize",t||k(6,"eq")),this.$element.attr("data-mutate",t||k(6,"eq")),this.hasNested=this.$element.find("[data-equalizer]").length>0,this.isNested=this.$element.parentsUntil(document.body,"[data-equalizer]").length>0,this.isOn=!1,this._bindHandler={onResizeMeBound:this._onResizeMe.bind(this),onPostEqualizedBound:this._onPostEqualized.bind(this)};var n,i=this.$element.find("img");this.options.equalizeOn?(n=this._checkMQ(),p()(window).on("changed.zf.mediaquery",this._checkMQ.bind(this))):this._events(),(void 0!==n&&!1===n||void 0===n)&&(i.length?B(i,this._reflow.bind(this)):this._reflow())}},{key:"_pauseEvents",value:function(){this.isOn=!1,this.$element.off({".zf.equalizer":this._bindHandler.onPostEqualizedBound,"resizeme.zf.trigger":this._bindHandler.onResizeMeBound,"mutateme.zf.trigger":this._bindHandler.onResizeMeBound})}},{key:"_onResizeMe",value:function(){this._reflow()}},{key:"_onPostEqualized",value:function(t){t.target!==this.$element[0]&&this._reflow()}},{key:"_events",value:function(){this._pauseEvents(),this.hasNested?this.$element.on("postequalized.zf.equalizer",this._bindHandler.onPostEqualizedBound):(this.$element.on("resizeme.zf.trigger",this._bindHandler.onResizeMeBound),this.$element.on("mutateme.zf.trigger",this._bindHandler.onResizeMeBound)),this.isOn=!0}},{key:"_checkMQ",value:function(){var t=!A.is(this.options.equalizeOn);return t?this.isOn&&(this._pauseEvents(),this.$watched.css("height","auto")):this.isOn||this._events(),t}},{key:"_killswitch",value:function(){}},{key:"_reflow",value:function(){if(!this.options.equalizeOnStack&&this._isStacked())return this.$watched.css("height","auto"),!1;this.options.equalizeByRow?this.getHeightsByRow(this.applyHeightByRow.bind(this)):this.getHeights(this.applyHeight.bind(this))}},{key:"_isStacked",value:function(){return!this.$watched[0]||!this.$watched[1]||this.$watched[0].getBoundingClientRect().top!==this.$watched[1].getBoundingClientRect().top}},{key:"getHeights",value:function(t){for(var e=[],n=0,i=this.$watched.length;n<i;n++)this.$watched[n].style.height="auto",e.push(this.$watched[n].offsetHeight);t(e)}},{key:"getHeightsByRow",value:function(t){var e=this.$watched.length?this.$watched.first().offset().top:0,n=[],i=0;n[i]=[];for(var r=0,o=this.$watched.length;r<o;r++){this.$watched[r].style.height="auto";var a=p()(this.$watched[r]).offset().top;a!==e&&(n[++i]=[],e=a),n[i].push([this.$watched[r],this.$watched[r].offsetHeight])}for(var s=0,l=n.length;s<l;s++){var c=p()(n[s]).map((function(){return this[1]})).get(),u=Math.max.apply(null,c);n[s].push(u)}t(n)}},{key:"applyHeight",value:function(t){var e=Math.max.apply(null,t);this.$element.trigger("preequalized.zf.equalizer"),this.$watched.css("height",e),this.$element.trigger("postequalized.zf.equalizer")}},{key:"applyHeightByRow",value:function(t){this.$element.trigger("preequalized.zf.equalizer");for(var e=0,n=t.length;e<n;e++){var i=t[e].length,r=t[e][i-1];if(i<=2)p()(t[e][0][0]).css({height:"auto"});else{this.$element.trigger("preequalizedrow.zf.equalizer");for(var o=0,a=i-1;o<a;o++)p()(t[e][o][0]).css({height:r});this.$element.trigger("postequalizedrow.zf.equalizer")}}this.$element.trigger("postequalized.zf.equalizer")}},{key:"_destroy",value:function(){this._pauseEvents(),this.$watched.css("height","auto")}}]),n}(ft);Ct.defaults={equalizeOnStack:!1,equalizeByRow:!1,equalizeOn:""};var It=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.rules=[],this.currentPath="",this.className="Interchange",dt.init(p()),this._init(),this._events()}},{key:"_init",value:function(){A._init();var t=this.$element[0].id||k(6,"interchange");this.$element.attr({"data-resize":t,id:t}),this._parseOptions(),this._addBreakpoints(),this._generateRules(),this._reflow()}},{key:"_events",value:function(){var t=this;this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",(function(){return t._reflow()}))}},{key:"_reflow",value:function(){var t;for(var e in this.rules)if(this.rules.hasOwnProperty(e)){var n=this.rules[e];window.matchMedia(n.query).matches&&(t=n)}t&&this.replace(t.path)}},{key:"_parseOptions",value:function(){void 0===this.options.type?this.options.type="auto":-1===["auto","src","background","html"].indexOf(this.options.type)&&(console.warn('Warning: invalid value "'.concat(this.options.type,'" for Interchange option "type"')),this.options.type="auto")}},{key:"_addBreakpoints",value:function(){for(var t in A.queries)if(A.queries.hasOwnProperty(t)){var e=A.queries[t];n.SPECIAL_QUERIES[e.name]=e.value}}},{key:"_generateRules",value:function(){var t,e=[];for(var i in t="string"==typeof(t=this.options.rules?this.options.rules:this.$element.data("interchange"))?t.match(/\[.*?, .*?\]/g):t)if(t.hasOwnProperty(i)){var r=t[i].slice(1,-1).split(", "),o=r.slice(0,-1).join(""),a=r[r.length-1];n.SPECIAL_QUERIES[a]&&(a=n.SPECIAL_QUERIES[a]),e.push({path:o,query:a})}this.rules=e}},{key:"replace",value:function(t){var e=this;if(this.currentPath!==t){var n="replaced.zf.interchange",i=this.options.type;"auto"===i&&(i="IMG"===this.$element[0].nodeName?"src":t.match(/\.(gif|jpe?g|png|svg|tiff)([?#].*)?/i)?"background":"html"),"src"===i?this.$element.attr("src",t).on("load",(function(){e.currentPath=t})).trigger(n):"background"===i?(t=t.replace(/\(/g,"%28").replace(/\)/g,"%29"),this.$element.css({"background-image":"url("+t+")"}).trigger(n)):"html"===i&&p().get(t,(function(i){e.$element.html(i).trigger(n),p()(i).foundation(),e.currentPath=t}))}}},{key:"_destroy",value:function(){this.$element.off("resizeme.zf.trigger")}}]),n}(ft);It.defaults={rules:null,type:"auto"},It.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"};var Lt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="SmoothScroll",this._init()}},{key:"_init",value:function(){var t=this.$element[0].id||k(6,"smooth-scroll");this.$element.attr({id:t}),this._events()}},{key:"_events",value:function(){this._linkClickListener=this._handleLinkClick.bind(this),this.$element.on("click.zf.smoothScroll",this._linkClickListener),this.$element.on("click.zf.smoothScroll",'a[href^="#"]',this._linkClickListener)}},{key:"_handleLinkClick",value:function(t){var e=this;if(p()(t.currentTarget).is('a[href^="#"]')){var i=t.currentTarget.getAttribute("href");this._inTransition=!0,n.scrollToLoc(i,this.options,(function(){e._inTransition=!1})),t.preventDefault()}}},{key:"_destroy",value:function(){this.$element.off("click.zf.smoothScroll",this._linkClickListener),this.$element.off("click.zf.smoothScroll",'a[href^="#"]',this._linkClickListener)}}],[{key:"scrollToLoc",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.defaults,i=arguments.length>2?arguments[2]:void 0,r=p()(t);if(!r.length)return!1;var o=Math.round(r.offset().top-e.threshold/2-e.offset);p()("html, body").stop(!0).animate({scrollTop:o},e.animationDuration,e.animationEasing,(function(){"function"==typeof i&&i()}))}}]),n}(ft);Lt.defaults={animationDuration:500,animationEasing:"linear",threshold:50,offset:0};var Dt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Magellan",dt.init(p()),this._init(),this.calcPoints()}},{key:"_init",value:function(){var t=this.$element[0].id||k(6,"magellan");this.$targets=p()("[data-magellan-target]"),this.$links=this.$element.find("a"),this.$element.attr({"data-resize":t,"data-scroll":t,id:t}),this.$active=p()(),this.scrollPos=parseInt(window.pageYOffset,10),this._events()}},{key:"calcPoints",value:function(){var t=this,e=document.body,n=document.documentElement;this.points=[],this.winHeight=Math.round(Math.max(window.innerHeight,n.clientHeight)),this.docHeight=Math.round(Math.max(e.scrollHeight,e.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)),this.$targets.each((function(){var e=p()(this),n=Math.round(e.offset().top-t.options.threshold);e.targetPoint=n,t.points.push(n)}))}},{key:"_events",value:function(){var t=this;p()(window).one("load",(function(){t.options.deepLinking&&location.hash&&t.scrollToLoc(location.hash),t.calcPoints(),t._updateActive()})),t.onLoadListener=L(p()(window),(function(){t.$element.on({"resizeme.zf.trigger":t.reflow.bind(t),"scrollme.zf.trigger":t._updateActive.bind(t)}).on("click.zf.magellan",'a[href^="#"]',(function(e){e.preventDefault();var n=this.getAttribute("href");t.scrollToLoc(n)}))})),this._deepLinkScroll=function(){t.options.deepLinking&&t.scrollToLoc(window.location.hash)},p()(window).on("hashchange",this._deepLinkScroll)}},{key:"scrollToLoc",value:function(t){this._inTransition=!0;var e=this,n={animationEasing:this.options.animationEasing,animationDuration:this.options.animationDuration,threshold:this.options.threshold,offset:this.options.offset};Lt.scrollToLoc(t,n,(function(){e._inTransition=!1}))}},{key:"reflow",value:function(){this.calcPoints(),this._updateActive()}},{key:"_updateActive",value:function(){var t=this;if(!this._inTransition){var e,n=parseInt(window.pageYOffset,10),i=this.scrollPos>n;if(this.scrollPos=n,n<this.points[0]-this.options.offset-(i?this.options.threshold:0));else if(n+this.winHeight===this.docHeight)e=this.points.length-1;else{var r=this.points.filter((function(e){return e-t.options.offset-(i?t.options.threshold:0)<=n}));e=r.length?r.length-1:0}var o=this.$active,a="";void 0!==e?(this.$active=this.$links.filter('[href="#'+this.$targets.eq(e).data("magellan-target")+'"]'),this.$active.length&&(a=this.$active[0].getAttribute("href"))):this.$active=p()();var s=!(!this.$active.length&&!o.length||this.$active.is(o)),l=a!==window.location.hash;if(s&&(o.removeClass(this.options.activeClass),this.$active.addClass(this.options.activeClass)),this.options.deepLinking&&l)if(window.history.pushState){var c=a||window.location.pathname+window.location.search;this.options.updateHistory?window.history.pushState({},"",c):window.history.replaceState({},"",c)}else window.location.hash=a;s&&this.$element.trigger("update.zf.magellan",[this.$active])}}},{key:"_destroy",value:function(){if(this.$element.off(".zf.trigger .zf.magellan").find(".".concat(this.options.activeClass)).removeClass(this.options.activeClass),this.options.deepLinking){var t=this.$active[0].getAttribute("href");window.location.hash.replace(t,"")}p()(window).off("hashchange",this._deepLinkScroll),this.onLoadListener&&p()(window).off(this.onLoadListener)}}]),n}(ft);Dt.defaults={animationDuration:500,animationEasing:"linear",threshold:50,activeClass:"is-active",deepLinking:!1,updateHistory:!1,offset:0};var At=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){var i=this;this.className="OffCanvas",this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.contentClasses={base:[],reveal:[]},this.$lastTrigger=p()(),this.$triggers=p()(),this.position="left",this.$content=p()(),this.nested=!!this.options.nested,this.$sticky=p()(),this.isInCanvas=!1,p()(["push","overlap"]).each((function(t,e){i.contentClasses.base.push("has-transition-"+e)})),p()(["left","right","top","bottom"]).each((function(t,e){i.contentClasses.base.push("has-position-"+e),i.contentClasses.reveal.push("has-reveal-"+e)})),dt.init(p()),A._init(),this._init(),this._events(),G.register("OffCanvas",{ESCAPE:"close"})}},{key:"_init",value:function(){var t=this.$element.attr("id");if(this.$element.attr("aria-hidden","true"),this.options.contentId?this.$content=p()("#"+this.options.contentId):this.$element.siblings("[data-off-canvas-content]").length?this.$content=this.$element.siblings("[data-off-canvas-content]").first():this.$content=this.$element.closest("[data-off-canvas-content]").first(),this.options.contentId?this.options.contentId&&null===this.options.nested&&console.warn("Remember to use the nested option if using the content ID option!"):this.nested=0===this.$element.siblings("[data-off-canvas-content]").length,!0===this.nested&&(this.options.transition="overlap",this.$element.removeClass("is-transition-push")),this.$element.addClass("is-transition-".concat(this.options.transition," is-closed")),this.$triggers=p()(document).find('[data-open="'+t+'"], [data-close="'+t+'"], [data-toggle="'+t+'"]').attr("aria-expanded","false").attr("aria-controls",t),this.position=this.$element.is(".position-left, .position-top, .position-right, .position-bottom")?this.$element.attr("class").match(/position\-(left|top|right|bottom)/)[1]:this.position,!0===this.options.contentOverlay){var e=document.createElement("div"),n="fixed"===p()(this.$element).css("position")?"is-overlay-fixed":"is-overlay-absolute";e.setAttribute("class","js-off-canvas-overlay "+n),this.$overlay=p()(e),"is-overlay-fixed"===n?p()(this.$overlay).insertAfter(this.$element):this.$content.append(this.$overlay)}var i=new RegExp(C(this.options.revealClass)+"([^\\s]+)","g").exec(this.$element[0].className);i&&(this.options.isRevealed=!0,this.options.revealOn=this.options.revealOn||i[1]),!0===this.options.isRevealed&&this.options.revealOn&&(this.$element.first().addClass("".concat(this.options.revealClass).concat(this.options.revealOn)),this._setMQChecker()),this.options.transitionTime&&this.$element.css("transition-duration",this.options.transitionTime),this.$sticky=this.$content.find("[data-off-canvas-sticky]"),this.$sticky.length>0&&"push"===this.options.transition&&(this.options.contentScroll=!1);var r=this.$element.attr("class").match(/\bin-canvas-for-(\w+)/);r&&2===r.length?this.options.inCanvasOn=r[1]:this.options.inCanvasOn&&this.$element.addClass("in-canvas-for-".concat(this.options.inCanvasOn)),this.options.inCanvasOn&&this._checkInCanvas(),this._removeContentClasses()}},{key:"_events",value:function(){var t=this;this.$element.off(".zf.trigger .zf.offCanvas").on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"keydown.zf.offCanvas":this._handleKeyboard.bind(this)}),!0===this.options.closeOnClick&&(this.options.contentOverlay?this.$overlay:this.$content).on({"click.zf.offCanvas":this.close.bind(this)}),this.options.inCanvasOn&&p()(window).on("changed.zf.mediaquery",(function(){t._checkInCanvas()}))}},{key:"_setMQChecker",value:function(){var t=this;this.onLoadListener=L(p()(window),(function(){A.atLeast(t.options.revealOn)&&t.reveal(!0)})),p()(window).on("changed.zf.mediaquery",(function(){A.atLeast(t.options.revealOn)?t.reveal(!0):t.reveal(!1)}))}},{key:"_checkInCanvas",value:function(){this.isInCanvas=A.atLeast(this.options.inCanvasOn),!0===this.isInCanvas&&this.close()}},{key:"_removeContentClasses",value:function(t){"boolean"!=typeof t?this.$content.removeClass(this.contentClasses.base.join(" ")):!1===t&&this.$content.removeClass("has-reveal-".concat(this.position))}},{key:"_addContentClasses",value:function(t){this._removeContentClasses(t),"boolean"!=typeof t?this.$content.addClass("has-transition-".concat(this.options.transition," has-position-").concat(this.position)):!0===t&&this.$content.addClass("has-reveal-".concat(this.position))}},{key:"_fixStickyElements",value:function(){this.$sticky.each((function(t,e){var n=p()(e);if("fixed"===n.css("position")){var i=parseInt(n.css("top"),10);n.data("offCanvasSticky",{top:i});var r=p()(document).scrollTop()+i;n.css({top:"".concat(r,"px"),width:"100%",transition:"none"})}}))}},{key:"_unfixStickyElements",value:function(){this.$sticky.each((function(t,e){var n=p()(e),i=n.data("offCanvasSticky");"object"===f(i)&&(n.css({top:"".concat(i.top,"px"),width:"",transition:""}),n.data("offCanvasSticky",""))}))}},{key:"reveal",value:function(t){t?(this.close(),this.isRevealed=!0,this.$element.attr("aria-hidden","false"),this.$element.off("open.zf.trigger toggle.zf.trigger"),this.$element.removeClass("is-closed")):(this.isRevealed=!1,this.$element.attr("aria-hidden","true"),this.$element.off("open.zf.trigger toggle.zf.trigger").on({"open.zf.trigger":this.open.bind(this),"toggle.zf.trigger":this.toggle.bind(this)}),this.$element.addClass("is-closed")),this._addContentClasses(t)}},{key:"_stopScrolling",value:function(){return!1}},{key:"_recordScrollable",value:function(t){this.lastY=t.touches[0].pageY}},{key:"_preventDefaultAtEdges",value:function(t){var e=this,n=t.data,i=e.lastY-t.touches[0].pageY;e.lastY=t.touches[0].pageY,n._canScroll(i,e)||t.preventDefault()}},{key:"_scrollboxTouchMoved",value:function(t){var e=this,n=t.data,i=e.closest("[data-off-canvas], [data-off-canvas-scrollbox-outer]"),r=e.lastY-t.touches[0].pageY;i.lastY=e.lastY=t.touches[0].pageY,t.stopPropagation(),n._canScroll(r,e)||(n._canScroll(r,i)?i.scrollTop+=r:t.preventDefault())}},{key:"_canScroll",value:function(t,e){var n=t<0,i=t>0,r=e.scrollTop>0,o=e.scrollTop<e.scrollHeight-e.clientHeight;return n&&r||i&&o}},{key:"open",value:function(t,e){var n=this;if(!(this.$element.hasClass("is-open")||this.isRevealed||this.isInCanvas)){var i=this;e&&(this.$lastTrigger=e),"top"===this.options.forceTo?window.scrollTo(0,0):"bottom"===this.options.forceTo&&window.scrollTo(0,document.body.scrollHeight),this.options.transitionTime&&"overlap"!==this.options.transition?this.$element.siblings("[data-off-canvas-content]").css("transition-duration",this.options.transitionTime):this.$element.siblings("[data-off-canvas-content]").css("transition-duration",""),this.$element.addClass("is-open").removeClass("is-closed"),this.$triggers.attr("aria-expanded","true"),this.$element.attr("aria-hidden","false"),this.$content.addClass("is-open-"+this.position),!1===this.options.contentScroll&&(p()("body").addClass("is-off-canvas-open").on("touchmove",this._stopScrolling),this.$element.on("touchstart",this._recordScrollable),this.$element.on("touchmove",this,this._preventDefaultAtEdges),this.$element.on("touchstart","[data-off-canvas-scrollbox]",this._recordScrollable),this.$element.on("touchmove","[data-off-canvas-scrollbox]",this,this._scrollboxTouchMoved)),!0===this.options.contentOverlay&&this.$overlay.addClass("is-visible"),!0===this.options.closeOnClick&&!0===this.options.contentOverlay&&this.$overlay.addClass("is-closable"),!0===this.options.autoFocus&&this.$element.one(I(this.$element),(function(){if(i.$element.hasClass("is-open")){var t=i.$element.find("[data-autofocus]");t.length?t.eq(0).focus():i.$element.find("a, button").eq(0).focus()}})),!0===this.options.trapFocus&&(this.$content.attr("tabindex","-1"),G.trapFocus(this.$element)),"push"===this.options.transition&&this._fixStickyElements(),this._addContentClasses(),this.$element.trigger("opened.zf.offCanvas"),this.$element.one(I(this.$element),(function(){n.$element.trigger("openedEnd.zf.offCanvas")}))}}},{key:"close",value:function(){var t=this;this.$element.hasClass("is-open")&&!this.isRevealed&&(this.$element.trigger("close.zf.offCanvas"),this.$element.removeClass("is-open"),this.$element.attr("aria-hidden","true"),this.$content.removeClass("is-open-left is-open-top is-open-right is-open-bottom"),!0===this.options.contentOverlay&&this.$overlay.removeClass("is-visible"),!0===this.options.closeOnClick&&!0===this.options.contentOverlay&&this.$overlay.removeClass("is-closable"),this.$triggers.attr("aria-expanded","false"),this.$element.one(I(this.$element),(function(){t.$element.addClass("is-closed"),t._removeContentClasses(),"push"===t.options.transition&&t._unfixStickyElements(),!1===t.options.contentScroll&&(p()("body").removeClass("is-off-canvas-open").off("touchmove",t._stopScrolling),t.$element.off("touchstart",t._recordScrollable),t.$element.off("touchmove",t._preventDefaultAtEdges),t.$element.off("touchstart","[data-off-canvas-scrollbox]",t._recordScrollable),t.$element.off("touchmove","[data-off-canvas-scrollbox]",t._scrollboxTouchMoved)),!0===t.options.trapFocus&&(t.$content.removeAttr("tabindex"),G.releaseFocus(t.$element)),t.$element.trigger("closed.zf.offCanvas")})))}},{key:"toggle",value:function(t,e){this.$element.hasClass("is-open")?this.close(t,e):this.open(t,e)}},{key:"_handleKeyboard",value:function(t){var e=this;G.handleKey(t,"OffCanvas",{close:function(){return e.close(),e.$lastTrigger.focus(),!0},handled:function(){t.preventDefault()}})}},{key:"_destroy",value:function(){this.close(),this.$element.off(".zf.trigger .zf.offCanvas"),this.$overlay.off(".zf.offCanvas"),this.onLoadListener&&p()(window).off(this.onLoadListener)}}]),n}(ft);At.defaults={closeOnClick:!0,contentOverlay:!0,contentId:null,nested:null,contentScroll:!0,transitionTime:null,transition:"push",forceTo:null,isRevealed:!1,revealOn:null,inCanvasOn:null,autoFocus:!0,revealClass:"reveal-for-",trapFocus:!1};var Pt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Orbit",nt.init(p()),this._init(),G.register("Orbit",{ltr:{ARROW_RIGHT:"next",ARROW_LEFT:"previous"},rtl:{ARROW_LEFT:"next",ARROW_RIGHT:"previous"}})}},{key:"_init",value:function(){this._reset(),this.$wrapper=this.$element.find(".".concat(this.options.containerClass)),this.$slides=this.$element.find(".".concat(this.options.slideClass));var t=this.$element.find("img"),e=this.$slides.filter(".is-active"),n=this.$element[0].id||k(6,"orbit");this.$element.attr({"data-resize":n,id:n}),e.length||this.$slides.eq(0).addClass("is-active"),this.options.useMUI||this.$slides.addClass("no-motionui"),t.length?B(t,this._prepareForOrbit.bind(this)):this._prepareForOrbit(),this.options.bullets&&this._loadBullets(),this._events(),this.options.autoPlay&&this.$slides.length>1&&this.geoSync(),this.options.accessible&&this.$wrapper.attr("tabindex",0)}},{key:"_loadBullets",value:function(){this.$bullets=this.$element.find(".".concat(this.options.boxOfBullets)).find("button")}},{key:"geoSync",value:function(){var t=this;this.timer=new K(this.$element,{duration:this.options.timerDelay,infinite:!1},(function(){t.changeSlide(!0)})),this.timer.start()}},{key:"_prepareForOrbit",value:function(){this._setWrapperHeight()}},{key:"_setWrapperHeight",value:function(t){var e,n=0,i=0,r=this;this.$slides.each((function(){e=this.getBoundingClientRect().height,p()(this).attr("data-slide",i),/mui/g.test(p()(this)[0].className)||r.$slides.filter(".is-active")[0]===r.$slides.eq(i)[0]||p()(this).css({display:"none"}),n=e>n?e:n,i++})),i===this.$slides.length&&(this.$wrapper.css({height:n}),t&&t(n))}},{key:"_setSlideHeight",value:function(t){this.$slides.each((function(){p()(this).css("max-height",t)}))}},{key:"_events",value:function(){var t=this;this.$element.off(".resizeme.zf.trigger").on({"resizeme.zf.trigger":this._prepareForOrbit.bind(this)}),this.$slides.length>1&&(this.options.swipe&&this.$slides.off("swipeleft.zf.orbit swiperight.zf.orbit").on("swipeleft.zf.orbit",(function(e){e.preventDefault(),t.changeSlide(!0)})).on("swiperight.zf.orbit",(function(e){e.preventDefault(),t.changeSlide(!1)})),this.options.autoPlay&&(this.$slides.on("click.zf.orbit",(function(){t.$element.data("clickedOn",!t.$element.data("clickedOn")),t.timer[t.$element.data("clickedOn")?"pause":"start"]()})),this.options.pauseOnHover&&this.$element.on("mouseenter.zf.orbit",(function(){t.timer.pause()})).on("mouseleave.zf.orbit",(function(){t.$element.data("clickedOn")||t.timer.start()}))),this.options.navButtons&&this.$element.find(".".concat(this.options.nextClass,", .").concat(this.options.prevClass)).attr("tabindex",0).on("click.zf.orbit touchend.zf.orbit",(function(e){e.preventDefault(),t.changeSlide(p()(this).hasClass(t.options.nextClass))})),this.options.bullets&&this.$bullets.on("click.zf.orbit touchend.zf.orbit",(function(){if(/is-active/g.test(this.className))return!1;var e=p()(this).data("slide"),n=e>t.$slides.filter(".is-active").data("slide"),i=t.$slides.eq(e);t.changeSlide(n,i,e)})),this.options.accessible&&this.$wrapper.add(this.$bullets).on("keydown.zf.orbit",(function(e){G.handleKey(e,"Orbit",{next:function(){t.changeSlide(!0)},previous:function(){t.changeSlide(!1)},handled:function(){p()(e.target).is(t.$bullets)&&t.$bullets.filter(".is-active").focus()}})})))}},{key:"_reset",value:function(){void 0!==this.$slides&&this.$slides.length>1&&(this.$element.off(".zf.orbit").find("*").off(".zf.orbit"),this.options.autoPlay&&this.timer.restart(),this.$slides.each((function(t){p()(t).removeClass("is-active is-active is-in").removeAttr("aria-live").hide()})),this.$slides.first().addClass("is-active").show(),this.$element.trigger("slidechange.zf.orbit",[this.$slides.first()]),this.options.bullets&&this._updateBullets(0))}},{key:"changeSlide",value:function(t,e,n){if(this.$slides){var i=this.$slides.filter(".is-active").eq(0);if(/mui/g.test(i[0].className))return!1;var r,o=this.$slides.first(),a=this.$slides.last(),s=t?"Right":"Left",l=t?"Left":"Right",c=this;(r=e||(t?this.options.infiniteWrap?i.next(".".concat(this.options.slideClass)).length?i.next(".".concat(this.options.slideClass)):o:i.next(".".concat(this.options.slideClass)):this.options.infiniteWrap?i.prev(".".concat(this.options.slideClass)).length?i.prev(".".concat(this.options.slideClass)):a:i.prev(".".concat(this.options.slideClass)))).length&&(this.$element.trigger("beforeslidechange.zf.orbit",[i,r]),this.options.bullets&&(n=n||this.$slides.index(r),this._updateBullets(n)),this.options.useMUI&&!this.$element.is(":hidden")?($.animateIn(r.addClass("is-active"),this.options["animInFrom".concat(s)],(function(){r.css({display:"block"}).attr("aria-live","polite")})),$.animateOut(i.removeClass("is-active"),this.options["animOutTo".concat(l)],(function(){i.removeAttr("aria-live"),c.options.autoPlay&&!c.timer.isPaused&&c.timer.restart()}))):(i.removeClass("is-active is-in").removeAttr("aria-live").hide(),r.addClass("is-active is-in").attr("aria-live","polite").show(),this.options.autoPlay&&!this.timer.isPaused&&this.timer.restart()),this.$element.trigger("slidechange.zf.orbit",[r]))}}},{key:"_updateBullets",value:function(t){var e=this.$bullets.filter(".is-active"),n=this.$bullets.not(".is-active"),i=this.$bullets.eq(t);e.removeClass("is-active").blur(),i.addClass("is-active");var r=e.children("[data-slide-active-label]").last();if(!r.length){var o=e.children("span");n.toArray().map((function(t){return p()(t).children("span").length})).every((function(t){return t<o.length}))&&(r=o.last()).attr("data-slide-active-label","")}r.length&&(r.detach(),i.append(r))}},{key:"_destroy",value:function(){this.$element.off(".zf.orbit").find("*").off(".zf.orbit").end().hide()}}]),n}(ft);Pt.defaults={bullets:!0,navButtons:!0,animInFromRight:"slide-in-right",animOutToRight:"slide-out-right",animInFromLeft:"slide-in-left",animOutToLeft:"slide-out-left",autoPlay:!0,timerDelay:5e3,infiniteWrap:!0,swipe:!0,pauseOnHover:!0,accessible:!0,containerClass:"orbit-container",slideClass:"orbit-slide",boxOfBullets:"orbit-bullets",nextClass:"orbit-next",prevClass:"orbit-previous",useMUI:!0};var zt={dropdown:{cssClass:"dropdown",plugin:kt},drilldown:{cssClass:"drilldown",plugin:vt},accordion:{cssClass:"accordion-menu",plugin:yt}},Nt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t){this.$element=p()(t),this.rules=this.$element.data("responsive-menu"),this.currentMq=null,this.currentPlugin=null,this.className="ResponsiveMenu",this._init(),this._events()}},{key:"_init",value:function(){if(A._init(),"string"==typeof this.rules){for(var t={},e=this.rules.split(" "),n=0;n<e.length;n++){var i=e[n].split("-"),r=i.length>1?i[0]:"small",o=i.length>1?i[1]:i[0];null!==zt[o]&&(t[r]=zt[o])}this.rules=t}p().isEmptyObject(this.rules)||this._checkMediaQueries(),this.$element.attr("data-mutate",this.$element.attr("data-mutate")||k(6,"responsive-menu"))}},{key:"_events",value:function(){var t=this;p()(window).on("changed.zf.mediaquery",(function(){t._checkMediaQueries()}))}},{key:"_checkMediaQueries",value:function(){var t,e=this;p().each(this.rules,(function(e){A.atLeast(e)&&(t=e)})),t&&(this.currentPlugin instanceof this.rules[t].plugin||(p().each(zt,(function(t,n){e.$element.removeClass(n.cssClass)})),this.$element.addClass(this.rules[t].cssClass),this.currentPlugin&&this.currentPlugin.destroy(),this.currentPlugin=new this.rules[t].plugin(this.$element,{})))}},{key:"_destroy",value:function(){this.currentPlugin.destroy(),p()(window).off(".zf.ResponsiveMenu")}}]),n}(ft);Nt.defaults={};var Rt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=p()(t),this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="ResponsiveToggle",this._init(),this._events()}},{key:"_init",value:function(){A._init();var t=this.$element.data("responsive-toggle");if(t||console.error("Your tab bar needs an ID of a Menu as the value of data-tab-bar."),this.$targetMenu=p()("#".concat(t)),this.$toggler=this.$element.find("[data-toggle]").filter((function(){var e=p()(this).data("toggle");return e===t||""===e})),this.options=p().extend({},this.options,this.$targetMenu.data()),this.options.animate){var e=this.options.animate.split(" ");this.animationIn=e[0],this.animationOut=e[1]||null}this._update()}},{key:"_events",value:function(){this._updateMqHandler=this._update.bind(this),p()(window).on("changed.zf.mediaquery",this._updateMqHandler),this.$toggler.on("click.zf.responsiveToggle",this.toggleMenu.bind(this))}},{key:"_update",value:function(){A.atLeast(this.options.hideFor)?(this.$element.hide(),this.$targetMenu.show()):(this.$element.show(),this.$targetMenu.hide())}},{key:"toggleMenu",value:function(){var t=this;A.atLeast(this.options.hideFor)||(this.options.animate?this.$targetMenu.is(":hidden")?$.animateIn(this.$targetMenu,this.animationIn,(function(){t.$element.trigger("toggled.zf.responsiveToggle"),t.$targetMenu.find("[data-mutate]").triggerHandler("mutateme.zf.trigger")})):$.animateOut(this.$targetMenu,this.animationOut,(function(){t.$element.trigger("toggled.zf.responsiveToggle")})):(this.$targetMenu.toggle(0),this.$targetMenu.find("[data-mutate]").trigger("mutateme.zf.trigger"),this.$element.trigger("toggled.zf.responsiveToggle")))}},{key:"_destroy",value:function(){this.$element.off(".zf.responsiveToggle"),this.$toggler.off(".zf.responsiveToggle"),p()(window).off("changed.zf.mediaquery",this._updateMqHandler)}}]),n}(ft);Rt.defaults={hideFor:"medium",animate:!1};var Ot=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Reveal",this._init(),nt.init(p()),dt.init(p()),G.register("Reveal",{ESCAPE:"close"})}},{key:"_init",value:function(){var t=this;A._init(),this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:A.current},this.$anchor=p()('[data-open="'.concat(this.id,'"]')).length?p()('[data-open="'.concat(this.id,'"]')):p()('[data-toggle="'.concat(this.id,'"]')),this.$anchor.attr({"aria-controls":this.id,"aria-haspopup":"dialog",tabindex:0}),(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo(p()(this.options.appendTo)),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash==="#".concat(this.id)&&(this.onLoadListener=L(p()(window),(function(){return t.open()})))}},{key:"_makeOverlay",value:function(){var t="";return this.options.additionalOverlayClasses&&(t=" "+this.options.additionalOverlayClasses),p()("<div></div>").addClass("reveal-overlay"+t).appendTo(this.options.appendTo)}},{key:"_updatePosition",value:function(){var t,e=this.$element.outerWidth(),n=p()(window).width(),i=this.$element.outerHeight(),r=p()(window).height(),o=null;t="auto"===this.options.hOffset?parseInt((n-e)/2,10):parseInt(this.options.hOffset,10),"auto"===this.options.vOffset?o=i>r?parseInt(Math.min(100,r/10),10):parseInt((r-i)/4,10):null!==this.options.vOffset&&(o=parseInt(this.options.vOffset,10)),null!==o&&this.$element.css({top:o+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:t+"px"}),this.$element.css({margin:"0px"}))}},{key:"_events",value:function(){var t=this,e=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":function(n,i){if(n.target===e.$element[0]||p()(n.target).parents("[data-closable]")[0]===i)return t.close.apply(t)},"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){e._updatePosition()}}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.dropdown tap.zf.dropdown",(function(t){t.target!==e.$element[0]&&!p().contains(e.$element[0],t.target)&&p().contains(document,t.target)&&e.close()})),this.options.deepLink&&p()(window).on("hashchange.zf.reveal:".concat(this.id),this._handleState.bind(this))}},{key:"_handleState",value:function(){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}},{key:"_disableScroll",value:function(t){t=t||p()(window).scrollTop(),p()(document).height()>p()(window).height()&&p()("html").css("top",-t)}},{key:"_enableScroll",value:function(t){t=t||parseInt(p()("html").css("top"),10),p()(document).height()>p()(window).height()&&(p()("html").css("top",""),p()(window).scrollTop(-t))}},{key:"open",value:function(){var t=this,e="#".concat(this.id);this.options.deepLink&&window.location.hash!==e&&(window.history.pushState?this.options.updateHistory?window.history.pushState({},"",e):window.history.replaceState({},"",e):window.location.hash=e),this.$activeAnchor=p()(document.activeElement).is(this.$anchor)?p()(document.activeElement):this.$anchor,this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&(this.$overlay.css({visibility:""}).hide(),this.$element.hasClass("fast")?this.$overlay.addClass("fast"):this.$element.hasClass("slow")&&this.$overlay.addClass("slow")),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id),0===p()(".reveal:visible").length&&this._disableScroll();var n=this;this.options.animationIn?(this.options.overlay&&$.animateIn(this.$overlay,"fade-in"),$.animateIn(this.$element,this.options.animationIn,(function(){t.$element&&(t.focusableElements=G.findFocusable(t.$element),n.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),n._addGlobalClasses(),G.trapFocus(n.$element))}))):(this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay)),this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),G.trapFocus(this.$element),this._addGlobalClasses(),this._addGlobalListeners(),this.$element.trigger("open.zf.reveal")}},{key:"_addGlobalClasses",value:function(){var t=function(){p()("html").toggleClass("zf-has-scroll",!!(p()(document).height()>p()(window).height()))};this.$element.on("resizeme.zf.trigger.revealScrollbarListener",(function(){return t()})),t(),p()("html").addClass("is-reveal-open")}},{key:"_removeGlobalClasses",value:function(){this.$element.off("resizeme.zf.trigger.revealScrollbarListener"),p()("html").removeClass("is-reveal-open"),p()("html").removeClass("zf-has-scroll")}},{key:"_addGlobalListeners",value:function(){var t=this;this.$element&&(this.focusableElements=G.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||p()("body").on("click.zf.dropdown tap.zf.dropdown",(function(e){e.target!==t.$element[0]&&!p().contains(t.$element[0],e.target)&&p().contains(document,e.target)&&t.close()})),this.options.closeOnEsc&&p()(window).on("keydown.zf.reveal",(function(e){G.handleKey(e,"Reveal",{close:function(){t.options.closeOnEsc&&t.close()}})})))}},{key:"close",value:function(){if(!this.isActive||!this.$element.is(":visible"))return!1;var t=this;function e(){var e=parseInt(p()("html").css("top"),10);0===p()(".reveal:visible").length&&t._removeGlobalClasses(),G.releaseFocus(t.$element),t.$element.attr("aria-hidden",!0),0===p()(".reveal:visible").length&&t._enableScroll(e),t.$element.trigger("closed.zf.reveal")}if(this.options.animationOut?(this.options.overlay&&$.animateOut(this.$overlay,"fade-out"),$.animateOut(this.$element,this.options.animationOut,e)):(this.$element.hide(this.options.hideDelay),this.options.overlay?this.$overlay.hide(0,e):e()),this.options.closeOnEsc&&p()(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&p()("body").off("click.zf.dropdown tap.zf.dropdown"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,t.options.deepLink&&window.location.hash==="#".concat(this.id))if(window.history.replaceState){var n=window.location.pathname+window.location.search;this.options.updateHistory?window.history.pushState({},"",n):window.history.replaceState("",document.title,n)}else window.location.hash="";this.$activeAnchor.focus()}},{key:"toggle",value:function(){this.isActive?this.close():this.open()}},{key:"_destroy",value:function(){this.options.overlay&&(this.$element.appendTo(p()(this.options.appendTo)),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),p()(window).off(".zf.reveal:".concat(this.id)),this.onLoadListener&&p()(window).off(this.onLoadListener),0===p()(".reveal:visible").length&&this._removeGlobalClasses()}}]),n}(ft);Ot.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,overlay:!0,resetOnClose:!1,deepLink:!1,updateHistory:!1,appendTo:"body",additionalOverlayClasses:""};var Ft=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Slider",this.initialized=!1,nt.init(p()),dt.init(p()),this._init(),G.register("Slider",{ltr:{ARROW_RIGHT:"increase",ARROW_UP:"increase",ARROW_DOWN:"decrease",ARROW_LEFT:"decrease",SHIFT_ARROW_RIGHT:"increaseFast",SHIFT_ARROW_UP:"increaseFast",SHIFT_ARROW_DOWN:"decreaseFast",SHIFT_ARROW_LEFT:"decreaseFast",HOME:"min",END:"max"},rtl:{ARROW_LEFT:"increase",ARROW_RIGHT:"decrease",SHIFT_ARROW_LEFT:"increaseFast",SHIFT_ARROW_RIGHT:"decreaseFast"}})}},{key:"_init",value:function(){this.inputs=this.$element.find("input"),this.handles=this.$element.find("[data-slider-handle]"),this.$handle=this.handles.eq(0),this.$input=this.inputs.length?this.inputs.eq(0):p()("#".concat(this.$handle.attr("aria-controls"))),this.$fill=this.$element.find("[data-slider-fill]").css(this.options.vertical?"height":"width",0),(this.options.disabled||this.$element.hasClass(this.options.disabledClass))&&(this.options.disabled=!0,this.$element.addClass(this.options.disabledClass)),this.inputs.length||(this.inputs=p()().add(this.$input),this.options.binding=!0),this._setInitAttr(0),this.handles[1]&&(this.options.doubleSided=!0,this.$handle2=this.handles.eq(1),this.$input2=this.inputs.length>1?this.inputs.eq(1):p()("#".concat(this.$handle2.attr("aria-controls"))),this.inputs[1]||(this.inputs=this.inputs.add(this.$input2)),this._setInitAttr(1)),this.setHandles(),this._events(),this.initialized=!0}},{key:"setHandles",value:function(){var t=this;this.handles[1]?this._setHandlePos(this.$handle,this.inputs.eq(0).val(),(function(){t._setHandlePos(t.$handle2,t.inputs.eq(1).val())})):this._setHandlePos(this.$handle,this.inputs.eq(0).val())}},{key:"_reflow",value:function(){this.setHandles()}},{key:"_pctOfBar",value:function(t){var e=Bt(t-this.options.start,this.options.end-this.options.start);switch(this.options.positionValueFunction){case"pow":e=this._logTransform(e);break;case"log":e=this._powTransform(e)}return e.toFixed(2)}},{key:"_value",value:function(t){switch(this.options.positionValueFunction){case"pow":t=this._powTransform(t);break;case"log":t=this._logTransform(t)}return this.options.vertical?parseFloat(this.options.end)+t*(this.options.start-this.options.end):(this.options.end-this.options.start)*t+parseFloat(this.options.start)}},{key:"_logTransform",value:function(t){return function(t,e){return Math.log(e)/Math.log(t)}(this.options.nonLinearBase,t*(this.options.nonLinearBase-1)+1)}},{key:"_powTransform",value:function(t){return(Math.pow(this.options.nonLinearBase,t)-1)/(this.options.nonLinearBase-1)}},{key:"_setHandlePos",value:function(t,e,n){if(!this.$element.hasClass(this.options.disabledClass)){(e=parseFloat(e))<this.options.start?e=this.options.start:e>this.options.end&&(e=this.options.end);var i=this.options.doubleSided;if(i)if(0===this.handles.index(t)){var r=parseFloat(this.$handle2.attr("aria-valuenow"));e=e>=r?r-this.options.step:e}else{var o=parseFloat(this.$handle.attr("aria-valuenow"));e=e<=o?o+this.options.step:e}var a=this,s=this.options.vertical,l=s?"height":"width",c=s?"top":"left",u=t[0].getBoundingClientRect()[l],h=this.$element[0].getBoundingClientRect()[l],d=this._pctOfBar(e),p=(100*Bt((h-u)*d,h)).toFixed(this.options.decimal);e=parseFloat(e.toFixed(this.options.decimal));var f={};if(this._setValues(t,e),i){var m,g=0===this.handles.index(t),_=Math.floor(100*Bt(u,h));if(g)f[c]="".concat(p,"%"),m=parseFloat(this.$handle2[0].style[c])-p+_,n&&"function"==typeof n&&n();else{var y=parseFloat(this.$handle[0].style[c]);m=p-(isNaN(y)?(this.options.initialStart-this.options.start)/((this.options.end-this.options.start)/100):y)+_}f["min-".concat(l)]="".concat(m,"%")}Z(this.$element.data("dragging")?1e3/60:this.options.moveTime,t,(function(){isNaN(p)?t.css(c,"".concat(100*d,"%")):t.css(c,"".concat(p,"%")),a.options.doubleSided?a.$fill.css(f):a.$fill.css(l,"".concat(100*d,"%"))})),this.initialized&&(this.$element.one("finished.zf.animate",(function(){a.$element.trigger("moved.zf.slider",[t])})),clearTimeout(a.timeout),a.timeout=setTimeout((function(){a.$element.trigger("changed.zf.slider",[t])}),a.options.changedDelay))}}},{key:"_setInitAttr",value:function(t){var e=0===t?this.options.initialStart:this.options.initialEnd,n=this.inputs.eq(t).attr("id")||k(6,"slider");this.inputs.eq(t).attr({id:n,max:this.options.end,min:this.options.start,step:this.options.step}),this.inputs.eq(t).val(e),this.handles.eq(t).attr({role:"slider","aria-controls":n,"aria-valuemax":this.options.end,"aria-valuemin":this.options.start,"aria-valuenow":e,"aria-orientation":this.options.vertical?"vertical":"horizontal",tabindex:0})}},{key:"_setValues",value:function(t,e){var n=this.options.doubleSided?this.handles.index(t):0;this.inputs.eq(n).val(e),t.attr("aria-valuenow",e)}},{key:"_handleEvent",value:function(t,e,n){var i;if(n)i=this._adjustValue(null,n);else{t.preventDefault();var r=this.options.vertical,o=r?"height":"width",a=r?"top":"left",s=r?t.pageY:t.pageX,l=this.$element[0].getBoundingClientRect()[o],c=r?p()(window).scrollTop():p()(window).scrollLeft(),u=this.$element.offset()[a];t.clientY===t.pageY&&(s+=c);var h,d=s-u,f=Bt(h=d<0?0:d>l?l:d,l);i=this._value(f),S()&&!this.options.vertical&&(i=this.options.end-i),i=this._adjustValue(null,i),e||(e=Ut(this.$handle,a,h,o)<=Ut(this.$handle2,a,h,o)?this.$handle:this.$handle2)}this._setHandlePos(e,i)}},{key:"_adjustValue",value:function(t,e){var n,i,r,o=this.options.step,a=parseFloat(o/2);return 0===(i=(n=t?parseFloat(t.attr("aria-valuenow")):e)>=0?n%o:o+n%o)?n:n=n>=(r=n-i)+a?r+o:r}},{key:"_events",value:function(){this._eventsForHandle(this.$handle),this.handles[1]&&this._eventsForHandle(this.$handle2)}},{key:"_eventsForHandle",value:function(t){var e,n=this,i=function(t){var e=n.inputs.index(p()(this));n._handleEvent(t,n.handles.eq(e),p()(this).val())};if(this.inputs.off("keyup.zf.slider").on("keyup.zf.slider",(function(t){13===t.keyCode&&i.call(this,t)})),this.inputs.off("change.zf.slider").on("change.zf.slider",i),this.options.clickSelect&&this.$element.off("click.zf.slider").on("click.zf.slider",(function(t){if(n.$element.data("dragging"))return!1;p()(t.target).is("[data-slider-handle]")||(n.options.doubleSided?n._handleEvent(t):n._handleEvent(t,n.$handle))})),this.options.draggable){this.handles.addTouch();var r=p()("body");t.off("mousedown.zf.slider").on("mousedown.zf.slider",(function(i){t.addClass("is-dragging"),n.$fill.addClass("is-dragging"),n.$element.data("dragging",!0),e=p()(i.currentTarget),r.on("mousemove.zf.slider",(function(t){t.preventDefault(),n._handleEvent(t,e)})).on("mouseup.zf.slider",(function(i){n._handleEvent(i,e),t.removeClass("is-dragging"),n.$fill.removeClass("is-dragging"),n.$element.data("dragging",!1),r.off("mousemove.zf.slider mouseup.zf.slider")}))})).on("selectstart.zf.slider touchmove.zf.slider",(function(t){t.preventDefault()}))}t.off("keydown.zf.slider").on("keydown.zf.slider",(function(t){var e,i=p()(this),r=n.options.doubleSided?n.handles.index(i):0,o=parseFloat(n.inputs.eq(r).val());G.handleKey(t,"Slider",{decrease:function(){e=o-n.options.step},increase:function(){e=o+n.options.step},decreaseFast:function(){e=o-10*n.options.step},increaseFast:function(){e=o+10*n.options.step},min:function(){e=n.options.start},max:function(){e=n.options.end},handled:function(){t.preventDefault(),n._setHandlePos(i,e)}})}))}},{key:"_destroy",value:function(){this.handles.off(".zf.slider"),this.inputs.off(".zf.slider"),this.$element.off(".zf.slider"),clearTimeout(this.timeout)}}]),n}(ft);function Bt(t,e){return t/e}function Ut(t,e,n,i){return Math.abs(t.position()[e]+t[i]()/2-n)}Ft.defaults={start:0,end:100,step:1,initialStart:0,initialEnd:100,binding:!1,clickSelect:!0,vertical:!1,draggable:!0,disabled:!1,doubleSided:!1,decimal:2,moveTime:200,disabledClass:"disabled",invertVertical:!1,changedDelay:500,nonLinearBase:5,positionValueFunction:"linear"};var Yt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Sticky",dt.init(p()),this._init()}},{key:"_init",value:function(){A._init();var t=this.$element.parent("[data-sticky-container]"),e=this.$element[0].id||k(6,"sticky"),n=this;t.length?this.$container=t:(this.wasWrapped=!0,this.$element.wrap(this.options.container),this.$container=this.$element.parent()),this.$container.addClass(this.options.containerClass),this.$element.addClass(this.options.stickyClass).attr({"data-resize":e,"data-mutate":e}),""!==this.options.anchor&&p()("#"+n.options.anchor).attr({"data-mutate":e}),this.scrollCount=this.options.checkEvery,this.isStuck=!1,this.onLoadListener=L(p()(window),(function(){n.containerHeight="none"===n.$element.css("display")?0:n.$element[0].getBoundingClientRect().height,n.$container.css("height",n.containerHeight),n.elemHeight=n.containerHeight,""!==n.options.anchor?n.$anchor=p()("#"+n.options.anchor):n._parsePoints(),n._setSizes((function(){var t=window.pageYOffset;n._calc(!1,t),n.isStuck||n._removeSticky(!(t>=n.topPoint))})),n._events(e.split("-").reverse().join("-"))}))}},{key:"_parsePoints",value:function(){for(var t=[""===this.options.topAnchor?1:this.options.topAnchor,""===this.options.btmAnchor?document.documentElement.scrollHeight:this.options.btmAnchor],e={},n=0,i=t.length;n<i&&t[n];n++){var r;if("number"==typeof t[n])r=t[n];else{var o=t[n].split(":"),a=p()("#".concat(o[0]));r=a.offset().top,o[1]&&"bottom"===o[1].toLowerCase()&&(r+=a[0].getBoundingClientRect().height)}e[n]=r}this.points=e}},{key:"_events",value:function(t){var e=this,n=this.scrollListener="scroll.zf.".concat(t);this.isOn||(this.canStick&&(this.isOn=!0,p()(window).off(n).on(n,(function(){0===e.scrollCount?(e.scrollCount=e.options.checkEvery,e._setSizes((function(){e._calc(!1,window.pageYOffset)}))):(e.scrollCount--,e._calc(!1,window.pageYOffset))}))),this.$element.off("resizeme.zf.trigger").on("resizeme.zf.trigger",(function(){e._eventsHandler(t)})),this.$element.on("mutateme.zf.trigger",(function(){e._eventsHandler(t)})),this.$anchor&&this.$anchor.on("mutateme.zf.trigger",(function(){e._eventsHandler(t)})))}},{key:"_eventsHandler",value:function(t){var e=this,n=this.scrollListener="scroll.zf.".concat(t);e._setSizes((function(){e._calc(!1),e.canStick?e.isOn||e._events(t):e.isOn&&e._pauseListeners(n)}))}},{key:"_pauseListeners",value:function(t){this.isOn=!1,p()(window).off(t),this.$element.trigger("pause.zf.sticky")}},{key:"_calc",value:function(t,e){if(t&&this._setSizes(),!this.canStick)return this.isStuck&&this._removeSticky(!0),!1;e||(e=window.pageYOffset),e>=this.topPoint?e<=this.bottomPoint?this.isStuck||this._setSticky():this.isStuck&&this._removeSticky(!1):this.isStuck&&this._removeSticky(!0)}},{key:"_setSticky",value:function(){var t=this,e=this.options.stickTo,n="top"===e?"marginTop":"marginBottom",i="top"===e?"bottom":"top",r={};r[n]="".concat(this.options[n],"em"),r[e]=0,r[i]="auto",this.isStuck=!0,this.$element.removeClass("is-anchored is-at-".concat(i)).addClass("is-stuck is-at-".concat(e)).css(r).trigger("sticky.zf.stuckto:".concat(e)),this.$element.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",(function(){t._setSizes()}))}},{key:"_removeSticky",value:function(t){var e=this.options.stickTo,n="top"===e,i={},r=(this.points?this.points[1]-this.points[0]:this.anchorHeight)-this.elemHeight,o=t?"top":"bottom";i[n?"marginTop":"marginBottom"]=0,i.bottom="auto",i.top=t?0:r,this.isStuck=!1,this.$element.removeClass("is-stuck is-at-".concat(e)).addClass("is-anchored is-at-".concat(o)).css(i).trigger("sticky.zf.unstuckfrom:".concat(o))}},{key:"_setSizes",value:function(t){this.canStick=A.is(this.options.stickyOn),this.canStick||t&&"function"==typeof t&&t();var e=this.$container[0].getBoundingClientRect().width,n=window.getComputedStyle(this.$container[0]),i=parseInt(n["padding-left"],10),r=parseInt(n["padding-right"],10);if(this.$anchor&&this.$anchor.length?this.anchorHeight=this.$anchor[0].getBoundingClientRect().height:this._parsePoints(),this.$element.css({"max-width":"".concat(e-i-r,"px")}),this.options.dynamicHeight||!this.containerHeight){var o=this.$element[0].getBoundingClientRect().height||this.containerHeight;o="none"===this.$element.css("display")?0:o,this.$container.css("height",o),this.containerHeight=o}if(this.elemHeight=this.containerHeight,!this.isStuck&&this.$element.hasClass("is-at-bottom")){var a=(this.points?this.points[1]-this.$container.offset().top:this.anchorHeight)-this.elemHeight;this.$element.css("top",a)}this._setBreakPoints(this.containerHeight,(function(){t&&"function"==typeof t&&t()}))}},{key:"_setBreakPoints",value:function(t,e){if(!this.canStick){if(!e||"function"!=typeof e)return!1;e()}var n=jt(this.options.marginTop),i=jt(this.options.marginBottom),r=this.points?this.points[0]:this.$anchor.offset().top,o=this.points?this.points[1]:r+this.anchorHeight,a=window.innerHeight;"top"===this.options.stickTo?(r-=n,o-=t+n):"bottom"===this.options.stickTo&&(r-=a-(t+i),o-=a-i),this.topPoint=r,this.bottomPoint=o,e&&"function"==typeof e&&e()}},{key:"_destroy",value:function(){this._removeSticky(!0),this.$element.removeClass("".concat(this.options.stickyClass," is-anchored is-at-top")).css({height:"",top:"",bottom:"","max-width":""}).off("resizeme.zf.trigger").off("mutateme.zf.trigger"),this.$anchor&&this.$anchor.length&&this.$anchor.off("change.zf.sticky"),this.scrollListener&&p()(window).off(this.scrollListener),this.onLoadListener&&p()(window).off(this.onLoadListener),this.wasWrapped?this.$element.unwrap():this.$container.removeClass(this.options.containerClass).css({height:""})}}]),n}(ft);function jt(t){return parseInt(window.getComputedStyle(document.body,null).fontSize,10)*t}Yt.defaults={container:"<div data-sticky-container></div>",stickTo:"top",anchor:"",topAnchor:"",btmAnchor:"",marginTop:1,marginBottom:1,stickyOn:"medium",stickyClass:"sticky",containerClass:"sticky-container",dynamicHeight:!0,checkEvery:-1};var Vt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Tabs",this._init(),G.register("Tabs",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"previous",ARROW_DOWN:"next",ARROW_LEFT:"previous"})}},{key:"_init",value:function(){var t=this,e=this;if(this._isInitializing=!0,this.$element.attr({role:"tablist"}),this.$tabTitles=this.$element.find(".".concat(this.options.linkClass)),this.$tabContent=p()('[data-tabs-content="'.concat(this.$element[0].id,'"]')),this.$tabTitles.each((function(){var t=p()(this),n=t.find("a"),i=t.hasClass("".concat(e.options.linkActiveClass)),r=n.attr("data-tabs-target")||n[0].hash.slice(1),o=n[0].id?n[0].id:"".concat(r,"-label"),a=p()("#".concat(r));t.attr({role:"presentation"}),n.attr({role:"tab","aria-controls":r,"aria-selected":i,id:o,tabindex:i?"0":"-1"}),a.attr({role:"tabpanel","aria-labelledby":o}),i&&(e._initialAnchor="#".concat(r)),i||a.attr("aria-hidden","true"),i&&e.options.autoFocus&&(e.onLoadListener=L(p()(window),(function(){p()("html, body").animate({scrollTop:t.offset().top},e.options.deepLinkSmudgeDelay,(function(){n.focus()}))})))})),this.options.matchHeight){var n=this.$tabContent.find("img");n.length?B(n,this._setHeight.bind(this)):this._setHeight()}this._checkDeepLink=function(){var e=window.location.hash;if(!e.length){if(t._isInitializing)return;t._initialAnchor&&(e=t._initialAnchor)}var n=e.indexOf("#")>=0?e.slice(1):e,i=n&&p()("#".concat(n)),r=e&&t.$element.find('[href$="'.concat(e,'"],[data-tabs-target="').concat(n,'"]')).first();if(i.length&&r.length){if(i&&i.length&&r&&r.length?t.selectTab(i,!0):t._collapse(),t.options.deepLinkSmudge){var o=t.$element.offset();p()("html, body").animate({scrollTop:o.top-t.options.deepLinkSmudgeOffset},t.options.deepLinkSmudgeDelay)}t.$element.trigger("deeplink.zf.tabs",[r,i])}},this.options.deepLink&&this._checkDeepLink(),this._events(),this._isInitializing=!1}},{key:"_events",value:function(){this._addKeyHandler(),this._addClickHandler(),this._setHeightMqHandler=null,this.options.matchHeight&&(this._setHeightMqHandler=this._setHeight.bind(this),p()(window).on("changed.zf.mediaquery",this._setHeightMqHandler)),this.options.deepLink&&p()(window).on("hashchange",this._checkDeepLink)}},{key:"_addClickHandler",value:function(){var t=this;this.$element.off("click.zf.tabs").on("click.zf.tabs",".".concat(this.options.linkClass),(function(e){e.preventDefault(),t._handleTabChange(p()(this))}))}},{key:"_addKeyHandler",value:function(){var t=this;this.$tabTitles.off("keydown.zf.tabs").on("keydown.zf.tabs",(function(e){if(9!==e.which){var n,i,r=p()(this),o=r.parent("ul").children("li");o.each((function(e){p()(this).is(r)&&(t.options.wrapOnKeys?(n=0===e?o.last():o.eq(e-1),i=e===o.length-1?o.first():o.eq(e+1)):(n=o.eq(Math.max(0,e-1)),i=o.eq(Math.min(e+1,o.length-1))))})),G.handleKey(e,"Tabs",{open:function(){r.find('[role="tab"]').focus(),t._handleTabChange(r)},previous:function(){n.find('[role="tab"]').focus(),t._handleTabChange(n)},next:function(){i.find('[role="tab"]').focus(),t._handleTabChange(i)},handled:function(){e.preventDefault()}})}}))}},{key:"_handleTabChange",value:function(t,e){if(t.hasClass("".concat(this.options.linkActiveClass)))this.options.activeCollapse&&this._collapse();else{var n=this.$element.find(".".concat(this.options.linkClass,".").concat(this.options.linkActiveClass)),i=t.find('[role="tab"]'),r=i.attr("data-tabs-target"),o=r&&r.length?"#".concat(r):i[0].hash,a=this.$tabContent.find(o);this._collapseTab(n),this._openTab(t),this.options.deepLink&&!e&&(this.options.updateHistory?history.pushState({},"",o):history.replaceState({},"",o)),this.$element.trigger("change.zf.tabs",[t,a]),a.find("[data-mutate]").trigger("mutateme.zf.trigger")}}},{key:"_openTab",value:function(t){var e=t.find('[role="tab"]'),n=e.attr("data-tabs-target")||e[0].hash.slice(1),i=this.$tabContent.find("#".concat(n));t.addClass("".concat(this.options.linkActiveClass)),e.attr({"aria-selected":"true",tabindex:"0"}),i.addClass("".concat(this.options.panelActiveClass)).removeAttr("aria-hidden")}},{key:"_collapseTab",value:function(t){var e=t.removeClass("".concat(this.options.linkActiveClass)).find('[role="tab"]').attr({"aria-selected":"false",tabindex:-1});p()("#".concat(e.attr("aria-controls"))).removeClass("".concat(this.options.panelActiveClass)).attr({"aria-hidden":"true"})}},{key:"_collapse",value:function(){var t=this.$element.find(".".concat(this.options.linkClass,".").concat(this.options.linkActiveClass));t.length&&(this._collapseTab(t),this.$element.trigger("collapse.zf.tabs",[t]))}},{key:"selectTab",value:function(t,e){var n,i;(n="object"===f(t)?t[0].id:t).indexOf("#")<0?i="#".concat(n):(i=n,n=n.slice(1));var r=this.$tabTitles.has('[href$="'.concat(i,'"],[data-tabs-target="').concat(n,'"]')).first();this._handleTabChange(r,e)}},{key:"_setHeight",value:function(){var t=0,e=this;this.$tabContent&&this.$tabContent.find(".".concat(this.options.panelClass)).css("min-height","").each((function(){var n=p()(this),i=n.hasClass("".concat(e.options.panelActiveClass));i||n.css({visibility:"hidden",display:"block"});var r=this.getBoundingClientRect().height;i||n.css({visibility:"",display:""}),t=r>t?r:t})).css("min-height","".concat(t,"px"))}},{key:"_destroy",value:function(){this.$element.find(".".concat(this.options.linkClass)).off(".zf.tabs").hide().end().find(".".concat(this.options.panelClass)).hide(),this.options.matchHeight&&null!=this._setHeightMqHandler&&p()(window).off("changed.zf.mediaquery",this._setHeightMqHandler),this.options.deepLink&&p()(window).off("hashchange",this._checkDeepLink),this.onLoadListener&&p()(window).off(this.onLoadListener)}}]),n}(ft);Vt.defaults={deepLink:!1,deepLinkSmudge:!1,deepLinkSmudgeDelay:300,deepLinkSmudgeOffset:0,updateHistory:!1,autoFocus:!1,wrapOnKeys:!0,matchHeight:!1,activeCollapse:!1,linkClass:"tabs-title",linkActiveClass:"is-active",panelClass:"tabs-panel",panelActiveClass:"is-active"};var Gt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,t.data(),e),this.className="",this.className="Toggler",dt.init(p()),this._init(),this._events()}},{key:"_init",value:function(){var t,e=this.$element[0].id,n=p()('[data-open~="'.concat(e,'"], [data-close~="').concat(e,'"], [data-toggle~="').concat(e,'"]'));if(this.options.animate)t=this.options.animate.split(" "),this.animationIn=t[0],this.animationOut=t[1]||null,n.attr("aria-expanded",!this.$element.is(":hidden"));else{if("string"!=typeof(t=this.options.toggler)||!t.length)throw new Error("The 'toggler' option containing the target class is required, got \"".concat(t,'"'));this.className="."===t[0]?t.slice(1):t,n.attr("aria-expanded",this.$element.hasClass(this.className))}n.each((function(t,n){var i=p()(n),r=i.attr("aria-controls")||"";new RegExp("\\b".concat(C(e),"\\b")).test(r)||i.attr("aria-controls",r?"".concat(r," ").concat(e):e)}))}},{key:"_events",value:function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this))}},{key:"toggle",value:function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]()}},{key:"_toggleClass",value:function(){this.$element.toggleClass(this.className);var t=this.$element.hasClass(this.className);t?this.$element.trigger("on.zf.toggler"):this.$element.trigger("off.zf.toggler"),this._updateARIA(t),this.$element.find("[data-mutate]").trigger("mutateme.zf.trigger")}},{key:"_toggleAnimate",value:function(){var t=this;this.$element.is(":hidden")?$.animateIn(this.$element,this.animationIn,(function(){t._updateARIA(!0),this.trigger("on.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")})):$.animateOut(this.$element,this.animationOut,(function(){t._updateARIA(!1),this.trigger("off.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")}))}},{key:"_updateARIA",value:function(t){var e=this.$element[0].id;p()('[data-open="'.concat(e,'"], [data-close="').concat(e,'"], [data-toggle="').concat(e,'"]')).attr({"aria-expanded":!!t})}},{key:"_destroy",value:function(){this.$element.off(".zf.toggler")}}]),n}(ft);Gt.defaults={toggler:void 0,animate:!1};var qt=function(t){y(n,t);var e=E(n);function n(){return m(this,n),e.apply(this,arguments)}return _(n,[{key:"_setup",value:function(t,e){this.$element=t,this.options=p().extend({},n.defaults,this.$element.data(),e),this.className="Tooltip",this.isActive=!1,this.isClick=!1,dt.init(p()),this._init()}},{key:"_init",value:function(){A._init();var t=this.$element.attr("aria-describedby")||k(6,"tooltip");this.options.tipText=this.options.tipText||this.$element.attr("title"),this.template=this.options.template?p()(this.options.template):this._buildTemplate(t),this.options.allowHtml?this.template.appendTo(document.body).html(this.options.tipText).hide():this.template.appendTo(document.body).text(this.options.tipText).hide(),this.$element.attr({title:"","aria-describedby":t,"data-yeti-box":t,"data-toggle":t,"data-resize":t}).addClass(this.options.triggerClass),M(v(n.prototype),"_init",this).call(this),this._events()}},{key:"_getDefaultPosition",value:function(){var t=this.$element[0].className;this.$element[0]instanceof SVGElement&&(t=t.baseVal);var e=t.match(/\b(top|left|right|bottom)\b/g);return e?e[0]:"top"}},{key:"_getDefaultAlignment",value:function(){return"center"}},{key:"_getHOffset",value:function(){return"left"===this.position||"right"===this.position?this.options.hOffset+this.options.tooltipWidth:this.options.hOffset}},{key:"_getVOffset",value:function(){return"top"===this.position||"bottom"===this.position?this.options.vOffset+this.options.tooltipHeight:this.options.vOffset}},{key:"_buildTemplate",value:function(t){var e="".concat(this.options.tooltipClass," ").concat(this.options.templateClasses).trim();return p()("<div></div>").addClass(e).attr({role:"tooltip","aria-hidden":!0,"data-is-active":!1,"data-is-focus":!1,id:t})}},{key:"_setPosition",value:function(){M(v(n.prototype),"_setPosition",this).call(this,this.$element,this.template)}},{key:"show",value:function(){if("all"!==this.options.showOn&&!A.is(this.options.showOn))return!1;this.template.css("visibility","hidden").show(),this._setPosition(),this.template.removeClass("top bottom left right").addClass(this.position),this.template.removeClass("align-top align-bottom align-left align-right align-center").addClass("align-"+this.alignment),this.$element.trigger("closeme.zf.tooltip",this.template.attr("id")),this.template.attr({"data-is-active":!0,"aria-hidden":!1}),this.isActive=!0,this.template.stop().hide().css("visibility","").fadeIn(this.options.fadeInDuration,(function(){})),this.$element.trigger("show.zf.tooltip")}},{key:"hide",value:function(){var t=this;this.template.stop().attr({"aria-hidden":!0,"data-is-active":!1}).fadeOut(this.options.fadeOutDuration,(function(){t.isActive=!1,t.isClick=!1})),this.$element.trigger("hide.zf.tooltip")}},{key:"_events",value:function(){var t=this,e="ontouchstart"in window||void 0!==window.ontouchstart,n=!1;e&&this.options.disableForTouch||(this.options.disableHover||this.$element.on("mouseenter.zf.tooltip",(function(){t.isActive||(t.timeout=setTimeout((function(){t.show()}),t.options.hoverDelay))})).on("mouseleave.zf.tooltip",D((function(){clearTimeout(t.timeout),(!n||t.isClick&&!t.options.clickOpen)&&t.hide()}))),e&&this.$element.on("tap.zf.tooltip touchend.zf.tooltip",(function(){t.isActive?t.hide():t.show()})),this.options.clickOpen?this.$element.on("mousedown.zf.tooltip",(function(){t.isClick||(t.isClick=!0,!t.options.disableHover&&t.$element.attr("tabindex")||t.isActive||t.show())})):this.$element.on("mousedown.zf.tooltip",(function(){t.isClick=!0})),this.$element.on({"close.zf.trigger":this.hide.bind(this)}),this.$element.on("focus.zf.tooltip",(function(){if(n=!0,t.isClick)return t.options.clickOpen||(n=!1),!1;t.show()})).on("focusout.zf.tooltip",(function(){n=!1,t.isClick=!1,t.hide()})).on("resizeme.zf.trigger",(function(){t.isActive&&t._setPosition()})))}},{key:"toggle",value:function(){this.isActive?this.hide():this.show()}},{key:"_destroy",value:function(){this.$element.attr("title",this.template.text()).off(".zf.trigger .zf.tooltip").removeClass(this.options.triggerClass).removeClass("top right left bottom").removeAttr("aria-describedby data-disable-hover data-resize data-toggle data-tooltip data-yeti-box"),this.template.remove()}}]),n}(Tt);qt.defaults={hoverDelay:200,fadeInDuration:150,fadeOutDuration:150,disableHover:!1,disableForTouch:!1,templateClasses:"",tooltipClass:"tooltip",triggerClass:"has-tip",showOn:"small",template:"",tipText:"",touchCloseText:"Tap to close.",clickOpen:!0,position:"auto",alignment:"auto",allowOverlap:!1,allowBottomOverlap:!1,vOffset:0,hOffset:0,tooltipHeight:14,tooltipWidth:12,allowHtml:!1};var Ht={tabs:{cssClass:"tabs",plugin:Vt,open:function(t,e){return t.selectTab(e)},close:null,toggle:null},accordion:{cssClass:"accordion",plugin:_t,open:function(t,e){return t.down(p()(e))},close:function(t,e){return t.up(p()(e))},toggle:function(t,e){return t.toggle(p()(e))}}},$t=function(t){y(n,t);var e=E(n);function n(t,i){var r;return m(this,n),w(r=e.call(this,t,i),r.options.reflow&&r.storezfData||x(r))}return _(n,[{key:"_setup",value:function(t,e){this.$element=p()(t),this.$element.data("zfPluginBase",this),this.options=p().extend({},n.defaults,this.$element.data(),e),this.rules=this.$element.data("responsive-accordion-tabs"),this.currentMq=null,this.currentRule=null,this.currentPlugin=null,this.className="ResponsiveAccordionTabs",this.$element.attr("id")||this.$element.attr("id",k(6,"responsiveaccordiontabs")),this._init(),this._events()}},{key:"_init",value:function(){if(A._init(),"string"==typeof this.rules){for(var t={},e=this.rules.split(" "),n=0;n<e.length;n++){var i=e[n].split("-"),r=i.length>1?i[0]:"small",o=i.length>1?i[1]:i[0];null!==Ht[o]&&(t[r]=Ht[o])}this.rules=t}this._getAllOptions(),p().isEmptyObject(this.rules)||this._checkMediaQueries()}},{key:"_getAllOptions",value:function(){var t=this;for(var e in t.allOptions={},Ht)if(Ht.hasOwnProperty(e)){var n=Ht[e];try{var i=p()("<ul></ul>"),r=new n.plugin(i,t.options);for(var o in r.options)if(r.options.hasOwnProperty(o)&&"zfPlugin"!==o){var a=r.options[o];t.allOptions[o]=a}r.destroy()}catch(t){console.warn("Warning: Problems getting Accordion/Tab options: ".concat(t))}}}},{key:"_events",value:function(){this._changedZfMediaQueryHandler=this._checkMediaQueries.bind(this),p()(window).on("changed.zf.mediaquery",this._changedZfMediaQueryHandler)}},{key:"_checkMediaQueries",value:function(){var t,e=this;p().each(this.rules,(function(e){A.atLeast(e)&&(t=e)})),t&&(this.currentPlugin instanceof this.rules[t].plugin||(p().each(Ht,(function(t,n){e.$element.removeClass(n.cssClass)})),this.$element.addClass(this.rules[t].cssClass),this.currentPlugin&&(!this.currentPlugin.$element.data("zfPlugin")&&this.storezfData&&this.currentPlugin.$element.data("zfPlugin",this.storezfData),this.currentPlugin.destroy()),this._handleMarkup(this.rules[t].cssClass),this.currentRule=this.rules[t],this.currentPlugin=new this.currentRule.plugin(this.$element,this.options),this.storezfData=this.currentPlugin.$element.data("zfPlugin")))}},{key:"_handleMarkup",value:function(t){var e=this,n="accordion",i=p()("[data-tabs-content="+this.$element.attr("id")+"]");if(i.length&&(n="tabs"),n!==t){var r=e.allOptions.linkClass?e.allOptions.linkClass:"tabs-title",o=e.allOptions.panelClass?e.allOptions.panelClass:"tabs-panel";this.$element.removeAttr("role");var a=this.$element.children("."+r+",[data-accordion-item]").removeClass(r).removeClass("accordion-item").removeAttr("data-accordion-item"),s=a.children("a").removeClass("accordion-title");if("tabs"===n?(i=i.children("."+o).removeClass(o).removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby")).children("a").removeAttr("role").removeAttr("aria-controls").removeAttr("aria-selected"):i=a.children("[data-tab-content]").removeClass("accordion-content"),i.css({display:"",visibility:""}),a.css({display:"",visibility:""}),"accordion"===t)i.each((function(t,n){p()(n).appendTo(a.get(t)).addClass("accordion-content").attr("data-tab-content","").removeClass("is-active").css({height:""}),p()("[data-tabs-content="+e.$element.attr("id")+"]").after('<div id="tabs-placeholder-'+e.$element.attr("id")+'"></div>').detach(),a.addClass("accordion-item").attr("data-accordion-item",""),s.addClass("accordion-title")}));else if("tabs"===t){var l=p()("[data-tabs-content="+e.$element.attr("id")+"]"),c=p()("#tabs-placeholder-"+e.$element.attr("id"));c.length?(l=p()('<div class="tabs-content"></div>').insertAfter(c).attr("data-tabs-content",e.$element.attr("id")),c.remove()):l=p()('<div class="tabs-content"></div>').insertAfter(e.$element).attr("data-tabs-content",e.$element.attr("id")),i.each((function(t,e){var n=p()(e).appendTo(l).addClass(o),i=s.get(t).hash.slice(1),r=p()(e).attr("id")||k(6,"accordion");i!==r&&(""!==i?p()(e).attr("id",i):(i=r,p()(e).attr("id",i),p()(s.get(t)).attr("href",p()(s.get(t)).attr("href").replace("#","")+"#"+i))),p()(a.get(t)).hasClass("is-active")&&n.addClass("is-active")})),a.addClass(r)}}}},{key:"open",value:function(){var t;if(this.currentRule&&"function"==typeof this.currentRule.open)return(t=this.currentRule).open.apply(t,[this.currentPlugin].concat(Array.prototype.slice.call(arguments)))}},{key:"close",value:function(){var t;if(this.currentRule&&"function"==typeof this.currentRule.close)return(t=this.currentRule).close.apply(t,[this.currentPlugin].concat(Array.prototype.slice.call(arguments)))}},{key:"toggle",value:function(){var t;if(this.currentRule&&"function"==typeof this.currentRule.toggle)return(t=this.currentRule).toggle.apply(t,[this.currentPlugin].concat(Array.prototype.slice.call(arguments)))}},{key:"_destroy",value:function(){this.currentPlugin&&this.currentPlugin.destroy(),p()(window).off("changed.zf.mediaquery",this._changedZfMediaQueryHandler)}}]),n}(ft);$t.defaults={},P.addToJquery(p()),P.rtl=S,P.GetYoDigits=k,P.transitionend=I,P.RegExpEscape=C,P.onLoad=L,P.Box=R,P.onImagesLoaded=B,P.Keyboard=G,P.MediaQuery=A,P.Motion=$,P.Move=Z,P.Nest=X,P.Timer=K,nt.init(p()),dt.init(p(),P),A._init(),P.plugin(gt,"Abide"),P.plugin(_t,"Accordion"),P.plugin(yt,"AccordionMenu"),P.plugin(vt,"Drilldown"),P.plugin(St,"Dropdown"),P.plugin(kt,"DropdownMenu"),P.plugin(Ct,"Equalizer"),P.plugin(It,"Interchange"),P.plugin(Dt,"Magellan"),P.plugin(At,"OffCanvas"),P.plugin(Pt,"Orbit"),P.plugin(Nt,"ResponsiveMenu"),P.plugin(Rt,"ResponsiveToggle"),P.plugin(Ot,"Reveal"),P.plugin(Ft,"Slider"),P.plugin(Lt,"SmoothScroll"),P.plugin(Yt,"Sticky"),P.plugin(Vt,"Tabs"),P.plugin(Gt,"Toggler"),P.plugin(qt,"Tooltip"),P.plugin($t,"ResponsiveAccordionTabs");var Zt=function(){var t;t=1==arguments.length&&(0,h.isString)(arguments[0])?{channel:"View",topic:arguments[0],data:null}:4==arguments.length&&(0,h.isString)(arguments[0])&&(0,h.isFunction)(arguments[1])&&arguments[2]instanceof r().Model&&(0,h.isObject)(arguments[3])?{channel:"View",topic:arguments[0],data:{view:arguments[1],params:{model:arguments[2]},options:arguments[3]}}:4==arguments.length&&(0,h.isString)(arguments[0])&&(0,h.isFunction)(arguments[1])&&arguments[2]instanceof r().Collection&&(0,h.isObject)(arguments[3])?{channel:"View",topic:arguments[0],data:{view:arguments[1],params:{collection:arguments[2]},options:arguments[3]}}:3==arguments.length&&(0,h.isString)(arguments[0])&&(0,h.isFunction)(arguments[1])&&arguments[2]instanceof r().Model?{channel:"View",topic:arguments[0],data:{view:arguments[1],params:{model:arguments[2]}}}:3==arguments.length&&(0,h.isString)(arguments[0])&&(0,h.isFunction)(arguments[1])&&arguments[2]instanceof r().Collection?{channel:"View",topic:arguments[0],data:{view:arguments[1],params:{collection:arguments[2]}}}:2==arguments.length&&(0,h.isString)(arguments[0])&&(0,h.isFunction)(arguments[1])?{channel:"View",topic:arguments[0],data:{view:arguments[1]}}:arguments.length>1&&!(0,h.isFunction)(arguments[0])?{channel:"View",topic:arguments[0],data:arguments[1]}:arguments[0],l().publish((0,h.assign)({channel:"View",topic:"undefined"},t))},Wt=function(t){var e=this.props.model;e&&(e[t.currentTarget.name]=t.currentTarget.value)},Xt=function(){this.publish("showDialog")};const Kt={getDefaultProps:function(){return{registeredTopic:{},registeredEvents:[]}},on:function(t,e,n){p()("body").on(t,e,n),this.props.registeredEvents.push(t)},subscribe:function(t){var e,n=(e=2==arguments.length&&(0,h.isString)(arguments[0])&&(0,h.isFunction)(arguments[1])?{channel:"View",topic:arguments[0],callback:arguments[1]}:(0,h.assign)({channel:"View",topic:"undefined"},t)).channel+".*/-+-*."+e.topic;this.props.registeredTopic[n]&&this.props.registeredTopic[n].unsubscribe();var i=l().subscribe(e);this.props.registeredTopic[n]=i},unsubscribe:function(t){var e="View.*/-+-*."+t;this.props.registeredTopic[e]&&(this.props.registeredTopic[e].unsubscribe(),(0,h.unset)(this.props.registeredTopic,e))},publish:Zt,componentWillUnmount:function(){(0,h.each)(this.props.registeredTopic,(function(t){t.unsubscribe()})),(0,h.each)(this.props.registeredEvents,(function(t){p()("body").off(t)}))},doUnsubscribe:function(){(0,h.each)(this.props.registeredTopic,(function(t){t.unsubscribe()})),(0,h.each)(this.props.registeredEvents,(function(t){p()("body").off(t)}))},scrollTop:function(t){p()(".off-canvas-wrapper-inner").stop().animate({scrollTop:p()(t).offset().top},600)},confirm:function(t){var e=this;return new(u())((function(n,i){var r=function(){e.publish("showDialogModal"),i(new Error("user cancel"))};(0,h.isString)(t)&&(t=(t=t.replace("\r","").split("\n")).map((function(t,e){return a().createElement("p",{key:"confirm-".concat(e)},t)})));var o=a().createElement("div",{className:"row"},a().createElement("div",{className:"small-12 columns"},a().createElement("p",null," "),a().createElement("h5",null,t),a().createElement("p",null," ")),a().createElement("div",{className:"small-12 columns"},a().createElement("div",{className:"button-group float-right"},a().createElement("a",{href:"javascript:;",className:"button success tiny",onClick:function(){e.publish("showDialogModal"),n()}},"Okay")),a().createElement("div",{className:"button-group float-right"},a().createElement("a",{href:"javascript:;",className:"button tiny",onClick:r},"Cancel"))),a().createElement("button",{onClick:r,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},a().createElement("span",{"aria-hidden":"true"},"×")));e.publish("showDialogModal",{view:o})}))},alert:function(t){var e=this;(0,h.isString)(t)&&(t=(t=t.replace("\r","").split("\n")).map((function(t,e){return a().createElement("p",{key:"alert-".concat(e)},t)})));var n=function(){e.publish("showDialogModal")},i=a().createElement("div",{className:"row"},a().createElement("div",{className:"small-12 columns"},a().createElement("p",null," "),a().createElement("h5",null,t),a().createElement("p",null," ")),a().createElement("div",{className:"small-12 columns"},a().createElement("div",{className:"button-group float-right"},a().createElement("a",{href:"javascript:;",className:"button tiny",onClick:n},"Okay"))),a().createElement("button",{onClick:n,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},a().createElement("span",{"aria-hidden":"true"},"×")));this.publish("showDialogModal",{view:i})},onFormChange:Wt,onDialogClose:function(){this.publish("showDialog")},closeDialog:Xt,randomColor:function(t){var e=["#d62728","#f0027f","#fdbf6f","#fdc086","#ff7f0e","#a6cee3","#ffff33","#ff4040","#e2b72f","#8c564b","#cab2d6","#666666","#4daf4a","#bf5b17","#e377c2","#aff05b","#ffff99","#a703d5","#ff7847","#7fc97f","#4c6edb","#bf3caf","#beaed4","#a7d503","#1ddfa3","#e41a1c","#e70b8d","#33a02c","#f781bf","#377eb8","#b2df8a","#1872f4","#58fc2a","#999999","#b15928","#6a3d9a","#18f472","#fb9a99","#23abd8","#a65628","#984ea3","#582afc","#e31a1c","#6e40aa","#9467bd","#00bfbf","#1f77b4","#e78d0b","#7f7f7f","#386cb0","#ff7f00","#bcbd22","#fe4b83","#2ca02c","#52f667","#1f78b4"];return t||(t=Math.round(100*Math.random())%e.length),e[t%e.length]}}},9522:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(1152)),a=n.n(o),s=n(6486),l=n(3609),c=n.n(l);function u(t,e,n){this.extend(u,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var i=n||{};this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.imagePath_=i.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=i.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,null!=i.averageCenter&&(this.averageCenter_=i.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var r=this;google.maps.event.addListener(this.map_,"zoom_changed",(function(){var t=r.map_.getZoom();r.prevZoom_!=t&&(r.prevZoom_=t,r.resetViewport())})),google.maps.event.addListener(this.map_,"idle",(function(){r.redraw()})),e&&e.length&&this.addMarkers(e,!1)}function h(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new d(this,t.getStyles(),t.getGridSize())}function d(t,e,n){t.getMarkerClusterer().extend(d,google.maps.OverlayView),this.styles_=e,this.padding_=n||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}n(2345),u.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",u.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",u.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},u.prototype.onAdd=function(){this.setReady_(!0)},u.prototype.draw=function(){},u.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},u.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),n=new google.maps.LatLngBounds,i=0;t=e[i];i++)n.extend(t.getPosition());this.map_.fitBounds(n)},u.prototype.setStyles=function(t){this.styles_=t},u.prototype.getStyles=function(){return this.styles_},u.prototype.isZoomOnClick=function(){return this.zoomOnClick_},u.prototype.isAverageCenter=function(){return this.averageCenter_},u.prototype.getMarkers=function(){return this.markers_},u.prototype.getTotalMarkers=function(){return this.markers_.length},u.prototype.setMaxZoom=function(t){this.maxZoom_=t},u.prototype.getMaxZoom=function(){return this.maxZoom_},u.prototype.calculator_=function(t,e){for(var n=0,i=t.length,r=i;0!==r;)r=parseInt(r/10,10),n++;return{text:i,index:n=Math.min(n,e)}},u.prototype.setCalculator=function(t){this.calculator_=t},u.prototype.getCalculator=function(){return this.calculator_},u.prototype.addMarkers=function(t,e){for(var n,i=0;n=t[i];i++)this.pushMarkerTo_(n);e||this.redraw()},u.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",(function(){t.isAdded=!1,e.repaint()}))}this.markers_.push(t)},u.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},u.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var n,i=0;n=this.markers_[i];i++)if(n==t){e=i;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},u.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!(e||!n||(this.resetViewport(),this.redraw(),0))},u.prototype.removeMarkers=function(t,e){for(var n,i=!1,r=0;n=t[r];r++){var o=this.removeMarker_(n);i=i||o}if(!e&&i)return this.resetViewport(),this.redraw(),!0},u.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},u.prototype.getTotalClusters=function(){return this.clusters_.length},u.prototype.getMap=function(){return this.map_},u.prototype.setMap=function(t){this.map_=t},u.prototype.getGridSize=function(){return this.gridSize_},u.prototype.setGridSize=function(t){this.gridSize_=t},u.prototype.getMinClusterSize=function(){return this.minClusterSize_},u.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},u.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),i=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),r=e.fromLatLngToDivPixel(n);r.x+=this.gridSize_,r.y-=this.gridSize_;var o=e.fromLatLngToDivPixel(i);o.x-=this.gridSize_,o.y+=this.gridSize_;var a=e.fromDivPixelToLatLng(r),s=e.fromDivPixelToLatLng(o);return t.extend(a),t.extend(s),t},u.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},u.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},u.prototype.resetViewport=function(t){for(var e,n=0;e=this.clusters_[n];n++)e.remove();var i;for(n=0;i=this.markers_[n];n++)i.isAdded=!1,t&&i.setMap(null);this.clusters_=[]},u.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout((function(){for(var e,n=0;e=t[n];n++)e.remove()}),0)},u.prototype.redraw=function(){this.createClusters_()},u.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var n=(e.lat()-t.lat())*Math.PI/180,i=(e.lng()-t.lng())*Math.PI/180,r=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371},u.prototype.addToClosestCluster_=function(t){for(var e,n=4e4,i=null,r=(t.getPosition(),0);e=this.clusters_[r];r++){var o=e.getCenter();if(o){var a=this.distanceBetweenPoints_(o,t.getPosition());a<n&&(n=a,i=e)}}i&&i.isMarkerInClusterBounds(t)?i.addMarker(t):((e=new h(this)).addMarker(t),this.clusters_.push(e))},u.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),n=this.getExtendedBounds(e),i=0;t=this.markers_[i];i++)!t.isAdded&&this.isMarkerInBounds_(t,n)&&this.addToClosestCluster_(t)},h.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,n=0;e=this.markers_[n];n++)if(e==t)return!0;return!1},h.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,n=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,i=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(n,i),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var r=this.markers_.length;if(r<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),r==this.minClusterSize_)for(var o=0;o<r;o++)this.markers_[o].setMap(null);return r>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},h.prototype.getMarkerClusterer=function(){return this.markerClusterer_},h.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers(),i=0;t=n[i];i++)e.extend(t.getPosition());return e},h.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},h.prototype.getSize=function(){return this.markers_.length},h.prototype.getMarkers=function(){return this.markers_},h.prototype.getCenter=function(){return this.center_},h.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},h.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},h.prototype.getMap=function(){return this.map_},h.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var n,i=0;n=this.markers_[i];i++)n.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var r=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,r);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(o),this.clusterIcon_.show()}},d.prototype.triggerClusterClick=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_,t),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},d.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this,n=!1;google.maps.event.addDomListener(this.div_,"click",(function(t){n||e.triggerClusterClick(t)})),google.maps.event.addDomListener(this.div_,"mousedown",(function(){n=!1})),google.maps.event.addDomListener(this.div_,"mousemove",(function(){n=!0}))},d.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(e.x-=this.iconAnchor_[0],e.y-=this.iconAnchor_[1]):(e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10)),e},d.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},d.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},d.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},d.prototype.remove=function(){this.setMap(null)},d.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},d.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},d.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition,this.iconAnchor_=e.iconAnchor},d.prototype.setCenter=function(t){this.center_=t},d.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+n+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?e.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var i=this.textColor_?this.textColor_:"black",r=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+i+"; position:absolute; font-size:"+r+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=u,u.prototype.addMarker=u.prototype.addMarker,u.prototype.addMarkers=u.prototype.addMarkers,u.prototype.clearMarkers=u.prototype.clearMarkers,u.prototype.fitMapToMarkers=u.prototype.fitMapToMarkers,u.prototype.getCalculator=u.prototype.getCalculator,u.prototype.getGridSize=u.prototype.getGridSize,u.prototype.getExtendedBounds=u.prototype.getExtendedBounds,u.prototype.getMap=u.prototype.getMap,u.prototype.getMarkers=u.prototype.getMarkers,u.prototype.getMaxZoom=u.prototype.getMaxZoom,u.prototype.getStyles=u.prototype.getStyles,u.prototype.getTotalClusters=u.prototype.getTotalClusters,u.prototype.getTotalMarkers=u.prototype.getTotalMarkers,u.prototype.redraw=u.prototype.redraw,u.prototype.removeMarker=u.prototype.removeMarker,u.prototype.removeMarkers=u.prototype.removeMarkers,u.prototype.resetViewport=u.prototype.resetViewport,u.prototype.repaint=u.prototype.repaint,u.prototype.setCalculator=u.prototype.setCalculator,u.prototype.setGridSize=u.prototype.setGridSize,u.prototype.setMaxZoom=u.prototype.setMaxZoom,u.prototype.onAdd=u.prototype.onAdd,u.prototype.draw=u.prototype.draw,h.prototype.getCenter=h.prototype.getCenter,h.prototype.getSize=h.prototype.getSize,h.prototype.getMarkers=h.prototype.getMarkers,d.prototype.onAdd=d.prototype.onAdd,d.prototype.draw=d.prototype.draw,d.prototype.onRemove=d.prototype.onRemove;const p=u;var f,m=n(5086),g=n(7981),_=null;const y=r().createBackboneClass({mixins:[m.ZP,g.Z],getInitialState:function(){return{disableDefaultUI:!1,scrollwheel:!0,disableDoubleClickZoom:!1}},onWindowResize:function(){var t=c()(window).height()-c()(this.refs.mapArea).position().top;c()("#google-map").css({position:"relative",top:0,left:0,right:"auto",bottom:"auto",width:"100%",height:t}),google.maps.event.trigger(this.getGoogleMap(),"resize")},componentDidMount:function(){c()(window).on("resize",c().proxy(this.onWindowResize,this)),this.onWindowResize(),this.drawGtu();var t=this.getCollection(),e=(0,s.sortBy)(t.models,(function(t){var e=0;return t.get("HaveLocation")||(e+=1e7),t.get("IsAssign")&&(e+=1e6),parseInt(t.get("Id")),e})),n=(0,s.map)(e,(function(t){return{id:t.get("Id"),text:t.get("Code")}}));n=(0,s.concat)({id:-1,text:"Please select GTU to show on map"},n),c()("#gtuFilter").select2({placeholder:"Please input the GTU code to search",tags:!1,multiple:!1,data:n}),this.getGoogleMap(),c()("#gtuFilter").on("change",c().proxy((function(){var t=c()("#gtuFilter").val();t>0&&this.gotoMarker(parseInt(t))}),this)),f=new google.maps.InfoWindow},showGTUInfo:function(t){var e=this.getGoogleMap();f.setContent(this.buildContent(t.gtuId)),f.open(e,t)},gotoMarker:function(t){var e=this.getGoogleMap(),n=_.getMarkers(),i=(new google.maps.LatLngBounds,find(n,(function(e){return e.gtuId==t}))),r=this;console.log("search",t,i.gtuId,i.getPosition().lat(),i.getPosition().lng()),i?(e.setCenter(i.getPosition()),e.setZoom(22),setTimeout((function(){r.showGTUInfo(i)}),1e3)):this.alert("You searched GTU do not find the last position")},componentWillUnmount:function(){try{this.clearMap(),(0,s.each)(gtuLocation,(function(t){t.setMap(null)})),google.maps.event.clearInstanceListeners(googleMap)}catch(t){console.log("google map clear error",t)}c()("#google-map").css({visibility:"hidden"})},buildContent:function(t){var e=this.getCollection().get(t),n=r().createElement("ul",{className:"menu vertical"},r().createElement("li",null,r().createElement("h5",null,e.get("Code"))),r().createElement("li",null,"IsAssign: ",e.get("IsAssign")?"YES":"NO"),r().createElement("li",null,"IsOnline: ",e.get("IsOnline")?"YES":"NO"),r().createElement("li",{style:{display:e.get("IsAssign")?"inherit":"none"}},"Team: ",e.get("Company")),r().createElement("li",{style:{display:e.get("IsAssign")?"inherit":"none"}},"Auditor: ",e.get("Auditor")),r().createElement("li",{style:{display:e.get("IsAssign")?"inherit":"none"}},"Role: ",e.get("Role")));return a().renderToStaticMarkup(n)},drawGtu:function(){var t=this.getGoogleMap(),e=this.getCollection(),n=new google.maps.LatLngBounds,i=[],r=this;(0,s.each)(e.models,(function(t){if(t.get("HaveLocation")){var e=new google.maps.LatLng(t.get("Latitude"),t.get("Longitude"));n.extend(e);var o=new google.maps.Marker({position:e});o.gtuId=t.get("Id"),o.addListener("click",(function(){r.showGTUInfo(o)})),i.push(o)}})),_=new p(t,i),t.fitBounds(n)},render:function(){return r().createElement("div",null,r().createElement("div",{className:"section row"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"small-10 small-centered columns"},r().createElement("select",{id:"gtuFilter"}))))),r().createElement("div",{ref:"mapArea"}))}})},7434:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(7588),r=n.n(i);const o=r().createClass({displayName:"dashboard",render:function(){return r().createElement("div",{className:"section row"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 column"},r().createElement("h5",null,"Administration")),r().createElement("div",{className:"small-12 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,r().createElement("a",{href:"#"},"Control Center")),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," Administration"))))))),r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"row",style:{marginTop:"120px"}},r().createElement("div",{className:"small-7 small-centered"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 column"},r().createElement("div",{className:"callout secondary"},r().createElement("a",{href:"#frame/Users.aspx"},r().createElement("span",null,"User Management")))),r().createElement("div",{className:"small-12 column"},r().createElement("div",{className:"callout secondary"},r().createElement("a",{href:"#campaign/import"},r().createElement("span",null,"Import Campaign"))))),r().createElement("div",{className:"row small-up-2 medium-up-2 large-up-2"},r().createElement("div",{className:"column"},r().createElement("div",{className:"callout secondary"},r().createElement("a",{href:"#frame/NonDeliverables.aspx"},r().createElement("span",null,"Non-Deliverables")))),r().createElement("div",{className:"column"},r().createElement("div",{className:"callout secondary"},r().createElement("a",{href:"#frame/GtuAdmin.aspx?AssignNameToGTUFlag=true"},r().createElement("span",null,"GTU Management")))),r().createElement("div",{className:"column"},r().createElement("div",{className:"callout secondary"},r().createElement("a",{href:"#admin/gtu"},r().createElement("span",null,"GTU Available List")))),r().createElement("div",{className:"column"},r().createElement("div",{className:"callout secondary"},r().createElement("a",{href:"#frame/AdminGtuToBag.aspx"},r().createElement("span",null,"GTU bag Management ")))),r().createElement("div",{className:"column"},r().createElement("div",{className:"callout secondary"},r().createElement("a",{href:"#frame/AdminGtuBagToAuditor.aspx"},r().createElement("span",null,"Assign GTU-Bags to Auditors")))),r().createElement("div",{className:"column"},r().createElement("div",{className:"callout secondary"},r().createElement("a",{href:"#frame/AdminDistributorCompany.aspx"},r().createElement("span",null,"Distributor Management")))))))))}})},2413:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(3609)),a=n.n(o),s=n(6486),l=n(5086);const c=r().createBackboneClass({mixins:[l.ZP],onSearch:function(){var t="//timm.vargainc.com/"+this.refs.sourceUrl.value+"/api/campaign";if(_.isEmpty(t))this.alert("Please input source url");else{var e=this,n=this.getCollection();n.reset(),a().ajax({url:t,method:"GET",dataType:"json",cache:!1,success:function(i){var r=(0,s.map)(i,(function(t){return{Id:t.Id,ClientName:t.ClientName,ClientCode:t.ClientCode,Date:t.Date,AreaDescription:t.AreaDescription}}));(0,s.isEmpty)(r)&&(n.add(r),e.setState({srcUrl:t}))}})}},onImportFailed:function(){this.alert("copy campaign failed. please contact us!")},onImport:function(t){console.log(t);var e=(0,s.trimEnd)(this.state.srcUrl,"/")+"/"+t+"/export",n=this;a().getJSON(e).then((function(t){return a().post("../api/campaign/import",t).then((function(t){return t&&t.success?(n.alert("copy success. please refresh control center!"),Promise.resolve()):Promise.reject(new Error("server method failed"))}))})).catch((function(){n.onImportFailed()}))},render:function(){var t=this;return r().createElement("div",{className:"section row"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row","data-equalizer":!0},r().createElement("div",{className:"small-12 column"},r().createElement("h5",null,"Import Campaign")),r().createElement("div",{className:"small-8 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,r().createElement("a",{href:"#"},"Control Center")),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," Import Campaign")))),r().createElement("div",{className:"small-12 column"},r().createElement("div",{className:"input-group"},r().createElement("input",{ref:"sourceUrl",className:"input-group-field",type:"text",placeholder:"Please input server address and query campaign from this server."}),r().createElement("div",{className:"input-group-button"},r().createElement("input",{onClick:this.onSearch,type:"button",className:"button",value:"Query"})))))),r().createElement("div",{className:"scroll-list-section-body"},r().createElement("div",{className:"row scroll-list-header"},r().createElement("div",{className:"small-2 columns"},"ClientName"),r().createElement("div",{className:"small-4 columns"},"ClientCode"),r().createElement("div",{className:"small-2 columns"},"Date"),r().createElement("div",{className:"small-2 columns"},"AreaDescription"),r().createElement("div",{className:"small-2 columns"},"Action")),this.getCollection().map((function(e){return r().createElement("div",{key:e.get("Id"),className:"row scroll-list-item"},r().createElement("div",{className:"small-2 columns"},e.get("ClientName")),r().createElement("div",{className:"small-4 columns"},e.get("ClientCode")),r().createElement("div",{className:"small-2 columns"},moment(e.get("Date"),moment.ISO_8601).format("MMM DD, YYYY")),r().createElement("div",{className:"small-2 columns"},e.get("AreaDescription")),r().createElement("div",{className:"small-2 columns"},r().createElement("button",{class:"button",onClick:t.onImport.bind(t,e.get("Id"))},"Import")))})))))}})},4018:(t,e,n)=>{"use strict";n.d(e,{Z:()=>g}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(381)),a=n.n(o),s=n(6486),l=n(3609),c=n.n(l),u=n(5086);n(1167);const h=r().createBackboneClass({mixins:[u.ZP],componentDidMount:function(){var t=this,e=this.getModel();e.get("Date")||e.set("Date",new Date),$(".fdatepicker").fdatepicker({format:"yyyy-mm-dd"}).on("changeDate",(function(e){t.getModel().set("Date",e.date)})),$("form").foundation()},onSave:function(t){t.preventDefault(),t.stopPropagation();var e=this;this.getModel().save(null,{success:function(t,n){n&&n.success?(e.publish("camapign/refresh"),e.onClose()):e.setState({error:"opps! something wrong. please contact us!"})},error:function(){e.setState({error:"opps! something wrong. please contact us!"})}})},onClose:function(){$(".fdatepicker").off("changeDate").fdatepicker("remove"),this.publish("showDialog")},onChange:function(t){this.getModel().set(t.currentTarget.name,t.currentTarget.value)},render:function(){var t=this.getModel(),e=t.get("Id")?"Edit Campaign":"New Campaign",n=t.get("AreaDescription"),i=t.get("Date"),o=i?a()(i).format("YYYY-MM-DD"):"",s=!(!this.state||!this.state.error),l=s?this.state.error:"";return r().createElement("form",{onSubmit:this.onSave},r().createElement("h3",null,e),r().createElement("div",{"data-abide-error":!0,className:"alert callout",style:{display:s?"block":"none"}},r().createElement("p",null,r().createElement("i",{className:"fa fa-exclamation-circle"})," ",l)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Client Name",r().createElement("input",{onChange:this.onChange,name:"ClientName",type:"text",defaultValue:t.get("ClientName"),required:!0}),r().createElement("span",{className:"form-error"},"it is required."))),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Contact Name",r().createElement("input",{onChange:this.onChange,name:"ContactName",type:"text",defaultValue:t.get("ContactName"),required:!0}))),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Client Code",r().createElement("input",{onChange:this.onChange,name:"ClientCode",type:"text",defaultValue:t.get("ClientCode"),required:!0}))),r().createElement("fieldset",{className:"small-12 columns"},r().createElement("label",null,"Total Type"),r().createElement("input",{type:"radio",onChange:this.onChange,name:"AreaDescription",checked:"APT + HOME"==n,value:"APT + HOME",id:"apthome"}),r().createElement("label",{htmlFor:"apthome"},"APT + HOME"),r().createElement("input",{type:"radio",onChange:this.onChange,name:"AreaDescription",checked:"APT ONLY"==n,value:"APT ONLY",id:"aptonly"}),r().createElement("label",{htmlFor:"aptonly"},"APT ONLY"),r().createElement("input",{type:"radio",onChange:this.onChange,name:"AreaDescription",checked:"HOME ONLY"==n,value:"HOME ONLY",id:"homeonly"}),r().createElement("label",{htmlFor:"homeonly"},"HOME ONLY")),r().createElement("div",{className:"small-12 medium-12 large-4 columns end"},r().createElement("label",null,"Date",r().createElement("input",{className:"fdatepicker",onChange:this.onChange,name:"Date",type:"date",readOnly:!0,value:o,required:!0})))),r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"button-group float-right"},r().createElement("button",{type:"submit",className:"success button"},"Save"),r().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel"))),r().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},r().createElement("span",{"aria-hidden":"true"},"×")))}});var d=n(4179);const p=r().createBackboneClass({mixins:[u.ZP],onUserSelected:function(t){this.setState({selectedUser:t})},onDbUserSelected:function(t){this.setState({selectedUser:t}),this.publish("campaign/publish",t)},onClose:function(){this.publish("showDialog")},onProcess:function(){this.state&&this.state.selectedUser&&this.publish("campaign/publish",this.state.selectedUser)},render:function(){return r().createElement("div",null,r().createElement("h5",null,"Campaign Publish"),r().createElement("span",null,"Assign to"),r().createElement(d.Z,{onSelect:this.onUserSelected,onDbSelect:this.onDbUserSelected,group:"distribution"}),r().createElement("div",{className:"float-right"},r().createElement("button",{className:"success button",onClick:this.onProcess},"Okay"),r().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel")))}}),f=r().createBackboneClass({mixins:[u.ZP],menuKey:"campaign-menu-ddl-",getDefaultProps:function(){return{address:null,icon:null,name:null}},componentDidMount:function(){c()("#"+this.menuKey+this.getModel().get("Id")).foundation()},onCopy:function(t){t.preventDefault(),t.stopPropagation(),c()(t.currentTarget).closest(".dropdown-pane").foundation("close");var e=this.getModel();e.copy().then((function(t){if(t&&t.success){var n=new Model(t.data);e.collection.add(n,{at:0})}}))},onEdit:function(t){t.preventDefault(),t.stopPropagation(),c()(t.currentTarget).closest(".dropdown-pane").foundation("close");var e=this.getModel().clone(),n=r().createElement(h,{model:e});this.publish("showDialog",{view:n})},onDelete:function(t){t.preventDefault(),t.stopPropagation(),c()(t.currentTarget).closest(".dropdown-pane").foundation("close");var e=this;this.confirm("are you sure want delete this campaign?").then((function(){e.getModel().destroy({wait:!0,success:function(){e.publish("camapign/refresh")}})}))},onPublishToDMap:function(t){t.preventDefault(),t.stopPropagation();var e=this.getModel(),n=this;n.publish("showDialog",{view:r().createElement(p,null)}),this.unsubscribe("campaign/publish"),this.subscribe("campaign/publish",(function(t){e.publishToDMap(t).then((function(t){n.publish("showDialog"),t&&t.success?n.publish("camapign/refresh"):n.alert(t.error)}))}))},onOpenMoreMenu:function(t){t.preventDefault(),t.stopPropagation()},onCloseMoreMenu:function(t,e){e.preventDefault(),e.stopPropagation(),c()("#"+this.menuKey+t).foundation("close")},renderMoreMenu:function(t){var e=this.menuKey+t;return r().createElement("span",null,r().createElement("button",{className:"button cirle","data-toggle":e,onClick:this.onOpenMoreMenu},r().createElement("i",{className:"fa fa-ellipsis-h"})),r().createElement("div",{id:e,className:"dropdown-pane bottom","data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false",onClick:this.onCloseMoreMenu.bind(null,t)},r().createElement("ul",{className:"vertical menu"},r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onEdit},r().createElement("i",{className:"fa fa-edit"}),r().createElement("span",null,"Edit"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onCopy},r().createElement("i",{className:"fa fa-copy"}),r().createElement("span",null,"Copy"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onDelete},r().createElement("i",{className:"fa fa-trash"}),r().createElement("span",null,"Delete"))))))},onGotoCMap:function(t){window.open("./#campaign/".concat(t))},render:function(){var t=this.getModel(),e=t.get("Date"),n=e?a()(e).format("MMM DD, YYYY"):"";return r().createElement("div",{className:"row scroll-list-item",onClick:this.onGotoCMap.bind(null,t.get("Id"))},r().createElement("div",{className:"hide-for-small-only medium-2 columns"},t.get("ClientName")),r().createElement("div",{className:"small-12 medium-5 columns"},t.get("ClientCode")),r().createElement("div",{className:"hide-for-small-only medium-2 columns"},n),r().createElement("div",{className:"small-12 medium-3 columns"},r().createElement("span",{className:"show-for-large"},t.get("AreaDescription")),r().createElement("div",{className:"float-right tool-bar"},r().createElement("button",{onClick:this.onPublishToDMap,className:"button"},r().createElement("i",{className:"fa fa-upload"}),r().createElement("small",null,"Publish")),this.renderMoreMenu(t.get("Id")))))}});var m=n(1149);const g=r().createBackboneClass({mixins:[u.ZP],getInitialState:function(){return{orderByFiled:null,orderByAsc:!1,search:null,filterField:null,filterValues:[]}},componentDidMount:function(){var t=this;this.subscribe("camapign/refresh",(function(){t.getCollection().fetch()})),this.subscribe("search",(function(e){t.setState({search:e,filterField:null,filterValues:[]})})),c()("#campaign-filter-ddl-ClientName, #campaign-filter-ddl-ClientCode, #campaign-filter-ddl-Date, #campaign-filter-ddl-AreaDescription").foundation()},onNew:function(){var t=new m.Z,e=r().createElement(h,{model:t});this.publish("showDialog",{view:e})},onOrderBy:function(t,e){e.preventDefault(),e.stopPropagation(),this.state.orderByFiled==t?this.setState({orderByAsc:!this.state.orderByAsc}):this.setState({orderByFiled:t,orderByAsc:!0})},onFilter:function(t,e){e.preventDefault(),e.stopPropagation();var n=c()(":checked",e.currentTarget),i=(0,s.map)(n,(function(t){return c()(t).val()}));this.setState({filterField:i.length>0?t:null,filterValues:i.length>0?i:[],search:null}),c()("#campaign-filter-ddl-"+t).foundation("close")},onClearFilter:function(t,e){e.preventDefault(),e.stopPropagation(),this.setState({filterField:null,filterValues:[],search:null}),c()("#campaign-filter-ddl-"+t).foundation("close"),c()(e.currentTarget).closest("form").get(0).reset()},renderHeader:function(t,e){var n=this.getCollection(),i=null,o=null,l=null;if(n=n?n.toArray():[],i=this.state.orderByFiled==t?this.state.orderByAsc?r().createElement("i",{className:"fa fa-sort-up active"}):r().createElement("i",{className:"fa fa-sort-down active"}):r().createElement("i",{className:"fa fa-sort"}),i=r().createElement("a",{onClick:this.onOrderBy.bind(null,t)}," ",i),this.state.filterField&&this.state.filterField==t&&(o=r().createElement("a",{"data-toggle":"campaign-filter-ddl-"+t}," ",r().createElement("i",{className:"fa fa-filter active"}))),n){var c=(0,s.map)(n,(function(e){var n=e.get(t),i=a()(n,a().ISO_8601);return i.isValid()?i.format("MMM DD, YYYY"):n})),u=(0,s.uniq)(c).sort();l=r().createElement("div",{id:"campaign-filter-ddl-"+t,className:"dropdown-pane bottom",style:{width:"auto"},"data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false"},r().createElement("form",{onSubmit:this.onFilter.bind(this,t)},r().createElement("ul",{className:"vertical menu"},u.map((function(e,n){return r().createElement("li",{key:t+n},r().createElement("input",{id:t+n,name:t,type:"checkbox",value:e}),r().createElement("label",{htmlFor:t+n},e))}))),r().createElement("button",{className:"button tiny success",type:"submit"},"Filter"),r().createElement("button",{className:"button tiny warning",type:"reset",onClick:this.onClearFilter.bind(this,t)},"Clear")))}return r().createElement("div",null,r().createElement("a",{"data-toggle":"campaign-filter-ddl-"+t},e),i,o,l)},getDataSource:function(){var t=this.getCollection();if(t=t?t.toArray():[],this.state.orderByFiled&&(t=(0,s.orderBy)(t,["attributes."+this.state.orderByFiled],[this.state.orderByAsc?"asc":"desc"])),this.state.search){var e=this.state.search.toLowerCase(),n=null;t=(0,s.filter)(t,(function(t){return n=(0,s.values)(t.attributes),(0,s.some)(n,(function(t){var n=a()(t,a().ISO_8601);return n.isValid()?n.format("MMM DD YYYY MMM DD, YYYY YYYY-MM-DD MM/DD/YYYY YYYY MM MMM DD").toLowerCase().indexOf(e)>-1:(0,s.toString)(t).toLowerCase().indexOf(e)>-1}))}))}else if(this.state.filterField&&this.state.filterValues){var i=this.state.filterField,r=this.state.filterValues;t=(0,s.filter)(t,(function(t){var e=t.get(i),n=a()(e,a().ISO_8601);return n.isValid()?(0,s.indexOf)(r,n.format("MMM DD, YYYY"))>-1:(0,s.indexOf)(r,e)>-1}))}return t},render:function(){var t=this.getDataSource();return r().createElement("div",{className:"section row"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row","data-equalizer":!0},r().createElement("div",{className:"small-12 column"},r().createElement("h5",null,"Campaign")),r().createElement("div",{className:"small-8 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,r().createElement("a",{href:"#"},"Control Center")),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," Campaign")))),r().createElement("div",{className:"small-4 column"},r().createElement("button",{onClick:this.onNew,className:"float-right section-button"},r().createElement("i",{className:"fa fa-plus"}),r().createElement("span",null,"New Campaign"))))),r().createElement("div",{className:"scroll-list-section-body"},r().createElement("div",{className:"row scroll-list-header"},r().createElement("div",{className:"hide-for-small-only medium-2 columns"},this.renderHeader("ClientName","Client Name")),r().createElement("div",{className:"small-12 medium-5 columns"},this.renderHeader("ClientCode","Client Code")),r().createElement("div",{className:"hide-for-small-only medium-2 columns"},this.renderHeader("Date","Date")),r().createElement("div",{className:"small-12 medium-3 columns"},r().createElement("span",{className:"show-for-large"},this.renderHeader("AreaDescription","Type")))),t.map((function(t){return r().createElement(f,{key:t.get("Id"),model:t})})))))}})},5304:(t,e,n)=>{"use strict";n.d(e,{Z:()=>E}),n(2316);var i=n(7588),r=n.n(i),o=(n(1152),n(456),n(9483),n(6624)),a=n.n(o),s=(n(4042),n(968),n(7219),n(3609)),l=n.n(s),c=n(4184),u=n.n(c),h=n(6486),d=(n(2345),n(8552)),p=n(1859),f=n(6079),m=n(189),g=n(594),_=(n(5724),n(5086)),y=n(8742),v=n(3821),b=n(9147),x=n(5556),w=n(6779);const E=r().createBackboneClass({mixins:[_.ZP],getInitialState:function(){return{activeTask:null,displayGtus:[],showOutOfBoundaryGtu:!0,displayMode:"cover",showAllDMap:!1,mergeTasks:[]}},componentDidMount:function(){var t=this,e=this;this.subscribe("Map.Popup.SetActiveTask",(function(t){var n=e.getModel(),i=n&&n.get("Tasks");if(i&&i.size&&i.size()>0){var r=(0,h.find)(i.models,(function(e){return e.get("Id")==t}));r&&e.onSwitchActiveTask.call(e,r)}})),this.subscribe("Map.Popup.MergeTask",(function(t){var n=e.getModel(),i=n&&n.get("Tasks");if(i&&i.size&&i.size()>0){var r=(0,h.find)(i.models,(function(e){return e.get("Id")==t}));r&&(e.state.mergeTasks.push(r),e.onMergeTask.call(e,r))}})),this.subscribe("Map.Popup.AbortMergeTask",(function(){e.setState({mergeTasks:[]},(function(){e.publish("Campaign.Monitor.DrawGtu",{tasks:[],displayGtus:[],displayMode:e.state.displayMode}),e.publish("Campaign.Monitor.ShowAllDMap",e.state.showAllDMap),e.publish("Campaign.Monitor.ShowOutOfBoundaryGtu",e.state.showOutOfBoundaryGtu)}))})),this.subscribe("Map.Popup.ConfirmMergeTask",(function(t){var n=e.getModel();if((t=n&&n.get("Tasks"))&&t.size&&2==e.state.mergeTasks.length){var i=(0,h.head)(e.state.mergeTasks),r=(0,h.last)(e.state.mergeTasks);r.mergeFrom(i.get("Id")).then((function(){e.state.mergeTasks=[],e.state.mergeTasks.push(r),e.onMergeTask.call(e,r)}))}})),this.subscribe("GTU.Assigned",(function(){t.publish("Campaign.Monitor.Reload")})),this.on("click.import.task",".btnImportTask",(function(t){t.preventDefault(),t.stopPropagation();var e=l()(this).attr("id");l()("#upload-file-"+e).click()})),this.subscribe("Map.GTU.Update",(function(){e.forceUpdate()})),this.subscribe("Global.Window.Click",(function(){e.onCloseDropDown(),e.onCloseMoreMenu()}))},initSelect2:function(t){var e=this;t&&(l()(t).select2(),l()(document).on("select2:select",(function(t){var n=(0,h.get)(t,"params.data.id"),i=e.getModel().get("Tasks");if(i.get){var r=i.get(n);e.onSwitchActiveTask.call(e,r)}})))},showTask:function(t){this.publish("Campaign.Monitor.ZoomToTask",t)},loadTask:function(t){var e=new p.Z({CampaignId:t.get("CampaignId"),SubMapId:t.get("SubMapId"),DMapId:t.get("DMapId"),Gtu:[]}),n=e.updateGtuAfterTime(null,{quite:!1}),i=new d.Z,r=i.fetchGtuWithStatusByTask(t.get("Id"),{quite:!1}).then((function(){return i.fetchGtuLocation(t.get("Id"),{quite:!1})}));return a().all([n,r]).then((function(){return t.set("dmap",e),t.set("gtuList",i),a().resolve()}))},onSwitchActiveTask:function(t){var e=this;this.loadTask(t).then((function(){return new(a())((function(n,i){var r=t.get("dmap").get("Gtu")||[];r=(0,h.map)(r,(function(t){return t.points&&t.points.length>0?t.points[0].Id:null})),e.setState({activeTask:t,displayGtus:r,displayMode:"cover"},(function(){return e.publish("Campaign.Monitor.ZoomToTask",t.get("Id")),e.publish("Campaign.Monitor.DrawGtu",{tasks:[t],displayGtus:r,displayMode:"cover"}),e.publish("Campaign.Monitor.ShowAllDMap",e.state.showAllDMap),l()(window).trigger("resize"),n()}))}))}))},onMergeTask:function(){var t=this,e=this;return a().all((0,h.map)(this.state.mergeTasks,(function(t){return e.loadTask(t)}))).then((function(){var n=[];return(0,h.each)(e.state.mergeTasks,(function(t){var e=t.get("dmap").get("Gtu");(0,h.each)(e,(function(t){t.points&&t.points.length>0&&n.push(t.points[0].Id)}))})),e.publish("Campaign.Monitor.DrawGtu",{tasks:t.state.mergeTasks,displayGtus:n,displayMode:"cover"}),e.publish("Campaign.Monitor.ShowAllDMap",!0),e.publish("Campaign.Monitor.ShowOutOfBoundaryGtu",!0),l()(window).trigger("resize"),a().resolve()}))},onOpenDropDown:function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.setState({taskDropdownActive:!0})},onCloseDropDown:function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.setState({taskDropdownActive:!1})},onOpenMoreMenu:function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.setState({taskMoreMenuActive:!0})},onCloseMoreMenu:function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.setState({taskMoreMenuActive:!1})},onStart:function(t){t.setStart()},onStop:function(t){t.setStop()},onPause:function(t){t.setPause()},onSwitchDisplayMode:function(t){var e=this;if(this.setState({displayMode:t},(function(){e.publish("Campaign.Monitor.DisplayMode",t)})),"marker"!=t){var n=[(0,h.head)(this.state.displayGtus)];this.setState({displayGtus:n},(function(){e.publish("Campaign.Monitor.SwitchGtu",n)}))}},onSwitchShowOutOfBoundaryGtu:function(){var t=this,e=!this.state.showOutOfBoundaryGtu;this.setState({showOutOfBoundaryGtu:e},(function(){t.publish("Campaign.Monitor.ShowOutOfBoundaryGtu",e)}))},onSwitchShowAllDMap:function(t){var e=this;this.setState({showAllDMap:t},(function(){e.publish("Campaign.Monitor.ShowAllDMap",t)}))},onAddEmployee:function(){var t=new f.Z,e=this;t.fetchCompany().done((function(){e.publish("showDialog",{view:v.Z,params:{model:new m.Z,company:t}})}))},onAssign:function(){var t=this.state.activeTask.get("gtuList"),e=this.state.activeTask.get("Id"),n=new f.Z,i=this;n.fetchForGtu().then((function(){i.publish("showDialog",{view:y.Z,params:{collection:t,user:n,taskId:e},options:{size:"full"}})}))},onReCenter:function(){this.publish("Campaign.Monitor.CenterToTask")},onReload:function(){this.publish("Campaign.Monitor.Reload")},onGotoGTU:function(t){this.publish("Campaign.Monitor.LocatGtu",t)},onSelectedGTU:function(t){var e,n=this;e="track"==this.state.displayMode?[t]:(0,h.xor)(this.state.displayGtus,[t]),this.setState({displayGtus:e},(function(){n.publish("Campaign.Monitor.SwitchGtu",e)}))},onFinished:function(t){var e=this;new g.Z({Id:t}).markFinished({success:function(n){if(n&&n.success){var i=e.getModel().get("Tasks");if(i){var r=i.get(t);r&&r.set("IsFinished",!0),e.forceUpdate(),e.publish("Campaign.Monitor.Redraw.FinishedTaskBoundary",t)}}else e.alert(n.error)}})},onEdit:function(t,e){var n=new g.Z({Id:t}),i=this;n.fetch().then((function(){i.publish("showDialog",{view:b.Z,params:{model:n}})}))},onOpenUploadFile:function(t){l()("#upload-file-"+t).click()},onShowUrlForDriver:function(){var t=this.getModel().get("Id");this.alert("".concat(window.location.protocol,":").concat(window.location.port,"//").concat(window.location.host).concat(window.location.pathname,"#driver/").concat(t))},renderTaskDropdown:function(){var t=this,e=this.getModel(),n=e&&e.get("Tasks")?e.get("Tasks").models:[];n=(0,h.filter)(n,(function(t){return!t.get("IsFinished")}));var i=u()({"is-dropdown-submenu-parent":!0,"opens-left":!0,"is-active":this.state.taskDropdownActive}),o=u()({menu:!0,submenu:!0,"is-dropdown-submenu":!0,"first-sub":!0,vertical:!0,"js-dropdown-active":this.state.taskDropdownActive});return r().createElement("ul",{className:"dropdown menu float-right"},r().createElement("li",{className:i},r().createElement("a",{href:"javascript:;",onClick:this.onOpenDropDown},"Switch Active Task"),r().createElement("ul",{className:o,onClick:this.onCloseDropDown},(0,h.map)(n,(function(e){return r().createElement("li",{key:e.get("Id")},r().createElement("a",{href:"javascript:;",onClick:t.onSwitchActiveTask.bind(t,e)},e.get("Name")))})))))},renderActiveTask:function(){if(!this.state.activeTask)return null;var t=this,e=this.state.activeTask,n=e.get("IsFinished"),i=e.get("gtuList")||[];return i.where&&(i=i.where((function(t){return n?t.get("WithData"):t.get("IsAssign")||t.get("WithData")}))),r().createElement("div",{className:"map-toolbar"},r().createElement("div",{className:"section row gtu-monitor expanded"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"row expanded"},r().createElement("div",{className:"small-12 medium-5 large-3 columns"},this.renderTaskController(e)),r().createElement("div",{className:"small-12 medium-7 large-9 columns"},this.renderTaskMoreMenu(e),r().createElement("button",{className:"button float-right",onClick:this.onReCenter},r().createElement("i",{className:"fa fa-crosshairs"}),r().createElement("span",null,"Center")),r().createElement("button",{className:"button float-right",onClick:this.onReload},r().createElement("i",{className:"fa fa-refresh"}),r().createElement("span",null,"Refresh")))))),r().createElement("div",{className:"row gtu expanded"},r().createElement("div",{className:"small-12 columns"},(0,h.map)(i,(function(e){return t.renderGtu(e)})))))},renderGtu:function(t){var e=null,n=null,i="button text-left btn-gtu",o=1==this.state.activeTask.get("Status"),a=(0,h.indexOf)(this.state.displayGtus,t.get("Id"))>-1,s=null;if(o)s=r().createElement("i",{className:"fa fa-stop"});else switch(t.get("Role")){case"Driver":s=r().createElement("i",{className:"fa fa-truck"});break;case"Walker":s=r().createElement("i",{className:"fa fa-street-view"});break;default:s=r().createElement("i",{className:"fa fa-question-circle-o"})}return a&&(i+=" active"),o||t.get("IsOnline")||(i+=" offline"),!o&&t.get("IsOnline")&&t.get("OutOfBoundary")&&(e=r().createElement("i",{className:"fa fa-bell faa-ring animated alert"})),!o&&t.get("WithData")&&(n=r().createElement("i",{className:"fa fa-warning alert"})),r().createElement("span",{className:"group",key:t.get("Id")},r().createElement("button",{className:i,style:{backgroundColor:a?t.get("UserColor"):"transparent"},onClick:this.onSelectedGTU.bind(null,t.get("Id"))},n,r().createElement("span",null,t.get("ShortUniqueID")),e),r().createElement("button",{className:"button location text-center",onClick:this.onGotoGTU.bind(null,t.get("Id")),style:{backgroundColor:t.get("UserColor")}},s))},renderTaskController:function(t){var e=u()("button",{hide:t.get("IsFinished")});switch(t.get("Status")){case 0:return r().createElement("div",null,r().createElement("button",{className:"button",onClick:this.onPause.bind(this,t)},r().createElement("i",{className:"fa fa-pause"}),"Pause"),r().createElement("button",{className:"button",onClick:this.onStop.bind(this,t)},r().createElement("i",{className:"fa fa-stop"}),"Stop"),r().createElement("button",{className:e,onClick:this.onFinished.bind(this,t.get("Id"))},r().createElement("i",{className:"fa fa-check"}),"Finish"));case 1:return r().createElement("div",null,r().createElement("button",{className:e,onClick:this.onFinished.bind(this,t.get("Id"))},r().createElement("i",{className:"fa fa-check"}),"Finish"));case 2:return r().createElement("div",null,r().createElement("button",{className:"button",onClick:this.onStart.bind(this,t)},r().createElement("i",{className:"fa fa-play"}),"Start"),r().createElement("button",{className:"button",onClick:this.onStop.bind(this,t)},r().createElement("i",{className:"fa fa-stop"}),"Stop"),r().createElement("button",{className:e,onClick:this.onFinished.bind(this,t.get("Id"))},r().createElement("i",{className:"fa fa-check"}),"Finish"));default:return r().createElement("div",null,r().createElement("button",{className:"button",onClick:this.onStart.bind(this,t)},r().createElement("i",{className:"fa fa-play"}),"Start"),r().createElement("button",{className:"button",onClick:this.onFinished.bind(this,t.get("Id"))},r().createElement("i",{className:"fa fa-check"}),"Finish"))}},renderTaskMoreMenu:function(t){if(1==t.get("Status"))var e=null;else e=r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onAssign.bind(this,t)},r().createElement("i",{className:"fa fa-users"})," ",r().createElement("span",null,"Assign GTU")));var n=u()({"is-dropdown-submenu-parent":!0,"opens-left":!0,"is-active":this.state.taskMoreMenuActive}),i=u()({menu:!0,submenu:!0,"is-dropdown-submenu":!0,"first-sub":!0,vertical:!0,"js-dropdown-active":this.state.taskMoreMenuActive}),o=t.get("Id");return r().createElement("ul",{className:"dropdown menu float-right"},r().createElement("li",{className:n},r().createElement("button",{className:"button cirle","data-toggle":"monitor-more-menu",onClick:this.onOpenMoreMenu},r().createElement("i",{className:"fa fa-ellipsis-h"})),r().createElement("ul",{className:i,onClick:this.onCloseMoreMenu},e,r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onAddEmployee},r().createElement("i",{className:"fa fa-user-plus"})," ",r().createElement("span",null,"New Employee"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onEdit.bind(this,o)},r().createElement("i",{className:"fa fa-edit"})," ",r().createElement("span",null,"Edit"))),r().createElement("li",{className:this.state.showAllDMap?"hide":""},r().createElement("a",{href:"javascript:;",onClick:this.onSwitchShowAllDMap.bind(this,!0)},r().createElement("i",{className:"fa fa-th-large"})," ",r().createElement("span",null,"Show Other DMap"))),r().createElement("li",{className:this.state.showAllDMap?"":"hide"},r().createElement("a",{href:"javascript:;",onClick:this.onSwitchShowAllDMap.bind(this,!1)},r().createElement("i",{className:"fa fa-square-o"})," ",r().createElement("span",null,"Hide Other DMap"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onSwitchDisplayMode.bind(this,"cover")},r().createElement("i",{className:"fa fa-map"})," ",r().createElement("span",null,"Show Coverage"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onSwitchDisplayMode.bind(this,"track")},r().createElement("i",{className:"fa fa-map-o"})," ",r().createElement("span",null,"Track Path"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onSwitchShowOutOfBoundaryGtu},r().createElement("i",{className:this.state.ShowOutOfBoundaryGtu?"fa fa-expand":"fa fa-compress"})," ",r().createElement("span",null,this.state.ShowOutOfBoundaryGtu?"Hide Out of Bounds":"Show Out of Bounds"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onShowUrlForDriver},r().createElement("i",{className:"fa fa-external-link-square"})," ",r().createElement("span",null,"URL for driver"))))))},render:function(){var t=this.getModel(),e=t&&t.get("Tasks")?t.get("Tasks").models:[];return e=(0,h.filter)(e,(function(t){return!t.get("IsFinished")})),e=(0,h.map)(e,(function(t){return t.get("Id")})),r().createElement("div",{className:"campaign-monitor"},r().createElement("div",{className:"section row expanded"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row expanded"},r().createElement("div",{className:"small-10 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,t.getDisplayName()),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," ",this.state.activeTask?this.state.activeTask.get("Name"):null)))),r().createElement("div",{className:"small-2 column"},this.renderTaskDropdown()))))),this.renderActiveTask(),r().createElement(w.Z,{model:this.getModel(),geo:this.props.geo,onSwitchActiveTask:this.onSwitchActiveTask}),r().createElement(x.Z,{tasks:e}))}})},3709:(t,e,n)=>{"use strict";n.d(e,{Z:()=>b}),n(2316);var i=n(7588),r=n.n(i),o=(n(1152),n(456),n(9483),n(6624)),a=n.n(o),s=(n(4042),n(968),n(7219),n(3609)),l=n.n(s),c=n(4184),u=n.n(c),h=n(6486),d=(n(2345),n(8552)),p=n(1859),f=n(6079),m=n(189),g=(n(594),n(5724),n(5086)),_=n(8742),y=n(3821),v=(n(9147),n(5556),n(6779));const b=r().createBackboneClass({mixins:[g.ZP],getInitialState:function(){return{activeTask:null,displayGtus:[],showOutOfBoundaryGtu:!0,displayMode:"cover",showAllDMap:!1,mergeTasks:[]}},componentDidMount:function(){var t=this;this.subscribe("Map.Popup.SetActiveTask",(function(e){var n=t.getModel(),i=n&&n.get("Tasks");if(i&&i.size&&i.size()>0){var r=(0,h.find)(i.models,(function(t){return t.get("Id")==e}));r&&t.onSwitchActiveTask.call(t,r)}})),this.subscribe("Map.Popup.MergeTask",(function(e){var n=t.getModel(),i=n&&n.get("Tasks");if(i&&i.size&&i.size()>0){var r=(0,h.find)(i.models,(function(t){return t.get("Id")==e}));r&&(t.state.mergeTasks.push(r),t.onMergeTask.call(t,r))}})),this.subscribe("Map.Popup.AbortMergeTask",(function(){t.setState({mergeTasks:[]},(function(){t.publish("Campaign.Monitor.DrawGtu",{tasks:[],displayGtus:[],displayMode:t.state.displayMode}),t.publish("Campaign.Monitor.ShowAllDMap",t.state.showAllDMap),t.publish("Campaign.Monitor.ShowOutOfBoundaryGtu",t.state.showOutOfBoundaryGtu)}))})),this.subscribe("Map.Popup.ConfirmMergeTask",(function(e){var n=t.getModel();if((e=n&&n.get("Tasks"))&&e.size&&2==t.state.mergeTasks.length){var i=(0,h.head)(t.state.mergeTasks),r=(0,h.last)(t.state.mergeTasks);r.mergeFrom(i.get("Id")).then((function(){t.state.mergeTasks=[],t.state.mergeTasks.push(r),t.onMergeTask.call(t,r)}))}})),this.on("click.import.task",".btnImportTask",(function(t){t.preventDefault(),t.stopPropagation();var e=l()(this).attr("id");l()("#upload-file-"+e).click()})),this.subscribe("Map.GTU.Update",(function(){t.forceUpdate()})),this.subscribe("Global.Window.Click",(function(){t.onCloseDropDown(),t.onCloseMoreMenu()}))},initSelect2:function(t){var e=this;t&&(l()(t).select2(),l()(document).on("select2:select",(function(t){var n=(0,h.get)(t,"params.data.id"),i=e.getModel().get("Tasks");if(i.get){var r=i.get(n);e.onSwitchActiveTask.call(e,r)}})))},showTask:function(t){this.publish("Campaign.Monitor.ZoomToTask",t)},loadTask:function(t){var e=new p.Z({CampaignId:t.get("CampaignId"),SubMapId:t.get("SubMapId"),DMapId:t.get("DMapId"),Gtu:[]}),n=e.updateGtuAfterTime(null,{quite:!1}),i=new d.Z,r=i.fetchGtuWithStatusByTask(t.get("Id"),{quite:!1}).then((function(){return i.fetchGtuLocation(t.get("Id"),{quite:!1})}));return a().all([n,r]).then((function(){return t.set("dmap",e),t.set("gtuList",i),a().resolve()}))},onSwitchActiveTask:function(t){var e=this;this.loadTask(t).then((function(){return new(a())((function(n,i){var r=t.get("dmap").get("Gtu")||[];r=(0,h.map)(r,(function(t){return t.points&&t.points.length>0?t.points[0].Id:null})),e.setState({activeTask:t,displayGtus:r,displayMode:"cover"},(function(){return e.publish("Campaign.Monitor.ZoomToTask",t.get("Id")),e.publish("Campaign.Monitor.DrawGtu",{tasks:[t],displayGtus:r,displayMode:"cover"}),e.publish("Campaign.Monitor.ShowAllDMap",e.state.showAllDMap),l()(window).trigger("resize"),n()}))}))}))},onMergeTask:function(){var t=this,e=this;return a().all((0,h.map)(this.state.mergeTasks,(function(t){return e.loadTask(t)}))).then((function(){var n=[];return(0,h.each)(e.state.mergeTasks,(function(t){var e=t.get("dmap").get("Gtu");(0,h.each)(e,(function(t){t.points&&t.points.length>0&&n.push(t.points[0].Id)}))})),e.publish("Campaign.Monitor.DrawGtu",{tasks:t.state.mergeTasks,displayGtus:n,displayMode:"cover"}),e.publish("Campaign.Monitor.ShowAllDMap",!0),e.publish("Campaign.Monitor.ShowOutOfBoundaryGtu",!0),l()(window).trigger("resize"),a().resolve()}))},onOpenDropDown:function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.setState({taskDropdownActive:!0})},onCloseDropDown:function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.setState({taskDropdownActive:!1})},onOpenMoreMenu:function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.setState({taskMoreMenuActive:!0})},onCloseMoreMenu:function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.setState({taskMoreMenuActive:!1})},onStart:function(t){t.setStart()},onStop:function(t){t.setStop()},onPause:function(t){t.setPause()},onSwitchDisplayMode:function(t){var e=this;if(this.setState({displayMode:t},(function(){e.publish("Campaign.Monitor.DisplayMode",t)})),"marker"!=t){var n=[(0,h.head)(this.state.displayGtus)];this.setState({displayGtus:n},(function(){e.publish("Campaign.Monitor.SwitchGtu",n)}))}},onSwitchShowOutOfBoundaryGtu:function(){var t=this,e=!this.state.showOutOfBoundaryGtu;this.setState({showOutOfBoundaryGtu:e},(function(){t.publish("Campaign.Monitor.ShowOutOfBoundaryGtu",e)}))},onSwitchShowAllDMap:function(t){var e=this;this.setState({showAllDMap:t},(function(){e.publish("Campaign.Monitor.ShowAllDMap",t)}))},onAddEmployee:function(){var t=new f.Z,e=this;t.fetchCompany().done((function(){e.publish("showDialog",{view:y.Z,params:{model:new m.Z,company:t}})}))},onAssign:function(){var t=this.state.activeTask.get("gtu"),e=this.state.activeTask.get("Id"),n=new f.Z,i=this;n.fetchForGtu().then((function(){i.publish("showDialog",{view:_.Z,params:{collection:t,user:n,taskId:e},options:{size:"full"}})}))},onReCenter:function(){this.publish("Campaign.Monitor.CenterToTask")},onReload:function(){this.publish("Campaign.Monitor.Reload")},onGotoGTU:function(t){this.publish("Campaign.Monitor.LocatGtu",t)},onSelectedGTU:function(t){var e,n=this;e="track"==this.state.displayMode?[t]:(0,h.xor)(this.state.displayGtus,[t]),this.setState({displayGtus:e},(function(){n.publish("Campaign.Monitor.SwitchGtu",e)}))},renderTaskDropdown:function(){var t=this,e=this.getModel(),n=e&&e.get("Tasks")?e.get("Tasks").models:[];n=(0,h.filter)(n,(function(t){return!t.get("IsFinished")}));var i=u()({"is-dropdown-submenu-parent":!0,"opens-left":!0,"is-active":this.state.taskDropdownActive}),o=u()({menu:!0,submenu:!0,"is-dropdown-submenu":!0,"first-sub":!0,vertical:!0,"js-dropdown-active":this.state.taskDropdownActive});return r().createElement("ul",{className:"dropdown menu float-right"},r().createElement("li",{className:i},r().createElement("a",{href:"javascript:;",onClick:this.onOpenDropDown},"Switch Active Task"),r().createElement("ul",{className:o,onClick:this.onCloseDropDown},(0,h.map)(n,(function(e){return r().createElement("li",{key:e.get("Id")},r().createElement("a",{href:"javascript:;",onClick:t.onSwitchActiveTask.bind(t,e)},e.get("Name")))})))))},renderActiveTask:function(){if(!this.state.activeTask)return null;var t=this,e=this.state.activeTask,n=e.get("IsFinished"),i=e.get("gtuList")||[];return i.where&&(i=i.where((function(t){return n?t.get("WithData"):t.get("IsAssign")||t.get("WithData")}))),r().createElement("div",{className:"map-toolbar"},r().createElement("div",{className:"section row gtu-monitor expanded"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"row expanded"},r().createElement("div",{className:"small-12 columns"},this.renderTaskMoreMenu(e),r().createElement("button",{className:"button float-right",onClick:this.onReCenter},r().createElement("i",{className:"fa fa-crosshairs"}),r().createElement("span",null,"Center")),r().createElement("button",{className:"button float-right",onClick:this.onReload},r().createElement("i",{className:"fa fa-refresh"}),r().createElement("span",null,"Refresh")))))),r().createElement("div",{className:"row gtu expanded"},r().createElement("div",{className:"small-12 columns"},(0,h.map)(i,(function(e){return t.renderGtu(e)})))))},renderGtu:function(t){var e=null,n=null,i="button text-left btn-gtu",o=1==this.state.activeTask.get("Status"),a=(0,h.indexOf)(this.state.displayGtus,t.get("Id"))>-1,s=null;if(o)s=r().createElement("i",{className:"fa fa-stop"});else switch(t.get("Role")){case"Driver":s=r().createElement("i",{className:"fa fa-truck"});break;case"Walker":s=r().createElement("i",{className:"fa fa-street-view"});break;default:s=r().createElement("i",{className:"fa fa-question-circle-o"})}return a&&(i+=" active"),o||t.get("IsOnline")||(i+=" offline"),!o&&t.get("IsOnline")&&t.get("OutOfBoundary")&&(e=r().createElement("i",{className:"fa fa-bell faa-ring animated alert"})),!o&&t.get("WithData")&&(n=r().createElement("i",{className:"fa fa-warning alert"})),r().createElement("span",{className:"group",key:t.get("Id")},r().createElement("button",{className:i,style:{backgroundColor:a?t.get("UserColor"):"transparent"},onClick:this.onSelectedGTU.bind(null,t.get("Id"))},n,r().createElement("span",null,t.get("ShortUniqueID")),e),r().createElement("button",{className:"button location text-center",onClick:this.onGotoGTU.bind(null,t.get("Id")),style:{backgroundColor:t.get("UserColor")}},s))},renderTaskMoreMenu:function(t){var e=u()({"is-dropdown-submenu-parent":!0,"opens-left":!0,"is-active":this.state.taskMoreMenuActive}),n=u()({menu:!0,submenu:!0,"is-dropdown-submenu":!0,"first-sub":!0,vertical:!0,"js-dropdown-active":this.state.taskMoreMenuActive});return t.get("Id"),r().createElement("ul",{className:"dropdown menu float-right"},r().createElement("li",{className:e},r().createElement("button",{className:"button cirle","data-toggle":"monitor-more-menu",onClick:this.onOpenMoreMenu},r().createElement("i",{className:"fa fa-ellipsis-h"})),r().createElement("ul",{className:n,onClick:this.onCloseMoreMenu},r().createElement("li",{className:this.state.showAllDMap?"hide":""},r().createElement("a",{href:"javascript:;",onClick:this.onSwitchShowAllDMap.bind(this,!0)},r().createElement("i",{className:"fa fa-th-large"})," ",r().createElement("span",null,"Show Other DMap"))),r().createElement("li",{className:this.state.showAllDMap?"":"hide"},r().createElement("a",{href:"javascript:;",onClick:this.onSwitchShowAllDMap.bind(this,!1)},r().createElement("i",{className:"fa fa-square-o"})," ",r().createElement("span",null,"Hide Other DMap"))),r().createElement("li",{className:"".concat("cover"==this.state.displayMode?"hide":"")},r().createElement("a",{href:"javascript:;",onClick:this.onSwitchDisplayMode.bind(this,"cover")},r().createElement("i",{className:"fa fa-map"})," ",r().createElement("span",null,"Show Coverage"))),r().createElement("li",{className:"".concat("track"==this.state.displayMode?"hide":"")},r().createElement("a",{href:"javascript:;",onClick:this.onSwitchDisplayMode.bind(this,"track")},r().createElement("i",{className:"fa fa-map-o"})," ",r().createElement("span",null,"Track Path"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onSwitchShowOutOfBoundaryGtu},r().createElement("i",{className:this.state.ShowOutOfBoundaryGtu?"fa fa-expand":"fa fa-compress"})," ",r().createElement("span",null,this.state.ShowOutOfBoundaryGtu?"Hide Out of Bounds":"Show Out of Bounds"))))))},render:function(){var t=this.getModel(),e=t&&t.get("Tasks")?t.get("Tasks").models:[];return e=(0,h.filter)(e,(function(t){return!t.get("IsFinished")})),e=(0,h.map)(e,(function(t){return t.get("Id")})),r().createElement("div",{className:"campaign-monitor"},r().createElement("div",{className:"section row expanded"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row expanded"},r().createElement("div",{className:"small-10 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,t.getDisplayName()),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," ",this.state.activeTask?this.state.activeTask.get("Name"):null)))),r().createElement("div",{className:"small-2 column"},this.renderTaskDropdown()))))),this.renderActiveTask(),r().createElement(v.Z,{model:this.getModel(),geo:this.props.geo,onSwitchActiveTask:this.onSwitchActiveTask}))}})},5556:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a}),n(2316);var i=n(7588),r=n.n(i),o=(n(1152),n(456),n(6486));const a=r().createClass({displayName:"importFiles",shouldComponentUpdate:function(){return!1},onImport:function(t,e){e.bubbles=!1;var n=e.currentTarget.files[0];0!=n.size?new TaskModel({Id:t}).importGtu(n).then((function(){alert("import success")})):alert("please select an not empty file!")},render:function(){var t=this,e=this,n=this.props.tasks||[];return r().createElement("div",null,(0,o.map)(n,(function(n){return r().createElement("input",{key:"file-import-".concat(n),type:"file",id:"upload-file-".concat(n),multiple:!0,style:{display:"none"},onChange:e.onImport.bind(t,n)})})))}})},6779:(t,e,n)=>{"use strict";n.d(e,{Z:()=>v}),n(2316);var i=n(7588),r=n.n(i),o=n(1152),a=n.n(o),s=(n(456),n(9483),n(6624)),l=n.n(s),c=n(6158),u=n.n(c),h=n(968),d=(n(7219),n(3609)),p=n.n(d),f=n(4184),m=n.n(f),g=n(6486),_=(n(2345),n(8552),n(1859),n(6079),n(189),n(594),n(5724),n(5086));n(8742),n(3821),n(9147),n(4042);const y=r().createBackboneClass({mixins:[_.ZP],getInitialState:function(){return{inputText:"",placeHolder:"Please input Address or Zip code here",activeItem:null,searchTimeout:null}},search:function(){clearTimeout(this.state.searchTimeout);var t=this;this.state.searchTimeout=setTimeout((function(){var e=(0,g.trim)(t.state.inputText);e.length>0&&(/^\d+$/.test(e)?t.getCollection().fetchByZipcode(e):t.getCollection().fetchByAddress(e)).then((function(e){t.publish("Campaign.Monitor.GeoResult",e)}))}),500)},onInputChange:function(t){var e=this;this.setState({inputText:t.target.value},(function(){e.search()}))},onInputKeyUp:function(t){var e=this.getCollection()||[];if(0!=e.length)switch(t.key){case"ArrowUp":var n=e.indexOf(this.state.activeItem);n--,n=Math.max(0,n),this.onSelectItem(e.at(n)),t.preventDefault(),t.stopPropagation();break;case"ArrowDown":n=e.indexOf(this.state.activeItem),n++,n=Math.min(n,e.length-1),this.onSelectItem(e.at(n)),t.preventDefault(),t.stopPropagation();break;case"Enter":var i;i=null==this.state.activeItem?e.at(0):this.state.activeItem,this.onSelectItem(i),t.preventDefault(),t.stopPropagation()}},onSelectItem:function(t,e){var n=this;if(t){var i=this;this.setState({activeItem:t,inputText:t.get("place")},(function(){n.publish("Campaign.Monitor.FlyToLocation",t.get("latlng")),(0,g.isFunction)(e)&&e.call(i)}))}},clearUp:function(){var t=this,e="";this.state.activeItem&&(e=this.state.activeItem.get("text")),this.setState({activeItem:null,inputText:"",placeHolder:e},(function(){t.getCollection().reset(),p()(window).focus(),t.publish("Campaign.Monitor.GeoResult",{type:"FeatureCollection",features:[]})}))},stopClearUp:function(t){t.preventDefault(),t.stopPropagation()},render:function(){var t=this,e=this.getCollection()||[],n=m()("geocode",{active:e.length>1});return r().createElement("div",{className:n,onKeyUp:this.onInputKeyUp,onClick:this.stopClearUp},r().createElement("input",{type:"text",value:this.state.inputText,onKeyUp:this.onInputKeyUp,onChange:this.onInputChange,placeholder:this.state.placeHolder}),r().createElement("ul",{className:"accordion"},e.map((function(e,n){var i=m()("accordion-item",{active:t.state.activeItem==e});return r().createElement("li",{key:e.get("id"),className:i,onClick:t.onSelectItem.bind(t,e)},r().createElement("i",{className:"fa fa-stop"}),r().createElement("span",null,n+1)," ",e.get("place"))}))))},componentWillUnmount:function(){p()(window).off("click.geo")},componentDidMount:function(){var t=this;p()(window).on("click.geo",(function(){t.clearUp()}))}}),v=r().createBackboneClass({mixins:[_.ZP],shouldComponentUpdate:function(){return!1},getInitialState:function(){return{tasks:[],gtuMarkerLayer:{},gtuTrackLayer:{},gtuLocationLayer:null,displayGtus:[],showOutOfBoundaryGtu:!0,taskBounds:{},mapCache:{},animations:{},popup:null,gtuMarkerFilter:["all"],trackBeginTime:0,gtuCount:{},displayMode:"cover",showAllDMap:!1}},onInit:function(t){var e=this;u().accessToken="pk.eyJ1IjoiZ2hvc3R1eiIsImEiOiJjaXczc2tmc3cwMDEyMm9tb29pdDRwOXUzIn0.KPSiOO6DWTY59x1zHdvYSA";var n=new(u().Map)({container:t,zoom:8,maxZoom:20,center:[-73.987378,40.744556],style:"./street.json"});e.registerTopic(n);var i=new(u().NavigationControl);n.addControl(i,"top-right"),n.on("load",(function(){n.addSource("google-road-tiles",{type:"raster",tiles:["//mt0.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt2.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt3.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"],tileSize:256}),n.addSource("google-satellite-tiles",{type:"raster",tiles:["//mt0.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt2.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt3.google.com/vt/lyrs=y&x={x}&y={y}&z={z}"],tileSize:256}),n.addLayer({id:"google-road-tiles-layer",type:"raster",source:"google-road-tiles",minzoom:0,maxzoom:21,layout:{visibility:"visible"}}),n.addLayer({id:"google-satellite-tiles-layer",type:"raster",source:"google-satellite-tiles",minzoom:0,maxzoom:21,layout:{visibility:"none"}}),e.setState({map:n,mapContainer:t},e.initMapLayer)}))},initMapLayer:function(){this.state.map,this.addGeoLayer(),this.drawBoundary(),requestAnimationFrame(this.animate),p()(window).trigger("resize")},registerTopic:function(t){var e=this;this.subscribe("Campaign.Monitor.GeoResult",(function(e){var n=t.getSource("geo-source");n&&n.setData(e)})),this.subscribe("Campaign.Monitor.ZoomToTask",(function(t){e.flyToTask(t)})),this.subscribe("Campaign.Monitor.FlyToLocation",(function(t){e.flyToLocation(t)})),this.subscribe("Campaign.Monitor.DrawGtu",(function(t){e.setState({tasks:t.tasks,displayGtus:t.displayGtus,displayMode:t.displayMode,trackBeginTime:null},(function(){e.drawGtu(),window.clearInterval(e.state.reloadTimeout),e.setState({reloadTimeout:window.setInterval(e.reload,1e4)})}))})),this.subscribe("Campaign.Monitor.DisplayMode",(function(t){e.setState({displayMode:t,trackBeginTime:null},(function(){"track"==t&&e.animateGtuPath()}))})),this.subscribe("Campaign.Monitor.ShowOutOfBoundaryGtu",(function(t){e.setState({showOutOfBoundaryGtu:t},(function(){e.setGtuPointsFilter()}))})),this.subscribe("Campaign.Monitor.ShowAllDMap",(function(t){e.setState({showAllDMap:t},(function(){e.setDMapFilter()}))})),this.subscribe("Campaign.Monitor.SwitchGtu",(function(t){e.setState({displayGtus:t,trackBeginTime:null},(function(){e.setGtuPointsFilter()}))})),this.subscribe("Campaign.Monitor.LocatGtu",(function(n){var i=t.getSource("GTU-LastLocation");i&&(0,g.each)(i._data.features,(function(i){if((0,g.get)(i,"properties.gtuId")==n)return t.flyTo({center:[i.geometry.coordinates[0],i.geometry.coordinates[1]]}),e.state.popup&&e.state.popup.remove(),e.state.popup=new(u().Popup)({closeButton:!0,anchor:"bottom",offset:15}).setLngLat([i.geometry.coordinates[0],i.geometry.coordinates[1]]).setHTML((0,g.get)(i,"properties.displayName")).addTo(t),!1}))})),this.subscribe("Campaign.Monitor.CenterToTask",(function(){e.flyToTask((0,g.head)(e.state.tasks).get("Id"),!0)})),this.subscribe("Campaign.Monitor.Reload",(function(){e.reload()})),this.subscribe("Campaign.Monitor.Redraw.FinishedTaskBoundary",(function(t){var n=e.state.map.getSource("boundary-dmap");if(n){var i=(0,g.map)(n._data.features,(function(e){if((0,g.get)(e,"properties.TaskId")==t){(0,g.set)(e,"properties.IsFinished",!0);var n=(0,g.get)(e,"properties.Task");(0,g.set)(n,"properties.Task.IsFinished",!0)}return e}));n.setData({type:"FeatureCollection",features:i})}e.setDMapFilter()})),this.subscribe("Global.Window.Resize",(function(n){if(e.state.mapContainer){p()(".mapbox-wrapper").width("".concat(n.width,"px"));var i=n.height-p()(".title-bar").outerHeight()-p()(".section-header").outerHeight()-p()(".map-toolbar").outerHeight()-10;p()(".mapbox-wrapper").height("".concat(i,"px")),t.resize()}})),this.on("click.map.popup",".btnSetActiveTask",(function(){var t=p()(this).attr("id");return e.publish("Map.Popup.SetActiveTask",t),e.state.popup&&e.state.popup.remove(),!1})),this.on("click.map.popup",".btnMergeTask",(function(){var t=p()(this).attr("id");return e.publish("Map.Popup.MergeTask",t),e.state.popup&&e.state.popup.remove(),!1})),this.on("click.map.popup",".btnAbortMergeTask",(function(){return e.publish("Map.Popup.AbortMergeTask"),e.state.popup&&e.state.popup.remove(),!1})),this.on("click.map.popup",".btnMergeTaskDone",(function(){return e.publish("Map.Popup.ConfirmMergeTask"),e.state.popup&&e.state.popup.remove(),!1})),t.on("click",(function(t){e.onTaskAreaClickHandler.call(e,t)}))},animate:function(t){var e=this.state.map;if(e){var n=this;t=parseInt(t),l().all((0,g.map)(this.state.animations,(function(i){return i.call(n,e,t)}))).then((function(){requestAnimationFrame(n.animate)}))}},addGeoLayer:function(){var t=this.state.map;t?(t.addSource("geo-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:"geo-layer",source:"geo-source",type:"symbol",layout:{"icon-allow-overlap":!0,"icon-image":"za-provincial-2","icon-size":2,"text-field":"{serial}"},paint:{"text-color":"#ffffff"}})):console.error("map is not ready")},loadSubmapBoundary:function(t,e){return p().getJSON("api/print/campaign/".concat(t,"/submap/").concat(e,"/boundary")).then((function(t){var e={type:"Feature",properties:{userColor:"rgb(".concat(t.color.r,", ").concat(t.color.g,", ").concat(t.color.b,")")},geometry:{type:"Polygon",coordinates:[(0,g.map)(t.boundary,(function(t){return[t.lng,t.lat]}))]}},n=(0,h.Z)(e);return n.properties=e.properties,l().resolve([e,n])}))},loadDMapBoundary:function(t){var e="api/print/campaign/".concat(t.get("CampaignId"),"/submap/").concat(t.get("SubMapId"),"/dmap/").concat(t.get("DMapId"),"/boundary");return p().getJSON(e).then((function(e){var n={type:"Feature",properties:{userColor:"rgb(".concat(e.color.r,", ").concat(e.color.g,", ").concat(e.color.b,")"),Name:t.get("Name"),IsFinished:t.get("IsFinished"),TaskId:t.get("Id"),Task:t.toJSON()},geometry:{type:"Polygon",coordinates:[(0,g.map)(e.boundary,(function(t){return[t.lng,t.lat]}))]}},i=(0,h.Z)(n);return i.properties=n.properties,l().resolve([n,i])}))},drawBoundary:function(){var t=this.state.map;if(t){console.time("draw boundary"),this.publish("showLoading");var e=this,n=this.getModel(),i=n.get("Id"),r=n.get("Tasks"),o=(0,g.groupBy)(r.models,(function(t){return t.get("SubMapId")})),a=(0,g.keys)(o),s=new(u().LngLatBounds);return l().all([l().all((0,g.map)(a,(function(t){return e.loadSubmapBoundary(i,t)}))).then((function(e){var n=[];return(0,g.each)(e,(function(t){n.push(t[0]),n.push(t[1]),(0,g.each)(t[0].geometry.coordinates,(function(t){(0,g.each)(t,(function(t){s.extend([t[0],t[1]])}))}))})),t.addSource("boundary-submap",{type:"geojson",data:{type:"FeatureCollection",features:n}}),t.addLayer({id:"boundary-submap-layer",type:"line",source:"boundary-submap",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"black","line-width":{stops:[[10,1],[20,4]]}}}),l().resolve()})),l().all((0,g.map)(r.models,(function(t){return e.loadDMapBoundary(t)}))).then((function(e){var n=[];return(0,g.each)(e,(function(t){n.push(t[0]),n.push(t[1])})),t.addSource("boundary-dmap",{type:"geojson",data:{type:"FeatureCollection",features:n}}),t.addLayer({id:"boundary-dmap-finished-layer",type:"fill",filter:["all",["==","$type","Polygon"],["==","IsFinished",!0]],source:"boundary-dmap",paint:{"fill-pattern":"bg-red-x","fill-color":{property:"userColor",type:"identity"},"fill-opacity":.55}}),t.addLayer({id:"boundary-dmap-layer",type:"fill",filter:["all",["==","$type","Polygon"],["==","IsFinished",!1]],source:"boundary-dmap",paint:{"fill-color":{property:"userColor",type:"identity"},"fill-opacity":.25}}),t.addLayer({id:"boundary-dmap-line-layer",type:"line",filter:["==","$type","Polygon"],source:"boundary-dmap",paint:{"line-color":"black","line-width":{stops:[[10,1],[20,4]]},"line-opacity":.75}}),t.addLayer({id:"boundary-dmap-label-layer",type:"symbol",minzoom:12,filter:["==","$type","Point"],source:"boundary-dmap",layout:{"text-field":"{Name}","text-size":{stops:[[12,16],[20,36]]}},paint:{}}),t.addLayer({id:"boundary-dmap-merge-source-layer",type:"line",filter:["all",["==","$type","Polygon"]],source:"boundary-dmap",layout:{visibility:"none"},paint:{"line-color":" #3498db","line-width":6}}),t.addLayer({id:"boundary-dmap-merge-source-fill-layer",type:"fill",filter:["all",["==","$type","Polygon"]],source:"boundary-dmap",layout:{visibility:"none"},paint:{"fill-color":" #3498db","fill-opacity":.25}}),t.addLayer({id:"boundary-dmap-merge-target-layer",type:"line",filter:["all",["==","$type","Polygon"]],source:"boundary-dmap",layout:{visibility:"none"},paint:{"line-color":"#c0392b","line-width":6}}),t.addLayer({id:"boundary-dmap-merge-target-fill-layer",type:"fill",filter:["all",["==","$type","Polygon"]],source:"boundary-dmap",layout:{visibility:"none"},paint:{"fill-color":"#c0392b","fill-opacity":.25}}),l().resolve()}))]).then((function(){t.fitBounds(s),e.publish("hideLoading"),console.timeEnd("draw boundary")}))}console.error("map is not ready")},setDMapFilter:function(){var t=this.state.map;if(t){var e=(0,g.head)(this.state.tasks),n=e?e.get("Id"):null;!this.state.showAllDMap&&n?(t.setFilter("boundary-dmap-finished-layer",["all",["==","$type","Polygon"],["==","IsFinished",!0],["==","TaskId",n]]),t.setFilter("boundary-dmap-layer",["all",["==","$type","Polygon"],["==","IsFinished",!1],["==","TaskId",n]]),t.setFilter("boundary-dmap-line-layer",["all",["==","$type","Polygon"],["==","TaskId",n]]),t.setFilter("boundary-dmap-label-layer",["all",["==","$type","Point"],["==","TaskId",n]]),t.setLayoutProperty("boundary-submap-layer","visibility","none")):(t.setFilter("boundary-dmap-finished-layer",["all",["==","$type","Polygon"],["==","IsFinished",!0]]),t.setFilter("boundary-dmap-layer",["all",["==","$type","Polygon"],["==","IsFinished",!1]]),t.setFilter("boundary-dmap-line-layer",["all",["==","$type","Polygon"]]),t.setFilter("boundary-dmap-label-layer",["all",["==","$type","Point"]]),t.setLayoutProperty("boundary-submap-layer","visibility","visible"));var i=(0,g.map)(this.state.tasks,(function(t){return t.get("Id")}));i.length>1?(t.setFilter("boundary-dmap-finished-layer",["all",["==","$type","Polygon"],["==","IsFinished",!0],(0,g.concat)(["!in","TaskId"],i)]),(0,g.each)(["boundary-dmap-merge-source-layer","boundary-dmap-merge-source-fill-layer"],(function(e){t.setFilter(e,["all",["==","$type","Polygon"],["==","TaskId",i[0]]]),t.setLayoutProperty(e,"visibility","visible")})),(0,g.each)(["boundary-dmap-merge-target-layer","boundary-dmap-merge-target-fill-layer"],(function(e){t.setFilter(e,["all",["==","$type","Polygon"],["==","TaskId",i[1]]]),t.setLayoutProperty(e,"visibility","visible")}))):(t.setFilter("boundary-dmap-finished-layer",["all",["==","$type","Polygon"],["==","IsFinished",!0]]),(0,g.each)(["boundary-dmap-merge-source-layer","boundary-dmap-merge-source-fill-layer","boundary-dmap-merge-target-layer","boundary-dmap-merge-target-fill-layer"],(function(e){t.setLayoutProperty(e,"visibility","none")})))}else console.error("map is not ready")},buildTaskPopup:function(t){var e=this,n=null,i=null,o=null,s=t.IsFinished,l=(0,g.map)(e.state.tasks,(function(t){return t.get("Id")}));if(s)n=[r().createElement("span",{key:"finished"},"FINISHED")],o=0==e.state.tasks.length?r().createElement("div",{className:"small-7 small-centered columns"},r().createElement("div",{className:"button-group stacked-for-small",style:{marginTop:"20px"}},r().createElement("button",{id:t.Id,className:"button btnMergeTask"},"Merge From Here"))):1==e.state.tasks.length?(0,g.includes)(l,t.Id)?r().createElement("div",{className:"small-7 small-centered columns"},r().createElement("div",{className:"button-group stacked-for-small",style:{marginTop:"20px"}},r().createElement("button",{id:t.Id,className:"button btnAbortMergeTask"},"Abort Merge"))):r().createElement("div",{className:"small-10 small-centered columns"},r().createElement("div",{className:"button-group stacked-for-small",style:{marginTop:"20px"}},r().createElement("button",{id:t.Id,className:"button btnAbortMergeTask"},"Abort Merge"),r().createElement("button",{id:t.Id,className:"button btnMergeTask"},"Merge Preview"))):(0,g.includes)(l,t.Id)?r().createElement("div",{className:"small-10 small-centered columns"},r().createElement("div",{className:"button-group stacked-for-small",style:{marginTop:"20px"}},r().createElement("button",{id:t.Id,className:"button btnAbortMergeTask"},"Abort Merge"),r().createElement("button",{id:t.Id,className:"button btnMergeTaskDone"},"Confirm Merge"))):r().createElement("div",{className:"small-7 small-centered columns"},r().createElement("div",{className:"button-group stacked-for-small",style:{marginTop:"20px"}},r().createElement("button",{id:t.Id,className:"button btnAbortMergeTask"},"Abort Merge")));else switch(i=r().createElement("div",{className:"small-8 align-center columns"},r().createElement("div",{className:"button-group",style:{marginTop:"20px"}},r().createElement("button",{id:t.Id,className:"button btnSetActiveTask"},"GO"))),t.Status){case 0:n=[r().createElement("span",{key:"started"},"STARTED")];break;case 1:n=[r().createElement("span",{key:"stopped"},"STOPPED")];break;case 2:n=[r().createElement("span",{key:"peased"},"PEASED")];break;default:n=[r().createElement("span",{key:"started"},"NOT STARTED")]}var c=r().createElement("div",{className:"row align-center section",style:{minWidth:"320px"}},r().createElement("div",{className:"small-7 columns"},t.Name),r().createElement("div",{className:"small-5 columns text-right"},n),i,o);return a().renderToStaticMarkup(c)},onTaskAreaClickHandler:function(t){var e=this.state.map,n=(0,g.head)(e.queryRenderedFeatures(t.point,{layers:["boundary-dmap-layer","boundary-dmap-finished-layer","boundary-dmap-merge-source-fill-layer","boundary-dmap-merge-target-fill-layer"]}));if(n){var i=JSON.parse(n.properties.Task),r=this.buildTaskPopup(i);this.state.popup&&this.state.popup.remove(),this.state.popup=new(u().Popup)({closeButton:!1,anchor:"top"}).setLngLat(t.lngLat).setHTML(r).addTo(e)}},reload:function(){var t=this;if(this.state.tasks&&!this.state.reloading){var e=this;return new(l())((function(n,i){t.setState({reloading:!0},(function(){var t=[];(0,g.each)(e.state.tasks,(function(e){var n=e.get("dmap"),i=e.get("gtuList");t.push(n.updateGtuAfterTime(null,{quite:!0})),t.push(i.fetchGtuLocation(e.get("Id"),{quite:!0}))})),l().all(t).then((function(){e.publish("Map.GTU.Update"),e.setState({reloading:!1},(function(){return n()}))})).catch((function(){return i(new Error("unkown error in reload"))}))}))})).then((function(){return e.drawGtu(),l().resolve()}))}},drawGtu:function(){var t=this.state.map,e=this.state.tasks;if(t&&e){var n=[];(0,g.each)(e,(function(t){n=(0,g.concat)(n,t.get("dmap").get("Gtu"))})),this.drawGtuLocation(n),this.drawGtuPoints(n)}},drawGtuPoints:function(t){var e=this,n=this.state.map;if(n){var i={type:"FeatureCollection",features:[]};(0,g.each)(t,(function(t){(0,g.each)(t.points,(function(e,n){i.features.push({type:"Feature",properties:{userColor:t.color,GtuId:e.Id,Out:e.out,Serial:n},geometry:{type:"Point",coordinates:[e.lng,e.lat]}})})),e.state.gtuCount[t.points[0].Id]=t.points.length}));var r=n.getSource("gut-marker-source");null==r?(n.addSource("gut-marker-source",{type:"geojson",data:i}),n.addLayer({id:"gtu-marker-layer",type:"circle",source:"gut-marker-source",paint:{"circle-radius":{stops:[[4,2],[20,6]]},"circle-color":{property:"userColor",type:"identity"},"circle-stroke-width":1,"circle-stroke-color":"black"}},"GTU-LastLocation-Walker-Icon-Layer")):r.setData(i),this.setGtuPointsFilter()}},animateGtuPath:function(){var t=this;this.state.animations["gtu-marker-layer-animation"]=function(e,n){if(null!=this.state.trackBeginTime&&"cover"!=this.state.displayMode){var i=(0,g.clone)(this.state.gtuMarkerFilter),r=n-this.state.trackBeginTime,o=(0,g.head)(this.state.displayGtus),a=this.state.gtuCount[o]||0,s=parseInt(r/100);if(s>a)return i.push(["<=","Serial",a]),e.setFilter("gtu-marker-layer",i),void delete t.state.animations["gtu-marker-layer-animation"];i.push(["<","Serial",s%a]),e.setFilter("gtu-marker-layer",i)}else this.state.trackBeginTime=n}},setGtuPointsFilter:function(){var t=this.state.map,e=this;if(t){var n=["all"];this.state.showOutOfBoundaryGtu||n.push(["==","Out",!1]),n.push((0,g.concat)(["in","GtuId"],this.state.displayGtus)),this.setState({gtuMarkerFilter:n},(function(){"cover"==e.state.displayMode&&t.setFilter("gtu-marker-layer",n)}))}},drawGtuLocation:function(t){var e=this.state.map;if(e){var n=[];(0,g.each)(this.state.tasks,(function(t){t.get("gtuList").each((function(t){null!=t.get("Location")&&n.push(t)}))}));var i={type:"FeatureCollection",features:(0,g.map)(n,(function(t){var e=t.get("Location");return e&&e.lat&&e.lng?{type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:{userColor:"#ff0000",role:t.get("Role"),gtuId:t.get("Id"),displayName:t.get("ShortUniqueID")}}:null}))},r=e.getSource("GTU-LastLocation");null==r?(e.addSource("GTU-LastLocation",{type:"geojson",data:i}),e.addLayer({filter:["all",["==","role","Walker"]],id:"GTU-LastLocation-Walker-Icon-Layer",source:"GTU-LastLocation",type:"symbol",layout:{"icon-image":"walker","icon-size":.75,"icon-offset":[-2,-25],"icon-allow-overlap":!0},paint:{}}),e.addLayer({filter:["all",["!=","role","Walker"]],id:"GTU-LastLocation-Trunk-Icon-Layer",source:"GTU-LastLocation",type:"symbol",layout:{"icon-image":"truck","icon-size":.75,"icon-offset":[-2,-25],"icon-allow-overlap":!0},paint:{}})):r.setData(i)}},flyToTask:function(t,e){var n=this.state.map;if(n){var i=n.getSource("boundary-dmap"),r=(0,g.head)((0,g.filter)(i._data.features,(function(e){return(0,g.get)(e,"properties.TaskId")==t&&"Polygon"==(0,g.get)(e,"geometry.type")})));if(r){var o=new(u().LngLatBounds);if((0,g.each)(r.geometry.coordinates,(function(t){(0,g.each)(t,(function(t){o.extend([t[0],t[1]])}))})),e){var a=n.getZoom();n.flyTo({center:o.getCenter(),zoom:a})}else n.fitBounds(o)}}},flyToLocation:function(t){var e=this.state.map;if(e){var n=e.getZoom();e.flyTo({center:t,zoom:n})}},clearTask:function(){(0,g.each)(gtuMarkerLayer,(function(t){t&&t.remove&&t.remove()})),this.setState({gtuMarkerLayer:[]})},switchMapStyle:function(t){var e=this.state.map;e&&("streets"==t?(e.setLayoutProperty("google-road-tiles-layer","visibility","visible"),e.setLayoutProperty("google-satellite-tiles-layer","visibility","none")):(e.setLayoutProperty("google-road-tiles-layer","visibility","none"),e.setLayoutProperty("google-satellite-tiles-layer","visibility","visible")))},render:function(){return r().createElement("div",{className:"mapbox-wrapper"},r().createElement("div",{className:"mapbox-container",ref:this.onInit,style:{width:"100%",height:"100%"}}),r().createElement("div",{className:"map-overlay"},r().createElement("div",{className:"mapboxgl-ctrl-top-left"},r().createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group"},r().createElement("button",{className:"mapboxgl-ctrl-icon mapboxgl-ctrl-img mapboxgl-ctrl-stree",onClick:this.switchMapStyle.bind(this,"streets")}),r().createElement("button",{className:"mapboxgl-ctrl-icon mapboxgl-ctrl-img mapboxgl-ctrl-satellite",onClick:this.switchMapStyle.bind(this,"satellite")})))),r().createElement("div",{className:"map-top-center"},r().createElement(y,{collection:this.props.geo})))}})},6211:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(7588),r=n.n(i);const o=r().createClass({displayName:"taskStopMessagePage",render:function(){return r().createElement("div",{className:"row",style:{marginTop:"160px"}},r().createElement("div",{className:"small-8 small-offset-2 columns"},r().createElement("div",{className:"callout small alert text-center"},r().createElement("p",null),r().createElement("h5",null,r().createElement("strong",null,"Oh snap!")," This monitor page have been closed!"),r().createElement("p",null),r().createElement("p",null))))}})},3321:(t,e,n)=>{"use strict";n.d(e,{Z:()=>m}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(6486)),a=n(381),s=n.n(a),l=n(3609),c=n.n(l),u=n(5086),h=n(4179);const d=r().createBackboneClass({mixins:[u.ZP],componentWillMount:function(){},onUserSelected:function(t){this.setState({selectedUser:t})},onDbUserSelected:function(t){this.setState({selectedUser:t}),this.publish("distribution/publish",t)},onClose:function(){this.publish("showDialog")},onProcess:function(){this.state&&this.state.selectedUser&&this.publish("distribution/publish",this.state.selectedUser)},render:function(){return r().createElement("div",null,r().createElement("h5",null,"Distribution Map Publish"),r().createElement("span",null,"Assign to"),r().createElement(h.Z,{onSelect:this.onUserSelected,onDbSelect:this.onDbUserSelected,group:"monitor"}),r().createElement("div",{className:"float-right"},r().createElement("button",{className:"success button",onClick:this.onProcess},"Okay"),r().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel")))}}),p=r().createBackboneClass({mixins:[u.ZP],componentWillMount:function(){},onUserSelected:function(t){this.setState({selectedUser:t})},onDbUserSelected:function(t){this.setState({selectedUser:t}),this.publish("distribution/dismiss",t)},onClose:function(){this.publish("showDialog")},onProcess:function(){this.state&&this.state.selectedUser&&this.publish("distribution/dismiss",this.state.selectedUser)},render:function(){return r().createElement("div",null,r().createElement("h5",null,"Dismiss to Campaign"),r().createElement("span",null,"Assign to"),r().createElement(h.Z,{onSelect:this.onUserSelected,onDbSelect:this.onDbUserSelected,group:"campaign"}),r().createElement("div",{className:"float-right"},r().createElement("button",{className:"success button",onClick:this.onProcess},"Okay"),r().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel")))}}),f=r().createBackboneClass({mixins:[u.ZP],getDefaultProps:function(){return{address:null,icon:null,name:null}},componentDidMount:function(){c()(".has-tip").foundation()},componentDidUpdate:function(){},onDismiss:function(t){t.preventDefault(),t.stopPropagation();var e=this,n=this.getModel(),i="Are you sure you would like to move \r\n".concat(n.getDisplayName(),"\r\nto Campaigns? Any changes that were made will be lost.");this.confirm(i).then((function(){e.publish("showDialog",{view:p}),e.unsubscribe("distribution/dismiss"),e.subscribe("distribution/dismiss",(function(t){n.dismissToCampaign(t,{success:function(t){e.publish("showDialog"),t&&t.success?e.publish("distribution/refresh"):alert("something wrong")}})}))}))},onPublishToMonitors:function(t){t.preventDefault(),t.stopPropagation();var e=this.getModel(),n=this;this.publish("showDialog",{view:d}),this.unsubscribe("distribution/publish"),this.subscribe("distribution/publish",(function(t){e.publishToMonitor(t,{success:function(t){n.publish("showDialog"),t&&t.success?n.publish("distribution/refresh"):alert(t.error)}})}))},onGotoDMap:function(t){window.open("./#campaign/".concat(t,"/dmap"))},render:function(){var t=this.getModel(),e=t.get("Date"),n=e?s()(e).format("MMM DD, YYYY"):"";return r().createElement("div",{className:"row scroll-list-item",onClick:this.onGotoDMap.bind(null,t.get("Id"))},r().createElement("div",{className:"hide-for-small-only medium-2 columns"},t.get("ClientName")),r().createElement("div",{className:"small-12 medium-5 columns"},t.get("ClientCode")),r().createElement("div",{className:"hide-for-small-only medium-2 columns"},n),r().createElement("div",{className:"small-12 medium-3 columns"},r().createElement("span",{className:"show-for-large"},t.get("AreaDescription")),r().createElement("div",{className:"float-right tool-bar"},r().createElement("button",{onClick:this.onPublishToMonitors,className:"button"},r().createElement("i",{className:"fa fa-upload"}),r().createElement("small",null,"Publish")),r().createElement("button",{onClick:this.onDismiss,className:"button has-tip top",title:"dismiss","data-tooltip":!0,"aria-haspopup":"true","data-disable-hover":"false",tabIndex:"1"},r().createElement("i",{className:"fa fa-reply"})))))}}),m=r().createBackboneClass({mixins:[u.ZP],getInitialState:function(){return{orderByFiled:null,orderByAsc:!1,search:null,filterField:null,filterValues:[]}},componentDidMount:function(){var t=this;this.subscribe("distribution/refresh",(function(){t.getCollection().fetchForDistribution()})),this.subscribe("search",(function(e){t.setState({search:e,filterField:null,filterValues:[]})})),c()("#distribution-filter-ddl-ClientName, #distribution-filter-ddl-ClientCode, #distribution-filter-ddl-Date, #distribution-filter-ddl-AreaDescription").foundation()},onOrderBy:function(t,e){e.preventDefault(),e.stopPropagation(),this.state.orderByFiled==t?this.setState({orderByAsc:!this.state.orderByAsc}):this.setState({orderByFiled:t,orderByAsc:!0})},onFilter:function(t,e){e.preventDefault(),e.stopPropagation();var n=c()(":checked",e.currentTarget),i=(0,o.map)(n,(function(t){return c()(t).val()}));this.setState({filterField:i.length>0?t:null,filterValues:i.length>0?i:[],search:null}),c()("#distribution-filter-ddl-"+t).foundation("close")},onClearFilter:function(t,e){e.preventDefault(),e.stopPropagation(),this.setState({filterField:null,filterValues:[],search:null}),c()("#distribution-filter-ddl-"+t).foundation("close"),c()(e.currentTarget).closest("form").get(0).reset()},renderHeader:function(t,e){var n=this.getCollection(),i=null,a=null,l=null;if(n=n?n.toArray():[],i=this.state.orderByFiled==t?this.state.orderByAsc?r().createElement("i",{className:"fa fa-sort-up active"}):r().createElement("i",{className:"fa fa-sort-down active"}):r().createElement("i",{className:"fa fa-sort"}),i=r().createElement("a",{onClick:this.onOrderBy.bind(null,t)}," ",i),this.state.filterField&&this.state.filterField==t&&(a=r().createElement("a",{"data-toggle":"distribution-filter-ddl-"+t}," ",r().createElement("i",{className:"fa fa-filter active"}))),n){var c=(0,o.map)(n,(function(e){var n=e.get(t),i=s()(n,s().ISO_8601);return i.isValid()?i.format("MMM DD, YYYY"):n})),u=(0,o.uniq)(c).sort();l=r().createElement("div",{id:"distribution-filter-ddl-"+t,className:"dropdown-pane bottom",style:{width:"auto"},"data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false"},r().createElement("form",{onSubmit:this.onFilter.bind(this,t)},r().createElement("ul",{className:"vertical menu"},u.map((function(e,n){return r().createElement("li",{key:t+n},r().createElement("input",{id:t+n,name:t,type:"checkbox",value:e}),r().createElement("label",{htmlFor:t+n},e))}))),r().createElement("button",{className:"button tiny success",type:"submit"},"Filter"),r().createElement("button",{className:"button tiny warning",type:"reset",onClick:this.onClearFilter.bind(this,t)},"Clear")))}return r().createElement("div",null,r().createElement("a",{"data-toggle":"distribution-filter-ddl-"+t},e),i,a,l)},getDataSource:function(){var t=this.getCollection();if(t=t?t.toArray():[],this.state.orderByFiled&&(t=(0,o.orderBy)(t,["attributes."+this.state.orderByFiled],[this.state.orderByAsc?"asc":"desc"])),this.state.search){var e=this.state.search.toLowerCase(),n=null;t=(0,o.filter)(t,(function(t){return n=(0,o.values)(t.attributes),(0,o.some)(n,(function(t){var n=s()(t,s().ISO_8601);return n.isValid()?n.format("MMM DD YYYY MMM DD, YYYY YYYY-MM-DD MM/DD/YYYY YYYY MM MMM DD").toLowerCase().indexOf(e)>-1:(0,o.toString)(t).toLowerCase().indexOf(e)>-1}))}))}else if(this.state.filterField&&this.state.filterValues){var i=this.state.filterField,r=this.state.filterValues;t=(0,o.filter)(t,(function(t){var e=t.get(i),n=s()(e,s().ISO_8601);return n.isValid()?(0,o.indexOf)(r,n.format("MMM DD, YYYY"))>-1:(0,o.indexOf)(r,e)>-1}))}return t},render:function(){var t=this.getDataSource();return r().createElement("div",{className:"section row"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 column"},r().createElement("h5",null,"Distribution Maps")),r().createElement("div",{className:"small-12 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,r().createElement("a",{href:"#"},"Control Center")),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," Distribution Maps")))))),r().createElement("div",{className:"scroll-list-section-body"},r().createElement("div",{className:"row scroll-list-header"},r().createElement("div",{className:"hide-for-small-only medium-2 columns"},this.renderHeader("ClientName","Client Name")),r().createElement("div",{className:"small-12 medium-5 columns"},this.renderHeader("ClientCode","Client Code")),r().createElement("div",{className:"hide-for-small-only medium-2 columns"},this.renderHeader("Date","Date")),r().createElement("div",{className:"small-12 medium-3 columns"},r().createElement("span",{className:"show-for-large"},this.renderHeader("AreaDescription","Type")))),t.map((function(t){return r().createElement(f,{key:t.get("Id"),model:t})})))))}})},8742:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(3609)),a=n.n(o),s=(n(2345),n(5911),n(6486)),l=n(5086);const c=r().createBackboneClass({mixins:[l.ZP],getInitialState:function(){return{editId:null}},componentDidMount:function(){this.getModel(),a()("form").foundation()},componentWillUpdate:function(t,e){null!=this.state.editId&&e.editId!=this.state.editId&&this.refs["userSelector-"+this.state.editId]&&a()(this.refs["userSelector-"+this.state.editId]).select2("destroy")},componentDidUpdate:function(t,e){null!=this.state.editId&&this.state.editId!=e.editId&&this.refs["userSelector-"+this.state.editId]&&a()(this.refs["userSelector-"+this.state.editId]).select2()},onClose:function(){this.publish("showDialog")},onAdd:function(t){this.setState({editId:t})},onSave:function(t){var e=this.props.taskId,n=this.getCollection().get(t),i=a()(this.refs.userColor).val(),r=a()(this.refs["userSelector-"+t]).val(),o=this;n.assignGTUToTask({Id:t,TaskId:e,UserColor:i,AuditorId:r}).done((function(){o.setState({editId:null}),o.publish("GTU.Assigned")}))},onCacnel:function(){this.setState({editId:null})},onRemove:function(t){var e=this;this.confirm("Are you sure you want to remove the assignment from GTU and Employee?").then((function(){var n=e.props.taskId;e.getCollection().get(t).unassignGTUFromTask(n,t)}))},renderEditForm:function(t){var e=this,n=(0,s.groupBy)(this.props.user.models,(function(t){return t.get("CompanyId")}));return r().createElement("tr",{key:t.get("Id")},r().createElement("td",{className:"text-center"},t.get("BagId")),r().createElement("td",{className:"text-center"},t.get("ShortUniqueID")),r().createElement("td",{className:"text-center"},r().createElement("input",{ref:"userColor",className:"color-block",type:"color",autocomplete:!0,defaultValue:"#"+Math.floor(16777215*Math.random()).toString(16)})),r().createElement("td",{colSpan:"2"},r().createElement("select",{ref:"userSelector-"+t.get("Id")},(0,s.map)(n,(function(t,e){return r().createElement("optgroup",{key:e,label:t[0].get("CompanyName")},t.map((function(t){return r().createElement("option",{key:t.get("UserId"),value:t.get("UserId")},t.get("UserName")," - ",t.get("Role"))})))})))),r().createElement("td",{className:"text-center"},t.get("IsOnline")?"Online":"Offline"),r().createElement("td",{className:"text-center"},r().createElement("button",{className:"button tiny",onClick:e.onSave.bind(e,t.get("Id"))},"Save"),r().createElement("button",{className:"button tiny alert",onClick:e.onCacnel},"Cancel")))},render:function(){var t=this.getCollection()||[],e=this;return t&&t.where&&(t=t.where((function(t){return 0==t.get("IsAssignedToOther")}))),r().createElement("div",null,r().createElement("h3",null,"Assign GTU"),r().createElement("div",{"data-abide-error":!0,className:"alert callout",style:{display:"none"}},r().createElement("p",null,r().createElement("i",{className:"fa fa-exclamation-circle"})," ","")),r().createElement("table",null,r().createElement("colgroup",null,r().createElement("col",{style:{width:"80px"}}),r().createElement("col",{style:{width:"160px"}}),r().createElement("col",{style:{width:"160px"}}),r().createElement("col",null),r().createElement("col",{style:{width:"160px"}}),r().createElement("col",{style:{width:"160px"}}),r().createElement("col",{style:{width:"150px"}})),r().createElement("thead",null,r().createElement("tr",null,r().createElement("th",{className:"text-center"},"Bag#"),r().createElement("th",{className:"text-center"},"GTU#"),r().createElement("th",{className:"text-center"},"Color"),r().createElement("th",{className:"text-center"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-6 column"},"Team"),r().createElement("div",{className:"small-6 column"},"Auditor"))),r().createElement("th",{className:"text-center"},"Role"),r().createElement("th",{className:"text-center"},"Status"),r().createElement("th",{className:"text-center"}))),r().createElement("tbody",null,t.map((function(t){var n=t.get("IsAssign"),i=t.get("Id"),o=r().createElement("button",{className:"button tiny",onClick:e.onAdd.bind(null,i)},r().createElement("i",{className:"fa fa-plus"})," Assign"),a=r().createElement("button",{className:"button alert tiny",onClick:e.onRemove.bind(null,i)},r().createElement("i",{className:"fa fa-remove"})," Remove"),s=t.get("UserColor")?r().createElement("div",{className:"color-block",style:{background:t.get("UserColor")}}):null,l=n?a:o;return t.get("Id")==e.state.editId?e.renderEditForm(t):r().createElement("tr",{key:t.get("Id")},r().createElement("td",{className:"text-center"},t.get("BagId")),r().createElement("td",{className:"text-center"},t.get("ShortUniqueID")),r().createElement("td",{className:"text-center"},s),r().createElement("td",null,r().createElement("div",{className:"row"},r().createElement("div",{className:"small-6 column"},t.get("Company")),r().createElement("div",{className:"small-6 column"},t.get("Auditor")))),r().createElement("td",{className:"text-center"},t.get("Role")),r().createElement("td",{className:"text-center"},t.get("IsOnline")?"Online":"Offline"),r().createElement("td",{className:"text-center"},l))})))),r().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},r().createElement("span",{"aria-hidden":"true"},"×")))}})},5230:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(381)),a=n.n(o),s=n(6486),l=n(3609),c=n.n(l),u=n(4042),h=n.n(u),d=n(5086),p=r().createClass({displayName:"MapContainer",mixins:[d.ZP],shouldComponentUpdate:function(){return!1},componentWillUnmount:function(){this.state.map&&(this.state.map.off("click"),this.state.map.remove())},componentDidMount:function(){var t=this;this.subscribe("Map.Draw.CustomGTU",(function(e){t.drawGtu(),t.drawCustomGtu()})),this.subscribe("Map.Draw.Recenter",(function(e){t.recenter()}))},onInit:function(t){if(null!=t){var e=this;h().accessToken="pk.eyJ1IjoiZ2hvc3R1eiIsImEiOiJjaXczc2tmc3cwMDEyMm9tb29pdDRwOXUzIn0.KPSiOO6DWTY59x1zHdvYSA";var n=new(h().Map)({container:t,zoom:8,maxZoom:20,center:[-73.987378,40.744556],style:"//timm.vargainc.com/map/street.json"}),i=new(h().NavigationControl);n.addControl(i,"top-right"),n.on("load",(function(){n.addSource("google-road-tiles",{type:"raster",tiles:["//mt0.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt2.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt3.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"],tileSize:256}),n.addSource("google-satellite-tiles",{type:"raster",tiles:["//mt0.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt2.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt3.google.com/vt/lyrs=y&x={x}&y={y}&z={z}"],tileSize:256}),n.addLayer({id:"google-road-tiles-layer",type:"raster",source:"google-road-tiles",minzoom:0,maxzoom:21,layout:{visibility:"visible"}}),n.addLayer({id:"google-satellite-tiles-layer",type:"raster",source:"google-satellite-tiles",minzoom:0,maxzoom:21,layout:{visibility:"none"}}),e.registerTopic(n),e.setState({map:n,mapContainer:t},e.initMapLayer)}))}},registerTopic:function(t){var e=this;t.on("click",(function(n){var i=t.queryRenderedFeatures(n.point,{layers:["gtu-new-layer"]});if(i&&i.length>0){var r=(0,s.first)(i);return console.log(r.properties.clientId),void e.publish("Map.GTU.Remove",r.properties.clientId)}var o=t.queryRenderedFeatures(n.point,{layers:["boundary-dmap-fill-layer"]});o&&o.length>0&&e.publish("Map.GTU.New",n.lngLat)}))},initMapLayer:function(){var t=this.state.map,e=this;this.drawBoundary(),this.drawGtu(),this.subscribe("Global.Window.Resize",(function(n){if(e.state.mapContainer){c()(".mapbox-wrapper").width("".concat(n.width,"px"));var i=n.height-c()(".title-bar").outerHeight()-c()(".section").outerHeight()-c()(".map-toolbar").outerHeight()-10;c()(".mapbox-wrapper").height("".concat(i,"px")),t.resize()}})),c()(window).trigger("resize")},drawBoundary:function(){var t=this,e=this.state.map;if(e){console.time("draw boundary"),this.publish("showLoading");var n=this.props.dmap.get("Boundary"),i=(this.props.dmap.get("Color"),new(h().LngLatBounds)),r={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}};(0,s.each)(n,(function(t){r.geometry.coordinates[0].push([t.lng,t.lat]),i.extend([t.lng,t.lat])})),e.addSource("boundary-dmap",{type:"geojson",data:{type:"FeatureCollection",features:[r]}}),e.addLayer({id:"boundary-dmap-fill-layer",type:"fill",source:"boundary-dmap",layout:{},paint:{"fill-opacity":0,"fill-color":"rgb(0, 0, 0)"}}),e.addLayer({id:"boundary-dmap-layer",type:"line",source:"boundary-dmap",layout:{"line-join":"round"},paint:{"line-color":"rgb(0, 0, 0)","line-width":{stops:[[10,1],[20,4]]}}}),e.fitBounds(i),this.setState({dmapBounds:i},(function(){t.publish("hideLoading"),console.timeEnd("draw boundary")}))}else console.error("map is not ready")},recenter:function(){if(this.state.map&&this.state.dmapBounds){var t=this.state.map.getZoom();this.state.map.flyTo({center:this.state.dmapBounds.getCenter(),zoom:t})}},drawGtu:function(){var t=this.state.map;if(t){console.time("draw gtu");var e=this.props.dmap.get("Gtu")||[],n={type:"geojson",data:{type:"FeatureCollection",features:[]}};(0,s.each)(e,(function(t){var e=t.color;(0,s.each)(t.points,(function(i){if(i.out)return!0;n.data.features.push({type:"Feature",properties:{cellId:i.cellId,userColor:e,gtuId:t.gtuId},geometry:{type:"Point",coordinates:[i.lng,i.lat]}})}))}));var i=t.getSource("gtu-source");i?i.setData(n.data):(t.addSource("gtu-source",n),t.addLayer({id:"gut-layer",type:"circle",source:"gtu-source",paint:{"circle-radius":{stops:[[4,2],[20,8]]},"circle-color":{property:"userColor",type:"identity"},"circle-stroke-width":1,"circle-stroke-color":"black"}})),console.timeEnd("draw gtu")}else console.error("map is not ready")},drawCustomGtu:function(){var t=this.state.map;if(t){var e=t.getSource("gtu-new-source");null==e?(t.addSource("gtu-new-source",{type:"geojson",data:{type:"FeatureCollection",features:(0,s.map)(this.props.customPoints,(function(t){return{type:"Feature",properties:{clientId:t.ClientId,userColor:t.Color,gtuId:t.GtuId},geometry:{type:"Point",coordinates:[t.Location.Longitude,t.Location.Latitude]}}}))}}),t.addLayer({id:"gtu-new-layer",type:"circle",source:"gtu-new-source",paint:{"circle-radius":{stops:[[4,2],[20,8]]},"circle-color":{property:"userColor",type:"identity"},"circle-stroke-width":4,"circle-stroke-color":"#000000"}})):e.setData({type:"FeatureCollection",features:(0,s.map)(this.props.customPoints,(function(t){return{type:"Feature",properties:{clientId:t.ClientId,userColor:t.Color,gtuId:t.GtuId},geometry:{type:"Point",coordinates:[t.Location.Longitude,t.Location.Latitude]}}}))})}else console.error("map is not ready")},switchMapStyle:function(t){var e=this.state.map;e&&("streets"==t?(e.setLayoutProperty("google-road-tiles-layer","visibility","visible"),e.setLayoutProperty("google-satellite-tiles-layer","visibility","none")):(e.setLayoutProperty("google-road-tiles-layer","visibility","none"),e.setLayoutProperty("google-satellite-tiles-layer","visibility","visible")))},render:function(){return r().createElement("div",{className:"mapbox-wrapper"},r().createElement("div",{className:"mapbox-container",ref:this.onInit,style:{width:"100%",height:"100%"}}),r().createElement("div",{className:"map-overlay"},r().createElement("div",{className:"mapboxgl-ctrl-top-left"},r().createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group"},r().createElement("button",{className:"mapboxgl-ctrl-icon mapboxgl-ctrl-img mapboxgl-ctrl-stree",onClick:this.switchMapStyle.bind(this,"streets")}),r().createElement("button",{className:"mapboxgl-ctrl-icon mapboxgl-ctrl-img mapboxgl-ctrl-satellite",onClick:this.switchMapStyle.bind(this,"satellite")})))),r().createElement("div",{className:"map-top-center"}))}});const f=r().createBackboneClass({mixins:[d.ZP],componentDidMount:function(){var t=this;this.subscribe("Map.GTU.New",(function(e){t.onNewGtu.call(t,e)})),this.subscribe("Map.GTU.Remove",(function(e){t.onRemoveGtu.call(t,e)}))},getInitialState:function(){return{disableDefaultUI:!1,scrollwheel:!1,disableDoubleClickZoom:!0,activeGtu:null,customPoints:[]}},setActiveGtu:function(t){var e=this.props.gtu.get(t);this.setState({activeGtu:e})},onNewGtu:function(t){var e=this,n=this.state.activeGtu;if(n){var i=this.state.customPoints;i.push({ClientId:(0,s.uniqueId)(),TaskId:this.props.task.get("Id"),GtuId:n.get("Id"),Date:a()().format("YYYY-MM-DD HH:mm:ss"),Color:n.get("UserColor"),Location:{Latitude:t.lat,Longitude:t.lng}}),this.setState({customPoints:i},(function(){e.publish("Map.Draw.CustomGTU")}))}},onRemoveGtu:function(t){if(t){var e=this,n=(0,s.filter)(this.state.customPoints,(function(e){return e.ClientId!=t}));this.setState({customPoints:n},(function(){e.publish("Map.Draw.CustomGTU")}))}},onUnderGtu:function(){var t=this,e=(0,s.dropRight)(this.state.customPoints);this.setState({customPoints:e},(function(){t.publish("Map.Draw.CustomGTU")}))},onSaveGtu:function(){var t=this,e=(0,s.map)(this.state.customPoints,(function(t){return{GtuId:t.GtuId,Date:t.Date,Location:t.Location}}));Promise.all([this.props.task.addGtuDots(e)]).then((function(){return t.props.dmap.fetchGtuForEdit()})).then((function(){t.setState({customPoints:[]},(function(){t.publish("Map.Draw.CustomGTU")}))}))},onReCenter:function(){this.publish("Map.Draw.Recenter")},render:function(){var t=this,e=this.props.gtu.models||[];if((0,s.filter)(this.state.customPoints,(function(t){return"new"==t.status||"deleted"==t.status})),this.state.customPoints.length>0)n=r().createElement("button",{className:"button float-right",onClick:this.onUnderGtu},r().createElement("i",{className:"fa fa-undo"}),"Undo"),i=r().createElement("button",{className:"button float-right",onClick:this.onSaveGtu},r().createElement("i",{className:"fa fa-save"}),"Save");else var n=r().createElement("button",{className:"button float-right",disabled:!0,onClick:this.onUnderGtu},r().createElement("i",{className:"fa fa-undo"}),"Undo"),i=r().createElement("button",{className:"button float-right",disabled:!0,onClick:this.onSaveGtu},r().createElement("i",{className:"fa fa-save"}),"Save");return r().createElement("div",{className:"edit-gtu"},r().createElement("div",{className:"section row"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 column"},r().createElement("h5",null,"Edit GTU - ",this.props.task.get("Name"))),r().createElement("div",{className:"small-12 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,r().createElement("a",{href:"#"},"Control Center")),r().createElement("li",null,r().createElement("a",{href:"#report/"+this.props.task.get("Id")},"Report")),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," Edit GTU"))))))),r().createElement("div",{className:"small-12 medium-7 large-9 columns"},e.map((function(e){return r().createElement("button",{key:e.get("Id"),className:t.state.activeGtu==e?" button":"button",onClick:t.setActiveGtu.bind(null,e.get("Id"))},r().createElement("i",{className:t.state.activeGtu==e?"fa fa-map-marker":"fa fa-stop",style:{color:e.get("UserColor")}}),e.get("ShortUniqueID"))}))),r().createElement("div",{className:"small-12 medium-5 large-3 columns"},i,n,r().createElement("button",{className:"button float-right",onClick:this.onReCenter},r().createElement("i",{className:"fa fa-refresh"}),"ReCenter"))),r().createElement(p,{dmap:this.props.dmap,customPoints:this.state.customPoints}))}})},3179:(t,e,n)=>{"use strict";n.d(e,{Z:()=>S}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(381),n(3609)),a=n.n(o),s=n(6486),l=n(8573),c=n(6079),u=n(189),h=n(5086),d=n(7981),p=n(8742),f=n(3821),m=null,g=null,_=null,y=null,v=null,b=[],x={},w={},E=0,M=0,T=null;const S=r().createBackboneClass({mixins:[h.ZP,d.Z],getInitialState:function(){return{disableDefaultUI:!1,scrollwheel:!1,disableDoubleClickZoom:!0,activeGtu:[],ShowOutOfBoundary:!1,displayMode:"cover",customPoints:[],maxDisplayCount:1e3,canDrawMap:!1,lastDisplayGtuIndex:null}},onWindowResize:function(){var t=a()(window).height()-a()(this.refs.mapArea).position().top;this.setMapHeight(t)},componentDidMount:function(){this.publish("showLoading"),a()(window).on("resize.gtu-monitor-view",a().proxy(this.onWindowResize,this)),this.onWindowResize();var t=this;this.getGoogleMap(),this.drawDmapBoundary().done((function(){t.drawGtu(),t.drawLastLocation();var e=(0,s.map)(t.props.gtu.where((function(t){return t.get("IsAssign")||t.get("WithData")})),(function(t){return t.get("Id")}));t.setState({activeGtu:e,canDrawMap:!0}),t.publish("hideLoading"),T=new google.maps.InfoWindow,window.clearInterval(g),g=window.setInterval(t.reload,3e4)})),a()("#monitor-more-menu").foundation()},componentWillUnmount:function(){var t=this.getGoogleMap();try{this.clearMap(),(0,s.each)(x,(function(t){t.setMap(null)})),y.setMap(null),google.maps.event.clearInstanceListeners(t),a()(document).off("resize.gtu-monitor-view")}catch(t){}},shouldComponentUpdate:function(t,e){var n=e.activeGtu,i=this.state.activeGtu,r=(0,s.xor)(n,i);return"track"==e.displayMode?window.clearInterval(g):(window.clearInterval(g),g=window.setInterval(this.reload,3e4)),this.state.ShowOutOfBoundary!=e.ShowOutOfBoundary?this.reload():(0,s.isEmpty)(r)?this.state.displayMode!=e.displayMode&&(this.clearMap(),this.reload()):this.reload(),!0},getCirclePath:function(t){return"M-".concat(t,",0a").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0a").concat(t,",").concat(t," 0 1,0 -").concat(2*t,",0")},drawDmapBoundary:function(){var t=a().Deferred(),e=this.props.dmap.get("Boundary"),n=this.props.dmap.get("Color"),i=this.getGoogleMap();return v=new google.maps.LatLngBounds,y=new google.maps.Polygon({paths:e,strokeColor:n,strokeOpacity:1,strokeWeight:6,fillOpacity:0,map:i}),(0,s.each)(e,(function(t){var e=new google.maps.LatLng(t.lat,t.lng);v.extend(e)})),google.maps.event.addListenerOnce(i,"tilesloaded",(function(){window.clearTimeout(null),t.resolve()})),i.fitBounds(v),t.resolve(),t},drawGtu:function(){if("cover"==this.state.displayMode){console.log("begin draw");var t=this,e=this.getGoogleMap(),n=!this.state.ShowOutOfBoundary,i=this.props.dmap.get("Gtu")||[],r=this.state.activeGtu;console.log("already draw gtu",b.length),(0,s.each)(b,(function(t){t.setMap(null)})),b=[],(0,s.each)(i,(function(i){if(-1==(0,s.indexOf)(r,i.gtuId))return!0;if(n)var o=(0,s.filter)(i.points,{out:!1});else o=i.points;var a=i.color;console.log("draw color: "+a+" gtu count:"+o.length),(0,s.each)(o,(function(n){n&&n.lat&&n.lng&&b.push(new l.Z({position:{lat:n.lat,lng:n.lng},icon:{path:t.getCirclePath(5),fillColor:a,fillOpacity:.8,strokeWeight:1,strokeOpacity:.9,strokeColor:"#000"},draggable:!1,map:e}))}))}))}},prepareGTUTrack:function(){var t=a().Deferred(),e=this.props.task.get("Id"),n=this.state.activeGtu;if(n&&1==n.length){var i=this.props.gtu.get(n[0]),r=i.get("track");(0,s.isEmpty)(r)?t=i.getTrack(e):t.resolve()}else t.resolve();return t},drawGTUTrack:function(){if("track"==this.state.displayMode){this.getGoogleMap();var t=this.state.activeGtu,e=this.props.gtu,n=this;this.prepareGTUTrack().then((function(){if(n.clearMap(),t&&1==t.length){E=0;var i=e.get(t[0]);n.changeToBestTrackView(i),n.animateDrawTrack(i)}}))}else window.cancelAnimationFrame(_)},changeToBestTrackView:function(t){var e=t.get("track"),n=this.getGoogleMap(),i=new google.maps.LatLngBounds;(0,s.each)(e,(function(t){i.extend(new google.maps.LatLng(t.lat,t.lng))})),n.fitBounds(i)},animateDrawTrack:function(t){if("track"==this.state.displayMode){if(M%10!=0)return M++,void(_=window.requestAnimationFrame(a().proxy((function(){this.animateDrawTrack(t)}),this)));M=1;var e=t.get("track");if(e&&!(E>=e.length)){var n=t.get("Id"),i=this.getGoogleMap();w[n]||(w[n]=[]);var r=new google.maps.Marker({position:e[E++],icon:{path:this.getCirclePath(6),fillColor:t.get("UserColor"),fillOpacity:1,strokeOpacity:1,strokeColor:"#000"},draggable:!1,map:i});w[n].push(r),_=window.requestAnimationFrame(a().proxy((function(){this.animateDrawTrack(t)}),this))}}},drawLastLocation:function(){var t=this.getGoogleMap(),e=1==this.props.task.get("Status"),n=this.props.gtu.where((function(t){return e?t.get("WithData"):t.get("IsAssign")||t.get("WithData")})),i=(0,s.map)(n,(function(t){return t.get("Id")})),r=(0,s.keys)(x)||[],o=(0,s.difference)(r,i);(0,s.each)(o,(function(t){x[t].setMap(null),delete x[t]})),(0,s.each)(n,(function(e){var n=e.get("Id"),i=e.get("Location");if(!i)return delete x[n],!0;x[n]?x[n].setPosition({lat:i.lat,lng:i.lng}):x[n]=new google.maps.Marker({position:{lat:i.lat,lng:i.lng},icon:{path:"Driver"==e.get("Role")?"M-10.8,1.3c-0.3,0.3-0.7,0.5-1.1,0.5c-0.4,0-0.8-0.2-1.1-0.5s-0.5-0.7-0.5-1.1s0.2-0.8,0.5-1.1s0.7-0.5,1.1-0.5c0.4,0,0.8,0.2,1.1,0.5c0.3,0.3,0.5,0.7,0.5,1.1C-10.3,0.7-10.4,1.1-10.8,1.3z M-15.2-6.6c0-0.1,0-0.2,0.1-0.3l2.5-2.5c0.1,0,0.2-0.1,0.3-0.1h2v3.3h-4.9V-6.6z M0.7,1.3C0.4,1.6-0.1,1.8-0.4,1.8s-0.8-0.2-1.1-0.5s-0.5-0.7-0.5-1.1s0.2-0.8,0.5-1.1c0.3-0.3,0.7-0.5,1.1-0.5s0.8,0.2,1.1,0.5c0.3,0.3,0.5,0.7,0.5,1.1C1.1,0.7,1,1.1,0.7,1.3z M4.2-14.1c-0.2-0.2-0.4-0.3-0.6-0.3h-13c-0.3,0-0.5,0.1-0.6,0.3c-0.1,0.2-0.3,0.3-0.3,0.6v2.4h-2c-0.2,0-0.5,0.1-0.7,0.2c-0.3,0.1-0.5,0.2-0.7,0.4l-2.5,2.5c-0.1,0.1-0.2,0.2-0.3,0.4c-0.1,0.1-0.1,0.2-0.2,0.4c0,0.1-0.1,0.3-0.1,0.5s0,0.3,0,0.4c0,0.1,0,0.3,0,0.5s0,0.4,0,0.4v4.1c-0.2,0-0.4,0.1-0.6,0.2s-0.2,0.4-0.2,0.6c0,0.1,0,0.2,0.1,0.3c0,0.1,0.1,0.2,0.2,0.2s0.2,0.1,0.2,0.1s0.2,0.1,0.3,0.1s0.2,0,0.3,0c0.1,0,0.2,0,0.3,0s0.3,0,0.3,0h0.8c0,0.9,0.3,1.7,1,2.3s1.4,1,2.3,1s1.7-0.3,2.3-1c0.6-0.6,1-1.4,1-2.3h4.9c0,0.9,0.3,1.7,1,2.3s1.4,1,2.3,1s1.7-0.3,2.3-1c0.6-0.6,1-1.4,1-2.3c0,0,0.1,0,0.3,0c0.2,0,0.3,0,0.3,0s0.1,0,0.3,0c0.1,0,0.2,0,0.3-0.1c0.1,0,0.1-0.1,0.2-0.1s0.1-0.1,0.2-0.2c0-0.1,0.1-0.2,0.1-0.3v-13C4.4-13.9,4.3-14,4.2-14.1z":"M-9-0.2c0,0.5,0.3,1,0.8,1.4S-7,2-6.1,2.2c0.9,0.3,1.8,0.4,2.8,0.6C-2.3,2.9-1.2,3-0.1,3S2,2.9,3.1,2.8c1-0.1,2-0.3,2.8-0.6c0.9-0.3,1.5-0.6,2-1s0.8-0.9,0.8-1.4c0-0.4-0.1-0.8-0.4-1.1C8-1.6,7.6-1.9,7.2-2.1c-0.5-0.2-1-0.4-1.5-0.6C5.2-2.8,4.7-3,4.1-3.1c-0.2,0-0.4,0-0.6,0.1C3.3-2.9,3.2-2.7,3.2-2.5s0,0.4,0.1,0.6s0.3,0.3,0.5,0.3c0.5,0.1,0.9,0.2,1.3,0.3c0.4,0.1,0.7,0.2,1,0.3c0.2,0.1,0.4,0.2,0.6,0.3C6.9-0.6,7-0.5,7-0.5c0.1,0.1,0.1,0.1,0.1,0.1c0,0.1-0.1,0.2-0.3,0.3C6.6,0,6.3,0.2,5.9,0.3S5,0.6,4.5,0.7S3.3,0.9,2.5,1C1.7,1.1,0.9,1.1,0,1.1s-1.7,0-2.5-0.1s-1.5-0.2-2-0.3s-1-0.3-1.4-0.4C-6.3,0.2-6.6,0-6.8-0.1s-0.3-0.2-0.3-0.3c0,0,0-0.1,0.1-0.1c0.1-0.1,0.2-0.1,0.3-0.2S-6.3-0.9-6.1-1c0.2-0.1,0.6-0.2,1-0.3c0.4-0.1,0.8-0.2,1.3-0.3c0.2,0,0.4-0.1,0.5-0.3c0.1-0.2,0.2-0.4,0.1-0.6c0-0.2-0.1-0.4-0.3-0.5c-0.2-0.1-0.4-0.2-0.6-0.1C-4.7-3-5.2-2.9-5.7-2.7s-1,0.3-1.5,0.6c-0.5,0.2-0.9,0.5-1.1,0.8S-9-0.6-9-0.2z M-4.2-11.4v4.8C-4.2-6.4-4.1-6.2-4-6c0.2,0.2,0.3,0.2,0.6,0.2h0.8V-1c0,0.2,0.1,0.4,0.2,0.6c0.2,0.2,0.3,0.2,0.6,0.2h3.2c0.2,0,0.4-0.1,0.6-0.2C2.2-0.6,2.2-0.7,2.2-1v-4.8H3c0.2,0,0.4-0.1,0.6-0.2c0.2-0.2,0.2-0.3,0.2-0.6v-4.8c0-0.4-0.2-0.8-0.5-1.1S2.6-13,2.2-13h-4.8c-0.4,0-0.8,0.2-1.1,0.5S-4.2-11.8-4.2-11.4z M-3-16.2c0,0.8,0.3,1.4,0.8,2s1.2,0.8,2,0.8s1.4-0.3,2-0.8s0.8-1.2,0.8-2c0-0.8-0.3-1.4-0.8-2c-0.5-0.6-1.2-0.8-2-0.8s-1.4,0.3-2,0.8S-3-17-3-16.2z",fillColor:e.get("UserColor"),fillOpacity:1,strokeOpacity:1,strokeWeight:1,strokeColor:"#fff"},draggable:!1,map:t})}))},clearMap:function(){try{(0,s.each)(b,(function(t){t&&t.setMap&&t.setMap(null)})),window.window.cancelAnimationFrame(_),E=0,(0,s.each)(w,(function(t){t&&(0,s.each)(t,(function(t){t&&t.setMap&&t.setMap(null)}))}))}catch(t){}},reload:function(){console.log("reload"),window.clearTimeout(m),m=window.setTimeout(a().proxy(this._reload,this),100)},_reload:function(){console.log("_reload");var t=this.props.dmap,e=this.props.gtu,n=this.props.task.get("Id"),i=this;"cover"==this.state.displayMode?a().when([t.updateGtuAfterTime(null,{quite:!0}).promise,e.fetchGtuLocation(n,{quite:!0}).promise]).done((function(){i.drawGtu(),i.drawLastLocation()})):(i.drawLastLocation(),i.drawGTUTrack())},onReCenter:function(){this.getGoogleMap().setCenter(v.getCenter())},onSelectedGTU:function(t){var e=(0,s.clone)(this.state.activeGtu);"cover"==this.state.displayMode?(0,s.indexOf)(e,t)>-1?(0,s.pull)(e,t):e.push(t):e=[t],this.setState({activeGtu:e})},onGotoGTU:function(t,e){e.preventDefault(),e.stopPropagation();var n=this.getGoogleMap(),i=this.props.gtu.get(t),r=i.get("Location"),o=x[i.get("Id")];r?(n.setCenter(i.get("Location")),T.setContent(i.get("ShortUniqueID")),T.open(n,o)):this.alert("showDialog","No Data")},onAssign:function(){var t=this.props.gtu,e=this.props.task.get("Id"),n=new c.Z,i=this;n.fetchForGtu().done((function(){i.publish("showDialog",{view:p.Z,params:{collection:t,user:n,taskId:e},options:{size:"full"}})}))},onAddEmployee:function(){var t=new c.Z,e=this;t.fetchCompany().done((function(){e.publish("showDialog",{view:f.Z,params:{model:new u.Z,company:t}})}))},onStart:function(){this.props.task.setStart()},onStop:function(){this.props.task.setStop()},onPause:function(){this.props.task.setPause()},onSwitchDisplayMode:function(){var t=(0,s.clone)(this.state.activeGtu),e=[];t&&t.length>0&&(e=[t[0]]),this.setState({activeGtu:"cover"==this.state.displayMode?e:t,displayMode:"cover"==this.state.displayMode?"track":"cover",lastDisplayGtuIndex:null})},onSwitchShowOutOfBoundaryPoints:function(){this.setState({ShowOutOfBoundary:!this.state.ShowOutOfBoundary,lastViewArea:null})},onCopyShareLink:function(){var t=window.location,e=t.pathname.substr(1),n=t.pathname.substr(0,e.indexOf("/")+1),i=this.props.task.get("PublicUrl"),r=t.protocol+"//"+window.location.host+n+"/monitor/#"+i;this.alert(r)},onOpenMoreMenu:function(t){t.preventDefault(),t.stopPropagation()},onCloseMoreMenu:function(){a()("#monitor-more-menu").foundation("close")},renderMoreMenu:function(){if(1==this.props.task.get("Status"))var t=null;else t=r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onAssign},r().createElement("i",{className:"fa fa-users"})," ",r().createElement("span",null,"Assign GTU")));return(0,s.isInteger)(this.props.task.get("Id"))?r().createElement("span",{className:"float-right"},r().createElement("button",{className:"button cirle","data-toggle":"monitor-more-menu",onClick:this.onOpenMoreMenu},r().createElement("i",{className:"fa fa-ellipsis-h"})),r().createElement("div",{id:"monitor-more-menu",className:"dropdown-pane bottom","data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false",onClick:this.onCloseMoreMenu},r().createElement("ul",{className:"vertical menu"},t,r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onAddEmployee},r().createElement("i",{className:"fa fa-user-plus"})," ",r().createElement("span",null,"New Employee"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onSwitchDisplayMode},r().createElement("i",{className:"cover"==this.state.displayMode?"fa fa-map":"fa fa-map-o"})," ",r().createElement("span",null,"cover"==this.state.displayMode?"Track Path":"Show Coverage"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onSwitchShowOutOfBoundaryPoints},r().createElement("i",{className:this.state.ShowOutOfBoundary?"fa fa-expand":"fa fa-compress"})," ",r().createElement("span",null,this.state.ShowOutOfBoundary?"Hide Out of Bounds":"Show Out of Bounds"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onCopyShareLink},r().createElement("i",{className:"fa fa-link"})," ",r().createElement("span",null,"URL for Distribution drivers")))))):r().createElement("span",{className:"float-right"},r().createElement("button",{className:"button cirle","data-toggle":"monitor-more-menu",onClick:this.onOpenMoreMenu},r().createElement("i",{className:"fa fa-ellipsis-h"})),r().createElement("div",{id:"monitor-more-menu",className:"dropdown-pane bottom","data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false",onClick:this.onCloseMoreMenu},r().createElement("ul",{className:"vertical menu"},r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onSwitchDisplayMode},r().createElement("i",{className:"cover"==this.state.displayMode?"fa fa-map":"fa fa-map-o"})," ",r().createElement("span",null,"cover"==this.state.displayMode?"Track Path":"Show Coverage"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onSwitchShowOutOfBoundaryPoints},r().createElement("i",{className:this.state.ShowOutOfBoundary?"fa fa-expand":"fa fa-compress"})," ",r().createElement("span",null,this.state.ShowOutOfBoundary?"Hide Out of Bounds":"Show Out of Bounds"))))))},renderGtu:function(t){var e=null,n=null,i="button text-left",o=1==this.props.task.get("Status"),a=(0,s.indexOf)(this.state.activeGtu,t.get("Id"))>-1,l=null;if(o)l=r().createElement("i",{className:"fa fa-stop"});else switch(t.get("Role")){case"Driver":l=r().createElement("i",{className:"fa fa-truck"});break;case"Walker":l=r().createElement("i",{className:"fa fa-street-view"});break;default:l=null}return a&&(i+=" active"),o||t.get("IsOnline")||(i+=" offline"),!o&&t.get("IsOnline")&&t.get("OutOfBoundary")&&(e=r().createElement("i",{className:"fa fa-bell faa-ring animated alert"})),!o&&t.get("WithData")&&(n=r().createElement("i",{className:"fa fa-warning alert"})),r().createElement("span",{className:"group",key:t.get("Id")},r().createElement("button",{className:i,style:{backgroundColor:a?t.get("UserColor"):"transparent"},onClick:this.onSelectedGTU.bind(null,t.get("Id"))},n,l,"  ",r().createElement("span",null,t.get("ShortUniqueID")),"  ",e),r().createElement("button",{className:"button location",onClick:this.onGotoGTU.bind(null,t.get("Id"))},r().createElement("i",{className:"location fa fa-crosshairs",style:{color:"black"}})))},renderController:function(){var t=this.props.task;if(!(0,s.isInteger)(this.props.task.get("Id")))switch(t.get("Status")){case 0:return r().createElement("h5",null,"STARTED");case 1:return r().createElement("h5",null,"STOPPED");case 2:return r().createElement("h5",null,"PEASED");default:return null}switch(t.get("Status")){case 0:return r().createElement("div",null,r().createElement("button",{className:"button",onClick:this.onPause},r().createElement("i",{className:"fa fa-pause"}),"Pause"),r().createElement("button",{className:"button",onClick:this.onStop},r().createElement("i",{className:"fa fa-stop"}),"Stop"));case 1:return r().createElement("h5",null,"STOPPED");case 2:return r().createElement("div",null,r().createElement("button",{className:"button",onClick:this.onStart},r().createElement("i",{className:"fa fa-play"}),"Start"),r().createElement("button",{className:"button",onClick:this.onStop},r().createElement("i",{className:"fa fa-stop"}),"Stop"));default:return r().createElement("div",null,r().createElement("button",{className:"button",onClick:this.onStart},r().createElement("i",{className:"fa fa-play"}),"Start"))}},render:function(){var t=this,e=1==this.props.task.get("Status"),n=this.props.gtu.where((function(t){return e?t.get("WithData"):t.get("IsAssign")||t.get("WithData")}));return r().createElement("div",null,r().createElement("div",{className:"section row gtu-monitor"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"small-12 medium-5 large-3 columns"},this.renderController()),r().createElement("div",{className:"small-12 medium-7 large-9 columns"},this.renderMoreMenu(),r().createElement("button",{className:"button float-right",onClick:this.onReCenter},r().createElement("i",{className:"fa fa-crosshairs"}),r().createElement("span",null,"Center")),r().createElement("button",{className:"button float-right",onClick:this.reload},r().createElement("i",{className:"fa fa-refresh"}),r().createElement("span",null,"Refresh")))))),r().createElement("div",{className:"row gtu"},r().createElement("div",{className:"small-12 columns"},n.map((function(e){return t.renderGtu(e)})))),r().createElement("div",{ref:"mapArea"}))}})},4241:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(7588),r=n.n(i),o=n(5086);const a=r().createClass({displayName:"loading",mixins:[o.ZP],getDefaultProps:function(){return{text:"LOADING"}},render:function(){return r().createElement("div",{className:"loading"},r().createElement("div",{className:"gear one"},r().createElement("svg",{id:"blue",viewBox:"0 0 100 100",fill:"#94DDFF"},r().createElement("path",{d:"M97.6,55.7V44.3l-13.6-2.9c-0.8-3.3-2.1-6.4-3.9-9.3l7.6-11.7l-8-8L67.9,20c-2.9-1.7-6-3.1-9.3-3.9L55.7,2.4H44.3l-2.9,13.6      c-3.3,0.8-6.4,2.1-9.3,3.9l-11.7-7.6l-8,8L20,32.1c-1.7,2.9-3.1,6-3.9,9.3L2.4,44.3v11.4l13.6,2.9c0.8,3.3,2.1,6.4,3.9,9.3      l-7.6,11.7l8,8L32.1,80c2.9,1.7,6,3.1,9.3,3.9l2.9,13.6h11.4l2.9-13.6c3.3-0.8,6.4-2.1,9.3-3.9l11.7,7.6l8-8L80,67.9      c1.7-2.9,3.1-6,3.9-9.3L97.6,55.7z M50,65.6c-8.7,0-15.6-7-15.6-15.6s7-15.6,15.6-15.6s15.6,7,15.6,15.6S58.7,65.6,50,65.6z"}))),r().createElement("div",{className:"gear two"},r().createElement("svg",{id:"pink",viewBox:"0 0 100 100",fill:"#FB8BB9"},r().createElement("path",{d:"M97.6,55.7V44.3l-13.6-2.9c-0.8-3.3-2.1-6.4-3.9-9.3l7.6-11.7l-8-8L67.9,20c-2.9-1.7-6-3.1-9.3-3.9L55.7,2.4H44.3l-2.9,13.6      c-3.3,0.8-6.4,2.1-9.3,3.9l-11.7-7.6l-8,8L20,32.1c-1.7,2.9-3.1,6-3.9,9.3L2.4,44.3v11.4l13.6,2.9c0.8,3.3,2.1,6.4,3.9,9.3      l-7.6,11.7l8,8L32.1,80c2.9,1.7,6,3.1,9.3,3.9l2.9,13.6h11.4l2.9-13.6c3.3-0.8,6.4-2.1,9.3-3.9l11.7,7.6l8-8L80,67.9      c1.7-2.9,3.1-6,3.9-9.3L97.6,55.7z M50,65.6c-8.7,0-15.6-7-15.6-15.6s7-15.6,15.6-15.6s15.6,7,15.6,15.6S58.7,65.6,50,65.6z"}))),r().createElement("div",{className:"gear three"},r().createElement("svg",{id:"yellow",viewBox:"0 0 100 100",fill:"#FFCD5C"},r().createElement("path",{d:"M97.6,55.7V44.3l-13.6-2.9c-0.8-3.3-2.1-6.4-3.9-9.3l7.6-11.7l-8-8L67.9,20c-2.9-1.7-6-3.1-9.3-3.9L55.7,2.4H44.3l-2.9,13.6      c-3.3,0.8-6.4,2.1-9.3,3.9l-11.7-7.6l-8,8L20,32.1c-1.7,2.9-3.1,6-3.9,9.3L2.4,44.3v11.4l13.6,2.9c0.8,3.3,2.1,6.4,3.9,9.3      l-7.6,11.7l8,8L32.1,80c2.9,1.7,6,3.1,9.3,3.9l2.9,13.6h11.4l2.9-13.6c3.3-0.8,6.4-2.1,9.3-3.9l11.7,7.6l8-8L80,67.9      c1.7-2.9,3.1-6,3.9-9.3L97.6,55.7z M50,65.6c-8.7,0-15.6-7-15.6-15.6s7-15.6,15.6-15.6s15.6,7,15.6,15.6S58.7,65.6,50,65.6z"}))),r().createElement("div",{className:"lil-circle"}),r().createElement("div",{className:"text"},this.props.text))}})},9147:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(5086)),a=n(381),s=n.n(a);n(1167);const l=r().createBackboneClass({mixins:[o.ZP],componentDidMount:function(){var t=this;this.getModel(),$(".fdatepicker").fdatepicker({format:"yyyy-mm-dd"}).on("changeDate",(function(e){t.getModel().set("Date",e.date)})),$("form").foundation()},onSave:function(t){var e=this;this.getModel().save(null,{success:function(t,n){n&&n.success?e.onClose():e.setState({error:"opps! something wrong. please contact us!"})},error:function(){e.setState({error:"opps! something wrong. please contact us!"})}}),t.preventDefault(),t.stopPropagation()},onClose:function(){$(".fdatepicker").off("changeDate").fdatepicker("remove"),this.publish("showDialog")},onChange:function(t){this.getModel().set(t.currentTarget.name,t.currentTarget.value)},render:function(){var t,e,n=this.getModel(),i=n.get("Date"),o=i?s()(i).format("YYYY-MM-DD"):"",a=n.get("Telephone");if(a){var l=a.split("@");t=l[0],e="@"+l[1]}var c=!(!this.state||!this.state.error),u=c?this.state.error:"";return r().createElement("form",{onSubmit:this.onSave},r().createElement("h3",null,"Edit Task"),r().createElement("div",{"data-abide-error":!0,className:"alert callout",style:{display:c?"block":"none"}},r().createElement("p",null,r().createElement("i",{className:"fa fa-exclamation-circle"})," ",u)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Name",r().createElement("input",{type:"text",value:n.get("Name"),readOnly:!0}))),r().createElement("div",{className:"small-8 columns end"},r().createElement("label",null,"Distribution Date",r().createElement("input",{className:"fdatepicker",onChange:this.onChange,name:"Date",type:"date",readOnly:!0,value:o}))),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Select Auditor",r().createElement("input",{type:"text",defaultValue:n.get("AuditorName"),readOnly:!0}))),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Email",r().createElement("input",{onChange:this.onChange,name:"Email",type:"text",defaultValue:n.get("Email")}))),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Telephone",r().createElement("input",{onChange:this.onChange,name:"Telephone",type:"text",defaultValue:t}))),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Telecommunications Operator",r().createElement("select",{defaultValue:e,onChange:this.onChange,name:"Operator"},r().createElement("option",{value:"@message.alltel.com"},"Alltel"),r().createElement("option",{value:"@txt.att.net"},"AT&T"),r().createElement("option",{value:"@messaging.nextel.com"},"Nextel"),r().createElement("option",{value:"@messaging.sprintpcs.com"},"Sprint"),r().createElement("option",{value:"@tms.suncom.com"},"SunCom"),r().createElement("option",{value:"@tmomail.net"},"T-mobile"),r().createElement("option",{value:"@voicestream.net"},"VoiceStream"),r().createElement("option",{value:"@vtext.com"},"Verizon(text only)"))))),r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"button-group float-right"},r().createElement("button",{type:"submit",className:"success button"},"Save"),r().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel"))),r().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},r().createElement("span",{"aria-hidden":"true"},"×")))}})},1952:(t,e,n)=>{"use strict";n.d(e,{Z:()=>g}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(6486)),a=n(3609),s=n.n(a),l=n(381),c=n.n(l),u=n(5086),h=n(594),d=n(4179);const p=r().createBackboneClass({mixins:[u.ZP],componentWillMount:function(){},onUserSelected:function(t){this.setState({selectedUser:t})},onDbUserSelected:function(t){this.setState({selectedUser:t}),this.publish("monitor/dismiss",t)},onClose:function(){this.publish("showDialog")},onProcess:function(){this.state&&this.state.selectedUser&&this.publish("monitor/dismiss",this.state.selectedUser)},render:function(){return r().createElement("div",null,r().createElement("h5",null,"Dismiss back to Distribution Map"),r().createElement("span",null,"Assign to"),r().createElement(d.Z,{onSelect:this.onUserSelected,onDbSelect:this.onDbUserSelected,group:"distribution"}),r().createElement("div",{className:"float-right"},r().createElement("button",{className:"success button",onClick:this.onProcess},"Okay"),r().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel")))}});var f=n(9147);const m=r().createBackboneClass({mixins:[u.ZP],menuKey:"monitor-menu-ddl-",getDefaultProps:function(){return{address:null,icon:null,name:null}},componentDidMount:function(){var t=this.menuKey;(0,o.each)(this.getModel().get("Tasks"),(function(e){s()("#"+t+e.Id).foundation()}))},onDismiss:function(t){t.preventDefault(),t.stopPropagation();var e=this,n=this.getModel();this.confirm("Are you sure you want to delete all selected Tasks?").then((function(){e.publish("showDialog",{view:p}),e.unsubscribe("monitor/dismiss"),e.subscribe("monitor/dismiss",(function(t){n.dismissToDMap(t,{success:function(t){t&&t.success?e.publish("monitor/refresh"):e.alert("something wrong")},complete:function(){e.publish("showDialog")}})}))}))},onFinished:function(t,e,n,i){i.preventDefault(),i.stopPropagation();var r=this;new h.Z({Id:t}).markFinished({success:function(t){t&&t.success?r.publish("monitor/refresh"):r.alert(t.error)}})},onOpenUploadFile:function(t){s()("#upload-file-"+t).click()},onImport:function(t,e){s()(e.currentTarget).closest(".dropdown-pane").foundation("close"),e.bubbles=!1;var n=e.currentTarget.files[0];if(0!=n.size){var i=new h.Z({Id:t}),r=this;i.importGtu(n,{success:function(e){s()("#upload-file-"+t).val(""),e&&e.success&&r.publish("monitor/refresh"),e&&e.error&&e.error.length>0&&r.alert(e.error.join("\r\n"))}})}else alert("please select an not empty file!")},onEdit:function(t,e){e.preventDefault(),e.stopPropagation(),s()(e.currentTarget).closest(".dropdown-pane").foundation("close");var n=new h.Z({Id:t}),i=this;n.fetch().then((function(){i.publish("showDialog",{view:f.Z,params:{model:n}})}))},onGotoMonitor:function(t,e,n){window.open("./#campaign/".concat(t,"/").concat(e,"/").concat(n,"/monitor"))},onOpenMoreMenu:function(t){t.preventDefault(),t.stopPropagation()},onCloseMoreMenu:function(t){s()("#".concat(this.menuKey).concat(t)).foundation("close")},renderMoreMenu:function(t){var e=this.menuKey+t;return r().createElement("span",null,r().createElement("button",{className:"button cirle","data-toggle":e,onClick:this.onOpenMoreMenu},r().createElement("i",{className:"fa fa-ellipsis-h"})),r().createElement("div",{id:e,className:"dropdown-pane bottom","data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false",onClick:this.onCloseMoreMenu.bind(null,t)},r().createElement("ul",{className:"vertical menu"},r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onEdit.bind(null,t)},r().createElement("i",{className:"fa fa-edit"}),r().createElement("span",null,"Edit"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onOpenUploadFile.bind(null,t)},r().createElement("i",{className:"fa fa-cloud-upload"}),r().createElement("span",null,"Import"))),r().createElement("input",{type:"file",id:"upload-file-"+t,multiple:!0,style:{display:"none"},onChange:this.onImport.bind(null,t)}))))},onCompanyMonitor:function(t){window.open("./#campaign/".concat(t,"/monitor"))},render:function(){var t=this.getModel(),e=t.get("Date"),n=e?c()(e).format("MMM DD, YYYY"):"";return r().createElement("div",{className:"row scroll-list-item"},r().createElement("div",{className:"small-12 columns",onClick:this.onCompanyMonitor.bind(this,t.get("Id"))},r().createElement("div",{className:"row"},r().createElement("div",{className:"hide-for-small-only medium-2 columns"},t.get("ClientName")),r().createElement("div",{className:"small-12 medium-5 columns"},t.get("ClientCode")),r().createElement("div",{className:"hide-for-small-only medium-2 columns"},n),r().createElement("div",{className:"small-12 medium-3 columns"},r().createElement("span",{className:"show-for-large"},t.get("AreaDescription")),r().createElement("div",{className:"float-right tool-bar"},r().createElement("a",{onClick:this.onDismiss,className:"button row-button"},r().createElement("i",{className:"fa fa-reply"}),r().createElement("small",null,"Dismiss")))))))}}),g=r().createBackboneClass({mixins:[u.ZP],getInitialState:function(){return{orderByFiled:null,orderByAsc:!1,search:null,filterField:null,filterValues:[]}},componentDidMount:function(){var t=this;this.subscribe("monitor/refresh",(function(){t.getCollection().fetchForTask()})),this.subscribe("search",(function(e){t.setState({search:e,filterField:null,filterValues:[]})})),s()("#monitor-filter-ddl-ClientName, #monitor-filter-ddl-ClientCode, #monitor-filter-ddl-Date, #monitor-filter-ddl-AreaDescription").foundation()},onOrderBy:function(t,e){e.preventDefault(),e.stopPropagation(),this.state.orderByFiled==t?this.setState({orderByAsc:!this.state.orderByAsc}):this.setState({orderByFiled:t,orderByAsc:!0})},onFilter:function(t,e){e.preventDefault(),e.stopPropagation();var n=s()(":checked",e.currentTarget),i=(0,o.map)(n,(function(t){return s()(t).val()}));this.setState({filterField:i.length>0?t:null,filterValues:i.length>0?i:[],search:null}),s()("#monitor-filter-ddl-"+t).foundation("close")},onClearFilter:function(t,e){e.preventDefault(),e.stopPropagation(),s()("#monitor-filter-ddl-"+t).foundation("close"),s()(e.currentTarget).closest("form").get(0).reset(),this.setState({filterField:null,filterValues:[],search:null})},renderHeader:function(t,e){var n=this.getCollection(),i=null,a=null,s=null;if(n=n?n.toArray():[],i=this.state.orderByFiled==t?this.state.orderByAsc?r().createElement("i",{className:"fa fa-sort-up active"}):r().createElement("i",{className:"fa fa-sort-down active"}):r().createElement("i",{className:"fa fa-sort"}),i=r().createElement("a",{onClick:this.onOrderBy.bind(null,t)}," ",i),this.state.filterField&&this.state.filterField==t&&(a=r().createElement("a",{"data-toggle":"monitor-filter-ddl-"+t}," ",r().createElement("i",{className:"fa fa-filter active"}))),n){var l=(0,o.map)(n,(function(e){var n=e.get(t),i=c()(n,c().ISO_8601);return i.isValid()?i.format("MMM DD, YYYY"):n})),u=(0,o.uniq)(l).sort();s=r().createElement("div",{id:"monitor-filter-ddl-"+t,className:"dropdown-pane bottom",style:{width:"auto"},"data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false"},r().createElement("form",{onSubmit:this.onFilter.bind(this,t)},r().createElement("ul",{className:"vertical menu"},u.map((function(e,n){return r().createElement("li",{key:t+n},r().createElement("input",{id:t+n,name:t,type:"checkbox",value:e}),r().createElement("label",{htmlFor:t+n},e))}))),r().createElement("button",{className:"button tiny success",type:"submit"},"Filter"),r().createElement("button",{className:"button tiny warning",type:"reset",onClick:this.onClearFilter.bind(this,t)},"Clear")))}return r().createElement("div",null,r().createElement("a",{"data-toggle":"monitor-filter-ddl-"+t},e),i,a,s)},getDataSource:function(){var t=this.getCollection();if(t=t?t.toArray():[],this.state.orderByFiled&&(t=(0,o.orderBy)(t,["attributes."+this.state.orderByFiled],[this.state.orderByAsc?"asc":"desc"])),this.state.search){var e=this.state.search.toLowerCase(),n=null,i=null,r=null;t=(0,o.filter)(t,(function(t){return n=(0,o.values)(t.attributes),i=(0,o.some)(n,(function(t){var n=c()(t,c().ISO_8601);return n.isValid()?n.format("MMM DD YYYY MMM DD, YYYY YYYY-MM-DD MM/DD/YYYY YYYY MM MMM DD").toLowerCase().indexOf(e)>-1:(0,o.toString)(t).toLowerCase().indexOf(e)>-1})),r=(0,o.values)(t.attributes.Tasks),(0,o.each)(r,(function(t){t.visiable=i||t.Name.toLowerCase().indexOf(e)>-1})),i||(0,o.some)(r,{visiable:!0})}))}else if(this.state.filterField&&this.state.filterValues){var a=this.state.filterField,s=this.state.filterValues;t=(0,o.filter)(t,(function(t){var e=t.get(a),n=c()(e,c().ISO_8601);return n.isValid()?(0,o.indexOf)(s,n.format("MMM DD, YYYY"))>-1:(0,o.indexOf)(s,e)>-1}))}return t},render:function(){var t=this.getDataSource();return r().createElement("div",{className:"section row"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 column"},r().createElement("h5",null,"GPS Monitor")),r().createElement("div",{className:"small-12 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,r().createElement("a",{href:"#"},"Control Center")),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," GPS Monitor")))))),r().createElement("div",{className:"scroll-list-section-body"},r().createElement("div",{className:"row scroll-list-header"},r().createElement("div",{className:"hide-for-small-only medium-2 columns"},this.renderHeader("ClientName","Client Name")),r().createElement("div",{className:"small-12 medium-5 columns"},this.renderHeader("ClientCode","Client Code")),r().createElement("div",{className:"hide-for-small-only medium-2 columns"},this.renderHeader("Date","Date")),r().createElement("div",{className:"small-12 medium-3 columns"},r().createElement("span",{className:"show-for-large"},this.renderHeader("AreaDescription","Type")))),t.map((function(t){return r().createElement(m,{key:t.get("Id"),model:t})})))))}})},9686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(3609)),a=n.n(o),s=n(6486),l=n(4247),c=n(5086),u=n(8814),h=n(842);const d=r().createBackboneClass({mixins:[u.Z],onPenetrationColorsChanged:function(t){this.getModel().set("penetrationColors",t,{silent:!0})},render:function(){var t=this.getModel();return r().createElement("div",null,r().createElement("h3",null,"Print Options"),r().createElement("div",{className:"row collapse"},r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Target Method:",r().createElement("input",{type:"text",name:"targetMethod",defaultValue:t.get("targetMethod"),onChange:this.OnValueChanged})))),r().createElement("div",{className:"panel callout secondary"},r().createElement("h6",null,"Campaign Maps"),r().createElement("div",{className:"row medium-up-2 large-up-2 collapse"},r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressCover",name:"suppressCover",type:"checkbox",checked:t.get("suppressCover"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressCover"},"Suppress Cover")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressCampaign",name:"suppressCampaign",type:"checkbox",checked:t.get("suppressCampaign"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressCampaign"},"Suppress Campaign Page")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressSubMap",name:"suppressSubMap",type:"checkbox",checked:t.get("suppressSubMap"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressSubMap"},"Suppress Sub Maps")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressCampaignSummary",name:"suppressCampaignSummary",type:"checkbox",checked:t.get("suppressCampaignSummary"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressCampaignSummary"},"Suppress Sub Map Summary")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressSubMapCountDetail",name:"suppressSubMapCountDetail",type:"checkbox",checked:t.get("suppressSubMapCountDetail"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressSubMapCountDetail"},"Suppress Sub Map Croute Counts")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressNDAInCampaign",name:"suppressNDAInCampaign",type:"checkbox",checked:t.get("suppressNDAInCampaign"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressNDAInCampaign"},"Suppress non-deliverables for campaign map")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressNDAInSubMap",name:"suppressNDAInSubMap",type:"checkbox",checked:t.get("suppressNDAInSubMap"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressNDAInSubMap"},"Suppress non-deliverables for sub map")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressLocations",name:"suppressLocations",type:"checkbox",checked:t.get("suppressLocations"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressLocations"},"Suppress Locations")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressRadii",name:"suppressRadii",type:"checkbox",checked:t.get("suppressRadii"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressRadii"},"Suppress Radii"))),r().createElement("div",{className:"row small-up-1 collapse"},r().createElement("div",{className:"column"},r().createElement("input",{id:"showPenetrationColors",name:"showPenetrationColors",type:"checkbox",checked:t.get("showPenetrationColors"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"showPenetrationColors"},"Show Penetration Colors:")),r().createElement(h.Z,{colors:t.get("penetrationColors"),onChange:this.onPenetrationColorsChanged}))),r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"button-group float-right"},r().createElement("button",{className:"success button",onClick:this.onApply},"Apply"),r().createElement("button",{className:"button",onClick:this.onClose},"Cancel"))),r().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},r().createElement("span",{"aria-hidden":"true"},"×")))}});var p=n(2775),f=n(3250),m=n(7634),g=n(394),_=n(5635);const y=r().createBackboneClass({mixins:[c.ZP],getInitialState:function(){return{options:new l.Z({suppressCover:!1,suppressCampaign:!1,suppressCampaignSummary:!1,suppressNDAInCampaign:!1,suppressSubMap:!1,suppressSubMapCountDetail:!1,suppressNDAInSubMap:!1,suppressDMap:!1,suppressGTU:!1,suppressNDAInDMap:!0,showPenetrationColors:!0,penetrationColors:[20,40,60,80],suppressLocations:!1,suppressRadii:!1})}},componentDidMount:function(){var t=this.getCollection(),e=this;this.subscribe("print.map.imageloaded",(function(){(0,s.some)(t.models,(function(t){var n=e.refs[t.get("key")];return n&&n.state&&!n.state.imageLoaded&&!1===n.state.imageLoading&&n.loadImage&&n.loadImage(),!(!n||!n.loadImage||n.state.imageLoaded)}))})),this.subscribe("print.map.options.changed",this.onApplyOptions),this.onOpenOptions({needTrigger:!0})},onOpenOptions:function(t){var e=this.state.options;e.get("DMaps")||(e.attributes.DMaps=this.getCollection().getDMaps());var n=(0,s.cloneDeep)(e),i=(0,s.extend)(t,{model:n});this.publish("showDialog",{view:d,params:i,options:{size:"large"}})},onApplyOptions:function(t){var e=["suppressNDAInCampaign","suppressNDAInSubMap","suppressNDAInDMap","showPenetrationColors","penetrationColors","suppressLocations","suppressRadii"],n=(0,s.pick)(this.state.options.attributes,e),i=(0,s.pick)(t.attributes,e);(0,s.eq)(n,i)||(0,s.each)(this.refs,(function(t){t.setState({imageLoaded:null,imageLoading:!1})})),this.setState({options:t}),this.publish("showDialog"),this.publish("print.map.imageloaded")},onPrint:function(){var t=this.getCollection(),e=t.getCampaignId(),n={campaignId:e,size:"A4",needFooter:"true",options:[]},i=this;(0,s.each)(t.models,(function(t){i.refs[t.get("key")]&&n.options.push(i.refs[t.get("key")].getExportParamters())})),t.exportPdf(n).then((function(t){var n="../api/pdf/download/"+e+"/"+t.sourceFile;0==a()("#downloadForm").size()?a()('<form id="downloadForm" action="'+n+'" method="GET"></form>').appendTo("body").get(0).submit():a()("#downloadForm").attr("action",n).get(0).submit()}))},render:function(){var t=this.getCollection(),e=this.state.options,n=(0,s.omit)(e.attributes,["DMaps"]),i=e.get("DMaps")||[],o=(0,s.map)(i.models,(function(t){return!0===t.get("Selected")?t.get("Id"):null}));return r().createElement("div",{className:"section"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},r().createElement("div",{className:"button-group print-toolbar"},r().createElement("button",{className:"button",onClick:this.onOpenOptions},r().createElement("i",{className:"fa fa-cog"}),"Options"),r().createElement("button",{className:"button",onClick:this.onPrint},r().createElement("i",{className:"fa fa-print"}),"Print")))),r().createElement("div",{className:"page-container A4"},t.map((function(t){var e=t.get("DMapId");if(e&&(0,s.indexOf)(o,e)>-1)return null;switch(t.get("type")){case"Cover":return n.suppressCover?null:r().createElement(p.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"Campaign":return n.suppressCampaign?null:r().createElement(f.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"CampaignSummary":return n.suppressCampaign||n.suppressCampaignSummary?null:r().createElement(m.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"SubMap":return n.suppressSubMap?null:r().createElement(g.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"SubMapDetail":return n.suppressSubMap||n.suppressSubMapCountDetail?null:r().createElement(_.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});default:return null}}))))}})},3942:(t,e,n)=>{"use strict";n.d(e,{Z:()=>v}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(3609)),a=n.n(o),s=n(6486),l=n(4247),c=n(5086),u=n(8814),h=n(1666);const d=r().createBackboneClass({mixins:[u.Z],render:function(){var t=this.getModel();return r().createElement("div",null,r().createElement("h3",null,"Print Options"),r().createElement("div",{className:"panel callout secondary"},r().createElement("h6",null,"Distribution Maps"),r().createElement("div",{className:"row medium-up-1 large-up-2 collapse"},r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressDMap",name:"suppressDMap",type:"checkbox",checked:t.get("suppressDMap"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressDMap"},"Suppress Distribution Maps")),r().createElement("div",{className:"column"},r().createElement("input",{id:"suppressNDAInDMap",name:"suppressNDAInDMap",type:"checkbox",checked:t.get("suppressNDAInDMap"),onChange:this.OnValueChanged}),r().createElement("label",{htmlFor:"suppressNDAInDMap"},"Suppress non-deliverables for distribution map")))),r().createElement(h.Z,{collection:t.get("DMaps")}),r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"button-group float-right"},r().createElement("button",{className:"success button",onClick:this.onApply},"Apply"),r().createElement("button",{className:"button",onClick:this.onClose},"Cancel"))),r().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},r().createElement("span",{"aria-hidden":"true"},"×")))}});var p=n(2077),f=n.n(p),m=(n(381),n(4241)),g=n(2708);const _=r().createBackboneClass({mixins:[c.ZP],getInitialState:function(){return{imageLoaded:null,imageLoading:!1}},componentDidMount:function(){this.publish("print.map.imageloaded")},scrollToPage:function(){this.getModel();var t=a()(this.refs.page).position().top;a()(".off-canvas-wrapper-inner").stop().animate({scrollTop:t},600)},preloadImage:function(t){var e=a().Deferred();return a()(new Image).one("load",(function(){e.resolve()})).attr("src",t),e},loadImage:function(){var t=this.getModel(),e=(t.get("key"),this);this.setState({imageLoaded:null,imageLoading:!0}),this.scrollToPage(),t.fetchMapImage(this.props.options).then((function(){var n=a().Deferred(),i=t.get("MapImage"),r=t.get("PolygonImage");return(0,s.isEmpty)(i)||(0,s.isEmpty)(r)?n.reject():a().when(e.preloadImage(i),e.preloadImage(r)).done((function(){n.resolve()})),n})).always((function(){e.setState({imageLoaded:!0,imageLoading:!1}),e.publish("print.map.imageloaded")}))},onReloadImage:function(t){t.stopPropagation(),this.setState({imageLoaded:null,imageLoading:!1}),this.publish("print.map.imageloaded")},onCreateDetailMap:function(t){var e=this.getModel(),n=e.collection,i=e.clone(),r=i.get("DMapId"),o=t.getNorthEast(),a=t.getSouthWest(),l=0,c=0,u=e.get("key")+"-"+o.lat()+"-"+o.lng()+"-"+a.lat()+"-"+a.lng();(0,s.each)(n.models,(function(t,e){t.get("DMapId")==r&&(c++,l=e)})),i.set({key:u,type:"DistributionDetail",TopRight:{lat:o.lat(),lng:o.lng()},BottomLeft:{lat:a.lat(),lng:a.lng()},Boundary:null,ImageStatus:"waiting",MapImage:null,PolygonImage:null,Serial:c}),n.add(i,{at:l+1}),this.publish("showDialog");var h=this;setTimeout((function(){h.publish("print.map.imageloaded")}),500)},onShowEditDialog:function(){var t=this.getModel(),e=this,n=a().Deferred();this.state.imageLoaded&&t.get("MapImage")&&t.get("PolygonImage")&&(this.publish("showLoading"),t.get("Boundary")?n.resolve():n=t.fetchBoundary({quite:!0}),n.done((function(){var n=t.get("Color"),i="distribution-"+t.get("DMapId");e.unsubscribe("print.mapzoom@"+i),e.subscribe("print.mapzoom@"+i,a().proxy(e.onCreateDetailMap,e)),e.publish("showDialog",{view:g.Z,params:{sourceKey:i,boundary:t.get("Boundary"),color:"rgb("+n.r+","+n.g+","+n.b+")"},options:{size:"full",customClass:"google-map-pop"}})})))},getExportParamters:function(){var t=this.getModel();return{type:"dmap",options:[{title:"DM MAP "+t.get("DMapId")+"("+t.get("Name")+")"},{list:[{key:"DM MAP #:",text:t.get("DMapId")+""},{key:"DISTRIBUTION MAP NAME:",text:t.get("Name")},{key:"TOTAL:",text:f()(t.get("Total")).format("0,0")}]},{title:t.get("DisplayName")+" - "+t.get("Name")},{map:t.get("PolygonImage"),bg:t.get("MapImage")}]}},render:function(){var t=this.getModel(),e=f()(t.get("Total")).format("0,0"),n=t.get("MapImage"),i=t.get("PolygonImage");if(this.state.imageLoaded)if(n&&i){var o={backgroundImage:"url("+n+")",backgroundRepeat:"no-repeat",backgroundSize:"100% auto",backgroundPosition:"0 0"};n=r().createElement("div",{style:o},r().createElement("img",{src:i}))}else n=r().createElement("button",{className:"button reload",onClick:this.onReloadImage},r().createElement("i",{className:"fa fa-2x fa-refresh"}));else n=r().createElement(m.Z,{text:this.state.imageLoading?"LOADING":"WAITING"});return r().createElement("div",{className:"page",ref:"page"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},"DM MAP ",t.get("DMapId"),"(",t.get("Name"),")")),r().createElement("div",{className:"row list",role:"list"},r().createElement("div",{className:"small-4 columns"},"DM MAP #:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("DMapId")),r().createElement("div",{className:"small-4 columns"},"DISTRIBUTION MAP NAME:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("Name")),r().createElement("div",{className:"small-4 columns"},"TOTAL:"),r().createElement("div",{className:"small-8 columns"}," ",e)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title mapTitle"},t.get("DisplayName")," - ",t.get("Name"))),r().createElement("div",{className:"row collapse"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"map-container",onClick:this.onShowEditDialog},n))))}}),y=r().createBackboneClass({mixins:[c.ZP],getInitialState:function(){return{imageLoaded:null,imageLoading:!1}},componentDidMount:function(){this.publish("print.map.imageloaded")},preloadImage:function(t){var e=a().Deferred();return a()(new Image).one("load",(function(){e.resolve()})).attr("src",t),e},scrollToPage:function(){this.getModel();var t=a()(this.refs.page).position().top;a()("body").stop().animate({scrollTop:t},600)},loadImage:function(){var t=this.getModel(),e=(t.get("key"),this);this.setState({imageLoaded:null,imageLoading:!0}),this.scrollToPage(),t.fetchMapImage(this.props.options).then((function(){var n=a().Deferred(),i=t.get("MapImage"),r=t.get("PolygonImage");return(0,s.isEmpty)(i)||(0,s.isEmpty)(r)?n.reject():a().when(e.preloadImage(i),e.preloadImage(r)).done((function(){n.resolve()})),n})).always((function(){e.setState({imageLoaded:!0,imageLoading:!1}),e.publish("print.map.imageloaded")}))},onReloadImage:function(){this.setState({imageLoaded:null}),this.publish("print.map.imageloaded")},onRemove:function(){var t=this.getModel(),e=t.get("DMapId"),n=t.get("Serial"),i=t.collection;i.remove(t),(0,s.each)(i.models,(function(t){var i=t.get("DMapId"),r=t.get("Serial");i==e&&r>n&&t.set("Serial",r-1)}))},getExportParamters:function(){var t=this.getModel();return{type:"dmap",options:[{title:"DM MAP "+t.get("DMapId")+"("+t.get("Name")+") -- "+t.get("Serial")},{list:[{key:"DM MAP #",text:t.get("DMapId")+""},{key:"DISTRIBUTION MAP NAME",text:t.get("Name")},{key:"TOTAL",text:f()(t.get("Total")).format("0,0")}]},{title:t.get("DisplayName")+" - "+t.get("Name")},{map:t.get("PolygonImage"),bg:t.get("MapImage")}]}},render:function(){var t=this.getModel(),e=f()(t.get("Total")).format("0,0"),n=t.get("MapImage"),i=t.get("PolygonImage");if(this.state.imageLoaded)if(n&&i){var o={backgroundImage:"url("+n+")",backgroundRepeat:"no-repeat",backgroundSize:"100% auto",backgroundPosition:"0 0"};n=r().createElement("div",{style:o},r().createElement("img",{src:i}))}else n=r().createElement("button",{className:"button reload",onClick:this.onReloadImage},r().createElement("i",{className:"fa fa-2x fa-refresh"}));else n=r().createElement(m.Z,{text:this.state.imageLoading?"LOADING":"WAITING"});return r().createElement("div",{className:"page",ref:"page"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},"DM MAP ",t.get("DMapId"),"(",t.get("Name"),") -- ",t.get("Serial"),r().createElement("button",{className:"button float-right",onClick:this.onRemove},r().createElement("i",{className:"fa fa-delete"}),"Remove"))),r().createElement("div",{className:"row list",role:"list"},r().createElement("div",{className:"small-4 columns"},"DM MAP #:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("DMapId")),r().createElement("div",{className:"small-4 columns"},"DISTRIBUTION MAP NAME:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("Name")),r().createElement("div",{className:"small-4 columns"},"TOTAL:"),r().createElement("div",{className:"small-8 columns"}," ",e)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title mapTitle"},t.get("DisplayName")," - ",t.get("Name"))),r().createElement("div",{className:"row collapse"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"map-container"},n))))}}),v=r().createBackboneClass({mixins:[c.ZP],getInitialState:function(){return{options:new l.Z({suppressCover:!0,suppressCampaign:!0,suppressCampaignSummary:!0,suppressNDAInCampaign:!0,suppressSubMap:!0,suppressSubMapCountDetail:!0,suppressNDAInSubMap:!0,suppressDMap:!1,suppressGTU:!0,suppressNDAInDMap:!0,suppressLocations:!0,suppressRadii:!0})}},componentDidMount:function(){var t=this.getCollection(),e=this;this.subscribe("print.map.imageloaded",(function(){(0,s.some)(t.models,(function(t){var n=e.refs[t.get("key")];return n&&n.state&&!n.state.imageLoaded&&0==n.state.imageLoading&&n.loadImage(),!(!n||!n.loadImage||n.state.imageLoaded)}))})),this.subscribe("print.map.options.changed",this.onApplyOptions),this.onOpenOptions({needTrigger:!0})},onOpenOptions:function(t){var e=this.state.options;e.get("DMaps")||(e.attributes.DMaps=this.getCollection().getDMaps());var n=(0,s.cloneDeep)(e),i=(0,s.extend)(t,{model:n});this.publish("showDialog",{view:d,params:i,options:{size:"large"}})},onApplyOptions:function(t){var e=this,n=["suppressDMap","suppressNDAInDMap"],i=(0,s.pick)(this.state.options.attributes,n),r=(0,s.pick)(t.attributes,n);(0,s.eq)(i,r)||(0,s.each)(this.refs,(function(t){t.setState({imageLoaded:null})})),this.setState({options:t},(function(){e.publish("showDialog"),e.publish("print.map.imageloaded")}))},onPrint:function(){var t=this.getCollection(),e=t.getCampaignId(),n={campaignId:e,size:"Distribute",needFooter:"false",options:[]},i=this;(0,s.each)(t.models,(function(t){i.refs[t.get("key")]&&n.options.push(i.refs[t.get("key")].getExportParamters())})),t.exportPdf(n).then((function(t){var n="../api/pdf/download/"+e+"/"+t.sourceFile;0==a()("#downloadForm").size()?a()('<form id="downloadForm" action="'+n+'" method="GET"></form>').appendTo("body").get(0).submit():a()("#downloadForm").attr("action",n).get(0).submit()}))},render:function(){var t=this.getCollection(),e=this.state.options,n=(0,s.omit)(e.attributes,["DMaps"]),i=e.get("DMaps")||[],o=(0,s.map)(i.models,(function(t){return!0===t.get("Selected")?t.get("Id"):null}));return r().createElement("div",{className:"section"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},r().createElement("div",{className:"button-group print-toolbar"},r().createElement("button",{className:"button",onClick:this.onOpenOptions},r().createElement("i",{className:"fa fa-cog"}),"Options"),r().createElement("button",{className:"button",onClick:this.onPrint},r().createElement("i",{className:"fa fa-print"}),"Print")))),r().createElement("div",{className:"page-container distribution-print"},t.map((function(t){var e=t.get("DMapId");return e&&(0,s.indexOf)(o,e)>-1?null:"DistributionDetail"===t.get("type")?r().createElement(y,{ref:t.get("key"),key:t.get("key"),model:t,options:n}):r().createElement(_,{ref:t.get("key"),key:t.get("key"),model:t,options:n})}))))}})},2598:(t,n,i)=>{"use strict";i.d(n,{Z:()=>k}),i(2316);var r=i(7588),o=i.n(r),a=(i(456),i(3609)),s=i.n(a),l=i(6486),c=i(4247),u=i(5086),h=i(8814),d=i(842),p=i(1666);const f=o().createBackboneClass({mixins:[h.Z],onPenetrationColorsChanged:function(t){this.getModel().set("penetrationColors",t,{silent:!0})},render:function(){var t=this.getModel();return o().createElement("div",null,o().createElement("h3",null,"Print Options"),o().createElement("div",{className:"row collapse"},o().createElement("div",{className:"small-12 columns"},o().createElement("label",null,"Target Method:",o().createElement("input",{type:"text",name:"targetMethod",defaultValue:t.get("targetMethod"),onChange:this.OnValueChanged})))),o().createElement("div",{className:"panel callout secondary"},o().createElement("h6",null,"Campaign Maps"),o().createElement("div",{className:"row medium-up-2 large-up-2 collapse"},o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressCover",name:"suppressCover",type:"checkbox",checked:t.get("suppressCover"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressCover"},"Suppress Cover")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressCampaign",name:"suppressCampaign",type:"checkbox",checked:t.get("suppressCampaign"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressCampaign"},"Suppress Campaign Page")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressSubMap",name:"suppressSubMap",type:"checkbox",checked:t.get("suppressSubMap"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressSubMap"},"Suppress Sub Maps")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressCampaignSummary",name:"suppressCampaignSummary",type:"checkbox",checked:t.get("suppressCampaignSummary"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressCampaignSummary"},"Suppress Sub Map Summary")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressSubMapCountDetail",name:"suppressSubMapCountDetail",type:"checkbox",checked:t.get("suppressSubMapCountDetail"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressSubMapCountDetail"},"Suppress Sub Map Croute Counts")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressNDAInCampaign",name:"suppressNDAInCampaign",type:"checkbox",checked:t.get("suppressNDAInCampaign"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressNDAInCampaign"},"Suppress non-deliverables for campaign map")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressNDAInSubMap",name:"suppressNDAInSubMap",type:"checkbox",checked:t.get("suppressNDAInSubMap"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressNDAInSubMap"},"Suppress non-deliverables for sub map")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressLocations",name:"suppressLocations",type:"checkbox",checked:t.get("suppressLocations"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressLocations"},"Suppress Locations")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressRadii",name:"suppressRadii",type:"checkbox",checked:t.get("suppressRadii"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressRadii"},"Suppress Radii"))),o().createElement("div",{className:"row small-up-1 collapse"},o().createElement("div",{className:"column"},o().createElement("input",{id:"showPenetrationColors",name:"showPenetrationColors",type:"checkbox",checked:t.get("showPenetrationColors"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"showPenetrationColors"},"Show Penetration Colors:")),o().createElement(d.Z,{colors:t.get("penetrationColors"),onChange:this.onPenetrationColorsChanged}))),o().createElement("div",{className:"panel callout secondary"},o().createElement("h6",null,"GTU Reports"),o().createElement("div",{className:"row medium-up-1 large-up-2 collapse"},o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressGTU",name:"suppressGTU",type:"checkbox",checked:t.get("suppressGTU"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressGTU"},"Suppress GTU Tracking")))),o().createElement("div",{className:"panel callout secondary"},o().createElement("h6",null,"Distribution Maps"),o().createElement("div",{className:"row medium-up-1 large-up-2 collapse"},o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressDMap",name:"suppressDMap",type:"checkbox",checked:t.get("suppressDMap"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressDMap"},"Suppress Distribution Maps")),o().createElement("div",{className:"column"},o().createElement("input",{id:"suppressNDAInDMap",name:"suppressNDAInDMap",type:"checkbox",checked:t.get("suppressNDAInDMap"),onChange:this.OnValueChanged}),o().createElement("label",{htmlFor:"suppressNDAInDMap"},"Suppress non-deliverables for distribution map")))),o().createElement(p.Z,{collection:t.get("DMaps")}),o().createElement("div",{className:"small-12 columns"},o().createElement("div",{className:"button-group float-right"},o().createElement("button",{className:"success button",onClick:this.onApply},"Apply"),o().createElement("button",{className:"button",onClick:this.onClose},"Cancel"))),o().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},o().createElement("span",{"aria-hidden":"true"},"×")))}});var m=i(2775),g=i(3250),_=i(7634),y=i(394),v=i(5635),b=i(2077),x=i.n(b),w=i(4241),E=i(5676),M=i(2708);const T=o().createBackboneClass({mixins:[u.ZP],getInitialState:function(){return{imageLoaded:null,imageLoading:!1}},componentDidMount:function(){this.publish("print.map.imageloaded")},scrollToPage:function(){this.getModel();var t=s()(this.refs.page).position().top;s()("body").stop().animate({scrollTop:t},600)},preloadImage:function(t){var e=s().Deferred();return s()(new Image).one("load",(function(){e.resolve()})).attr("src",t),e},loadImage:function(){var t=this.getModel(),e=(t.get("key"),this);this.setState({imageLoaded:null,imageLoading:!0}),this.scrollToPage(),t.fetchMapImage(this.props.options).then((function(){var n=s().Deferred(),i=t.get("MapImage"),r=t.get("PolygonImage");return(0,l.isEmpty)(i)||(0,l.isEmpty)(r)?n.reject():s().when(e.preloadImage(i),e.preloadImage(r)).done((function(){n.resolve()})),n})).always((function(){e.setState({imageLoaded:!0,imageLoading:!1}),e.publish("print.map.imageloaded")}))},onReloadImage:function(t){t.stopPropagation(),this.setState({imageLoaded:null,imageLoading:!1}),this.publish("print.map.imageloaded")},onShowEditDialog:function(){var t=this.getModel(),e=this,n=s().Deferred();this.state.imageLoaded&&t.get("MapImage")&&t.get("PolygonImage")&&(this.publish("showLoading"),t.get("Boundary")?n.resolve():n=t.fetchBoundary({quite:!0}),n.done((function(){var n=t.get("Color"),i="dmap-"+t.get("DMapId");e.unsubscribe("print.mapzoom@"+i),e.subscribe("print.mapzoom@"+i,s().proxy(e.onCreateDetailMap,e)),e.publish("showDialog",{view:M.Z,params:{sourceKey:i,boundary:t.get("Boundary"),color:"rgb("+n.r+","+n.g+","+n.b+")"},options:{size:"full",customClass:"google-map-pop"}})})))},onCreateDetailMap:function(t){var e=this,n=this.getModel(),i=n.collection,r=n.clone(),o=r.get("DMapId"),a=t.getNorthEast(),s=t.getSouthWest(),c=0,u=0,h=n.get("key")+"-"+a.lat()+"-"+a.lng()+"-"+s.lat()+"-"+s.lng();(0,l.each)(i.models,(function(t,e){t.get("DMapId")==o&&(u++,c=e)})),r.set({key:h,type:"DMapDetailMap",TopRight:{lat:a.lat(),lng:a.lng()},BottomLeft:{lat:s.lat(),lng:s.lng()},ImageStatus:"waiting",MapImage:null,PolygonImage:null,Serial:u}),i.add(r,{at:c+1}),this.publish("showDialog"),setTimeout((function(){e.publish("print.map.imageloaded")}),500)},getExportParamters:function(){var t=this.getModel();return{type:"dmap",options:[{title:"DM MAP "+t.get("DMapId")+"("+t.get("Name")+")"},{list:[{key:"DM MAP #:",text:t.get("DMapId")+""},{key:"DISTRIBUTION MAP NAME:",text:t.get("Name")},{key:"TOTAL:",text:x()(t.get("Total")).format("0,0")}]},{title:t.get("DisplayName")+" - "+t.get("Name")},{map:t.get("PolygonImage"),bg:t.get("MapImage"),legend:!0}]}},render:function(){var t=this.getModel(),e=x()(t.get("Total")).format("0,0"),n=t.get("MapImage"),i=t.get("PolygonImage");if(this.state.imageLoaded)if(n&&i){var r={backgroundImage:"url("+n+")",backgroundRepeat:"no-repeat",backgroundSize:"100% auto",backgroundPosition:"0 0"};n=o().createElement("div",{style:r},o().createElement("img",{src:i}))}else n=o().createElement("button",{className:"button reload",onClick:this.onReloadImage},o().createElement("i",{className:"fa fa-2x fa-refresh"}));else n=o().createElement(w.Z,{text:this.state.imageLoading?"LOADING":"WAITING"});return o().createElement("div",{key:"DMAP-".concat(t.get("DMapId")),className:"page",ref:"page"},o().createElement("div",{className:"row"},o().createElement("div",{className:"small-12 columns text-center title"},"DM MAP ",t.get("DMapId"),"(",t.get("Name"),")")),o().createElement("div",{className:"row list",role:"list"},o().createElement("div",{className:"small-4 columns"},"DM MAP #:"),o().createElement("div",{className:"small-8 columns"}," ",t.get("DMapId")),o().createElement("div",{className:"small-4 columns"},"DISTRIBUTION MAP NAME:"),o().createElement("div",{className:"small-8 columns"}," ",t.get("Name")),o().createElement("div",{className:"small-4 columns"},"TOTAL:"),o().createElement("div",{className:"small-8 columns"}," ",e)),o().createElement("div",{className:"row"},o().createElement("div",{className:"small-12 columns text-center title"},t.get("DisplayName")," - ",t.get("Name"))),o().createElement("div",{className:"row collapse"},o().createElement("div",{className:"small-12 columns"},o().createElement("div",{className:"map-container",onClick:this.onShowEditDialog},n),o().createElement("div",{className:"small-12 columns"},o().createElement("div",{className:"color-legend"}),o().createElement("div",{className:"direction-legend"})))),o().createElement(E.Z,{model:t.get("Footer")}))}}),S=o().createBackboneClass({mixins:[u.ZP],getInitialState:function(){return{imageLoaded:null,imageLoading:!1}},componentDidMount:function(){this.publish("print.map.imageloaded")},scrollToPage:function(){this.getModel();var t=s()(this.refs.page).position().top;s()("body").stop().animate({scrollTop:t},600)},preloadImage:function(t){var e=s().Deferred();return s()(new Image).one("load",(function(){e.resolve()})).attr("src",t),e},loadImage:function(){var t=this.getModel(),e=(t.get("key"),this);this.setState({imageLoaded:null,imageLoading:!0}),this.scrollToPage(),t.fetchMapImage(this.props.options).then((function(){var n=s().Deferred(),i=t.get("MapImage"),r=t.get("PolygonImage");return(0,l.isEmpty)(i)||(0,l.isEmpty)(r)?n.reject():s().when(e.preloadImage(i),e.preloadImage(r)).done((function(){n.resolve()})),n})).always((function(){e.setState({imageLoaded:!0,imageLoading:!1}),e.publish("print.map.imageloaded")}))},onReloadImage:function(){e.stopPropagation(),this.setState({imageLoaded:null,imageLoading:!1}),this.publish("print.map.imageloaded")},onRemove:function(){var t=this.getModel(),e=t.get("DMapId"),n=t.get("Serial"),i=t.collection;i.remove(t),(0,l.each)(i.models,(function(t){var i=t.get("DMapId"),r=t.get("Serial");i==e&&r>n&&t.set("Serial",r-1)}))},getExportParamters:function(){var t=this.getModel();return{type:"dmap",options:[{title:"DM MAP "+t.get("DMapId")+"("+t.get("Name")+") -- "+t.get("Serial")},{list:[{key:"DM MAP #:",text:t.get("DMapId")+""},{key:"DISTRIBUTION MAP NAME:",text:t.get("Name")},{key:"TOTAL:",text:x()(t.get("Total")).format("0,0")}]},{title:t.get("DisplayName")+" - "+t.get("Name")},{map:t.get("PolygonImage"),bg:t.get("MapImage"),legend:!0}]}},render:function(){var t=this.getModel(),e=x()(t.get("Total")).format("0,0"),n=t.get("MapImage"),i=t.get("PolygonImage");if(this.state.imageLoaded)if(n&&i){var r={backgroundImage:"url("+n+")",backgroundRepeat:"no-repeat",backgroundSize:"100% auto",backgroundPosition:"0 0"};n=o().createElement("div",{style:r},o().createElement("img",{src:i}))}else n=o().createElement("button",{className:"button reload",onClick:this.onReloadImage},o().createElement("i",{className:"fa fa-2x fa-refresh"}));else n=o().createElement(w.Z,{text:this.state.imageLoading?"LOADING":"WAITING"});return o().createElement("div",{className:"page",ref:"page"},o().createElement("div",{className:"row"},o().createElement("div",{className:"small-12 columns text-center title"},"DM MAP ",t.get("DMapId"),"(",t.get("Name"),") -- ",t.get("Serial"),o().createElement("button",{className:"button float-right",onClick:this.onRemove},o().createElement("i",{className:"fa fa-delete"}),"Remove"))),o().createElement("div",{className:"row list",role:"list"},o().createElement("div",{className:"small-4 columns"},"DM MAP #:"),o().createElement("div",{className:"small-8 columns"}," ",t.get("DMapId")),o().createElement("div",{className:"small-4 columns"},"DISTRIBUTION MAP NAME:"),o().createElement("div",{className:"small-8 columns"}," ",t.get("Name")),o().createElement("div",{className:"small-4 columns"},"TOTAL:"),o().createElement("div",{className:"small-8 columns"}," ",e)),o().createElement("div",{className:"row"},o().createElement("div",{className:"small-12 columns text-center title"},t.get("DisplayName")," - ",t.get("Name"))),o().createElement("div",{className:"row collapse"},o().createElement("div",{className:"small-12 columns"},o().createElement("div",{className:"map-container"},n),o().createElement("div",{className:"small-12 columns"},o().createElement("div",{className:"color-legend"}),o().createElement("div",{className:"direction-legend"})))),o().createElement(E.Z,{model:t.get("Footer")}))}}),k=o().createBackboneClass({mixins:[u.ZP],getInitialState:function(){return{options:new c.Z({suppressCover:!1,suppressCampaign:!1,suppressCampaignSummary:!1,suppressNDAInCampaign:!1,suppressSubMap:!1,suppressSubMapCountDetail:!1,suppressNDAInSubMap:!1,suppressDMap:!1,suppressGTU:!1,suppressNDAInDMap:!0,showPenetrationColors:!0,penetrationColors:[20,40,60,80],suppressLocations:!1,suppressRadii:!1})}},componentDidMount:function(){var t=this.getCollection(),e=this;this.subscribe("print.map.imageloaded",(function(){(0,l.some)(t.models,(function(t){var n=e.refs[t.get("key")];if(n&&n.state&&!n.state.imageLoaded&&!1===n.state.imageLoading&&n.loadImage)return n.loadImage(),!0}))})),this.subscribe("print.map.options.changed",this.onApplyOptions),this.onOpenOptions({needTrigger:!0})},onOpenOptions:function(t){var e=this.state.options;e.get("DMaps")||(e.attributes.DMaps=this.getCollection().getDMaps());var n=(0,l.cloneDeep)(e),i=(0,l.extend)(t,{model:n});this.publish("showDialog",{view:f,params:i,options:{size:"large"}})},onApplyOptions:function(t){var e=this,n=["suppressNDAInCampaign","suppressNDAInSubMap","suppressNDAInDMap","showPenetrationColors","penetrationColors","suppressLocations","suppressRadii"],i=(0,l.pick)(this.state.options.attributes,n),r=(0,l.pick)(t.attributes,n);(0,l.eq)(i,r)||(0,l.each)(this.refs,(function(t){t.setState({imageLoaded:null})})),this.setState({options:t},(function(){e.publish("showDialog"),e.publish("print.map.imageloaded")}))},onPrint:function(){var t=this.getCollection(),e=t.getCampaignId(),n={campaignId:e,size:"A4",needFooter:"true",options:[]},i=this;(0,l.each)(t.models,(function(t){i.refs[t.get("key")]&&n.options.push(i.refs[t.get("key")].getExportParamters())})),t.exportPdf(n).then((function(t){var n="../api/pdf/download/"+e+"/"+t.sourceFile;0==s()("#downloadForm").size()?s()('<form id="downloadForm" action="'+n+'" method="GET"></form>').appendTo("body").get(0).submit():s()("#downloadForm").attr("action",n).get(0).submit()}))},render:function(){var t=this.getCollection(),e=this.state.options,n=(0,l.omit)(e.attributes,["DMaps"]),i=e.get("DMaps")||[],r=(0,l.map)(i.models,(function(t){return!0===t.get("Selected")?t.get("Id"):null}));return o().createElement("div",{className:"section"},o().createElement("div",{className:"row"},o().createElement("div",{className:"small-12 columns text-center"},o().createElement("div",{className:"button-group print-toolbar"},o().createElement("button",{className:"button",onClick:this.onOpenOptions},o().createElement("i",{className:"fa fa-cog"}),"Options"),o().createElement("button",{className:"button",onClick:this.onPrint},o().createElement("i",{className:"fa fa-print"}),"Print")))),o().createElement("div",{className:"page-container A4"},t.map((function(t){switch(t.get("type")){case"Cover":return n.suppressCover?null:o().createElement(m.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"Campaign":return n.suppressCampaign?null:o().createElement(g.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"CampaignSummary":return n.suppressCampaign||n.suppressCampaignSummary?null:o().createElement(_.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"SubMap":return n.suppressSubMap?null:o().createElement(y.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"SubMapDetail":return n.suppressSubMap||n.suppressSubMapCountDetail?null:o().createElement(v.Z,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"DMap":return n.suppressDMap||(0,l.indexOf)(r,t.get("DMapId"))>-1?null:o().createElement(T,{ref:t.get("key"),key:t.get("key"),model:t,options:n});case"DMapDetailMap":return n.suppressDMap||(0,l.indexOf)(r,t.get("DMapId"))>-1?null:o().createElement(S,{ref:t.get("key"),key:t.get("key"),model:t,options:n});default:return null}}))))}})},3250:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(3609)),a=n.n(o),s=n(2077),l=n.n(s),c=n(6486),u=n(5086),h=n(4241),d=n(5676);const p=r().createBackboneClass({mixins:[u.ZP],getInitialState:function(){return{imageLoaded:null,imageLoading:!1}},componentDidMount:function(){this.publish("print.map.imageloaded")},scrollToPage:function(){this.getModel();var t=a()(this.refs.page).position().top;a()(".off-canvas-wrapper-inner").stop().animate({scrollTop:t},600)},preloadImage:function(t){var e=a().Deferred();return a()(new Image).one("load",(function(){e.resolve()})).attr("src",t),e},loadImage:function(){var t=this.getModel(),e=(t.get("key"),this);this.setState({imageLoaded:null,imageLoading:!0}),this.scrollToPage(),t.fetchMapImage(this.props.options).then((function(){var n=a().Deferred(),i=t.get("MapImage"),r=t.get("PolygonImage");return(0,c.isEmpty)(i)||(0,c.isEmpty)(r)?n.reject():a().when(e.preloadImage(i),e.preloadImage(r)).done((function(){n.resolve()})),n})).always((function(){e.setState({imageLoaded:!0,imageLoading:!1}),e.publish("print.map.imageloaded")}))},onReloadImage:function(){this.setState({imageLoaded:null,imageLoading:!1}),this.publish("print.map.imageloaded")},formatePenetrationColor:function(t){var e=["Blue","Green","Yellow","Orange","Red"],n=[0].concat(t),i=0,o=[];n.push(100);for(var a=0;a<n.length-1;a++)i>=n[a+1]||(o.push(r().createElement("i",{key:"i"+a,className:e[a].toLowerCase()})),o.push(r().createElement("label",{key:"l"+a},e[a]+"("+n[a]+"%-"+n[a+1]+"%)")),i=n[a+1]);return r().createElement("div",{className:"color-legend"},r().createElement("div",{key:"tips",className:"tips"},"COLOR LEGEND"),r().createElement("div",{key:"legend"},o.map((function(t){return t}))))},getExportParamters:function(){var t=this.getModel(),e=this.props&&this.props.options||{};return{type:"campaign",options:[{title:"Campaign Summary"},{list:[{key:"MASTER CAMPAIGN #:",text:t.get("DisplayName")},{key:"CLIENT NAME:",text:t.get("ClientName")},{key:"CONTACT NAME:",text:t.get("ContactName")},{key:"TARGETING METHOD:",text:e.targetMethod||""},{key:"TOTAL HOUSEHOLDS:",text:l()(t.get("TotalHouseHold")).format("0,0")},{key:"TARGET HOUSEHOLDS:",text:l()(t.get("TargetHouseHold")).format("0,0")},{key:"PENETRATION:",text:l()(t.get("Penetration")).format("0.00%")}]},{title:"Campaign Summary Map"},{map:t.get("PolygonImage"),bg:t.get("MapImage"),legend:"true"}]}},render:function(){var t=this.getModel(),e=this.props&&this.props.options?this.props.options:{},n=e.targetMethod||"",i=l()(t.get("TotalHouseHold")).format("0,0"),o=l()(t.get("TargetHouseHold")).format("0,0"),a=l()(t.get("Penetration")).format("0.00%"),s=t.get("MapImage"),c=t.get("PolygonImage");if(e.showPenetrationColors)var u=this.formatePenetrationColor(e.penetrationColors);else u=null;if(this.state.imageLoaded)if(s&&c){var p={backgroundImage:"url("+s+")",backgroundRepeat:"no-repeat",backgroundSize:"100% auto",backgroundPosition:"0 0"};s=r().createElement("div",{style:p},r().createElement("img",{src:c}))}else s=r().createElement("button",{className:"button reload",onClick:this.onReloadImage},r().createElement("i",{className:"fa fa-2x fa-refresh"}));else s=r().createElement(h.Z,{text:this.state.imageLoading?"LOADING":"WAITING"});return r().createElement("div",{className:"page campaign",ref:"page"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},t.get("ClientName"))),r().createElement("div",{className:"row list",role:"list"},r().createElement("div",{className:"small-4 columns"},"MASTER CAMPAIGN #:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("DisplayName")),r().createElement("div",{className:"small-4 columns"},"CLIENT NAME:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("ClientName")),r().createElement("div",{className:"small-4 columns"},"CONTACT NAME:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("ContactName")),r().createElement("div",{className:"small-4 columns"},"TARGETING METHOD:"),r().createElement("div",{className:"small-8 columns"}," ",n),r().createElement("div",{className:"small-4 columns"},"TOTAL HOUSEHOLDS:"),r().createElement("div",{className:"small-8 columns"}," ",i),r().createElement("div",{className:"small-4 columns"},"TARGET HOUSEHOLDS:"),r().createElement("div",{className:"small-8 columns"}," ",o),r().createElement("div",{className:"small-4 columns"},"PENETRATION:"),r().createElement("div",{className:"small-8 columns"}," ",a)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},"Campaign Summary Map")),r().createElement("div",{className:"row collapse"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"map-container",ref:t.get("key")},s),r().createElement("div",{className:"small-12 columns"},u,r().createElement("div",{className:"direction-legend"})))),r().createElement(d.Z,{model:t.get("Footer")}))}})},7634:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(2077)),a=n.n(o),s=n(5086),l=n(5676);const c=r().createBackboneClass({mixins:[s.ZP],getExportParamters:function(){return{type:"campaign-summary",options:[{title:"Summary of Sub Maps"},{table:"submap-list"}]}},render:function(){var t=this.getModel(),e=t.get("SubMaps");return r().createElement("div",{className:"page campaign-summary"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},"Summary of Sub Maps")),r().createElement("div",{className:"row collapse"},r().createElement("div",{className:"small-12 columns"},r().createElement("table",null,r().createElement("thead",null,r().createElement("tr",null,r().createElement("th",null,"#"),r().createElement("th",null,"SUB MAP NAME"),r().createElement("th",null,"TOTAL H/H"),r().createElement("th",null,"TARGET H/H"),r().createElement("th",null,"PENETRATION"))),r().createElement("tbody",null,e.map((function(t,e){var n=t.TotalHouseHold,i=t.TargetHouseHold,o=t.Penetration,s=n?a()(n).format("0,0"):"",l=i?a()(i).format("0,0"):"",c=o?a()(o).format("0.00%"):"";return r().createElement("tr",{key:t.OrderId},r().createElement("td",null,t.OrderId),r().createElement("td",null,t.Name),r().createElement("td",null,s),r().createElement("td",null,l),r().createElement("td",null,c))})))))),r().createElement(l.Z,{model:t.get("Footer")}))}})},2775:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(381)),a=n.n(o),s=n(5086),l=n(5676);const c=r().createBackboneClass({mixins:[s.ZP],getExportParamters:function(){var t=this.getModel();return{type:"cover",options:[{title:"This Custom Campaign is Presented to:"},{key:"",image:t.get("Logo")||"",height:"80",align:"center",top:"40",bottom:"40"},{key:"Client Name:",text:t.get("ClientName")},{key:"Created for:",text:t.get("ContactName")},{key:"Created on:",text:t.get("Date")?a()(t.get("Date")).format("MMM DD, YYYY"):""},{key:" ",text:" "},{key:"Presented by:",image:"images/vargainc-logo.png",height:"40",align:"center",top:"10",bottom:"10"},{key:"Master Campaign #:",text:t.get("DisplayName")},{key:"Created by:",text:t.get("CreatorName")}]}},render:function(){var t=this.getModel(),e=t.get("Date")?a()(t.get("Date")).format("MMM DD, YYYY"):"";if(t.get("Logo"))var n=r().createElement("img",{className:"client-logo",src:t.get("Logo")});else n=r().createElement("div",{className:"client-logo"});return r().createElement("div",{className:"page cover"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},r().createElement("span",{className:"editable",role:"title"},"This Custom Campaign is Presented to:"))),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},n)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},"Client Name:"),r().createElement("div",{className:"small-12 columns text-center"},t.get("ClientName"))),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},"Created for:"),r().createElement("div",{className:"small-12 columns text-center"},t.get("ContactName"))),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},"Created on:"),r().createElement("div",{className:"small-12 columns text-center"},e)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"}," "),r().createElement("div",{className:"small-12 columns text-center"}," ")),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},"Presented by:"),r().createElement("div",{className:"small-12 columns text-center"},r().createElement("div",{className:"vargainc-log"}))),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},"Master Campaign #:"),r().createElement("div",{className:"small-12 columns text-center"},t.get("DisplayName"))),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center"},"Created by:"),r().createElement("div",{className:"small-12 columns text-center"},t.get("CreatorName"))),r().createElement(l.Z,{model:t.get("Footer")}))}})},5676:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(381)),a=n.n(o),s=n(5086);const l=r().createBackboneClass({mixins:[s.ZP],render:function(){var t=this.getModel(),e=t.get("Date")?a()(t.get("Date")).format("MMM DD, YYYY"):"";return r().createElement("div",{className:"footer"},r().createElement("div",{className:"left"},r().createElement("div",{className:"vargainc-logo"})),r().createElement("div",{className:"center"},r().createElement("ul",{className:"no-bullet"},r().createElement("li",null,r().createElement("span",null,"MC#:"+t.get("DisplayName")),r().createElement("span",null,"www.vargainc.com")),r().createElement("li",null,r().createElement("span",null,"Created on:"+e),r().createElement("span",null,"PH:949-768-1500")),r().createElement("li",null,r().createElement("span",null,"Created for:"+t.get("ContactName")),r().createElement("span",null,"FX:949-768-1501")),r().createElement("li",null,r().createElement("span",null,"Created by:"+t.get("CreatorName")),r().createElement("span",null,"&copyright;2010 Varga Media Solutions,Inc.All rights reserved.")))),r().createElement("div",{className:"right"},r().createElement("div",{className:"timm-logo"})))}})},2708:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p}),n(2316);var i,r,o=n(7588),a=n.n(o),s=(n(456),n(3609)),l=n.n(s),c=n(6486),u=n(5086),h=n(7981),d=[];const p=a().createClass({displayName:"mapZoom",mixins:[u.ZP,h.Z],getInitialState:function(){return{disableDefaultUI:!0,activeButton:"EnterMapDraw",activeMap:"ROADMAP",mapStyle:{visibility:"hidden",position:"fixed",width:"100%",height:"100%",left:"0",top:"0",right:"0",bottom:"0"}}},getDefaultProps:function(){return{boundary:[],color:"#000",sourceKey:null,mapType:"ROADMAP"}},componentDidMount:function(){l()(document).one("open.zf.reveal",l().proxy(this.initGoogleMap,this)),l()(document).one("closed.zf.reveal",l().proxy(this.clearMap,this))},clearMap:function(){console.log("mapZoom clearMap");var t=this.getGoogleMap();try{(0,c.each)(d,(function(t){t&&t.setMap&&t.setMap(null)})),i&&i.setMap&&i.setMap(null),r&&r.setMap&&r.setMap(null),google.maps.event.clearInstanceListeners(t),i=null,r=null}catch(t){console.log("mapZoom componentWillUnmount error",t)}this.hideMap()},initGoogleMap:function(){console.log("init google map");var t=this.getGoogleMap();this.showMap();var e=this.props.boundary,n=this.props.color,o=new google.maps.LatLngBounds,a=new google.maps.Polygon({paths:e,strokeColor:"#000",strokeOpacity:1,strokeWeight:6,fillColor:n,fillOpacity:.1,map:t});d.push(a),(0,c.each)(e,(function(t){var e=new google.maps.LatLng(t.lat,t.lng);o.extend(e)})),t.fitBounds(o),(r=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.MARKER,drawingControl:!1,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.RECTANGLE],rectangleOptions:{strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.6}}})).setMap(t),r.setDrawingMode(google.maps.drawing.OverlayType.RECTANGLE),google.maps.event.addListener(r,"rectanglecomplete",(function(e){i&&i.setMap(null),i=new google.maps.Rectangle({strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:1,fillColor:"#FF0000",fillOpacity:.35,map:t,bounds:e.getBounds()}),e.setMap(null)})),d.push(r),this.publish("hideLoading")},onReset:function(){var t=this.getGoogleMap(),e=this.props.boundary,n=this.props.color,i=new google.maps.LatLngBounds,r=new google.maps.Polygon({paths:e,strokeColor:"#000",strokeOpacity:1,strokeWeight:6,fillColor:n,fillOpacity:.1,map:t});d.push(r),(0,c.each)(e,(function(t){var e=new google.maps.LatLng(t.lat,t.lng);i.extend(e)})),console.log("fitBounds",i.getCenter().lat(),i.getCenter().lng(),t.getZoom()),t.fitBounds(i)},onZoomIn:function(){var t=this.getGoogleMap();t.setZoom(t.getZoom()+1)},onZoomOut:function(){var t=this.getGoogleMap();t.setZoom(t.getZoom()-1)},onExistMapDraw:function(){this.setState({activeButton:"ExistMapDraw"}),r.setDrawingMode(null)},onEnterMapDraw:function(){this.setState({activeButton:"EnterMapDraw"}),r.setDrawingMode(google.maps.drawing.OverlayType.RECTANGLE)},onSwitchMapType:function(t){var e=this.getGoogleMap();e&&google.maps.MapTypeId&&google.maps.MapTypeId[t]&&e.setMapTypeId(google.maps.MapTypeId[t]),this.setState({activeMap:t})},onFinish:function(){if(i){var t=i.getBounds();this.publish("print.mapzoom@"+this.props.sourceKey,t,this.state.activeMap)}},onClose:function(){this.publish("showDialog")},render:function(){return a().createElement("div",{className:"google_map_container"},a().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},a().createElement("span",{"aria-hidden":"true"},"×")),a().createElement("div",{className:"pop-tool-bar button-group text-center"},a().createElement("button",{className:"EnterMapDraw"==this.state.activeButton?"button active":"button",onClick:this.onEnterMapDraw},a().createElement("i",{className:"fa fa-crop"})),a().createElement("button",{className:"ExistMapDraw"==this.state.activeButton?"button active":"button",onClick:this.onExistMapDraw},a().createElement("i",{className:"fa fa-arrows"})),a().createElement("button",{className:"ROADMAP"==this.state.activeMap?"button active":"button",onClick:this.onSwitchMapType.bind(null,"ROADMAP")},a().createElement("i",{className:"fa fa-map-o"})),a().createElement("button",{className:"HYBRID"==this.state.activeMap?"button active":"button",onClick:this.onSwitchMapType.bind(null,"HYBRID")},a().createElement("i",{className:"fa fa-map"})),a().createElement("button",{className:"button",onClick:this.onZoomIn},a().createElement("i",{className:"fa fa-search-plus"})),a().createElement("button",{className:"button",onClick:this.onZoomOut},a().createElement("i",{className:"fa fa-search-minus"})),a().createElement("button",{className:"button",onClick:this.onReset},a().createElement("i",{className:"fa fa-refresh"})),a().createElement("button",{className:"button",onClick:this.onFinish},a().createElement("i",{className:"fa fa-image"}))))}})},8814:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o}),n(2316),n(7588),n(456);var i=n(6486),r=n(5086);const o=(0,i.extend)({},r.ZP,{onClose:function(){this.publish("showDialog"),this.props.needTrigger&&this.publish("print.map.options.changed",this.getModel())},onApply:function(t){t.preventDefault(),t.stopPropagation(),this.publish("print.map.options.changed",this.getModel())},OnValueChanged:function(t){var e=this.getModel(),n=$(t.currentTarget),i=n.attr("name"),r=n.is("input:checkbox")?n.prop("checked"):n.val();e.set(i,r)}})},1666:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(6486),n(5086));const a=r().createBackboneClass({mixins:[o.ZP],onSelectAll:function(t){var e=this.getCollection(),n=t.currentTarget.checked;e.each((function(t){t.set("Selected",n)})),this.forceUpdate()},onItemSelect:function(t,e){t.set("Selected",e.currentTarget.checked),this.forceUpdate()},render:function(){var t=this.getCollection(),e=t.every({Selected:!0}),n=this;return r().createElement("div",{className:"panel callout primary"},r().createElement("input",{id:"btnCheckAllDMap",className:"btnCheckAllDMap",type:"checkbox",checked:e,onChange:this.onSelectAll}),r().createElement("label",{htmlFor:"btnCheckAllDMap"},"Suppress All Distribute Maps"),r().createElement("div",{className:"row small-up-1 medium-up-2 large-up-4 collapse"},t.map((function(t){return r().createElement("div",{className:"column",key:"optionDmap-"+t.get("Id")},r().createElement("input",{id:"optionDmap-"+t.get("Id"),name:t.get("Id"),type:"checkbox",checked:t.get("Selected"),onChange:n.onItemSelect.bind(null,t)}),r().createElement("label",{htmlFor:"optionDmap-"+t.get("Id")},t.get("Name")))}))))}})},842:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(3609)),a=n.n(o),s=n(5086);const l=r().createBackboneClass({mixins:[s.ZP],getDefaultProps:function(){return{colors:[20,40,60,80]}},componentWillUnmount:function(){a()(this.refs.colorSlider).slider("destroy")},componentDidMount:function(){var t=this;a()(this.refs.colorSlider).slider({step:1,min:0,max:100,values:this.props.colors,slide:function(e,n){var i=["Blue","Green","Yellow","Orange","Red"],r=[0].concat(n.values),o=[],s=0;r.push(100);for(var l=0;l<r.length-1;l++)s>=r[l+1]||(s=r[l+1],o.push(i[l]+" ("+r[l]+"% - "+r[l+1]+"%) "));a()(this).parents("label").find("span").eq(0).text(o.join("  ")),t.props.onChange&&t.props.onChange(n.values)}})},onReset:function(){a()(this.refs.colorSlider).slider("values",[20,40,60,80]),self.props.onChange&&self.props.onChange([20,40,60,80])},render:function(){return r().createElement("div",{className:"column"},r().createElement("div",{className:"row"},r().createElement("div",{className:"custom-colors small-10 columns"},r().createElement("label",null,r().createElement("span",null,"Blue (0% - 20%) Green (20% - 40%) Yellow (40% - 60%) Orange (60% - 80%) Red (80% - 100%) "),r().createElement("div",{className:"slider",ref:"colorSlider"}))),r().createElement("div",{className:"small-2 columns"},r().createElement("button",{className:"button tiny alert",onClick:this.onReset},"Reset"))))}})},394:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(3609)),a=n.n(o),s=n(2077),l=n.n(s),c=n(5086),u=n(4241),h=n(5676);const d=r().createBackboneClass({mixins:[c.ZP],getInitialState:function(){return{imageLoaded:null,imageLoading:!1}},componentDidMount:function(){this.publish("print.map.imageloaded")},scrollToPage:function(){this.getModel();var t=a()(this.refs.page).position().top;a()("body").stop().animate({scrollTop:t},600)},preloadImage:function(t){var e=a().Deferred();return a()(new Image).one("load",(function(){e.resolve()})).attr("src",t),e},loadImage:function(){var t=this.getModel(),e=(t.get("key"),this);this.setState({imageLoaded:null,imageLoading:!0}),this.scrollToPage(),t.fetchMapImage(this.props.options).then((function(){var n=a().Deferred(),i=t.get("MapImage"),r=t.get("PolygonImage");return _.isEmpty(i)||_.isEmpty(r)?n.reject():a().when(e.preloadImage(i),e.preloadImage(r)).done((function(){n.resolve()})),n})).always((function(){e.setState({imageLoaded:!0,imageLoading:!1}),e.publish("print.map.imageloaded")}))},onReloadImage:function(){this.setState({imageLoaded:null,imageLoading:!1}),this.publish("print.map.imageloaded")},formatePenetrationColor:function(t){var e=["Blue","Green","Yellow","Orange","Red"],n=[0].concat(t),i=0,o=[];n.push(100);for(var a=0;a<n.length-1;a++)i>=n[a+1]||(o.push(r().createElement("i",{key:"i"+a,className:e[a].toLowerCase()})),o.push(r().createElement("label",{key:"l"+a},e[a]+"("+n[a]+"%-"+n[a+1]+"%)")),i=n[a+1]);return r().createElement("div",{className:"color-legend"},r().createElement("div",{key:"tips",className:"tips"},"COLOR LEGEND"),r().createElement("div",{key:"legend"},o.map((function(t){return t}))))},getExportParamters:function(){var t=this.getModel(),e=this.props&&this.props.options||{};return{type:"submap",options:[{title:"SUB MAP "+t.get("OrderId")+"("+t.get("Name")+")"},{list:[{key:"SUB MAP #:",text:t.get("OrderId")},{key:"SUB MAP NAME:",text:t.get("Name")},{key:"TARGETING METHOD:",text:e.targetMethod||""},{key:"TOTAL HOUSEHOLDS:",text:l()(t.get("TotalHouseHold")).format("0,0")},{key:"TARGET HOUSEHOLDS:",text:l()(t.get("TargetHouseHold")).format("0,0")},{key:"PENETRATION:",text:l()(t.get("Penetration")).format("0.00%")}]},{title:"Map"},{map:t.get("PolygonImage"),bg:t.get("MapImage"),legend:"true",color:e.showPenetrationColors?e.penetrationColors:null}]}},render:function(){var t=this.getModel(),e=this.props&&this.props.options?this.props.options:{},n=e.targetMethod||"",i=l()(t.get("TotalHouseHold")).format("0,0"),o=l()(t.get("TargetHouseHold")).format("0,0"),a=l()(t.get("Penetration")).format("0.00%"),s=t.get("MapImage"),c=t.get("PolygonImage");if(e.showPenetrationColors)var d=this.formatePenetrationColor(e.penetrationColors);else d=null;if(this.state.imageLoaded)if(s&&c){var p={backgroundImage:"url("+s+")",backgroundRepeat:"no-repeat",backgroundSize:"100% auto",backgroundPosition:"0 0"};s=r().createElement("div",{style:p},r().createElement("img",{src:c}))}else s=r().createElement("button",{className:"button reload",onClick:this.onReloadImage},r().createElement("i",{className:"fa fa-2x fa-refresh"}));else s=r().createElement(u.Z,{text:this.state.imageLoading?"LOADING":"WAITING"});return r().createElement("div",{key:"SUBMAP-".concat(t.get("SubMapId")),className:"page submap",ref:"page"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},"SUB MAP ",t.get("OrderId"),"(",t.get("Name"),")")),r().createElement("div",{className:"row list",role:"list"},r().createElement("div",{className:"small-4 columns"},"SUB MAP #:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("OrderId")),r().createElement("div",{className:"small-4 columns"},"SUB MAP NAME:"),r().createElement("div",{className:"small-8 columns"}," ",t.get("Name")),r().createElement("div",{className:"small-4 columns"},"TARGETING METHOD:"),r().createElement("div",{className:"small-8 columns"}," ",n),r().createElement("div",{className:"small-4 columns"},"TOTAL HOUSEHOLDS:"),r().createElement("div",{className:"small-8 columns"}," ",i),r().createElement("div",{className:"small-4 columns"},"TARGET HOUSEHOLDS:"),r().createElement("div",{className:"small-8 columns"}," ",o),r().createElement("div",{className:"small-4 columns"},"PENETRATION:"),r().createElement("div",{className:"small-8 columns"}," ",a)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},"Map")),r().createElement("div",{className:"row collapse"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"map-container",ref:t.get("key")},s),r().createElement("div",{className:"small-12 columns"},d,r().createElement("div",{className:"direction-legend"})))),r().createElement(h.Z,{model:t.get("Footer")}))}})},5635:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(2077)),a=n.n(o),s=n(5086),l=n(5676);const c=r().createBackboneClass({mixins:[s.ZP],componentDidMount:function(){this.getModel().fetchBySubMap({quite:!0})},getExportParamters:function(){var t=this.getModel();return{type:"submapDetail",options:[{title:"CARRIER ROUTES CONTAINED IN SUB-MAP "+t.get("OrderId")+" ("+t.get("Name")+")"},{table:"submap-detail",submapId:t.get("SubMapId")}]}},render:function(){var t=this.getModel(),e=t.get("CRoutes")?t.get("CRoutes"):[];return r().createElement("div",{className:"page submap-detail"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns text-center title"},"CARRIER ROUTES CONTAINED IN SUB-MAP ",t.get("OrderId")," (",t.get("Name"),")")),r().createElement("div",{className:"row collapse"},r().createElement("div",{className:"small-12 columns"},r().createElement("table",null,r().createElement("thead",null,r().createElement("tr",null,r().createElement("th",null,"#"),r().createElement("th",null,"CARRIER ROUTE #"),r().createElement("th",null,"TOTAL H/H"),r().createElement("th",null,"TARGET H/H"),r().createElement("th",null,"PENETRATION"))),r().createElement("tbody",null,e.map((function(t,e){return r().createElement("tr",{key:"".concat(t.Name,"-").concat(e)},r().createElement("td",null,e),r().createElement("td",null,t.Name),r().createElement("td",null,a()(t.TotalHouseHold).format("0,0")),r().createElement("td",null,a()(t.TargetHouseHold).format("0,0")),r().createElement("td",null,a()(t.Penetration).format("0.00%")))})))))),r().createElement(l.Z,{model:t.get("Footer")}))}})},8664:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(381)),a=n.n(o),s=n(3609),l=n.n(s),c=n(6486),u=n(5086),h=n(594);const d=r().createBackboneClass({mixins:[u.ZP],menuKey:"report-menu-ddl-",getDefaultProps:function(){return{address:null,icon:null,name:null,scrollToTaskId:null}},componentDidMount:function(){l()(".has-tip").foundation();var t=this.props.scrollToTaskId;t&&this.refs[t]&&(this.scrollTop(this.refs[t]),this.props.scrollToTaskId=null)},onReOpenTask:function(t){var e=this;this.confirm("Do you really want to move report back to GPS Montor?").then((function(){new h.Z({Id:t}).reOpen({success:function(t){t&&t.success?e.publish("report/refresh"):e.alert(t.error)}})}))},onGotoReport:function(t){window.location.hash="frame/ReportsTask.aspx?tid="+t},onGotoReview:function(t,e,n){window.open("index.html#campaign/".concat(t,"/").concat(e,"/").concat(n,"/edit"))},onCloseMoreMenu:function(t){l()("#"+this.menuKey+t).foundation("close")},renderMoreMenu:function(t){var e=this.menuKey+t;return r().createElement("span",null,r().createElement("button",{className:"button cirle","data-toggle":e},r().createElement("i",{className:"fa fa-ellipsis-h"})),r().createElement("div",{id:e,className:"dropdown-pane bottom","data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false",onClick:this.onCloseMoreMenu.bind(null,t)},r().createElement("ul",{className:"vertical menu"},r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onEdit},r().createElement("i",{className:"fa fa-edit"}),r().createElement("span",null,"Edit"))),r().createElement("li",null,r().createElement("a",{href:"javascript:;",onClick:this.onOpenUploadFile.bind(null,t)},r().createElement("i",{className:"fa fa-cloud-upload"}),r().createElement("span",null,"Import"))),r().createElement("input",{type:"file",id:"upload-file-"+t,multiple:!0,style:{display:"none"},onChange:this.onImport.bind(null,t)}))))},render:function(){var t=this,e=this.getModel(),n=e.get("Date"),i=n?a()(n).format("MMM DD, YYYY"):"";return r().createElement("div",{className:"row scroll-list-item"},r().createElement("div",{className:"hide-for-small-only medium-2 columns"},e.get("ClientName")),r().createElement("div",{className:"small-10 medium-5 columns"},e.get("ClientCode")),r().createElement("div",{className:"small-2 medium-2 columns"},i),r().createElement("div",{className:"small-2 medium-3 columns"},r().createElement("span",{className:"show-for-large"},e.get("AreaDescription")),r().createElement("div",{className:"float-right tool-bar"},r().createElement("a",{className:"button row-button",href:"#frame/handler/PhantomjsPrintHandler.ashx?campaignId="+e.get("Id")+"&type=print"},r().createElement("i",{className:"fa fa-print"}),r().createElement("small",null,"Print")))),r().createElement("div",{className:"small-12 columns"},r().createElement("table",{className:"hover"},r().createElement("colgroup",null,r().createElement("col",null),r().createElement("col",{style:{width:"160px"}})),r().createElement("tbody",null,e.get("Tasks").map((function(n){if(!1===n.visiable)return null;var i=e.get("Id"),o=n.Name;return r().createElement("tr",{key:n.Id,ref:n.Id},r().createElement("td",{onClick:t.onGotoReview.bind(null,i,o,n.Id)},n.Name),r().createElement("td",null,r().createElement("div",{className:"float-right tool-bar"},r().createElement("a",{className:"button row-button",onClick:t.onGotoReport.bind(null,n.Id)},r().createElement("i",{className:"fa fa-file-text-o"}),r().createElement("small",null,"Report")),r().createElement("button",{onClick:t.onReOpenTask.bind(null,n.Id),className:"button has-tip top",title:"dismiss","data-tooltip":!0,"aria-haspopup":"true","data-disable-hover":"false",tabIndex:"1"},r().createElement("i",{className:"fa fa-reply"})))))}))))))}}),p=r().createBackboneClass({mixins:[u.ZP],getInitialState:function(){return{orderByFiled:null,orderByAsc:!1,search:null,filterField:null,filterValues:[]}},componentDidMount:function(){var t=this;this.subscribe("report/refresh",(function(){t.getCollection().fetchForReport()})),this.subscribe("search",(function(e){t.setState({search:e,filterField:null,filterValues:[]})})),l()("#report-filter-ddl-ClientName, #report-filter-ddl-ClientCode, #report-filter-ddl-Date, #report-filter-ddl-AreaDescription").foundation()},onOrderBy:function(t,e){e.preventDefault(),e.stopPropagation(),this.state.orderByFiled==t?this.setState({orderByAsc:!this.state.orderByAsc}):this.setState({orderByFiled:t,orderByAsc:!0})},onFilter:function(t,e){e.preventDefault(),e.stopPropagation();var n=l()(":checked",e.currentTarget),i=(0,c.map)(n,(function(t){return l()(t).val()}));this.setState({filterField:i.length>0?t:null,filterValues:i.length>0?i:[],search:null}),l()("#report-filter-ddl-"+t).foundation("close")},onClearFilter:function(t,e){e.preventDefault(),e.stopPropagation(),this.setState({filterField:null,filterValues:[],search:null}),l()("#report-filter-ddl-"+t).foundation("close"),l()(e.currentTarget).closest("form").get(0).reset()},renderHeader:function(t,e){var n=this.getCollection(),i=null,o=null,s=null;if(n=n?n.toArray():[],i=this.state.orderByFiled==t?this.state.orderByAsc?r().createElement("i",{className:"fa fa-sort-up active"}):r().createElement("i",{className:"fa fa-sort-down active"}):r().createElement("i",{className:"fa fa-sort"}),i=r().createElement("a",{onClick:this.onOrderBy.bind(null,t)}," ",i),this.state.filterField&&this.state.filterField==t&&(o=r().createElement("a",{"data-toggle":"report-filter-ddl-"+t}," ",r().createElement("i",{className:"fa fa-filter active"}))),n){var l=(0,c.map)(n,(function(e){var n=e.get(t),i=a()(n,a().ISO_8601);return i.isValid()?i.format("MMM DD, YYYY"):n})),u=(0,c.uniq)(l).sort();s=r().createElement("div",{id:"report-filter-ddl-"+t,className:"dropdown-pane bottom",style:{width:"auto"},"data-dropdown":!0,"data-close-on-click":"true","data-auto-focus":"false"},r().createElement("form",{onSubmit:this.onFilter.bind(this,t)},r().createElement("ul",{className:"vertical menu"},u.map((function(e,n){return r().createElement("li",{key:t+n},r().createElement("input",{id:t+n,name:t,type:"checkbox",value:e}),r().createElement("label",{htmlFor:t+n},e))}))),r().createElement("button",{className:"button tiny success",type:"submit"},"Filter"),r().createElement("button",{className:"button tiny warning",type:"reset",onClick:this.onClearFilter.bind(this,t)},"Clear")))}return r().createElement("div",null,r().createElement("a",{"data-toggle":"report-filter-ddl-"+t},e),i,o,s)},getDataSource:function(){var t=this.getCollection();if(t=t?t.toArray():[],this.state.orderByFiled&&(t=(0,c.orderBy)(t,["attributes."+this.state.orderByFiled],[this.state.orderByAsc?"asc":"desc"])),this.state.search){var e=this.state.search.toLowerCase(),n=null,i=null,r=null;t=(0,c.filter)(t,(function(t){return n=(0,c.values)(t.attributes),i=(0,c.some)(n,(function(t){var n=a()(t,a().ISO_8601);return n.isValid()?n.format("MMM DD YYYY MMM DD, YYYY YYYY-MM-DD MM/DD/YYYY YYYY MM MMM DD").toLowerCase().indexOf(e)>-1:(0,c.toString)(t).toLowerCase().indexOf(e)>-1})),r=(0,c.values)(t.attributes.Tasks),(0,c.each)(r,(function(t){t.visiable=i||t.Name.toLowerCase().indexOf(e)>-1})),i||(0,c.some)(r,{visiable:!0})}))}else if(this.state.filterField&&this.state.filterValues){var o=this.state.filterField,s=this.state.filterValues;t=(0,c.filter)(t,(function(t){var e=t.get(o),n=a()(e,a().ISO_8601);return n.isValid()?(0,c.indexOf)(s,n.format("MMM DD, YYYY"))>-1:(0,c.indexOf)(s,e)>-1}))}return t},render:function(){var t=this.getDataSource(),e=this.props.taskId;return r().createElement("div",{className:"section row"},r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"section-header"},r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 column"},r().createElement("h5",null,"Reports")),r().createElement("div",{className:"small-12 column"},r().createElement("nav",{"aria-label":"You are here:",role:"navigation"},r().createElement("ul",{className:"breadcrumbs"},r().createElement("li",null,r().createElement("a",{href:"#"},"Control Center")),r().createElement("li",null,r().createElement("span",{className:"show-for-sr"},"Current: ")," Reports")))))),r().createElement("div",{className:"scroll-list-section-body"},r().createElement("div",{className:"row scroll-list-header"},r().createElement("div",{className:"hide-for-small-only medium-2 columns"},this.renderHeader("ClientName","Client Name")),r().createElement("div",{className:"small-10 medium-5 columns"},this.renderHeader("ClientCode","Client Code")),r().createElement("div",{className:"hide-for-small-only medium-2 columns"},this.renderHeader("Date","Date")),r().createElement("div",{className:"small-2 medium-3 columns"},r().createElement("span",{className:"show-for-large"},this.renderHeader("AreaDescription","Type")))),t.map((function(t){return r().createElement(d,{key:t.get("Id"),model:t,scrollToTaskId:e})})))))}})},4179:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(5086)),a=new(n(6079).Z);const s=r().createBackboneClass({mixins:[o.ZP],getDefaultProps:function(){return{collection:a,group:null,onSelect:null}},getInitialState:function(){return{selected:null}},componentWillMount:function(){this.props.group&&this.getCollection().fetchInGroup(this.props.group)},onSelected:function(t){var e=this.getCollection().get(t);this.props.onSelect&&this.props.onSelect(e),this.setState({selected:e})},onDbSelected:function(t){var e=this.getCollection().get(t);this.props.onDbSelect&&this.props.onDbSelect(e),this.setState({selected:e})},render:function(){var t=this.getCollection(),e=this;return t=t||[],r().createElement("ul",{className:"vertical menu list-group"},t.map((function(t){var n,i,o,a=t.get("Id"),s=e.state.selected&&e.state.selected==t?"list-group-item active":"list-group-item";return r().createElement("li",(n={className:s,key:a,onClick:e.onSelected.bind(e,a)},i="onClick",o=e.onDbSelected.bind(e,a),i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n),t.get("UserName"))})))}})},3821:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a}),n(2316);var i=n(7588),r=n.n(i),o=(n(456),n(5086));const a=r().createBackboneClass({mixins:[o.ZP],componentDidMount:function(){var t=this;this.getModel(),$("#birthdayDatePicker").fdatepicker({format:"yyyy-mm-dd"}).on("changeDate",(function(e){t.getModel().set("DateOfBirth",e.date)})),$(this.refs.companySelector).select2(),$("form").foundation()},componentWillUnmount:function(){var t=$(this.refs.companySelector);t&&t.select2&&t.select2("destroy"),$("#birthdayDatePicker").off("changeDate").fdatepicker("remove")},onSave:function(t){t.preventDefault(),t.stopPropagation();var e=this.getModel(),n=this.refs.employeePicture.files.length>0?this.refs.employeePicture.files[0]:null,i=this;e.set("CompanyId",$(this.refs.companySelector).val()),e.addEmployee(n).done((function(){i.publish("showDialog")}))},onClose:function(){this.publish("showDialog")},onChange:function(t){this.getModel().set(t.currentTarget.name,t.currentTarget.value)},render:function(){var t=!(!this.state||!this.state.error),e=t?this.state.error:"";return r().createElement("form",{onSubmit:this.onSave},r().createElement("h3",null,"Add Employee"),r().createElement("div",{"data-abide-error":!0,className:"alert callout",style:{display:t?"block":"none"}},r().createElement("p",null,r().createElement("i",{className:"fa fa-exclamation-circle"})," ",e)),r().createElement("div",{className:"row"},r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Distributor"),r().createElement("select",{ref:"companySelector"},this.props.company.models.map((function(t){return r().createElement("option",{key:t.get("Id"),value:t.get("Id")},t.get("Name"))}))),r().createElement("span",{className:"form-error"},"it is required.")),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Full Name",r().createElement("input",{onChange:this.onChange,name:"FullName",type:"text",required:!0}))),r().createElement("fieldset",{className:"small-12 columns"},r().createElement("label",null,"Role"),r().createElement("input",{type:"radio",onChange:this.onChange,name:"Role",value:"Walker",id:"walker"}),r().createElement("label",{htmlFor:"walker"},"Walker"),r().createElement("input",{type:"radio",onChange:this.onChange,name:"Role",value:"Driver",id:"driver"}),r().createElement("label",{htmlFor:"driver"},"Driver"),r().createElement("input",{type:"radio",onChange:this.onChange,name:"Role",value:"Auditor",id:"autitor"}),r().createElement("label",{htmlFor:"autitor"},"Auditor")),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Cell Phone",r().createElement("input",{onChange:this.onChange,name:"CellPhone",type:"text"}))),r().createElement("div",{className:"small-12 medium-12 large-4 columns end"},r().createElement("label",null,"Birthday",r().createElement("input",{id:"birthdayDatePicker",className:"fdatepicker",onChange:this.onChange,name:"DateOfBirth",type:"date",readOnly:!0}))),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Photo",r().createElement("input",{ref:"employeePicture",name:"picture",type:"file"}))),r().createElement("div",{className:"small-12 columns"},r().createElement("label",null,"Notes",r().createElement("textarea",{onChange:this.onChange,name:"Notes"})))),r().createElement("div",{className:"small-12 columns"},r().createElement("div",{className:"button-group float-right"},r().createElement("button",{type:"submit",className:"success button"},"Save"),r().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel"))),r().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},r().createElement("span",{"aria-hidden":"true"},"×")))}})},9797:(t,e,n)=>{"use strict";n.d(e,{Z:()=>Qe});var i=n(6158),r=n.n(i),o=(n(1672),n(2322)),a=n(271);function s(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i,r=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),o="Feature"===(i=e).type?i.geometry:i,a=o.type,s=e.bbox,c=o.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===a&&(c=[c]);for(var u=!1,h=0;h<c.length&&!u;h++)if(l(r,c[h][0],n.ignoreBoundary)){for(var d=!1,p=1;p<c[h].length&&!d;)l(r,c[h][p],!n.ignoreBoundary)&&(d=!0),p++;d||(u=!0)}return u}function l(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var a=e[r][0],s=e[r][1],l=e[o][0],c=e[o][1];if(t[1]*(a-l)+s*(l-t[0])+c*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!=c>t[1]&&t[0]<(l-a)*(t[1]-s)/(c-s)+a&&(i=!i)}return i}n(7418),n(2273),Object.prototype.hasOwnProperty;var c=new ArrayBuffer(16);new Float64Array(c),new Uint32Array(c),n(67),function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])}}();var u=n(7219);n(968),n(9187),n(8159),n(1787),n(4860);var h=Math.PI/180,d=180/Math.PI,p=function(t,e){this.lon=t,this.lat=e,this.x=h*t,this.y=h*e};p.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},p.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new p(e,t)};var f=function(){this.coords=[],this.length=0};f.prototype.move_to=function(t){this.length++,this.coords.push(t)};var m=function(t){this.properties=t||{},this.geometries=[]};m.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},m.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var g=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new p(t.x,t.y),this.end=new p(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};g.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=d*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[d*Math.atan2(r,i),a]},g.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var o=i*r,a=this.interpolate(o);n.push(a)}for(var s=!1,l=0,c=e&&e.offset?e.offset:10,u=180-c,h=-180+c,d=360-c,p=1;p<n.length;++p){var g=n[p-1][0],_=n[p][0],y=Math.abs(_-g);y>d&&(_>u&&g<h||g>u&&_<h)?s=!0:y>l&&(l=y)}var v=[];if(s&&l<c){var b=[];v.push(b);for(var x=0;x<n.length;++x){var w=parseFloat(n[x][0]);if(x>0&&Math.abs(w-n[x-1][0])>d){var E=parseFloat(n[x-1][0]),M=parseFloat(n[x-1][1]),T=parseFloat(n[x][0]),S=parseFloat(n[x][1]);if(E>-180&&E<h&&180===T&&x+1<n.length&&n[x-1][0]>-180&&n[x-1][0]<h){b.push([-180,n[x][1]]),x++,b.push([n[x][0],n[x][1]]);continue}if(E>u&&E<180&&-180===T&&x+1<n.length&&n[x-1][0]>u&&n[x-1][0]<180){b.push([180,n[x][1]]),x++,b.push([n[x][0],n[x][1]]);continue}if(E<h&&T>u){var k=E;E=T,T=k;var C=M;M=S,S=C}if(E>u&&T<h&&(T+=360),E<=180&&T>=180&&E<T){var I=(180-E)/(T-E),L=I*S+(1-I)*M;b.push([n[x-1][0]>u?180:-180,L]),(b=[]).push([n[x-1][0]>u?-180:180,L]),v.push(b)}else b=[],v.push(b);b.push([w,n[x][1]])}else b.push([n[x][0],n[x][1]])}}else{var D=[];v.push(D);for(var A=0;A<n.length;++A)D.push([n[A][0],n[A][1]])}for(var P=new m(this.properties),z=0;z<v.length;++z){var N=new f;P.geometries.push(N);for(var R=v[z],O=0;O<R.length;++O)N.move_to(R[O])}return P},n(251);var _=[],y=[],v=[],b=[],x=[],w=[],E=[],M=[],T=[],S=[],k=[],C=[],I=[],L=[],D=[],A=[],P=[],z=[],N=[],R=[],O=[],F=[],B=[],U=[];E[85]=S[85]=-1,M[85]=k[85]=0,T[85]=C[85]=1,N[85]=F[85]=1,R[85]=B[85]=0,O[85]=U[85]=1,_[85]=b[85]=0,y[85]=x[85]=-1,v[85]=D[85]=0,A[85]=I[85]=0,P[85]=L[85]=1,w[85]=z[85]=1,F[1]=F[169]=0,B[1]=B[169]=-1,U[1]=U[169]=0,I[1]=I[169]=-1,L[1]=L[169]=0,D[1]=D[169]=0,S[4]=S[166]=0,k[4]=k[166]=-1,C[4]=C[166]=1,A[4]=A[166]=1,P[4]=P[166]=0,z[4]=z[166]=0,E[16]=E[154]=0,M[16]=M[154]=1,T[16]=T[154]=1,b[16]=b[154]=1,x[16]=x[154]=0,w[16]=w[154]=1,N[64]=N[106]=0,R[64]=R[106]=1,O[64]=O[106]=0,_[64]=_[106]=-1,y[64]=y[106]=0,v[64]=v[106]=1,N[2]=N[168]=0,R[2]=R[168]=-1,O[2]=O[168]=1,F[2]=F[168]=0,B[2]=B[168]=-1,U[2]=U[168]=0,I[2]=I[168]=-1,L[2]=L[168]=0,D[2]=D[168]=0,A[2]=A[168]=-1,P[2]=P[168]=0,z[2]=z[168]=1,E[8]=E[162]=0,M[8]=M[162]=-1,T[8]=T[162]=0,S[8]=S[162]=0,k[8]=k[162]=-1,C[8]=C[162]=1,I[8]=I[162]=1,L[8]=L[162]=0,D[8]=D[162]=1,A[8]=A[162]=1,P[8]=P[162]=0,z[8]=z[162]=0,E[32]=E[138]=0,M[32]=M[138]=1,T[32]=T[138]=1,S[32]=S[138]=0,k[32]=k[138]=1,C[32]=C[138]=0,_[32]=_[138]=1,y[32]=y[138]=0,v[32]=v[138]=0,b[32]=b[138]=1,x[32]=x[138]=0,w[32]=w[138]=1,F[128]=F[42]=0,B[128]=B[42]=1,U[128]=U[42]=1,N[128]=N[42]=0,R[128]=R[42]=1,O[128]=O[42]=0,_[128]=_[42]=-1,y[128]=y[42]=0,v[128]=v[42]=1,b[128]=b[42]=-1,x[128]=x[42]=0,w[128]=w[42]=0,S[5]=S[165]=-1,k[5]=k[165]=0,C[5]=C[165]=0,F[5]=F[165]=1,B[5]=B[165]=0,U[5]=U[165]=0,A[20]=A[150]=0,P[20]=P[150]=1,z[20]=z[150]=1,b[20]=b[150]=0,x[20]=x[150]=-1,w[20]=w[150]=1,E[80]=E[90]=-1,M[80]=M[90]=0,T[80]=T[90]=1,N[80]=N[90]=1,R[80]=R[90]=0,O[80]=O[90]=1,I[65]=I[105]=0,L[65]=L[105]=1,D[65]=D[105]=0,_[65]=_[105]=0,y[65]=y[105]=-1,v[65]=v[105]=0,E[160]=E[10]=-1,M[160]=M[10]=0,T[160]=T[10]=1,S[160]=S[10]=-1,k[160]=k[10]=0,C[160]=C[10]=0,F[160]=F[10]=1,B[160]=B[10]=0,U[160]=U[10]=0,N[160]=N[10]=1,R[160]=R[10]=0,O[160]=O[10]=1,A[130]=A[40]=0,P[130]=P[40]=1,z[130]=z[40]=1,I[130]=I[40]=0,L[130]=L[40]=1,D[130]=D[40]=0,_[130]=_[40]=0,y[130]=y[40]=-1,v[130]=v[40]=0,b[130]=b[40]=0,x[130]=x[40]=-1,w[130]=w[40]=1,S[37]=S[133]=0,k[37]=k[133]=1,C[37]=C[133]=1,F[37]=F[133]=0,B[37]=B[133]=1,U[37]=U[133]=0,_[37]=_[133]=-1,y[37]=y[133]=0,v[37]=v[133]=0,b[37]=b[133]=1,x[37]=x[133]=0,w[37]=w[133]=0,A[148]=A[22]=-1,P[148]=P[22]=0,z[148]=z[22]=0,F[148]=F[22]=0,B[148]=B[22]=-1,U[148]=U[22]=1,N[148]=N[22]=0,R[148]=R[22]=1,O[148]=O[22]=1,b[148]=b[22]=-1,x[148]=x[22]=0,w[148]=w[22]=1,E[82]=E[88]=0,M[82]=M[88]=-1,T[82]=T[88]=1,A[82]=A[88]=1,P[82]=P[88]=0,z[82]=z[88]=1,I[82]=I[88]=-1,L[82]=L[88]=0,D[82]=D[88]=1,N[82]=N[88]=0,R[82]=R[88]=-1,O[82]=O[88]=0,E[73]=E[97]=0,M[73]=M[97]=1,T[73]=T[97]=0,S[73]=S[97]=0,k[73]=k[97]=-1,C[73]=C[97]=0,I[73]=I[97]=1,L[73]=L[97]=0,D[73]=D[97]=0,_[73]=_[97]=1,y[73]=y[97]=0,v[73]=v[97]=1,E[145]=E[25]=0,M[145]=M[25]=-1,T[145]=T[25]=0,I[145]=I[25]=1,L[145]=L[25]=0,D[145]=D[25]=1,F[145]=F[25]=0,B[145]=B[25]=1,U[145]=U[25]=1,b[145]=b[25]=-1,x[145]=x[25]=0,w[145]=w[25]=0,S[70]=S[100]=0,k[70]=k[100]=1,C[70]=C[100]=0,A[70]=A[100]=-1,P[70]=P[100]=0,z[70]=z[100]=1,N[70]=N[100]=0,R[70]=R[100]=-1,O[70]=O[100]=1,_[70]=_[100]=1,y[70]=y[100]=0,v[70]=v[100]=0,S[101]=S[69]=0,k[101]=k[69]=1,C[101]=C[69]=0,_[101]=_[69]=1,y[101]=y[69]=0,v[101]=v[69]=0,F[149]=F[21]=0,B[149]=B[21]=1,U[149]=U[21]=1,b[149]=b[21]=-1,x[149]=x[21]=0,w[149]=w[21]=0,A[86]=A[84]=-1,P[86]=P[84]=0,z[86]=z[84]=1,N[86]=N[84]=0,R[86]=R[84]=-1,O[86]=O[84]=1,E[89]=E[81]=0,M[89]=M[81]=-1,T[89]=T[81]=0,I[89]=I[81]=1,L[89]=L[81]=0,D[89]=D[81]=1,E[96]=E[74]=0,M[96]=M[74]=1,T[96]=T[74]=0,S[96]=S[74]=-1,k[96]=k[74]=0,C[96]=C[74]=1,N[96]=N[74]=1,R[96]=R[74]=0,O[96]=O[74]=0,_[96]=_[74]=1,y[96]=y[74]=0,v[96]=v[74]=1,E[24]=E[146]=0,M[24]=M[146]=-1,T[24]=T[146]=1,A[24]=A[146]=1,P[24]=P[146]=0,z[24]=z[146]=1,I[24]=I[146]=0,L[24]=L[146]=1,D[24]=D[146]=1,b[24]=b[146]=0,x[24]=x[146]=-1,w[24]=w[146]=0,S[6]=S[164]=-1,k[6]=k[164]=0,C[6]=C[164]=1,A[6]=A[164]=-1,P[6]=P[164]=0,z[6]=z[164]=0,F[6]=F[164]=0,B[6]=B[164]=-1,U[6]=U[164]=1,N[6]=N[164]=1,R[6]=R[164]=0,O[6]=O[164]=0,I[129]=I[41]=0,L[129]=L[41]=1,D[129]=D[41]=1,F[129]=F[41]=0,B[129]=B[41]=1,U[129]=U[41]=0,_[129]=_[41]=-1,y[129]=y[41]=0,v[129]=v[41]=0,b[129]=b[41]=0,x[129]=x[41]=-1,w[129]=w[41]=0,A[66]=A[104]=0,P[66]=P[104]=1,z[66]=z[104]=0,I[66]=I[104]=-1,L[66]=L[104]=0,D[66]=D[104]=1,N[66]=N[104]=0,R[66]=R[104]=-1,O[66]=O[104]=0,_[66]=_[104]=0,y[66]=y[104]=-1,v[66]=v[104]=1,E[144]=E[26]=-1,M[144]=M[26]=0,T[144]=T[26]=0,F[144]=F[26]=1,B[144]=B[26]=0,U[144]=U[26]=1,N[144]=N[26]=0,R[144]=R[26]=1,O[144]=O[26]=1,b[144]=b[26]=-1,x[144]=x[26]=0,w[144]=w[26]=1,S[36]=S[134]=0,k[36]=k[134]=1,C[36]=C[134]=1,A[36]=A[134]=0,P[36]=P[134]=1,z[36]=z[134]=0,_[36]=_[134]=0,y[36]=y[134]=-1,v[36]=v[134]=1,b[36]=b[134]=1,x[36]=x[134]=0,w[36]=w[134]=0,E[9]=E[161]=-1,M[9]=M[161]=0,T[9]=T[161]=0,S[9]=S[161]=0,k[9]=k[161]=-1,C[9]=C[161]=0,I[9]=I[161]=1,L[9]=L[161]=0,D[9]=D[161]=0,F[9]=F[161]=1,B[9]=B[161]=0,U[9]=U[161]=1,E[136]=0,M[136]=1,T[136]=1,S[136]=0,k[136]=1,C[136]=0,A[136]=-1,P[136]=0,z[136]=1,I[136]=-1,L[136]=0,D[136]=0,F[136]=0,B[136]=-1,U[136]=0,N[136]=0,R[136]=-1,O[136]=1,_[136]=1,y[136]=0,v[136]=0,b[136]=1,x[136]=0,w[136]=1,E[34]=0,M[34]=-1,T[34]=0,S[34]=0,k[34]=-1,C[34]=1,A[34]=1,P[34]=0,z[34]=0,I[34]=1,L[34]=0,D[34]=1,F[34]=0,B[34]=1,U[34]=1,N[34]=0,R[34]=1,O[34]=0,_[34]=-1,y[34]=0,v[34]=1,b[34]=-1,x[34]=0,w[34]=0,E[35]=0,M[35]=1,T[35]=1,S[35]=0,k[35]=-1,C[35]=1,A[35]=1,P[35]=0,z[35]=0,I[35]=-1,L[35]=0,D[35]=0,F[35]=0,B[35]=-1,U[35]=0,N[35]=0,R[35]=1,O[35]=0,_[35]=-1,y[35]=0,v[35]=1,b[35]=1,x[35]=0,w[35]=1,E[153]=0,M[153]=1,T[153]=1,I[153]=-1,L[153]=0,D[153]=0,F[153]=0,B[153]=-1,U[153]=0,b[153]=1,x[153]=0,w[153]=1,S[102]=0,k[102]=-1,C[102]=1,A[102]=1,P[102]=0,z[102]=0,N[102]=0,R[102]=1,O[102]=0,_[102]=-1,y[102]=0,v[102]=1,E[155]=0,M[155]=-1,T[155]=0,I[155]=1,L[155]=0,D[155]=1,F[155]=0,B[155]=1,U[155]=1,b[155]=-1,x[155]=0,w[155]=0,S[103]=0,k[103]=1,C[103]=0,A[103]=-1,P[103]=0,z[103]=1,N[103]=0,R[103]=-1,O[103]=1,_[103]=1,y[103]=0,v[103]=0,E[152]=0,M[152]=1,T[152]=1,A[152]=-1,P[152]=0,z[152]=1,I[152]=-1,L[152]=0,D[152]=0,F[152]=0,B[152]=-1,U[152]=0,N[152]=0,R[152]=-1,O[152]=1,b[152]=1,x[152]=0,w[152]=1,E[156]=0,M[156]=-1,T[156]=1,A[156]=1,P[156]=0,z[156]=1,I[156]=-1,L[156]=0,D[156]=0,F[156]=0,B[156]=-1,U[156]=0,N[156]=0,R[156]=1,O[156]=1,b[156]=-1,x[156]=0,w[156]=1,E[137]=0,M[137]=1,T[137]=1,S[137]=0,k[137]=1,C[137]=0,I[137]=-1,L[137]=0,D[137]=0,F[137]=0,B[137]=-1,U[137]=0,_[137]=1,y[137]=0,v[137]=0,b[137]=1,x[137]=0,w[137]=1,E[139]=0,M[139]=1,T[139]=1,S[139]=0,k[139]=-1,C[139]=0,I[139]=1,L[139]=0,D[139]=0,F[139]=0,B[139]=1,U[139]=0,_[139]=-1,y[139]=0,v[139]=0,b[139]=1,x[139]=0,w[139]=1,E[98]=0,M[98]=-1,T[98]=0,S[98]=0,k[98]=-1,C[98]=1,A[98]=1,P[98]=0,z[98]=0,I[98]=1,L[98]=0,D[98]=1,N[98]=0,R[98]=1,O[98]=0,_[98]=-1,y[98]=0,v[98]=1,E[99]=0,M[99]=1,T[99]=0,S[99]=0,k[99]=-1,C[99]=1,A[99]=1,P[99]=0,z[99]=0,I[99]=-1,L[99]=0,D[99]=1,N[99]=0,R[99]=-1,O[99]=0,_[99]=1,y[99]=0,v[99]=1,S[38]=0,k[38]=-1,C[38]=1,A[38]=1,P[38]=0,z[38]=0,F[38]=0,B[38]=1,U[38]=1,N[38]=0,R[38]=1,O[38]=0,_[38]=-1,y[38]=0,v[38]=1,b[38]=-1,x[38]=0,w[38]=0,S[39]=0,k[39]=1,C[39]=1,A[39]=-1,P[39]=0,z[39]=0,F[39]=0,B[39]=-1,U[39]=1,N[39]=0,R[39]=1,O[39]=0,_[39]=-1,y[39]=0,v[39]=1,b[39]=1,x[39]=0,w[39]=0;var Y=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},j=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},V=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},G=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},q=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},H=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Z=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},W=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},X=[],K=[],J=[],Q=[],tt=[],et=[],nt=[],it=[];Q[1]=tt[1]=18,Q[169]=tt[169]=18,J[4]=K[4]=12,J[166]=K[166]=12,X[16]=it[16]=4,X[154]=it[154]=4,et[64]=nt[64]=22,et[106]=nt[106]=22,J[2]=et[2]=17,Q[2]=tt[2]=18,J[168]=et[168]=17,Q[168]=tt[168]=18,X[8]=Q[8]=9,K[8]=J[8]=12,X[162]=Q[162]=9,K[162]=J[162]=12,X[32]=it[32]=4,K[32]=nt[32]=1,X[138]=it[138]=4,K[138]=nt[138]=1,tt[128]=it[128]=21,et[128]=nt[128]=22,tt[42]=it[42]=21,et[42]=nt[42]=22,K[5]=tt[5]=14,K[165]=tt[165]=14,J[20]=it[20]=6,J[150]=it[150]=6,X[80]=et[80]=11,X[90]=et[90]=11,Q[65]=nt[65]=3,Q[105]=nt[105]=3,X[160]=et[160]=11,K[160]=tt[160]=14,X[10]=et[10]=11,K[10]=tt[10]=14,J[130]=it[130]=6,Q[130]=nt[130]=3,J[40]=it[40]=6,Q[40]=nt[40]=3,K[101]=nt[101]=1,K[69]=nt[69]=1,tt[149]=it[149]=21,tt[21]=it[21]=21,J[86]=et[86]=17,J[84]=et[84]=17,X[89]=Q[89]=9,X[81]=Q[81]=9,X[96]=nt[96]=0,K[96]=et[96]=15,X[74]=nt[74]=0,K[74]=et[74]=15,X[24]=J[24]=8,Q[24]=it[24]=7,X[146]=J[146]=8,Q[146]=it[146]=7,K[6]=et[6]=15,J[6]=tt[6]=16,K[164]=et[164]=15,J[164]=tt[164]=16,Q[129]=it[129]=7,tt[129]=nt[129]=20,Q[41]=it[41]=7,tt[41]=nt[41]=20,J[66]=nt[66]=2,Q[66]=et[66]=19,J[104]=nt[104]=2,Q[104]=et[104]=19,X[144]=tt[144]=10,et[144]=it[144]=23,X[26]=tt[26]=10,et[26]=it[26]=23,K[36]=it[36]=5,J[36]=nt[36]=2,K[134]=it[134]=5,J[134]=nt[134]=2,X[9]=tt[9]=10,K[9]=Q[9]=13,X[161]=tt[161]=10,K[161]=Q[161]=13,K[37]=it[37]=5,tt[37]=nt[37]=20,K[133]=it[133]=5,tt[133]=nt[133]=20,J[148]=tt[148]=16,et[148]=it[148]=23,J[22]=tt[22]=16,et[22]=it[22]=23,X[82]=J[82]=8,Q[82]=et[82]=19,X[88]=J[88]=8,Q[88]=et[88]=19,X[73]=nt[73]=0,K[73]=Q[73]=13,X[97]=nt[97]=0,K[97]=Q[97]=13,X[145]=Q[145]=9,tt[145]=it[145]=21,X[25]=Q[25]=9,tt[25]=it[25]=21,K[70]=nt[70]=1,J[70]=et[70]=17,K[100]=nt[100]=1,J[100]=et[100]=17,X[34]=Q[34]=9,K[34]=J[34]=12,tt[34]=it[34]=21,et[34]=nt[34]=22,X[136]=it[136]=4,K[136]=nt[136]=1,J[136]=et[136]=17,Q[136]=tt[136]=18,X[35]=it[35]=4,K[35]=J[35]=12,Q[35]=tt[35]=18,et[35]=nt[35]=22,X[153]=it[153]=4,Q[153]=tt[153]=18,K[102]=J[102]=12,et[102]=nt[102]=22,X[155]=Q[155]=9,tt[155]=it[155]=23,K[103]=nt[103]=1,J[103]=et[103]=17,X[152]=it[152]=4,J[152]=et[152]=17,Q[152]=tt[152]=18,X[156]=J[156]=8,Q[156]=tt[156]=18,et[156]=it[156]=23,X[137]=it[137]=4,K[137]=nt[137]=1,Q[137]=tt[137]=18,X[139]=it[139]=4,K[139]=Q[139]=13,tt[139]=nt[139]=20,X[98]=Q[98]=9,K[98]=J[98]=12,et[98]=nt[98]=22,X[99]=nt[99]=0,K[99]=J[99]=12,Q[99]=et[99]=19,K[38]=J[38]=12,tt[38]=it[38]=21,et[38]=nt[38]=22,K[39]=it[39]=5,J[39]=tt[39]=16,et[39]=nt[39]=22;var rt=[];function ot(t,e,n){var i,r=e[0]-t[0],o=e[1]-t[1],a=n[0]-e[0];return((i=r*(n[1]-e[1])-a*o)>0)-(i<0)||+i}function at(t,e){return e.geometry.coordinates[0].every((function(e){return s((0,a.xm)(e),t)}))}rt[1]=rt[169]=Y,rt[4]=rt[166]=j,rt[16]=rt[154]=V,rt[64]=rt[106]=G,rt[168]=rt[2]=q,rt[162]=rt[8]=H,rt[138]=rt[32]=Z,rt[42]=rt[128]=W,rt[5]=rt[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},rt[20]=rt[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},rt[80]=rt[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},rt[65]=rt[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},rt[160]=rt[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},rt[130]=rt[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},rt[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},rt[101]=rt[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},rt[149]=rt[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},rt[86]=rt[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},rt[89]=rt[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},rt[96]=rt[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},rt[24]=rt[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},rt[6]=rt[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},rt[129]=rt[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},rt[66]=rt[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},rt[144]=rt[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},rt[36]=rt[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},rt[9]=rt[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},rt[37]=rt[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},rt[148]=rt[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},rt[82]=rt[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},rt[73]=rt[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},rt[145]=rt[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},rt[70]=rt[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},rt[34]=function(t){return[W(t),H(t)]},rt[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},rt[136]=function(t){return[Z(t),q(t)]},rt[153]=function(t){return[V(t),Y(t)]},rt[102]=function(t){return[j(t),G(t)]},rt[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},rt[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},rt[152]=function(t){return[V(t),q(t)]},rt[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},rt[137]=function(t){return[Z(t),Y(t)]},rt[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},rt[98]=function(t){return[H(t),G(t)]},rt[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},rt[38]=function(t){return[j(t),W(t)]},rt[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};const st=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var i=e.to,r=n.to;if(i.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(i.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(i.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return i.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?i.coordinates[1]-r.coordinates[1]:r.coordinates[1]-i.coordinates[1];var o=ot(t.coordinates,i.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),lt=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return(0,a.Tu)([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return ot(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}();var ct=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,i){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=i),e}),0),n=(0===e?this.length:e)-1,i=(e+1)%this.length,r=ot(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[i].from.coordinates);return 0===r?this.edges[n].from.coordinates[0]>this.edges[i].from.coordinates[0]:r>0},t.prototype.toMultiPoint=function(){return(0,a.ot)(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=(0,a.yu)([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=(0,u.Z)(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,i,r=t.getEnvelope();return e.forEach((function(e){var o,s,l,c,u,h,d=e.getEnvelope();if(i&&(n=i.getEnvelope()),s=r,l=(o=d).geometry.coordinates[0].map((function(t){return t[0]})),c=o.geometry.coordinates[0].map((function(t){return t[1]})),u=s.geometry.coordinates[0].map((function(t){return t[0]})),h=s.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,l)!==Math.max.apply(null,u)||Math.max.apply(null,c)!==Math.max.apply(null,h)||Math.min.apply(null,l)!==Math.min.apply(null,u)||Math.min.apply(null,c)!==Math.min.apply(null,h))&&at(d,r)){for(var p=t.map((function(t){return t.from.coordinates})),f=void 0,m=function(t){e.some((function(e){return n=t,i=e.from.coordinates,n[0]===i[0]&&n[1]===i[1];var n,i}))||(f=t)},g=0,_=p;g<_.length;g++)m(_[g]);f&&e.inside((0,a.xm)(f))&&(i&&!at(n,d)||(i=e))}})),i},t.prototype.inside=function(t){return s(t,this.toPolygon())},t}();const ut=ct;function ht(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}!function(){function t(){this.edges=[],this.nodes={}}t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return(0,o.nG)(e,(function(t){!function(t,e,n){if(!t)throw new Error("No feature passed");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}(t,"LineString","Graph::fromGeoJson"),(0,o.Lo)(t,(function(t,e){if(t){var i=n.getNode(t),r=n.getNode(e);n.addEdge(i,r)}return e}))})),n},t.prototype.getNode=function(t){var e=st.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new st(t)),n},t.prototype.addEdge=function(t,e){var n=new lt(t,e),i=n.getSymetric();this.edges.push(n),this.edges.push(i)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,i,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var a=r[o],s=a.symetric,l=void 0,c=void 0;a.label===e&&(l=a),s.label===e&&(c=s),l&&c&&(c&&(i=c),l&&(i&&(i.next=l,i=void 0),n||(n=l)))}i&&(i.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var i=n;do{i.label=e,i=i.next}while(!n.isEqual(i));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,i=function(){var i=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++i})),i>1&&e.push(n.from),n=n.next};do{i()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new ut;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()}}(),n(9657),n(2606),n(1160);var dt={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||dt.heuristics.manhattan,o=i.closest||!1,a=new mt((function(t){return t.f})),s=e;for(e.h=r(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return ht(l);l.closed=!0;for(var c=t.neighbors(l),u=0,h=c.length;u<h;++u){var d=c[u];if(!d.closed&&!d.isWall()){var p=l.g+d.getCost(l),f=d.visited;(!f||p<d.g)&&(d.visited=!0,d.parent=l,d.h=d.h||r(d,n),d.g=p,d.f=d.g+d.h,t.markDirty(d),o&&(d.h<s.h||d.h===s.h&&d.g<s.g)&&(s=d),f?a.rescoreElement(d):a.push(d))}}}return o?ht(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function pt(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new ft(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function ft(t,e,n){this.x=t,this.y=e,this.weight=n}function mt(t){this.content=[],this.scoreFunction=t}function gt(){this._=null}function _t(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function yt(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function vt(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function bt(t){for(;t.L;)t=t.L;return t}pt.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)dt.cleanNode(this.nodes[t])},pt.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)dt.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},pt.prototype.markDirty=function(t){this.dirtyNodes.push(t)},pt.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},pt.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,i=(e=o[a]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},ft.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},ft.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},ft.prototype.isWall=function(){return 0===this.weight},mt.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,a=o-1,s=null;if(a<e){var l=this.content[a];(r=this.scoreFunction(l))<i&&(s=a)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===s?i:r)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}},gt.prototype={constructor:gt,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=bt(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(yt(this,n),n=(t=n).U),n.C=!1,i.C=!0,vt(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(vt(this,n),n=(t=n).U),n.C=!1,i.C=!0,yt(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?bt(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,yt(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,vt(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,yt(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,vt(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,yt(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,vt(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};const xt=gt;function wt(t,e,n,i){var r=[null,null],o=Ht.push(r)-1;return r.left=t,r.right=e,n&&Mt(r,t,e,n),i&&Mt(r,e,t,i),Gt[t.index].halfedges.push(o),Gt[e.index].halfedges.push(o),r}function Et(t,e,n){var i=[e,n];return i.left=t,i}function Mt(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Tt(t,e,n,i,r){var o,a=t[0],s=t[1],l=a[0],c=a[1],u=0,h=1,d=s[0]-l,p=s[1]-c;if(o=e-l,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>u&&(u=o)}if(o=i-l,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<h&&(h=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>u&&(u=o)}if(o=r-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<h&&(h=o)}return!(u>0||h<1)||(u>0&&(t[0]=[l+u*d,c+u*p]),h<1&&(t[1]=[l+h*d,c+h*p]),!0)}}}}}function St(t,e,n,i,r){var o=t[1];if(o)return!0;var a,s,l=t[0],c=t.left,u=t.right,h=c[0],d=c[1],p=u[0],f=u[1],m=(h+p)/2,g=(d+f)/2;if(f===d){if(m<e||m>=i)return;if(h>p){if(l){if(l[1]>=r)return}else l=[m,n];o=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];o=[m,n]}}else if(s=g-(a=(h-p)/(f-d))*m,a<-1||a>1)if(h>p){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(d<f){if(l){if(l[0]>=i)return}else l=[e,a*e+s];o=[i,a*i+s]}else{if(l){if(l[0]<e)return}else l=[i,a*i+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function kt(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Ct(t,e){return e[+(e.left!==t.site)]}function It(t,e){return e[+(e.left===t.site)]}var Lt,Dt=[];function At(){_t(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pt(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,c=i[1]-s,u=o[0]-a,h=o[1]-s,d=2*(l*h-c*u);if(!(d>=-Zt)){var p=l*l+c*c,f=u*u+h*h,m=(h*p-c*f)/d,g=(l*f-u*p)/d,_=Dt.pop()||new At;_.arc=t,_.site=r,_.x=m+a,_.y=(_.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=_;for(var y=null,v=qt._;v;)if(_.y<v.y||_.y===v.y&&_.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}qt.insert(y,_),y||(Lt=_)}}}}function zt(t){var e=t.circle;e&&(e.P||(Lt=e.N),qt.remove(e),Dt.push(e),_t(e),t.circle=null)}var Nt=[];function Rt(){_t(this),this.edge=this.site=this.circle=null}function Ot(t){var e=Nt.pop()||new Rt;return e.site=t,e}function Ft(t){zt(t),Vt.remove(t),Nt.push(t),_t(t)}function Bt(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,s=[t];Ft(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<$t&&Math.abs(i-l.circle.cy)<$t;)o=l.P,s.unshift(l),Ft(l),l=o;s.unshift(l),zt(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<$t&&Math.abs(i-c.circle.cy)<$t;)a=c.N,s.push(c),Ft(c),c=a;s.push(c),zt(c);var u,h=s.length;for(u=1;u<h;++u)c=s[u],l=s[u-1],Mt(c.edge,l.site,c.site,r);l=s[0],(c=s[h-1]).edge=wt(l.site,c.site,null,r),Pt(l),Pt(c)}function Ut(t){for(var e,n,i,r,o=t[0],a=t[1],s=Vt._;s;)if((i=Yt(s,a)-o)>$t)s=s.L;else{if(!((r=o-jt(s,a))>$t)){i>-$t?(e=s.P,n=s):r>-$t?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Gt[t.index]={site:t,halfedges:[]}}(t);var l=Ot(t);if(Vt.insert(e,l),e||n){if(e===n)return zt(e),n=Ot(e.site),Vt.insert(l,n),l.edge=n.edge=wt(e.site,l.site),Pt(e),void Pt(n);if(n){zt(e),zt(n);var c=e.site,u=c[0],h=c[1],d=t[0]-u,p=t[1]-h,f=n.site,m=f[0]-u,g=f[1]-h,_=2*(d*g-p*m),y=d*d+p*p,v=m*m+g*g,b=[(g*y-p*v)/_+u,(d*v-m*y)/_+h];Mt(n.edge,c,f,b),l.edge=wt(c,t,null,b),n.edge=wt(t,f,null,b),Pt(e),Pt(n)}else l.edge=wt(e.site,l.site)}}function Yt(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],c=l-e;if(!c)return s;var u=s-i,h=1/o-1/c,d=u/c;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*c)-l+c/2+r-o/2)))/h+i:(i+s)/2}function jt(t,e){var n=t.N;if(n)return Yt(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Vt,Gt,qt,Ht,$t=1e-6,Zt=1e-12;function Wt(t,e){return e[1]-t[1]||e[0]-t[0]}function Xt(t,e){var n,i,r,o=t.sort(Wt).pop();for(Ht=[],Gt=new Array(t.length),Vt=new xt,qt=new xt;;)if(r=Lt,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(Ut(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;Bt(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Gt.length;r<o;++r)if((t=Gt[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=kt(t,Ht[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<i;++n)s[n]=e[a[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var r,o=Ht.length;o--;)St(r=Ht[o],t,e,n,i)&&Tt(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>$t||Math.abs(r[0][1]-r[1][1])>$t)||delete Ht[o]}(a,s,l,c),function(t,e,n,i){var r,o,a,s,l,c,u,h,d,p,f,m,g=Gt.length,_=!0;for(r=0;r<g;++r)if(o=Gt[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)Ht[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)f=(p=It(o,Ht[l[s]]))[0],m=p[1],h=(u=Ct(o,Ht[l[++s%c]]))[0],d=u[1],(Math.abs(f-h)>$t||Math.abs(m-d)>$t)&&(l.splice(s,0,Ht.push(Et(a,p,Math.abs(f-t)<$t&&i-m>$t?[t,Math.abs(h-t)<$t?d:i]:Math.abs(m-i)<$t&&n-f>$t?[Math.abs(d-i)<$t?h:n,i]:Math.abs(f-n)<$t&&m-e>$t?[n,Math.abs(h-n)<$t?d:e]:Math.abs(m-e)<$t&&f-t>$t?[Math.abs(d-e)<$t?h:t,e]:null))-1),++c);c&&(_=!1)}if(_){var y,v,b,x=1/0;for(r=0,_=null;r<g;++r)(o=Gt[r])&&(b=(y=(a=o.site)[0]-t)*y+(v=a[1]-e)*v)<x&&(x=b,_=o);if(_){var w=[t,e],E=[t,i],M=[n,i],T=[n,e];_.halfedges.push(Ht.push(Et(a=_.site,w,E))-1,Ht.push(Et(a,E,M))-1,Ht.push(Et(a,M,T))-1,Ht.push(Et(a,T,w))-1)}}for(r=0;r<g;++r)(o=Gt[r])&&(o.halfedges.length||delete Gt[r])}(a,s,l,c)}this.edges=Ht,this.cells=Gt,Vt=qt=Ht=Gt=null}function Kt(){return new Jt}function Jt(){this.reset()}Xt.prototype={constructor:Xt,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Ct(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){if(o=(r=n.halfedges).length)for(var r,o,a,s,l,c,u=n.site,h=-1,d=e[r[o-1]],p=d.left===u?d.right:d.left;++h<o;)a=p,p=(d=e[r[h]]).left===u?d.right:d.left,a&&p&&i<a.index&&i<p.index&&(l=a,c=p,((s=u)[0]-c[0])*(l[1]-s[1])-(s[0]-l[0])*(c[1]-s[1])<0)&&t.push([u.data,a.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var i,r,o=this,a=o._found||0,s=o.cells.length;!(r=o.cells[a]);)if(++a>=s)return null;var l=t-r.site[0],c=e-r.site[1],u=l*l+c*c;do{r=o.cells[i=a],a=null,r.halfedges.forEach((function(n){var i=o.edges[n],s=i.left;if(s!==r.site&&s||(s=i.right)){var l=t-s[0],c=e-s[1],h=l*l+c*c;h<u&&(u=h,a=s.index)}}))}while(null!==a);return o._found=i,null==n||u<=n*n?r.site:null}},n(2676),n(675),Jt.prototype={constructor:Jt,reset:function(){this.s=this.t=0},add:function(t){te(Qt,t,this.t),te(this,Qt.s,this.s),this.s?this.t+=Qt.t:this.s=Qt.t},valueOf:function(){return this.s}};var Qt=new Jt;function te(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var ee,ne,ie=Math.PI,re=ie/2,oe=2*ie,ae=ie/180,se=(Math.abs,Math.atan),le=Math.atan2,ce=Math.cos,ue=(Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin),he=(Math.sign,Math.sqrt);Math.tan;function de(t){return t>1?re:t<-1?-re:Math.asin(t)}function pe(t,e){return[t>ie?t-oe:t<-ie?t+oe:t,e]}function fe(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Kt(),Kt(),Kt(),pe.invert=pe,1===(ee=fe).length&&(ne=ee,ee=function(t,e){return fe(ne(t),e)});var me=Array.prototype;me.slice,me.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);Kt();function ge(){}function _e(t){return function(e,n){var i=ce(e),r=ce(n),o=t(i*r);return[o*r*ue(e),o*ue(n)]}}function ye(t){return function(e,n){var i=he(e*e+n*n),r=t(i),o=ue(r),a=ce(r);return[le(e*o,i*a),de(i&&n*o/i)]}}function ve(t,e){return[t,e]}Kt(),Kt(),Kt(),Kt(),ge.prototype={constructor:ge,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ce(30*ae),_e((function(t){return he(2/(1+t))})).invert=ye((function(t){return 2*de(t/2)})),_e((function(t){return(t=(e=t)>1?0:e<-1?ie:Math.acos(e))&&t/ue(t);var e})).invert=ye((function(t){return t})),ve.invert=ve,ye(se),ye(de),ye((function(t){return 2*se(t)}));var be=n(7588),xe=n.n(be),we=n(1581),Ee=n.n(we),Me=n(2650),Te=n(9669),Se=n.n(Te),ke=n(9113),Ce=n(4184),Ie=n.n(Ce),Le=n(5086);function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Ae(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pe(t,e){return Pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pe(t,e)}function ze(t,e){return!e||"object"!==De(e)&&"function"!=typeof e?Ne(t):e}function Ne(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Re(t){return Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Re(t)}var Oe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pe(t,e)}(a,t);var e,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Re(i);if(r){var n=Re(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return ze(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).onChange=Le.TI.bind(Ne(e)),e.closeDialog=Le.gk.bind(Ne(e)),e.publish=Le.nY.bind(Ne(e)),e.onSave=e.onSave.bind(Ne(e)),e.onClose=e.onClose.bind(Ne(e)),e}return e=a,(n=[{key:"onSave",value:function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=this.props.model,i=Object.fromEntries(new FormData(t.target)),r=Object.assign({},n,i),o=(0,Me.ZP)(r.ColorString);r.ColorR=o.r,r.ColorG=o.g,r.ColorB=o.b,Se().post("campaign/".concat(n.CampaignId,"/submap/edit"),r).then((function(){return e.closeDialog(),Le.nY("CampaignMap.Refresh"),Promise.resolve()})).catch((function(){e.setState({error:"opps! something wrong. please contact us!"})}))}},{key:"onClose",value:function(){this.closeDialog()}},{key:"render",value:function(){var t=this.props.model,e=t.Id?"Edit SubMap":"New SubMap",n=!(!this.state||!this.state.error),i=n?this.state.error:"";return xe().createElement("form",{onSubmit:this.onSave},xe().createElement("h3",null,e),xe().createElement("div",{"data-abide-error":!0,className:"alert callout",style:{display:n?"block":"none"}},xe().createElement("p",null,xe().createElement("i",{className:"fa fa-exclamation-circle"})," ",i)),xe().createElement("div",{className:"row"},xe().createElement("div",{className:"small-2 columns"},xe().createElement("label",null,"Color",xe().createElement("input",{type:"color",className:"padding-0",onChange:this.onChange,name:"ColorString",defaultValue:"#".concat(t.ColorString),required:!0}),xe().createElement("span",{className:"form-error"},"it is required."))),xe().createElement("div",{className:"small-10 columns"},xe().createElement("label",null,"Name",xe().createElement("input",{onChange:this.onChange,name:"Name",type:"text",defaultValue:t.Name,required:!0}),xe().createElement("span",{className:"form-error"},"it is required."))),xe().createElement("div",{className:"small-6 columns"},xe().createElement("label",null,"Adjust Total",xe().createElement("input",{onChange:this.onChange,name:"TotalAdjustment",type:"number",defaultValue:t.TotalAdjustment}))),xe().createElement("div",{className:"small-6 columns"},xe().createElement("label",null,"Adjust Count",xe().createElement("input",{onChange:this.onChange,name:"CountAdjustment",type:"number",defaultValue:t.CountAdjustment})))),xe().createElement("div",{className:"small-12 columns"},xe().createElement("div",{className:"button-group float-right"},xe().createElement("button",{type:"submit",className:"success button"},"Save"),xe().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel"))),xe().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},xe().createElement("span",{"aria-hidden":"true"},"×")))}}])&&Ae(e.prototype,n),a}(xe().Component),Fe=(n(381),n(6486));function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function Ue(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ye(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function je(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ve(t,e){return Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ve(t,e)}function Ge(t,e){return!e||"object"!==Be(e)&&"function"!=typeof e?qe(t):e}function qe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function He(t){return He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},He(t)}var $e,Ze,We,Xe=new ke.Z("views:campaign"),Ke=[{layer:"PremiumCRoute",zoom:[0,24],fontScale:[.75,.75],settings:[{id:"boundaries",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{streets:{"line-color":"hsl(250, 76%, 67%)","line-width":{base:1.5,stops:[[5,.25],[18,6]]}},satellite:{"line-color":"hsl(250, 76%, 90%)","line-width":{base:1.5,stops:[[5,.25],[18,6]]}}}}]},{layer:"Z5",zoom:[0,24],fontScale:[1,.75],settings:[{id:"boundaries",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{streets:{"line-color":"hsl(215, 36%, 59%)","line-width":{base:1.5,stops:[[5,.5],[18,26]]}},satellite:{"line-color":"hsl(215, 36%, 90%)","line-width":{base:1.5,stops:[[5,.5],[18,26]]}}}}]},{layer:"Z3",zoom:[0,24],fontScale:[1.25,1],settings:[{id:"boundaries",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{streets:{"line-color":"hsl(215, 20%, 42%)","line-width":{base:1.5,stops:[[5,1],[18,32]]}},satellite:{"line-color":"hsl(215, 20%, 90%)","line-width":{base:1.5,stops:[[5,1],[18,32]]}}}}]}],Je=new Map([[0,"Z3"],[1,"Z5"],[15,"PremiumCRoute"]]),Qe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(s,t);var e,n,i,o,a=(i=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=He(i);if(o){var n=He(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Ge(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).state={mapInited:!1,mapReady:!1,activeLayers:new Set,allowedLayers:new Set(["Z3","Z5","PremiumCRoute"]),selectedShapes:new Map,selectedSubmapId:null,campaignSource:{features:[]},mapStyle:"streets"},e.onInitSubMapScrollbar=e.onInitSubMapScrollbar.bind(qe(e)),e.onInitMap=e.onInitMap.bind(qe(e)),e.onMapLoad=e.onMapLoad.bind(qe(e)),e.LoadBackgroundLayer=e.LoadBackgroundLayer.bind(qe(e)),e.loadCampaignGeojson=e.loadCampaignGeojson.bind(qe(e)),e.onRefresh=e.onRefresh.bind(qe(e)),e.onSubmapSelect=e.onSubmapSelect.bind(qe(e)),e.onClassificationsChange=e.onClassificationsChange.bind(qe(e)),e.onShapeSelect=e.onShapeSelect.bind(qe(e)),e.onShowShapePopup=e.onShowShapePopup.bind(qe(e)),e.onHideShapePopup=e.onHideShapePopup.bind(qe(e)),e.loadSubmapList=e.loadSubmapList.bind(qe(e)),e.onNewSubmap=e.onNewSubmap.bind(qe(e)),e.onEditSubmap=e.onEditSubmap.bind(qe(e)),e.onDeleteSubmap=e.onDeleteSubmap.bind(qe(e)),e.onSaveShapesToSubmap=e.onSaveShapesToSubmap.bind(qe(e)),e.onEmptySubmap=e.onEmptySubmap.bind(qe(e)),e.clearSelectedShapes=e.clearSelectedShapes.bind(qe(e)),e.onSelectAllScreenShapes=e.onSelectAllScreenShapes.bind(qe(e)),e.onSwitchMapStyle=e.onSwitchMapStyle.bind(qe(e)),e.initCampaignLayers=e.initCampaignLayers.bind(qe(e)),e.restoreMapSelection=e.restoreMapSelection.bind(qe(e)),e.onSearchZip=e.onSearchZip.bind(qe(e)),e.onPrint=e.onPrint.bind(qe(e)),e.clearPopup=e.clearPopup.bind(qe(e)),e.getActiveLayer=e.getActiveLayer.bind(qe(e)),e.map=null,e.subscribe=Le.ZP.subscribe.bind(qe(e)),e.doUnsubscribe=Le.ZP.doUnsubscribe.bind(qe(e)),e.subscribe("CampaignMap.Refresh",e.onRefresh),e.subscribe("Search.Zip",e.onSearchZip),e.saveCampaignLocation=e.saveCampaignLocation.bind(qe(e)),window.setInterval(e.saveCampaignLocation,12e4),e}return e=s,n=[{key:"componentWillUnmount",value:function(){this.doUnsubscribe()}},{key:"saveCampaignLocation",value:function(){var t=this.map.getZoom(),e=this.map.getCenter();Se().put("campaign/".concat(this.props.campaign.Id,"/location/").concat(t,"/").concat(e.lat,"/").concat(e.lng,'")'),null,{showLoading:!1})}},{key:"onInitSubMapScrollbar",value:function(t){if(t){var e=$(t).parent().height(),n=$(t).prev().height();$(t).css({height:"".concat(e-n,"px")})}}},{key:"onInitMap",value:function(t){var e=this;t&&this.setState((function(n){if(0==n.mapInited){var i,o,a;r().accessToken="pk.eyJ1IjoiZ2hvc3R1eiIsImEiOiJjaXczc2tmc3cwMDEyMm9tb29pdDRwOXUzIn0.KPSiOO6DWTY59x1zHdvYSA";var s=null!==(i=e.props.campaign.ZoomLevel)&&void 0!==i?i:8,l=[null!==(o=e.props.campaign.Longitude)&&void 0!==o?o:-73.987378,null!==(a=e.props.campaign.Latitude)&&void 0!==a?a:40.744556];e.map=new(r().Map)({container:t,zoom:s,maxZoom:20,center:l,style:"mapbox://styles/mapbox/outdoors-v11"}),e.map.once("load",e.onMapLoad),Xe.info("mapbox inited")}return{mapInited:!0}}))}},{key:"onMapLoad",value:function(){var t=this;this.map.addSource("google-road-tiles",{type:"raster",tiles:["//mt0.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt2.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt3.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"],tileSize:256}),this.map.addSource("google-satellite-tiles",{type:"raster",tiles:["//mt0.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt2.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt3.google.com/vt/lyrs=y&x={x}&y={y}&z={z}"],tileSize:256}),this.map.addLayer({id:"timm-google-road-tiles-layer",type:"raster",source:"google-road-tiles",minzoom:0,maxzoom:21,layout:{visibility:"none"}},"land"),this.map.addLayer({id:"timm-google-satellite-tiles-layer",type:"raster",source:"google-satellite-tiles",minzoom:0,maxzoom:21,layout:{visibility:"none"}},"land");var e,n=this.map.getStyle().layers,i=null,r=Ue(n);try{for(r.s();!(e=r.n()).done;){var o=e.value;Xe.info(o.id),null==i&&o.id.indexOf("label")>-1&&(i=o.id)}}catch(t){r.e(t)}finally{r.f()}this.map.loadImage("images/remove_pattern.png",(function(e,n){n&&(t.map.addImage("remove_pattern",n),t.setState({mapLabelLayer:i},(function(){Promise.all([t.LoadBackgroundLayer(),t.loadCampaignGeojson()]).then((function(){return t.setState({mapReady:!0}),Promise.resolve()}))})))}))}},{key:"LoadBackgroundLayer",value:function(){var t=this,e=this.state.mapLabelLayer,n=new URL("./api/area/tiles","".concat(location.protocol,"//").concat(location.host).concat(location.pathname)),i=this.state.mapStyle;return Ke.forEach((function(r){var o="".concat(n,"/").concat(r.layer,"/{z}/{x}/{y}"),a="area-source-".concat(r.layer);t.map.getSource(a)||t.map.addSource(a,{type:"vector",tiles:[o],minzoom:24,maxzoom:24});var s=["streets","satellite"];r.settings.forEach((function(n){s.forEach((function(i){n.layout.visibility="none",t.map.addLayer({id:"timm-area-layer-".concat(r.layer,"-").concat(n.id,"-").concat(i),type:n.type,source:a,"source-layer":r.layer,minzoom:r.zoom[0],maxzoom:r.zoom[1],layout:n.layout,paint:n.paint[i]},e)}))})),t.map.addLayer({id:"timm-area-layer-".concat(r.layer,"-fill"),type:"fill",source:"area-source-".concat(r.layer),"source-layer":r.layer,minzoom:r.zoom[0],maxzoom:r.zoom[1],layout:{visibility:"none"},paint:{"fill-color":"white","fill-opacity":0}},e),t.map.getLayer("timm-area-layer-".concat(r.layer,"-selected"))&&t.map.removeLayer("timm-area-layer-".concat(r.layer,"-selected")),t.map.addLayer({id:"timm-area-layer-".concat(r.layer,"-selected"),type:"fill",source:"area-source-".concat(r.layer),"source-layer":r.layer,minzoom:r.zoom[0],maxzoom:r.zoom[1],layout:{visibility:"none"},paint:{"fill-color":"#000000","fill-opacity":.5},filter:["==","id",""]},e),t.map.getLayer("timm-area-layer-".concat(r.layer,"-remove"))&&t.map.removeLayer("timm-area-layer-".concat(r.layer,"-remove")),t.map.addLayer({id:"timm-area-layer-".concat(r.layer,"-remove"),type:"fill",source:"area-source-".concat(r.layer),"source-layer":r.layer,minzoom:r.zoom[0],maxzoom:r.zoom[1],paint:{"fill-pattern":"remove_pattern"},filter:["==","id",""]},e),t.map.getLayer("timm-area-layer-".concat(r.layer,"-label"))&&t.map.removeLayer("timm-area-layer-".concat(r.layer,"-label"));var l="",c="";switch(t.props.campaign.AreaDescription){case"APT ONLY":l=["concat","MFDU:",["number-format",["get","apt"],{locale:"en-Latn-US"}]],c="";break;case"HOME ONLY":l=["concat","SFDU:",["number-format",["get","home"],{locale:"en-Latn-US"}]],c="";break;case"APT + HOME":l=["concat","SFDU:",["number-format",["get","home"],{locale:"en-Latn-US"}]," ","MFDU:",["number-format",["get","apt"],{locale:"en-Latn-US"}]],c=["concat","Total:",["number-format",["+",["get","home"],["get","apt"]],{locale:"en-Latn-US"}]]}t.map.addLayer({id:"timm-area-layer-".concat(r.layer,"-label"),type:"symbol",source:a,"source-layer":r.layer,minzoom:r.zoom[0],maxzoom:r.zoom[1],layout:{visibility:"none","text-max-width":200,"text-field":["format",["get","name"],{"font-scale":r.fontScale[0]},"\n",l,{"font-scale":r.fontScale[1]},"\n",c,{"font-scale":r.fontScale[1]}]},paint:{"text-color":"streets"==i?"black":"white","text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(255, 255, 255, 0.75)",3,"rgb(255, 255, 255)"],"text-halo-width":r.fontScale[1]},filter:["==",["geometry-type"],"Point"]}),t.map.off("click","timm-area-layer-".concat(r.layer,"-fill"),t.onShapeSelect),t.map.off("contextmenu","timm-area-layer-".concat(r.layer,"-fill"),t.onShowShapePopup),t.map.off("mousemove","timm-area-layer-".concat(r.layer,"-fill"),t.onHideShapePopup),t.map.on("click","timm-area-layer-".concat(r.layer,"-fill"),t.onShapeSelect),t.map.on("contextmenu","timm-area-layer-".concat(r.layer,"-fill"),t.onShowShapePopup),t.map.on("mousemove","timm-area-layer-".concat(r.layer,"-fill"),t.onHideShapePopup)})),Promise.resolve()}},{key:"loadCampaignGeojson",value:function(){var t=this;return Se().get("campaign/".concat(this.props.campaign.Id,"/submap/geojson")).then((function(e){return new Promise((function(n){t.setState({campaignSource:e.data},(function(){return 1==t.state.mapReady?t.map.getSource("map-source").setData(e.data):t.initCampaignLayers(),n()}))}))}))}},{key:"initCampaignLayers",value:function(){var t,e=this.state.mapLabelLayer;this.map.addSource("map-source",{type:"geojson",data:this.state.campaignSource}),this.map.addLayer({id:"timm-submap-layer-fill",type:"fill",source:"map-source",layout:{},paint:{"fill-color":["get","color"],"fill-opacity":.5}},e),this.map.addLayer({id:"timm-submap-layer-line",type:"line",source:"map-source",layout:{},paint:{"line-color":["get","color"],"line-width":6}},e),this.map.addLayer({id:"timm-submap-layer-highlight",type:"line",source:"map-source",layout:{},paint:{"line-color":"#000000","line-width":6},filter:["==",["get","sid"],""]},e);var n=(null!==(t=this.state.campaignSource.features)&&void 0!==t?t:[]).filter((function(t){var e;return"submap"==(null===(e=t.properties)||void 0===e?void 0:e.type)})).reduce((function(t,e){return[t[0]?Math.min(t[0],e.bbox[0]):e.bbox[0],t[1]?Math.min(t[1],e.bbox[1]):e.bbox[1],t[2]?Math.max(t[2],e.bbox[2]):e.bbox[2],t[3]?Math.max(t[3],e.bbox[3]):e.bbox[3]]}),[null,null,null,null]);return this.map.fitBounds([[n[0],n[1]],[n[2],n[3]]]),Promise.resolve()}},{key:"restoreMapSelection",value:function(){var t,e,n,i,r=this,o=["fill","selected","label"];Ke.forEach((function(t){t.settings.forEach((function(e){r.map.setLayoutProperty("timm-area-layer-".concat(t.layer,"-").concat(e.id),"visibility",r.state.activeLayers.has(t.layer)?"visible":"none")})),o.forEach((function(e){r.map.setLayoutProperty("timm-area-layer-".concat(t.layer,"-").concat(e),"visibility",r.state.activeLayers.has(t.layer)?"visible":"none")}));var e=r.map.getSource("area-source-".concat(t.layer));r.state.activeLayers.has(t.layer)?e.minzoom=0:e.minzoom=24}));var a=Array.from(this.state.selectedShapes.values()),s=a.filter((function(t){return 1==t.Value})).map((function(t){return t.Id})),l=a.filter((function(t){return 0==t.Value})).map((function(t){return t.Id})),c=this.getActiveLayer();this.map.setFilter("timm-area-layer-".concat(c,"-remove"),["in",["get","id"],["literal",l]]),this.map.setFilter("timm-area-layer-".concat(c,"-selected"),["in",["get","id"],["literal",s]]);var u=null===(i=(null!==(t=null===(e=this.props)||void 0===e||null===(n=e.campaign)||void 0===n?void 0:n.SubMaps)&&void 0!==t?t:[]).filter((function(t){return t.Id==r.state.selectedSubmapId})))||void 0===i?void 0:i[0];if(u){var h=(0,Me.ZP)("#".concat(u.ColorString)).darker(2).toString();this.map.setLayoutProperty("timm-submap-layer-highlight","visibility","none"),this.map.setFilter("timm-submap-layer-highlight",["==",["get","sid"],u.Id]),this.map.setPaintProperty("timm-submap-layer-highlight","line-color",h),this.map.setLayoutProperty("timm-submap-layer-highlight","visibility","visible"),Ke.forEach((function(t){r.map.setPaintProperty("timm-area-layer-".concat(t.layer,"-selected"),"fill-color",(0,Me.ZP)("#".concat(u.ColorString)).toString())}))}}},{key:"onRefresh",value:function(){this.loadSubmapList(),this.loadCampaignGeojson(),this.clearSelectedShapes()}},{key:"onClassificationsChange",value:function(t){var e=this;if(this.state.mapReady){var n=t.currentTarget.id;this.setState((function(t){var e=new Set(t.activeLayers);return e.has(n)?e.delete(n):e.add(n),{activeLayers:e}}),(function(){var t=["fill","selected","label"],n=e.state.mapStyle;Ke.forEach((function(i){i.settings.forEach((function(t){e.map.setLayoutProperty("timm-area-layer-".concat(i.layer,"-").concat(t.id,"-").concat(n),"visibility",e.state.activeLayers.has(i.layer)?"visible":"none")})),t.forEach((function(t){e.map.setLayoutProperty("timm-area-layer-".concat(i.layer,"-").concat(t),"visibility",e.state.activeLayers.has(i.layer)?"visible":"none")}));var r=e.map.getSource("area-source-".concat(i.layer));e.state.activeLayers.has(i.layer)?r.minzoom=0:r.minzoom=24}))}))}}},{key:"onSubmapSelect",value:function(t){var e=this;this.state.mapReady&&this.state.selectedSubmapId!=t.Id&&this.setState((function(n){var i,r,o,a=Array.from(Je.values()),s=Je.get(null===(i=t.SubMapRecords)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.Classification);s&&(a=[s]);var l=null===(o=n.campaignSource.features.filter((function(e){var n;return(null==e||null===(n=e.properties)||void 0===n?void 0:n.sid)==t.Id})))||void 0===o?void 0:o[0];return l&&e.map.fitBounds([[l.bbox[0],l.bbox[1]],[l.bbox[2],l.bbox[3]]]),{selectedSubmapId:t.Id,allowedLayers:new Set(a),selectedShapes:new Map}}),(function(){var n=(0,Me.ZP)("#".concat(t.ColorString)).darker(2).toString();e.map.setLayoutProperty("timm-submap-layer-highlight","visibility","none"),e.map.setFilter("timm-submap-layer-highlight",["==",["get","sid"],t.Id]),e.map.setPaintProperty("timm-submap-layer-highlight","line-color",n),e.map.setLayoutProperty("timm-submap-layer-highlight","visibility","visible"),Ke.forEach((function(n){e.map.setFilter("timm-area-layer-".concat(n.layer,"-remove"),["==",["get","sid"],""]),e.map.setFilter("timm-area-layer-".concat(n.layer,"-selected"),["==",["get","sid"],""]),e.map.setPaintProperty("timm-area-layer-".concat(n.layer,"-selected"),"fill-color",(0,Me.ZP)("#".concat(t.ColorString)).toString())}))}))}},{key:"getActiveLayer",value:function(){var t=this.state.allowedLayers,e=this.state.activeLayers;return e.has("PremiumCRoute")&&t.has("PremiumCRoute")?"PremiumCRoute":e.has("Z5")&&t.has("Z5")?"Z5":e.has("Z3")&&t.has("Z3")?"Z3":null}},{key:"onShapeSelect",value:function(t){var e,n,i,r,o,a,s,l,c,u,h,d,p=this;if(this.state.selectedSubmapId){var f=null===(e=t.features)||void 0===e||null===(n=e[0])||void 0===n||null===(i=n.properties)||void 0===i?void 0:i.id,m=null===(r=t.features)||void 0===r||null===(o=r[0])||void 0===o||null===(a=o.properties)||void 0===a?void 0:a.name,g=this.getActiveLayer();if(f&&m&&-1!=f.indexOf(g)){var _=null!==(s=null===(l=this.props)||void 0===l||null===(c=l.campaign)||void 0===c?void 0:c.SubMaps)&&void 0!==s?s:[],y=_.filter((function(t){return t.Id!=p.state.selectedSubmapId})).flatMap((function(t){var e;return(null!==(e=t.SubMapRecords)&&void 0!==e?e:[]).map((function(t){return"".concat(Je.get(t.Classification),"-").concat(t.AreaId)}))}));if(!new Set(y).has(f)){var v=(null!==(u=null===(h=_.filter((function(t){return t.Id==p.state.selectedSubmapId})))||void 0===h||null===(d=h[0])||void 0===d?void 0:d.SubMapRecords)&&void 0!==u?u:[]).map((function(t){return"".concat(Je.get(t.Classification),"-").concat(t.AreaId)})),b=new Set(v);this.setState((function(t){var e=new Map(t.selectedShapes);e.has(f)?e.delete(f):e.set(f,{Classification:g,Id:f,Value:!b.has(f),Name:m});var n=new Set([g]);return 0==e.size&&0==b.size&&(n=new Set(Ke.map((function(t){return t.layer})))),{selectedShapes:e,allowedLayers:n}}),(function(){var t=Array.from(p.state.selectedShapes.values()),e=t.filter((function(t){return 1==t.Value})).map((function(t){return t.Id})),n=t.filter((function(t){return 0==t.Value})).map((function(t){return t.Id}));p.map.setFilter("timm-area-layer-".concat(g,"-remove"),["in",["get","id"],["literal",n]]),p.map.setFilter("timm-area-layer-".concat(g,"-selected"),["in",["get","id"],["literal",e]])}))}}}}},{key:"onShowShapePopup",value:function(t){var e,n,i,o=null===(e=t.features)||void 0===e||null===(n=e[0])||void 0===n||null===(i=n.properties)||void 0===i?void 0:i.id,a=this.getActiveLayer();if(o&&-1!=o.indexOf(a)){this.clearPopup();for(var s=t.features[0].geometry.coordinates.slice();Math.abs(t.lngLat.lng-s[0])>180;)s[0]+=t.lngLat.lng>s[0]?360:-360;var l=t.features[0].properties.home,c=t.features[0].properties.apt,u=t.features[0].properties.name,h=t.lngLat,d=new(r().Popup)({closeButton:!1,closeOnClick:!1}),p="";switch(this.props.campaign.AreaDescription){case"APT ONLY":p="MFDU:".concat(new Intl.NumberFormat("en-US").format(c));break;case"HOME ONLY":p="SFDU:".concat(new Intl.NumberFormat("en-US").format(l));break;case"APT + HOME":p="MFDU:".concat(new Intl.NumberFormat("en-US").format(c)," SFDU:").concat(new Intl.NumberFormat("en-US").format(l),"<br />Total:").concat(new Intl.NumberFormat("en-US").format(c+l))}d.setLngLat(h).setHTML("<h6>".concat(u,"</h6><p>").concat(p,"</p>")).addTo(this.map),this.setState({popup:d})}}},{key:"onHideShapePopup",value:function(){this.state.popup&&(this.state.popup.remove(),this.setState({popup:null}))}},{key:"loadSubmapList",value:function(){var t=this;Se().get("campaign/".concat(this.props.campaign.Id,"/submap")).then((function(e){t.props.campaign.SubMaps=e.data.data.SubMaps,t.forceUpdate()}))}},{key:"onNewSubmap",value:function(){var t,e,n,i,r,o,a,s=(null!==(t=null===(e=this.props)||void 0===e||null===(n=e.campaign)||void 0===n?void 0:n.Id)&&void 0!==t?t:0)+(null!==(i=null===(r=this.props)||void 0===r||null===(o=r.campaign)||void 0===o||null===(a=o.SubMaps)||void 0===a?void 0:a.length)&&void 0!==i?i:0),l={ColorString:Le.ZP.randomColor(s).replace("#",""),CampaignId:this.props.campaign.Id};Le.ZP.publish("showDialog",{view:xe().createElement(Oe,{model:l,registeredTopic:{},registeredEvents:[]}),options:{size:"tiny"}})}},{key:"onEditSubmap",value:function(){var t,e=this;if(this.state.selectedSubmapId){var n=null===(t=this.props.campaign.SubMaps.filter((function(t){return t.Id==e.state.selectedSubmapId})))||void 0===t?void 0:t[0];Le.ZP.publish("showDialog",{view:xe().createElement(Oe,{model:n,registeredTopic:{},registeredEvents:[]}),options:{size:"tiny"}})}}},{key:"onDeleteSubmap",value:function(){var t,e=this;if(this.state.selectedSubmapId){var n=null===(t=this.props.campaign.SubMaps.filter((function(t){return t.Id==e.state.selectedSubmapId})))||void 0===t?void 0:t[0];Se().delete("campaign/".concat(n.CampaignId,"/submap/").concat(n.Id,"/delete")).then((function(){e.setState({activeLayers:new Set,allowedLayers:new Set(["Z3","Z5","PremiumCRoute"]),selectedShapes:new Map,selectedSubmapId:null},(function(){Ke.forEach((function(t){e.map.setFilter("timm-area-layer-".concat(t.layer,"-remove"),["in",["get","id"],["literal",[]]]),e.map.setFilter("timm-area-layer-".concat(t.layer,"-selected"),["in",["get","id"],["literal",[]]])})),e.loadSubmapList(),e.loadCampaignGeojson(),e.clearSelectedShapes()}))}))}}},{key:"onSaveShapesToSubmap",value:function(){var t=this;if(this.state.selectedSubmapId){var e=Array.from(this.state.selectedShapes.values()).map((function(t){return{Classification:t.Classification,Name:t.Name,Value:t.Value}})),n="campaign/".concat(this.props.campaign.Id,"/submap/").concat(this.state.selectedSubmapId,"/merge");Se().post(n,e).then((function(){t.loadSubmapList(),t.loadCampaignGeojson(),t.clearSelectedShapes()}))}}},{key:"onEmptySubmap",value:function(){var t=this;if(this.state.selectedSubmapId){var e="campaign/".concat(this.props.campaign.Id,"/submap/").concat(this.state.selectedSubmapId,"/empty");Se().delete(e).then((function(){t.setState({allowedLayers:new Set(["Z3","Z5","PremiumCRoute"])},(function(){t.loadCampaignGeojson(),t.loadSubmapList(),t.clearSelectedShapes()}))}))}}},{key:"clearSelectedShapes",value:function(){var t=this;this.setState((function(e){var n,i,r,o,a,s,l=null!==(o=null===(a=(null!==(n=null===(i=t.props)||void 0===i||null===(r=i.campaign)||void 0===r?void 0:r.SubMaps)&&void 0!==n?n:[]).filter((function(t){return t.Id==e.selectedSubmapId})))||void 0===a||null===(s=a[0])||void 0===s?void 0:s.SubMapRecords)&&void 0!==o?o:[],c=new Set(Ke.map((function(t){return t.layer})));return l.length>0&&(c=new Set([Je.get(l[0].Classification)])),{selectedShapes:new Map,allowedLayers:c}}),(function(){Ke.forEach((function(e){t.map.setFilter("timm-area-layer-".concat(e.layer,"-remove"),["in",["get","id"],["literal",[]]]),t.map.setFilter("timm-area-layer-".concat(e.layer,"-selected"),["in",["get","id"],["literal",[]]])}))}))}},{key:"onSelectAllScreenShapes",value:function(){var t,e,n,i=this;if(this.state.selectedSubmapId){var r=this.getActiveLayer(),o=this.map.queryRenderedFeatures({layers:["timm-area-layer-".concat(r,"-fill")]}),a=(null!==(t=null===(e=this.props)||void 0===e||null===(n=e.campaign)||void 0===n?void 0:n.SubMaps)&&void 0!==t?t:[]).filter((function(t){return t.Id!=i.state.selectedSubmapId})).flatMap((function(t){var e;return(null!==(e=t.SubMapRecords)&&void 0!==e?e:[]).map((function(t){return"".concat(Je.get(t.Classification),"-").concat(t.AreaId)}))}));a=new Set(a),this.setState((function(t){var e=new Map(t.selectedShapes);o.forEach((function(t){var n,i,o=null===(n=t.properties)||void 0===n?void 0:n.id,s=null===(i=t.properties)||void 0===i?void 0:i.name;o.indexOf("label")>-1||a.has(o)||e.has(o)||e.set(o,{Classification:r,Id:o,Name:s,Value:!0})}));var n=new Set([r]);return{selectedShapes:e,allowedLayers:n}}),(function(){var t=Array.from(i.state.selectedShapes.values()),e=t.filter((function(t){return 1==t.Value})).map((function(t){return t.Id})),n=t.filter((function(t){return 0==t.Value})).map((function(t){return t.Id}));i.map.setFilter("timm-area-layer-".concat(r,"-remove"),["in",["get","id"],["literal",n]]),i.map.setFilter("timm-area-layer-".concat(r,"-selected"),["in",["get","id"],["literal",e]])}))}}},{key:"onSwitchMapStyle",value:function(t){var e=this;this.state.mapReady&&this.setState({mapStyle:t},(function(){if("streets"==t){var n,i=Ue(e.map.getStyle().layers);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.id.startsWith("timm")||e.map.setLayoutProperty(r.id,"visibility","visible")}}catch(t){i.e(t)}finally{i.f()}e.map.setLayoutProperty("timm-google-satellite-tiles-layer","visibility","none")}else{var o,a=Ue(e.map.getStyle().layers);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.id.startsWith("timm")||e.map.setLayoutProperty(s.id,"visibility","none")}}catch(t){a.e(t)}finally{a.f()}e.map.setLayoutProperty("timm-google-satellite-tiles-layer","visibility","visible")}var l,c="streets"==e.state.mapStyle?"satellite":"streets",u="streets"==e.state.mapStyle?"streets":"satellite",h=Ue(e.map.getStyle().layers);try{for(h.s();!(l=h.n()).done;){var d=l.value;d.id.endsWith(c)?e.map.setLayoutProperty(d.id,"visibility","none"):d.id.endsWith(u)&&e.map.setLayoutProperty(d.id,"visibility","visible")}}catch(t){h.e(t)}finally{h.f()}}))}},{key:"clearPopup",value:function(){this.state.searchResultPopup&&this.state.searchResultPopup.remove(),this.state.popup&&this.state.popup.remove()}},{key:"onSearchZip",value:function(t){var e=this;null!=t&&5==t.trim().length&&Se().get("area/zip/".concat(t)).then((function(t){if(t.data.success){var n=[t.data.result.lng,t.data.result.lat];e.map.setCenter(n);var i=t.data.result.name,o=t.data.result.apt,a=t.data.result.home,s="";switch(e.props.campaign.AreaDescription){case"APT ONLY":s="MFDU:".concat(new Intl.NumberFormat("en-US").format(o));break;case"HOME ONLY":s="SFDU:".concat(new Intl.NumberFormat("en-US").format(a));break;case"APT + HOME":s="MFDU:".concat(new Intl.NumberFormat("en-US").format(o)," SFDU:").concat(new Intl.NumberFormat("en-US").format(a),"<br />Total:").concat(new Intl.NumberFormat("en-US").format(o+a))}e.clearPopup();var l=new(r().Popup)({closeOnClick:!1}).setLngLat(n).setHTML("<h6>".concat(i,"</h6><p>").concat(s,"</p>")).addTo(e.map);e.map.getZoom()<10&&(e.map.setZoom(10),e.map.setCenter(n)),e.setState({searchResultPopup:l})}}))}},{key:"onPrint",value:function(){var t=location.href.replace(location.hash,"");window.open("".concat(t,"#print/").concat(this.props.campaign.Id,"/campaign"),"campaign-print")}},{key:"render",value:function(){return xe().createElement("div",{className:"campaign full-container"},xe().createElement("div",{className:"grid-x grid-margin-x medium-margin-collapse",style:{height:"100%"}},xe().createElement("div",{className:"small-8 medium-9 large-10 cell"},this.renderMapbox()),xe().createElement("div",{className:"small-4 medium-3 large-2 cell"},this.renderRightMenu())))}},{key:"renderRightMenu",value:function(){var t,e,n,i=this,r=null!==(t=null===(e=this.props)||void 0===e||null===(n=e.campaign)||void 0===n?void 0:n.SubMaps)&&void 0!==t?t:[];return xe().createElement("div",{className:"grid-y",style:{height:"100%"}},xe().createElement("div",{className:"small-1 cell max-width-100"},xe().createElement("div",{className:"row small-collapse"},xe().createElement("div",{className:"columns small-6"}),xe().createElement("div",{className:"columns small-6"},xe().createElement("button",{className:"button expanded margin-0",onClick:this.onPrint},"Print")),xe().createElement("div",{className:"columns small-12 align-self-middle"},xe().createElement("div",{className:"padding-horizontal-1"},xe().createElement("legend",null,"Classifications"),xe().createElement("div",{className:"button-group stacked-for-small clear"},xe().createElement("div",null,xe().createElement("input",{type:"checkbox",name:"Z3",id:"Z3",onChange:this.onClassificationsChange,checked:this.state.activeLayers.has("Z3")}),xe().createElement("label",{htmlFor:"Z3",className:Ie()("margin-right-1",{"font-bold":this.state.allowedLayers.has("Z3"),"text-gray":!this.state.allowedLayers.has("Z3")})},"3 ZIP")),xe().createElement("div",null,xe().createElement("input",{type:"checkbox",name:"Z5",id:"Z5",onChange:this.onClassificationsChange,checked:this.state.activeLayers.has("Z5")}),xe().createElement("label",{htmlFor:"Z5",className:Ie()("margin-right-1",{"font-bold":this.state.allowedLayers.has("Z5"),"text-gray":!this.state.allowedLayers.has("Z5")})},"5 ZIP")),xe().createElement("div",null,xe().createElement("input",{type:"checkbox",name:"PremiumCRoute",id:"PremiumCRoute",onChange:this.onClassificationsChange,checked:this.state.activeLayers.has("PremiumCRoute")}),xe().createElement("label",{htmlFor:"PremiumCRoute",className:Ie()("margin-right-1",{"font-bold":this.state.allowedLayers.has("PremiumCRoute"),"text-gray":!this.state.allowedLayers.has("PremiumCRoute")})},"CRoute"))))))),xe().createElement("div",{className:"small-10 cell max-width-100 padding-top-1"},xe().createElement("div",{className:"row small-collapse"},xe().createElement("div",{className:"columns small-6"},xe().createElement("button",{className:"button tiny expanded margin-0"},"SubMaps")),xe().createElement("div",{className:"columns small-6"},xe().createElement("button",{className:"button tiny expanded hollow margin-0"},"Address")),xe().createElement("div",{className:"columns small-12"},xe().createElement("div",{className:"button-group no-gaps clear small tiny-button-group"},xe().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0 ",onClick:this.onNewSubmap},"New"),xe().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0 ",onClick:this.onEditSubmap},"Edit"),xe().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0 ",onClick:this.onDeleteSubmap},"Delete"),xe().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0 ",onClick:this.onSaveShapesToSubmap},"Save Shapes"),xe().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0 ",onClick:this.onSelectAllScreenShapes},"Select All Shapes"),xe().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0 ",onClick:this.clearSelectedShapes},"Deselect All Shapes")))),xe().createElement("div",{ref:this.onInitSubMapScrollbar,style:{overflow:"hidden scroll",height:"640px"}},xe().createElement("div",{className:"row"},r.map((function(t,e){var n,r,o,a,s={width:"28px",height:"28px",backgroundColor:"#".concat(t.ColorString)},l=(null!==(n=t.Total)&&void 0!==n?n:0)+(null!==(r=t.TotalAdjustment)&&void 0!==r?r:0),c=(null!==(o=t.Penetration)&&void 0!==o?o:0)+(null!==(a=t.CountAdjustment)&&void 0!==a?a:0),u=l>0?(0,Fe.ceil)(c/l,4):0,h=l.toLocaleString("en-US",{minimumFractionDigits:0}),d=c.toLocaleString("en-US",{minimumFractionDigits:0}),p=u.toLocaleString("en-US",{style:"percent",minimumFractionDigits:2}),f="Total: ".concat(h," Count: ").concat(d," Pen: ").concat(p),m=Ie()("button expanded border-none padding-0 margin-0 text-left",{hollow:i.state.selectedSubmapId!=t.Id});return xe().createElement("div",{style:{cursor:"pointer",marginBottom:"5px"},className:"columns small-12",key:t.Id,title:t.Id,onClick:function(){return i.onSubmapSelect(t)}},xe().createElement("div",{className:m},xe().createElement("div",{className:"grid-x align-middle"},xe().createElement("div",{className:"cell shrink"},xe().createElement("div",{style:s})),xe().createElement("div",{className:"cell auto padding-left-1"},xe().createElement("div",{className:"margin-0 padding-0 font-medium"},"".concat(e+1,". ").concat(t.Name)),xe().createElement("div",{className:"margin-0 padding-0 font-small"},f)))))}))))),xe().createElement("div",{className:"small-1 cell max-width-100"}))}},{key:"renderMapbox",value:function(){var t=this;return xe().createElement("div",{className:"mapbox-wrapper",style:{width:"100%",height:"100%"}},xe().createElement("div",{className:"mapbox-container",ref:this.onInitMap,style:{width:"100%",height:"100%"}}),xe().createElement("div",{className:"map-overlay"},xe().createElement("div",{className:"mapboxgl-ctrl-top-left"},xe().createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group"},xe().createElement("button",{className:"mapboxgl-ctrl-icon mapboxgl-ctrl-img mapboxgl-ctrl-street",onClick:function(){t.onSwitchMapStyle("streets")}}),xe().createElement("button",{className:"mapboxgl-ctrl-icon mapboxgl-ctrl-img mapboxgl-ctrl-satellite",onClick:function(){t.onSwitchMapStyle("satellite")}})))),xe().createElement("div",{className:"map-top-center"}))}}],n&&je(e.prototype,n),s}(xe().Component);$e=Qe,Ze="propTypes",We={campaigin:Ee().object},Ze in $e?Object.defineProperty($e,Ze,{value:We,enumerable:!0,configurable:!0,writable:!0}):$e[Ze]=We},6596:(t,e,n)=>{"use strict";n.d(e,{Z:()=>O});var i=n(6158),r=n.n(i),o=n(7588),a=n.n(o),s=n(1581),l=n.n(s),c=n(2650),u=n(9669),h=n.n(u),d=n(9113),p=n(4184),f=n.n(p),m=(n(381),n(6486)),g=n(5086);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function y(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function v(t,e){return v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},v(t,e)}function b(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?x(t):e}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(s,t);var e,n,i,r,o=(i=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=w(i);if(r){var n=w(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return b(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=o.call(this,t)).onChange=g.TI.bind(x(e)),e.closeDialog=g.gk.bind(x(e)),e.publish=g.nY.bind(x(e)),e.onSave=e.onSave.bind(x(e)),e.onClose=e.onClose.bind(x(e)),e}return e=s,(n=[{key:"onSave",value:function(t){var e=this;t.preventDefault(),t.stopPropagation();var n=this.props.model,i=Object.fromEntries(new FormData(t.target)),r=Object.assign({},n,i),o=(0,c.ZP)(r.ColorString);r.ColorR=o.r,r.ColorG=o.g,r.ColorB=o.b,h().post("campaign/".concat(n.CampaignId,"/").concat(r.SubMapId,"/dmap/edit"),r).then((function(){return e.closeDialog(),g.nY("DMap.Refresh"),Promise.resolve()})).catch((function(){e.setState({error:"opps! something wrong. please contact us!"})}))}},{key:"onClose",value:function(){this.closeDialog()}},{key:"render",value:function(){var t=this.props.model,e=t.Id?"Edit Distribution Map":"New Distribution Map",n=!(!this.state||!this.state.error),i=n?this.state.error:"";return a().createElement("form",{onSubmit:this.onSave},a().createElement("h3",null,e),a().createElement("div",{"data-abide-error":!0,className:"alert callout",style:{display:n?"block":"none"}},a().createElement("p",null,a().createElement("i",{className:"fa fa-exclamation-circle"})," ",i)),a().createElement("div",{className:"row"},a().createElement("div",{className:"small-2 columns"},a().createElement("label",null,"Color",a().createElement("input",{type:"color",className:"padding-0",onChange:this.onChange,name:"ColorString",defaultValue:"#".concat(t.ColorString),required:!0}),a().createElement("span",{className:"form-error"},"it is required."))),a().createElement("div",{className:"small-10 columns"},a().createElement("label",null,"Name",a().createElement("input",{onChange:this.onChange,name:"Name",type:"text",defaultValue:t.Name,required:!0}),a().createElement("span",{className:"form-error"},"it is required.")))),a().createElement("div",{className:"row"},a().createElement("div",{className:"small-12 columns"},a().createElement("label",null,"Submap",a().createElement("select",{name:"SubMapId",disabled:t.SubMapId,required:!0},this.props.model.SubMaps.map((function(e){return a().createElement("option",{key:e.Id,value:e.Id,selected:e.Id==t.SubMapId},e.Name)}))),a().createElement("span",{className:"form-error"},"it is required.")))),a().createElement("div",{className:"row"},a().createElement("div",{className:"small-6 columns"},a().createElement("label",null,"Adjust Total",a().createElement("input",{onChange:this.onChange,name:"TotalAdjustment",type:"number",defaultValue:t.TotalAdjustment}))),a().createElement("div",{className:"small-6 columns"},a().createElement("label",null,"Adjust Count",a().createElement("input",{onChange:this.onChange,name:"CountAdjustment",type:"number",defaultValue:t.CountAdjustment})))),a().createElement("div",{className:"small-12 columns"},a().createElement("div",{className:"button-group float-right"},a().createElement("button",{type:"submit",className:"success button"},"Save"),a().createElement("a",{href:"javascript:;",className:"button",onClick:this.onClose},"Cancel"))),a().createElement("button",{onClick:this.onClose,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},a().createElement("span",{"aria-hidden":"true"},"×")))}}])&&y(e.prototype,n),s}(a().Component);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function T(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function C(t,e){return C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},C(t,e)}function I(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?L(t):e}function L(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var A,P,z,N=new d.Z("views:campaign"),R=[{layer:"PremiumCRoute",zoom:[0,24],fontScale:[.75,.75],settings:[{id:"boundaries",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{streets:{"line-color":"hsl(250, 76%, 67%)","line-width":{base:1.5,stops:[[5,.25],[18,6]]}},satellite:{"line-color":"hsl(250, 76%, 90%)","line-width":{base:1.5,stops:[[5,.25],[18,6]]}}}}]},{layer:"Z5",zoom:[0,24],fontScale:[1,.75],settings:[{id:"boundaries",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{streets:{"line-color":"hsl(215, 36%, 59%)","line-width":{base:1.5,stops:[[5,.5],[18,26]]}},satellite:{"line-color":"hsl(215, 36%, 90%)","line-width":{base:1.5,stops:[[5,.5],[18,26]]}}}}]},{layer:"Z3",zoom:[0,24],fontScale:[1.25,1],settings:[{id:"boundaries",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{streets:{"line-color":"hsl(215, 20%, 42%)","line-width":{base:1.5,stops:[[5,1],[18,32]]}},satellite:{"line-color":"hsl(215, 20%, 90%)","line-width":{base:1.5,stops:[[5,1],[18,32]]}}}}]}],O=(new Map([[0,"Z3"],[1,"Z5"],[15,"PremiumCRoute"]]),function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(l,t);var e,n,i,o,s=(i=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(i);if(o){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return I(this,t)});function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this,t)).state={mapInited:!1,mapReady:!1,activeLayers:new Set,allowedLayers:new Set(["Z3","Z5","PremiumCRoute"]),selectedShapes:new Map,selectedSubmapId:null,campaginSource:{features:[]},mapStyle:"streets"},e.onInitMenuScrollbar=e.onInitMenuScrollbar.bind(L(e)),e.onInitMap=e.onInitMap.bind(L(e)),e.onMapLoad=e.onMapLoad.bind(L(e)),e.onSwitchMapStyle=e.onSwitchMapStyle.bind(L(e)),e.loadMapList=e.loadMapList.bind(L(e)),e.loadCampaignGeojson=e.loadCampaignGeojson.bind(L(e)),e.onRefresh=e.onRefresh.bind(L(e)),e.onSubmapSelect=e.onSubmapSelect.bind(L(e)),e.onDMapSelect=e.onDMapSelect.bind(L(e)),e.onShapeSelect=e.onShapeSelect.bind(L(e)),e.onShowShapePopup=e.onShowShapePopup.bind(L(e)),e.onHideShapePopup=e.onHideShapePopup.bind(L(e)),e.onNewDMap=e.onNewDMap.bind(L(e)),e.onEditDMap=e.onEditDMap.bind(L(e)),e.onDeleteDMap=e.onDeleteDMap.bind(L(e)),e.onSaveShapesToDMap=e.onSaveShapesToDMap.bind(L(e)),e.onSearchZip=e.onSearchZip.bind(L(e)),e.clearPopup=e.clearPopup.bind(L(e)),e.subscribe=g.ZP.subscribe.bind(L(e)),e.doUnsubscribe=g.ZP.doUnsubscribe.bind(L(e)),e.subscribe("DMap.Refresh",(function(){e.onRefresh()})),e.subscribe("Search.Zip",e.onSearchZip),e}return e=l,n=[{key:"componentWillUnmount",value:function(){this.doUnsubscribe()}},{key:"onInitMenuScrollbar",value:function(t){if(t){var e=$(t).parent().height(),n=$(t).prev().height();$(t).css({height:"".concat(e-n,"px")})}}},{key:"onInitMap",value:function(t){var e=this;t&&this.setState((function(n){if(0==n.mapInited){var i,o,a;r().accessToken="pk.eyJ1IjoiZ2hvc3R1eiIsImEiOiJjaXczc2tmc3cwMDEyMm9tb29pdDRwOXUzIn0.KPSiOO6DWTY59x1zHdvYSA";var s=null!==(i=e.props.campaign.ZoomLevel)&&void 0!==i?i:8,l=[null!==(o=e.props.campaign.Longitude)&&void 0!==o?o:-73.987378,null!==(a=e.props.campaign.Latitude)&&void 0!==a?a:40.744556];e.map=new(r().Map)({container:t,zoom:s,maxZoom:20,center:l,style:"mapbox://styles/mapbox/outdoors-v11"}),e.map.on("load",e.onMapLoad),N.info("mapbox inited")}return{mapInited:!0}}))}},{key:"loadMapList",value:function(){var t=this;h().get("campaign/".concat(this.props.campaign.Id,"/dmap")).then((function(e){t.props.campaign.SubMaps=e.data.data.SubMaps,t.forceUpdate()}))}},{key:"onMapLoad",value:function(){var t=this;this.map.addSource("google-road-tiles",{type:"raster",tiles:["//mt0.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt2.google.com/vt/lyrs=m&x={x}&y={y}&z={z}","//mt3.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"],tileSize:256}),this.map.addSource("google-satellite-tiles",{type:"raster",tiles:["//mt0.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt2.google.com/vt/lyrs=y&x={x}&y={y}&z={z}","//mt3.google.com/vt/lyrs=y&x={x}&y={y}&z={z}"],tileSize:256}),this.map.addLayer({id:"timm-google-road-tiles-layer",type:"raster",source:"google-road-tiles",minzoom:0,maxzoom:21,layout:{visibility:"none"}},"land"),this.map.addLayer({id:"timm-google-satellite-tiles-layer",type:"raster",source:"google-satellite-tiles",minzoom:0,maxzoom:21,layout:{visibility:"streets"==this.state.mapStyle?"none":"visible"}},"land");var e,n=this.map.getStyle().layers,i=null,r=T(n);try{for(r.s();!(e=r.n()).done;){var o=e.value;N.info(o.id),null==i&&o.id.indexOf("label")>-1&&(i=o.id)}}catch(t){r.e(t)}finally{r.f()}this.map.loadImage("./images/remove_pattern.png",(function(e,n){t.map.addImage("remove_pattern",n),t.setState({mapLabelLayer:i},(function(){t.loadCampaignGeojson()}))}))}},{key:"onSwitchMapStyle",value:function(t){var e=this;this.state.mapReady&&this.setState({mapStyle:t},(function(){if("streets"==t){var n,i=T(e.map.getStyle().layers);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.id.startsWith("timm")||e.map.setLayoutProperty(r.id,"visibility","visible")}}catch(t){i.e(t)}finally{i.f()}e.map.setLayoutProperty("timm-google-satellite-tiles-layer","visibility","none")}else{var o,a=T(e.map.getStyle().layers);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.id.startsWith("timm")||e.map.setLayoutProperty(s.id,"visibility","none")}}catch(t){a.e(t)}finally{a.f()}e.map.setLayoutProperty("timm-google-satellite-tiles-layer","visibility","visible")}var l,c="streets"==e.state.mapStyle?"satellite":"streets",u="streets"==e.state.mapStyle?"streets":"satellite",h=T(e.map.getStyle().layers);try{for(h.s();!(l=h.n()).done;){var d=l.value;d.id.endsWith(c)?e.map.setLayoutProperty(d.id,"visibility","none"):d.id.endsWith(u)&&e.map.setLayoutProperty(d.id,"visibility","visible")}}catch(t){h.e(t)}finally{h.f()}}))}},{key:"loadCampaignGeojson",value:function(){var t=this,e=this.state.mapLabelLayer;h().get("campaign/".concat(this.props.campaign.Id,"/dmap/geojson")).then((function(n){if(1==t.state.mapReady)t.map.getSource("map-source").setData(n.data);else{var i;t.map.addSource("map-source",{type:"geojson",data:n.data}),t.map.addLayer({id:"timm-dmap-layer-fill",type:"fill",source:"map-source",layout:{},paint:{"fill-color":["get","color"],"fill-opacity":.5},filter:["==",["get","type"],"dmap"]},e),t.map.addLayer({id:"timm-area-layer-selected",type:"fill",source:"map-source",layout:{visibility:"none"},paint:{"fill-color":"#000000","fill-opacity":.5},filter:["==","id",""]},e),t.map.addLayer({id:"timm-area-layer-remove",type:"fill",source:"map-source",layout:{visibility:"none"},paint:{"fill-pattern":"remove_pattern"},filter:["==","id",""]},e);var r=t.state.mapStyle,o=["streets","satellite"];R.forEach((function(n){n.settings.forEach((function(i){o.forEach((function(o){var a=Object.assign({},i.layout,{visibility:o==r?"visible":"none"});t.map.addLayer({id:"timm-area-layer-".concat(n.layer,"-").concat(i.id,"-").concat(o),type:i.type,source:"map-source",layout:a,paint:i.paint[o],filter:["all",["==",["get","type"],"area"],["==",["get","classification"],n.layer]]},e)}))}))})),o.forEach((function(e){var n="",i="";switch(t.props.campaign.AreaDescription){case"APT ONLY":n=["concat","MFDU:",["number-format",["get","apt"],{locale:"en-US"}]],i="";break;case"HOME ONLY":n=["concat","SFDU:",["number-format",["get","home"],{locale:"en-US"}]],i="";break;case"APT + HOME":n=["concat","SFDU:",["number-format",["get","home"],{locale:"en-US"}]," ","MFDU:",["number-format",["get","apt"],{locale:"en-US"}]],i=["concat","Total:",["number-format",["+",["get","home"],["get","apt"]],{locale:"en-US"}]]}t.map.addLayer({id:"timm-area-layer-label-".concat(e),type:"symbol",source:"map-source",layout:{visibility:e==r?"visible":"none","text-max-width":200,"text-field":["format",["get","name"],{"font-scale":1},"\n",n,{"font-scale":.75},"\n",i,{"font-scale":.75}]},paint:"streets"==e?{"text-color":"black","text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(255, 255, 255, 0.75)",3,"rgb(255, 255, 255)"],"text-halo-width":1}:{"text-color":"white","text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(0, 0, 0, 0.75)",3,"rgb(0, 0, 0)"],"text-halo-width":1},filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"area"]]}),t.map.addLayer({id:"timm-dmap-layer-label-".concat(e),type:"symbol",source:"map-source",layout:{"text-max-width":200,"text-field":["format",["get","name"],{"font-scale":1.25},"\n",{},"Total: ",{"font-scale":1},["number-format",["get","total"],{locale:"en-US","min-fraction-digits":0}],{"font-scale":1}," Count: ",{"font-scale":1},["number-format",["get","count"],{locale:"en-US","min-fraction-digits":0}],{"font-scale":1}," Pen: ",{"font-scale":1},["get","pen"],{"font-scale":1}]},paint:"streets"==e?{"text-color":"black","text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(255, 255, 255, 0.75)",3,"rgb(255, 255, 255)"],"text-halo-width":1}:{"text-color":"white","text-halo-color":["interpolate",["linear"],["zoom"],2,"rgba(0, 0, 0, 0.75)",3,"rgb(0, 0, 0)"],"text-halo-width":1},filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"dmap"]]})})),t.map.addLayer({id:"timm-dmap-layer-intersection",type:"line",source:"map-source",layout:{},paint:{"line-color":"black","line-width":2,"line-dasharray":[2,1]},filter:["==",["get","type"],"dmap-intersection"]},e),t.map.addLayer({id:"timm-submap-layer-line",type:"line",source:"map-source",layout:{},paint:{"line-color":["get","color"],"line-width":6},filter:["==",["get","type"],"submap"]},e),t.map.addLayer({id:"timm-submap-layer-highlight",type:"line",source:"map-source",layout:{},paint:{"line-width":8},filter:["==",["get","sid"],""]},e),t.map.addLayer({id:"timm-area-layer-fill",type:"fill",source:"map-source",paint:{"fill-color":"white","fill-opacity":0},filter:["==",["get","type"],"area"]},e),t.map.on("click","timm-area-layer-fill",t.onShapeSelect),t.map.off("contextmenu","timm-area-layer-fill",t.onShowShapePopup),t.map.off("mousemove","timm-area-layer-fill",t.onHideShapePopup),t.map.on("contextmenu","timm-area-layer-fill",t.onShowShapePopup),t.map.on("mousemove","timm-area-layer-fill",t.onHideShapePopup);var a=(null!==(i=n.data.features)&&void 0!==i?i:[]).filter((function(t){var e;return"submap"==(null===(e=t.properties)||void 0===e?void 0:e.type)})).reduce((function(t,e){return[t[0]?Math.min(t[0],e.bbox[0]):e.bbox[0],t[1]?Math.min(t[1],e.bbox[1]):e.bbox[1],t[2]?Math.max(t[2],e.bbox[2]):e.bbox[2],t[3]?Math.max(t[3],e.bbox[3]):e.bbox[3]]}),[null,null,null,null]);t.map.fitBounds([[a[0],a[1]],[a[2],a[3]]])}t.setState({mapSource:n.data,mapReady:!0},(function(){}))}))}},{key:"onRefresh",value:function(){var t=this;this.loadCampaignGeojson(),this.loadMapList(),this.setState({selectedShapes:new Map},(function(){t.map.setFilter("timm-area-layer-remove",["==","vid",""]),t.map.setFilter("timm-area-layer-selected",["==","vid",""])}))}},{key:"onSubmapSelect",value:function(t){var e=this;return this.state.mapReady?this.state.selectedSubmapId==t.Id?Promise.resolve():new Promise((function(n){e.setState((function(n){var i,r=null===(i=n.mapSource.features.filter((function(e){return e.id=="submap-".concat(t.Id)})))||void 0===i?void 0:i[0];return r&&e.map.fitBounds([[r.bbox[0],r.bbox[1]],[r.bbox[2],r.bbox[3]]]),{selectedSubmapId:t.Id,selectedDMapId:null}}),(function(){var i=(0,c.ZP)("#".concat(t.ColorString)).darker(2).toString();return e.map.setLayoutProperty("timm-submap-layer-highlight","visibility","none"),e.map.setFilter("timm-submap-layer-highlight",["all",["==","sid",t.Id],["==","type","submap"]]),e.map.setPaintProperty("timm-submap-layer-highlight","line-color",i),e.map.setLayoutProperty("timm-submap-layer-highlight","visibility","visible"),n()}))})):Promise.resolve()}},{key:"onDMapSelect",value:function(t){var e,n=this;if(!this.state.mapReady)return Promise.resolve();if(this.state.selectedDMapId==t.Id)return Promise.resolve();var i=null===(e=this.props.campaign.SubMaps.filter((function(e){return e.Id==t.SubMapId})))||void 0===e?void 0:e[0];this.onSubmapSelect(i).then((function(){n.setState({selectedDMapId:t.Id},(function(){n.map.setPaintProperty("timm-area-layer-selected","fill-color",(0,c.ZP)("#".concat(t.ColorString)).toString())}))}))}},{key:"onShapeSelect",value:function(t){var e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g=this;if(this.state.selectedSubmapId&&this.state.selectedDMapId){var _=this.state.selectedSubmapId,y=this.state.selectedDMapId,v=null===(e=t.features)||void 0===e||null===(n=e[0])||void 0===n||null===(i=n.properties)||void 0===i?void 0:i.oid,b=null===(r=t.features)||void 0===r||null===(o=r[0])||void 0===o||null===(a=o.properties)||void 0===a?void 0:a.vid,x=null===(s=t.features)||void 0===s||null===(l=s[0])||void 0===l||null===(c=l.properties)||void 0===c?void 0:c.sid,w=null===(u=t.features)||void 0===u||null===(h=u[0])||void 0===h||null===(d=h.properties)||void 0===d?void 0:d.classification;if(x==_){var E=null!==(p=null===(f=this.props)||void 0===f||null===(m=f.campaign)||void 0===m?void 0:m.SubMaps)&&void 0!==p?p:[],M=E.filter((function(t){return t.Id==_})).flatMap((function(t){var e;return null!==(e=t.DMaps)&&void 0!==e?e:[]})).filter((function(t){return t.Id!=y})).flatMap((function(t){var e;return null!==(e=t.DMapRecords)&&void 0!==e?e:[]})).map((function(t){return t.AreaId}));if(!new Set(M).has(v)){var T=E.filter((function(t){return t.Id==_})).flatMap((function(t){var e;return null!==(e=t.DMaps)&&void 0!==e?e:[]})).filter((function(t){return t.Id==y})).flatMap((function(t){var e;return null!==(e=t.DMapRecords)&&void 0!==e?e:[]})).map((function(t){return t.AreaId}));T=new Set(T),this.setState((function(t){var e=new Map(t.selectedShapes);return e.has(b)?e.delete(b):e.set(b,{Classification:w,Id:v,Value:!T.has(v),vid:b}),{selectedShapes:e}}),(function(){var t=Array.from(g.state.selectedShapes.values()),e=t.filter((function(t){return 1==t.Value})).map((function(t){return t.vid})),n=t.filter((function(t){return 0==t.Value})).map((function(t){return t.vid}));g.map.setLayoutProperty("timm-area-layer-remove","visibility","none"),g.map.setLayoutProperty("timm-area-layer-selected","visibility","none"),g.map.setFilter("timm-area-layer-remove",["in",["get","vid"],["literal",n]]),g.map.setFilter("timm-area-layer-selected",["in",["get","vid"],["literal",e]]),g.map.setLayoutProperty("timm-area-layer-remove","visibility","visible"),g.map.setLayoutProperty("timm-area-layer-selected","visibility","visible")}))}}}}},{key:"onShowShapePopup",value:function(t){this.clearPopup();for(var e=t.features[0].geometry.coordinates.slice();Math.abs(t.lngLat.lng-e[0])>180;)e[0]+=t.lngLat.lng>e[0]?360:-360;var n=t.features[0].properties.home,i=t.features[0].properties.apt,o=t.features[0].properties.name,a=t.lngLat,s=new(r().Popup)({closeButton:!1,closeOnClick:!1}),l="";switch(this.props.campaign.AreaDescription){case"APT ONLY":l="MFDU:".concat(new Intl.NumberFormat("en-US").format(i));break;case"HOME ONLY":l="SFDU:".concat(new Intl.NumberFormat("en-US").format(n));break;case"APT + HOME":l="MFDU:".concat(new Intl.NumberFormat("en-US").format(i)," SFDU:").concat(new Intl.NumberFormat("en-US").format(n),"<br />Total:").concat(new Intl.NumberFormat("en-US").format(i+n))}s.setLngLat(a).setHTML("<h6>".concat(o,"</h6><p>").concat(l,"</p>")).addTo(this.map),this.setState({popup:s})}},{key:"onHideShapePopup",value:function(){this.state.popup&&(this.state.popup.remove(),this.setState({popup:null}))}},{key:"onNewDMap",value:function(){var t,e,n,i,r,o,s,l,c,u=null===(t=this.props)||void 0===t?void 0:t.campaign.SubMaps.map((function(t){return{Id:t.Id,Name:t.Name}})),h=null===(e=this.props)||void 0===e||null===(n=e.campaign)||void 0===n?void 0:n.SubMaps.flatMap((function(t){return t.DMaps})).length,d=null!==(i=(null!==(r=null===(o=this.props)||void 0===o||null===(s=o.campaign)||void 0===s?void 0:s.Id)&&void 0!==r?r:0)+h)&&void 0!==i?i:0,p=g.ZP.randomColor(d).replace("#",""),f={CampaignId:null===(l=this.props)||void 0===l||null===(c=l.campaign)||void 0===c?void 0:c.Id,ColorString:p,SubMaps:u};g.ZP.publish("showDialog",{view:a().createElement(E,{model:f,registeredTopic:{},registeredEvents:[]}),options:{size:"tiny"}})}},{key:"onEditDMap",value:function(){var t,e,n,i,r=this;if(this.state.selectedDMapId){var o=null===(t=this.props)||void 0===t?void 0:t.campaign.SubMaps.map((function(t){return{Id:t.Id,Name:t.Name}})),s=null===(e=this.props.campaign.SubMaps.flatMap((function(t){return t.DMaps})).filter((function(t){return t.Id==r.state.selectedDMapId})))||void 0===e?void 0:e[0],l={SubMaps:o,CampaignId:null===(n=this.props)||void 0===n||null===(i=n.campaign)||void 0===i?void 0:i.Id,Name:s.Name,ColorString:s.ColorString,SubMapId:s.SubMapId,Id:this.state.selectedDMapId};g.ZP.publish("showDialog",{view:a().createElement(E,{model:l,registeredTopic:{},registeredEvents:[]}),options:{size:"tiny"}})}}},{key:"onDeleteDMap",value:function(){var t,e=this;if(this.state.selectedDMapId){var n=null===(t=this.props.campaign.SubMaps.flatMap((function(t){return t.DMaps})).filter((function(t){return t.Id==e.state.selectedDMapId})))||void 0===t?void 0:t[0];h().delete("campaign/".concat(this.props.campaign.Id,"/dmap/").concat(n.Id,"/delete")).then((function(){e.onRefresh()}))}}},{key:"onSaveShapesToDMap",value:function(){var t=this;if(this.state.selectedDMapId&&0!=this.state.selectedShapes.size){var e=Array.from(this.state.selectedShapes.values()).map((function(t){return{Classification:t.Classification,Id:t.Id,Value:t.Value}})),n="campaign/".concat(this.props.campaign.Id,"/dmap/").concat(this.state.selectedDMapId,"/merge");h().post(n,e).then((function(){t.onRefresh()}))}}},{key:"onSearchZip",value:function(t){var e=this;null!=t&&5==t.trim().length&&h().get("area/zip/".concat(t)).then((function(t){if(t.data.success){var n=[t.data.result.lng,t.data.result.lat];e.map.setCenter(n);var i=t.data.result.name,o=t.data.result.apt,a=t.data.result.home,s="";switch(e.props.campaign.AreaDescription){case"APT ONLY":s="MFDU:".concat(new Intl.NumberFormat("en-US").format(o));break;case"HOME ONLY":s="SFDU:".concat(new Intl.NumberFormat("en-US").format(a));break;case"APT + HOME":s="MFDU:".concat(new Intl.NumberFormat("en-US").format(o)," SFDU:").concat(new Intl.NumberFormat("en-US").format(a),"<br />Total:").concat(new Intl.NumberFormat("en-US").format(o+a))}e.clearPopup();var l=new(r().Popup)({closeOnClick:!1}).setLngLat(n).setHTML("<h6>".concat(i,"</h6><p>").concat(s,"</p>")).addTo(e.map);e.map.getZoom()<10&&(e.map.setZoom(10),e.map.setCenter(n)),e.setState({searchResultPopup:l})}}))}},{key:"clearPopup",value:function(){this.state.searchResultPopup&&this.state.searchResultPopup.remove(),this.state.popup&&this.state.popup.remove()}},{key:"render",value:function(){return a().createElement("div",{className:"dmap full-container"},a().createElement("div",{className:"grid-x grid-margin-x medium-margin-collapse",style:{height:"100%"}},a().createElement("div",{className:"small-10 cell"},this.renderMapbox()),a().createElement("div",{className:"small-2 cell"},this.renderRightMenu())))}},{key:"renderRightMenu",value:function(){var t,e,n,i=this,r=null!==(t=null===(e=this.props)||void 0===e||null===(n=e.campaign)||void 0===n?void 0:n.SubMaps)&&void 0!==t?t:[];return a().createElement("div",{className:"grid-y",style:{height:"100%"}},a().createElement("div",{className:"small-11 cell max-width-100"},a().createElement("div",{className:"row small-collapse"},a().createElement("div",{className:"columns small-12"},a().createElement("button",{className:"button expanded margin-0"},"Distribution Maps")),a().createElement("div",{className:"columns small-12"},a().createElement("div",{className:"button-group no-gaps clear small tiny-button-group margin-top-1"},a().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0",onClick:this.onNewDMap},"New"),a().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0",onClick:this.onEditDMap},"Edit"),a().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0",onClick:this.onDeleteDMap},"Delete"),a().createElement("div",{className:"button padding-horizontal-1 padding-vertical-0",onClick:this.onSaveShapesToDMap},"Save Shapes")))),a().createElement("div",{ref:this.onInitMenuScrollbar,style:{overflow:"hidden scroll",height:"640px"}},a().createElement("div",{className:"row"},r.flatMap((function(t,e){var n,r,o,s,l={width:"28px",height:"28px",backgroundColor:"#".concat(t.ColorString)},c=(null!==(n=t.Total)&&void 0!==n?n:0)+(null!==(r=t.TotalAdjustment)&&void 0!==r?r:0),u=(null!==(o=t.Penetration)&&void 0!==o?o:0)+(null!==(s=t.CountAdjustment)&&void 0!==s?s:0),h=c>0?(0,m.ceil)(u/c,4):0,d=c.toLocaleString("en-US",{minimumFractionDigits:0}),p=u.toLocaleString("en-US",{minimumFractionDigits:0}),g=h.toLocaleString("en-US",{style:"percent",minimumFractionDigits:2}),_="Total: ".concat(d," Count: ").concat(p," Pen: ").concat(g),y=f()("button expanded border-none padding-0 margin-0 text-left",{hollow:i.state.selectedSubmapId!=t.Id}),v=[a().createElement("div",{style:{cursor:"pointer",marginBottom:"5px"},className:"columns small-12",key:t.Id,title:t.Id,onClick:function(){return i.onSubmapSelect(t)}},a().createElement("div",{className:y},a().createElement("div",{className:"grid-x align-middle"},a().createElement("div",{className:"cell shrink"},a().createElement("div",{style:l})),a().createElement("div",{className:"cell auto padding-left-1"},a().createElement("div",{className:"margin-0 padding-0 font-medium"},"".concat(e+1,". ").concat(t.Name)),a().createElement("div",{className:"margin-0 padding-0 font-small"},_)))))];return t.DMaps.forEach((function(e){var n,r,o,s,l={width:"28px",height:"28px",backgroundColor:"#".concat(e.ColorString)},c=(null!==(n=e.Total)&&void 0!==n?n:0)+(null!==(r=e.TotalAdjustment)&&void 0!==r?r:0),u=(null!==(o=e.Penetration)&&void 0!==o?o:0)+(null!==(s=e.CountAdjustment)&&void 0!==s?s:0),h=c>0?(0,m.ceil)(u/c,4):0,d=c.toLocaleString("en-US",{minimumFractionDigits:0}),p=u.toLocaleString("en-US",{minimumFractionDigits:0}),g=h.toLocaleString("en-US",{style:"percent",minimumFractionDigits:2}),_="Total: ".concat(d," Count: ").concat(p," Pen: ").concat(g),y=f()("button secondary expanded border-none padding-0 margin-0 text-left",{hollow:i.state.selectedDMapId!=e.Id});v.push(a().createElement("div",{style:{cursor:"pointer",marginBottom:"5px"},className:"columns small-12 padding-left-2",key:"".concat(t.Id,"-").concat(e.Id),title:e.Id,onClick:function(){return i.onDMapSelect(e)}},a().createElement("div",{className:y},a().createElement("div",{className:"grid-x align-middle"},a().createElement("div",{className:"cell shrink"},a().createElement("div",{style:l})),a().createElement("div",{className:"cell auto padding-left-1"},a().createElement("div",{className:"margin-0 padding-0 font-medium"},e.Name),a().createElement("div",{className:"margin-0 padding-0 font-small"},_))))))})),v}))))),a().createElement("div",{className:"small-1 cell max-width-100"}))}},{key:"renderMapbox",value:function(){var t=this;return a().createElement("div",{className:"mapbox-wrapper",style:{width:"100%",height:"100%"}},a().createElement("div",{className:"mapbox-container",ref:this.onInitMap,style:{width:"100%",height:"100%"}}),a().createElement("div",{className:"map-overlay"},a().createElement("div",{className:"mapboxgl-ctrl-top-left"},a().createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group"},a().createElement("button",{className:"mapboxgl-ctrl-icon mapboxgl-ctrl-img mapboxgl-ctrl-street",onClick:function(){t.onSwitchMapStyle("streets")}}),a().createElement("button",{className:"mapboxgl-ctrl-icon mapboxgl-ctrl-img mapboxgl-ctrl-satellite",onClick:function(){t.onSwitchMapStyle("satellite")}})))),a().createElement("div",{className:"map-top-center"}))}}],n&&k(e.prototype,n),l}(a().Component));A=O,P="propTypes",z={campaigin:l().object},P in A?Object.defineProperty(A,P,{value:z,enumerable:!0,configurable:!0,writable:!0}):A[P]=z},7981:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(3609),r=n.n(i),o=n(6486),a=(n(8573),window.GoogleMap),s=window.GoogleItems||[];const l={getGoogleMap:function(){return a},getGoogleItems:function(){return s},showMap:function(){r()("#google-map-wrapper").css({visibility:"visible"}),google.maps.event.trigger(a,"resize")},hideMap:function(){r()("#google-map-wrapper").css({visibility:"hidden"}),google.maps.event.trigger(a,"resize")},setMapHeight:function(t){r()("#google-map-wrapper").height(t),google.maps.event.trigger(a,"resize")},componentWillUnmount:function(){console.log("map base clearMap");try{(0,o.each)(s,(function(t){t&&t.setMap&&t.setMap(null)})),google.maps.event.clearInstanceListeners(a)}catch(t){console.log("google map clear error",t)}r()("#google-map-wrapper").css({visibility:"hidden"})},componentDidMount:function(){console.log("init google map");var t=this.state.mapType&&google.maps.MapTypeId[this.state.mapType]?google.maps.MapTypeId[this.state.mapType]:google.maps.MapTypeId.ROADMAP,e=!!(0,o.has)(this.state,"disableDefaultUI")&&this.state.disableDefaultUI,n=!(0,o.has)(this.state,"scrollwheel")||this.state.scrollwheel,i=!!(0,o.has)(this.state,"disableDoubleClickZoom")&&this.state.disableDoubleClickZoom;this.state.mapStyle?r()("#google-map-wrapper").css(this.state.mapStyle):r()("#google-map-wrapper").css({visibility:"visible",position:"",width:"",height:"",left:"",top:"",right:"",bottom:""}),a?(a.setMapTypeId(t),a.setOptions({disableDefaultUI:e,streetViewControl:!1,scrollwheel:n,disableDoubleClickZoom:i,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP}})):a=new google.maps.Map(r()("#google-map")[0],{center:new google.maps.LatLng(40.744556,-73.987378),zoom:18,disableDefaultUI:e,streetViewControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},scrollwheel:n,disableDoubleClickZoom:i,mapTypeId:t}),google.maps.event.trigger(a,"resize")}}},2316:(t,e,n)=>{var i,r,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g,i=[n(1311),n(3609),e],r=function(t,e,n){o.Backbone=function(t,e,n,i){var r=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=i,e.noConflict=function(){return t.Backbone=r,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,i){n.each(e,(function(e,r){n[r]&&(t.prototype[r]=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,r){return n[e](this[i],s(t,this),r)};case 4:return function(t,r,o){return n[e](this[i],s(t,this),r,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}}(e,r,i))}))},s=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?l(t):n.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},u=/\s+/,h=function(t,e,i,r,o){var a,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(a=n.keys(i);s<a.length;s++)e=h(t,e,a[s],i[a[s]],o)}else if(i&&u.test(i))for(a=i.split(u);s<a.length;s++)e=t(e,a[s],r,o);else e=t(e,i,r,o);return e};c.on=function(t,e,n){return d(this,t,e,n)};var d=function(t,e,n,i,r){return t._events=h(p,t._events||{},e,n,{context:i,ctx:t,listening:r}),r&&((t._listeners||(t._listeners={}))[r.id]=r),t};c.listenTo=function(t,e,i){if(!t)return this;var r=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[r];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[r]={obj:t,objId:r,id:s,listeningTo:o,count:0}}return d(t,e,i,this,a),this};var p=function(t,e,n,i){if(n){var r=t[e]||(t[e]=[]),o=i.context,a=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:o,ctx:o||a,listening:s})}return t};c.off=function(t,e,n){return this._events?(this._events=h(f,this._events,t,e,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(t,e,i){var r=this._listeningTo;if(!r)return this;for(var o=t?[t._listenId]:n.keys(r),a=0;a<o.length;a++){var s=r[o[a]];if(!s)break;s.obj.off(e,i,this)}return this};var f=function(t,e,i,r){if(t){var o,a=0,s=r.context,l=r.listeners;if(e||i||s){for(var c=e?[e]:n.keys(t);a<c.length;a++){var u=t[e=c[a]];if(!u)break;for(var h=[],d=0;d<u.length;d++){var p=u[d];i&&i!==p.callback&&i!==p.callback._callback||s&&s!==p.context?h.push(p):(o=p.listening)&&0==--o.count&&(delete l[o.id],delete o.listeningTo[o.objId])}h.length?t[e]=h:delete t[e]}return t}for(var f=n.keys(l);a<f.length;a++)delete l[(o=l[f[a]]).id],delete o.listeningTo[o.objId]}};c.once=function(t,e,i){var r=h(m,{},t,e,n.bind(this.off,this));return"string"==typeof t&&null==i&&(e=void 0),this.on(r,e,i)},c.listenToOnce=function(t,e,i){var r=h(m,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,r)};var m=function(t,e,i,r){if(i){var o=t[e]=n.once((function(){r(e,o),i.apply(this,arguments)}));o._callback=i}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return h(g,this._events,t,void 0,n),this};var g=function(t,e,n,i){if(t){var r=t[e],o=t.all;r&&o&&(o=o.slice()),r&&_(r,i),o&&_(o,[e].concat(i))}return t},_=function(t,e){var n,i=-1,r=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e);return}};c.bind=c.on,c.unbind=c.off,n.extend(e,c);var y=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var r;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,a=i.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,h=this._previousAttributes;for(var d in r)e=r[d],n.isEqual(c[d],e)||s.push(d),n.isEqual(h[d],e)?delete u[d]:u[d]=e,o?delete c[d]:c[d]=e;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=i);for(var p=0;p<s.length;p++)this.trigger("change:"+s[p],this,c[s[p]],i)}if(l)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var o=t[r];n.isEqual(e[r],o)||(i[r]=o)}return!!n.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var r=t.parse?e.parse(n,t):n;if(!e.set(r,t))return!1;i&&i.call(t.context,e,n,t),e.trigger("sync",e,n,t)},O(this,t),this.sync("read",this,t)},save:function(t,e,i){var r;null==t||"object"==typeof t?(r=t,i=e):(r={})[t]=e;var o=(i=n.extend({validate:!0,parse:!0},i)).wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var a=this,s=i.success,l=this.attributes;i.success=function(t){a.attributes=l;var e=i.parse?a.parse(t,i):t;if(o&&(e=n.extend({},r,e)),e&&!a.set(e,i))return!1;s&&s.call(i.context,a,t,i),a.trigger("sync",a,t,i)},O(this,i),r&&o&&(this.attributes=n.extend({},l,r));var c=this.isNew()?"create":i.patch?"patch":"update";"patch"!==c||i.attrs||(i.attrs=r);var u=this.sync(c,this,i);return this.attributes=l,u},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,r=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){r&&o(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var a=!1;return this.isNew()?n.defer(t.success):(O(this,t),a=this.sync("delete",this,t)),r||o(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||R();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}}),a(y,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var v=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},w=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,r=Array(t.length-n),o=e.length;for(i=0;i<r.length;i++)r[i]=t[i+n];for(i=0;i<o;i++)t[i+n]=e[i];for(i=0;i<r.length;i++)t[i+o+n]=r[i]};n.extend(v.prototype,c,{model:y,initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,x))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var r=this._removeModels(t,e);return!e.silent&&r.length&&(e.changes={added:[],merged:[],removed:r},this.trigger("update",this,e)),i?r[0]:r},set:function(t,e){if(null!=t){(e=n.extend({},b,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!n.isArray(t);t=i?[t]:t.slice();var r=e.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,a,s=[],l=[],c=[],u=[],h={},d=e.add,p=e.merge,f=e.remove,m=!1,g=this.comparator&&null==r&&!1!==e.sort,_=n.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){o=t[a];var y=this.get(o);if(y){if(p&&o!==y){var v=this._isModel(o)?o.attributes:o;e.parse&&(v=y.parse(v,e)),y.set(v,e),c.push(y),g&&!m&&(m=y.hasChanged(_))}h[y.cid]||(h[y.cid]=!0,s.push(y)),t[a]=y}else d&&(o=t[a]=this._prepareModel(o,e))&&(l.push(o),this._addReference(o,e),h[o.cid]=!0,s.push(o))}if(f){for(a=0;a<this.length;a++)h[(o=this.models[a]).cid]||u.push(o);u.length&&this._removeModels(u,e)}var x=!1,E=!g&&d&&f;if(s.length&&E?(x=this.length!==s.length||n.some(this.models,(function(t,e){return t!==s[e]})),this.models.length=0,w(this.models,s,0),this.length=this.models.length):l.length&&(g&&(m=!0),w(this.models,l,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!e.silent){for(a=0;a<l.length;a++)null!=r&&(e.index=r+a),(o=l[a]).trigger("add",o,this,e);(m||x)&&this.trigger("sort",this,e),(l.length||u.length||c.length)&&(e.changes={added:l,removed:u,merged:c},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,i=this;return t.success=function(n){var r=t.reset?"reset":"set";i[r](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},O(this,t),this.sync("read",this,t)},create:function(t,e){var i=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var r=this,o=e.success;return e.success=function(t,e,n){i&&r.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?n.clone(e):{}).collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this.get(t[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var a=this.modelId(r.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,r.trigger("remove",r,this,e)),n.push(r),this._removeReference(r,e)}}return n},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var r=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}}),a(v,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var E=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)},M=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var r=e.match(M);this.delegate(r[1],r[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,r){var o=S[t];n.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||R()),null!=r.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",r.emulateJSON&&(a.data._method=o);var s=r.beforeSend;r.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var l=r.error;r.error=function(t,e,n){r.textStatus=e,r.errorThrown=n,l&&l.call(r.context,t,e,n)};var c=r.xhr=e.ajax(n.extend(a,r));return i.trigger("request",i,c,r),c};var S={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,I=/(\(\?)?:\w+/g,L=/\*\w+/g,D=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(k.prototype,c,{initialize:function(){},route:function(t,i,r){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return e.history.route(t,(function(n){var a=o._extractParameters(t,n);!1!==o.execute(r,a,i)&&(o.trigger.apply(o,["route:"+i].concat(a)),o.trigger("route",i,a),e.history.trigger("route",o,i,a))})),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(D,"\\$&").replace(C,"(?:$1)?").replace(I,(function(t,e){return e?t:"([^/?]+)"})).replace(L,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,(function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null}))}});var A=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,z=/^\/+|\/+$/g,N=/#.*$/;A.started=!1,n.extend(A.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(P,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");if(A.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(z,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!A.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(N,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new A;y.extend=v.extend=k.extend=E.extend=A.extend=function(t,e){var i,r=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,e),i.prototype=n.create(r.prototype,t),i.prototype.constructor=i,i.__super__=r.prototype,i};var R=function(){throw new Error('A "url" property or function must be specified')},O=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e}(o,n,t,e)}.apply(e,i),void 0===r||(t.exports=r)},6624:(t,e,n)=>{t.exports=function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return r(e[a][1][t]||t)}),u,u.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),i=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),i}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,e,n){"use strict";var i;try{throw new Error}catch(t){i=t}var r=t("./schedule"),o=t("./queue"),a=t("./util");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=r}function l(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function c(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function u(t){this._normalQueue._pushOne(t),this._queueTick()}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(s.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?l.call(this,t,e,n):this._schedule((function(){setTimeout((function(){t.call(e,n)}),100)}))},s.prototype.invoke=function(t,e,n){this._trampolineEnabled?c.call(this,t,e,n):this._schedule((function(){t.call(e,n)}))},s.prototype.settlePromises=function(t){this._trampolineEnabled?u.call(this,t):this._schedule((function(){t._settlePromises()}))}):(s.prototype.invokeLater=l,s.prototype.invoke=c,s.prototype.settlePromises=u),s.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),i=t.shift();e.call(n,i)}else e._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},e.exports=s,e.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){var r=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},l=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){r||(r=!0,t.prototype._propagateFrom=i.propagateFromFunction(),t.prototype._boundValue=i.boundValueFunction());var c=n(o),u=new t(e);u._propagateFrom(this,1);var h=this._target();if(u._setBoundTo(c),c instanceof t){var d={promiseRejectionQueued:!1,promise:u,target:h,bindingPromise:c};h._then(e,a,void 0,u,d),c._then(s,l,void 0,u,d),u._setOnCancel(c)}else u._resolveCallback(h);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var i;"undefined"!=typeof Promise&&(i=Promise);var r=t("./promise")();r.noConflict=function(){try{Promise===r&&(Promise=i)}catch(t){}return r},e.exports=r},{"./promise":22}],5:[function(t,e,n){"use strict";var i=Object.create;if(i){var r=i(null),o=i(null);r[" size"]=o[" size"]=0}e.exports=function(e){var n=t("./util"),i=n.canEvaluate;function r(t){var i=function(t,i){var r;if(null!=t&&(r=t[i]),"function"!=typeof r){var o="Object "+n.classString(t)+" has no method '"+n.toString(i)+"'";throw new e.TypeError(o)}return r}(t,this.pop());return i.apply(t,this)}function o(t){return t[this]}function a(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=a;else if(i){var n=(void 0)(t);e=null!==n?n:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o=t("./util"),a=o.tryCatch,s=o.errorObj,l=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),l.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var i=a(t).call(this._boundValue());i===s&&(this._attachExtraTrace(i.e),l.throwLater(i.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),l.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),i=t("./es5").keys,r=n.tryCatch,o=n.errorObj;return function(t,a,s){return function(l){var c=s._boundValue();t:for(var u=0;u<t.length;++u){var h=t[u];if(h===Error||null!=h&&h.prototype instanceof Error){if(l instanceof h)return r(a).call(c,l)}else if("function"==typeof h){var d=r(h).call(c,l);if(d===o)return d;if(d)return r(a).call(c,l)}else if(n.isObject(l)){for(var p=i(h),f=0;f<p.length;++f){var m=p[f];if(h[m]!=l[m])continue t}return r(a).call(c,l)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function i(){this._trace=new i.CapturedTrace(r())}function r(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},i.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},i.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},i.CapturedTrace=null,i.create=function(){if(e)return new i},i.deactivateLongStackTraces=function(){},i.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,l=t.prototype._promiseCreated;i.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=l,e=!1},e=!0,t.prototype._pushContext=i.prototype._pushContext,t.prototype._popContext=i.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},i}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){var i,r,o,a=e._getDomain,s=e._async,l=t("./errors").Warning,c=t("./util"),u=c.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,p=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,f=null,m=null,g=!1,_=!(0==c.env("BLUEBIRD_DEBUG")),y=!(0==c.env("BLUEBIRD_WARNINGS")||!_&&!c.env("BLUEBIRD_WARNINGS")),v=!(0==c.env("BLUEBIRD_LONG_STACK_TRACES")||!_&&!c.env("BLUEBIRD_LONG_STACK_TRACES")),b=0!=c.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(y||!!c.env("BLUEBIRD_W_FORGOTTEN_RETURN"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},e.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),s.invokeLater(this._notifyUnhandledRejection,this,void 0))},e.prototype._notifyUnhandledRejectionIsHandled=function(){j("rejectionHandled",i,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},e.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),j("unhandledRejection",r,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return F(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=a();r="function"==typeof t?null===e?t:c.domainBind(e,t):void 0},e.onUnhandledRejectionHandled=function(t){var e=a();i="function"==typeof t?null===e?t:c.domainBind(e,t):void 0};var x=function(){};e.longStackTraces=function(){if(s.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!X.longStackTraces&&G()){var t=e.prototype._captureStackTrace,i=e.prototype._attachExtraTrace;X.longStackTraces=!0,x=function(){if(s.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");e.prototype._captureStackTrace=t,e.prototype._attachExtraTrace=i,n.deactivateLongStackTraces(),s.enableTrampoline(),X.longStackTraces=!1},e.prototype._captureStackTrace=R,e.prototype._attachExtraTrace=O,n.activateLongStackTraces(),s.disableTrampolineIfNecessary()}},e.hasLongStackTraces=function(){return X.longStackTraces&&G()};var w=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return c.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!c.global.dispatchEvent(n)}}return"function"==typeof Event?(t=new Event("CustomEvent"),c.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!c.global.dispatchEvent(n)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),c.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!c.global.dispatchEvent(n)})}catch(t){}return function(){return!1}}(),E=c.isNode?function(){return process.emit.apply(process,arguments)}:c.global?function(t){var e="on"+t.toLowerCase(),n=c.global[e];return!!n&&(n.apply(c.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function M(t,e){return{promise:e}}var T={promiseCreated:M,promiseFulfilled:M,promiseRejected:M,promiseResolved:M,promiseCancelled:M,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:M},S=function(t){var e=!1;try{e=E.apply(null,arguments)}catch(t){s.throwLater(t),e=!0}var n=!1;try{n=w(t,T[t].apply(null,arguments))}catch(t){s.throwLater(t),n=!0}return n||e};function k(){return!1}function C(t,e,n){var i=this;try{t(e,n,(function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+c.toString(t));i._attachCancellationCallback(t)}))}catch(t){return t}}function I(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?c.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function L(){return this._onCancelField}function D(t){this._onCancelField=t}function A(){this._cancellationParent=void 0,this._onCancelField=void 0}function P(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}e.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?e.longStackTraces():!t.longStackTraces&&e.hasLongStackTraces()&&x()),"warnings"in t){var n=t.warnings;X.warnings=!!n,b=X.warnings,c.isObject(n)&&"wForgottenReturn"in n&&(b=!!n.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!X.cancellation){if(s.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=A,e.prototype._propagateFrom=P,e.prototype._onCancel=L,e.prototype._setOnCancel=D,e.prototype._attachCancellationCallback=I,e.prototype._execute=C,z=P,X.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!X.monitoring?(X.monitoring=!0,e.prototype._fireEvent=S):!t.monitoring&&X.monitoring&&(X.monitoring=!1,e.prototype._fireEvent=k)),e},e.prototype._fireEvent=k,e.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var z=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function N(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function R(){this._trace=new Z(this._peekContext())}function O(t,e){if(u(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=U(t);c.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}}function F(t,n,i){if(X.warnings){var r,o=new l(t);if(n)i._attachExtraTrace(o);else if(X.longStackTraces&&(r=e._peekContext()))r.attachExtraTrace(o);else{var a=U(o);o.stack=a.message+"\n"+a.stack.join("\n")}S("warning",o)||Y(o,"",!0)}}function B(t){for(var e=[],n=0;n<t.length;++n){var i=t[n],r="    (No stack trace)"===i||f.test(i),o=r&&q(i);r&&!o&&(g&&" "!==i.charAt(0)&&(i="    "+i),e.push(i))}return e}function U(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var i=e[n];if("    (No stack trace)"===i||f.test(i))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:B(e)}}function Y(t,e,n){if("undefined"!=typeof console){var i;if(c.isObject(t)){var r=t.stack;i=e+m(r,t)}else i=e+String(t);"function"==typeof o?o(i,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(i)}}function j(t,e,n,i){var r=!1;try{"function"==typeof e&&(r=!0,"rejectionHandled"===t?e(i):e(n,i))}catch(t){s.throwLater(t)}"unhandledRejection"===t?S(t,n,i)||r||Y(n,"Unhandled rejection "):S(t,i)}function V(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():c.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}(e)+">, no stack trace)"}function G(){return"function"==typeof W}var q=function(){return!1},H=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function $(t){var e=t.match(H);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function Z(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);W(this,Z),e>32&&this.uncycle()}c.inherits(Z,Error),n.CapturedTrace=Z,Z.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},i=0,r=this;void 0!==r;++i)e.push(r),r=r._parent;for(i=(t=this._length=i)-1;i>=0;--i){var o=e[i].stack;void 0===n[o]&&(n[o]=i)}for(i=0;i<t;++i){var a=n[e[i].stack];if(void 0!==a&&a!==i){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[i]._parent=void 0,e[i]._length=1;var s=i>0?e[i-1]:this;a<t-1?(s._parent=e[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var l=s._length+1,c=i-2;c>=0;--c)e[c]._length=l,l++;return}}}},Z.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=U(t),n=e.message,i=[e.stack],r=this;void 0!==r;)i.push(B(r.stack.split("\n"))),r=r._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var i=t[n],r=e.length-1,o=e[r],a=-1,s=i.length-1;s>=0;--s)if(i[s]===o){a=s;break}for(s=a;s>=0;--s){var l=i[s];if(e[r]!==l)break;e.pop(),r--}e=i}}(i),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(i),c.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,i)),c.notEnumerableProp(t,"__stackCleaned__",!0)}};var W=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():V(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,f=t,m=e;var n=Error.captureStackTrace;return q=function(t){return h.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var i,r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return f=/@/,m=e,g=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){i="stack"in t}return!("stack"in r)&&i&&"number"==typeof Error.stackTraceLimit?(f=t,m=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6}):(m=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?V(e):e.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(o=function(t){console.warn(t)},c.isNode&&process.stderr.isTTY?o=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:c.isNode||"string"!=typeof(new Error).stack||(o=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var X={warnings:y,longStackTraces:!1,cancellation:!1,monitoring:!1};return v&&e.longStackTraces(),{longStackTraces:function(){return X.longStackTraces},warnings:function(){return X.warnings},cancellation:function(){return X.cancellation},monitoring:function(){return X.monitoring},propagateFromFunction:function(){return z},boundValueFunction:function(){return N},checkForgottenReturns:function(t,e,n,i,r){if(void 0===t&&null!==e&&b){if(void 0!==r&&r._returnedNonUndefined())return;if(0==(65535&i._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),l=B(s),c=l.length-1;c>=0;--c){var u=l[c];if(!d.test(u)){var h=u.match(p);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(l.length>0){var f=l[0];for(c=0;c<s.length;++c)if(s[c]===f){c>0&&(a="\n"+s[c-1]);break}}}var m="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;i._warn(m,!0,e)}},setBounds:function(t,e){if(G()){for(var n,i,r=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,l=0;l<r.length;++l)if(c=$(r[l])){n=c.fileName,a=c.line;break}for(l=0;l<o.length;++l){var c;if(c=$(o[l])){i=c.fileName,s=c.line;break}}a<0||s<0||!n||!i||n!==i||a>=s||(q=function(t){if(h.test(t))return!0;var e=$(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}},warn:F,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),F(n)},CapturedTrace:Z,fireDomEvent:w,fireGlobalEvent:E}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],i=function(){throw e};return this.caught(t,i)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var i=arguments[1];i instanceof t&&i.suppressUnhandledRejections();var r=function(){return i};return this.caught(n,r)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,i=t.all;function r(){return i(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(r,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,i){return n(t,i,e,0)._then(r,void 0,void 0,t,void 0)},t.mapSeries=function(t,i){return n(t,i,e,e)}}},{}],12:[function(t,e,n){"use strict";var i,r,o=t("./es5"),a=o.freeze,s=t("./util"),l=s.inherits,c=s.notEnumerableProp;function u(t,e){function n(i){if(!(this instanceof n))return new n(i);c(this,"message","string"==typeof i?i:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}var h=u("Warning","warning"),d=u("CancellationError","cancellation error"),p=u("TimeoutError","timeout error"),f=u("AggregateError","aggregate error");try{i=TypeError,r=RangeError}catch(t){i=u("TypeError","type error"),r=u("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(f.prototype[m[g]]=Array.prototype[m[g]]);o.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var _=0;function y(t){if(!(this instanceof y))return new y(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var t=Array(4*_+1).join(" "),e="\n"+t+"AggregateError of:\n";_++,t=Array(4*_+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",r=i.split("\n"),o=0;o<r.length;++o)r[o]=t+r[o];e+=(i=r.join("\n"))+"\n"}return _--,e},l(y,Error);var v=Error.__BluebirdErrorTypes__;v||(v=a({CancellationError:d,TimeoutError:p,OperationalError:y,RejectionError:y,AggregateError:f}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:v,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error,TypeError:i,RangeError:r,CancellationError:v.CancellationError,OperationalError:v.OperationalError,TimeoutError:v.TimeoutError,AggregateError:v.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var i=function(){"use strict";return void 0===this}();if(i)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return a}},isES5:i,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,i){return n(this,t,i,e)},t.filter=function(t,i,r){return n(t,i,r,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){var i=t("./util"),r=e.CancellationError,o=i.errorObj;function a(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function s(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function c(){return h.call(this,this.promise._target()._settledValue())}function u(t){if(!l(this,t))return o.e=t,o}function h(t){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var h=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),t);if(void 0!==h){i._setReturnedNonUndefined();var d=n(h,i);if(d instanceof e){if(null!=this.cancelPromise){if(d._isCancelled()){var p=new r("late cancellation observer");return i._attachExtraTrace(p),o.e=p,o}d.isPending()&&d._attachCancellationCallback(new s(this))}return d._then(c,u,void 0,this,void 0)}}}return i.isRejected()?(l(this),o.e=t,o):(l(this),t)}return a.prototype.isFinallyHandler=function(){return 0===this.type},s.prototype._resultCancelled=function(){l(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new a(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,h,h)},e.prototype.tap=function(t){return this._passThrough(t,1,h)},a}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=t("./errors").TypeError,l=t("./util"),c=l.errorObj,u=l.tryCatch,h=[];function d(t,n,r,o){if(a.cancellation()){var s=new e(i),l=this._finallyPromise=new e(i);this._promise=s.lastly((function(){return l})),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new e(i))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}l.inherits(d,o),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=u(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},d.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=u(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=u(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(t){var n=this._promise;if(t===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var i=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(i);var o=r(i,this._promise);if(o instanceof e||(o=function(t,n,i){for(var o=0;o<n.length;++o){i._pushContext();var a=u(n[o])(t);if(i._popContext(),a===c){i._pushContext();var s=e.reject(c.e);return i._popContext(),s}var l=r(a,i);if(l instanceof e)return l}return null}(o,this._yieldHandlers,this._promise),null!==o)){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",i)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,i=d,r=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new i(void 0,void 0,n,r),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("expecting a function but got "+l.classString(t));h.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=new d(t,this),r=i.promise();return i._run(e.spawn),r}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=e._getDomain,l=t("./util"),c=l.tryCatch,u=l.errorObj,h=e._async;function d(t,e,n,i){this.constructor$(t),this._promise._captureStackTrace();var r=s();this._callback=null===r?e:l.domainBind(r,e),this._preservedValues=i===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function p(t,n,r,o){if("function"!=typeof n)return i("expecting a function but got "+l.classString(n));var a=0;if(void 0!==r){if("object"!=typeof r||null===r)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(r)));if("number"!=typeof r.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(r.concurrency)));a=r.concurrency}return new d(t,n,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,o).promise()}l.inherits(d,n),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(t,n){var i=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(n<0){if(i[n=-1*n-1]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return i[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var h=this._promise,d=this._callback,p=h._boundValue();h._pushContext();var f=c(d).call(p,t,n,o),m=h._popContext();if(a.checkForgottenReturns(f,m,null!==s?"Promise.filter":"Promise.map",h),f===u)return this._reject(f.e),!0;var g=r(f,this._promise);if(g instanceof e){var _=(g=g._target())._bitField;if(0==(50397184&_))return l>=1&&this._inFlight++,i[n]=g,g._proxy(this,-1*(n+1)),!1;if(0==(33554432&_))return 0!=(16777216&_)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}i[n]=f}return++this._totalResolved>=o&&(null!==s?this._filter(i,s):this._resolve(i),!0)},d.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var i=t.pop();this._promiseFulfilled(n[i],i)}},d.prototype._filter=function(t,e){for(var n=e.length,i=new Array(n),r=0,o=0;o<n;++o)t[o]&&(i[r++]=e[o]);i.length=r,this._resolve(i)},d.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return p(this,t,e,null)},e.map=function(t,e,n,i){return p(t,e,n,i)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var i=new e(n);i._captureStackTrace(),i._pushContext();var r=s(t).apply(this,arguments),a=i._popContext();return o.checkForgottenReturns(r,a,"Promise.method",i),i._resolveFromSyncValue(r),i}},e.attempt=e.try=function(t){if("function"!=typeof t)return r("expecting a function but got "+a.classString(t));var i,l=new e(n);if(l._captureStackTrace(),l._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],u=arguments[2];i=a.isArray(c)?s(t).apply(u,c):s(t).call(u,c)}else i=s(t)();var h=l._popContext();return o.checkForgottenReturns(i,h,"Promise.try",l),l._resolveFromSyncValue(i),l},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var i=t("./util"),r=i.maybeWrapAsError,o=t("./errors").OperationalError,a=t("./es5"),s=/^(?:name|message|stack|cause)$/;function l(t){var e;if(function(t){return t instanceof Error&&a.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=a.keys(t),r=0;r<n.length;++r){var l=n[r];s.test(l)||(e[l]=t[l])}return e}return i.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,i){if(null!==t){if(n){var o=l(r(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(i);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),i=e._async,r=n.tryCatch,o=n.errorObj;function a(t,e){if(!n.isArray(t))return s.call(this,t,e);var a=r(e).apply(this._boundValue(),[null].concat(t));a===o&&i.throwLater(a.e)}function s(t,e){var n=this._boundValue(),a=void 0===t?r(e).call(n,null):r(e).call(n,null,t);a===o&&i.throwLater(a.e)}function l(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var a=r(e).call(this._boundValue(),t);a===o&&i.throwLater(a.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=s;void 0!==e&&Object(e).spread&&(n=a),this._then(n,l,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){var n=function(){return new p("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new C.PromiseInspection(this._target())},r=function(t){return C.reject(new p(t))};function o(){}var a,s={},l=t("./util");a=l.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},l.notEnumerableProp(C,"_getDomain",a);var c=t("./es5"),u=t("./async"),h=new u;c.defineProperty(C,"_async",{value:h});var d=t("./errors"),p=C.TypeError=d.TypeError;C.RangeError=d.RangeError;var f=C.CancellationError=d.CancellationError;C.TimeoutError=d.TimeoutError,C.OperationalError=d.OperationalError,C.RejectionError=d.OperationalError,C.AggregateError=d.AggregateError;var m=function(){},g={},_={},y=t("./thenables")(C,m),v=t("./promise_array")(C,m,y,r,o),b=t("./context")(C),x=b.create,w=t("./debuggability")(C,b),E=(w.CapturedTrace,t("./finally")(C,y)),M=t("./catch_filter")(_),T=t("./nodeback"),S=l.errorObj,k=l.tryCatch;function C(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==m&&(function(t,e){if("function"!=typeof e)throw new p("expecting a function but got "+l.classString(e));if(t.constructor!==C)throw new p("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function I(t){this.promise._resolveCallback(t)}function L(t){this.promise._rejectCallback(t,!1)}function D(t){var e=new C(m);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return C.prototype.toString=function(){return"[object Promise]"},C.prototype.caught=C.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,i=new Array(e-1),o=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!l.isObject(a))return r("expecting an object but got A catch statement predicate "+l.classString(a));i[o++]=a}return i.length=o,t=arguments[n],this.then(void 0,M(i,t,this))}return this.then(void 0,t)},C.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},C.prototype.then=function(t,e){if(w.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+l.classString(t);arguments.length>1&&(n+=", "+l.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},C.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},C.prototype.spread=function(t){return"function"!=typeof t?r("expecting a function but got "+l.classString(t)):this.all()._then(t,void 0,void 0,g,void 0)},C.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},C.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new v(this).promise()},C.prototype.error=function(t){return this.caught(l.originatesFromRejection,t)},C.getNewLibraryCopy=e.exports,C.is=function(t){return t instanceof C},C.fromNode=C.fromCallback=function(t){var e=new C(m);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=k(t)(T(e,n));return i===S&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},C.all=function(t){return new v(t).promise()},C.cast=function(t){var e=y(t);return e instanceof C||((e=new C(m))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},C.resolve=C.fulfilled=C.cast,C.reject=C.rejected=function(t){var e=new C(m);return e._captureStackTrace(),e._rejectCallback(t,!0),e},C.setScheduler=function(t){if("function"!=typeof t)throw new p("expecting a function but got "+l.classString(t));return h.setScheduler(t)},C.prototype._then=function(t,e,n,i,r){var o=void 0!==r,s=o?r:new C(m),c=this._target(),u=c._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===i&&0!=(2097152&this._bitField)&&(i=0!=(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var d=a();if(0!=(50397184&u)){var p,g,_=c._settlePromiseCtx;0!=(33554432&u)?(g=c._rejectionHandler0,p=t):0!=(16777216&u)?(g=c._fulfillmentHandler0,p=e,c._unsetRejectionIsUnhandled()):(_=c._settlePromiseLateCancellationObserver,g=new f("late cancellation observer"),c._attachExtraTrace(g),p=e),h.invoke(_,c,{handler:null===d?p:"function"==typeof p&&l.domainBind(d,p),promise:s,receiver:i,value:g})}else c._addCallbacks(t,e,s,i,d);return s},C.prototype._length=function(){return 65535&this._bitField},C.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},C.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},C.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},C.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},C.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},C.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},C.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},C.prototype._isFinal=function(){return(4194304&this._bitField)>0},C.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},C.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},C.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},C.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},C.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==s)return void 0===e&&this._isBound()?this._boundValue():e},C.prototype._promiseAt=function(t){return this[4*t-4+2]},C.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},C.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},C.prototype._boundValue=function(){},C.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,i=t._promise0,r=t._receiverAt(0);void 0===r&&(r=s),this._addCallbacks(e,n,i,r,null)},C.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),r=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=s),this._addCallbacks(n,i,r,o,null)},C.prototype._addCallbacks=function(t,e,n,i,r){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=i,"function"==typeof t&&(this._fulfillmentHandler0=null===r?t:l.domainBind(r,t)),"function"==typeof e&&(this._rejectionHandler0=null===r?e:l.domainBind(r,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=i,"function"==typeof t&&(this[a+0]=null===r?t:l.domainBind(r,t)),"function"==typeof e&&(this[a+1]=null===r?e:l.domainBind(r,e))}return this._setLength(o+1),o},C.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},C.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(n(),!1);var i=y(t,this);if(!(i instanceof C))return this._fulfill(t);e&&this._propagateFrom(i,2);var r=i._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var l=new f("late cancellation observer");r._attachExtraTrace(l),this._reject(l)}}else this._reject(n())}},C.prototype._rejectCallback=function(t,e,n){var i=l.ensureErrorObject(t),r=i===t;if(!r&&!n&&w.warnings()){var o="a promise was rejected with a non-error: "+l.classString(t);this._warn(o,!0)}this._attachExtraTrace(i,!!e&&r),this._reject(t)},C.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,i=this._execute(t,(function(t){e._resolveCallback(t)}),(function(t){e._rejectCallback(t,n)}));n=!1,this._popContext(),void 0!==i&&e._rejectCallback(i,!0)},C.prototype._settlePromiseFromHandler=function(t,e,n,i){var r=i._bitField;if(0==(65536&r)){var o;i._pushContext(),e===g?n&&"number"==typeof n.length?o=k(t).apply(this._boundValue(),n):(o=S).e=new p("cannot .spread() a non-array: "+l.classString(n)):o=k(t).call(e,n);var a=i._popContext();0==(65536&(r=i._bitField))&&(o===_?i._reject(n):o===S?i._rejectCallback(o.e,!1):(w.checkForgottenReturns(o,a,"",i,this),i._resolveCallback(o)))}},C.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},C.prototype._followee=function(){return this._rejectionHandler0},C.prototype._setFollowee=function(t){this._rejectionHandler0=t},C.prototype._settlePromise=function(t,e,n,r){var a=t instanceof C,s=this._bitField,l=0!=(134217728&s);0!=(65536&s)?(a&&t._invokeInternalOnCancel(),n instanceof E&&n.isFinallyHandler()?(n.cancelPromise=t,k(e).call(n,r)===S&&t._reject(S.e)):e===i?t._fulfill(i.call(n)):n instanceof o?n._promiseCancelled(t):a||t instanceof v?t._cancel():n.cancel()):"function"==typeof e?a?(l&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof o?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):a&&(l&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(r):t._reject(r))},C.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,i=t.receiver,r=t.value;"function"==typeof e?n instanceof C?this._settlePromiseFromHandler(e,i,r,n):e.call(i,r,n):n instanceof C&&n._reject(r)},C.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},C.prototype._settlePromise0=function(t,e,n){var i=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,t,r,e)},C.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},C.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var i=n();return this._attachExtraTrace(i),this._reject(i)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():h.settlePromises(this))}},C.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,l.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},C.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var i=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,e)}},C.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var i=this._rejectionHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,e)}},C.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,t),this._fulfillPromises(e,i)}this._setLength(0)}this._clearCancellationData()},C.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},C.defer=C.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new C(m),resolve:I,reject:L}},l.notEnumerableProp(C,"_makeSelfResolutionError",n),t("./method")(C,m,y,r,w),t("./bind")(C,m,y,w),t("./cancel")(C,v,r,w),t("./direct_resolve")(C),t("./synchronous_inspection")(C),t("./join")(C,v,y,m,h,a),C.Promise=C,C.version="3.4.7",t("./map.js")(C,v,r,y,m,w),t("./call_get.js")(C),t("./using.js")(C,r,y,x,m,w),t("./timers.js")(C,m,w),t("./generators.js")(C,r,m,y,o,w),t("./nodeify.js")(C),t("./promisify.js")(C,m),t("./props.js")(C,v,y,r),t("./race.js")(C,m,y,r),t("./reduce.js")(C,v,r,y,m,w),t("./settle.js")(C,v,w),t("./some.js")(C,v,r),t("./filter.js")(C,m),t("./each.js")(C,m),t("./any.js")(C),l.toFastProperties(C),l.toFastProperties(C.prototype),D({a:1}),D({b:2}),D({c:3}),D(1),D((function(){})),D(void 0),D(!1),D(new C(m)),w.setBounds(u.firstLineError,l.lastLineError),C}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o){var a=t("./util");function s(t){var i=this._promise=new e(n);t instanceof e&&i._propagateFrom(t,3),i._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=i(this._values,this._promise);if(s instanceof e){var l=(s=s._target())._bitField;if(this._values=s,0==(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0==(33554432&l))return 0!=(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{}}}(o));else{var c=r("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(c,!1)}},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var r=this._promise,o=!1,a=null,s=0;s<n;++s){var l=i(t[s],r);a=l instanceof e?(l=l._target())._bitField:null,o?null!==a&&l.suppressUnhandledRejections():null!==a?0==(50397184&a)?(l._proxy(this,s),this._values[s]=l):o=0!=(33554432&a)?this._promiseFulfilled(l._value(),s):0!=(16777216&a)?this._promiseRejected(l._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(l,s)}o||r._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var i={},r=t("./util"),o=t("./nodeback"),a=r.withAppended,s=r.maybeWrapAsError,l=r.canEvaluate,c=t("./errors").TypeError,u={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(t){return r.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!h.test(t)}function f(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function m(t,e,n){var i=r.getDataPropertyOrDefault(t,e+n,u);return!!i&&f(i)}function g(t,e,n,i){for(var o=r.inheritedDataKeys(t),a=[],s=0;s<o.length;++s){var l=o[s],u=t[l],h=i===d||d(l);"function"!=typeof u||f(u)||m(t,l,e)||!i(l,u,t,h)||a.push(l,u)}return function(t,e,n){for(var i=0;i<t.length;i+=2){var r=t[i];if(n.test(r))for(var o=r.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(a,e,n),a}var _=l?void 0:function(t,l,c,u,h,d){var p=function(){return this}(),f=t;function m(){var r=l;l===i&&(r=this);var c=new e(n);c._captureStackTrace();var u="string"==typeof f&&this!==p?this[f]:t,h=o(c,d);try{u.apply(r,a(arguments,h))}catch(t){c._rejectCallback(s(t),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof f&&(t=u),r.notEnumerableProp(m,"__isPromisified__",!0),m};function y(t,e,n,o,a){for(var s=new RegExp(e.replace(/([$])/,"\\$")+"$"),l=g(t,e,s,n),c=0,u=l.length;c<u;c+=2){var h=l[c],d=l[c+1],p=h+e;if(o===_)t[p]=_(h,i,h,d,e,a);else{var f=o(d,(function(){return _(h,i,h,d,e,a)}));r.notEnumerableProp(f,"__isPromisified__",!0),t[p]=f}}return r.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new c("expecting a function but got "+r.classString(t));if(f(t))return t;var n,o,a,s=(n=t,o=void 0===(e=Object(e)).context?i:e.context,a=!!e.multiArgs,_(n,o,void 0,n,null,a));return r.copyDescriptors(t,s,p),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,i=e.suffix;"string"!=typeof i&&(i="Async");var o=e.filter;"function"!=typeof o&&(o=d);var a=e.promisifier;if("function"!=typeof a&&(a=_),!r.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=r.inheritedDataKeys(t),l=0;l<s.length;++l){var u=t[s[l]];"constructor"!==s[l]&&r.isClass(u)&&(y(u.prototype,i,o,a,n),y(u,i,o,a,n))}return y(t,i,o,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o,a=t("./util"),s=a.isObject,l=t("./es5");"function"==typeof Map&&(o=Map);var c=function(){var t=0,e=0;function n(n,i){this[t]=n,this[t+e]=i,t++}return function(i){e=i.size,t=0;var r=new Array(2*i.size);return i.forEach(n,r),r}}();function u(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=c(t),n=!0;else{var i=l.keys(t),r=i.length;e=new Array(2*r);for(var a=0;a<r;++a){var s=i[a];e[a]=t[s],e[a+r]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function h(t){var n,o=i(t);return s(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new u(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(u,n),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,i=0;i<n;++i){var r=t[n+i],a=t[i];e.set(r,a)}return e}(this._values);else{n={};for(var i=this.length(),r=0,a=this.length();r<a;++r)n[this._values[r+i]]=this._values[r]}return this._resolve(n),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return h(this)},e.props=function(t){return h(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype.push=function(t,e,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var r=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[r+0&o]=t,this[r+1&o]=e,this[r+2&o]=n,this._length=i},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,i,r){for(var o=0;o<r;++o)n[o+i]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,i,r){var o=t("./util");function a(t,s){var l,c=i(t);if(c instanceof e)return(l=c).then((function(t){return a(t,l)}));if(null===(t=o.asArray(t)))return r("expecting an array or an iterable object but got "+o.classString(t));var u=new e(n);void 0!==s&&u._propagateFrom(s,3);for(var h=u._fulfill,d=u._reject,p=0,f=t.length;p<f;++p){var m=t[p];(void 0!==m||p in t)&&e.cast(m)._then(h,d,void 0,u,null)}return u}e.race=function(t){return a(t,void 0)},e.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=e._getDomain,l=t("./util"),c=l.tryCatch;function u(t,n,i,r){this.constructor$(t);var a=s();this._fn=null===a?n:l.domainBind(a,n),void 0!==i&&(i=e.resolve(i))._attachCancellationCallback(this),this._initialValue=i,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function d(t,e,n,r){return"function"!=typeof e?i("expecting a function but got "+l.classString(e)):new u(t,e,n,r).promise()}function p(t){this.accum=t,this.array._gotAccum(t);var n=r(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n,i=this.array,r=i._promise,o=c(i._fn);r._pushContext(),(n=void 0!==i._eachValues?o.call(r._boundValue(),t,this.index,this.length):o.call(r._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(i._currentCancellable=n);var s=r._popContext();return a.checkForgottenReturns(n,s,void 0!==i._eachValues?"Promise.each":"Promise.reduce",r),n}l.inherits(u,n),u.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},u.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},u.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},u.prototype._iterate=function(t){var n,i;this._values=t;var r=t.length;if(void 0!==this._initialValue?(n=this._initialValue,i=0):(n=e.resolve(t[0]),i=1),this._currentCancellable=n,!n.isRejected())for(;i<r;++i){var o={accum:null,value:t[i],index:i,length:r,array:this};n=n._then(p,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(h,h,void 0,n,this)},e.prototype.reduce=function(t,e){return d(this,t,e,null)},e.reduce=function(t,e,n,i){return d(t,e,n,i)}}},{"./util":36}],29:[function(t,e,i){"use strict";var r,o,a,s,l,c=t("./util"),u=c.getNativePromise();if(c.isNode&&"undefined"==typeof MutationObserver){var h=n.g.setImmediate,d=process.nextTick;r=c.isRecentNode?function(t){h.call(n.g,t)}:function(t){d.call(process,t)}}else if("function"==typeof u&&"function"==typeof u.resolve){var p=u.resolve();r=function(t){p.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(o=document.createElement("div"),a={attributes:!0},s=!1,l=document.createElement("div"),new MutationObserver((function(){o.classList.toggle("foo"),s=!1})).observe(l,a),function(t){var e=new MutationObserver((function(){e.disconnect(),t()}));e.observe(o,a),s||(s=!0,l.classList.toggle("foo"))});e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,n),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new r;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new r;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return i.deprecated(".settle()",".reflect()"),new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util"),o=t("./errors").RangeError,a=t("./errors").AggregateError,s=r.isArray,l={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function u(t,e){if((0|e)!==e||e<0)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),r=n.promise();return n.setHowMany(e),n.init(),r}r.inherits(c,n),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return u(t,e)},e.prototype.some=function(t){return u(this,t)},e._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return r.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),i.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var i=t("./util"),r=i.errorObj,o=i.isObject,a={}.hasOwnProperty;return function(t,s){if(o(t)){if(t instanceof e)return t;var l=function(t){try{return function(t){return t.then}(t)}catch(t){return r.e=t,r}}(t);if(l===r){s&&s._pushContext();var c=e.reject(l.e);return s&&s._popContext(),c}if("function"==typeof l)return function(t){try{return a.call(t,"_promise0")}catch(t){return!1}}(t)?(c=new e(n),t._then(c._fulfill,c._reject,void 0,c,null),c):function(t,o,a){var s=new e(n),l=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var c=!0,u=i.tryCatch(o).call(t,h,d);function h(t){s&&(s._resolveCallback(t),s=null)}function d(t){s&&(s._rejectCallback(t,c,!0),s=null)}return c=!1,s&&u===r&&(s._rejectCallback(u.e,!0,!0),s=null),l}(t,l,s)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,i){var r=t("./util"),o=e.TimeoutError;function a(t){this.handle=t}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,r){var o,l;return void 0!==r?(o=e.resolve(r)._then(s,null,null,t,void 0),i.cancellation()&&r instanceof e&&o._setOnCancel(r)):(o=new e(n),l=setTimeout((function(){o._fulfill()}),+t),i.cancellation()&&o._setOnCancel(new a(l)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function c(t){return clearTimeout(this.handle),t}function u(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return l(t,this)},e.prototype.timeout=function(t,e){var n,s;t=+t;var l=new a(setTimeout((function(){n.isPending()&&function(t,e,n){var i;i="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),r.markAsOriginatingFromRejection(i),t._attachExtraTrace(i),t._reject(i),null!=n&&n.cancel()}(n,e,s)}),t));return i.cancellation()?(s=this.then(),(n=s._then(c,u,void 0,l,void 0))._setOnCancel(l)):n=this._then(c,u,void 0,l,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,i,r,o,a){var s=t("./util"),l=t("./errors").TypeError,c=t("./util").inherits,u=s.errorObj,h=s.tryCatch,d={};function p(t){setTimeout((function(){throw t}),0)}function f(t,n){var r=0,a=t.length,s=new e(o);return function o(){if(r>=a)return s._fulfill();var l=function(t){var e=i(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[r++]);if(l instanceof e&&l._isDisposable()){try{l=i(l._getDisposer().tryDispose(n),t.promise)}catch(t){return p(t)}if(l instanceof e)return l._then(o,p,null,null,null)}o()}(),s}function m(t,e,n){this._data=t,this._promise=e,this._context=n}function g(t,e,n){this.constructor$(t,e,n)}function _(t){return m.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function y(t){this.length=t,this.promise=null,this[t-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},m.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=e!==d?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,i},m.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(g,m),g.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},y.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var i=this[n];i instanceof e&&i.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var r,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+s.classString(o));var l=!0;2===t&&Array.isArray(arguments[0])?(t=(r=arguments[0]).length,l=!1):(r=arguments,t--);for(var c=new y(t),d=0;d<t;++d){var p=r[d];if(m.isDisposer(p)){var g=p;(p=p.promise())._setDisposable(g)}else{var v=i(p);v instanceof e&&(p=v._then(_,null,null,{resources:c,index:d},void 0))}c[d]=p}var b=new Array(c.length);for(d=0;d<b.length;++d)b[d]=e.resolve(c[d]).reflect();var x=e.all(b).then((function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return u.e=n.error(),u;if(!n.isFulfilled())return void x.cancel();t[e]=n.value()}w._pushContext(),o=h(o);var i=l?o.apply(void 0,t):o(t),r=w._popContext();return a.checkForgottenReturns(i,r,"Promise.using",w),i})),w=x.lastly((function(){var t=new e.PromiseInspection(x);return f(c,t)}));return c.promise=w,w._setOnCancel(c),w},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new g(t,this,r());throw new l}}},{"./errors":12,"./util":36}],36:[function(t,e,i){"use strict";var r,o=t("./es5"),a="undefined"==typeof navigator,s={e:{}},l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:void 0!==this?this:null;function c(){try{var t=r;return r=null,t.apply(this,arguments)}catch(t){return s.e=t,s}}function u(t){return r=t,c}var h=function(t,e){var n={}.hasOwnProperty;function i(){for(var i in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,i)&&"$"!==i.charAt(i.length-1)&&(this[i+"$"]=e.prototype[i])}return i.prototype=e.prototype,t.prototype=new i,t.prototype};function d(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function p(t){return"function"==typeof t||"object"==typeof t&&null!==t}function f(t){return d(t)?new Error(S(t)):t}function m(t,e){var n,i=t.length,r=new Array(i+1);for(n=0;n<i;++n)r[n]=t[n];return r[n]=e,r}function g(t,e,n){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function _(t,e,n){if(d(t))return t;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,i),t}function y(t){throw t}var v=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var i=[],r=Object.create(null);null!=t&&!e(t);){var a;try{a=n(t)}catch(t){return i}for(var s=0;s<a.length;++s){var l=a[s];if(!r[l]){r[l]=!0;var c=Object.getOwnPropertyDescriptor(t,l);null!=c&&null==c.get&&null==c.set&&i.push(l)}}t=o.getPrototypeOf(t)}return i}}var i={}.hasOwnProperty;return function(n){if(e(n))return[];var r=[];t:for(var o in n)if(i.call(n,o))r.push(o);else{for(var a=0;a<t.length;++a)if(i.call(t[a],o))continue t;r.push(o)}return r}}(),b=/this\s*\.\s*\S+\s*=/;function x(t){try{if("function"==typeof t){var e=o.names(t.prototype),n=o.isES5&&e.length>1,i=e.length>0&&!(1===e.length&&"constructor"===e[0]),r=b.test(t+"")&&o.names(t).length>0;if(n||i||r)return!0}return!1}catch(t){return!1}}function w(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}var E=/^[a-z$_][a-z$_0-9]*$/i;function M(t){return E.test(t)}function T(t,e,n){for(var i=new Array(t),r=0;r<t;++r)i[r]=e+r+n;return i}function S(t){try{return t+""}catch(t){return"[no string representation]"}}function k(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function C(t){try{_(t,"isOperational",!0)}catch(t){}}function I(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function L(t){return k(t)&&o.propertyIsWritable(t,"stack")}var D="stack"in new Error?function(t){return L(t)?t:new Error(S(t))}:function(t){if(L(t))return t;try{throw new Error(S(t))}catch(t){return t}};function A(t){return{}.toString.call(t)}function P(t,e,n){for(var i=o.names(t),r=0;r<i.length;++r){var a=i[r];if(n(a))try{o.defineProperty(e,a,o.getDescriptor(t,a))}catch(t){}}}var z=function(t){return o.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var N="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],i=t[Symbol.iterator]();!(e=i.next()).done;)n.push(e.value);return n};z=function(t){return o.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?N(t):null}}var R="undefined"!=typeof process&&"[object process]"===A(process).toLowerCase(),O="undefined"!=typeof process&&void 0!==process.env;function F(t){return O?process.env[t]:void 0}function B(){if("function"==typeof Promise)try{var t=new Promise((function(){}));if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function U(t,e){return t.bind(e)}var Y,j={isClass:x,isIdentifier:M,inheritedDataKeys:v,getDataPropertyOrDefault:g,thrower:y,isArray:o.isArray,asArray:z,notEnumerableProp:_,isPrimitive:d,isObject:p,isError:k,canEvaluate:a,errorObj:s,tryCatch:u,inherits:h,withAppended:m,maybeWrapAsError:f,toFastProperties:w,filledRange:T,toString:S,canAttachTrace:L,ensureErrorObject:D,originatesFromRejection:I,markAsOriginatingFromRejection:C,classString:A,copyDescriptors:P,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:R,hasEnvVariables:O,env:F,global:l,getNativePromise:B,domainBind:U};j.isRecentNode=j.isNode&&(0===(Y=process.versions.node.split(".").map(Number))[0]&&Y[1]>10||Y[0]>0),j.isNode&&j.toFastProperties(process);try{throw new Error}catch(t){j.lastLineError=t}e.exports=j},{"./es5":13}]},{},[4])(4),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)},1924:(t,e,n)=>{"use strict";var i=n(210),r=n(5559),o=r(i("String.prototype.indexOf"));t.exports=function(t,e){var n=i(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?r(n):n}},5559:(t,e,n)=>{"use strict";var i=n(8612),r=n(210),o=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||i.call(a,o),l=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(t){c=null}t.exports=function(t){var e=s(i,a,arguments);if(l&&c){var n=l(e,"length");n.configurable&&c(e,"length",{value:1+u(0,t.length-(arguments.length-1))})}return e};var h=function(){return s(i,o,arguments)};c?c(t.exports,"apply",{value:h}):t.exports.apply=h},4184:(t,e)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n))t.push(r.apply(null,n));else if("object"===o)for(var a in n)i.call(n,a)&&n[a]&&t.push(a)}}return t.join(" ")}t.exports?t.exports=r:void 0===(n=function(){return r}.apply(e,[]))||(t.exports=n)}()},2273:(t,e,n)=>{"use strict";var i=n(2582),r=n(3842),o=n(6960);const a=n(8639).orient2d;function s(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],i=t[0],r=t[0],a=0;a<t.length;a++){var s=t[a];s[0]<e[0]&&(e=s),s[0]>i[0]&&(i=s),s[1]<n[1]&&(n=s),s[1]>r[1]&&(r=s)}var l=[e,n,i,r],c=l.slice();for(a=0;a<t.length;a++)o(t[a],l)||c.push(t[a]);return function(t){t.sort(v);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&p(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var i=[],r=t.length-1;r>=0;r--){for(;i.length>=2&&p(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),e.pop(),e.concat(i)}(c)}(t),a=new i(16);a.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},a.compareMinX=function(t,e){return t[0]-e[0]},a.compareMinY=function(t,e){return t[1]-e[1]},a.load(t);for(var s,c=[],u=0;u<r.length;u++){var h=r[u];a.remove(h),s=m(h,s),c.push(s)}var d=new i(16);for(u=0;u<c.length;u++)d.insert(f(c[u]));for(var _=e*e,y=n*n;c.length;){var b=c.shift(),x=b.p,w=b.next.p,E=g(x,w);if(!(E<y)){var M=E/_;(h=l(a,b.prev.p,x,w,b.next.next.p,M,d))&&Math.min(g(h,x),g(h,w))<=M&&(c.push(b),c.push(m(h,b)),a.remove(h),d.remove(b),d.insert(f(b)),d.insert(f(b.next)))}}b=s;var T=[];do{T.push(b.p),b=b.next}while(b!==s);return T.push(b.p),T}function l(t,e,n,i,o,a,s){for(var l=new r([],c),h=t.data;h;){for(var p=0;p<h.children.length;p++){var f=h.children[p],m=h.leaf?_(f,n,i):u(n,i,f);m>a||l.push({node:f,dist:m})}for(;l.length&&!l.peek().node.children;){var g=l.pop(),y=g.node,v=_(y,e,n),b=_(y,i,o);if(g.dist<v&&g.dist<b&&d(n,y,s)&&d(i,y,s))return y}(h=l.pop())&&(h=h.node)}return null}function c(t,e){return t.dist-e.dist}function u(t,e,n){if(h(t,n)||h(e,n))return 0;var i=y(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=y(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=y(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=y(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(i,r,o,a)}function h(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function d(t,e,n){for(var i,r,o,a,s=Math.min(t[0],e[0]),l=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),u=Math.max(t[1],e[1]),h=n.search({minX:s,minY:l,maxX:c,maxY:u}),d=0;d<h.length;d++)if(i=h[d].p,r=h[d].next.p,o=t,i!==(a=e)&&r!==o&&p(i,r,o)>0!=p(i,r,a)>0&&p(o,a,i)>0!=p(o,a,r)>0)return!1;return!0}function p(t,e,n){return a(t[0],t[1],e[0],e[1],n[0],n[1])}function f(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function m(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function g(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function _(t,e,n){var i=e[0],r=e[1],o=n[0]-i,a=n[1]-r;if(0!==o||0!==a){var s=((t[0]-i)*o+(t[1]-r)*a)/(o*o+a*a);s>1?(i=n[0],r=n[1]):s>0&&(i+=o*s,r+=a*s)}return(o=t[0]-i)*o+(a=t[1]-r)*a}function y(t,e,n,i,r,o,a,s){var l,c,u,h,d=n-t,p=i-e,f=a-r,m=s-o,g=t-r,_=e-o,y=d*d+p*p,v=d*f+p*m,b=f*f+m*m,x=d*g+p*_,w=f*g+m*_,E=y*b-v*v,M=E,T=E;0===E?(c=0,M=1,h=w,T=b):(h=y*w-v*x,(c=v*w-b*x)<0?(c=0,h=w,T=b):c>M&&(c=M,h=w+v,T=b)),h<0?(h=0,-x<0?c=0:-x>y?c=M:(c=-x,M=y)):h>T&&(h=T,-x+v<0?c=0:-x+v>y?c=M:(c=-x+v,M=y));var S=(1-(u=0===h?0:h/T))*r+u*a-((1-(l=0===c?0:c/M))*t+l*n),k=(1-u)*o+u*s-((1-l)*e+l*i);return S*S+k*k}function v(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}t.exports=s,t.exports.default=s},7113:(t,e,n)=>{"use strict";n.d(e,{Z:()=>ft});var i=n(3645),r=n.n(i),o=n(1667),a=n.n(o),s=new URL(n(9353),n.b),l=new URL(n(1037),n.b),c=new URL(n(9981),n.b),u=new URL(n(7274),n.b),h=new URL(n(9480),n.b),d=new URL(n(5019),n.b),p=new URL(n(6771),n.b),f=new URL(n(5393),n.b),m=new URL(n(3393),n.b),g=new URL(n(6377),n.b),_=new URL(n(9360),n.b),y=new URL(n(5947),n.b),v=new URL(n(3561),n.b),b=new URL(n(6200),n.b),x=new URL(n(4850),n.b),w=new URL(n(85),n.b),E=new URL(n(5178),n.b),M=new URL(n(5002),n.b),T=new URL(n(5057),n.b),S=new URL(n(1948),n.b),k=new URL(n(3678),n.b),C=new URL(n(5030),n.b),I=new URL(n(5324),n.b),L=new URL(n(8424),n.b),D=new URL(n(756),n.b),A=new URL(n(3580),n.b),P=new URL(n(2531),n.b),z=new URL(n(7397),n.b),N=new URL(n(7481),n.b),R=new URL(n(7322),n.b),O=r()((function(t){return t[1]})),F=a()(s),B=a()(l),U=a()(c),Y=a()(u),j=a()(h),V=a()(d),G=a()(p),q=a()(f),H=a()(m),$=a()(g),Z=a()(_),W=a()(y),X=a()(v),K=a()(b),J=a()(x),Q=a()(w),tt=a()(E),et=a()(M),nt=a()(T),it=a()(S),rt=a()(k),ot=a()(C),at=a()(I),st=a()(L),lt=a()(D),ct=a()(A),ut=a()(P),ht=a()(z),dt=a()(N),pt=a()(R);O.push([t.id,".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:grab;-webkit-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("+F+")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("+B+")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("+U+")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("+Y+")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("+j+")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("+V+")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("+G+")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("+q+")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("+H+")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("+$+")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("+Z+")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("+W+")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("+X+")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("+K+")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("+J+")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("+Q+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("+tt+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("+et+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("+nt+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("+it+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("+rt+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("+ot+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("+at+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("+et+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("+nt+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("+it+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("+rt+")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("+st+")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("+lt+")}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("+ct+")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("+ut+")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("+ht+")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("+dt+");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("+pt+")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("+dt+')}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{flex-direction:column-reverse}.mapboxgl-popup-anchor-left{flex-direction:row}.mapboxgl-popup-anchor-right{flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform;opacity:1;transition:opacity .2s}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading{width:0;height:0}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after,.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{content:"";border-bottom:7.5px solid #4aa1eb;position:absolute}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:before{border-left:7.5px solid transparent;transform:translateY(-28px) skewY(-20deg)}.mapboxgl-user-location-show-heading .mapboxgl-user-location-heading:after{border-right:7.5px solid transparent;transform:translate(7.5px,-28px) skewY(20deg)}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}',""]);const ft=O},1733:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var i=n(3645),r=n.n(i),o=n(1667),a=n.n(o),s=new URL(n(5522),n.b),l=new URL(n(3943),n.b),c=new URL(n(4748),n.b),u=new URL(n(4830),n.b),h=new URL(n(9247),n.b),d=new URL(n(3595),n.b),p=new URL(n(1039),n.b),f=r()((function(t){return t[1]}));f.push([t.id,"@import url(//fonts.googleapis.com/css?family=Ubuntu:400,300,300italic,400italic,500,500italic,700,700italic);"]),f.push([t.id,"@import url(//fonts.googleapis.com/css?family=Ubuntu+Mono:400,700);"]);var m=a()(s),g=a()(l),_=a()(c),y=a()(u),v=a()(h),b=a()(d),x=a()(p);f.push([t.id,'.select2-container{box-sizing:border-box;display:inline-block;margin:0;position:relative;vertical-align:middle}.select2-container .select2-selection--single{box-sizing:border-box;cursor:pointer;display:block;height:28px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--single .select2-selection__rendered{display:block;padding-left:8px;padding-right:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-selection--single .select2-selection__clear{position:relative}.select2-container[dir=rtl] .select2-selection--single .select2-selection__rendered{padding-right:8px;padding-left:20px}.select2-container .select2-selection--multiple{box-sizing:border-box;cursor:pointer;display:block;min-height:32px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--multiple .select2-selection__rendered{display:inline-block;overflow:hidden;padding-left:8px;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-search--inline{float:left}.select2-container .select2-search--inline .select2-search__field{box-sizing:border-box;border:none;font-size:100%;margin-top:5px;padding:0}.select2-container .select2-search--inline .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-dropdown{background-color:#fff;border:1px solid #aaa;border-radius:4px;box-sizing:border-box;display:block;position:absolute;left:-100000px;width:100%;z-index:1051}.select2-results{display:block}.select2-results__options{list-style:none;margin:0;padding:0}.select2-results__option{padding:6px;user-select:none;-webkit-user-select:none}.select2-results__option[aria-selected]{cursor:pointer}.select2-container--open .select2-dropdown{left:0}.select2-container--open .select2-dropdown--above{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--open .select2-dropdown--below{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-search--dropdown{display:block;padding:4px}.select2-search--dropdown .select2-search__field{padding:4px;width:100%;box-sizing:border-box}.select2-search--dropdown .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-search--dropdown.select2-search--hide{display:none}.select2-close-mask{border:0;margin:0;padding:0;display:block;position:fixed;left:0;top:0;min-height:100%;min-width:100%;height:auto;width:auto;opacity:0;z-index:99;background-color:#fff;filter:alpha(opacity=0)}.select2-hidden-accessible{border:0 !important;clip:rect(0 0 0 0) !important;height:1px !important;margin:-1px !important;overflow:hidden !important;padding:0 !important;position:absolute !important;width:1px !important}.select2-container--default .select2-selection--single{background-color:#fff;border:1px solid #aaa;border-radius:4px}.select2-container--default .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--default .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:bold}.select2-container--default .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--default .select2-selection--single .select2-selection__arrow{height:26px;position:absolute;top:1px;right:1px;width:20px}.select2-container--default .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent transparent;border-style:solid;border-width:5px 4px 0 4px;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--default[dir=rtl] .select2-selection--single .select2-selection__clear{float:left}.select2-container--default[dir=rtl] .select2-selection--single .select2-selection__arrow{left:1px;right:auto}.select2-container--default.select2-container--disabled .select2-selection--single{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection--single .select2-selection__clear{display:none}.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888 transparent;border-width:0 4px 5px 4px}.select2-container--default .select2-selection--multiple{background-color:#fff;border:1px solid #aaa;border-radius:4px;cursor:text}.select2-container--default .select2-selection--multiple .select2-selection__rendered{box-sizing:border-box;list-style:none;margin:0;padding:0 5px;width:100%}.select2-container--default .select2-selection--multiple .select2-selection__rendered li{list-style:none}.select2-container--default .select2-selection--multiple .select2-selection__placeholder{color:#999;margin-top:5px;float:left}.select2-container--default .select2-selection--multiple .select2-selection__clear{cursor:pointer;float:right;font-weight:bold;margin-top:5px;margin-right:10px}.select2-container--default .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove{color:#999;cursor:pointer;display:inline-block;font-weight:bold;margin-right:2px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover{color:#333}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice,.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__placeholder,.select2-container--default[dir=rtl] .select2-selection--multiple .select2-search--inline{float:right}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--default.select2-container--focus .select2-selection--multiple{border:solid #000 1px;outline:0}.select2-container--default.select2-container--disabled .select2-selection--multiple{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection__choice__remove{display:none}.select2-container--default.select2-container--open.select2-container--above .select2-selection--single,.select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple{border-top-left-radius:0;border-top-right-radius:0}.select2-container--default.select2-container--open.select2-container--below .select2-selection--single,.select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--default .select2-search--dropdown .select2-search__field{border:1px solid #aaa}.select2-container--default .select2-search--inline .select2-search__field{background:transparent;border:none;outline:0;box-shadow:none;-webkit-appearance:textfield}.select2-container--default .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--default .select2-results__option[role=group]{padding:0}.select2-container--default .select2-results__option[aria-disabled=true]{color:#999}.select2-container--default .select2-results__option[aria-selected=true]{background-color:#ddd}.select2-container--default .select2-results__option .select2-results__option{padding-left:1em}.select2-container--default .select2-results__option .select2-results__option .select2-results__group{padding-left:0}.select2-container--default .select2-results__option .select2-results__option .select2-results__option{margin-left:-1em;padding-left:2em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-2em;padding-left:3em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-3em;padding-left:4em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-4em;padding-left:5em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-5em;padding-left:6em}.select2-container--default .select2-results__option--highlighted[aria-selected]{background-color:#5897fb;color:#fff}.select2-container--default .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic .select2-selection--single{background-color:#f7f7f7;border:1px solid #aaa;border-radius:4px;outline:0;background-image:-webkit-linear-gradient(top, white 50%, #eeeeee 100%);background-image:-o-linear-gradient(top, white 50%, #eeeeee 100%);background-image:linear-gradient(to bottom, white 50%, #eeeeee 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFFFF", endColorstr="#FFEEEEEE", GradientType=0)}.select2-container--classic .select2-selection--single:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--classic .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:bold;margin-right:10px}.select2-container--classic .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--classic .select2-selection--single .select2-selection__arrow{background-color:#ddd;border:none;border-left:1px solid #aaa;border-top-right-radius:4px;border-bottom-right-radius:4px;height:26px;position:absolute;top:1px;right:1px;width:20px;background-image:-webkit-linear-gradient(top, #eeeeee 50%, #cccccc 100%);background-image:-o-linear-gradient(top, #eeeeee 50%, #cccccc 100%);background-image:linear-gradient(to bottom, #eeeeee 50%, #cccccc 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFEEEEEE", endColorstr="#FFCCCCCC", GradientType=0)}.select2-container--classic .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent transparent;border-style:solid;border-width:5px 4px 0 4px;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--classic[dir=rtl] .select2-selection--single .select2-selection__clear{float:left}.select2-container--classic[dir=rtl] .select2-selection--single .select2-selection__arrow{border:none;border-right:1px solid #aaa;border-radius:0;border-top-left-radius:4px;border-bottom-left-radius:4px;left:1px;right:auto}.select2-container--classic.select2-container--open .select2-selection--single{border:1px solid #5897fb}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow{background:transparent;border:none}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888 transparent;border-width:0 4px 5px 4px}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--single{border-top:none;border-top-left-radius:0;border-top-right-radius:0;background-image:-webkit-linear-gradient(top, white 0%, #eeeeee 50%);background-image:-o-linear-gradient(top, white 0%, #eeeeee 50%);background-image:linear-gradient(to bottom, white 0%, #eeeeee 50%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFFFF", endColorstr="#FFEEEEEE", GradientType=0)}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--single{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0;background-image:-webkit-linear-gradient(top, #eeeeee 50%, white 100%);background-image:-o-linear-gradient(top, #eeeeee 50%, white 100%);background-image:linear-gradient(to bottom, #eeeeee 50%, white 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFEEEEEE", endColorstr="#FFFFFFFF", GradientType=0)}.select2-container--classic .select2-selection--multiple{background-color:#fff;border:1px solid #aaa;border-radius:4px;cursor:text;outline:0}.select2-container--classic .select2-selection--multiple:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--multiple .select2-selection__rendered{list-style:none;margin:0;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__clear{display:none}.select2-container--classic .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove{color:#888;cursor:pointer;display:inline-block;font-weight:bold;margin-right:2px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove:hover{color:#555}.select2-container--classic[dir=rtl] .select2-selection--multiple .select2-selection__choice{float:right}.select2-container--classic[dir=rtl] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--classic[dir=rtl] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--classic.select2-container--open .select2-selection--multiple{border:1px solid #5897fb}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--multiple{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--classic .select2-search--dropdown .select2-search__field{border:1px solid #aaa;outline:0}.select2-container--classic .select2-search--inline .select2-search__field{outline:0;box-shadow:none}.select2-container--classic .select2-dropdown{background-color:#fff;border:1px solid transparent}.select2-container--classic .select2-dropdown--above{border-bottom:none}.select2-container--classic .select2-dropdown--below{border-top:none}.select2-container--classic .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--classic .select2-results__option[role=group]{padding:0}.select2-container--classic .select2-results__option[aria-disabled=true]{color:gray}.select2-container--classic .select2-results__option--highlighted[aria-selected]{background-color:#3875d7;color:#fff}.select2-container--classic .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic.select2-container--open .select2-dropdown{border-color:#5897fb}.panel input[type=checkbox]{margin-bottom:0 !important}.panel li{padding-bottom:0 !important}.callout.alert{background:#bd5151;color:#fff}.callout.alert i,.callout.alert span{color:#fff}i{color:#dedede}a:hover i,a:active i,i.active{color:#8a8a8a}table .button,table select,table input{margin-bottom:0 !important}table input{padding:.25rem !important;height:25px !important}table input[type=color]{max-width:50px}table .select2-container{margin:0}.select2-container{width:100% !important;margin:0 0 1rem}.select2-container .select2-selection--multiple{height:28px;border-radius:0px;border:1px solid #8a8a8a;background-color:#fefefe;outline:medium none;box-shadow:0px 0px 5px #cacaca;transition:box-shadow .5s ease 0s,border-color .25s ease-in-out 0s}.select2-container .select2-selection--multiple input{margin-bottom:0px;height:25px;font-size:16px !important;padding:0px;line-height:25px;position:relative;top:-2px}.select2-container .select2-selection--multiple ul{height:28px !important}.dropdown-pane{box-shadow:0 .5em 1em 0 rgba(0,0,0,.1);font-size:1rem !important}.dropdown-pane .button{margin-bottom:0 !important}.list-group{background-clip:padding-box;margin:0 0 1rem 0}.list-group .list-group-item{background-color:#5479aa;border-color:transparent;color:#555;position:relative;display:block;padding:10px 15px;margin-bottom:-1px;background-color:#fff;border:1px solid #ddd;cursor:pointer}.list-group .list-group-item.active{z-index:2;background-color:#337ab7;border-color:#337ab7;color:#fff}.list-group .list-group-item:hover,.list-group .list-group-item:active{background-color:#f5f5f5}.has-tip{border:none !important;cursor:pointer !important}.pop-tool-bar.text-center .button{float:unset}.pop-tool-bar .button{animation:bounceInDown 900ms 200ms ease-in-out both;text-decoration:none;outline-width:0px;z-index:990;color:#a675b3;text-align:center;display:inline-block}.pop-tool-bar .button:not(.active){box-shadow:inset 0 1px 1px rgba(111,55,125,.8),inset 0 -1px 0px rgba(63,59,113,.2),0 9px 16px 0 rgba(0,0,0,.3),0 4px 3px 0 rgba(0,0,0,.3),0 0 0 1px #150a1e;background-image:linear-gradient(#3b2751, #271739);text-shadow:0 0 21px rgba(223,206,228,.5),0 -1px 0 #311d47}.pop-tool-bar .button:not(.active):hover,.pop-tool-bar .button:not(.active):focus{transition:color 200ms linear;transition:text-shadow 500ms linear;color:#caadd2;text-shadow:0 0 21px rgba(223,206,228,.5),0 0 10px rgba(223,206,228,.4),0 0 2px #2a153c}.pop-tool-bar .button:not(.active):active{color:#e4e3ce !important}.pop-tool-bar .button.active,.pop-tool-bar .button:active{box-shadow:0 9px 16px 0 rgba(0,0,0,.1),0 0 0 1px #170c22,0 2px 1px 0 rgba(121,65,135,.5),inset 0 0 4px 3px rgba(15,8,22,.2);background-image:linear-gradient(#1f132e, #311d47);text-shadow:0 0 21px rgba(223,206,228,.5),0 0 10px rgba(223,206,228,.4),0 0 2px #2a153c;color:#e4e3ce}.pop-tool-bar .button.active:before,.pop-tool-bar .button:active:before{position:absolute;display:block;content:"";width:1px;top:1px;left:-2px;background-image:linear-gradient(rgba(91, 35, 105, 0), #5b2369 41%, #5b2369 59%, rgba(91, 35, 105, 0));box-shadow:-2px 0 6px 0 #5b2369}.pop-tool-bar .button.active:after,.pop-tool-bar .button:active:after{position:absolute;display:block;content:"";width:1px;top:1px;right:-2px;background-image:linear-gradient(rgba(91, 35, 105, 0), #5b2369 41%, #5b2369 59%, rgba(91, 35, 105, 0));box-shadow:2px 0 6px 0 #5b2369}.pop-tool-bar .button.active{z-index:1000}.pop-tool-bar .button:active{z-index:999}.pop-tool-bar .button:last-of-type{border-radius:0 7px 7px 0}.pop-tool-bar .button:first-of-type{border-radius:7px 0 0 7px}.reveal.full{margin-top:0 !important;top:0 !important}.select2-container{border-radius:0;border-color:#cacaca}.select2-container input{margin-bottom:0}.select2-container .select2-selection--single{border-radius:0;border-color:#cacaca}.loading{height:100px;width:100px;position:absolute;left:50%;top:50%;margin-left:-50px;margin-top:-50px;z-index:1}.loading .gear{position:absolute;z-index:-10;width:40px;height:40px;animation:spin 5s infinite}.loading .two{left:40px;width:80px;height:80px;animation:spin-reverse 5s infinite}.loading .three{top:45px;left:-10px;width:60px;height:60px}@keyframes spin{50%{transform:rotate(360deg)}}@keyframes spin-reverse{50%{transform:rotate(-360deg)}}.loading .lil-circle{position:absolute;border-radius:50%;box-shadow:inset 0 0 10px 2px gray,0 0 50px #fff;width:100px;height:100px;opacity:.1}.loading .blur-circle{position:absolute;top:-19px;left:-19px}.loading .text{position:absolute;text-align:center;color:#fff;font-weight:400;width:100px;top:50px;margin-top:-20px;height:40px;line-height:40px;text-shadow:1px 1px 3px #000}.overlayer{position:fixed;top:0;left:0;bottom:0;right:0;width:100%;height:100%;background:rgba(100,100,100,.75);z-index:9998;display:none}.overlayer .loading{z-index:9999}.campaign-monitor .breadcrumbs li{font-size:16px}.mapbox-wrapper{z-index:0;position:relative}.mapbox-wrapper .mapbox-container{z-index:-1}.mapbox-wrapper .map-overlay{z-index:1}.mapbox-wrapper .map-overlay.topleft{position:absolute;left:10px;top:10px}.mapbox-wrapper .map-top-center{position:absolute;width:80%;left:50%;margin-left:-40%;top:5px}.mapbox-wrapper .geocode{margin:0 auto;max-width:640px}.mapbox-wrapper .geocode input{max-width:320px;margin:0 auto;text-align:center;opacity:.45;margin-bottom:0}.mapbox-wrapper .geocode input:focus{opacity:1;text-align:left;border-radius:0px;max-width:640px}.mapbox-wrapper .geocode i{transform:rotateZ(45deg);color:#393;position:relative}.mapbox-wrapper .geocode span{position:relative;left:-9px;top:-2px;width:10px;color:#fff;text-align:left;font-size:10px;font-weight:800}.mapbox-wrapper .geocode.active input{opacity:1;text-align:left;border-radius:0px;max-width:640px}.mapbox-wrapper .geocode.active .accordion{border:1px solid #cacaca;border-top:none}.mapbox-wrapper .geocode .accordion-item{padding:.25rem .5rem}.mapbox-wrapper .geocode .accordion-item:hover,.mapbox-wrapper .geocode .accordion-item.active{background:#b2d7fe;color:#000}.mapboxgl-ctrl-icon.mapboxgl-ctrl-img{border:solid 1px #000;margin:2px}.mapboxgl-ctrl-icon.mapboxgl-ctrl-stree{background-image:url('+m+")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-light{background-image:url("+g+")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-dark{background-image:url("+_+")}.mapboxgl-ctrl-icon.mapboxgl-ctrl-satellite{background-image:url("+y+')}.edit-gtu canvas{cursor:crosshair}#google-map-wrapper{z-index:100}.btn-gtu{font-family:"Ubuntu Mono",monospace;font-size:16px;font-weight:700}.font-small{font-size:12px}.font-medium{font-size:14px}.text-left{text-align:left !important}.text-center{text-align:center !important}.text-right{text-align:right !important}.text-gray{color:#8c8c8c}html,body{font-family:"Ubuntu",verdana,arial,sans-serif;color:#8a8a8a;font-weight:300;background-color:#f8f8f8}.logo{background:#131e30;height:50px;top:0px;left:0px;width:250px;text-align:center;position:fixed}.sidebar{width:50px !important;overflow:visible;position:fixed;bottom:0;left:0 !important;color:#adb8ca;background:#1a2a42 !important;transform:none !important}.sidebar .menu a{color:#fff}.sidebar .menu a:hover,.sidebar .menu a.active{color:rgba(245,159,26,.8);background-color:#162439}.sidebar .menu a:hover i,.sidebar .menu a.active i{color:rgba(245,159,26,.8);text-shadow:1px 4px 6px #1a2a42,0 0 0 #f59f1a,1px 4px 6px #1a2a42}.sidebar .menu .submenu a{padding-left:45px;font-size:12px}.sidebar .menu span,.sidebar .menu .submenu{display:none;padding:0}.sidebar .menu-text{display:none}.sidebar.is-open{width:250px !important}.sidebar.is-open .menu-text,.sidebar.is-open span,.sidebar.is-open .submenu{display:initial}.is-open~.off-canvas-content{left:0px !important}.menu-icon:after{background:#2199e8;box-shadow:0 7px 0 #2199e8,0 14px 0 #2199e8}.menu-icon:hover:after,.menu-icon:focus:after{background:rgba(245,159,26,.8);box-shadow:0 7px 0 rgba(245,159,26,.8),0 14px 0 rgba(245,159,26,.8)}.main{position:relative;padding-bottom:0;margin-bottom:0;background:#f8f8f8 !important;box-shadow:none !important}.main .title-bar{height:45px;box-shadow:0px 0px 5px 0px rgba(165,165,165,.3)}.main .title-bar .title-text{font-size:18px;position:relative;top:2px}.main.left-menu{left:50px;margin-right:50px}.main .full-container{position:absolute;top:0;left:0;right:0;bottom:0;height:100vh;width:100vw;padding-top:45px;overflow:hidden}.main .full-container.campaign,.main .full-container.dmap{top:45px !important;padding-top:0 !important;height:calc(100vh - 45px) !important}.title-bar-center{position:absolute;width:60%;left:50%;margin-left:-30%;display:block}.title-bar-center input{margin:0;height:32px;padding-top:2px;padding-bottom:2px;font-size:12px}.title-bar-center .topSearchBar{margin:0 50px}.section .section-header{font-size:12px;line-height:30px;padding-left:5px;margin-top:25px}.section button,.section .button.row-button{background:transparent;color:#2199e8;text-align:center;padding:5px 10px;border-radius:0;margin-bottom:0}.section button.cirle,.section .button.row-button.cirle{margin-bottom:0;height:24px;width:24px;background:transparent;color:#000;text-align:center;padding:0;border-radius:50%;margin-left:5px}.section button.cirle:hover,.section button.cirle:focus,.section .button.row-button.cirle:hover,.section .button.row-button.cirle:focus{background-color:#1583cc}.section button:hover,.section button:focus,.section button.active,.section button:active,.section .button.row-button:hover,.section .button.row-button:focus,.section .button.row-button.active,.section .button.row-button:active{color:#fff;background-color:#1583cc}.section button:hover i,.section button:hover small,.section button:hover span,.section button:focus i,.section button:focus small,.section button:focus span,.section button.active i,.section button.active small,.section button.active span,.section button:active i,.section button:active small,.section button:active span,.section .button.row-button:hover i,.section .button.row-button:hover small,.section .button.row-button:hover span,.section .button.row-button:focus i,.section .button.row-button:focus small,.section .button.row-button:focus span,.section .button.row-button.active i,.section .button.row-button.active small,.section .button.row-button.active span,.section .button.row-button:active i,.section .button.row-button:active small,.section .button.row-button:active span{color:#fff}.section button i,.section .button.row-button i{color:#2199e8}.section button small,.section button span,.section .button.row-button small,.section .button.row-button span{margin-left:5px;color:#2199e8}.section .section-button{position:relative;top:10px;font-weight:500}.scroll-list-section-body{margin-bottom:20px;background:#fff;color:#555;font-size:14px;font-weight:400}.scroll-list-section-body a{color:#555}.scroll-list-header{font-weight:500;margin:2px 0;color:#fff;background:#5479aa}.scroll-list-header a{font-weight:500;color:#fff}.scroll-list-header i{color:#8a8a8a}.scroll-list-header a:hover i,.scroll-list-header a:active i,.scroll-list-header i.active{color:#fff !important}.scroll-list-item{margin:1px 0;cursor:pointer;background:#fff}.scroll-list-item .dropdown-pane{padding:0;max-width:120px}.scroll-list-item table{margin:0 auto 20px auto;width:90% !important}.scroll-list-item table .button{margin:0}.scroll-list-item table td{padding:0 10px !important}.scroll-list-item table tr{cursor:pointer}.scroll-list-item table .cirle{margin-left:5px}.scroll-list-header,.scroll-list-item{line-height:50px;position:relative}.scroll-list-header:before,.scroll-list-item:before{bottom:0;box-shadow:0 -1px 0 #e5e5e5,0 0 2px rgba(0,0,0,.12),0 2px 4px rgba(0,0,0,.24);content:"";display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}.page-container.Letter .page{width:8.5in;min-height:11in;padding:.5in .25in auto .25in}.page-container.Letter .page .footer{left:.25in;right:.25in;bottom:.25in}.page-container.A4 .page{width:8.27in;min-height:11.69in;padding:.5in .25in auto .25in}.page-container.A4 .page .footer{left:.25in;right:.25in;bottom:.25in}.page-container.A3 .page{width:11.69in;min-height:16.53in;padding:1.25in .5in auto .5in}.page-container.A3 .page .footer{left:.5in;right:.5in;bottom:.5in}.page-container.distribution-print .page{width:12in;min-height:12in;padding:0}.page-container.distribution-print .page.dmap .map-container{min-height:45.3125rem}.page-container.distribution-print .row{max-width:12in;margin:0}.page-container.distribution-print .footer{margin-bottom:10px;padding-left:10px;padding-right:10px;width:100%}.print-toolbar{margin-top:1rem}.page{width:8.27in;min-height:11.69in;padding:.5in .25in;padding-bottom:5.3125rem;margin:.9375rem auto;background:#fff none repeat scroll 0% 0%;box-shadow:1px 1px 4px 0px rgba(0,0,0,.4);position:relative;color:#000}.page:first-child{margin-top:0}.page .title{background:#94b43d;color:#222;text-align:center;font-weight:800;line-height:25pt;height:25pt;font-size:14pt}.page .title span{font-size:14pt}.page .list span{font-size:11pt}.page .map-container{cursor:point;overflow:hidden}.page .map-container img{width:100%;height:100%}.page .map-container .button.reload{position:absolute;top:50%;left:50%;margin-left:-35px;margin-top:-35px;height:70px;width:70px;background-image:-webkit-linear-gradient(top, #f4f1ee, #fff);background-image:linear-gradient(top, #f4f1ee, #fff);border-radius:50%;box-shadow:0px 8px 10px 0px rgba(0,0,0,.3),inset 0px 4px 1px 1px #fff,inset 0px -3px 1px 1px rgba(204,198,197,.5);transition:all .1s linear}.page .map-container .button.reload:hover,.page .map-container .button.reload:focus{background-color:transparent !important;background-image:-webkit-linear-gradient(top, #fff, #f4f1ee);background-image:linear-gradient(top, #fff, #f4f1ee)}.page .map-container .button.reload:active{background-image:-webkit-linear-gradient(top, #efedec, #f7f4f4);background-image:linear-gradient(top, #efedec, #f7f4f4);box-shadow:0 3px 5px 0 rgba(0,0,0,.4),inset 0px -3px 1px 1px rgba(204,198,197,.5)}.page .map-container .button.reload:hover,.page .map-container .button.reload:focus,.page .map-container .button.reload:active{color:#eb2f2f;text-shadow:0px 0px 6px #eb2f2f}.page .map-container .button.reload:hover i,.page .map-container .button.reload:focus i,.page .map-container .button.reload:active i{color:#eb2f2f;text-shadow:0px 0px 6px #eb2f2f}.page.campaign .map-container{width:"100%";min-height:43.125rem}.page.submap .map-container{width:"100%";min-height:44.375rem}.page.dmap .map-container{width:"100%";min-height:49.375rem}.page .color-legend{float:left}.page .color-legend .tips{margin-top:10px}.page .color-legend i,.page .color-legend label{display:inline-block;font-size:9pt}.page .color-legend i{position:relative;top:2px;width:18px;height:12px;border:solid 1px #000;margin-left:3pt !important}.page .color-legend i:first-child{margin-left:0 !important}.page .color-legend i.blue{background-color:blue}.page .color-legend i.green{background-color:lime}.page .color-legend i.yellow{background-color:#ff0}.page .color-legend i.orange{background-color:#ff9600}.page .color-legend i.red{background-color:#b00}.page .color-legend label{margin-left:2pt !important}.page .direction-legend{background:url('+v+") center center;width:4rem;height:4rem;background-size:100% 100%;float:right}.page table{width:100%}.page .footer{position:absolute;bottom:0;border-top:solid .125rem #000;padding-top:.3125rem;height:3.5rem;background:#fff;z-index:99}.page .footer .vargainc-logo{background:#fff url("+b+") center center no-repeat;background-size:100% auto;width:7.5rem;height:3.5rem}.page .footer .timm-logo{background:#fff url("+x+") center center no-repeat;background-size:100% auto;width:10rem;height:3.5rem}.page .footer .left{position:relative;width:90pt;float:left}.page .footer .left .vargainc-log{margin-top:5px}.page .footer .center{position:absolute;left:98pt;right:125pt}.page .footer .right{position:relative;width:120pt;float:right}.page .footer .right img{float:right;margin-top:6px}.page .footer ul{margin:0 !important}.page .footer li{height:10pt;line-height:10pt;position:relative}.page .footer li span{font-size:7pt;display:block;height:10pt;line-height:10pt}.page .footer li span:last-child{position:absolute;right:0;top:0}.page.cover .row{margin-bottom:20pt}.page.cover .client-logo{height:80pt;margin-top:40pt;margin-bottom:40pt}.page.cover .vargainc-log{margin:10pt auto;background:#fff url("+b+') center center no-repeat;background-size:auto 100%;height:40pt}.page.cover label{font-weight:800;font-size:12pt;line-height:1}.page.cover span{font-size:12pt;line-height:1}.gtu-monitor .dropdown-pane{padding:0;max-width:260px;z-index:99999}.gtu .group{margin-right:10px}.gtu .group button:first-child{margin-right:1px;box-shadow:0px 0px 1px 0px rgba(0,0,0,.25)}.gtu .group button:last-child{min-width:25px;margin-left:0;padding-left:0;padding-right:0;box-shadow:1px 1px 1px 1px rgba(0,0,0,.25);background:#fff}.gtu .group button:last-child:hover,.gtu .group button:last-child:focus{box-shadow:0px 0px 1px 0px rgba(0,0,0,.25)}.gtu .button{color:#000 !important;background:transparent;padding:5px 2px;margin-bottom:10px;min-width:80px;font-family:"Ubuntu Mono",monospace;font-size:16px;font-weight:700}.gtu .button.active{box-shadow:1px 1px 1px 1px rgba(0,0,0,.25) !important;opacity:1}.gtu .button.offline{color:#a7a7a7;opacity:.35}.gtu .button.offline i{opacity:1}.gtu i.alert{color:#ec5840}.gtu button.location{min-width:25px;width:25px;text-align:center !important}.gtu i.location{color:#000}.campaign .tiny-button-group .button{padding:4px 12px !important;line-height:18px !important;height:18px !important}.campaign-monitor .section-header{line-height:20px;padding-left:0;margin-top:5px}.color-block{border:solid 1px #cacaca;width:50px;height:25px;padding:.25rem;vertical-align:middle;background-clip:content-box !important;margin:0 auto}.google_map_container{width:100%;height:100%;z-index:1007;background:transparent}.google_map_container .pop-tool-bar{pointer-events:none}.google_map_container *{pointer-events:all}.google-map{z-index:1005;width:100%;height:100%}.google-map .panel{max-height:25rem;overflow-y:auto;padding:.625rem !important}.google-map-pop{background:transparent;pointer-events:none !important;margin-top:0px !important;top:0px !important}iframe{border:none;position:absolute;left:0;right:0;width:100%;top:0;bottom:0}',""]);const w=f},3190:(t,e,n)=>{"use strict";n.d(e,{Z:()=>S});var i=n(3645),r=n.n(i),o=n(7113),a=n(8119),s=n(1667),l=n.n(s),c=new URL(n(7878),n.b),u=new URL(n(1791),n.b),h=new URL(n(9961),n.b),d=new URL(n(8305),n.b),p=new URL(n(9324),n.b),f=new URL(n(1752),n.b),m=new URL(n(1420),n.b),g=new URL(n(3592),n.b),_=r()((function(t){return t[1]}));_.i(o.Z),_.i(a.Z);var y=l()(c),v=l()(u,{hash:"?#iefix&v=4.7.0"}),b=l()(h),x=l()(d),w=l()(p),E=l()(f,{hash:"#fontawesomeregular"}),M=l()(m),T=l()(g);_.push([t.id,'/*!\n *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:"FontAwesome";src:url('+y+");src:url("+v+') format("embedded-opentype"),url('+b+') format("woff2"),url('+x+') format("woff"),url('+w+') format("truetype"),url('+E+') format("svg");font-weight:normal;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.3333333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.2857142857em;text-align:center}.fa-ul{padding-left:0;margin-left:2.1428571429em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.1428571429em;width:2.1428571429em;top:.1428571429em;text-align:center}.fa-li.fa-lg{left:-1.8571428571em}.fa-border{padding:.2em .25em .15em;border:solid .08em #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";-webkit-transform:scale(-1, 1);-ms-transform:scale(-1, 1);transform:scale(-1, 1)}.fa-flip-vertical{-ms-filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";-webkit-transform:scale(1, -1);-ms-transform:scale(1, -1);transform:scale(1, -1)}:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-flip-horizontal,:root .fa-flip-vertical{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:""}.fa-music:before{content:""}.fa-search:before{content:""}.fa-envelope-o:before{content:""}.fa-heart:before{content:""}.fa-star:before{content:""}.fa-star-o:before{content:""}.fa-user:before{content:""}.fa-film:before{content:""}.fa-th-large:before{content:""}.fa-th:before{content:""}.fa-th-list:before{content:""}.fa-check:before{content:""}.fa-remove:before,.fa-close:before,.fa-times:before{content:""}.fa-search-plus:before{content:""}.fa-search-minus:before{content:""}.fa-power-off:before{content:""}.fa-signal:before{content:""}.fa-gear:before,.fa-cog:before{content:""}.fa-trash-o:before{content:""}.fa-home:before{content:""}.fa-file-o:before{content:""}.fa-clock-o:before{content:""}.fa-road:before{content:""}.fa-download:before{content:""}.fa-arrow-circle-o-down:before{content:""}.fa-arrow-circle-o-up:before{content:""}.fa-inbox:before{content:""}.fa-play-circle-o:before{content:""}.fa-rotate-right:before,.fa-repeat:before{content:""}.fa-refresh:before{content:""}.fa-list-alt:before{content:""}.fa-lock:before{content:""}.fa-flag:before{content:""}.fa-headphones:before{content:""}.fa-volume-off:before{content:""}.fa-volume-down:before{content:""}.fa-volume-up:before{content:""}.fa-qrcode:before{content:""}.fa-barcode:before{content:""}.fa-tag:before{content:""}.fa-tags:before{content:""}.fa-book:before{content:""}.fa-bookmark:before{content:""}.fa-print:before{content:""}.fa-camera:before{content:""}.fa-font:before{content:""}.fa-bold:before{content:""}.fa-italic:before{content:""}.fa-text-height:before{content:""}.fa-text-width:before{content:""}.fa-align-left:before{content:""}.fa-align-center:before{content:""}.fa-align-right:before{content:""}.fa-align-justify:before{content:""}.fa-list:before{content:""}.fa-dedent:before,.fa-outdent:before{content:""}.fa-indent:before{content:""}.fa-video-camera:before{content:""}.fa-photo:before,.fa-image:before,.fa-picture-o:before{content:""}.fa-pencil:before{content:""}.fa-map-marker:before{content:""}.fa-adjust:before{content:""}.fa-tint:before{content:""}.fa-edit:before,.fa-pencil-square-o:before{content:""}.fa-share-square-o:before{content:""}.fa-check-square-o:before{content:""}.fa-arrows:before{content:""}.fa-step-backward:before{content:""}.fa-fast-backward:before{content:""}.fa-backward:before{content:""}.fa-play:before{content:""}.fa-pause:before{content:""}.fa-stop:before{content:""}.fa-forward:before{content:""}.fa-fast-forward:before{content:""}.fa-step-forward:before{content:""}.fa-eject:before{content:""}.fa-chevron-left:before{content:""}.fa-chevron-right:before{content:""}.fa-plus-circle:before{content:""}.fa-minus-circle:before{content:""}.fa-times-circle:before{content:""}.fa-check-circle:before{content:""}.fa-question-circle:before{content:""}.fa-info-circle:before{content:""}.fa-crosshairs:before{content:""}.fa-times-circle-o:before{content:""}.fa-check-circle-o:before{content:""}.fa-ban:before{content:""}.fa-arrow-left:before{content:""}.fa-arrow-right:before{content:""}.fa-arrow-up:before{content:""}.fa-arrow-down:before{content:""}.fa-mail-forward:before,.fa-share:before{content:""}.fa-expand:before{content:""}.fa-compress:before{content:""}.fa-plus:before{content:""}.fa-minus:before{content:""}.fa-asterisk:before{content:""}.fa-exclamation-circle:before{content:""}.fa-gift:before{content:""}.fa-leaf:before{content:""}.fa-fire:before{content:""}.fa-eye:before{content:""}.fa-eye-slash:before{content:""}.fa-warning:before,.fa-exclamation-triangle:before{content:""}.fa-plane:before{content:""}.fa-calendar:before{content:""}.fa-random:before{content:""}.fa-comment:before{content:""}.fa-magnet:before{content:""}.fa-chevron-up:before{content:""}.fa-chevron-down:before{content:""}.fa-retweet:before{content:""}.fa-shopping-cart:before{content:""}.fa-folder:before{content:""}.fa-folder-open:before{content:""}.fa-arrows-v:before{content:""}.fa-arrows-h:before{content:""}.fa-bar-chart-o:before,.fa-bar-chart:before{content:""}.fa-twitter-square:before{content:""}.fa-facebook-square:before{content:""}.fa-camera-retro:before{content:""}.fa-key:before{content:""}.fa-gears:before,.fa-cogs:before{content:""}.fa-comments:before{content:""}.fa-thumbs-o-up:before{content:""}.fa-thumbs-o-down:before{content:""}.fa-star-half:before{content:""}.fa-heart-o:before{content:""}.fa-sign-out:before{content:""}.fa-linkedin-square:before{content:""}.fa-thumb-tack:before{content:""}.fa-external-link:before{content:""}.fa-sign-in:before{content:""}.fa-trophy:before{content:""}.fa-github-square:before{content:""}.fa-upload:before{content:""}.fa-lemon-o:before{content:""}.fa-phone:before{content:""}.fa-square-o:before{content:""}.fa-bookmark-o:before{content:""}.fa-phone-square:before{content:""}.fa-twitter:before{content:""}.fa-facebook-f:before,.fa-facebook:before{content:""}.fa-github:before{content:""}.fa-unlock:before{content:""}.fa-credit-card:before{content:""}.fa-feed:before,.fa-rss:before{content:""}.fa-hdd-o:before{content:""}.fa-bullhorn:before{content:""}.fa-bell:before{content:""}.fa-certificate:before{content:""}.fa-hand-o-right:before{content:""}.fa-hand-o-left:before{content:""}.fa-hand-o-up:before{content:""}.fa-hand-o-down:before{content:""}.fa-arrow-circle-left:before{content:""}.fa-arrow-circle-right:before{content:""}.fa-arrow-circle-up:before{content:""}.fa-arrow-circle-down:before{content:""}.fa-globe:before{content:""}.fa-wrench:before{content:""}.fa-tasks:before{content:""}.fa-filter:before{content:""}.fa-briefcase:before{content:""}.fa-arrows-alt:before{content:""}.fa-group:before,.fa-users:before{content:""}.fa-chain:before,.fa-link:before{content:""}.fa-cloud:before{content:""}.fa-flask:before{content:""}.fa-cut:before,.fa-scissors:before{content:""}.fa-copy:before,.fa-files-o:before{content:""}.fa-paperclip:before{content:""}.fa-save:before,.fa-floppy-o:before{content:""}.fa-square:before{content:""}.fa-navicon:before,.fa-reorder:before,.fa-bars:before{content:""}.fa-list-ul:before{content:""}.fa-list-ol:before{content:""}.fa-strikethrough:before{content:""}.fa-underline:before{content:""}.fa-table:before{content:""}.fa-magic:before{content:""}.fa-truck:before{content:""}.fa-pinterest:before{content:""}.fa-pinterest-square:before{content:""}.fa-google-plus-square:before{content:""}.fa-google-plus:before{content:""}.fa-money:before{content:""}.fa-caret-down:before{content:""}.fa-caret-up:before{content:""}.fa-caret-left:before{content:""}.fa-caret-right:before{content:""}.fa-columns:before{content:""}.fa-unsorted:before,.fa-sort:before{content:""}.fa-sort-down:before,.fa-sort-desc:before{content:""}.fa-sort-up:before,.fa-sort-asc:before{content:""}.fa-envelope:before{content:""}.fa-linkedin:before{content:""}.fa-rotate-left:before,.fa-undo:before{content:""}.fa-legal:before,.fa-gavel:before{content:""}.fa-dashboard:before,.fa-tachometer:before{content:""}.fa-comment-o:before{content:""}.fa-comments-o:before{content:""}.fa-flash:before,.fa-bolt:before{content:""}.fa-sitemap:before{content:""}.fa-umbrella:before{content:""}.fa-paste:before,.fa-clipboard:before{content:""}.fa-lightbulb-o:before{content:""}.fa-exchange:before{content:""}.fa-cloud-download:before{content:""}.fa-cloud-upload:before{content:""}.fa-user-md:before{content:""}.fa-stethoscope:before{content:""}.fa-suitcase:before{content:""}.fa-bell-o:before{content:""}.fa-coffee:before{content:""}.fa-cutlery:before{content:""}.fa-file-text-o:before{content:""}.fa-building-o:before{content:""}.fa-hospital-o:before{content:""}.fa-ambulance:before{content:""}.fa-medkit:before{content:""}.fa-fighter-jet:before{content:""}.fa-beer:before{content:""}.fa-h-square:before{content:""}.fa-plus-square:before{content:""}.fa-angle-double-left:before{content:""}.fa-angle-double-right:before{content:""}.fa-angle-double-up:before{content:""}.fa-angle-double-down:before{content:""}.fa-angle-left:before{content:""}.fa-angle-right:before{content:""}.fa-angle-up:before{content:""}.fa-angle-down:before{content:""}.fa-desktop:before{content:""}.fa-laptop:before{content:""}.fa-tablet:before{content:""}.fa-mobile-phone:before,.fa-mobile:before{content:""}.fa-circle-o:before{content:""}.fa-quote-left:before{content:""}.fa-quote-right:before{content:""}.fa-spinner:before{content:""}.fa-circle:before{content:""}.fa-mail-reply:before,.fa-reply:before{content:""}.fa-github-alt:before{content:""}.fa-folder-o:before{content:""}.fa-folder-open-o:before{content:""}.fa-smile-o:before{content:""}.fa-frown-o:before{content:""}.fa-meh-o:before{content:""}.fa-gamepad:before{content:""}.fa-keyboard-o:before{content:""}.fa-flag-o:before{content:""}.fa-flag-checkered:before{content:""}.fa-terminal:before{content:""}.fa-code:before{content:""}.fa-mail-reply-all:before,.fa-reply-all:before{content:""}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:""}.fa-location-arrow:before{content:""}.fa-crop:before{content:""}.fa-code-fork:before{content:""}.fa-unlink:before,.fa-chain-broken:before{content:""}.fa-question:before{content:""}.fa-info:before{content:""}.fa-exclamation:before{content:""}.fa-superscript:before{content:""}.fa-subscript:before{content:""}.fa-eraser:before{content:""}.fa-puzzle-piece:before{content:""}.fa-microphone:before{content:""}.fa-microphone-slash:before{content:""}.fa-shield:before{content:""}.fa-calendar-o:before{content:""}.fa-fire-extinguisher:before{content:""}.fa-rocket:before{content:""}.fa-maxcdn:before{content:""}.fa-chevron-circle-left:before{content:""}.fa-chevron-circle-right:before{content:""}.fa-chevron-circle-up:before{content:""}.fa-chevron-circle-down:before{content:""}.fa-html5:before{content:""}.fa-css3:before{content:""}.fa-anchor:before{content:""}.fa-unlock-alt:before{content:""}.fa-bullseye:before{content:""}.fa-ellipsis-h:before{content:""}.fa-ellipsis-v:before{content:""}.fa-rss-square:before{content:""}.fa-play-circle:before{content:""}.fa-ticket:before{content:""}.fa-minus-square:before{content:""}.fa-minus-square-o:before{content:""}.fa-level-up:before{content:""}.fa-level-down:before{content:""}.fa-check-square:before{content:""}.fa-pencil-square:before{content:""}.fa-external-link-square:before{content:""}.fa-share-square:before{content:""}.fa-compass:before{content:""}.fa-toggle-down:before,.fa-caret-square-o-down:before{content:""}.fa-toggle-up:before,.fa-caret-square-o-up:before{content:""}.fa-toggle-right:before,.fa-caret-square-o-right:before{content:""}.fa-euro:before,.fa-eur:before{content:""}.fa-gbp:before{content:""}.fa-dollar:before,.fa-usd:before{content:""}.fa-rupee:before,.fa-inr:before{content:""}.fa-cny:before,.fa-rmb:before,.fa-yen:before,.fa-jpy:before{content:""}.fa-ruble:before,.fa-rouble:before,.fa-rub:before{content:""}.fa-won:before,.fa-krw:before{content:""}.fa-bitcoin:before,.fa-btc:before{content:""}.fa-file:before{content:""}.fa-file-text:before{content:""}.fa-sort-alpha-asc:before{content:""}.fa-sort-alpha-desc:before{content:""}.fa-sort-amount-asc:before{content:""}.fa-sort-amount-desc:before{content:""}.fa-sort-numeric-asc:before{content:""}.fa-sort-numeric-desc:before{content:""}.fa-thumbs-up:before{content:""}.fa-thumbs-down:before{content:""}.fa-youtube-square:before{content:""}.fa-youtube:before{content:""}.fa-xing:before{content:""}.fa-xing-square:before{content:""}.fa-youtube-play:before{content:""}.fa-dropbox:before{content:""}.fa-stack-overflow:before{content:""}.fa-instagram:before{content:""}.fa-flickr:before{content:""}.fa-adn:before{content:""}.fa-bitbucket:before{content:""}.fa-bitbucket-square:before{content:""}.fa-tumblr:before{content:""}.fa-tumblr-square:before{content:""}.fa-long-arrow-down:before{content:""}.fa-long-arrow-up:before{content:""}.fa-long-arrow-left:before{content:""}.fa-long-arrow-right:before{content:""}.fa-apple:before{content:""}.fa-windows:before{content:""}.fa-android:before{content:""}.fa-linux:before{content:""}.fa-dribbble:before{content:""}.fa-skype:before{content:""}.fa-foursquare:before{content:""}.fa-trello:before{content:""}.fa-female:before{content:""}.fa-male:before{content:""}.fa-gittip:before,.fa-gratipay:before{content:""}.fa-sun-o:before{content:""}.fa-moon-o:before{content:""}.fa-archive:before{content:""}.fa-bug:before{content:""}.fa-vk:before{content:""}.fa-weibo:before{content:""}.fa-renren:before{content:""}.fa-pagelines:before{content:""}.fa-stack-exchange:before{content:""}.fa-arrow-circle-o-right:before{content:""}.fa-arrow-circle-o-left:before{content:""}.fa-toggle-left:before,.fa-caret-square-o-left:before{content:""}.fa-dot-circle-o:before{content:""}.fa-wheelchair:before{content:""}.fa-vimeo-square:before{content:""}.fa-turkish-lira:before,.fa-try:before{content:""}.fa-plus-square-o:before{content:""}.fa-space-shuttle:before{content:""}.fa-slack:before{content:""}.fa-envelope-square:before{content:""}.fa-wordpress:before{content:""}.fa-openid:before{content:""}.fa-institution:before,.fa-bank:before,.fa-university:before{content:""}.fa-mortar-board:before,.fa-graduation-cap:before{content:""}.fa-yahoo:before{content:""}.fa-google:before{content:""}.fa-reddit:before{content:""}.fa-reddit-square:before{content:""}.fa-stumbleupon-circle:before{content:""}.fa-stumbleupon:before{content:""}.fa-delicious:before{content:""}.fa-digg:before{content:""}.fa-pied-piper-pp:before{content:""}.fa-pied-piper-alt:before{content:""}.fa-drupal:before{content:""}.fa-joomla:before{content:""}.fa-language:before{content:""}.fa-fax:before{content:""}.fa-building:before{content:""}.fa-child:before{content:""}.fa-paw:before{content:""}.fa-spoon:before{content:""}.fa-cube:before{content:""}.fa-cubes:before{content:""}.fa-behance:before{content:""}.fa-behance-square:before{content:""}.fa-steam:before{content:""}.fa-steam-square:before{content:""}.fa-recycle:before{content:""}.fa-automobile:before,.fa-car:before{content:""}.fa-cab:before,.fa-taxi:before{content:""}.fa-tree:before{content:""}.fa-spotify:before{content:""}.fa-deviantart:before{content:""}.fa-soundcloud:before{content:""}.fa-database:before{content:""}.fa-file-pdf-o:before{content:""}.fa-file-word-o:before{content:""}.fa-file-excel-o:before{content:""}.fa-file-powerpoint-o:before{content:""}.fa-file-photo-o:before,.fa-file-picture-o:before,.fa-file-image-o:before{content:""}.fa-file-zip-o:before,.fa-file-archive-o:before{content:""}.fa-file-sound-o:before,.fa-file-audio-o:before{content:""}.fa-file-movie-o:before,.fa-file-video-o:before{content:""}.fa-file-code-o:before{content:""}.fa-vine:before{content:""}.fa-codepen:before{content:""}.fa-jsfiddle:before{content:""}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-saver:before,.fa-support:before,.fa-life-ring:before{content:""}.fa-circle-o-notch:before{content:""}.fa-ra:before,.fa-resistance:before,.fa-rebel:before{content:""}.fa-ge:before,.fa-empire:before{content:""}.fa-git-square:before{content:""}.fa-git:before{content:""}.fa-y-combinator-square:before,.fa-yc-square:before,.fa-hacker-news:before{content:""}.fa-tencent-weibo:before{content:""}.fa-qq:before{content:""}.fa-wechat:before,.fa-weixin:before{content:""}.fa-send:before,.fa-paper-plane:before{content:""}.fa-send-o:before,.fa-paper-plane-o:before{content:""}.fa-history:before{content:""}.fa-circle-thin:before{content:""}.fa-header:before{content:""}.fa-paragraph:before{content:""}.fa-sliders:before{content:""}.fa-share-alt:before{content:""}.fa-share-alt-square:before{content:""}.fa-bomb:before{content:""}.fa-soccer-ball-o:before,.fa-futbol-o:before{content:""}.fa-tty:before{content:""}.fa-binoculars:before{content:""}.fa-plug:before{content:""}.fa-slideshare:before{content:""}.fa-twitch:before{content:""}.fa-yelp:before{content:""}.fa-newspaper-o:before{content:""}.fa-wifi:before{content:""}.fa-calculator:before{content:""}.fa-paypal:before{content:""}.fa-google-wallet:before{content:""}.fa-cc-visa:before{content:""}.fa-cc-mastercard:before{content:""}.fa-cc-discover:before{content:""}.fa-cc-amex:before{content:""}.fa-cc-paypal:before{content:""}.fa-cc-stripe:before{content:""}.fa-bell-slash:before{content:""}.fa-bell-slash-o:before{content:""}.fa-trash:before{content:""}.fa-copyright:before{content:""}.fa-at:before{content:""}.fa-eyedropper:before{content:""}.fa-paint-brush:before{content:""}.fa-birthday-cake:before{content:""}.fa-area-chart:before{content:""}.fa-pie-chart:before{content:""}.fa-line-chart:before{content:""}.fa-lastfm:before{content:""}.fa-lastfm-square:before{content:""}.fa-toggle-off:before{content:""}.fa-toggle-on:before{content:""}.fa-bicycle:before{content:""}.fa-bus:before{content:""}.fa-ioxhost:before{content:""}.fa-angellist:before{content:""}.fa-cc:before{content:""}.fa-shekel:before,.fa-sheqel:before,.fa-ils:before{content:""}.fa-meanpath:before{content:""}.fa-buysellads:before{content:""}.fa-connectdevelop:before{content:""}.fa-dashcube:before{content:""}.fa-forumbee:before{content:""}.fa-leanpub:before{content:""}.fa-sellsy:before{content:""}.fa-shirtsinbulk:before{content:""}.fa-simplybuilt:before{content:""}.fa-skyatlas:before{content:""}.fa-cart-plus:before{content:""}.fa-cart-arrow-down:before{content:""}.fa-diamond:before{content:""}.fa-ship:before{content:""}.fa-user-secret:before{content:""}.fa-motorcycle:before{content:""}.fa-street-view:before{content:""}.fa-heartbeat:before{content:""}.fa-venus:before{content:""}.fa-mars:before{content:""}.fa-mercury:before{content:""}.fa-intersex:before,.fa-transgender:before{content:""}.fa-transgender-alt:before{content:""}.fa-venus-double:before{content:""}.fa-mars-double:before{content:""}.fa-venus-mars:before{content:""}.fa-mars-stroke:before{content:""}.fa-mars-stroke-v:before{content:""}.fa-mars-stroke-h:before{content:""}.fa-neuter:before{content:""}.fa-genderless:before{content:""}.fa-facebook-official:before{content:""}.fa-pinterest-p:before{content:""}.fa-whatsapp:before{content:""}.fa-server:before{content:""}.fa-user-plus:before{content:""}.fa-user-times:before{content:""}.fa-hotel:before,.fa-bed:before{content:""}.fa-viacoin:before{content:""}.fa-train:before{content:""}.fa-subway:before{content:""}.fa-medium:before{content:""}.fa-yc:before,.fa-y-combinator:before{content:""}.fa-optin-monster:before{content:""}.fa-opencart:before{content:""}.fa-expeditedssl:before{content:""}.fa-battery-4:before,.fa-battery:before,.fa-battery-full:before{content:""}.fa-battery-3:before,.fa-battery-three-quarters:before{content:""}.fa-battery-2:before,.fa-battery-half:before{content:""}.fa-battery-1:before,.fa-battery-quarter:before{content:""}.fa-battery-0:before,.fa-battery-empty:before{content:""}.fa-mouse-pointer:before{content:""}.fa-i-cursor:before{content:""}.fa-object-group:before{content:""}.fa-object-ungroup:before{content:""}.fa-sticky-note:before{content:""}.fa-sticky-note-o:before{content:""}.fa-cc-jcb:before{content:""}.fa-cc-diners-club:before{content:""}.fa-clone:before{content:""}.fa-balance-scale:before{content:""}.fa-hourglass-o:before{content:""}.fa-hourglass-1:before,.fa-hourglass-start:before{content:""}.fa-hourglass-2:before,.fa-hourglass-half:before{content:""}.fa-hourglass-3:before,.fa-hourglass-end:before{content:""}.fa-hourglass:before{content:""}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:""}.fa-hand-stop-o:before,.fa-hand-paper-o:before{content:""}.fa-hand-scissors-o:before{content:""}.fa-hand-lizard-o:before{content:""}.fa-hand-spock-o:before{content:""}.fa-hand-pointer-o:before{content:""}.fa-hand-peace-o:before{content:""}.fa-trademark:before{content:""}.fa-registered:before{content:""}.fa-creative-commons:before{content:""}.fa-gg:before{content:""}.fa-gg-circle:before{content:""}.fa-tripadvisor:before{content:""}.fa-odnoklassniki:before{content:""}.fa-odnoklassniki-square:before{content:""}.fa-get-pocket:before{content:""}.fa-wikipedia-w:before{content:""}.fa-safari:before{content:""}.fa-chrome:before{content:""}.fa-firefox:before{content:""}.fa-opera:before{content:""}.fa-internet-explorer:before{content:""}.fa-tv:before,.fa-television:before{content:""}.fa-contao:before{content:""}.fa-500px:before{content:""}.fa-amazon:before{content:""}.fa-calendar-plus-o:before{content:""}.fa-calendar-minus-o:before{content:""}.fa-calendar-times-o:before{content:""}.fa-calendar-check-o:before{content:""}.fa-industry:before{content:""}.fa-map-pin:before{content:""}.fa-map-signs:before{content:""}.fa-map-o:before{content:""}.fa-map:before{content:""}.fa-commenting:before{content:""}.fa-commenting-o:before{content:""}.fa-houzz:before{content:""}.fa-vimeo:before{content:""}.fa-black-tie:before{content:""}.fa-fonticons:before{content:""}.fa-reddit-alien:before{content:""}.fa-edge:before{content:""}.fa-credit-card-alt:before{content:""}.fa-codiepie:before{content:""}.fa-modx:before{content:""}.fa-fort-awesome:before{content:""}.fa-usb:before{content:""}.fa-product-hunt:before{content:""}.fa-mixcloud:before{content:""}.fa-scribd:before{content:""}.fa-pause-circle:before{content:""}.fa-pause-circle-o:before{content:""}.fa-stop-circle:before{content:""}.fa-stop-circle-o:before{content:""}.fa-shopping-bag:before{content:""}.fa-shopping-basket:before{content:""}.fa-hashtag:before{content:""}.fa-bluetooth:before{content:""}.fa-bluetooth-b:before{content:""}.fa-percent:before{content:""}.fa-gitlab:before{content:""}.fa-wpbeginner:before{content:""}.fa-wpforms:before{content:""}.fa-envira:before{content:""}.fa-universal-access:before{content:""}.fa-wheelchair-alt:before{content:""}.fa-question-circle-o:before{content:""}.fa-blind:before{content:""}.fa-audio-description:before{content:""}.fa-volume-control-phone:before{content:""}.fa-braille:before{content:""}.fa-assistive-listening-systems:before{content:""}.fa-asl-interpreting:before,.fa-american-sign-language-interpreting:before{content:""}.fa-deafness:before,.fa-hard-of-hearing:before,.fa-deaf:before{content:""}.fa-glide:before{content:""}.fa-glide-g:before{content:""}.fa-signing:before,.fa-sign-language:before{content:""}.fa-low-vision:before{content:""}.fa-viadeo:before{content:""}.fa-viadeo-square:before{content:""}.fa-snapchat:before{content:""}.fa-snapchat-ghost:before{content:""}.fa-snapchat-square:before{content:""}.fa-pied-piper:before{content:""}.fa-first-order:before{content:""}.fa-yoast:before{content:""}.fa-themeisle:before{content:""}.fa-google-plus-circle:before,.fa-google-plus-official:before{content:""}.fa-fa:before,.fa-font-awesome:before{content:""}.fa-handshake-o:before{content:""}.fa-envelope-open:before{content:""}.fa-envelope-open-o:before{content:""}.fa-linode:before{content:""}.fa-address-book:before{content:""}.fa-address-book-o:before{content:""}.fa-vcard:before,.fa-address-card:before{content:""}.fa-vcard-o:before,.fa-address-card-o:before{content:""}.fa-user-circle:before{content:""}.fa-user-circle-o:before{content:""}.fa-user-o:before{content:""}.fa-id-badge:before{content:""}.fa-drivers-license:before,.fa-id-card:before{content:""}.fa-drivers-license-o:before,.fa-id-card-o:before{content:""}.fa-quora:before{content:""}.fa-free-code-camp:before{content:""}.fa-telegram:before{content:""}.fa-thermometer-4:before,.fa-thermometer:before,.fa-thermometer-full:before{content:""}.fa-thermometer-3:before,.fa-thermometer-three-quarters:before{content:""}.fa-thermometer-2:before,.fa-thermometer-half:before{content:""}.fa-thermometer-1:before,.fa-thermometer-quarter:before{content:""}.fa-thermometer-0:before,.fa-thermometer-empty:before{content:""}.fa-shower:before{content:""}.fa-bathtub:before,.fa-s15:before,.fa-bath:before{content:""}.fa-podcast:before{content:""}.fa-window-maximize:before{content:""}.fa-window-minimize:before{content:""}.fa-window-restore:before{content:""}.fa-times-rectangle:before,.fa-window-close:before{content:""}.fa-times-rectangle-o:before,.fa-window-close-o:before{content:""}.fa-bandcamp:before{content:""}.fa-grav:before{content:""}.fa-etsy:before{content:""}.fa-imdb:before{content:""}.fa-ravelry:before{content:""}.fa-eercast:before{content:""}.fa-microchip:before{content:""}.fa-snowflake-o:before{content:""}.fa-superpowers:before{content:""}.fa-wpexplorer:before{content:""}.fa-meetup:before{content:""}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}.select2-container{box-sizing:border-box;display:inline-block;margin:0;position:relative;vertical-align:middle}.select2-container .select2-selection--single{box-sizing:border-box;cursor:pointer;display:block;height:28px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--single .select2-selection__rendered{display:block;padding-left:8px;padding-right:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-selection--single .select2-selection__clear{position:relative}.select2-container[dir=rtl] .select2-selection--single .select2-selection__rendered{padding-right:8px;padding-left:20px}.select2-container .select2-selection--multiple{box-sizing:border-box;cursor:pointer;display:block;min-height:32px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--multiple .select2-selection__rendered{display:inline-block;overflow:hidden;padding-left:8px;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-search--inline{float:left}.select2-container .select2-search--inline .select2-search__field{box-sizing:border-box;border:none;font-size:100%;margin-top:5px;padding:0}.select2-container .select2-search--inline .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-dropdown{background-color:#fff;border:1px solid #aaa;border-radius:4px;box-sizing:border-box;display:block;position:absolute;left:-100000px;width:100%;z-index:1051}.select2-results{display:block}.select2-results__options{list-style:none;margin:0;padding:0}.select2-results__option{padding:6px;user-select:none;-webkit-user-select:none}.select2-results__option[aria-selected]{cursor:pointer}.select2-container--open .select2-dropdown{left:0}.select2-container--open .select2-dropdown--above{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--open .select2-dropdown--below{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-search--dropdown{display:block;padding:4px}.select2-search--dropdown .select2-search__field{padding:4px;width:100%;box-sizing:border-box}.select2-search--dropdown .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-search--dropdown.select2-search--hide{display:none}.select2-close-mask{border:0;margin:0;padding:0;display:block;position:fixed;left:0;top:0;min-height:100%;min-width:100%;height:auto;width:auto;opacity:0;z-index:99;background-color:#fff;filter:alpha(opacity=0)}.select2-hidden-accessible{border:0 !important;clip:rect(0 0 0 0) !important;height:1px !important;margin:-1px !important;overflow:hidden !important;padding:0 !important;position:absolute !important;width:1px !important}.select2-container--default .select2-selection--single{background-color:#fff;border:1px solid #aaa;border-radius:4px}.select2-container--default .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--default .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:bold}.select2-container--default .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--default .select2-selection--single .select2-selection__arrow{height:26px;position:absolute;top:1px;right:1px;width:20px}.select2-container--default .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent transparent;border-style:solid;border-width:5px 4px 0 4px;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--default[dir=rtl] .select2-selection--single .select2-selection__clear{float:left}.select2-container--default[dir=rtl] .select2-selection--single .select2-selection__arrow{left:1px;right:auto}.select2-container--default.select2-container--disabled .select2-selection--single{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection--single .select2-selection__clear{display:none}.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888 transparent;border-width:0 4px 5px 4px}.select2-container--default .select2-selection--multiple{background-color:#fff;border:1px solid #aaa;border-radius:4px;cursor:text}.select2-container--default .select2-selection--multiple .select2-selection__rendered{box-sizing:border-box;list-style:none;margin:0;padding:0 5px;width:100%}.select2-container--default .select2-selection--multiple .select2-selection__rendered li{list-style:none}.select2-container--default .select2-selection--multiple .select2-selection__placeholder{color:#999;margin-top:5px;float:left}.select2-container--default .select2-selection--multiple .select2-selection__clear{cursor:pointer;float:right;font-weight:bold;margin-top:5px;margin-right:10px}.select2-container--default .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove{color:#999;cursor:pointer;display:inline-block;font-weight:bold;margin-right:2px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover{color:#333}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice,.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__placeholder,.select2-container--default[dir=rtl] .select2-selection--multiple .select2-search--inline{float:right}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--default.select2-container--focus .select2-selection--multiple{border:solid #000 1px;outline:0}.select2-container--default.select2-container--disabled .select2-selection--multiple{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection__choice__remove{display:none}.select2-container--default.select2-container--open.select2-container--above .select2-selection--single,.select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple{border-top-left-radius:0;border-top-right-radius:0}.select2-container--default.select2-container--open.select2-container--below .select2-selection--single,.select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--default .select2-search--dropdown .select2-search__field{border:1px solid #aaa}.select2-container--default .select2-search--inline .select2-search__field{background:transparent;border:none;outline:0;box-shadow:none;-webkit-appearance:textfield}.select2-container--default .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--default .select2-results__option[role=group]{padding:0}.select2-container--default .select2-results__option[aria-disabled=true]{color:#999}.select2-container--default .select2-results__option[aria-selected=true]{background-color:#ddd}.select2-container--default .select2-results__option .select2-results__option{padding-left:1em}.select2-container--default .select2-results__option .select2-results__option .select2-results__group{padding-left:0}.select2-container--default .select2-results__option .select2-results__option .select2-results__option{margin-left:-1em;padding-left:2em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-2em;padding-left:3em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-3em;padding-left:4em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-4em;padding-left:5em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-5em;padding-left:6em}.select2-container--default .select2-results__option--highlighted[aria-selected]{background-color:#5897fb;color:#fff}.select2-container--default .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic .select2-selection--single{background-color:#f7f7f7;border:1px solid #aaa;border-radius:4px;outline:0;background-image:-webkit-linear-gradient(top, white 50%, #eeeeee 100%);background-image:-o-linear-gradient(top, white 50%, #eeeeee 100%);background-image:linear-gradient(to bottom, white 50%, #eeeeee 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFFFF", endColorstr="#FFEEEEEE", GradientType=0)}.select2-container--classic .select2-selection--single:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--classic .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:bold;margin-right:10px}.select2-container--classic .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--classic .select2-selection--single .select2-selection__arrow{background-color:#ddd;border:none;border-left:1px solid #aaa;border-top-right-radius:4px;border-bottom-right-radius:4px;height:26px;position:absolute;top:1px;right:1px;width:20px;background-image:-webkit-linear-gradient(top, #eeeeee 50%, #cccccc 100%);background-image:-o-linear-gradient(top, #eeeeee 50%, #cccccc 100%);background-image:linear-gradient(to bottom, #eeeeee 50%, #cccccc 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFEEEEEE", endColorstr="#FFCCCCCC", GradientType=0)}.select2-container--classic .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent transparent;border-style:solid;border-width:5px 4px 0 4px;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--classic[dir=rtl] .select2-selection--single .select2-selection__clear{float:left}.select2-container--classic[dir=rtl] .select2-selection--single .select2-selection__arrow{border:none;border-right:1px solid #aaa;border-radius:0;border-top-left-radius:4px;border-bottom-left-radius:4px;left:1px;right:auto}.select2-container--classic.select2-container--open .select2-selection--single{border:1px solid #5897fb}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow{background:transparent;border:none}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888 transparent;border-width:0 4px 5px 4px}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--single{border-top:none;border-top-left-radius:0;border-top-right-radius:0;background-image:-webkit-linear-gradient(top, white 0%, #eeeeee 50%);background-image:-o-linear-gradient(top, white 0%, #eeeeee 50%);background-image:linear-gradient(to bottom, white 0%, #eeeeee 50%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFFFF", endColorstr="#FFEEEEEE", GradientType=0)}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--single{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0;background-image:-webkit-linear-gradient(top, #eeeeee 50%, white 100%);background-image:-o-linear-gradient(top, #eeeeee 50%, white 100%);background-image:linear-gradient(to bottom, #eeeeee 50%, white 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFEEEEEE", endColorstr="#FFFFFFFF", GradientType=0)}.select2-container--classic .select2-selection--multiple{background-color:#fff;border:1px solid #aaa;border-radius:4px;cursor:text;outline:0}.select2-container--classic .select2-selection--multiple:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--multiple .select2-selection__rendered{list-style:none;margin:0;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__clear{display:none}.select2-container--classic .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove{color:#888;cursor:pointer;display:inline-block;font-weight:bold;margin-right:2px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove:hover{color:#555}.select2-container--classic[dir=rtl] .select2-selection--multiple .select2-selection__choice{float:right}.select2-container--classic[dir=rtl] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--classic[dir=rtl] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--classic.select2-container--open .select2-selection--multiple{border:1px solid #5897fb}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--multiple{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--classic .select2-search--dropdown .select2-search__field{border:1px solid #aaa;outline:0}.select2-container--classic .select2-search--inline .select2-search__field{outline:0;box-shadow:none}.select2-container--classic .select2-dropdown{background-color:#fff;border:1px solid transparent}.select2-container--classic .select2-dropdown--above{border-bottom:none}.select2-container--classic .select2-dropdown--below{border-top:none}.select2-container--classic .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--classic .select2-results__option[role=group]{padding:0}.select2-container--classic .select2-results__option[aria-disabled=true]{color:gray}.select2-container--classic .select2-results__option--highlighted[aria-selected]{background-color:#3875d7;color:#fff}.select2-container--classic .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic.select2-container--open .select2-dropdown{border-color:#5897fb}.select2-container input{height:1.75rem !important}@media print,screen and (min-width: 90.25em){.reveal.large,.reveal.small,.reveal.tiny,.reveal{right:auto;left:auto;margin:0 auto}}/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:0;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}[data-whatintent=mouse] *,[data-whatintent=mouse] *:focus,[data-whatintent=touch] *,[data-whatintent=touch] *:focus,[data-whatinput=mouse] *,[data-whatinput=mouse] *:focus,[data-whatinput=touch] *,[data-whatinput=touch] *:focus{outline:none}[draggable=false]{-webkit-touch-callout:none;-webkit-user-select:none}.foundation-mq{font-family:"small=0em&medium=90.25em&large=106.25em"}html{box-sizing:border-box;font-size:100%}*,*::before,*::after{box-sizing:inherit}body{margin:0;padding:0;background:#fefefe;font-family:"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;font-weight:normal;line-height:1.5;color:#0a0a0a;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}img{display:inline-block;vertical-align:middle;max-width:100%;height:auto;-ms-interpolation-mode:bicubic}textarea{height:auto;min-height:50px;border-radius:0}select{box-sizing:border-box;width:100%;border-radius:0}.map_canvas img,.map_canvas embed,.map_canvas object,.mqa-display img,.mqa-display embed,.mqa-display object{max-width:none !important}button{padding:0;appearance:none;border:0;border-radius:0;background:transparent;line-height:1;cursor:auto}[data-whatinput=mouse] button{outline:0}pre{overflow:auto;-webkit-overflow-scrolling:touch}button,input,optgroup,select,textarea{font-family:inherit}.is-visible{display:block !important}.is-hidden{display:none !important}[type=text],[type=password],[type=date],[type=datetime],[type=datetime-local],[type=month],[type=week],[type=email],[type=number],[type=search],[type=tel],[type=time],[type=url],[type=color],textarea{display:block;box-sizing:border-box;width:100%;height:2.4375rem;margin:0 0 1rem;padding:.5rem;border:1px solid #cacaca;border-radius:0;background-color:#fefefe;box-shadow:inset 0 1px 2px rgba(10,10,10,.1);font-family:inherit;font-size:1rem;font-weight:normal;line-height:1.5;color:#0a0a0a;transition:box-shadow .5s,border-color .25s ease-in-out;appearance:none}[type=text]:focus,[type=password]:focus,[type=date]:focus,[type=datetime]:focus,[type=datetime-local]:focus,[type=month]:focus,[type=week]:focus,[type=email]:focus,[type=number]:focus,[type=search]:focus,[type=tel]:focus,[type=time]:focus,[type=url]:focus,[type=color]:focus,textarea:focus{outline:none;border:1px solid #8a8a8a;background-color:#fefefe;box-shadow:0 0 5px #cacaca;transition:box-shadow .5s,border-color .25s ease-in-out}textarea{max-width:100%}textarea[rows]{height:auto}input:disabled,input[readonly],textarea:disabled,textarea[readonly]{background-color:#e6e6e6;cursor:not-allowed}[type=submit],[type=button]{appearance:none;border-radius:0}input[type=search]{box-sizing:border-box}::placeholder{color:#cacaca}[type=file],[type=checkbox],[type=radio]{margin:0 0 1rem}[type=checkbox]+label,[type=radio]+label{display:inline-block;vertical-align:baseline;margin-left:.5rem;margin-right:1rem;margin-bottom:0}[type=checkbox]+label[for],[type=radio]+label[for]{cursor:pointer}label>[type=checkbox],label>[type=radio]{margin-right:.5rem}[type=file]{width:100%}label{display:block;margin:0;font-size:.875rem;font-weight:normal;line-height:1.8;color:#0a0a0a}label.middle{margin:0 0 1rem;line-height:1.5;padding:.5625rem 0}.help-text{margin-top:-0.5rem;font-size:.8125rem;font-style:italic;color:#0a0a0a}.input-group{display:flex;width:100%;margin-bottom:1rem;align-items:stretch}.input-group>:first-child,.input-group>:first-child.input-group-button>*{border-radius:0 0 0 0}.input-group>:last-child,.input-group>:last-child.input-group-button>*{border-radius:0 0 0 0}.input-group-button a,.input-group-button input,.input-group-button button,.input-group-button label,.input-group-button,.input-group-field,.input-group-label{margin:0;white-space:nowrap}.input-group-label{padding:0 1rem;border:1px solid #cacaca;background:#e6e6e6;color:#0a0a0a;text-align:center;white-space:nowrap;display:flex;flex:0 0 auto;align-items:center}.input-group-label:first-child{border-right:0}.input-group-label:last-child{border-left:0}.input-group-field{border-radius:0;flex:1 1 0px;min-width:0}.input-group-button{padding-top:0;padding-bottom:0;text-align:center;display:flex;flex:0 0 auto}.input-group-button a,.input-group-button input,.input-group-button button,.input-group-button label{align-self:stretch;height:auto;padding-top:0;padding-bottom:0;font-size:1rem}fieldset{margin:0;padding:0;border:0}legend{max-width:100%;margin-bottom:.5rem}.fieldset{margin:1.125rem 0;padding:1.25rem;border:1px solid #cacaca}.fieldset legend{margin:0;margin-left:-.1875rem;padding:0 .1875rem}select{height:2.4375rem;margin:0 0 1rem;padding:.5rem;appearance:none;border:1px solid #cacaca;border-radius:0;background-color:#fefefe;font-family:inherit;font-size:1rem;font-weight:normal;line-height:1.5;color:#0a0a0a;background-image:url('+M+");background-origin:content-box;background-position:right -1rem center;background-repeat:no-repeat;background-size:9px 6px;padding-right:1.5rem;transition:box-shadow .5s,border-color .25s ease-in-out}@media screen and (min-width: 0\\0 ){select{background-image:url("+T+')}}select:focus{outline:none;border:1px solid #8a8a8a;background-color:#fefefe;box-shadow:0 0 5px #cacaca;transition:box-shadow .5s,border-color .25s ease-in-out}select:disabled{background-color:#e6e6e6;cursor:not-allowed}select::-ms-expand{display:none}select[multiple]{height:auto;background-image:none}select:not([multiple]){padding-top:0;padding-bottom:0}.is-invalid-input:not(:focus){border-color:#ec5840;background-color:#fcedeb}.is-invalid-input:not(:focus)::placeholder{color:#ec5840}.is-invalid-label{color:#ec5840}.form-error{display:none;margin-top:-0.5rem;margin-bottom:1rem;font-size:.75rem;font-weight:bold;color:#ec5840}.form-error.is-visible{display:block}div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}p{margin-bottom:1rem;font-size:inherit;line-height:1.6;text-rendering:optimizeLegibility}em,i{font-style:italic;line-height:inherit}strong,b{font-weight:bold;line-height:inherit}small{font-size:80%;line-height:inherit}h1,.h1,h2,.h2,h3,.h3,h4,.h4,h5,.h5,h6,.h6{font-family:"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;font-style:normal;font-weight:normal;color:inherit;text-rendering:optimizeLegibility}h1 small,.h1 small,h2 small,.h2 small,h3 small,.h3 small,h4 small,.h4 small,h5 small,.h5 small,h6 small,.h6 small{line-height:0;color:#cacaca}h1,.h1{font-size:1.5rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h2,.h2{font-size:1.25rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h3,.h3{font-size:1.1875rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h4,.h4{font-size:1.125rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h5,.h5{font-size:1.0625rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}h6,.h6{font-size:1rem;line-height:1.4;margin-top:0;margin-bottom:.5rem}@media print,screen and (min-width: 90.25em){h1,.h1{font-size:3rem}h2,.h2{font-size:2.5rem}h3,.h3{font-size:1.9375rem}h4,.h4{font-size:1.5625rem}h5,.h5{font-size:1.25rem}h6,.h6{font-size:1rem}}a{line-height:inherit;color:#2199e8;text-decoration:none;cursor:pointer}a:hover,a:focus{color:#1585cf}a img{border:0}hr{clear:both;max-width:87.5rem;height:0;margin:1.25rem auto;border-top:0;border-right:0;border-bottom:1px solid #cacaca;border-left:0}ul,ol,dl{margin-bottom:1rem;list-style-position:outside;line-height:1.6}li{font-size:inherit}ul{margin-left:1.25rem;list-style-type:disc}ol{margin-left:1.25rem}ul ul,ul ol,ol ul,ol ol{margin-left:1.25rem;margin-bottom:0}dl{margin-bottom:1rem}dl dt{margin-bottom:.3rem;font-weight:bold}blockquote{margin:0 0 1rem;padding:.5625rem 1.25rem 0 1.1875rem;border-left:1px solid #cacaca}blockquote,blockquote p{line-height:1.6;color:#8a8a8a}abbr,abbr[title]{border-bottom:1px dotted #0a0a0a;cursor:help;text-decoration:none}figure{margin:0}kbd{margin:0;padding:.125rem .25rem 0;background-color:#e6e6e6;font-family:Consolas,"Liberation Mono",Courier,monospace;color:#0a0a0a}.subheader{margin-top:.2rem;margin-bottom:.5rem;font-weight:normal;line-height:1.4;color:#8a8a8a}.lead{font-size:125%;line-height:1.6}.stat{font-size:2.5rem;line-height:1}p+.stat{margin-top:-1rem}ul.no-bullet,ol.no-bullet{margin-left:0;list-style:none}.cite-block,cite{display:block;color:#8a8a8a;font-size:.8125rem}.cite-block:before,cite:before{content:"— "}.code-inline,code{border:1px solid #cacaca;background-color:#e6e6e6;font-family:Consolas,"Liberation Mono",Courier,monospace;font-weight:normal;color:#0a0a0a;display:inline;max-width:100%;word-wrap:break-word;padding:.125rem .3125rem .0625rem}.code-block{border:1px solid #cacaca;background-color:#e6e6e6;font-family:Consolas,"Liberation Mono",Courier,monospace;font-weight:normal;color:#0a0a0a;display:block;overflow:auto;white-space:pre;padding:1rem;margin-bottom:1.5rem}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}@media print,screen and (min-width: 90.25em){.medium-text-left{text-align:left}.medium-text-right{text-align:right}.medium-text-center{text-align:center}.medium-text-justify{text-align:justify}}@media print,screen and (min-width: 106.25em){.large-text-left{text-align:left}.large-text-right{text-align:right}.large-text-center{text-align:center}.large-text-justify{text-align:justify}}.show-for-print{display:none !important}@media print{*{background:transparent !important;color:#000 !important;color-adjust:economy;box-shadow:none !important;text-shadow:none !important}.show-for-print{display:block !important}.hide-for-print{display:none !important}table.show-for-print{display:table !important}thead.show-for-print{display:table-header-group !important}tbody.show-for-print{display:table-row-group !important}tr.show-for-print{display:table-row !important}td.show-for-print{display:table-cell !important}th.show-for-print{display:table-cell !important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}abbr[title]:after{content:" (" attr(title) ")"}pre,blockquote{border:1px solid #8a8a8a;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:.5cm}p,h2,h3{orphans:3;widows:3}h2,h3{page-break-after:avoid}.print-break-inside{page-break-inside:auto}}.grid-container{padding-right:0.625rem;padding-left:0.625rem;max-width:87.5rem;margin-left:auto;margin-right:auto}@media print,screen and (min-width: 90.25em){.grid-container{padding-right:0.9375rem;padding-left:0.9375rem}}.grid-container.fluid{padding-right:0.625rem;padding-left:0.625rem;max-width:100%;margin-left:auto;margin-right:auto}@media print,screen and (min-width: 90.25em){.grid-container.fluid{padding-right:0.9375rem;padding-left:0.9375rem}}.grid-container.full{padding-right:0;padding-left:0;max-width:100%;margin-left:auto;margin-right:auto}.grid-x{display:flex;flex-flow:row wrap}.cell{flex:0 0 auto;min-height:0;min-width:0;width:100%}.cell.auto{flex:1 1 0}.cell.shrink{flex:0 0 auto}.grid-x>.auto{width:auto}.grid-x>.shrink{width:auto}.grid-x>.small-shrink,.grid-x>.small-full,.grid-x>.small-1,.grid-x>.small-2,.grid-x>.small-3,.grid-x>.small-4,.grid-x>.small-5,.grid-x>.small-6,.grid-x>.small-7,.grid-x>.small-8,.grid-x>.small-9,.grid-x>.small-10,.grid-x>.small-11,.grid-x>.small-12{flex-basis:auto}@media print,screen and (min-width: 90.25em){.grid-x>.medium-shrink,.grid-x>.medium-full,.grid-x>.medium-1,.grid-x>.medium-2,.grid-x>.medium-3,.grid-x>.medium-4,.grid-x>.medium-5,.grid-x>.medium-6,.grid-x>.medium-7,.grid-x>.medium-8,.grid-x>.medium-9,.grid-x>.medium-10,.grid-x>.medium-11,.grid-x>.medium-12{flex-basis:auto}}@media print,screen and (min-width: 106.25em){.grid-x>.large-shrink,.grid-x>.large-full,.grid-x>.large-1,.grid-x>.large-2,.grid-x>.large-3,.grid-x>.large-4,.grid-x>.large-5,.grid-x>.large-6,.grid-x>.large-7,.grid-x>.large-8,.grid-x>.large-9,.grid-x>.large-10,.grid-x>.large-11,.grid-x>.large-12{flex-basis:auto}}.grid-x>.small-12,.grid-x>.small-11,.grid-x>.small-10,.grid-x>.small-9,.grid-x>.small-8,.grid-x>.small-7,.grid-x>.small-6,.grid-x>.small-5,.grid-x>.small-4,.grid-x>.small-3,.grid-x>.small-2,.grid-x>.small-1{flex:0 0 auto}.grid-x>.small-1{width:8.3333333333%}.grid-x>.small-2{width:16.6666666667%}.grid-x>.small-3{width:25%}.grid-x>.small-4{width:33.3333333333%}.grid-x>.small-5{width:41.6666666667%}.grid-x>.small-6{width:50%}.grid-x>.small-7{width:58.3333333333%}.grid-x>.small-8{width:66.6666666667%}.grid-x>.small-9{width:75%}.grid-x>.small-10{width:83.3333333333%}.grid-x>.small-11{width:91.6666666667%}.grid-x>.small-12{width:100%}@media print,screen and (min-width: 90.25em){.grid-x>.medium-auto{flex:1 1 0;width:auto}.grid-x>.medium-12,.grid-x>.medium-11,.grid-x>.medium-10,.grid-x>.medium-9,.grid-x>.medium-8,.grid-x>.medium-7,.grid-x>.medium-6,.grid-x>.medium-5,.grid-x>.medium-4,.grid-x>.medium-3,.grid-x>.medium-2,.grid-x>.medium-1,.grid-x>.medium-shrink{flex:0 0 auto}.grid-x>.medium-shrink{width:auto}.grid-x>.medium-1{width:8.3333333333%}.grid-x>.medium-2{width:16.6666666667%}.grid-x>.medium-3{width:25%}.grid-x>.medium-4{width:33.3333333333%}.grid-x>.medium-5{width:41.6666666667%}.grid-x>.medium-6{width:50%}.grid-x>.medium-7{width:58.3333333333%}.grid-x>.medium-8{width:66.6666666667%}.grid-x>.medium-9{width:75%}.grid-x>.medium-10{width:83.3333333333%}.grid-x>.medium-11{width:91.6666666667%}.grid-x>.medium-12{width:100%}}@media print,screen and (min-width: 106.25em){.grid-x>.large-auto{flex:1 1 0;width:auto}.grid-x>.large-12,.grid-x>.large-11,.grid-x>.large-10,.grid-x>.large-9,.grid-x>.large-8,.grid-x>.large-7,.grid-x>.large-6,.grid-x>.large-5,.grid-x>.large-4,.grid-x>.large-3,.grid-x>.large-2,.grid-x>.large-1,.grid-x>.large-shrink{flex:0 0 auto}.grid-x>.large-shrink{width:auto}.grid-x>.large-1{width:8.3333333333%}.grid-x>.large-2{width:16.6666666667%}.grid-x>.large-3{width:25%}.grid-x>.large-4{width:33.3333333333%}.grid-x>.large-5{width:41.6666666667%}.grid-x>.large-6{width:50%}.grid-x>.large-7{width:58.3333333333%}.grid-x>.large-8{width:66.6666666667%}.grid-x>.large-9{width:75%}.grid-x>.large-10{width:83.3333333333%}.grid-x>.large-11{width:91.6666666667%}.grid-x>.large-12{width:100%}}.grid-margin-x:not(.grid-x)>.cell{width:auto}.grid-margin-y:not(.grid-y)>.cell{height:auto}.grid-margin-x{margin-left:-0.625rem;margin-right:-0.625rem}@media print,screen and (min-width: 90.25em){.grid-margin-x{margin-left:-0.9375rem;margin-right:-0.9375rem}}.grid-margin-x>.cell{width:calc(100% - 1.25rem);margin-left:0.625rem;margin-right:0.625rem}@media print,screen and (min-width: 90.25em){.grid-margin-x>.cell{width:calc(100% - 1.875rem);margin-left:0.9375rem;margin-right:0.9375rem}}.grid-margin-x>.auto{width:auto}.grid-margin-x>.shrink{width:auto}.grid-margin-x>.small-1{width:calc(8.3333333333% - 1.25rem)}.grid-margin-x>.small-2{width:calc(16.6666666667% - 1.25rem)}.grid-margin-x>.small-3{width:calc(25% - 1.25rem)}.grid-margin-x>.small-4{width:calc(33.3333333333% - 1.25rem)}.grid-margin-x>.small-5{width:calc(41.6666666667% - 1.25rem)}.grid-margin-x>.small-6{width:calc(50% - 1.25rem)}.grid-margin-x>.small-7{width:calc(58.3333333333% - 1.25rem)}.grid-margin-x>.small-8{width:calc(66.6666666667% - 1.25rem)}.grid-margin-x>.small-9{width:calc(75% - 1.25rem)}.grid-margin-x>.small-10{width:calc(83.3333333333% - 1.25rem)}.grid-margin-x>.small-11{width:calc(91.6666666667% - 1.25rem)}.grid-margin-x>.small-12{width:calc(100% - 1.25rem)}@media print,screen and (min-width: 90.25em){.grid-margin-x>.auto{width:auto}.grid-margin-x>.shrink{width:auto}.grid-margin-x>.small-1{width:calc(8.3333333333% - 1.875rem)}.grid-margin-x>.small-2{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x>.small-3{width:calc(25% - 1.875rem)}.grid-margin-x>.small-4{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x>.small-5{width:calc(41.6666666667% - 1.875rem)}.grid-margin-x>.small-6{width:calc(50% - 1.875rem)}.grid-margin-x>.small-7{width:calc(58.3333333333% - 1.875rem)}.grid-margin-x>.small-8{width:calc(66.6666666667% - 1.875rem)}.grid-margin-x>.small-9{width:calc(75% - 1.875rem)}.grid-margin-x>.small-10{width:calc(83.3333333333% - 1.875rem)}.grid-margin-x>.small-11{width:calc(91.6666666667% - 1.875rem)}.grid-margin-x>.small-12{width:calc(100% - 1.875rem)}.grid-margin-x>.medium-auto{width:auto}.grid-margin-x>.medium-shrink{width:auto}.grid-margin-x>.medium-1{width:calc(8.3333333333% - 1.875rem)}.grid-margin-x>.medium-2{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x>.medium-3{width:calc(25% - 1.875rem)}.grid-margin-x>.medium-4{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x>.medium-5{width:calc(41.6666666667% - 1.875rem)}.grid-margin-x>.medium-6{width:calc(50% - 1.875rem)}.grid-margin-x>.medium-7{width:calc(58.3333333333% - 1.875rem)}.grid-margin-x>.medium-8{width:calc(66.6666666667% - 1.875rem)}.grid-margin-x>.medium-9{width:calc(75% - 1.875rem)}.grid-margin-x>.medium-10{width:calc(83.3333333333% - 1.875rem)}.grid-margin-x>.medium-11{width:calc(91.6666666667% - 1.875rem)}.grid-margin-x>.medium-12{width:calc(100% - 1.875rem)}}@media print,screen and (min-width: 106.25em){.grid-margin-x>.large-auto{width:auto}.grid-margin-x>.large-shrink{width:auto}.grid-margin-x>.large-1{width:calc(8.3333333333% - 1.875rem)}.grid-margin-x>.large-2{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x>.large-3{width:calc(25% - 1.875rem)}.grid-margin-x>.large-4{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x>.large-5{width:calc(41.6666666667% - 1.875rem)}.grid-margin-x>.large-6{width:calc(50% - 1.875rem)}.grid-margin-x>.large-7{width:calc(58.3333333333% - 1.875rem)}.grid-margin-x>.large-8{width:calc(66.6666666667% - 1.875rem)}.grid-margin-x>.large-9{width:calc(75% - 1.875rem)}.grid-margin-x>.large-10{width:calc(83.3333333333% - 1.875rem)}.grid-margin-x>.large-11{width:calc(91.6666666667% - 1.875rem)}.grid-margin-x>.large-12{width:calc(100% - 1.875rem)}}.grid-padding-x .grid-padding-x{margin-right:-0.625rem;margin-left:-0.625rem}@media print,screen and (min-width: 90.25em){.grid-padding-x .grid-padding-x{margin-right:-0.9375rem;margin-left:-0.9375rem}}.grid-container:not(.full)>.grid-padding-x{margin-right:-0.625rem;margin-left:-0.625rem}@media print,screen and (min-width: 90.25em){.grid-container:not(.full)>.grid-padding-x{margin-right:-0.9375rem;margin-left:-0.9375rem}}.grid-padding-x>.cell{padding-right:0.625rem;padding-left:0.625rem}@media print,screen and (min-width: 90.25em){.grid-padding-x>.cell{padding-right:0.9375rem;padding-left:0.9375rem}}.small-up-1>.cell{width:100%}.small-up-2>.cell{width:50%}.small-up-3>.cell{width:33.3333333333%}.small-up-4>.cell{width:25%}.small-up-5>.cell{width:20%}.small-up-6>.cell{width:16.6666666667%}.small-up-7>.cell{width:14.2857142857%}.small-up-8>.cell{width:12.5%}@media print,screen and (min-width: 90.25em){.medium-up-1>.cell{width:100%}.medium-up-2>.cell{width:50%}.medium-up-3>.cell{width:33.3333333333%}.medium-up-4>.cell{width:25%}.medium-up-5>.cell{width:20%}.medium-up-6>.cell{width:16.6666666667%}.medium-up-7>.cell{width:14.2857142857%}.medium-up-8>.cell{width:12.5%}}@media print,screen and (min-width: 106.25em){.large-up-1>.cell{width:100%}.large-up-2>.cell{width:50%}.large-up-3>.cell{width:33.3333333333%}.large-up-4>.cell{width:25%}.large-up-5>.cell{width:20%}.large-up-6>.cell{width:16.6666666667%}.large-up-7>.cell{width:14.2857142857%}.large-up-8>.cell{width:12.5%}}.grid-margin-x.small-up-1>.cell{width:calc(100% - 1.25rem)}.grid-margin-x.small-up-2>.cell{width:calc(50% - 1.25rem)}.grid-margin-x.small-up-3>.cell{width:calc(33.3333333333% - 1.25rem)}.grid-margin-x.small-up-4>.cell{width:calc(25% - 1.25rem)}.grid-margin-x.small-up-5>.cell{width:calc(20% - 1.25rem)}.grid-margin-x.small-up-6>.cell{width:calc(16.6666666667% - 1.25rem)}.grid-margin-x.small-up-7>.cell{width:calc(14.2857142857% - 1.25rem)}.grid-margin-x.small-up-8>.cell{width:calc(12.5% - 1.25rem)}@media print,screen and (min-width: 90.25em){.grid-margin-x.small-up-1>.cell{width:calc(100% - 1.875rem)}.grid-margin-x.small-up-2>.cell{width:calc(50% - 1.875rem)}.grid-margin-x.small-up-3>.cell{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x.small-up-4>.cell{width:calc(25% - 1.875rem)}.grid-margin-x.small-up-5>.cell{width:calc(20% - 1.875rem)}.grid-margin-x.small-up-6>.cell{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x.small-up-7>.cell{width:calc(14.2857142857% - 1.875rem)}.grid-margin-x.small-up-8>.cell{width:calc(12.5% - 1.875rem)}.grid-margin-x.medium-up-1>.cell{width:calc(100% - 1.875rem)}.grid-margin-x.medium-up-2>.cell{width:calc(50% - 1.875rem)}.grid-margin-x.medium-up-3>.cell{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x.medium-up-4>.cell{width:calc(25% - 1.875rem)}.grid-margin-x.medium-up-5>.cell{width:calc(20% - 1.875rem)}.grid-margin-x.medium-up-6>.cell{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x.medium-up-7>.cell{width:calc(14.2857142857% - 1.875rem)}.grid-margin-x.medium-up-8>.cell{width:calc(12.5% - 1.875rem)}}@media print,screen and (min-width: 106.25em){.grid-margin-x.large-up-1>.cell{width:calc(100% - 1.875rem)}.grid-margin-x.large-up-2>.cell{width:calc(50% - 1.875rem)}.grid-margin-x.large-up-3>.cell{width:calc(33.3333333333% - 1.875rem)}.grid-margin-x.large-up-4>.cell{width:calc(25% - 1.875rem)}.grid-margin-x.large-up-5>.cell{width:calc(20% - 1.875rem)}.grid-margin-x.large-up-6>.cell{width:calc(16.6666666667% - 1.875rem)}.grid-margin-x.large-up-7>.cell{width:calc(14.2857142857% - 1.875rem)}.grid-margin-x.large-up-8>.cell{width:calc(12.5% - 1.875rem)}}.small-margin-collapse{margin-right:0;margin-left:0}.small-margin-collapse>.cell{margin-right:0;margin-left:0}.small-margin-collapse>.small-1{width:8.3333333333%}.small-margin-collapse>.small-2{width:16.6666666667%}.small-margin-collapse>.small-3{width:25%}.small-margin-collapse>.small-4{width:33.3333333333%}.small-margin-collapse>.small-5{width:41.6666666667%}.small-margin-collapse>.small-6{width:50%}.small-margin-collapse>.small-7{width:58.3333333333%}.small-margin-collapse>.small-8{width:66.6666666667%}.small-margin-collapse>.small-9{width:75%}.small-margin-collapse>.small-10{width:83.3333333333%}.small-margin-collapse>.small-11{width:91.6666666667%}.small-margin-collapse>.small-12{width:100%}@media print,screen and (min-width: 90.25em){.small-margin-collapse>.medium-1{width:8.3333333333%}.small-margin-collapse>.medium-2{width:16.6666666667%}.small-margin-collapse>.medium-3{width:25%}.small-margin-collapse>.medium-4{width:33.3333333333%}.small-margin-collapse>.medium-5{width:41.6666666667%}.small-margin-collapse>.medium-6{width:50%}.small-margin-collapse>.medium-7{width:58.3333333333%}.small-margin-collapse>.medium-8{width:66.6666666667%}.small-margin-collapse>.medium-9{width:75%}.small-margin-collapse>.medium-10{width:83.3333333333%}.small-margin-collapse>.medium-11{width:91.6666666667%}.small-margin-collapse>.medium-12{width:100%}}@media print,screen and (min-width: 106.25em){.small-margin-collapse>.large-1{width:8.3333333333%}.small-margin-collapse>.large-2{width:16.6666666667%}.small-margin-collapse>.large-3{width:25%}.small-margin-collapse>.large-4{width:33.3333333333%}.small-margin-collapse>.large-5{width:41.6666666667%}.small-margin-collapse>.large-6{width:50%}.small-margin-collapse>.large-7{width:58.3333333333%}.small-margin-collapse>.large-8{width:66.6666666667%}.small-margin-collapse>.large-9{width:75%}.small-margin-collapse>.large-10{width:83.3333333333%}.small-margin-collapse>.large-11{width:91.6666666667%}.small-margin-collapse>.large-12{width:100%}}.small-padding-collapse{margin-right:0;margin-left:0}.small-padding-collapse>.cell{padding-right:0;padding-left:0}@media print,screen and (min-width: 90.25em){.medium-margin-collapse{margin-right:0;margin-left:0}.medium-margin-collapse>.cell{margin-right:0;margin-left:0}}@media print,screen and (min-width: 90.25em){.medium-margin-collapse>.small-1{width:8.3333333333%}.medium-margin-collapse>.small-2{width:16.6666666667%}.medium-margin-collapse>.small-3{width:25%}.medium-margin-collapse>.small-4{width:33.3333333333%}.medium-margin-collapse>.small-5{width:41.6666666667%}.medium-margin-collapse>.small-6{width:50%}.medium-margin-collapse>.small-7{width:58.3333333333%}.medium-margin-collapse>.small-8{width:66.6666666667%}.medium-margin-collapse>.small-9{width:75%}.medium-margin-collapse>.small-10{width:83.3333333333%}.medium-margin-collapse>.small-11{width:91.6666666667%}.medium-margin-collapse>.small-12{width:100%}}@media print,screen and (min-width: 90.25em){.medium-margin-collapse>.medium-1{width:8.3333333333%}.medium-margin-collapse>.medium-2{width:16.6666666667%}.medium-margin-collapse>.medium-3{width:25%}.medium-margin-collapse>.medium-4{width:33.3333333333%}.medium-margin-collapse>.medium-5{width:41.6666666667%}.medium-margin-collapse>.medium-6{width:50%}.medium-margin-collapse>.medium-7{width:58.3333333333%}.medium-margin-collapse>.medium-8{width:66.6666666667%}.medium-margin-collapse>.medium-9{width:75%}.medium-margin-collapse>.medium-10{width:83.3333333333%}.medium-margin-collapse>.medium-11{width:91.6666666667%}.medium-margin-collapse>.medium-12{width:100%}}@media print,screen and (min-width: 106.25em){.medium-margin-collapse>.large-1{width:8.3333333333%}.medium-margin-collapse>.large-2{width:16.6666666667%}.medium-margin-collapse>.large-3{width:25%}.medium-margin-collapse>.large-4{width:33.3333333333%}.medium-margin-collapse>.large-5{width:41.6666666667%}.medium-margin-collapse>.large-6{width:50%}.medium-margin-collapse>.large-7{width:58.3333333333%}.medium-margin-collapse>.large-8{width:66.6666666667%}.medium-margin-collapse>.large-9{width:75%}.medium-margin-collapse>.large-10{width:83.3333333333%}.medium-margin-collapse>.large-11{width:91.6666666667%}.medium-margin-collapse>.large-12{width:100%}}@media print,screen and (min-width: 90.25em){.medium-padding-collapse{margin-right:0;margin-left:0}.medium-padding-collapse>.cell{padding-right:0;padding-left:0}}@media print,screen and (min-width: 106.25em){.large-margin-collapse{margin-right:0;margin-left:0}.large-margin-collapse>.cell{margin-right:0;margin-left:0}}@media print,screen and (min-width: 106.25em){.large-margin-collapse>.small-1{width:8.3333333333%}.large-margin-collapse>.small-2{width:16.6666666667%}.large-margin-collapse>.small-3{width:25%}.large-margin-collapse>.small-4{width:33.3333333333%}.large-margin-collapse>.small-5{width:41.6666666667%}.large-margin-collapse>.small-6{width:50%}.large-margin-collapse>.small-7{width:58.3333333333%}.large-margin-collapse>.small-8{width:66.6666666667%}.large-margin-collapse>.small-9{width:75%}.large-margin-collapse>.small-10{width:83.3333333333%}.large-margin-collapse>.small-11{width:91.6666666667%}.large-margin-collapse>.small-12{width:100%}}@media print,screen and (min-width: 106.25em){.large-margin-collapse>.medium-1{width:8.3333333333%}.large-margin-collapse>.medium-2{width:16.6666666667%}.large-margin-collapse>.medium-3{width:25%}.large-margin-collapse>.medium-4{width:33.3333333333%}.large-margin-collapse>.medium-5{width:41.6666666667%}.large-margin-collapse>.medium-6{width:50%}.large-margin-collapse>.medium-7{width:58.3333333333%}.large-margin-collapse>.medium-8{width:66.6666666667%}.large-margin-collapse>.medium-9{width:75%}.large-margin-collapse>.medium-10{width:83.3333333333%}.large-margin-collapse>.medium-11{width:91.6666666667%}.large-margin-collapse>.medium-12{width:100%}}@media print,screen and (min-width: 106.25em){.large-margin-collapse>.large-1{width:8.3333333333%}.large-margin-collapse>.large-2{width:16.6666666667%}.large-margin-collapse>.large-3{width:25%}.large-margin-collapse>.large-4{width:33.3333333333%}.large-margin-collapse>.large-5{width:41.6666666667%}.large-margin-collapse>.large-6{width:50%}.large-margin-collapse>.large-7{width:58.3333333333%}.large-margin-collapse>.large-8{width:66.6666666667%}.large-margin-collapse>.large-9{width:75%}.large-margin-collapse>.large-10{width:83.3333333333%}.large-margin-collapse>.large-11{width:91.6666666667%}.large-margin-collapse>.large-12{width:100%}}@media print,screen and (min-width: 106.25em){.large-padding-collapse{margin-right:0;margin-left:0}.large-padding-collapse>.cell{padding-right:0;padding-left:0}}.small-offset-0{margin-left:0%}.grid-margin-x>.small-offset-0{margin-left:calc(0% + 1.25rem / 2)}.small-offset-1{margin-left:8.3333333333%}.grid-margin-x>.small-offset-1{margin-left:calc(8.3333333333% + 1.25rem / 2)}.small-offset-2{margin-left:16.6666666667%}.grid-margin-x>.small-offset-2{margin-left:calc(16.6666666667% + 1.25rem / 2)}.small-offset-3{margin-left:25%}.grid-margin-x>.small-offset-3{margin-left:calc(25% + 1.25rem / 2)}.small-offset-4{margin-left:33.3333333333%}.grid-margin-x>.small-offset-4{margin-left:calc(33.3333333333% + 1.25rem / 2)}.small-offset-5{margin-left:41.6666666667%}.grid-margin-x>.small-offset-5{margin-left:calc(41.6666666667% + 1.25rem / 2)}.small-offset-6{margin-left:50%}.grid-margin-x>.small-offset-6{margin-left:calc(50% + 1.25rem / 2)}.small-offset-7{margin-left:58.3333333333%}.grid-margin-x>.small-offset-7{margin-left:calc(58.3333333333% + 1.25rem / 2)}.small-offset-8{margin-left:66.6666666667%}.grid-margin-x>.small-offset-8{margin-left:calc(66.6666666667% + 1.25rem / 2)}.small-offset-9{margin-left:75%}.grid-margin-x>.small-offset-9{margin-left:calc(75% + 1.25rem / 2)}.small-offset-10{margin-left:83.3333333333%}.grid-margin-x>.small-offset-10{margin-left:calc(83.3333333333% + 1.25rem / 2)}.small-offset-11{margin-left:91.6666666667%}.grid-margin-x>.small-offset-11{margin-left:calc(91.6666666667% + 1.25rem / 2)}@media print,screen and (min-width: 90.25em){.medium-offset-0{margin-left:0%}.grid-margin-x>.medium-offset-0{margin-left:calc(0% + 1.875rem / 2)}.medium-offset-1{margin-left:8.3333333333%}.grid-margin-x>.medium-offset-1{margin-left:calc(8.3333333333% + 1.875rem / 2)}.medium-offset-2{margin-left:16.6666666667%}.grid-margin-x>.medium-offset-2{margin-left:calc(16.6666666667% + 1.875rem / 2)}.medium-offset-3{margin-left:25%}.grid-margin-x>.medium-offset-3{margin-left:calc(25% + 1.875rem / 2)}.medium-offset-4{margin-left:33.3333333333%}.grid-margin-x>.medium-offset-4{margin-left:calc(33.3333333333% + 1.875rem / 2)}.medium-offset-5{margin-left:41.6666666667%}.grid-margin-x>.medium-offset-5{margin-left:calc(41.6666666667% + 1.875rem / 2)}.medium-offset-6{margin-left:50%}.grid-margin-x>.medium-offset-6{margin-left:calc(50% + 1.875rem / 2)}.medium-offset-7{margin-left:58.3333333333%}.grid-margin-x>.medium-offset-7{margin-left:calc(58.3333333333% + 1.875rem / 2)}.medium-offset-8{margin-left:66.6666666667%}.grid-margin-x>.medium-offset-8{margin-left:calc(66.6666666667% + 1.875rem / 2)}.medium-offset-9{margin-left:75%}.grid-margin-x>.medium-offset-9{margin-left:calc(75% + 1.875rem / 2)}.medium-offset-10{margin-left:83.3333333333%}.grid-margin-x>.medium-offset-10{margin-left:calc(83.3333333333% + 1.875rem / 2)}.medium-offset-11{margin-left:91.6666666667%}.grid-margin-x>.medium-offset-11{margin-left:calc(91.6666666667% + 1.875rem / 2)}}@media print,screen and (min-width: 106.25em){.large-offset-0{margin-left:0%}.grid-margin-x>.large-offset-0{margin-left:calc(0% + 1.875rem / 2)}.large-offset-1{margin-left:8.3333333333%}.grid-margin-x>.large-offset-1{margin-left:calc(8.3333333333% + 1.875rem / 2)}.large-offset-2{margin-left:16.6666666667%}.grid-margin-x>.large-offset-2{margin-left:calc(16.6666666667% + 1.875rem / 2)}.large-offset-3{margin-left:25%}.grid-margin-x>.large-offset-3{margin-left:calc(25% + 1.875rem / 2)}.large-offset-4{margin-left:33.3333333333%}.grid-margin-x>.large-offset-4{margin-left:calc(33.3333333333% + 1.875rem / 2)}.large-offset-5{margin-left:41.6666666667%}.grid-margin-x>.large-offset-5{margin-left:calc(41.6666666667% + 1.875rem / 2)}.large-offset-6{margin-left:50%}.grid-margin-x>.large-offset-6{margin-left:calc(50% + 1.875rem / 2)}.large-offset-7{margin-left:58.3333333333%}.grid-margin-x>.large-offset-7{margin-left:calc(58.3333333333% + 1.875rem / 2)}.large-offset-8{margin-left:66.6666666667%}.grid-margin-x>.large-offset-8{margin-left:calc(66.6666666667% + 1.875rem / 2)}.large-offset-9{margin-left:75%}.grid-margin-x>.large-offset-9{margin-left:calc(75% + 1.875rem / 2)}.large-offset-10{margin-left:83.3333333333%}.grid-margin-x>.large-offset-10{margin-left:calc(83.3333333333% + 1.875rem / 2)}.large-offset-11{margin-left:91.6666666667%}.grid-margin-x>.large-offset-11{margin-left:calc(91.6666666667% + 1.875rem / 2)}}.grid-y{display:flex;flex-flow:column nowrap}.grid-y>.cell{height:auto;max-height:none}.grid-y>.auto{height:auto}.grid-y>.shrink{height:auto}.grid-y>.small-shrink,.grid-y>.small-full,.grid-y>.small-1,.grid-y>.small-2,.grid-y>.small-3,.grid-y>.small-4,.grid-y>.small-5,.grid-y>.small-6,.grid-y>.small-7,.grid-y>.small-8,.grid-y>.small-9,.grid-y>.small-10,.grid-y>.small-11,.grid-y>.small-12{flex-basis:auto}@media print,screen and (min-width: 90.25em){.grid-y>.medium-shrink,.grid-y>.medium-full,.grid-y>.medium-1,.grid-y>.medium-2,.grid-y>.medium-3,.grid-y>.medium-4,.grid-y>.medium-5,.grid-y>.medium-6,.grid-y>.medium-7,.grid-y>.medium-8,.grid-y>.medium-9,.grid-y>.medium-10,.grid-y>.medium-11,.grid-y>.medium-12{flex-basis:auto}}@media print,screen and (min-width: 106.25em){.grid-y>.large-shrink,.grid-y>.large-full,.grid-y>.large-1,.grid-y>.large-2,.grid-y>.large-3,.grid-y>.large-4,.grid-y>.large-5,.grid-y>.large-6,.grid-y>.large-7,.grid-y>.large-8,.grid-y>.large-9,.grid-y>.large-10,.grid-y>.large-11,.grid-y>.large-12{flex-basis:auto}}.grid-y>.small-12,.grid-y>.small-11,.grid-y>.small-10,.grid-y>.small-9,.grid-y>.small-8,.grid-y>.small-7,.grid-y>.small-6,.grid-y>.small-5,.grid-y>.small-4,.grid-y>.small-3,.grid-y>.small-2,.grid-y>.small-1{flex:0 0 auto}.grid-y>.small-1{height:8.3333333333%}.grid-y>.small-2{height:16.6666666667%}.grid-y>.small-3{height:25%}.grid-y>.small-4{height:33.3333333333%}.grid-y>.small-5{height:41.6666666667%}.grid-y>.small-6{height:50%}.grid-y>.small-7{height:58.3333333333%}.grid-y>.small-8{height:66.6666666667%}.grid-y>.small-9{height:75%}.grid-y>.small-10{height:83.3333333333%}.grid-y>.small-11{height:91.6666666667%}.grid-y>.small-12{height:100%}@media print,screen and (min-width: 90.25em){.grid-y>.medium-auto{flex:1 1 0;height:auto}.grid-y>.medium-12,.grid-y>.medium-11,.grid-y>.medium-10,.grid-y>.medium-9,.grid-y>.medium-8,.grid-y>.medium-7,.grid-y>.medium-6,.grid-y>.medium-5,.grid-y>.medium-4,.grid-y>.medium-3,.grid-y>.medium-2,.grid-y>.medium-1,.grid-y>.medium-shrink{flex:0 0 auto}.grid-y>.medium-shrink{height:auto}.grid-y>.medium-1{height:8.3333333333%}.grid-y>.medium-2{height:16.6666666667%}.grid-y>.medium-3{height:25%}.grid-y>.medium-4{height:33.3333333333%}.grid-y>.medium-5{height:41.6666666667%}.grid-y>.medium-6{height:50%}.grid-y>.medium-7{height:58.3333333333%}.grid-y>.medium-8{height:66.6666666667%}.grid-y>.medium-9{height:75%}.grid-y>.medium-10{height:83.3333333333%}.grid-y>.medium-11{height:91.6666666667%}.grid-y>.medium-12{height:100%}}@media print,screen and (min-width: 106.25em){.grid-y>.large-auto{flex:1 1 0;height:auto}.grid-y>.large-12,.grid-y>.large-11,.grid-y>.large-10,.grid-y>.large-9,.grid-y>.large-8,.grid-y>.large-7,.grid-y>.large-6,.grid-y>.large-5,.grid-y>.large-4,.grid-y>.large-3,.grid-y>.large-2,.grid-y>.large-1,.grid-y>.large-shrink{flex:0 0 auto}.grid-y>.large-shrink{height:auto}.grid-y>.large-1{height:8.3333333333%}.grid-y>.large-2{height:16.6666666667%}.grid-y>.large-3{height:25%}.grid-y>.large-4{height:33.3333333333%}.grid-y>.large-5{height:41.6666666667%}.grid-y>.large-6{height:50%}.grid-y>.large-7{height:58.3333333333%}.grid-y>.large-8{height:66.6666666667%}.grid-y>.large-9{height:75%}.grid-y>.large-10{height:83.3333333333%}.grid-y>.large-11{height:91.6666666667%}.grid-y>.large-12{height:100%}}.grid-padding-y .grid-padding-y{margin-top:-0.625rem;margin-bottom:-0.625rem}@media print,screen and (min-width: 90.25em){.grid-padding-y .grid-padding-y{margin-top:-0.9375rem;margin-bottom:-0.9375rem}}.grid-padding-y>.cell{padding-top:0.625rem;padding-bottom:0.625rem}@media print,screen and (min-width: 90.25em){.grid-padding-y>.cell{padding-top:0.9375rem;padding-bottom:0.9375rem}}.grid-margin-y{margin-top:-0.625rem;margin-bottom:-0.625rem}@media print,screen and (min-width: 90.25em){.grid-margin-y{margin-top:-0.9375rem;margin-bottom:-0.9375rem}}.grid-margin-y>.cell{height:calc(100% - 1.25rem);margin-top:0.625rem;margin-bottom:0.625rem}@media print,screen and (min-width: 90.25em){.grid-margin-y>.cell{height:calc(100% - 1.875rem);margin-top:0.9375rem;margin-bottom:0.9375rem}}.grid-margin-y>.auto{height:auto}.grid-margin-y>.shrink{height:auto}.grid-margin-y>.small-1{height:calc(8.3333333333% - 1.25rem)}.grid-margin-y>.small-2{height:calc(16.6666666667% - 1.25rem)}.grid-margin-y>.small-3{height:calc(25% - 1.25rem)}.grid-margin-y>.small-4{height:calc(33.3333333333% - 1.25rem)}.grid-margin-y>.small-5{height:calc(41.6666666667% - 1.25rem)}.grid-margin-y>.small-6{height:calc(50% - 1.25rem)}.grid-margin-y>.small-7{height:calc(58.3333333333% - 1.25rem)}.grid-margin-y>.small-8{height:calc(66.6666666667% - 1.25rem)}.grid-margin-y>.small-9{height:calc(75% - 1.25rem)}.grid-margin-y>.small-10{height:calc(83.3333333333% - 1.25rem)}.grid-margin-y>.small-11{height:calc(91.6666666667% - 1.25rem)}.grid-margin-y>.small-12{height:calc(100% - 1.25rem)}@media print,screen and (min-width: 90.25em){.grid-margin-y>.auto{height:auto}.grid-margin-y>.shrink{height:auto}.grid-margin-y>.small-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.small-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.small-3{height:calc(25% - 1.875rem)}.grid-margin-y>.small-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.small-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.small-6{height:calc(50% - 1.875rem)}.grid-margin-y>.small-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.small-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.small-9{height:calc(75% - 1.875rem)}.grid-margin-y>.small-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.small-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.small-12{height:calc(100% - 1.875rem)}.grid-margin-y>.medium-auto{height:auto}.grid-margin-y>.medium-shrink{height:auto}.grid-margin-y>.medium-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.medium-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.medium-3{height:calc(25% - 1.875rem)}.grid-margin-y>.medium-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.medium-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.medium-6{height:calc(50% - 1.875rem)}.grid-margin-y>.medium-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.medium-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.medium-9{height:calc(75% - 1.875rem)}.grid-margin-y>.medium-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.medium-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.medium-12{height:calc(100% - 1.875rem)}}@media print,screen and (min-width: 106.25em){.grid-margin-y>.large-auto{height:auto}.grid-margin-y>.large-shrink{height:auto}.grid-margin-y>.large-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.large-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.large-3{height:calc(25% - 1.875rem)}.grid-margin-y>.large-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.large-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.large-6{height:calc(50% - 1.875rem)}.grid-margin-y>.large-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.large-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.large-9{height:calc(75% - 1.875rem)}.grid-margin-y>.large-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.large-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.large-12{height:calc(100% - 1.875rem)}}.grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;width:100vw}.cell .grid-frame{width:100%}.cell-block{overflow-x:auto;max-width:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.cell-block-y{overflow-y:auto;max-height:100%;min-height:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.cell-block-container{display:flex;flex-direction:column;max-height:100%}.cell-block-container>.grid-x{max-height:100%;flex-wrap:nowrap}@media print,screen and (min-width: 90.25em){.medium-grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;width:100vw}.cell .medium-grid-frame{width:100%}.medium-cell-block{overflow-x:auto;max-width:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.medium-cell-block-container{display:flex;flex-direction:column;max-height:100%}.medium-cell-block-container>.grid-x{max-height:100%;flex-wrap:nowrap}.medium-cell-block-y{overflow-y:auto;max-height:100%;min-height:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}}@media print,screen and (min-width: 106.25em){.large-grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;width:100vw}.cell .large-grid-frame{width:100%}.large-cell-block{overflow-x:auto;max-width:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}.large-cell-block-container{display:flex;flex-direction:column;max-height:100%}.large-cell-block-container>.grid-x{max-height:100%;flex-wrap:nowrap}.large-cell-block-y{overflow-y:auto;max-height:100%;min-height:100%;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar}}.grid-y.grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;height:100vh;width:auto}@media print,screen and (min-width: 90.25em){.grid-y.medium-grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;height:100vh;width:auto}}@media print,screen and (min-width: 106.25em){.grid-y.large-grid-frame{overflow:hidden;position:relative;flex-wrap:nowrap;align-items:stretch;height:100vh;width:auto}}.cell .grid-y.grid-frame{height:100%}@media print,screen and (min-width: 90.25em){.cell .grid-y.medium-grid-frame{height:100%}}@media print,screen and (min-width: 106.25em){.cell .grid-y.large-grid-frame{height:100%}}.grid-margin-y{margin-top:-0.625rem;margin-bottom:-0.625rem}@media print,screen and (min-width: 90.25em){.grid-margin-y{margin-top:-0.9375rem;margin-bottom:-0.9375rem}}.grid-margin-y>.cell{height:calc(100% - 1.25rem);margin-top:0.625rem;margin-bottom:0.625rem}@media print,screen and (min-width: 90.25em){.grid-margin-y>.cell{height:calc(100% - 1.875rem);margin-top:0.9375rem;margin-bottom:0.9375rem}}.grid-margin-y>.auto{height:auto}.grid-margin-y>.shrink{height:auto}.grid-margin-y>.small-1{height:calc(8.3333333333% - 1.25rem)}.grid-margin-y>.small-2{height:calc(16.6666666667% - 1.25rem)}.grid-margin-y>.small-3{height:calc(25% - 1.25rem)}.grid-margin-y>.small-4{height:calc(33.3333333333% - 1.25rem)}.grid-margin-y>.small-5{height:calc(41.6666666667% - 1.25rem)}.grid-margin-y>.small-6{height:calc(50% - 1.25rem)}.grid-margin-y>.small-7{height:calc(58.3333333333% - 1.25rem)}.grid-margin-y>.small-8{height:calc(66.6666666667% - 1.25rem)}.grid-margin-y>.small-9{height:calc(75% - 1.25rem)}.grid-margin-y>.small-10{height:calc(83.3333333333% - 1.25rem)}.grid-margin-y>.small-11{height:calc(91.6666666667% - 1.25rem)}.grid-margin-y>.small-12{height:calc(100% - 1.25rem)}@media print,screen and (min-width: 90.25em){.grid-margin-y>.auto{height:auto}.grid-margin-y>.shrink{height:auto}.grid-margin-y>.small-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.small-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.small-3{height:calc(25% - 1.875rem)}.grid-margin-y>.small-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.small-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.small-6{height:calc(50% - 1.875rem)}.grid-margin-y>.small-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.small-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.small-9{height:calc(75% - 1.875rem)}.grid-margin-y>.small-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.small-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.small-12{height:calc(100% - 1.875rem)}.grid-margin-y>.medium-auto{height:auto}.grid-margin-y>.medium-shrink{height:auto}.grid-margin-y>.medium-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.medium-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.medium-3{height:calc(25% - 1.875rem)}.grid-margin-y>.medium-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.medium-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.medium-6{height:calc(50% - 1.875rem)}.grid-margin-y>.medium-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.medium-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.medium-9{height:calc(75% - 1.875rem)}.grid-margin-y>.medium-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.medium-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.medium-12{height:calc(100% - 1.875rem)}}@media print,screen and (min-width: 106.25em){.grid-margin-y>.large-auto{height:auto}.grid-margin-y>.large-shrink{height:auto}.grid-margin-y>.large-1{height:calc(8.3333333333% - 1.875rem)}.grid-margin-y>.large-2{height:calc(16.6666666667% - 1.875rem)}.grid-margin-y>.large-3{height:calc(25% - 1.875rem)}.grid-margin-y>.large-4{height:calc(33.3333333333% - 1.875rem)}.grid-margin-y>.large-5{height:calc(41.6666666667% - 1.875rem)}.grid-margin-y>.large-6{height:calc(50% - 1.875rem)}.grid-margin-y>.large-7{height:calc(58.3333333333% - 1.875rem)}.grid-margin-y>.large-8{height:calc(66.6666666667% - 1.875rem)}.grid-margin-y>.large-9{height:calc(75% - 1.875rem)}.grid-margin-y>.large-10{height:calc(83.3333333333% - 1.875rem)}.grid-margin-y>.large-11{height:calc(91.6666666667% - 1.875rem)}.grid-margin-y>.large-12{height:calc(100% - 1.875rem)}}.grid-frame.grid-margin-y{height:calc(100vh + 1.25rem)}@media print,screen and (min-width: 90.25em){.grid-frame.grid-margin-y{height:calc(100vh + 1.875rem)}}@media print,screen and (min-width: 106.25em){.grid-frame.grid-margin-y{height:calc(100vh + 1.875rem)}}@media print,screen and (min-width: 90.25em){.grid-margin-y.medium-grid-frame{height:calc(100vh + 1.875rem)}}@media print,screen and (min-width: 106.25em){.grid-margin-y.large-grid-frame{height:calc(100vh + 1.875rem)}}.button{display:inline-block;vertical-align:middle;margin:0 0 1rem 0;padding:.85em 1em;border:1px solid transparent;border-radius:0;transition:background-color .25s ease-out,color .25s ease-out;font-family:inherit;font-size:.9rem;-webkit-appearance:none;line-height:1;text-align:center;cursor:pointer}[data-whatinput=mouse] .button{outline:0}.button.tiny{font-size:.6rem}.button.small{font-size:.75rem}.button.large{font-size:1.25rem}.button.expanded{display:block;width:100%;margin-right:0;margin-left:0}.button,.button.disabled,.button[disabled],.button.disabled:hover,.button[disabled]:hover,.button.disabled:focus,.button[disabled]:focus{background-color:#2199e8;color:#fefefe}.button:hover,.button:focus{background-color:#1583cc;color:#fefefe}.button.primary,.button.primary.disabled,.button.primary[disabled],.button.primary.disabled:hover,.button.primary[disabled]:hover,.button.primary.disabled:focus,.button.primary[disabled]:focus{background-color:#2199e8;color:#0a0a0a}.button.primary:hover,.button.primary:focus{background-color:#147cc0;color:#0a0a0a}.button.secondary,.button.secondary.disabled,.button.secondary[disabled],.button.secondary.disabled:hover,.button.secondary[disabled]:hover,.button.secondary.disabled:focus,.button.secondary[disabled]:focus{background-color:#777;color:#fefefe}.button.secondary:hover,.button.secondary:focus{background-color:#5f5f5f;color:#fefefe}.button.success,.button.success.disabled,.button.success[disabled],.button.success.disabled:hover,.button.success[disabled]:hover,.button.success.disabled:focus,.button.success[disabled]:focus{background-color:#3adb76;color:#0a0a0a}.button.success:hover,.button.success:focus{background-color:#22bb5b;color:#0a0a0a}.button.warning,.button.warning.disabled,.button.warning[disabled],.button.warning.disabled:hover,.button.warning[disabled]:hover,.button.warning.disabled:focus,.button.warning[disabled]:focus{background-color:#ffae00;color:#0a0a0a}.button.warning:hover,.button.warning:focus{background-color:#cc8b00;color:#0a0a0a}.button.alert,.button.alert.disabled,.button.alert[disabled],.button.alert.disabled:hover,.button.alert[disabled]:hover,.button.alert.disabled:focus,.button.alert[disabled]:focus{background-color:#ec5840;color:#0a0a0a}.button.alert:hover,.button.alert:focus{background-color:#da3116;color:#0a0a0a}.button.hollow,.button.hollow:hover,.button.hollow:focus,.button.hollow.disabled,.button.hollow.disabled:hover,.button.hollow.disabled:focus,.button.hollow[disabled],.button.hollow[disabled]:hover,.button.hollow[disabled]:focus{background-color:transparent}.button.hollow,.button.hollow.disabled,.button.hollow[disabled],.button.hollow.disabled:hover,.button.hollow[disabled]:hover,.button.hollow.disabled:focus,.button.hollow[disabled]:focus{border:1px solid #2199e8;color:#2199e8}.button.hollow:hover,.button.hollow:focus{border-color:#0c4d78;color:#0c4d78}.button.hollow.primary,.button.hollow.primary.disabled,.button.hollow.primary[disabled],.button.hollow.primary.disabled:hover,.button.hollow.primary[disabled]:hover,.button.hollow.primary.disabled:focus,.button.hollow.primary[disabled]:focus{border:1px solid #2199e8;color:#2199e8}.button.hollow.primary:hover,.button.hollow.primary:focus{border-color:#0c4d78;color:#0c4d78}.button.hollow.secondary,.button.hollow.secondary.disabled,.button.hollow.secondary[disabled],.button.hollow.secondary.disabled:hover,.button.hollow.secondary[disabled]:hover,.button.hollow.secondary.disabled:focus,.button.hollow.secondary[disabled]:focus{border:1px solid #777;color:#777}.button.hollow.secondary:hover,.button.hollow.secondary:focus{border-color:#3c3c3c;color:#3c3c3c}.button.hollow.success,.button.hollow.success.disabled,.button.hollow.success[disabled],.button.hollow.success.disabled:hover,.button.hollow.success[disabled]:hover,.button.hollow.success.disabled:focus,.button.hollow.success[disabled]:focus{border:1px solid #3adb76;color:#3adb76}.button.hollow.success:hover,.button.hollow.success:focus{border-color:#157539;color:#157539}.button.hollow.warning,.button.hollow.warning.disabled,.button.hollow.warning[disabled],.button.hollow.warning.disabled:hover,.button.hollow.warning[disabled]:hover,.button.hollow.warning.disabled:focus,.button.hollow.warning[disabled]:focus{border:1px solid #ffae00;color:#ffae00}.button.hollow.warning:hover,.button.hollow.warning:focus{border-color:#805700;color:#805700}.button.hollow.alert,.button.hollow.alert.disabled,.button.hollow.alert[disabled],.button.hollow.alert.disabled:hover,.button.hollow.alert[disabled]:hover,.button.hollow.alert.disabled:focus,.button.hollow.alert[disabled]:focus{border:1px solid #ec5840;color:#ec5840}.button.hollow.alert:hover,.button.hollow.alert:focus{border-color:#881f0e;color:#881f0e}.button.clear,.button.clear:hover,.button.clear:focus,.button.clear.disabled,.button.clear.disabled:hover,.button.clear.disabled:focus,.button.clear[disabled],.button.clear[disabled]:hover,.button.clear[disabled]:focus{border-color:transparent;background-color:transparent}.button.clear,.button.clear.disabled,.button.clear[disabled],.button.clear.disabled:hover,.button.clear[disabled]:hover,.button.clear.disabled:focus,.button.clear[disabled]:focus{color:#2199e8}.button.clear:hover,.button.clear:focus{color:#0c4d78}.button.clear.primary,.button.clear.primary.disabled,.button.clear.primary[disabled],.button.clear.primary.disabled:hover,.button.clear.primary[disabled]:hover,.button.clear.primary.disabled:focus,.button.clear.primary[disabled]:focus{color:#2199e8}.button.clear.primary:hover,.button.clear.primary:focus{color:#0c4d78}.button.clear.secondary,.button.clear.secondary.disabled,.button.clear.secondary[disabled],.button.clear.secondary.disabled:hover,.button.clear.secondary[disabled]:hover,.button.clear.secondary.disabled:focus,.button.clear.secondary[disabled]:focus{color:#777}.button.clear.secondary:hover,.button.clear.secondary:focus{color:#3c3c3c}.button.clear.success,.button.clear.success.disabled,.button.clear.success[disabled],.button.clear.success.disabled:hover,.button.clear.success[disabled]:hover,.button.clear.success.disabled:focus,.button.clear.success[disabled]:focus{color:#3adb76}.button.clear.success:hover,.button.clear.success:focus{color:#157539}.button.clear.warning,.button.clear.warning.disabled,.button.clear.warning[disabled],.button.clear.warning.disabled:hover,.button.clear.warning[disabled]:hover,.button.clear.warning.disabled:focus,.button.clear.warning[disabled]:focus{color:#ffae00}.button.clear.warning:hover,.button.clear.warning:focus{color:#805700}.button.clear.alert,.button.clear.alert.disabled,.button.clear.alert[disabled],.button.clear.alert.disabled:hover,.button.clear.alert[disabled]:hover,.button.clear.alert.disabled:focus,.button.clear.alert[disabled]:focus{color:#ec5840}.button.clear.alert:hover,.button.clear.alert:focus{color:#881f0e}.button.disabled,.button[disabled]{opacity:.25;cursor:not-allowed}.button.dropdown::after{display:block;width:0;height:0;border-style:solid;border-width:.4em;content:"";border-bottom-width:0;border-color:#fefefe transparent transparent;position:relative;top:.4em;display:inline-block;float:right;margin-left:1em}.button.dropdown.hollow::after,.button.dropdown.clear::after{border-top-color:#2199e8}.button.dropdown.hollow.primary::after,.button.dropdown.clear.primary::after{border-top-color:#2199e8}.button.dropdown.hollow.secondary::after,.button.dropdown.clear.secondary::after{border-top-color:#777}.button.dropdown.hollow.success::after,.button.dropdown.clear.success::after{border-top-color:#3adb76}.button.dropdown.hollow.warning::after,.button.dropdown.clear.warning::after{border-top-color:#ffae00}.button.dropdown.hollow.alert::after,.button.dropdown.clear.alert::after{border-top-color:#ec5840}.button.arrow-only::after{top:-0.1em;float:none;margin-left:0}a.button:hover,a.button:focus{text-decoration:none}.button-group{margin-bottom:1rem;display:flex;flex-wrap:wrap;align-items:stretch;flex-grow:1}.button-group::before,.button-group::after{display:table;content:" ";flex-basis:0;order:1}.button-group::after{clear:both}.button-group::before,.button-group::after{display:none}.button-group .button{margin:0;margin-right:1px;margin-bottom:1px;font-size:.9rem;flex:0 0 auto}.button-group .button:last-child{margin-right:0}.button-group.tiny .button{font-size:.6rem}.button-group.small .button{font-size:.75rem}.button-group.large .button{font-size:1.25rem}.button-group.expanded .button{flex:1 1 0px}.button-group.primary .button,.button-group.primary .button.disabled,.button-group.primary .button[disabled],.button-group.primary .button.disabled:hover,.button-group.primary .button[disabled]:hover,.button-group.primary .button.disabled:focus,.button-group.primary .button[disabled]:focus{background-color:#2199e8;color:#0a0a0a}.button-group.primary .button:hover,.button-group.primary .button:focus{background-color:#147cc0;color:#0a0a0a}.button-group.secondary .button,.button-group.secondary .button.disabled,.button-group.secondary .button[disabled],.button-group.secondary .button.disabled:hover,.button-group.secondary .button[disabled]:hover,.button-group.secondary .button.disabled:focus,.button-group.secondary .button[disabled]:focus{background-color:#777;color:#fefefe}.button-group.secondary .button:hover,.button-group.secondary .button:focus{background-color:#5f5f5f;color:#fefefe}.button-group.success .button,.button-group.success .button.disabled,.button-group.success .button[disabled],.button-group.success .button.disabled:hover,.button-group.success .button[disabled]:hover,.button-group.success .button.disabled:focus,.button-group.success .button[disabled]:focus{background-color:#3adb76;color:#0a0a0a}.button-group.success .button:hover,.button-group.success .button:focus{background-color:#22bb5b;color:#0a0a0a}.button-group.warning .button,.button-group.warning .button.disabled,.button-group.warning .button[disabled],.button-group.warning .button.disabled:hover,.button-group.warning .button[disabled]:hover,.button-group.warning .button.disabled:focus,.button-group.warning .button[disabled]:focus{background-color:#ffae00;color:#0a0a0a}.button-group.warning .button:hover,.button-group.warning .button:focus{background-color:#cc8b00;color:#0a0a0a}.button-group.alert .button,.button-group.alert .button.disabled,.button-group.alert .button[disabled],.button-group.alert .button.disabled:hover,.button-group.alert .button[disabled]:hover,.button-group.alert .button.disabled:focus,.button-group.alert .button[disabled]:focus{background-color:#ec5840;color:#0a0a0a}.button-group.alert .button:hover,.button-group.alert .button:focus{background-color:#da3116;color:#0a0a0a}.button-group.hollow .button,.button-group.hollow .button:hover,.button-group.hollow .button:focus,.button-group.hollow .button.disabled,.button-group.hollow .button.disabled:hover,.button-group.hollow .button.disabled:focus,.button-group.hollow .button[disabled],.button-group.hollow .button[disabled]:hover,.button-group.hollow .button[disabled]:focus{background-color:transparent}.button-group.hollow .button,.button-group.hollow .button.disabled,.button-group.hollow .button[disabled],.button-group.hollow .button.disabled:hover,.button-group.hollow .button[disabled]:hover,.button-group.hollow .button.disabled:focus,.button-group.hollow .button[disabled]:focus{border:1px solid #2199e8;color:#2199e8}.button-group.hollow .button:hover,.button-group.hollow .button:focus{border-color:#0c4d78;color:#0c4d78}.button-group.hollow.primary .button,.button-group.hollow.primary .button.disabled,.button-group.hollow.primary .button[disabled],.button-group.hollow.primary .button.disabled:hover,.button-group.hollow.primary .button[disabled]:hover,.button-group.hollow.primary .button.disabled:focus,.button-group.hollow.primary .button[disabled]:focus,.button-group.hollow .button.primary,.button-group.hollow .button.primary.disabled,.button-group.hollow .button.primary[disabled],.button-group.hollow .button.primary.disabled:hover,.button-group.hollow .button.primary[disabled]:hover,.button-group.hollow .button.primary.disabled:focus,.button-group.hollow .button.primary[disabled]:focus{border:1px solid #2199e8;color:#2199e8}.button-group.hollow.primary .button:hover,.button-group.hollow.primary .button:focus,.button-group.hollow .button.primary:hover,.button-group.hollow .button.primary:focus{border-color:#0c4d78;color:#0c4d78}.button-group.hollow.secondary .button,.button-group.hollow.secondary .button.disabled,.button-group.hollow.secondary .button[disabled],.button-group.hollow.secondary .button.disabled:hover,.button-group.hollow.secondary .button[disabled]:hover,.button-group.hollow.secondary .button.disabled:focus,.button-group.hollow.secondary .button[disabled]:focus,.button-group.hollow .button.secondary,.button-group.hollow .button.secondary.disabled,.button-group.hollow .button.secondary[disabled],.button-group.hollow .button.secondary.disabled:hover,.button-group.hollow .button.secondary[disabled]:hover,.button-group.hollow .button.secondary.disabled:focus,.button-group.hollow .button.secondary[disabled]:focus{border:1px solid #777;color:#777}.button-group.hollow.secondary .button:hover,.button-group.hollow.secondary .button:focus,.button-group.hollow .button.secondary:hover,.button-group.hollow .button.secondary:focus{border-color:#3c3c3c;color:#3c3c3c}.button-group.hollow.success .button,.button-group.hollow.success .button.disabled,.button-group.hollow.success .button[disabled],.button-group.hollow.success .button.disabled:hover,.button-group.hollow.success .button[disabled]:hover,.button-group.hollow.success .button.disabled:focus,.button-group.hollow.success .button[disabled]:focus,.button-group.hollow .button.success,.button-group.hollow .button.success.disabled,.button-group.hollow .button.success[disabled],.button-group.hollow .button.success.disabled:hover,.button-group.hollow .button.success[disabled]:hover,.button-group.hollow .button.success.disabled:focus,.button-group.hollow .button.success[disabled]:focus{border:1px solid #3adb76;color:#3adb76}.button-group.hollow.success .button:hover,.button-group.hollow.success .button:focus,.button-group.hollow .button.success:hover,.button-group.hollow .button.success:focus{border-color:#157539;color:#157539}.button-group.hollow.warning .button,.button-group.hollow.warning .button.disabled,.button-group.hollow.warning .button[disabled],.button-group.hollow.warning .button.disabled:hover,.button-group.hollow.warning .button[disabled]:hover,.button-group.hollow.warning .button.disabled:focus,.button-group.hollow.warning .button[disabled]:focus,.button-group.hollow .button.warning,.button-group.hollow .button.warning.disabled,.button-group.hollow .button.warning[disabled],.button-group.hollow .button.warning.disabled:hover,.button-group.hollow .button.warning[disabled]:hover,.button-group.hollow .button.warning.disabled:focus,.button-group.hollow .button.warning[disabled]:focus{border:1px solid #ffae00;color:#ffae00}.button-group.hollow.warning .button:hover,.button-group.hollow.warning .button:focus,.button-group.hollow .button.warning:hover,.button-group.hollow .button.warning:focus{border-color:#805700;color:#805700}.button-group.hollow.alert .button,.button-group.hollow.alert .button.disabled,.button-group.hollow.alert .button[disabled],.button-group.hollow.alert .button.disabled:hover,.button-group.hollow.alert .button[disabled]:hover,.button-group.hollow.alert .button.disabled:focus,.button-group.hollow.alert .button[disabled]:focus,.button-group.hollow .button.alert,.button-group.hollow .button.alert.disabled,.button-group.hollow .button.alert[disabled],.button-group.hollow .button.alert.disabled:hover,.button-group.hollow .button.alert[disabled]:hover,.button-group.hollow .button.alert.disabled:focus,.button-group.hollow .button.alert[disabled]:focus{border:1px solid #ec5840;color:#ec5840}.button-group.hollow.alert .button:hover,.button-group.hollow.alert .button:focus,.button-group.hollow .button.alert:hover,.button-group.hollow .button.alert:focus{border-color:#881f0e;color:#881f0e}.button-group.clear .button,.button-group.clear .button:hover,.button-group.clear .button:focus,.button-group.clear .button.disabled,.button-group.clear .button.disabled:hover,.button-group.clear .button.disabled:focus,.button-group.clear .button[disabled],.button-group.clear .button[disabled]:hover,.button-group.clear .button[disabled]:focus{border-color:transparent;background-color:transparent}.button-group.clear .button,.button-group.clear .button.disabled,.button-group.clear .button[disabled],.button-group.clear .button.disabled:hover,.button-group.clear .button[disabled]:hover,.button-group.clear .button.disabled:focus,.button-group.clear .button[disabled]:focus{color:#2199e8}.button-group.clear .button:hover,.button-group.clear .button:focus{color:#0c4d78}.button-group.clear.primary .button,.button-group.clear.primary .button.disabled,.button-group.clear.primary .button[disabled],.button-group.clear.primary .button.disabled:hover,.button-group.clear.primary .button[disabled]:hover,.button-group.clear.primary .button.disabled:focus,.button-group.clear.primary .button[disabled]:focus,.button-group.clear .button.primary,.button-group.clear .button.primary.disabled,.button-group.clear .button.primary[disabled],.button-group.clear .button.primary.disabled:hover,.button-group.clear .button.primary[disabled]:hover,.button-group.clear .button.primary.disabled:focus,.button-group.clear .button.primary[disabled]:focus{color:#2199e8}.button-group.clear.primary .button:hover,.button-group.clear.primary .button:focus,.button-group.clear .button.primary:hover,.button-group.clear .button.primary:focus{color:#0c4d78}.button-group.clear.secondary .button,.button-group.clear.secondary .button.disabled,.button-group.clear.secondary .button[disabled],.button-group.clear.secondary .button.disabled:hover,.button-group.clear.secondary .button[disabled]:hover,.button-group.clear.secondary .button.disabled:focus,.button-group.clear.secondary .button[disabled]:focus,.button-group.clear .button.secondary,.button-group.clear .button.secondary.disabled,.button-group.clear .button.secondary[disabled],.button-group.clear .button.secondary.disabled:hover,.button-group.clear .button.secondary[disabled]:hover,.button-group.clear .button.secondary.disabled:focus,.button-group.clear .button.secondary[disabled]:focus{color:#777}.button-group.clear.secondary .button:hover,.button-group.clear.secondary .button:focus,.button-group.clear .button.secondary:hover,.button-group.clear .button.secondary:focus{color:#3c3c3c}.button-group.clear.success .button,.button-group.clear.success .button.disabled,.button-group.clear.success .button[disabled],.button-group.clear.success .button.disabled:hover,.button-group.clear.success .button[disabled]:hover,.button-group.clear.success .button.disabled:focus,.button-group.clear.success .button[disabled]:focus,.button-group.clear .button.success,.button-group.clear .button.success.disabled,.button-group.clear .button.success[disabled],.button-group.clear .button.success.disabled:hover,.button-group.clear .button.success[disabled]:hover,.button-group.clear .button.success.disabled:focus,.button-group.clear .button.success[disabled]:focus{color:#3adb76}.button-group.clear.success .button:hover,.button-group.clear.success .button:focus,.button-group.clear .button.success:hover,.button-group.clear .button.success:focus{color:#157539}.button-group.clear.warning .button,.button-group.clear.warning .button.disabled,.button-group.clear.warning .button[disabled],.button-group.clear.warning .button.disabled:hover,.button-group.clear.warning .button[disabled]:hover,.button-group.clear.warning .button.disabled:focus,.button-group.clear.warning .button[disabled]:focus,.button-group.clear .button.warning,.button-group.clear .button.warning.disabled,.button-group.clear .button.warning[disabled],.button-group.clear .button.warning.disabled:hover,.button-group.clear .button.warning[disabled]:hover,.button-group.clear .button.warning.disabled:focus,.button-group.clear .button.warning[disabled]:focus{color:#ffae00}.button-group.clear.warning .button:hover,.button-group.clear.warning .button:focus,.button-group.clear .button.warning:hover,.button-group.clear .button.warning:focus{color:#805700}.button-group.clear.alert .button,.button-group.clear.alert .button.disabled,.button-group.clear.alert .button[disabled],.button-group.clear.alert .button.disabled:hover,.button-group.clear.alert .button[disabled]:hover,.button-group.clear.alert .button.disabled:focus,.button-group.clear.alert .button[disabled]:focus,.button-group.clear .button.alert,.button-group.clear .button.alert.disabled,.button-group.clear .button.alert[disabled],.button-group.clear .button.alert.disabled:hover,.button-group.clear .button.alert[disabled]:hover,.button-group.clear .button.alert.disabled:focus,.button-group.clear .button.alert[disabled]:focus{color:#ec5840}.button-group.clear.alert .button:hover,.button-group.clear.alert .button:focus,.button-group.clear .button.alert:hover,.button-group.clear .button.alert:focus{color:#881f0e}.button-group.no-gaps .button{margin-right:-.0625rem}.button-group.no-gaps .button+.button{border-left-color:transparent}.button-group.stacked,.button-group.stacked-for-small,.button-group.stacked-for-medium{flex-wrap:wrap}.button-group.stacked .button,.button-group.stacked-for-small .button,.button-group.stacked-for-medium .button{flex:0 0 100%}.button-group.stacked .button:last-child,.button-group.stacked-for-small .button:last-child,.button-group.stacked-for-medium .button:last-child{margin-bottom:0}.button-group.stacked.expanded .button,.button-group.stacked-for-small.expanded .button,.button-group.stacked-for-medium.expanded .button{flex:1 1 0px}@media print,screen and (min-width: 90.25em){.button-group.stacked-for-small .button{flex:0 0 auto;margin-bottom:0}}@media print,screen and (min-width: 106.25em){.button-group.stacked-for-medium .button{flex:0 0 auto;margin-bottom:0}}@media print,screen and (max-width: 90.24875em){.button-group.stacked-for-small.expanded{display:block}.button-group.stacked-for-small.expanded .button{display:block;margin-right:0}}@media print,screen and (max-width: 106.24875em){.button-group.stacked-for-medium.expanded{display:block}.button-group.stacked-for-medium.expanded .button{display:block;margin-right:0}}.close-button{position:absolute;z-index:10;color:#8a8a8a;cursor:pointer}[data-whatinput=mouse] .close-button{outline:0}.close-button:hover,.close-button:focus{color:#0a0a0a}.close-button.small{right:.66rem;top:.33em;font-size:1.5em;line-height:1}.close-button.medium,.close-button{right:1rem;top:.5rem;font-size:2em;line-height:1}.label{display:inline-block;padding:.33333rem .5rem;border-radius:0;font-size:.8rem;line-height:1;white-space:nowrap;cursor:default;background:#2199e8;color:#fefefe}.label.primary{background:#2199e8;color:#0a0a0a}.label.secondary{background:#777;color:#fefefe}.label.success{background:#3adb76;color:#0a0a0a}.label.warning{background:#ffae00;color:#0a0a0a}.label.alert{background:#ec5840;color:#0a0a0a}.progress{height:1rem;margin-bottom:1rem;border-radius:0;background-color:#cacaca}.progress.primary .progress-meter{background-color:#2199e8}.progress.secondary .progress-meter{background-color:#777}.progress.success .progress-meter{background-color:#3adb76}.progress.warning .progress-meter{background-color:#ffae00}.progress.alert .progress-meter{background-color:#ec5840}.progress-meter{position:relative;display:block;width:0%;height:100%;background-color:#2199e8}.progress-meter-text{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);margin:0;font-size:.75rem;font-weight:bold;color:#fefefe;white-space:nowrap}.slider{position:relative;height:.5rem;margin-top:1.25rem;margin-bottom:2.25rem;background-color:#e6e6e6;cursor:pointer;user-select:none;touch-action:none}.slider-fill{position:absolute;top:0;left:0;display:inline-block;max-width:100%;height:.5rem;background-color:#cacaca;transition:all .2s ease-in-out}.slider-fill.is-dragging{transition:all 0s linear}.slider-handle{position:absolute;top:50%;transform:translateY(-50%);left:0;z-index:1;cursor:grab;display:inline-block;width:1.4rem;height:1.4rem;border-radius:0;background-color:#2199e8;transition:all .2s ease-in-out;touch-action:manipulation}[data-whatinput=mouse] .slider-handle{outline:0}.slider-handle:hover{background-color:#1583cc}.slider-handle.is-dragging{transition:all 0s linear;cursor:grabbing}.slider.disabled,.slider[disabled]{opacity:.25;cursor:not-allowed}.slider.vertical{display:inline-block;width:.5rem;height:12.5rem;margin:0 1.25rem;transform:scale(1, -1)}.slider.vertical .slider-fill{top:0;width:.5rem;max-height:100%}.slider.vertical .slider-handle{position:absolute;top:0;left:50%;width:1.4rem;height:1.4rem;transform:translateX(-50%)}.switch{position:relative;margin-bottom:1rem;outline:0;font-size:.875rem;font-weight:bold;color:#fefefe;user-select:none;height:2rem}.switch-input{position:absolute;margin-bottom:0;opacity:0}.switch-paddle{position:relative;display:block;width:4rem;height:2rem;border-radius:0;background:#cacaca;transition:all .25s ease-out;font-weight:inherit;color:inherit;cursor:pointer}input+.switch-paddle{margin:0}.switch-paddle::after{position:absolute;top:.25rem;left:.25rem;display:block;width:1.5rem;height:1.5rem;transform:translate3d(0, 0, 0);border-radius:0;background:#fefefe;transition:all .25s ease-out;content:""}input:checked~.switch-paddle{background:#2199e8}input:checked~.switch-paddle::after{left:2.25rem}input:disabled~.switch-paddle{cursor:not-allowed;opacity:.5}[data-whatinput=mouse] input:focus~.switch-paddle{outline:0}.switch-inactive,.switch-active{position:absolute;top:50%;transform:translateY(-50%)}.switch-active{left:8%;display:none}input:checked+label>.switch-active{display:block}.switch-inactive{right:15%}input:checked+label>.switch-inactive{display:none}.switch.tiny{height:1.5rem}.switch.tiny .switch-paddle{width:3rem;height:1.5rem;font-size:.625rem}.switch.tiny .switch-paddle::after{top:.25rem;left:.25rem;width:1rem;height:1rem}.switch.tiny input:checked~.switch-paddle::after{left:1.75rem}.switch.small{height:1.75rem}.switch.small .switch-paddle{width:3.5rem;height:1.75rem;font-size:.75rem}.switch.small .switch-paddle::after{top:.25rem;left:.25rem;width:1.25rem;height:1.25rem}.switch.small input:checked~.switch-paddle::after{left:2rem}.switch.large{height:2.5rem}.switch.large .switch-paddle{width:5rem;height:2.5rem;font-size:1rem}.switch.large .switch-paddle::after{top:.25rem;left:.25rem;width:2rem;height:2rem}.switch.large input:checked~.switch-paddle::after{left:2.75rem}table{border-collapse:collapse;width:100%;margin-bottom:1rem;border-radius:0}thead,tbody,tfoot{border:1px solid #f1f1f1;background-color:#fefefe}caption{padding:.5rem .625rem .625rem;font-weight:bold}thead{background:#f8f8f8;color:#0a0a0a}tfoot{background:#f1f1f1;color:#0a0a0a}thead tr,tfoot tr{background:transparent}thead th,thead td,tfoot th,tfoot td{padding:.5rem .625rem .625rem;font-weight:bold;text-align:left}tbody th,tbody td{padding:.5rem .625rem .625rem}tbody tr:nth-child(even){border-bottom:0;background-color:#f1f1f1}table.unstriped tbody{background-color:#fefefe}table.unstriped tbody tr{border-bottom:1px solid #f1f1f1;background-color:#fefefe}@media print,screen and (max-width: 106.24875em){table.stack thead{display:none}table.stack tfoot{display:none}table.stack tr,table.stack th,table.stack td{display:block}table.stack td{border-top:0}}table.scroll{display:block;width:100%;overflow-x:auto}table.hover thead tr:hover{background-color:#f3f3f3}table.hover tfoot tr:hover{background-color:#ececec}table.hover tbody tr:hover{background-color:#f9f9f9}table.hover:not(.unstriped) tr:nth-of-type(even):hover{background-color:#ececec}.table-scroll{overflow-x:auto}.badge{display:inline-block;min-width:2.1em;padding:.3em;border-radius:50%;font-size:.6rem;text-align:center;background:#2199e8;color:#fefefe}.badge.primary{background:#2199e8;color:#0a0a0a}.badge.secondary{background:#777;color:#fefefe}.badge.success{background:#3adb76;color:#0a0a0a}.badge.warning{background:#ffae00;color:#0a0a0a}.badge.alert{background:#ec5840;color:#0a0a0a}.breadcrumbs{margin:0 0 1rem 0;list-style:none}.breadcrumbs::before,.breadcrumbs::after{display:table;content:" ";flex-basis:0;order:1}.breadcrumbs::after{clear:both}.breadcrumbs li{float:left;font-size:.6875rem;color:#0a0a0a;cursor:default;text-transform:uppercase}.breadcrumbs li:not(:last-child)::after{position:relative;margin:0 .75rem;opacity:1;content:"/";color:#cacaca}.breadcrumbs a{color:#2199e8}.breadcrumbs a:hover{text-decoration:underline}.breadcrumbs .disabled{color:#cacaca;cursor:not-allowed}.callout{position:relative;margin:0 0 1rem 0;padding:1rem;border:1px solid rgba(10,10,10,.25);border-radius:0;background-color:#fff;color:#0a0a0a}.callout>:first-child{margin-top:0}.callout>:last-child{margin-bottom:0}.callout.primary{background-color:#def0fc;color:#0a0a0a}.callout.secondary{background-color:#ebebeb;color:#0a0a0a}.callout.success{background-color:#e1faea;color:#0a0a0a}.callout.warning{background-color:#fff3d9;color:#0a0a0a}.callout.alert{background-color:#fce6e2;color:#0a0a0a}.callout.small{padding-top:.5rem;padding-right:.5rem;padding-bottom:.5rem;padding-left:.5rem}.callout.large{padding-top:3rem;padding-right:3rem;padding-bottom:3rem;padding-left:3rem}.card{display:flex;flex-direction:column;flex-grow:1;margin-bottom:1rem;border:1px solid #e6e6e6;border-radius:0;background:#fefefe;box-shadow:none;overflow:hidden;color:#0a0a0a}.card>:last-child{margin-bottom:0}.card-divider{display:flex;flex:0 1 auto;padding:1rem;background:#e6e6e6}.card-divider>:last-child{margin-bottom:0}.card-section{flex:1 0 auto;padding:1rem}.card-section>:last-child{margin-bottom:0}.card-image{min-height:1px}.dropdown-pane{position:absolute;z-index:10;display:none;width:300px;padding:1rem;visibility:hidden;border:1px solid #cacaca;border-radius:0;background-color:#fefefe;font-size:1rem}.dropdown-pane.is-opening{display:block}.dropdown-pane.is-open{display:block;visibility:visible}.dropdown-pane.tiny{width:100px}.dropdown-pane.small{width:200px}.dropdown-pane.large{width:400px}.pagination{margin-left:0;margin-bottom:1rem}.pagination::before,.pagination::after{display:table;content:" ";flex-basis:0;order:1}.pagination::after{clear:both}.pagination li{margin-right:.0625rem;border-radius:0;font-size:.875rem;display:none}.pagination li:last-child,.pagination li:first-child{display:inline-block}@media print,screen and (min-width: 90.25em){.pagination li{display:inline-block}}.pagination a,.pagination button{display:block;padding:.1875rem .625rem;border-radius:0;color:#0a0a0a}.pagination a:hover,.pagination button:hover{background:#e6e6e6}.pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:not-allowed}.pagination .disabled:hover{background:transparent}.pagination .ellipsis::after{padding:.1875rem .625rem;content:"…";color:#0a0a0a}.pagination-previous a::before,.pagination-previous.disabled::before{display:inline-block;margin-right:.5rem;content:"«"}.pagination-next a::after,.pagination-next.disabled::after{display:inline-block;margin-left:.5rem;content:"»"}.has-tip{position:relative;display:inline-block;border-bottom:dotted 1px #8a8a8a;font-weight:bold;cursor:help}.tooltip{position:absolute;top:calc(100% + 0.6495rem);z-index:1200;max-width:10rem;padding:.75rem;border-radius:0;background-color:#2199e8;font-size:80%;color:#fefefe}.tooltip::before{position:absolute}.tooltip.bottom::before{display:block;width:0;height:0;border-style:solid;border-width:.75rem;content:"";border-top-width:0;border-color:transparent transparent #2199e8;bottom:100%}.tooltip.bottom.align-center::before{left:50%;transform:translateX(-50%)}.tooltip.top::before{display:block;width:0;height:0;border-style:solid;border-width:.75rem;content:"";border-bottom-width:0;border-color:#2199e8 transparent transparent;top:100%;bottom:auto}.tooltip.top.align-center::before{left:50%;transform:translateX(-50%)}.tooltip.left::before{display:block;width:0;height:0;border-style:solid;border-width:.75rem;content:"";border-right-width:0;border-color:transparent transparent transparent #2199e8;left:100%}.tooltip.left.align-center::before{bottom:auto;top:50%;transform:translateY(-50%)}.tooltip.right::before{display:block;width:0;height:0;border-style:solid;border-width:.75rem;content:"";border-left-width:0;border-color:transparent #2199e8 transparent transparent;right:100%;left:auto}.tooltip.right.align-center::before{bottom:auto;top:50%;transform:translateY(-50%)}.tooltip.align-top::before{bottom:auto;top:10%}.tooltip.align-bottom::before{bottom:10%;top:auto}.tooltip.align-left::before{left:10%;right:auto}.tooltip.align-right::before{left:auto;right:10%}.accordion{margin-left:0;background:#fefefe;list-style-type:none}.accordion[disabled] .accordion-title{cursor:not-allowed}.accordion-item:first-child>:first-child{border-radius:0 0 0 0}.accordion-item:last-child>:last-child{border-radius:0 0 0 0}.accordion-title{position:relative;display:block;padding:1.25rem 1rem;border:1px solid #e6e6e6;border-bottom:0;font-size:.75rem;line-height:1;color:#2199e8}:last-child:not(.is-active)>.accordion-title{border-bottom:1px solid #e6e6e6;border-radius:0 0 0 0}.accordion-title:hover,.accordion-title:focus{background-color:#e6e6e6}.accordion-title::before{position:absolute;top:50%;right:1rem;margin-top:-0.5rem;content:"+"}.is-active>.accordion-title::before{content:"–"}.accordion-content{display:none;padding:1rem;border:1px solid #e6e6e6;border-bottom:0;background-color:#fefefe;color:#0a0a0a}:last-child>.accordion-content:last-child{border-bottom:1px solid #e6e6e6}.media-object{display:flex;margin-bottom:1rem;flex-wrap:nowrap}.media-object img{max-width:none}@media print,screen and (max-width: 90.24875em){.media-object.stack-for-small{flex-wrap:wrap}}.media-object-section{flex:0 1 auto}.media-object-section:first-child{padding-right:1rem}.media-object-section:last-child:not(:nth-child(2)){padding-left:1rem}.media-object-section>:last-child{margin-bottom:0}@media print,screen and (max-width: 90.24875em){.stack-for-small .media-object-section{padding:0;padding-bottom:1rem;flex-basis:100%;max-width:100%}.stack-for-small .media-object-section img{width:100%}}.media-object-section.main-section{flex:1 1 0px}.orbit{position:relative}.orbit-container{position:relative;height:0;margin:0;list-style:none;overflow:hidden}.orbit-slide{width:100%;position:absolute}.orbit-slide.no-motionui.is-active{top:0;left:0}.orbit-figure{margin:0}.orbit-image{width:100%;max-width:100%;margin:0}.orbit-caption{position:absolute;bottom:0;width:100%;margin-bottom:0;padding:1rem;background-color:rgba(10,10,10,.5);color:#fefefe}.orbit-next,.orbit-previous{position:absolute;top:50%;transform:translateY(-50%);z-index:10;padding:1rem;color:#fefefe}[data-whatinput=mouse] .orbit-next,[data-whatinput=mouse] .orbit-previous{outline:0}.orbit-next:hover,.orbit-previous:hover,.orbit-next:active,.orbit-previous:active,.orbit-next:focus,.orbit-previous:focus{background-color:rgba(10,10,10,.5)}.orbit-previous{left:0}.orbit-next{left:auto;right:0}.orbit-bullets{position:relative;margin-top:.8rem;margin-bottom:.8rem;text-align:center}[data-whatinput=mouse] .orbit-bullets{outline:0}.orbit-bullets button{width:1.2rem;height:1.2rem;margin:.1rem;border-radius:50%;background-color:#cacaca}.orbit-bullets button:hover{background-color:#8a8a8a}.orbit-bullets button.is-active{background-color:#8a8a8a}.responsive-embed,.flex-video{position:relative;height:0;margin-bottom:1rem;padding-bottom:75%;overflow:hidden}.responsive-embed iframe,.responsive-embed object,.responsive-embed embed,.responsive-embed video,.flex-video iframe,.flex-video object,.flex-video embed,.flex-video video{position:absolute;top:0;left:0;width:100%;height:100%}.responsive-embed.widescreen,.flex-video.widescreen{padding-bottom:56.25%}.tabs{margin:0;border:1px solid #e6e6e6;background:#fefefe;list-style-type:none}.tabs::before,.tabs::after{display:table;content:" ";flex-basis:0;order:1}.tabs::after{clear:both}.tabs.vertical>li{display:block;float:none;width:auto}.tabs.simple>li>a{padding:0}.tabs.simple>li>a:hover{background:transparent}.tabs.primary{background:#2199e8}.tabs.primary>li>a{color:#0a0a0a}.tabs.primary>li>a:hover,.tabs.primary>li>a:focus{background:#1893e4}.tabs-title{float:left}.tabs-title>a{display:block;padding:1.25rem 1.5rem;font-size:.75rem;line-height:1;color:#2199e8}[data-whatinput=mouse] .tabs-title>a{outline:0}.tabs-title>a:hover{background:#fefefe;color:#1585cf}.tabs-title>a:focus,.tabs-title>a[aria-selected=true]{background:#e6e6e6;color:#2199e8}.tabs-content{border:1px solid #e6e6e6;border-top:0;background:#fefefe;color:#0a0a0a;transition:all .5s ease}.tabs-content.vertical{border:1px solid #e6e6e6;border-left:0}.tabs-panel{display:none;padding:1rem}.tabs-panel.is-active{display:block}.thumbnail{display:inline-block;max-width:100%;margin-bottom:1rem;border:4px solid #fefefe;border-radius:0;box-shadow:0 0 0 1px rgba(10,10,10,.2);line-height:0}a.thumbnail{transition:box-shadow 200ms ease-out}a.thumbnail:hover,a.thumbnail:focus{box-shadow:0 0 6px 1px rgba(33,153,232,.5)}a.thumbnail image{box-shadow:none}.menu{padding:0;margin:0;list-style:none;position:relative;display:flex;flex-wrap:wrap}[data-whatinput=mouse] .menu li{outline:0}.menu a,.menu .button{line-height:1;text-decoration:none;display:block;padding:.7rem 1rem}.menu input,.menu select,.menu a,.menu button{margin-bottom:0}.menu input{display:inline-block}.menu,.menu.horizontal{flex-wrap:wrap;flex-direction:row}.menu.vertical{flex-wrap:nowrap;flex-direction:column}.menu.vertical.icon-top li a img,.menu.vertical.icon-top li a i,.menu.vertical.icon-top li a svg,.menu.vertical.icon-bottom li a img,.menu.vertical.icon-bottom li a i,.menu.vertical.icon-bottom li a svg{text-align:left}.menu.expanded li{flex:1 1 0px}.menu.expanded.icon-top li a img,.menu.expanded.icon-top li a i,.menu.expanded.icon-top li a svg,.menu.expanded.icon-bottom li a img,.menu.expanded.icon-bottom li a i,.menu.expanded.icon-bottom li a svg{text-align:left}.menu.simple{align-items:center}.menu.simple li+li{margin-left:1rem}.menu.simple a{padding:0}@media print,screen and (min-width: 90.25em){.menu.medium-horizontal{flex-wrap:wrap;flex-direction:row}.menu.medium-vertical{flex-wrap:nowrap;flex-direction:column}.menu.medium-expanded li{flex:1 1 0px}.menu.medium-simple li{flex:1 1 0px}}@media print,screen and (min-width: 106.25em){.menu.large-horizontal{flex-wrap:wrap;flex-direction:row}.menu.large-vertical{flex-wrap:nowrap;flex-direction:column}.menu.large-expanded li{flex:1 1 0px}.menu.large-simple li{flex:1 1 0px}}.menu.nested{margin-right:0;margin-left:1rem}.menu.icons a{display:flex}.menu.icon-top a,.menu.icon-right a,.menu.icon-bottom a,.menu.icon-left a{display:flex}.menu.icon-left li a,.menu.nested.icon-left li a{flex-flow:row nowrap}.menu.icon-left li a img,.menu.icon-left li a i,.menu.icon-left li a svg,.menu.nested.icon-left li a img,.menu.nested.icon-left li a i,.menu.nested.icon-left li a svg{margin-right:.25rem}.menu.icon-right li a,.menu.nested.icon-right li a{flex-flow:row nowrap}.menu.icon-right li a img,.menu.icon-right li a i,.menu.icon-right li a svg,.menu.nested.icon-right li a img,.menu.nested.icon-right li a i,.menu.nested.icon-right li a svg{margin-left:.25rem}.menu.icon-top li a,.menu.nested.icon-top li a{flex-flow:column nowrap}.menu.icon-top li a img,.menu.icon-top li a i,.menu.icon-top li a svg,.menu.nested.icon-top li a img,.menu.nested.icon-top li a i,.menu.nested.icon-top li a svg{align-self:stretch;margin-bottom:.25rem;text-align:center}.menu.icon-bottom li a,.menu.nested.icon-bottom li a{flex-flow:column nowrap}.menu.icon-bottom li a img,.menu.icon-bottom li a i,.menu.icon-bottom li a svg,.menu.nested.icon-bottom li a img,.menu.nested.icon-bottom li a i,.menu.nested.icon-bottom li a svg{align-self:stretch;margin-bottom:.25rem;text-align:center}.menu .is-active>a{background:#2199e8;color:#0a0a0a}.menu .active>a{background:#2199e8;color:#0a0a0a}.menu.align-left{justify-content:flex-start}.menu.align-right li{display:flex;justify-content:flex-end}.menu.align-right li .submenu li{justify-content:flex-start}.menu.align-right.vertical li{display:block;text-align:right}.menu.align-right.vertical li .submenu li{text-align:right}.menu.align-right.icon-top li a img,.menu.align-right.icon-top li a i,.menu.align-right.icon-top li a svg,.menu.align-right.icon-bottom li a img,.menu.align-right.icon-bottom li a i,.menu.align-right.icon-bottom li a svg{text-align:right}.menu.align-right .nested{margin-right:1rem;margin-left:0}.menu.align-center li{display:flex;justify-content:center}.menu.align-center li .submenu li{justify-content:flex-start}.menu .menu-text{padding:.7rem 1rem;font-weight:bold;line-height:1;color:inherit}.menu-centered>.menu{justify-content:center}.menu-centered>.menu li{display:flex;justify-content:center}.menu-centered>.menu li .submenu li{justify-content:flex-start}.no-js [data-responsive-menu] ul{display:none}.menu-icon{position:relative;display:inline-block;vertical-align:middle;width:20px;height:16px;cursor:pointer}.menu-icon::after{position:absolute;top:0;left:0;display:block;width:100%;height:2px;background:#222;box-shadow:0 7px 0 #222,0 14px 0 #222;content:""}.menu-icon:hover::after{background:#cacaca;box-shadow:0 7px 0 #cacaca,0 14px 0 #cacaca}.menu-icon.dark{position:relative;display:inline-block;vertical-align:middle;width:20px;height:16px;cursor:pointer}.menu-icon.dark::after{position:absolute;top:0;left:0;display:block;width:100%;height:2px;background:#0a0a0a;box-shadow:0 7px 0 #0a0a0a,0 14px 0 #0a0a0a;content:""}.menu-icon.dark:hover::after{background:#8a8a8a;box-shadow:0 7px 0 #8a8a8a,0 14px 0 #8a8a8a}.accordion-menu li{width:100%}.accordion-menu a{padding:.7rem 1rem}.accordion-menu .is-accordion-submenu a{padding:.7rem 1rem}.accordion-menu .nested.is-accordion-submenu{margin-right:0;margin-left:1rem}.accordion-menu.align-right .nested.is-accordion-submenu{margin-right:1rem;margin-left:0}.accordion-menu .is-accordion-submenu-parent:not(.has-submenu-toggle)>a{position:relative}.accordion-menu .is-accordion-submenu-parent:not(.has-submenu-toggle)>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-bottom-width:0;border-color:#2199e8 transparent transparent;position:absolute;top:50%;margin-top:-3px;right:1rem}.accordion-menu.align-left .is-accordion-submenu-parent>a::after{right:1rem;left:auto}.accordion-menu.align-right .is-accordion-submenu-parent>a::after{right:auto;left:1rem}.accordion-menu .is-accordion-submenu-parent[aria-expanded=true]>a::after{transform:rotate(180deg);transform-origin:50% 50%}.is-accordion-submenu-parent{position:relative}.has-submenu-toggle>a{margin-right:40px}.submenu-toggle{position:absolute;top:0;right:0;width:40px;height:40px;cursor:pointer}.submenu-toggle::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-bottom-width:0;border-color:#2199e8 transparent transparent;top:0;bottom:0;margin:auto}.submenu-toggle[aria-expanded=true]::after{transform:scaleY(-1);transform-origin:50% 50%}.submenu-toggle-text{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important}.is-drilldown{position:relative;overflow:hidden}.is-drilldown li{display:block}.is-drilldown.animate-height{transition:height .5s}.drilldown a{padding:.7rem 1rem;background:#fefefe}.drilldown .is-drilldown-submenu{position:absolute;top:0;left:100%;z-index:-1;width:100%;background:#fefefe;transition:transform .15s linear}.drilldown .is-drilldown-submenu.is-active{z-index:1;display:block;transform:translateX(-100%)}.drilldown .is-drilldown-submenu.is-closing{transform:translateX(100%)}.drilldown .is-drilldown-submenu a{padding:.7rem 1rem}.drilldown .nested.is-drilldown-submenu{margin-right:0;margin-left:0}.drilldown .drilldown-submenu-cover-previous{min-height:100%}.drilldown .is-drilldown-submenu-parent>a{position:relative}.drilldown .is-drilldown-submenu-parent>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-right-width:0;border-color:transparent transparent transparent #2199e8;position:absolute;top:50%;margin-top:-6px;right:1rem}.drilldown.align-left .is-drilldown-submenu-parent>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-right-width:0;border-color:transparent transparent transparent #2199e8;right:1rem;left:auto}.drilldown.align-right .is-drilldown-submenu-parent>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-left-width:0;border-color:transparent #2199e8 transparent transparent;right:auto;left:1rem}.drilldown .js-drilldown-back>a::before{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-left-width:0;border-color:transparent #2199e8 transparent transparent;display:inline-block;vertical-align:middle;margin-right:.75rem}.dropdown.menu>li.opens-left>.is-dropdown-submenu{top:100%;right:0;left:auto}.dropdown.menu>li.opens-right>.is-dropdown-submenu{top:100%;right:auto;left:0}.dropdown.menu>li.is-dropdown-submenu-parent>a{position:relative;padding-right:1.5rem}.dropdown.menu>li.is-dropdown-submenu-parent>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-bottom-width:0;border-color:#2199e8 transparent transparent;right:5px;left:auto;margin-top:-3px}[data-whatinput=mouse] .dropdown.menu a{outline:0}.dropdown.menu>li>a{padding:.7rem 1rem}.dropdown.menu>li.is-active>a{background:transparent;color:#2199e8}.no-js .dropdown.menu ul{display:none}.dropdown.menu .nested.is-dropdown-submenu{margin-right:0;margin-left:0}.dropdown.menu.vertical>li .is-dropdown-submenu{top:0}.dropdown.menu.vertical>li.opens-left>.is-dropdown-submenu{top:0;right:100%;left:auto}.dropdown.menu.vertical>li.opens-right>.is-dropdown-submenu{right:auto;left:100%}.dropdown.menu.vertical>li>a::after{right:14px}.dropdown.menu.vertical>li.opens-left>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-left-width:0;border-color:transparent #2199e8 transparent transparent;right:auto;left:5px}.dropdown.menu.vertical>li.opens-right>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-right-width:0;border-color:transparent transparent transparent #2199e8}@media print,screen and (min-width: 90.25em){.dropdown.menu.medium-horizontal>li.opens-left>.is-dropdown-submenu{top:100%;right:0;left:auto}.dropdown.menu.medium-horizontal>li.opens-right>.is-dropdown-submenu{top:100%;right:auto;left:0}.dropdown.menu.medium-horizontal>li.is-dropdown-submenu-parent>a{position:relative;padding-right:1.5rem}.dropdown.menu.medium-horizontal>li.is-dropdown-submenu-parent>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-bottom-width:0;border-color:#2199e8 transparent transparent;right:5px;left:auto;margin-top:-3px}.dropdown.menu.medium-vertical>li .is-dropdown-submenu{top:0}.dropdown.menu.medium-vertical>li.opens-left>.is-dropdown-submenu{top:0;right:100%;left:auto}.dropdown.menu.medium-vertical>li.opens-right>.is-dropdown-submenu{right:auto;left:100%}.dropdown.menu.medium-vertical>li>a::after{right:14px}.dropdown.menu.medium-vertical>li.opens-left>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-left-width:0;border-color:transparent #2199e8 transparent transparent;right:auto;left:5px}.dropdown.menu.medium-vertical>li.opens-right>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-right-width:0;border-color:transparent transparent transparent #2199e8}}@media print,screen and (min-width: 106.25em){.dropdown.menu.large-horizontal>li.opens-left>.is-dropdown-submenu{top:100%;right:0;left:auto}.dropdown.menu.large-horizontal>li.opens-right>.is-dropdown-submenu{top:100%;right:auto;left:0}.dropdown.menu.large-horizontal>li.is-dropdown-submenu-parent>a{position:relative;padding-right:1.5rem}.dropdown.menu.large-horizontal>li.is-dropdown-submenu-parent>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-bottom-width:0;border-color:#2199e8 transparent transparent;right:5px;left:auto;margin-top:-3px}.dropdown.menu.large-vertical>li .is-dropdown-submenu{top:0}.dropdown.menu.large-vertical>li.opens-left>.is-dropdown-submenu{top:0;right:100%;left:auto}.dropdown.menu.large-vertical>li.opens-right>.is-dropdown-submenu{right:auto;left:100%}.dropdown.menu.large-vertical>li>a::after{right:14px}.dropdown.menu.large-vertical>li.opens-left>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-left-width:0;border-color:transparent #2199e8 transparent transparent;right:auto;left:5px}.dropdown.menu.large-vertical>li.opens-right>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-right-width:0;border-color:transparent transparent transparent #2199e8}}.dropdown.menu.align-right .is-dropdown-submenu.first-sub{top:100%;right:0;left:auto}.is-dropdown-menu.vertical{width:100px}.is-dropdown-menu.vertical.align-right{float:right}.is-dropdown-submenu-parent{position:relative}.is-dropdown-submenu-parent a::after{position:absolute;top:50%;right:5px;left:auto;margin-top:-6px}.is-dropdown-submenu-parent.opens-inner>.is-dropdown-submenu{top:100%;left:auto}.is-dropdown-submenu-parent.opens-left>.is-dropdown-submenu{right:100%;left:auto}.is-dropdown-submenu-parent.opens-right>.is-dropdown-submenu{right:auto;left:100%}.is-dropdown-submenu{position:absolute;top:0;left:100%;z-index:1;display:none;min-width:200px;border:1px solid #cacaca;background:#fefefe}.dropdown .is-dropdown-submenu a{padding:.7rem 1rem}.is-dropdown-submenu .is-dropdown-submenu-parent>a::after{right:14px}.is-dropdown-submenu .is-dropdown-submenu-parent.opens-left>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-left-width:0;border-color:transparent #2199e8 transparent transparent;right:auto;left:5px}.is-dropdown-submenu .is-dropdown-submenu-parent.opens-right>a::after{display:block;width:0;height:0;border-style:solid;border-width:6px;content:"";border-right-width:0;border-color:transparent transparent transparent #2199e8}.is-dropdown-submenu .is-dropdown-submenu{margin-top:-1px}.is-dropdown-submenu>li{width:100%}.is-dropdown-submenu.js-dropdown-active{display:block}.is-off-canvas-open{overflow:hidden}.js-off-canvas-overlay{position:absolute;top:0;left:0;z-index:11;width:100%;height:100%;transition:opacity .5s ease,visibility .5s ease;background:rgba(254,254,254,.25);opacity:0;visibility:hidden;overflow:hidden}.js-off-canvas-overlay.is-visible{opacity:1;visibility:visible}.js-off-canvas-overlay.is-closable{cursor:pointer}.js-off-canvas-overlay.is-overlay-absolute{position:absolute}.js-off-canvas-overlay.is-overlay-fixed{position:fixed}.off-canvas-wrapper{position:relative;overflow:hidden}.off-canvas{position:fixed;z-index:12;transition:transform .5s ease;backface-visibility:hidden;background:#e6e6e6}[data-whatinput=mouse] .off-canvas{outline:0}.off-canvas.is-transition-push{z-index:12}.off-canvas.is-closed{visibility:hidden}.off-canvas.is-transition-overlap{z-index:13}.off-canvas.is-transition-overlap.is-open{box-shadow:0 0 10px rgba(10,10,10,.7)}.off-canvas.is-open{transform:translate(0, 0)}.off-canvas-absolute{position:absolute;z-index:12;transition:transform .5s ease;backface-visibility:hidden;background:#e6e6e6}[data-whatinput=mouse] .off-canvas-absolute{outline:0}.off-canvas-absolute.is-transition-push{z-index:12}.off-canvas-absolute.is-closed{visibility:hidden}.off-canvas-absolute.is-transition-overlap{z-index:13}.off-canvas-absolute.is-transition-overlap.is-open{box-shadow:0 0 10px rgba(10,10,10,.7)}.off-canvas-absolute.is-open{transform:translate(0, 0)}.position-left{top:0;left:0;height:100%;overflow-y:auto;-webkit-overflow-scrolling:touch;width:250px;transform:translateX(-250px)}.off-canvas-content .off-canvas.position-left{transform:translateX(-250px)}.off-canvas-content .off-canvas.position-left.is-transition-overlap.is-open{transform:translate(0, 0)}.off-canvas-content.is-open-left.has-transition-push{transform:translateX(250px)}.position-left.is-transition-push{box-shadow:inset -13px 0 20px -13px rgba(10,10,10,.25)}.position-right{top:0;right:0;height:100%;overflow-y:auto;-webkit-overflow-scrolling:touch;width:250px;transform:translateX(250px)}.off-canvas-content .off-canvas.position-right{transform:translateX(250px)}.off-canvas-content .off-canvas.position-right.is-transition-overlap.is-open{transform:translate(0, 0)}.off-canvas-content.is-open-right.has-transition-push{transform:translateX(-250px)}.position-right.is-transition-push{box-shadow:inset 13px 0 20px -13px rgba(10,10,10,.25)}.position-top{top:0;left:0;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;height:250px;transform:translateY(-250px)}.off-canvas-content .off-canvas.position-top{transform:translateY(-250px)}.off-canvas-content .off-canvas.position-top.is-transition-overlap.is-open{transform:translate(0, 0)}.off-canvas-content.is-open-top.has-transition-push{transform:translateY(250px)}.position-top.is-transition-push{box-shadow:inset 0 -13px 20px -13px rgba(10,10,10,.25)}.position-bottom{bottom:0;left:0;width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;height:250px;transform:translateY(250px)}.off-canvas-content .off-canvas.position-bottom{transform:translateY(250px)}.off-canvas-content .off-canvas.position-bottom.is-transition-overlap.is-open{transform:translate(0, 0)}.off-canvas-content.is-open-bottom.has-transition-push{transform:translateY(-250px)}.position-bottom.is-transition-push{box-shadow:inset 0 13px 20px -13px rgba(10,10,10,.25)}.off-canvas-content{transform:none;backface-visibility:hidden}.off-canvas-content.has-transition-overlap,.off-canvas-content.has-transition-push{transition:transform .5s ease}.off-canvas-content.has-transition-push{transform:translate(0, 0)}.off-canvas-content .off-canvas.is-open{transform:translate(0, 0)}@media print,screen and (min-width: 90.25em){.position-left.reveal-for-medium{transform:none;z-index:12;transition:none;visibility:visible}.position-left.reveal-for-medium .close-button{display:none}.off-canvas-content .position-left.reveal-for-medium{transform:none}.off-canvas-content.has-reveal-left{margin-left:250px}.position-left.reveal-for-medium~.off-canvas-content{margin-left:250px}.position-right.reveal-for-medium{transform:none;z-index:12;transition:none;visibility:visible}.position-right.reveal-for-medium .close-button{display:none}.off-canvas-content .position-right.reveal-for-medium{transform:none}.off-canvas-content.has-reveal-right{margin-right:250px}.position-right.reveal-for-medium~.off-canvas-content{margin-right:250px}.position-top.reveal-for-medium{transform:none;z-index:12;transition:none;visibility:visible}.position-top.reveal-for-medium .close-button{display:none}.off-canvas-content .position-top.reveal-for-medium{transform:none}.off-canvas-content.has-reveal-top{margin-top:250px}.position-top.reveal-for-medium~.off-canvas-content{margin-top:250px}.position-bottom.reveal-for-medium{transform:none;z-index:12;transition:none;visibility:visible}.position-bottom.reveal-for-medium .close-button{display:none}.off-canvas-content .position-bottom.reveal-for-medium{transform:none}.off-canvas-content.has-reveal-bottom{margin-bottom:250px}.position-bottom.reveal-for-medium~.off-canvas-content{margin-bottom:250px}}@media print,screen and (min-width: 106.25em){.position-left.reveal-for-large{transform:none;z-index:12;transition:none;visibility:visible}.position-left.reveal-for-large .close-button{display:none}.off-canvas-content .position-left.reveal-for-large{transform:none}.off-canvas-content.has-reveal-left{margin-left:250px}.position-left.reveal-for-large~.off-canvas-content{margin-left:250px}.position-right.reveal-for-large{transform:none;z-index:12;transition:none;visibility:visible}.position-right.reveal-for-large .close-button{display:none}.off-canvas-content .position-right.reveal-for-large{transform:none}.off-canvas-content.has-reveal-right{margin-right:250px}.position-right.reveal-for-large~.off-canvas-content{margin-right:250px}.position-top.reveal-for-large{transform:none;z-index:12;transition:none;visibility:visible}.position-top.reveal-for-large .close-button{display:none}.off-canvas-content .position-top.reveal-for-large{transform:none}.off-canvas-content.has-reveal-top{margin-top:250px}.position-top.reveal-for-large~.off-canvas-content{margin-top:250px}.position-bottom.reveal-for-large{transform:none;z-index:12;transition:none;visibility:visible}.position-bottom.reveal-for-large .close-button{display:none}.off-canvas-content .position-bottom.reveal-for-large{transform:none}.off-canvas-content.has-reveal-bottom{margin-bottom:250px}.position-bottom.reveal-for-large~.off-canvas-content{margin-bottom:250px}}@media print,screen and (min-width: 90.25em){.off-canvas.in-canvas-for-medium{visibility:visible;height:auto;position:static;background:none;width:auto;overflow:visible;transition:none}.off-canvas.in-canvas-for-medium.position-left,.off-canvas.in-canvas-for-medium.position-right,.off-canvas.in-canvas-for-medium.position-top,.off-canvas.in-canvas-for-medium.position-bottom{box-shadow:none;transform:none}.off-canvas.in-canvas-for-medium .close-button{display:none}}@media print,screen and (min-width: 106.25em){.off-canvas.in-canvas-for-large{visibility:visible;height:auto;position:static;background:none;width:auto;overflow:visible;transition:none}.off-canvas.in-canvas-for-large.position-left,.off-canvas.in-canvas-for-large.position-right,.off-canvas.in-canvas-for-large.position-top,.off-canvas.in-canvas-for-large.position-bottom{box-shadow:none;transform:none}.off-canvas.in-canvas-for-large .close-button{display:none}}html.is-reveal-open{position:fixed;width:100%;overflow-y:hidden}html.is-reveal-open.zf-has-scroll{overflow-y:scroll;-webkit-overflow-scrolling:touch}html.is-reveal-open body{overflow-y:hidden}.reveal-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1005;display:none;background-color:rgba(10,10,10,.45);overflow-y:auto;-webkit-overflow-scrolling:touch}.reveal{z-index:1006;backface-visibility:hidden;display:none;padding:1rem;border:1px solid #cacaca;border-radius:0;background-color:#fefefe;position:relative;top:100px;margin-right:auto;margin-left:auto;overflow-y:auto;-webkit-overflow-scrolling:touch}[data-whatinput=mouse] .reveal{outline:0}@media print,screen and (min-width: 90.25em){.reveal{min-height:0}}.reveal .column,.reveal .columns{min-width:0}.reveal>:last-child{margin-bottom:0}@media print,screen and (min-width: 90.25em){.reveal{width:600px;max-width:87.5rem}}.reveal.collapse{padding:0}@media print,screen and (min-width: 90.25em){.reveal.tiny{width:30%;max-width:87.5rem}}@media print,screen and (min-width: 90.25em){.reveal.small{width:50%;max-width:87.5rem}}@media print,screen and (min-width: 90.25em){.reveal.large{width:90%;max-width:87.5rem}}.reveal.full{top:0;right:0;bottom:0;left:0;width:100%;max-width:none;height:100%;min-height:100%;margin-left:0;border:0;border-radius:0}@media print,screen and (max-width: 90.24875em){.reveal{top:0;right:0;bottom:0;left:0;width:100%;max-width:none;height:100%;min-height:100%;margin-left:0;border:0;border-radius:0}}.reveal.without-overlay{position:fixed}.sticky-container{position:relative}.sticky{position:relative;z-index:0;transform:translate3d(0, 0, 0)}.sticky.is-stuck{position:fixed;z-index:5;width:100%}.sticky.is-stuck.is-at-top{top:0}.sticky.is-stuck.is-at-bottom{bottom:0}.sticky.is-anchored{position:relative;right:auto;left:auto}.sticky.is-anchored.is-at-bottom{bottom:0}.title-bar{padding:.5rem;background:#fefefe;color:#8a8a8a;display:flex;justify-content:flex-start;align-items:center}.title-bar .menu-icon{margin-left:.25rem;margin-right:.25rem}.title-bar-left,.title-bar-right{flex:1 1 0px}.title-bar-right{text-align:right}.title-bar-title{display:inline-block;vertical-align:middle;font-weight:bold}.top-bar{display:flex;flex-wrap:nowrap;justify-content:space-between;align-items:center;padding:.5rem;flex-wrap:wrap}.top-bar,.top-bar ul{background-color:#e6e6e6}.top-bar input{max-width:200px;margin-right:1rem}.top-bar .input-group-field{width:100%;margin-right:0}.top-bar input.button{width:auto}.top-bar .top-bar-left,.top-bar .top-bar-right{flex:0 0 100%;max-width:100%}@media print,screen and (min-width: 90.25em){.top-bar{flex-wrap:nowrap}.top-bar .top-bar-left{flex:1 1 auto;margin-right:auto}.top-bar .top-bar-right{flex:0 1 auto;margin-left:auto}}@media print,screen and (max-width: 106.24875em){.top-bar.stacked-for-medium{flex-wrap:wrap}.top-bar.stacked-for-medium .top-bar-left,.top-bar.stacked-for-medium .top-bar-right{flex:0 0 100%;max-width:100%}}.top-bar.stacked-for-large{flex-wrap:wrap}.top-bar.stacked-for-large .top-bar-left,.top-bar.stacked-for-large .top-bar-right{flex:0 0 100%;max-width:100%}.top-bar-title{flex:0 0 auto;margin:.5rem 1rem .5rem 0}.top-bar-left,.top-bar-right{flex:0 0 auto}.float-left{float:left !important}.float-right{float:right !important}.float-center{display:block;margin-right:auto;margin-left:auto}.clearfix::before,.clearfix::after{display:table;content:" ";flex-basis:0;order:1}.clearfix::after{clear:both}.align-left{justify-content:flex-start}.align-right{justify-content:flex-end}.align-center{justify-content:center}.align-justify{justify-content:space-between}.align-spaced{justify-content:space-around}.align-left.vertical.menu>li>a{justify-content:flex-start}.align-right.vertical.menu>li>a{justify-content:flex-end}.align-center.vertical.menu>li>a{justify-content:center}.align-top{align-items:flex-start}.align-self-top{align-self:flex-start}.align-bottom{align-items:flex-end}.align-self-bottom{align-self:flex-end}.align-middle{align-items:center}.align-self-middle{align-self:center}.align-stretch{align-items:stretch}.align-self-stretch{align-self:stretch}.align-center-middle{justify-content:center;align-items:center;align-content:center}.small-order-1{order:1}.small-order-2{order:2}.small-order-3{order:3}.small-order-4{order:4}.small-order-5{order:5}.small-order-6{order:6}@media print,screen and (min-width: 90.25em){.medium-order-1{order:1}.medium-order-2{order:2}.medium-order-3{order:3}.medium-order-4{order:4}.medium-order-5{order:5}.medium-order-6{order:6}}@media print,screen and (min-width: 106.25em){.large-order-1{order:1}.large-order-2{order:2}.large-order-3{order:3}.large-order-4{order:4}.large-order-5{order:5}.large-order-6{order:6}}.flex-container{display:flex}.flex-child-auto{flex:1 1 auto}.flex-child-grow{flex:1 0 auto}.flex-child-shrink{flex:0 1 auto}.flex-dir-row{flex-direction:row}.flex-dir-row-reverse{flex-direction:row-reverse}.flex-dir-column{flex-direction:column}.flex-dir-column-reverse{flex-direction:column-reverse}@media print,screen and (min-width: 90.25em){.medium-flex-container{display:flex}.medium-flex-child-auto{flex:1 1 auto}.medium-flex-child-grow{flex:1 0 auto}.medium-flex-child-shrink{flex:0 1 auto}.medium-flex-dir-row{flex-direction:row}.medium-flex-dir-row-reverse{flex-direction:row-reverse}.medium-flex-dir-column{flex-direction:column}.medium-flex-dir-column-reverse{flex-direction:column-reverse}}@media print,screen and (min-width: 106.25em){.large-flex-container{display:flex}.large-flex-child-auto{flex:1 1 auto}.large-flex-child-grow{flex:1 0 auto}.large-flex-child-shrink{flex:0 1 auto}.large-flex-dir-row{flex-direction:row}.large-flex-dir-row-reverse{flex-direction:row-reverse}.large-flex-dir-column{flex-direction:column}.large-flex-dir-column-reverse{flex-direction:column-reverse}}.hide{display:none !important}.invisible{visibility:hidden}.visible{visibility:visible}@media print,screen and (max-width: 90.24875em){.hide-for-small-only{display:none !important}}@media screen and (max-width: 0em),screen and (min-width: 90.25em){.show-for-small-only{display:none !important}}@media print,screen and (min-width: 90.25em){.hide-for-medium{display:none !important}}@media screen and (max-width: 90.24875em){.show-for-medium{display:none !important}}@media print,screen and (min-width: 90.25em)and (max-width: 106.24875em){.hide-for-medium-only{display:none !important}}@media screen and (max-width: 90.24875em),screen and (min-width: 106.25em){.show-for-medium-only{display:none !important}}@media print,screen and (min-width: 106.25em){.hide-for-large{display:none !important}}@media screen and (max-width: 106.24875em){.show-for-large{display:none !important}}@media print,screen and (min-width: 106.25em){.hide-for-large-only{display:none !important}}@media screen and (max-width: 106.24875em){.show-for-large-only{display:none !important}}.show-for-sr,.show-on-focus{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important}.show-on-focus:active,.show-on-focus:focus{position:static !important;width:auto !important;height:auto !important;overflow:visible !important;clip:auto !important;white-space:normal !important}.show-for-landscape,.hide-for-portrait{display:block !important}@media screen and (orientation: landscape){.show-for-landscape,.hide-for-portrait{display:block !important}}@media screen and (orientation: portrait){.show-for-landscape,.hide-for-portrait{display:none !important}}.hide-for-landscape,.show-for-portrait{display:none !important}@media screen and (orientation: landscape){.hide-for-landscape,.show-for-portrait{display:none !important}}@media screen and (orientation: portrait){.hide-for-landscape,.show-for-portrait{display:block !important}}.show-for-dark-mode{display:none}.hide-for-dark-mode{display:block}@media screen and (prefers-color-scheme: dark){.show-for-dark-mode{display:block !important}.hide-for-dark-mode{display:none !important}}.show-for-ie{display:none}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.show-for-ie{display:block !important}.hide-for-ie{display:none !important}}.show-for-sticky{display:none}.is-stuck .show-for-sticky{display:block}.is-stuck .hide-for-sticky{display:none}.text-hide{font:0/0 a !important;color:transparent !important;text-shadow:none !important;background-color:transparent !important;border:0 !important}.text-truncate{max-width:100% !important;overflow:hidden !important;text-overflow:ellipsis;white-space:nowrap !important}.text-nowrap{white-space:nowrap !important}.text-wrap{word-wrap:break-word !important}.text-lowercase{text-transform:lowercase !important}.text-uppercase{text-transform:uppercase !important}.text-capitalize{text-transform:capitalize !important}.text-overline{text-decoration:overline !important}.text-underline{text-decoration:underline !important}.text-line-through{text-decoration:line-through !important}.font-wide{letter-spacing:.25rem}.font-normal{font-weight:normal}.font-bold{font-weight:bold}.font-italic{font-style:italic !important}ul.list-disc{list-style-type:disc !important}ul.list-circle{list-style-type:circle !important}ul.list-square{list-style-type:square !important}ol.list-decimal{list-style-type:decimal !important}ol.list-lower-alpha{list-style-type:lower-alpha !important}ol.list-lower-latin{list-style-type:lower-latin !important}ol.list-lower-roman{list-style-type:lower-roman !important}ol.list-upper-alpha{list-style-type:upper-alpha !important}ol.list-upper-latin{list-style-type:upper-latin !important}ol.list-upper-roman{list-style-type:upper-roman !important}.rounded{border-radius:5000px !important}.rounded .switch-paddle{border-radius:5000px !important}.rounded .switch-paddle:after{border-radius:50%}.radius{border-radius:.1875rem}.bordered{border:.0625rem solid #cacaca}.shadow{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12)}.arrow-down{display:block;width:0;height:0;border-style:solid;border-width:.4375rem;content:"";border-bottom-width:0;border-color:#0a0a0a transparent transparent}.arrow-up{display:block;width:0;height:0;border-style:solid;border-width:.4375rem;content:"";border-top-width:0;border-color:transparent transparent #0a0a0a}.arrow-right{display:block;width:0;height:0;border-style:solid;border-width:.4375rem;content:"";border-right-width:0;border-color:transparent transparent transparent #0a0a0a}.arrow-left{display:block;width:0;height:0;border-style:solid;border-width:.4375rem;content:"";border-left-width:0;border-color:transparent #0a0a0a transparent transparent}.separator-center{text-align:center !important}.separator-center::before,.separator-center::after{display:table;content:" ";flex-basis:0;order:1}.separator-center::after{clear:both}.separator-center::after{position:relative !important;width:3rem;border-bottom:.125rem solid #2199e8;margin:1rem auto 0}.separator-left{text-align:left !important}.separator-left::before,.separator-left::after{display:table;content:" ";flex-basis:0;order:1}.separator-left::after{clear:both}.separator-left::after{position:relative !important;width:3rem;border-bottom:.125rem solid #2199e8;margin:1rem auto 0;margin-left:0 !important}.separator-right{text-align:right !important}.separator-right::before,.separator-right::after{display:table;content:" ";flex-basis:0;order:1}.separator-right::after{clear:both}.separator-right::after{position:relative !important;width:3rem;border-bottom:.125rem solid #2199e8;margin:1rem auto 0;margin-right:0 !important}.overflow-visible{overflow:visible !important}.overflow-x-visible{overflow-x:visible !important}.overflow-y-visible{overflow-y:visible !important}.overflow-hidden{overflow:hidden !important}.overflow-x-hidden{overflow-x:hidden !important}.overflow-y-hidden{overflow-y:hidden !important}.overflow-scroll{overflow:scroll !important;-webkit-overflow-scrolling:touch}.overflow-x-scroll{overflow-x:scroll !important;-webkit-overflow-scrolling:touch}.overflow-y-scroll{overflow-y:scroll !important;-webkit-overflow-scrolling:touch}.display-inline{display:inline !important}.display-inline-block{display:inline-block !important}.display-block{display:block !important}.display-table{display:table !important}.display-table-cell{display:table-cell !important}.position-static{position:static !important}.position-relative{position:relative !important}.position-absolute{position:absolute !important}.position-fixed{position:fixed !important}.position-fixed-top{position:fixed !important;top:0rem !important;right:0rem !important;left:0rem !important;z-index:975}.position-fixed-bottom{position:fixed !important;right:0rem !important;bottom:0rem !important;left:0rem !important;z-index:975}.border-box{box-sizing:border-box !important}.border-none{border:0 !important}.width-25{width:25% !important}.width-50{width:50% !important}.width-75{width:75% !important}.width-100{width:100% !important}.height-25{height:25% !important}.height-50{height:50% !important}.height-75{height:75% !important}.height-100{height:100% !important}.max-width-100{max-width:100% !important}.max-height-100{max-height:100% !important}.margin-0{margin:0rem !important}.margin-top-0{margin-top:0rem !important}.margin-right-0{margin-right:0rem !important}.margin-bottom-0{margin-bottom:0rem !important}.margin-left-0{margin-left:0rem !important}.margin-horizontal-0{margin-right:0rem !important;margin-left:0rem !important}.margin-vertical-0{margin-top:0rem !important;margin-bottom:0rem !important}.padding-0{padding:0rem !important}.padding-top-0{padding-top:0rem !important}.padding-right-0{padding-right:0rem !important}.padding-bottom-0{padding-bottom:0rem !important}.padding-left-0{padding-left:0rem !important}.padding-horizontal-0{padding-right:0rem !important;padding-left:0rem !important}.padding-vertical-0{padding-top:0rem !important;padding-bottom:0rem !important}.margin-1{margin:1rem !important}.margin-top-1{margin-top:1rem !important}.margin-right-1{margin-right:1rem !important}.margin-bottom-1{margin-bottom:1rem !important}.margin-left-1{margin-left:1rem !important}.margin-horizontal-1{margin-right:1rem !important;margin-left:1rem !important}.margin-vertical-1{margin-top:1rem !important;margin-bottom:1rem !important}.padding-1{padding:1rem !important}.padding-top-1{padding-top:1rem !important}.padding-right-1{padding-right:1rem !important}.padding-bottom-1{padding-bottom:1rem !important}.padding-left-1{padding-left:1rem !important}.padding-horizontal-1{padding-right:1rem !important;padding-left:1rem !important}.padding-vertical-1{padding-top:1rem !important;padding-bottom:1rem !important}.margin-2{margin:2rem !important}.margin-top-2{margin-top:2rem !important}.margin-right-2{margin-right:2rem !important}.margin-bottom-2{margin-bottom:2rem !important}.margin-left-2{margin-left:2rem !important}.margin-horizontal-2{margin-right:2rem !important;margin-left:2rem !important}.margin-vertical-2{margin-top:2rem !important;margin-bottom:2rem !important}.padding-2{padding:2rem !important}.padding-top-2{padding-top:2rem !important}.padding-right-2{padding-right:2rem !important}.padding-bottom-2{padding-bottom:2rem !important}.padding-left-2{padding-left:2rem !important}.padding-horizontal-2{padding-right:2rem !important;padding-left:2rem !important}.padding-vertical-2{padding-top:2rem !important;padding-bottom:2rem !important}.margin-3{margin:3rem !important}.margin-top-3{margin-top:3rem !important}.margin-right-3{margin-right:3rem !important}.margin-bottom-3{margin-bottom:3rem !important}.margin-left-3{margin-left:3rem !important}.margin-horizontal-3{margin-right:3rem !important;margin-left:3rem !important}.margin-vertical-3{margin-top:3rem !important;margin-bottom:3rem !important}.padding-3{padding:3rem !important}.padding-top-3{padding-top:3rem !important}.padding-right-3{padding-right:3rem !important}.padding-bottom-3{padding-bottom:3rem !important}.padding-left-3{padding-left:3rem !important}.padding-horizontal-3{padding-right:3rem !important;padding-left:3rem !important}.padding-vertical-3{padding-top:3rem !important;padding-bottom:3rem !important}.align-left{justify-content:flex-start}.align-right{justify-content:flex-end}.align-center{justify-content:center}.align-justify{justify-content:space-between}.align-spaced{justify-content:space-around}.align-left.vertical.menu>li>a{justify-content:flex-start}.align-right.vertical.menu>li>a{justify-content:flex-end}.align-center.vertical.menu>li>a{justify-content:center}.align-top{align-items:flex-start}.align-self-top{align-self:flex-start}.align-bottom{align-items:flex-end}.align-self-bottom{align-self:flex-end}.align-middle{align-items:center}.align-self-middle{align-self:center}.align-stretch{align-items:stretch}.align-self-stretch{align-self:stretch}.align-center-middle{justify-content:center;align-items:center;align-content:center}.small-order-1{order:1}.small-order-2{order:2}.small-order-3{order:3}.small-order-4{order:4}.small-order-5{order:5}.small-order-6{order:6}@media print,screen and (min-width: 90.25em){.medium-order-1{order:1}.medium-order-2{order:2}.medium-order-3{order:3}.medium-order-4{order:4}.medium-order-5{order:5}.medium-order-6{order:6}}@media print,screen and (min-width: 106.25em){.large-order-1{order:1}.large-order-2{order:2}.large-order-3{order:3}.large-order-4{order:4}.large-order-5{order:5}.large-order-6{order:6}}.flex-container{display:flex}.flex-child-auto{flex:1 1 auto}.flex-child-grow{flex:1 0 auto}.flex-child-shrink{flex:0 1 auto}.flex-dir-row{flex-direction:row}.flex-dir-row-reverse{flex-direction:row-reverse}.flex-dir-column{flex-direction:column}.flex-dir-column-reverse{flex-direction:column-reverse}@media print,screen and (min-width: 90.25em){.medium-flex-container{display:flex}.medium-flex-child-auto{flex:1 1 auto}.medium-flex-child-grow{flex:1 0 auto}.medium-flex-child-shrink{flex:0 1 auto}.medium-flex-dir-row{flex-direction:row}.medium-flex-dir-row-reverse{flex-direction:row-reverse}.medium-flex-dir-column{flex-direction:column}.medium-flex-dir-column-reverse{flex-direction:column-reverse}}@media print,screen and (min-width: 106.25em){.large-flex-container{display:flex}.large-flex-child-auto{flex:1 1 auto}.large-flex-child-grow{flex:1 0 auto}.large-flex-child-shrink{flex:0 1 auto}.large-flex-dir-row{flex-direction:row}.large-flex-dir-row-reverse{flex-direction:row-reverse}.large-flex-dir-column{flex-direction:column}.large-flex-dir-column-reverse{flex-direction:column-reverse}}.row{max-width:87.5rem;margin-right:auto;margin-left:auto;display:flex;flex-flow:row wrap}.row .row{margin-right:-.625rem;margin-left:-.625rem}@media print,screen and (min-width: 90.25em){.row .row{margin-right:-.9375rem;margin-left:-.9375rem}}@media print,screen and (min-width: 106.25em){.row .row{margin-right:-.9375rem;margin-left:-.9375rem}}.row .row.collapse{margin-right:0;margin-left:0}.row.expanded{max-width:none}.row.expanded .row{margin-right:auto;margin-left:auto}.row:not(.expanded) .row{max-width:none}.row.collapse>.column,.row.collapse>.columns{padding-right:0;padding-left:0}.row.is-collapse-child,.row.collapse>.column>.row,.row.collapse>.columns>.row{margin-right:0;margin-left:0}.column,.columns{flex:1 1 0px;padding-right:.625rem;padding-left:.625rem;min-width:0}@media print,screen and (min-width: 90.25em){.column,.columns{padding-right:.9375rem;padding-left:.9375rem}}.column.row.row,.row.row.columns{float:none;display:block}.row .column.row.row,.row .row.row.columns{margin-right:0;margin-left:0;padding-right:0;padding-left:0}.small-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.small-offset-0{margin-left:0%}.small-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.small-offset-1{margin-left:8.3333333333%}.small-3{flex:0 0 25%;max-width:25%}.small-offset-2{margin-left:16.6666666667%}.small-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.small-offset-3{margin-left:25%}.small-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.small-offset-4{margin-left:33.3333333333%}.small-6{flex:0 0 50%;max-width:50%}.small-offset-5{margin-left:41.6666666667%}.small-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.small-offset-6{margin-left:50%}.small-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.small-offset-7{margin-left:58.3333333333%}.small-9{flex:0 0 75%;max-width:75%}.small-offset-8{margin-left:66.6666666667%}.small-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.small-offset-9{margin-left:75%}.small-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.small-offset-10{margin-left:83.3333333333%}.small-12{flex:0 0 100%;max-width:100%}.small-offset-11{margin-left:91.6666666667%}.small-up-1{flex-wrap:wrap}.small-up-1>.column,.small-up-1>.columns{flex:0 0 100%;max-width:100%}.small-up-2{flex-wrap:wrap}.small-up-2>.column,.small-up-2>.columns{flex:0 0 50%;max-width:50%}.small-up-3{flex-wrap:wrap}.small-up-3>.column,.small-up-3>.columns{flex:0 0 33.3333333333%;max-width:33.3333333333%}.small-up-4{flex-wrap:wrap}.small-up-4>.column,.small-up-4>.columns{flex:0 0 25%;max-width:25%}.small-up-5{flex-wrap:wrap}.small-up-5>.column,.small-up-5>.columns{flex:0 0 20%;max-width:20%}.small-up-6{flex-wrap:wrap}.small-up-6>.column,.small-up-6>.columns{flex:0 0 16.6666666667%;max-width:16.6666666667%}.small-up-7{flex-wrap:wrap}.small-up-7>.column,.small-up-7>.columns{flex:0 0 14.2857142857%;max-width:14.2857142857%}.small-up-8{flex-wrap:wrap}.small-up-8>.column,.small-up-8>.columns{flex:0 0 12.5%;max-width:12.5%}.small-collapse>.column,.small-collapse>.columns{padding-right:0;padding-left:0}.small-uncollapse>.column,.small-uncollapse>.columns{padding-right:.625rem;padding-left:.625rem}@media print,screen and (min-width: 90.25em){.medium-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.medium-offset-0{margin-left:0%}.medium-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.medium-offset-1{margin-left:8.3333333333%}.medium-3{flex:0 0 25%;max-width:25%}.medium-offset-2{margin-left:16.6666666667%}.medium-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.medium-offset-3{margin-left:25%}.medium-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.medium-offset-4{margin-left:33.3333333333%}.medium-6{flex:0 0 50%;max-width:50%}.medium-offset-5{margin-left:41.6666666667%}.medium-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.medium-offset-6{margin-left:50%}.medium-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.medium-offset-7{margin-left:58.3333333333%}.medium-9{flex:0 0 75%;max-width:75%}.medium-offset-8{margin-left:66.6666666667%}.medium-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.medium-offset-9{margin-left:75%}.medium-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.medium-offset-10{margin-left:83.3333333333%}.medium-12{flex:0 0 100%;max-width:100%}.medium-offset-11{margin-left:91.6666666667%}.medium-up-1{flex-wrap:wrap}.medium-up-1>.column,.medium-up-1>.columns{flex:0 0 100%;max-width:100%}.medium-up-2{flex-wrap:wrap}.medium-up-2>.column,.medium-up-2>.columns{flex:0 0 50%;max-width:50%}.medium-up-3{flex-wrap:wrap}.medium-up-3>.column,.medium-up-3>.columns{flex:0 0 33.3333333333%;max-width:33.3333333333%}.medium-up-4{flex-wrap:wrap}.medium-up-4>.column,.medium-up-4>.columns{flex:0 0 25%;max-width:25%}.medium-up-5{flex-wrap:wrap}.medium-up-5>.column,.medium-up-5>.columns{flex:0 0 20%;max-width:20%}.medium-up-6{flex-wrap:wrap}.medium-up-6>.column,.medium-up-6>.columns{flex:0 0 16.6666666667%;max-width:16.6666666667%}.medium-up-7{flex-wrap:wrap}.medium-up-7>.column,.medium-up-7>.columns{flex:0 0 14.2857142857%;max-width:14.2857142857%}.medium-up-8{flex-wrap:wrap}.medium-up-8>.column,.medium-up-8>.columns{flex:0 0 12.5%;max-width:12.5%}}@media print,screen and (min-width: 90.25em)and (min-width: 90.25em){.medium-expand{flex:1 1 0px}}.row.medium-unstack>.column,.row.medium-unstack>.columns{flex:0 0 100%}@media print,screen and (min-width: 90.25em){.row.medium-unstack>.column,.row.medium-unstack>.columns{flex:1 1 0px}}@media print,screen and (min-width: 90.25em){.medium-collapse>.column,.medium-collapse>.columns{padding-right:0;padding-left:0}}@media print,screen and (min-width: 90.25em){.medium-uncollapse>.column,.medium-uncollapse>.columns{padding-right:.9375rem;padding-left:.9375rem}}@media print,screen and (min-width: 106.25em){.large-1{flex:0 0 8.3333333333%;max-width:8.3333333333%}.large-offset-0{margin-left:0%}.large-2{flex:0 0 16.6666666667%;max-width:16.6666666667%}.large-offset-1{margin-left:8.3333333333%}.large-3{flex:0 0 25%;max-width:25%}.large-offset-2{margin-left:16.6666666667%}.large-4{flex:0 0 33.3333333333%;max-width:33.3333333333%}.large-offset-3{margin-left:25%}.large-5{flex:0 0 41.6666666667%;max-width:41.6666666667%}.large-offset-4{margin-left:33.3333333333%}.large-6{flex:0 0 50%;max-width:50%}.large-offset-5{margin-left:41.6666666667%}.large-7{flex:0 0 58.3333333333%;max-width:58.3333333333%}.large-offset-6{margin-left:50%}.large-8{flex:0 0 66.6666666667%;max-width:66.6666666667%}.large-offset-7{margin-left:58.3333333333%}.large-9{flex:0 0 75%;max-width:75%}.large-offset-8{margin-left:66.6666666667%}.large-10{flex:0 0 83.3333333333%;max-width:83.3333333333%}.large-offset-9{margin-left:75%}.large-11{flex:0 0 91.6666666667%;max-width:91.6666666667%}.large-offset-10{margin-left:83.3333333333%}.large-12{flex:0 0 100%;max-width:100%}.large-offset-11{margin-left:91.6666666667%}.large-up-1{flex-wrap:wrap}.large-up-1>.column,.large-up-1>.columns{flex:0 0 100%;max-width:100%}.large-up-2{flex-wrap:wrap}.large-up-2>.column,.large-up-2>.columns{flex:0 0 50%;max-width:50%}.large-up-3{flex-wrap:wrap}.large-up-3>.column,.large-up-3>.columns{flex:0 0 33.3333333333%;max-width:33.3333333333%}.large-up-4{flex-wrap:wrap}.large-up-4>.column,.large-up-4>.columns{flex:0 0 25%;max-width:25%}.large-up-5{flex-wrap:wrap}.large-up-5>.column,.large-up-5>.columns{flex:0 0 20%;max-width:20%}.large-up-6{flex-wrap:wrap}.large-up-6>.column,.large-up-6>.columns{flex:0 0 16.6666666667%;max-width:16.6666666667%}.large-up-7{flex-wrap:wrap}.large-up-7>.column,.large-up-7>.columns{flex:0 0 14.2857142857%;max-width:14.2857142857%}.large-up-8{flex-wrap:wrap}.large-up-8>.column,.large-up-8>.columns{flex:0 0 12.5%;max-width:12.5%}}@media print,screen and (min-width: 106.25em)and (min-width: 106.25em){.large-expand{flex:1 1 0px}}.row.large-unstack>.column,.row.large-unstack>.columns{flex:0 0 100%}@media print,screen and (min-width: 106.25em){.row.large-unstack>.column,.row.large-unstack>.columns{flex:1 1 0px}}@media print,screen and (min-width: 106.25em){.large-collapse>.column,.large-collapse>.columns{padding-right:0;padding-left:0}}@media print,screen and (min-width: 106.25em){.large-uncollapse>.column,.large-uncollapse>.columns{padding-right:.9375rem;padding-left:.9375rem}}.shrink{flex:0 0 auto;max-width:100%}.column-block{margin-bottom:1.25rem}.column-block>:last-child{margin-bottom:0}@media print,screen and (min-width: 90.25em){.column-block{margin-bottom:1.875rem}.column-block>:last-child{margin-bottom:0}}.datepicker{display:none;position:absolute;padding:4px;margin-top:1px;direction:ltr}.datepicker.dropdown-menu{position:absolute;top:100%;left:0;z-index:1000;float:left;display:none;min-width:160px;list-style:none;background-color:#fff;border:1px solid rgba(0,0,0,.2);-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:0 5px 10px rgba(0,0,0,.2);-moz-box-shadow:0 5px 10px rgba(0,0,0,.2);box-shadow:0 5px 10px rgba(0,0,0,.2);-webkit-background-clip:padding-box;-moz-background-clip:padding;background-clip:padding-box;*border-right-width:2px;*border-bottom-width:2px;color:#333;font-size:13px;line-height:18px}.datepicker.dropdown-menu th{padding:4px 5px}.datepicker.dropdown-menu td{padding:4px 5px}.datepicker table{border:0;margin:0;width:auto}.datepicker table tr td span{display:block;width:23%;height:54px;line-height:54px;float:left;margin:1%;cursor:pointer}.datepicker td{text-align:center;width:20px;height:20px;border:0;font-size:12px;padding:4px 8px;background:#fff;cursor:pointer}.datepicker td.active.day,.datepicker td.active.year{background:#2ba6cb}.datepicker td.old,.datepicker td.new{color:#999}.datepicker td span.active{background:#2ba6cb}.datepicker td.day.disabled{color:#eee}.datepicker td span.month.disabled,.datepicker td span.year.disabled{color:#eee}.datepicker th{text-align:center;width:20px;height:20px;border:0;font-size:12px;padding:4px 8px;background:#fff;cursor:pointer}.datepicker th.active.day,.datepicker th.active.year{background:#2ba6cb}.datepicker th.date-switch{width:145px}.datepicker th span.active{background:#2ba6cb}.datepicker .cw{font-size:10px;width:12px;padding:0 2px 0 5px;vertical-align:middle}.datepicker.days div.datepicker-days{display:block}.datepicker.months div.datepicker-months{display:block}.datepicker.years div.datepicker-years{display:block}.datepicker thead tr:first-child th{cursor:pointer}.datepicker thead tr:first-child th.cw{cursor:default;background-color:transparent}.datepicker tfoot tr:first-child th{cursor:pointer}.datepicker-inline{width:220px}.datepicker-rtl{direction:rtl}.datepicker-rtl table tr td span{float:right}.datepicker-dropdown{top:0;left:0}.datepicker-dropdown:before{content:"";display:inline-block;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #ccc;border-bottom-color:1px solid rgba(0,0,0,.2);position:absolute;top:-7px;left:6px}.datepicker-dropdown:after{content:"";display:inline-block;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #fff;position:absolute;top:-6px;left:7px}.datepicker>div,.datepicker-dropdown::before,.datepicker-dropdown::after{display:none}.datepicker-close{position:absolute;top:-30px;right:0;width:15px;height:30px;padding:0;display:none}.table-striped .datepicker table tr td,.table-striped .datepicker table tr th{background-color:transparent}',""]);const S=_},8119:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(3645),r=n.n(i)()((function(t){return t[1]}));r.push([t.id,"[data-simplebar]{position:relative;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;align-items:flex-start}.simplebar-wrapper{overflow:hidden;width:inherit;height:inherit;max-width:inherit;max-height:inherit}.simplebar-mask{direction:inherit;position:absolute;overflow:hidden;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:auto!important;height:auto!important;z-index:0}.simplebar-offset{direction:inherit!important;box-sizing:inherit!important;resize:none!important;position:absolute;top:0;left:0;bottom:0;right:0;padding:0;margin:0;-webkit-overflow-scrolling:touch}.simplebar-content-wrapper{direction:inherit;box-sizing:border-box!important;position:relative;display:block;height:100%;width:auto;max-width:100%;max-height:100%;scrollbar-width:none;-ms-overflow-style:none}.simplebar-content-wrapper::-webkit-scrollbar,.simplebar-hide-scrollbar::-webkit-scrollbar{width:0;height:0}.simplebar-content:after,.simplebar-content:before{content:' ';display:table}.simplebar-placeholder{max-height:100%;max-width:100%;width:100%;pointer-events:none}.simplebar-height-auto-observer-wrapper{box-sizing:inherit!important;height:100%;width:100%;max-width:1px;position:relative;float:left;max-height:1px;overflow:hidden;z-index:-1;padding:0;margin:0;pointer-events:none;flex-grow:inherit;flex-shrink:0;flex-basis:0}.simplebar-height-auto-observer{box-sizing:inherit;display:block;opacity:0;position:absolute;top:0;left:0;height:1000%;width:1000%;min-height:1px;min-width:1px;overflow:hidden;pointer-events:none;z-index:-1}.simplebar-track{z-index:1;position:absolute;right:0;bottom:0;pointer-events:none;overflow:hidden}[data-simplebar].simplebar-dragging .simplebar-content{pointer-events:none;user-select:none;-webkit-user-select:none}[data-simplebar].simplebar-dragging .simplebar-track{pointer-events:all}.simplebar-scrollbar{position:absolute;left:0;right:0;min-height:10px}.simplebar-scrollbar:before{position:absolute;content:'';background:#000;border-radius:7px;left:2px;right:2px;opacity:0;transition:opacity .2s linear}.simplebar-scrollbar.simplebar-visible:before{opacity:.5;transition:opacity 0s linear}.simplebar-track.simplebar-vertical{top:0;width:11px}.simplebar-track.simplebar-vertical .simplebar-scrollbar:before{top:2px;bottom:2px}.simplebar-track.simplebar-horizontal{left:0;height:11px}.simplebar-track.simplebar-horizontal .simplebar-scrollbar:before{height:100%;left:2px;right:2px}.simplebar-track.simplebar-horizontal .simplebar-scrollbar{right:auto;left:0;top:2px;height:7px;min-height:0;min-width:10px;width:auto}[data-simplebar-direction=rtl] .simplebar-track.simplebar-vertical{right:auto;left:0}.hs-dummy-scrollbar-size{direction:rtl;position:fixed;opacity:0;visibility:hidden;height:500px;width:500px;overflow-y:hidden;overflow-x:scroll}.simplebar-hide-scrollbar{position:fixed;left:0;visibility:hidden;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}\n",""]);const o=r},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);i&&r[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},1667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},2650:(t,e,n)=>{"use strict";function i(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function r(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function o(){}n.d(e,{ZP:()=>x});var a=.7,s=1/a,l="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,d=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),p=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),f=new RegExp("^rgba\\("+[l,l,l,c]+"\\)$"),m=new RegExp("^rgba\\("+[u,u,u,c]+"\\)$"),g=new RegExp("^hsl\\("+[c,u,u]+"\\)$"),_=new RegExp("^hsla\\("+[c,u,u,c]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function x(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=h.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?w(e):3===n?new T(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?E(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?E(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=d.exec(t))?new T(e[1],e[2],e[3],1):(e=p.exec(t))?new T(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=f.exec(t))?E(e[1],e[2],e[3],e[4]):(e=m.exec(t))?E(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?I(e[1],e[2]/100,e[3]/100,1):(e=_.exec(t))?I(e[1],e[2]/100,e[3]/100,e[4]):y.hasOwnProperty(t)?w(y[t]):"transparent"===t?new T(NaN,NaN,NaN,0):null}function w(t){return new T(t>>16&255,t>>8&255,255&t,1)}function E(t,e,n,i){return i<=0&&(t=e=n=NaN),new T(t,e,n,i)}function M(t){return t instanceof o||(t=x(t)),t?new T((t=t.rgb()).r,t.g,t.b,t.opacity):new T}function T(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function S(){return"#"+C(this.r)+C(this.g)+C(this.b)}function k(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function C(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function I(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new D(t,e,n,i)}function L(t){if(t instanceof D)return new D(t.h,t.s,t.l,t.opacity);if(t instanceof o||(t=x(t)),!t)return new D;if(t instanceof D)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),s=NaN,l=a-r,c=(a+r)/2;return l?(s=e===a?(n-i)/l+6*(n<i):n===a?(i-e)/l+2:(e-n)/l+4,l/=c<.5?a+r:2-a-r,s*=60):l=c>0&&c<1?0:s,new D(s,l,c,t.opacity)}function D(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function A(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}i(o,x,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:function(){return L(this).formatHsl()},formatRgb:b,toString:b}),i(T,(function(t,e,n,i){return 1===arguments.length?M(t):new T(t,e,n,null==i?1:i)}),r(o,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new T(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:k,toString:k})),i(D,(function(t,e,n,i){return 1===arguments.length?L(t):new D(t,e,n,null==i?1:i)}),r(o,{brighter:function(t){return t=null==t?s:Math.pow(s,t),new D(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?a:Math.pow(a,t),new D(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new T(A(t>=240?t-240:t+120,r,i),A(t,r,i),A(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},4566:function(t,e){!function(t){"use strict";var e=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},n=function(t){return 1===t.length&&(n=t,t=function(t,i){return e(n(t),i)}),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}};var n};var i=n(e),r=i.right,o=i.left,a=function(t){return null===t?NaN:+t},s=function(t,e){var n,i,r=t.length,o=0,s=0,l=-1,c=0;if(null==e)for(;++l<r;)isNaN(n=a(t[l]))||(s+=(i=n-o)*(n-(o+=i/++c)));else for(;++l<r;)isNaN(n=a(e(t[l],l,t)))||(s+=(i=n-o)*(n-(o+=i/++c)));if(c>1)return s/(c-1)},l=function(t,e){var n=s(t,e);return n?Math.sqrt(n):n},c=function(t,e){var n,i,r,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(i=t[o])&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=t[o])&&(n>i&&(n=i),r<i&&(r=i))}else{for(;++o<a;)if(null!=(i=e(t[o],o,t))&&i>=i){n=r=i;break}for(;++o<a;)null!=(i=e(t[o],o,t))&&(n>i&&(n=i),r<i&&(r=i))}return[n,r]},u=Array.prototype,h=u.slice,d=u.map,p=function(t){return function(){return t}},f=function(t){return t},m=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o},g=Math.sqrt(50),_=Math.sqrt(10),y=Math.sqrt(2),v=function(t,e,n){var i=b(t,e,n);return m(Math.ceil(t/i)*i,Math.floor(e/i)*i+i/2,i)};function b(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=g?r*=10:o>=_?r*=5:o>=y&&(r*=2),e<t?-r:r}var x=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},w=function(t,e,n){if(null==n&&(n=a),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(r-o)}},E=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--a]=i[e];return n},M=function(t,e){var n,i,r=-1,o=t.length;if(null==e){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;++r<o;)if(null!=(i=e(t[r],r,t))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e(t[r],r,t))&&n>i&&(n=i)}return n},T=function(t){if(!(r=t.length))return[];for(var e=-1,n=M(t,S),i=new Array(n);++e<n;)for(var r,o=-1,a=i[e]=new Array(r);++o<r;)a[o]=t[o][e];return i};function S(t){return t.length}var k="$";function C(){}function I(t,e){var n=new C;if(t instanceof C)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var i,r=-1,o=t.length;if(null==e)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e(i=t[r],r,t),i)}else if(t)for(var a in t)n.set(a,t[a]);return n}C.prototype=I.prototype={constructor:C,has:function(t){return k+t in this},get:function(t){return this[k+t]},set:function(t,e){return this[k+t]=e,this},remove:function(t){var e=k+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===k&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===k&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===k&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===k&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===k&&++t;return t},empty:function(){for(var t in this)if(t[0]===k)return!1;return!0},each:function(t){for(var e in this)e[0]===k&&t(this[e],e.slice(1),this)}};function L(){return{}}function D(t,e,n){t[e]=n}function A(){return I()}function P(t,e,n){t.set(e,n)}function z(){}var N=I.prototype;function R(t,e){var n=new z;if(t instanceof z)t.each((function(t){n.add(t)}));else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}z.prototype=R.prototype={constructor:z,has:N.has,add:function(t){return this[k+(t+="")]=t,this},remove:N.remove,clear:N.clear,values:N.keys,size:N.size,empty:N.empty,each:N.each};var O=function(t,e){var n,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var r;if(null!=n)r=n,n=null;else do{n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r}while(!i||i>1);return t+e*r*Math.sqrt(-2*Math.log(i)/i)}},F=function(t){return function(){for(var e=0,n=0;n<t;++n)e+=Math.random();return e}};function B(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function U(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Y=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),j=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),V=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),G=Math.PI,q=G/2;function H(t){return(1-Math.cos(G*t))/2}function $(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Z(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var W=4/11,X=7.5625;function K(t){return(t=+t)<W?X*t*t:t<.7272727272727273?X*(t-=.5454545454545454)*t+.75:t<.9090909090909091?X*(t-=.8181818181818182)*t+.9375:X*(t-=.9545454545454546)*t+.984375}var J=1.70158,Q=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(J),tt=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(J),et=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(J),nt=2*Math.PI,it=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=nt);function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}return r.amplitude=function(e){return t(e,n*nt)},r.period=function(n){return t(e,n)},r}(1,.3),rt=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=nt);function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}return r.amplitude=function(e){return t(e,n*nt)},r.period=function(n){return t(e,n)},r}(1,.3),ot=function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=nt);function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}return r.amplitude=function(e){return t(e,n*nt)},r.period=function(n){return t(e,n)},r}(1,.3),at=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])};function st(t,e){return t[0]-e[0]||t[1]-e[1]}function lt(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;++r){for(;i>1&&at(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}var ct=Math.PI,ut=2*ct,ht=1e-6,dt=ut-ht;function pt(){this._x0=this._y0=this._x1=this._y1=null,this._=[]}function ft(){return new pt}pt.prototype=ft.prototype={constructor:pt,moveTo:function(t,e){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._.push("Z"))},lineTo:function(t,e){this._.push("L",this._x1=+t,",",this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._.push("Q",+t,",",+e,",",this._x1=+n,",",this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._.push("C",+t,",",+e,",",+n,",",+i,",",this._x1=+r,",",this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,s=n-t,l=i-e,c=o-t,u=a-e,h=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._.push("M",this._x1=t,",",this._y1=e);else if(h>ht)if(Math.abs(u*s-l*c)>ht&&r){var d=n-o,p=i-a,f=s*s+l*l,m=d*d+p*p,g=Math.sqrt(f),_=Math.sqrt(h),y=r*Math.tan((ct-Math.acos((f+h-m)/(2*g*_)))/2),v=y/_,b=y/g;Math.abs(v-1)>ht&&this._.push("L",t+v*c,",",e+v*u),this._.push("A",r,",",r,",0,0,",+(u*d>c*p),",",this._x1=t+b*s,",",this._y1=e+b*l)}else this._.push("L",this._x1=t,",",this._y1=e)},arc:function(t,e,n,i,r,o){t=+t,e=+e;var a=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+a,c=e+s,u=1^o,h=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._.push("M",l,",",c):(Math.abs(this._x1-l)>ht||Math.abs(this._y1-c)>ht)&&this._.push("L",l,",",c),n&&(h>dt?this._.push("A",n,",",n,",0,1,",u,",",t-a,",",e-s,"A",n,",",n,",0,1,",u,",",this._x1=l,",",this._y1=c):(h<0&&(h=h%ut+ut),this._.push("A",n,",",n,",0,",+(h>=ct),",",u,",",this._x1=t+n*Math.cos(r),",",this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._.push("M",this._x0=this._x1=+t,",",this._y0=this._y1=+e,"h",+n,"v",+i,"h",-n,"Z")},toString:function(){return this._.join("")}};function mt(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,a,s,l,c,u,h,d,p=t._root,f={data:i},m=t._x0,g=t._y0,_=t._x1,y=t._y1;if(!p)return t._root=f,t;for(;p.length;)if((c=e>=(o=(m+_)/2))?m=o:_=o,(u=n>=(a=(g+y)/2))?g=a:y=a,r=p,!(p=p[h=u<<1|c]))return r[h]=f,t;if(s=+t._x.call(null,p.data),l=+t._y.call(null,p.data),e===s&&n===l)return f.next=p,r?r[h]=f:t._root=f,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(m+_)/2))?m=o:_=o,(u=n>=(a=(g+y)/2))?g=a:y=a}while((h=u<<1|c)==(d=(l>=a)<<1|s>=o));return r[d]=p,r[h]=f,t}var gt=function(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r};function _t(t){return t[0]}function yt(t){return t[1]}function vt(t,e,n){var i=new bt(null==e?_t:e,null==n?yt:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function bt(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function xt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var wt=vt.prototype=bt.prototype;wt.copy=function(){var t,e,n=new bt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=xt(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=xt(e));return n},wt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return mt(this.cover(e,n),e,n,t)},wt.addAll=function(t){var e,n,i,r,o=t.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(a[n]=i,s[n]=r,i<l&&(l=i),i>u&&(u=i),r<c&&(c=r),r>h&&(h=r));for(u<l&&(l=this._x0,u=this._x1),h<c&&(c=this._y0,h=this._y1),this.cover(l,c).cover(u,h),n=0;n<o;++n)mt(this,a[n],s[n],t[n]);return this},wt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{if(!(n>t||t>r||i>e||e>o))return this;var a,s,l=r-n,c=this._root;switch(s=(e<(i+o)/2)<<1|t<(n+r)/2){case 0:do{(a=new Array(4))[s]=c,c=a}while(o=i+(l*=2),t>(r=n+l)||e>o);break;case 1:do{(a=new Array(4))[s]=c,c=a}while(o=i+(l*=2),(n=r-l)>t||e>o);break;case 2:do{(a=new Array(4))[s]=c,c=a}while(i=o-(l*=2),t>(r=n+l)||i>e);break;case 3:do{(a=new Array(4))[s]=c,c=a}while(i=o-(l*=2),(n=r-l)>t||i>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},wt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},wt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},wt.find=function(t,e,n){var i,r,o,a,s,l,c,u=this._x0,h=this._y0,d=this._x1,p=this._y1,f=[],m=this._root;for(m&&f.push(new gt(m,u,h,d,p)),null==n?n=1/0:(u=t-n,h=e-n,d=t+n,p=e+n,n*=n);l=f.pop();)if(!(!(m=l.node)||(r=l.x0)>d||(o=l.y0)>p||(a=l.x1)<u||(s=l.y1)<h))if(m.length){var g=(r+a)/2,_=(o+s)/2;f.push(new gt(m[3],g,_,a,s),new gt(m[2],r,_,g,s),new gt(m[1],g,o,a,_),new gt(m[0],r,o,g,_)),(c=(e>=_)<<1|t>=g)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var y=t-+this._x.call(null,m.data),v=e-+this._y.call(null,m.data),b=y*y+v*v;if(b<n){var x=Math.sqrt(n=b);u=t-x,h=e-x,d=t+x,p=e+x,i=m.data}}return i},wt.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,r,o,a,s,l,c,u,h,d,p=this._root,f=this._x0,m=this._y0,g=this._x1,_=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(s=(f+g)/2))?f=s:g=s,(u=a>=(l=(m+_)/2))?m=l:_=l,e=p,!(p=p[h=u<<1|c]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;p.data!==t;)if(i=p,!(p=p.next))return this;return(r=p.next)&&delete p.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[d]=p:this._root=p),this):(this._root=r,this)},wt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},wt.root=function(){return this._root},wt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},wt.visit=function(t){var e,n,i,r,o,a,s=[],l=this._root;for(l&&s.push(new gt(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,a=e.y1)&&l.length){var c=(i+o)/2,u=(r+a)/2;(n=l[3])&&s.push(new gt(n,c,u,o,a)),(n=l[2])&&s.push(new gt(n,i,u,c,a)),(n=l[1])&&s.push(new gt(n,c,r,o,u)),(n=l[0])&&s.push(new gt(n,i,r,c,u))}return this},wt.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new gt(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,h=(s+c)/2;(o=r[0])&&n.push(new gt(o,a,s,u,h)),(o=r[1])&&n.push(new gt(o,u,s,l,h)),(o=r[2])&&n.push(new gt(o,a,h,u,c)),(o=r[3])&&n.push(new gt(o,u,h,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},wt.x=function(t){return arguments.length?(this._x=t,this):this._x},wt.y=function(t){return arguments.length?(this._y=t,this):this._y};var Et=[].slice,Mt={};function Tt(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function St(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,r=n[i];n[i]=kt(t,e),--t._waiting,++t._active,n=r.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||Mt)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])Ct(t,e);else if(!t._data)throw e}}function kt(t,e){return function(n,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?Ct(t,n):(t._data[e]=i,t._waiting?St(t):It(t))))}}function Ct(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,It(t)}function It(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function Lt(t){return new Tt(arguments.length?+t:1/0)}Tt.prototype=Lt.prototype={constructor:Tt,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var e=Et.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),St(this),this},abort:function(){return null==this._error&&Ct(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},It(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,It(this),this}};var Dt=function(t){return function(){return t}},At=1e-12,Pt=Math.PI,zt=Pt/2,Nt=2*Pt;function Rt(t){return t.innerRadius}function Ot(t){return t.outerRadius}function Ft(t){return t.startAngle}function Bt(t){return t.endAngle}function Ut(t){return t&&t.padAngle}function Yt(t){return t>=1?zt:t<=-1?-zt:Math.asin(t)}function jt(t,e,n,i,r,o,a,s){var l=n-t,c=i-e,u=a-r,h=s-o,d=(u*(e-o)-h*(t-r))/(h*l-u*c);return[t+d*l,e+d*c]}function Vt(t,e,n,i,r,o,a){var s=t-n,l=e-i,c=(a?o:-o)/Math.sqrt(s*s+l*l),u=c*l,h=-c*s,d=t+u,p=e+h,f=n+u,m=i+h,g=(d+f)/2,_=(p+m)/2,y=f-d,v=m-p,b=y*y+v*v,x=r-o,w=d*m-f*p,E=(v<0?-1:1)*Math.sqrt(Math.max(0,x*x*b-w*w)),M=(w*v-y*E)/b,T=(-w*y-v*E)/b,S=(w*v+y*E)/b,k=(-w*y+v*E)/b,C=M-g,I=T-_,L=S-g,D=k-_;return C*C+I*I>L*L+D*D&&(M=S,T=k),{cx:M,cy:T,x01:-u,y01:-h,x11:M*(r/x-1),y11:T*(r/x-1)}}function Gt(t){this._context=t}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var qt=function(t){return new Gt(t)};function Ht(t){return t[0]}function $t(t){return t[1]}var Zt=function(){var t=Ht,e=$t,n=Dt(!0),i=null,r=qt,o=null;function a(a){var s,l,c,u=a.length,h=!1;for(null==i&&(o=r(c=ft())),s=0;s<=u;++s)!(s<u&&n(l=a[s],s,a))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(l,s,a),+e(l,s,a));if(c)return o=null,c+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:Dt(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:Dt(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:Dt(!!t),a):n},a.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),a):r},a.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),a):i},a},Wt=function(){var t=Ht,e=null,n=Dt(0),i=$t,r=Dt(!0),o=null,a=qt,s=null;function l(l){var c,u,h,d,p,f=l.length,m=!1,g=new Array(f),_=new Array(f);for(null==o&&(s=a(p=ft())),c=0;c<=f;++c){if(!(c<f&&r(d=l[c],c,l))===m)if(m=!m)u=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=c-1;h>=u;--h)s.point(g[h],_[h]);s.lineEnd(),s.areaEnd()}m&&(g[c]=+t(d,c,l),_[c]=+n(d,c,l),s.point(e?+e(d,c,l):g[c],i?+i(d,c,l):_[c]))}if(p)return s=null,p+""||null}function c(){return Zt().defined(r).curve(a).context(o)}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:Dt(+n),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:Dt(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:Dt(+t),l):e},l.y=function(t){return arguments.length?(n="function"==typeof t?t:Dt(+t),i=null,l):n},l.y0=function(t){return arguments.length?(n="function"==typeof t?t:Dt(+t),l):n},l.y1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Dt(+t),l):i},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(i)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:Dt(!!t),l):r},l.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),l):a},l.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),l):o},l},Xt=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Kt=function(t){return t},Jt=te(qt);function Qt(t){this._curve=t}function te(t){function e(e){return new Qt(t(e))}return e._curve=t,e}function ee(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(te(t)):e()._curve},t}Qt.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var ne={draw:function(t,e){var n=Math.sqrt(e/Pt);t.moveTo(n,0),t.arc(0,0,n,0,Nt)}},ie={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},re=Math.sqrt(1/3),oe=2*re,ae={draw:function(t,e){var n=Math.sqrt(e/oe),i=n*re;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},se=Math.sin(Pt/10)/Math.sin(7*Pt/10),le=Math.sin(Nt/10)*se,ce=-Math.cos(Nt/10)*se,ue={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=le*n,r=ce*n;t.moveTo(0,-n),t.lineTo(i,r);for(var o=1;o<5;++o){var a=Nt*o/5,s=Math.cos(a),l=Math.sin(a);t.lineTo(l*n,-s*n),t.lineTo(s*i-l*r,l*i+s*r)}t.closePath()}},he={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},de=Math.sqrt(3),pe={draw:function(t,e){var n=-Math.sqrt(e/(3*de));t.moveTo(0,2*n),t.lineTo(-de*n,-n),t.lineTo(de*n,-n),t.closePath()}},fe=-.5,me=Math.sqrt(3)/2,ge=1/Math.sqrt(12),_e=3*(ge/2+1),ye={draw:function(t,e){var n=Math.sqrt(e/_e),i=n/2,r=n*ge,o=i,a=n*ge+n,s=-o,l=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(fe*i-me*r,me*i+fe*r),t.lineTo(fe*o-me*a,me*o+fe*a),t.lineTo(fe*s-me*l,me*s+fe*l),t.lineTo(fe*i+me*r,fe*r-me*i),t.lineTo(fe*o+me*a,fe*a-me*o),t.lineTo(fe*s+me*l,fe*l-me*s),t.closePath()}},ve=[ne,ie,ae,he,ue,pe,ye],be=function(){};function xe(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function we(t){this._context=t}we.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xe(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ee(t){this._context=t}Ee.prototype={areaStart:be,areaEnd:be,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xe(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Me(t){this._context=t}Me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:xe(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Te(t,e){this._basis=new we(t),this._beta=e}Te.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],a=t[n]-r,s=e[n]-o,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+i*a),this._beta*e[l]+(1-this._beta)*(o+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Se=function t(e){function n(t){return 1===e?new we(t):new Te(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function ke(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ce(t,e){this._context=t,this._k=(1-e)/6}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ke(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ke(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ie=function t(e){function n(t){return new Ce(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Le(t,e){this._context=t,this._k=(1-e)/6}Le.prototype={areaStart:be,areaEnd:be,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ke(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var De=function t(e){function n(t){return new Le(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ae(t,e){this._context=t,this._k=(1-e)/6}Ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ke(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Pe=function t(e){function n(t){return new Ae(t,e)}return n.tension=function(e){return t(+e)},n}(0);function ze(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>At){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>At){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function Ne(t,e){this._context=t,this._alpha=e}Ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ze(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Re=function t(e){function n(t){return e?new Ne(t,e):new Ce(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Oe(t,e){this._context=t,this._alpha=e}Oe.prototype={areaStart:be,areaEnd:be,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ze(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Fe=function t(e){function n(t){return e?new Oe(t,e):new Le(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Be(t,e){this._context=t,this._alpha=e}Be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ze(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ue=function t(e){function n(t){return e?new Be(t,e):new Ae(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ye(t){this._context=t}Ye.prototype={areaStart:be,areaEnd:be,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function je(t){return t<0?-1:1}function Ve(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(je(o)+je(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Ge(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qe(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,s=(o-i)/3;t._context.bezierCurveTo(i+s,r+s*e,o-s,a-s*n,o,a)}function He(t){this._context=t}function $e(t){this._context=new Ze(t)}function Ze(t){this._context=t}function We(t){this._context=t}function Xe(t){var e,n,i=t.length-1,r=new Array(i),o=new Array(i),a=new Array(i);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,a[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(r[i-1]=a[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qe(this,this._t0,Ge(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qe(this,Ge(this,n=Ve(this,t,e)),n);break;default:qe(this,this._t0,n=Ve(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},($e.prototype=Object.create(He.prototype)).point=function(t,e){He.prototype.point.call(this,e,t)},Ze.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}},We.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Xe(t),r=Xe(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Ke(t,e){this._context=t,this._t=e}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Je=Array.prototype.slice,Qe=function(t,e){if((i=t.length)>1)for(var n,i,r=1,o=t[e[0]],a=o.length;r<i;++r){n=o,o=t[e[r]];for(var s=0;s<a;++s)o[s][1]+=o[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}},tn=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n};function en(t,e){return t[e]}var nn=function(t){var e=t.map(rn);return tn(t).sort((function(t,n){return e[t]-e[n]}))};function rn(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}var on=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function an(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function sn(){}var ln=.7,cn=1/ln,un=/^#([0-9a-f]{3})$/,hn=/^#([0-9a-f]{6})$/,dn=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,pn=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,fn=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,mn=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,gn=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,_n=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,yn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vn(t){var e;return t=(t+"").trim().toLowerCase(),(e=un.exec(t))?new Mn((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=hn.exec(t))?bn(parseInt(e[1],16)):(e=dn.exec(t))?new Mn(e[1],e[2],e[3],1):(e=pn.exec(t))?new Mn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=fn.exec(t))?xn(e[1],e[2],e[3],e[4]):(e=mn.exec(t))?xn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=gn.exec(t))?Tn(e[1],e[2]/100,e[3]/100,1):(e=_n.exec(t))?Tn(e[1],e[2]/100,e[3]/100,e[4]):yn.hasOwnProperty(t)?bn(yn[t]):"transparent"===t?new Mn(NaN,NaN,NaN,0):null}function bn(t){return new Mn(t>>16&255,t>>8&255,255&t,1)}function xn(t,e,n,i){return i<=0&&(t=e=n=NaN),new Mn(t,e,n,i)}function wn(t){return t instanceof sn||(t=vn(t)),t?new Mn((t=t.rgb()).r,t.g,t.b,t.opacity):new Mn}function En(t,e,n,i){return 1===arguments.length?wn(t):new Mn(t,e,n,null==i?1:i)}function Mn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Tn(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Cn(t,e,n,i)}function Sn(t){if(t instanceof Cn)return new Cn(t.h,t.s,t.l,t.opacity);if(t instanceof sn||(t=vn(t)),!t)return new Cn;if(t instanceof Cn)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Cn(a,s,l,t.opacity)}function kn(t,e,n,i){return 1===arguments.length?Sn(t):new Cn(t,e,n,null==i?1:i)}function Cn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function In(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}on(sn,vn,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),on(Mn,En,an(sn,{brighter:function(t){return t=null==t?cn:Math.pow(cn,t),new Mn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?ln:Math.pow(ln,t),new Mn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),on(Cn,kn,an(sn,{brighter:function(t){return t=null==t?cn:Math.pow(cn,t),new Cn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ln:Math.pow(ln,t),new Cn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Mn(In(t>=240?t-240:t+120,r,i),In(t,r,i),In(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Ln=Math.PI/180,Dn=180/Math.PI,An=.95047,Pn=1.08883,zn=4/29,Nn=6/29,Rn=3*Nn*Nn;function On(t){if(t instanceof Bn)return new Bn(t.l,t.a,t.b,t.opacity);if(t instanceof Hn){var e=t.h*Ln;return new Bn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof Mn||(t=wn(t));var n=Vn(t.r),i=Vn(t.g),r=Vn(t.b),o=Un((.4124564*n+.3575761*i+.1804375*r)/An),a=Un((.2126729*n+.7151522*i+.072175*r)/1);return new Bn(116*a-16,500*(o-a),200*(a-Un((.0193339*n+.119192*i+.9503041*r)/Pn)),t.opacity)}function Fn(t,e,n,i){return 1===arguments.length?On(t):new Bn(t,e,n,null==i?1:i)}function Bn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Un(t){return t>.008856451679035631?Math.pow(t,1/3):t/Rn+zn}function Yn(t){return t>Nn?t*t*t:Rn*(t-zn)}function jn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Gn(t){if(t instanceof Hn)return new Hn(t.h,t.c,t.l,t.opacity);t instanceof Bn||(t=On(t));var e=Math.atan2(t.b,t.a)*Dn;return new Hn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function qn(t,e,n,i){return 1===arguments.length?Gn(t):new Hn(t,e,n,null==i?1:i)}function Hn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}on(Bn,Fn,an(sn,{brighter:function(t){return new Bn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Bn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=1*Yn(t),new Mn(jn(3.2404542*(e=An*Yn(e))-1.5371385*t-.4985314*(n=Pn*Yn(n))),jn(-.969266*e+1.8760108*t+.041556*n),jn(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),on(Hn,qn,an(sn,{brighter:function(t){return new Hn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Hn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return On(this).rgb()}}));var $n=-.14861,Zn=1.78277,Wn=-.29227,Xn=-.90649,Kn=1.97294,Jn=Kn*Xn,Qn=Kn*Zn,ti=Zn*Wn-Xn*$n;function ei(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);t instanceof Mn||(t=wn(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(ti*i+Jn*e-Qn*n)/(ti+Jn-Qn),o=i-r,a=(Kn*(n-r)-Wn*o)/Xn,s=Math.sqrt(a*a+o*o)/(Kn*r*(1-r)),l=s?Math.atan2(a,o)*Dn-120:NaN;return new ii(l<0?l+360:l,s,r,t.opacity)}function ni(t,e,n,i){return 1===arguments.length?ei(t):new ii(t,e,n,null==i?1:i)}function ii(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ri(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}on(ii,ni,an(sn,{brighter:function(t){return t=null==t?cn:Math.pow(cn,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ln:Math.pow(ln,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ln,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Mn(255*(e+n*($n*i+Zn*r)),255*(e+n*(Wn*i+Xn*r)),255*(e+n*(Kn*i)),this.opacity)}}));var oi=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,s=i<e-1?t[i+2]:2*o-r;return ri((n-i/e)*e,a,r,o,s)}},ai=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],a=t[(i+1)%e],s=t[(i+2)%e];return ri((n-i/e)*e,r,o,a,s)}},si=function(t){return function(){return t}};function li(t,e){return function(n){return t+n*e}}function ci(t,e){var n=e-t;return n?li(t,n>180||n<-180?n-360*Math.round(n/360):n):si(isNaN(t)?e:t)}function ui(t){return 1==(t=+t)?hi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):si(isNaN(e)?n:e)}}function hi(t,e){var n=e-t;return n?li(t,n):si(isNaN(t)?e:t)}var di=function t(e){var n=ui(e);function i(t,e){var i=n((t=En(t)).r,(e=En(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),a=n(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function pi(t){return function(e){var n,i,r=e.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=En(e[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=t(o),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=o(t),i.g=a(t),i.b=s(t),i+""}}}var fi=pi(oi),mi=pi(ai),gi=function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(i),a=new Array(i);for(n=0;n<r;++n)o[n]=ki(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}},_i=function(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}},yi=function(t,e){return e-=t=+t,function(n){return t+e*n}},vi=function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=ki(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},bi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xi=new RegExp(bi.source,"g");var wi,Ei,Mi,Ti,Si=function(t,e){var n,i,r,o=bi.lastIndex=xi.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=bi.exec(t))&&(i=xi.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:yi(n,i)})),o=xi.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)s[(n=l[i]).i]=n.x(t);return s.join("")})},ki=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?si(e):("number"===i?yi:"string"===i?(n=vn(e))?(e=n,di):Si:e instanceof vn?di:e instanceof Date?_i:Array.isArray(e)?gi:isNaN(e)?vi:yi)(t,e)},Ci=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},Ii=180/Math.PI,Li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Di=function(t,e,n,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Ii,skewX:Math.atan(l)*Ii,scaleX:a,scaleY:s}};function Ai(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,i,r,o,a,s){if(t!==r||i!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:yi(t,r)},{i:l-2,x:yi(i,o)})}else(r||o)&&a.push("translate("+r+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:yi(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:yi(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,a.skewX,s,l),function(t,e,n,i,o,a){if(t!==n||e!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:yi(t,n)},{i:s-2,x:yi(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,i=l.length;++n<i;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Pi=Ai((function(t){return"none"===t?Li:(wi||(wi=document.createElement("DIV"),Ei=document.documentElement,Mi=document.defaultView),wi.style.transform=t,t=Mi.getComputedStyle(Ei.appendChild(wi),null).getPropertyValue("transform"),Ei.removeChild(wi),t=t.slice(7,-1).split(","),Di(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),zi=Ai((function(t){return null==t?Li:(Ti||(Ti=document.createElementNS("http://www.w3.org/2000/svg","g")),Ti.setAttribute("transform",t),(t=Ti.transform.baseVal.consolidate())?(t=t.matrix,Di(t.a,t.b,t.c,t.d,t.e,t.f)):Li)}),", ",")",")"),Ni=Math.SQRT2;function Ri(t){return((t=Math.exp(t))+1/t)/2}var Oi=function(t,e){var n,i,r=t[0],o=t[1],a=t[2],s=e[0],l=e[1],c=e[2],u=s-r,h=l-o,d=u*u+h*h;if(d<1e-12)i=Math.log(c/a)/Ni,n=function(t){return[r+t*u,o+t*h,a*Math.exp(Ni*t*i)]};else{var p=Math.sqrt(d),f=(c*c-a*a+4*d)/(2*a*2*p),m=(c*c-a*a-4*d)/(2*c*2*p),g=Math.log(Math.sqrt(f*f+1)-f),_=Math.log(Math.sqrt(m*m+1)-m);i=(_-g)/Ni,n=function(t){var e=t*i,n=Ri(g),s=a/(2*p)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Ni*e+g)-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[r+s*u,o+s*h,a*n/Ri(Ni*e+g)]}}return n.duration=1e3*i,n};function Fi(t){return function(e,n){var i=t((e=kn(e)).h,(n=kn(n)).h),r=hi(e.s,n.s),o=hi(e.l,n.l),a=hi(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=o(t),e.opacity=a(t),e+""}}}var Bi=Fi(ci),Ui=Fi(hi);function Yi(t){return function(e,n){var i=t((e=qn(e)).h,(n=qn(n)).h),r=hi(e.c,n.c),o=hi(e.l,n.l),a=hi(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=o(t),e.opacity=a(t),e+""}}}var ji=Yi(ci),Vi=Yi(hi);function Gi(t){return function e(n){function i(e,i){var r=t((e=ni(e)).h,(i=ni(i)).h),o=hi(e.s,i.s),a=hi(e.l,i.l),s=hi(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}var qi=Gi(ci),Hi=Gi(hi),$i={value:function(){}};function Zi(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new Wi(i)}function Wi(t){this._=t}function Xi(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Ki(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function Ji(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=$i,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}function Qi(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}")}Wi.prototype=Zi.prototype={constructor:Wi,on:function(t,e){var n,i=this._,r=Xi(t+"",i),o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=Ji(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Ji(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=r[o]).type)&&(n=Ki(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Wi(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var tr=function(t){var e=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function i(t,e){var i,r,o={},a={},s=[],l=t.length,c=0,u=0;function h(){if(c>=l)return a;if(r)return r=!1,o;var e,i=c;if(34===t.charCodeAt(i)){for(var s=i;s++<l;)if(34===t.charCodeAt(s)){if(34!==t.charCodeAt(s+1))break;++s}return c=s+2,13===(e=t.charCodeAt(s+1))?(r=!0,10===t.charCodeAt(s+2)&&++c):10===e&&(r=!0),t.slice(i+1,s).replace(/""/g,'"')}for(;c<l;){var u=1;if(10===(e=t.charCodeAt(c++)))r=!0;else if(13===e)r=!0,10===t.charCodeAt(c)&&(++c,++u);else if(e!==n)continue;return t.slice(i,c-u)}return t.slice(i)}for(;(i=h())!==a;){for(var d=[];i!==o&&i!==a;)d.push(i),i=h();e&&null==(d=e(d,u++))||s.push(d)}return s}function r(e){return e.map(o).join(t)}function o(t){return null==t?"":e.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}return{parse:function(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=Qi(t);return function(i,r){return e(n(i),r,t)}}(t,e):Qi(t)}));return o.columns=r,o},parseRows:i,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}(e)),[n.map(o).join(t)].concat(e.map((function(e){return n.map((function(t){return o(e[t])})).join(t)}))).join("\n")},formatRows:function(t){return t.map(r).join("\n")}}},er=tr(","),nr=er.parse,ir=er.parseRows,rr=er.format,or=er.formatRows,ar=tr("\t"),sr=ar.parse,lr=ar.parseRows,cr=ar.format,ur=ar.formatRows,hr=function(t,e){var n,i,r,o,a=Zi("beforesend","progress","load","error"),s=I(),l=new XMLHttpRequest,c=null,u=null,h=0;function d(t){var e,i=l.status;if(!i&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||i>=200&&i<300||304===i){if(r)try{e=r.call(n,l)}catch(t){return void a.call("error",n,t)}else e=l;a.call("load",n,e)}else a.call("error",n,t)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=d:l.onreadystatechange=function(t){l.readyState>3&&d(t)},l.onprogress=function(t){a.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),n)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",n):i},responseType:function(t){return arguments.length?(o=t,n):o},timeout:function(t){return arguments.length?(h=+t,n):h},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",n)},password:function(t){return arguments.length<1?u:(u=null==t?null:t+"",n)},response:function(t){return r=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,r,d){return l.open(e,t,!0,c,u),null==i||s.has("accept")||s.set("accept",i+",*/*"),l.setRequestHeader&&s.each((function(t,e){l.setRequestHeader(e,t)})),null!=i&&l.overrideMimeType&&l.overrideMimeType(i),null!=o&&(l.responseType=o),h>0&&(l.timeout=h),null==d&&"function"==typeof r&&(d=r,r=null),null!=d&&1===d.length&&(d=function(t){return function(e,n){t(null==e?n:null)}}(d)),null!=d&&n.on("error",d).on("load",(function(t){d(null,t)})),a.call("beforesend",n,l),l.send(null==r?null:r),n},abort:function(){return l.abort(),n},on:function(){var t=a.on.apply(a,arguments);return t===a?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n};var dr=function(t,e){return function(n,i){var r=hr(n).mimeType(t).response(e);if(null!=i){if("function"!=typeof i)throw new Error("invalid callback: "+i);return r.get(i)}return r}},pr=dr("text/html",(function(t){return document.createRange().createContextualFragment(t.responseText)})),fr=dr("application/json",(function(t){return JSON.parse(t.responseText)})),mr=dr("text/plain",(function(t){return t.responseText})),gr=dr("application/xml",(function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e})),_r=function(t,e){return function(n,i,r){arguments.length<3&&(r=i,i=null);var o=hr(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(yr(e,i=t)):i},o.row(i),r?o.get(r):o}};function yr(t,e){return function(n){return t(n.responseText,e)}}var vr,br,xr=_r("text/csv",nr),wr=_r("text/tab-separated-values",sr),Er=0,Mr=0,Tr=0,Sr=0,kr=0,Cr=0,Ir="object"==typeof performance&&performance.now?performance:Date,Lr="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};function Dr(){return kr||(Lr(Ar),kr=Ir.now()+Cr)}function Ar(){kr=0}function Pr(){this._call=this._time=this._next=null}function zr(t,e,n){var i=new Pr;return i.restart(t,e,n),i}function Nr(){Dr(),++Er;for(var t,e=vr;e;)(t=kr-e._time)>=0&&e._call.call(null,t),e=e._next;--Er}function Rr(){kr=(Sr=Ir.now())+Cr,Er=Mr=0;try{Nr()}finally{Er=0,function(){for(var t,e,n=vr,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:vr=e);br=t,Fr(i)}(),kr=0}}function Or(){var t=Ir.now(),e=t-Sr;e>1e3&&(Cr-=e,Sr=t)}function Fr(t){if(!Er){Mr&&(Mr=clearTimeout(Mr));var e=t-kr;e>24?(t<1/0&&(Mr=setTimeout(Rr,e)),Tr&&(Tr=clearInterval(Tr))):(Tr||(Tr=setInterval(Or,1e3)),Er=1,Lr(Rr))}}Pr.prototype=zr.prototype={constructor:Pr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Dr():+n)+(null==e?0:+e),this._next||br===this||(br?br._next=this:vr=this,br=this),this._call=t,this._time=n,Fr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fr())}};var Br=function(t,e,n){var i=new Pr;return e=null==e?0:+e,i.restart((function(n){i.stop(),t(n+e)}),e,n),i},Ur=new Date,Yr=new Date;function jr(t,e,n,i){function r(e){return t(e=new Date(+e)),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var a=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return a;do{a.push(new Date(+n))}while(e(n,o),t(n),n<i);return a},r.filter=function(n){return jr((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,i){if(t>=t)for(;--i>=0;)for(;e(t,1),!n(t););}))},n&&(r.count=function(e,i){return Ur.setTime(+e),Yr.setTime(+i),t(Ur),t(Yr),Math.floor(n(Ur,Yr))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var Vr=jr((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));Vr.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?jr((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Vr:null};var Gr=Vr.range,qr=1e3,Hr=6e4,$r=36e5,Zr=864e5,Wr=6048e5,Xr=jr((function(t){t.setTime(Math.floor(t/qr)*qr)}),(function(t,e){t.setTime(+t+e*qr)}),(function(t,e){return(e-t)/qr}),(function(t){return t.getUTCSeconds()})),Kr=Xr.range,Jr=jr((function(t){t.setTime(Math.floor(t/Hr)*Hr)}),(function(t,e){t.setTime(+t+e*Hr)}),(function(t,e){return(e-t)/Hr}),(function(t){return t.getMinutes()})),Qr=Jr.range,to=jr((function(t){var e=t.getTimezoneOffset()*Hr%$r;e<0&&(e+=$r),t.setTime(Math.floor((+t-e)/$r)*$r+e)}),(function(t,e){t.setTime(+t+e*$r)}),(function(t,e){return(e-t)/$r}),(function(t){return t.getHours()})),eo=to.range,no=jr((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Hr)/Zr}),(function(t){return t.getDate()-1})),io=no.range;function ro(t){return jr((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Hr)/Wr}))}var oo=ro(0),ao=ro(1),so=ro(2),lo=ro(3),co=ro(4),uo=ro(5),ho=ro(6),po=oo.range,fo=ao.range,mo=so.range,go=lo.range,_o=co.range,yo=uo.range,vo=ho.range,bo=jr((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),xo=bo.range,wo=jr((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));wo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?jr((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Eo=wo.range,Mo=jr((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+e*Hr)}),(function(t,e){return(e-t)/Hr}),(function(t){return t.getUTCMinutes()})),To=Mo.range,So=jr((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+e*$r)}),(function(t,e){return(e-t)/$r}),(function(t){return t.getUTCHours()})),ko=So.range,Co=jr((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Zr}),(function(t){return t.getUTCDate()-1})),Io=Co.range;function Lo(t){return jr((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/Wr}))}var Do=Lo(0),Ao=Lo(1),Po=Lo(2),zo=Lo(3),No=Lo(4),Ro=Lo(5),Oo=Lo(6),Fo=Do.range,Bo=Ao.range,Uo=Po.range,Yo=zo.range,jo=No.range,Vo=Ro.range,Go=Oo.range,qo=jr((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Ho=qo.range,$o=jr((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));$o.every=function(t){return isFinite(t=Math.floor(t))&&t>0?jr((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Zo,Wo=$o.range,Xo=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},Ko=function(t){return(t=Xo(Math.abs(t)))?t[1]:NaN},Jo=function(t,e){var n=Xo(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},Qo={"":function(t,e){t:for(var n,i=(t=t.toPrecision(e)).length,r=1,o=-1;r<i;++r)switch(t[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Jo(100*t,e)},r:Jo,s:function(t,e){var n=Xo(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Zo=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Xo(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},ta=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,ea=function(t){return new na(t)};function na(t){if(!(e=ta.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],l=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";"n"===u?(l=!0,u="g"):Qo[u]||(u=""),(a||"0"===n&&"="===i)&&(a=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=o,this.zero=a,this.width=s,this.comma=l,this.precision=c,this.type=u}na.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var ia=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ra(t){return t}var oa,aa=function(t){var e,n,i=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,i){for(var r=t.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}):ra,r=t.currency,o=t.decimal;function a(t){var e=(t=ea(t)).fill,n=t.align,a=t.sign,s=t.symbol,l=t.zero,c=t.width,u=t.comma,h=t.precision,d=t.type,p="$"===s?r[0]:"#"===s&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",f="$"===s?r[1]:/[%p]/.test(d)?"%":"",m=Qo[d],g=!d||/[defgprs%]/.test(d);function _(t){var r,s,_,y=p,v=f;if("c"===d)v=m(t)+v,t="";else{var b=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=m(t,h),b)for(r=-1,s=t.length,b=!1;++r<s;)if(48<(_=t.charCodeAt(r))&&_<58||"x"===d&&96<_&&_<103||"X"===d&&64<_&&_<71){b=!0;break}if(y=(b?"("===a?a:"-":"-"===a||"("===a?"":a)+y,v=v+("s"===d?ia[8+Zo/3]:"")+(b&&"("===a?")":""),g)for(r=-1,s=t.length;++r<s;)if(48>(_=t.charCodeAt(r))||_>57){v=(46===_?o+t.slice(r+1):t.slice(r))+v,t=t.slice(0,r);break}}u&&!l&&(t=i(t,1/0));var x=y.length+t.length+v.length,w=x<c?new Array(c-x+1).join(e):"";switch(u&&l&&(t=i(w+t,w.length?c-v.length:1/0),w=""),n){case"<":return y+t+v+w;case"=":return y+w+t+v;case"^":return w.slice(0,x=w.length>>1)+y+t+v+w.slice(x)}return w+y+t+v}return h=null==h?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),_.toString=function(){return t+""},_}return{format:a,formatPrefix:function(t,e){var n=a(((t=ea(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Ko(e)/3))),r=Math.pow(10,-i),o=ia[8+i/3];return function(t){return n(r*t)+o}}}};function sa(e){return oa=aa(e),t.format=oa.format,t.formatPrefix=oa.formatPrefix,oa}sa({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var la=function(t){return Math.max(0,-Ko(Math.abs(t)))},ca=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ko(e)/3)))-Ko(Math.abs(t)))},ua=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ko(e)-Ko(t))+1};function ha(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function da(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function pa(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function fa(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=wa(r),u=Ea(r),h=wa(o),d=Ea(o),p=wa(a),f=Ea(a),m=wa(s),g=Ea(s),_=wa(l),y=Ea(l),v={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Fa,e:Fa,H:Ba,I:Ua,j:Ya,L:ja,m:Va,M:Ga,p:function(t){return r[+(t.getHours()>=12)]},S:qa,U:Ha,w:$a,W:Za,x:null,X:null,y:Wa,Y:Xa,Z:Ka,"%":ds},b={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Ja,e:Ja,H:Qa,I:ts,j:es,L:ns,m:is,M:rs,p:function(t){return r[+(t.getUTCHours()>=12)]},S:os,U:as,w:ss,W:ls,x:null,X:null,y:cs,Y:us,Z:hs,"%":ds},x={a:function(t,e,n){var i=p.exec(e.slice(n));return i?(t.w=f[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=d[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=_.exec(e.slice(n));return i?(t.m=y[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=g[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return M(t,e,n,i)},d:Da,e:Da,H:Pa,I:Pa,j:Aa,L:Ra,m:La,M:za,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=u[i[0].toLowerCase()],n+i[0].length):-1},S:Na,U:Ta,w:Ma,W:Sa,x:function(t,e,i){return M(t,n,e,i)},X:function(t,e,n){return M(t,i,e,n)},y:Ca,Y:ka,Z:Ia,"%":Oa};function w(t,e){return function(n){var i,r,o,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(r=ga[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),a.push(i),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function E(t,e){return function(n){var i=pa(1900);if(M(i,t,n+="",0)!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var r="Z"in i?da(pa(i.y)).getUTCDay():e(pa(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(r+5)%7:i.w+7*i.U-(r+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,da(i)):e(i)}}function M(t,e,n,i){for(var r,o,a=0,s=e.length,l=n.length;a<s;){if(i>=l)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(o=x[r in ga?e.charAt(a++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=w(n,v),v.X=w(i,v),v.c=w(e,v),b.x=w(n,b),b.X=w(i,b),b.c=w(e,b),{format:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=E(t+="",ha);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=E(t,da);return e.toString=function(){return t},e}}}var ma,ga={"-":"",_:" ",0:"0"},_a=/^\s*\d+/,ya=/^%/,va=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function ba(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function xa(t){return t.replace(va,"\\$&")}function wa(t){return new RegExp("^(?:"+t.map(xa).join("|")+")","i")}function Ea(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Ma(t,e,n){var i=_a.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Ta(t,e,n){var i=_a.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Sa(t,e,n){var i=_a.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function ka(t,e,n){var i=_a.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ca(t,e,n){var i=_a.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Ia(t,e,n){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function La(t,e,n){var i=_a.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Da(t,e,n){var i=_a.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Aa(t,e,n){var i=_a.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Pa(t,e,n){var i=_a.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function za(t,e,n){var i=_a.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Na(t,e,n){var i=_a.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Ra(t,e,n){var i=_a.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Oa(t,e,n){var i=ya.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Fa(t,e){return ba(t.getDate(),e,2)}function Ba(t,e){return ba(t.getHours(),e,2)}function Ua(t,e){return ba(t.getHours()%12||12,e,2)}function Ya(t,e){return ba(1+no.count(wo(t),t),e,3)}function ja(t,e){return ba(t.getMilliseconds(),e,3)}function Va(t,e){return ba(t.getMonth()+1,e,2)}function Ga(t,e){return ba(t.getMinutes(),e,2)}function qa(t,e){return ba(t.getSeconds(),e,2)}function Ha(t,e){return ba(oo.count(wo(t),t),e,2)}function $a(t){return t.getDay()}function Za(t,e){return ba(ao.count(wo(t),t),e,2)}function Wa(t,e){return ba(t.getFullYear()%100,e,2)}function Xa(t,e){return ba(t.getFullYear()%1e4,e,4)}function Ka(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ba(e/60|0,"0",2)+ba(e%60,"0",2)}function Ja(t,e){return ba(t.getUTCDate(),e,2)}function Qa(t,e){return ba(t.getUTCHours(),e,2)}function ts(t,e){return ba(t.getUTCHours()%12||12,e,2)}function es(t,e){return ba(1+Co.count($o(t),t),e,3)}function ns(t,e){return ba(t.getUTCMilliseconds(),e,3)}function is(t,e){return ba(t.getUTCMonth()+1,e,2)}function rs(t,e){return ba(t.getUTCMinutes(),e,2)}function os(t,e){return ba(t.getUTCSeconds(),e,2)}function as(t,e){return ba(Do.count($o(t),t),e,2)}function ss(t){return t.getUTCDay()}function ls(t,e){return ba(Ao.count($o(t),t),e,2)}function cs(t,e){return ba(t.getUTCFullYear()%100,e,2)}function us(t,e){return ba(t.getUTCFullYear()%1e4,e,4)}function hs(){return"+0000"}function ds(){return"%"}function ps(e){return ma=fa(e),t.timeFormat=ma.format,t.timeParse=ma.parse,t.utcFormat=ma.utcFormat,t.utcParse=ma.utcParse,ma}ps({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var fs="%Y-%m-%dT%H:%M:%S.%LZ";var ms=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat(fs);var gs=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:t.utcParse(fs),_s=Array.prototype,ys=_s.map,vs=_s.slice,bs={name:"implicit"};function xs(t){var e=I(),n=[],i=bs;function r(r){var o=r+"",a=e.get(o);if(!a){if(i!==bs)return i;e.set(o,a=n.push(r))}return t[(a-1)%t.length]}return t=null==t?[]:vs.call(t),r.domain=function(t){if(!arguments.length)return n.slice();n=[],e=I();for(var i,o,a=-1,s=t.length;++a<s;)e.has(o=(i=t[a])+"")||e.set(o,n.push(i));return r},r.range=function(e){return arguments.length?(t=vs.call(e),r):t.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return xs().domain(n).range(t).unknown(i)},r}function ws(){var t,e,n=xs().unknown(void 0),i=n.domain,r=n.range,o=[0,1],a=!1,s=0,l=0,c=.5;function u(){var n=i().length,u=o[1]<o[0],h=o[u-0],d=o[1-u];t=(d-h)/Math.max(1,n-s+2*l),a&&(t=Math.floor(t)),h+=(d-h-t*(n-s))*c,e=t*(1-s),a&&(h=Math.round(h),e=Math.round(e));var p=m(n).map((function(e){return h+t*e}));return r(u?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),u()):i()},n.range=function(t){return arguments.length?(o=[+t[0],+t[1]],u()):o.slice()},n.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,u()):a},n.padding=function(t){return arguments.length?(s=l=Math.max(0,Math.min(1,t)),u()):s},n.paddingInner=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),u()):s},n.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),u()):l},n.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),u()):c},n.copy=function(){return ws().domain(i()).range(o).round(a).paddingInner(s).paddingOuter(l).align(c)},u()}function Es(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Es(e())},t}var Ms=function(t){return function(){return t}},Ts=function(t){return+t},Ss=[0,1];function ks(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ms(e)}function Cs(t,e,n,i){var r=t[0],o=t[1],a=e[0],s=e[1];return o<r?(r=n(o,r),a=i(s,a)):(r=n(r,o),a=i(a,s)),function(t){return a(r(t))}}function Is(t,e,n,i){var o=Math.min(t.length,e.length)-1,a=new Array(o),s=new Array(o),l=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<o;)a[l]=n(t[l],t[l+1]),s[l]=i(e[l],e[l+1]);return function(e){var n=r(t,e,1,o)-1;return s[n](a[n](e))}}function Ls(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Ds(t,e){var n,i,r,o=Ss,a=Ss,s=ki,l=!1;function c(){return n=Math.min(o.length,a.length)>2?Is:Cs,i=r=null,u}function u(e){return(i||(i=n(o,a,l?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}(t):t,s)))(+e)}return u.invert=function(t){return(r||(r=n(a,o,ks,l?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}(e):e)))(+t)},u.domain=function(t){return arguments.length?(o=ys.call(t,Ts),c()):o.slice()},u.range=function(t){return arguments.length?(a=vs.call(t),c()):a.slice()},u.rangeRound=function(t){return a=vs.call(t),s=Ci,c()},u.clamp=function(t){return arguments.length?(l=!!t,c()):l},u.interpolate=function(t){return arguments.length?(s=t,c()):s},c()}function As(e){var n=e.domain;return e.ticks=function(t){var e=n();return v(e[0],e[e.length-1],null==t?10:t)},e.tickFormat=function(e,i){return function(e,n,i){var r,o=e[0],a=e[e.length-1],s=b(o,a,null==n?10:n);switch((i=ea(null==i?",f":i)).type){case"s":var l=Math.max(Math.abs(o),Math.abs(a));return null!=i.precision||isNaN(r=ca(s,l))||(i.precision=r),t.formatPrefix(i,l);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=ua(s,Math.max(Math.abs(o),Math.abs(a))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=la(s))||(i.precision=r-2*("%"===i.type))}return t.format(i)}(n(),e,i)},e.nice=function(t){var i=n(),r=i.length-1,o=null==t?10:t,a=i[0],s=i[r],l=b(a,s,o);return l&&(l=b(Math.floor(a/l)*l,Math.ceil(s/l)*l,o),i[0]=Math.floor(a/l)*l,i[r]=Math.ceil(s/l)*l,n(i)),e},e}var Ps=function(t,e){var n,i=0,r=(t=t.slice()).length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t};function zs(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Ms(e)}function Ns(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function Rs(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Os(t){return 10===t?Rs:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Fs(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Bs(t){return function(e){return-t(-e)}}function Us(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Ys(){var t=1,e=Ds((function(e,n){return(n=Us(n,t)-(e=Us(e,t)))?function(i){return(Us(i,t)-e)/n}:Ms(n)}),(function(e,n){return n=Us(n,t)-(e=Us(e,t)),function(i){return Us(e+n*i,1/t)}})),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return Ls(e,Ys().exponent(t))},As(e)}var js=1e3,Vs=6e4,Gs=36e5,qs=864e5,Hs=2592e6,$s=31536e6;function Zs(t){return new Date(t)}function Ws(t){return t instanceof Date?+t:+new Date(+t)}function Xs(t,e,i,r,o,a,s,l,c){var u=Ds(ks,yi),h=u.invert,d=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),_=c("%a %d"),y=c("%b %d"),v=c("%B"),x=c("%Y"),w=[[s,1,js],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,Vs],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,Gs],[o,3,108e5],[o,6,216e5],[o,12,432e5],[r,1,qs],[r,2,1728e5],[i,1,6048e5],[e,1,Hs],[e,3,7776e6],[t,1,$s]];function E(n){return(s(n)<n?p:a(n)<n?f:o(n)<n?m:r(n)<n?g:e(n)<n?i(n)<n?_:y:t(n)<n?v:x)(n)}function M(e,i,r,o){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-i)/e,s=n((function(t){return t[2]})).right(w,a);s===w.length?(o=b(i/$s,r/$s,e),e=t):s?(o=(s=w[a/w[s-1][2]<w[s][2]/a?s-1:s])[1],e=s[0]):(o=b(i,r,e),e=l)}return null==o?e:e.every(o)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(ys.call(t,Ws)):d().map(Zs)},u.ticks=function(t,e){var n,i=d(),r=i[0],o=i[i.length-1],a=o<r;return a&&(n=r,r=o,o=n),n=(n=M(t,r,o,e))?n.range(r,o+1):[],a?n.reverse():n},u.tickFormat=function(t,e){return null==e?E:c(e)},u.nice=function(t,e){var n=d();return(t=M(t,n[0],n[n.length-1],e))?d(Ps(n,t)):u},u.copy=function(){return Ls(u,Xs(t,e,i,r,o,a,s,l,c))},u}var Ks=function(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))},Js=Ks("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Qs=Ks("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),tl=Ks("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),el=Ks("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),nl=Hi(ni(300,.5,0),ni(-240,.5,1)),il=Hi(ni(-100,.75,.35),ni(80,1.5,.8)),rl=Hi(ni(260,.75,.35),ni(80,1.5,.8)),ol=ni();function al(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var sl=al(Ks("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ll=al(Ks("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),cl=al(Ks("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ul=al(Ks("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var hl="http://www.w3.org/1999/xhtml",dl={svg:"http://www.w3.org/2000/svg",xhtml:hl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pl=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),dl.hasOwnProperty(e)?{space:dl[e],local:t}:t};function fl(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hl&&e.documentElement.namespaceURI===hl?e.createElement(t):e.createElementNS(n,t)}}function ml(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var gl=function(t){var e=pl(t);return(e.local?ml:fl)(e)},_l=0;function yl(){return new vl}function vl(){this._="@"+(++_l).toString(36)}vl.prototype=yl.prototype={constructor:vl,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var bl=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var xl=document.documentElement;if(!xl.matches){var wl=xl.webkitMatchesSelector||xl.msMatchesSelector||xl.mozMatchesSelector||xl.oMatchesSelector;bl=function(t){return function(){return wl.call(this,t)}}}}var El=bl,Ml={};function Tl(t,e,n){return t=Sl(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Sl(e,n,i){return function(r){var o=t.event;t.event=r;try{e.call(this,this.__data__,n,i)}finally{t.event=o}}}function kl(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function Cl(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function Il(t,e,n){var i=Ml.hasOwnProperty(t.type)?Tl:Sl;return function(r,o,a){var s,l=this.__on,c=i(e,o,a);if(l)for(var u=0,h=l.length;u<h;++u)if((s=l[u]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},l?l.push(s):this.__on=[s]}}t.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Ml={mouseenter:"mouseover",mouseleave:"mouseout"}));function Ll(e,n,i,r){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(i,r)}finally{t.event=o}}var Dl=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},Al=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]},Pl=function(t){var e=Dl();return e.changedTouches&&(e=e.changedTouches[0]),Al(t,e)};function zl(){}var Nl=function(t){return null==t?zl:function(){return this.querySelector(t)}};function Rl(){return[]}var Ol=function(t){return null==t?Rl:function(){return this.querySelectorAll(t)}},Fl=function(t){return new Array(t.length)};function Bl(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Bl.prototype={constructor:Bl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ul(t,e,n,i,r,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new Bl(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function Yl(t,e,n,i,r,o,a){var s,l,c,u={},h=e.length,d=o.length,p=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(p[s]=c="$"+a.call(l,l.__data__,s,e),c in u?r[s]=l:u[c]=l);for(s=0;s<d;++s)(l=u[c="$"+a.call(t,o[s],s,o)])?(i[s]=l,l.__data__=o[s],u[c]=null):n[s]=new Bl(t,o[s]);for(s=0;s<h;++s)(l=e[s])&&u[p[s]]===l&&(r[s]=l)}function jl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Vl(t){return function(){this.removeAttribute(t)}}function Gl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ql(t,e){return function(){this.setAttribute(t,e)}}function Hl(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $l(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Zl(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var Wl=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Xl(t){return function(){this.style.removeProperty(t)}}function Kl(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Jl(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ql(t){return function(){delete this[t]}}function tc(t,e){return function(){this[t]=e}}function ec(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function nc(t){return t.trim().split(/^|\s+/)}function ic(t){return t.classList||new rc(t)}function rc(t){this._node=t,this._names=nc(t.getAttribute("class")||"")}function oc(t,e){for(var n=ic(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function ac(t,e){for(var n=ic(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function sc(t){return function(){oc(this,t)}}function lc(t){return function(){ac(this,t)}}function cc(t,e){return function(){(e.apply(this,arguments)?oc:ac)(this,t)}}rc.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function uc(){this.textContent=""}function hc(t){return function(){this.textContent=t}}function dc(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function pc(){this.innerHTML=""}function fc(t){return function(){this.innerHTML=t}}function mc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function gc(){this.nextSibling&&this.parentNode.appendChild(this)}function _c(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yc(){return null}function vc(){var t=this.parentNode;t&&t.removeChild(this)}function bc(t,e,n){var i=Wl(t),r=i.CustomEvent;r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function xc(t,e){return function(){return bc(this,t,e)}}function wc(t,e){return function(){return bc(this,t,e.apply(this,arguments))}}var Ec=[null];function Mc(t,e){this._groups=t,this._parents=e}function Tc(){return new Mc([[document.documentElement]],Ec)}Mc.prototype=Tc.prototype={constructor:Mc,select:function(t){"function"!=typeof t&&(t=Nl(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a,s=e[r],l=s.length,c=i[r]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=t.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new Mc(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Ol(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(i.push(t.call(a,a.__data__,c,s)),r.push(a));return new Mc(i,r)},filter:function(t){"function"!=typeof t&&(t=El(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new Mc(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each((function(t){p[++c]=t})),p;var n=e?Yl:Ul,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],h=r[c],d=h.length,p=t.call(u,u&&u.__data__,c,i),f=p.length,m=s[c]=new Array(f),g=a[c]=new Array(f);n(u,h,m,g,l[c]=new Array(d),p,e);for(var _,y,v=0,b=0;v<f;++v)if(_=m[v]){for(v>=b&&(b=v+1);!(y=g[b])&&++b<f;);_._next=y||null}}return(a=new Mc(a,i))._enter=s,a._exit=l,a},enter:function(){return new Mc(this._enter||this._groups.map(Fl),this._parents)},exit:function(){return new Mc(this._exit||this._groups.map(Fl),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,c=e[s],u=n[s],h=c.length,d=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;s<i;++s)a[s]=e[s];return new Mc(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&a!==i.nextSibling&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=jl);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,s=n[o],l=s.length,c=r[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(e)}return new Mc(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=pl(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Gl:Vl:"function"==typeof e?n.local?Zl:$l:n.local?Hl:ql)(n,e))},style:function(t,e,n){var i;return arguments.length>1?this.each((null==e?Xl:"function"==typeof e?Jl:Kl)(t,e,null==n?"":n)):Wl(i=this.node()).getComputedStyle(i,null).getPropertyValue(t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ql:"function"==typeof e?ec:tc)(t,e)):this.node()[t]},classed:function(t,e){var n=nc(t+"");if(arguments.length<2){for(var i=ic(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?cc:e?sc:lc)(n,e))},text:function(t){return arguments.length?this.each(null==t?uc:("function"==typeof t?dc:hc)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?pc:("function"==typeof t?mc:fc)(t)):this.node().innerHTML},raise:function(){return this.each(gc)},lower:function(){return this.each(_c)},append:function(t){var e="function"==typeof t?t:gl(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:gl(t),i=null==e?yc:"function"==typeof e?e:Nl(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(vc)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=kl(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?Il:Cl,null==n&&(n=!1),i=0;i<a;++i)this.each(s(o[i],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(i=0,l=s[c];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?wc:xc)(t,e))}};var Sc=function(t){return"string"==typeof t?new Mc([[document.querySelector(t)]],[document.documentElement]):new Mc([[t]],Ec)},kc=function(t,e,n){arguments.length<3&&(n=e,e=Dl().changedTouches);for(var i,r=0,o=e?e.length:0;r<o;++r)if((i=e[r]).identifier===n)return Al(t,i);return null},Cc=Zi("start","end","interrupt"),Ic=[],Lc=function(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var c,u,h,d;if(1!==n.state)return l();for(c in r)if((d=r[c]).name===n.name){if(3===d.state)return Br(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=6,d.timer.stop(),delete r[c])}if(Br((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=d);i.length=u+1}}function s(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=zr(o,0,n.time)}(t,n,{name:e,index:i,group:r,on:Cc,tween:Ic,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Dc(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>0)throw new Error("too late");return n}function Ac(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>2)throw new Error("too late");return n}function Pc(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}var zc=function(t,e){var n,i,r,o=t.__transition,a=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[r]):a=!1;a&&delete t.__transition}};function Nc(t,e){var n,i;return function(){var r=Ac(this,t),o=r.tween;if(o!==n)for(var a=0,s=(i=n=o).length;a<s;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}function Rc(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Ac(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:e,value:n},l=0,c=r.length;l<c;++l)if(r[l].name===e){r[l]=s;break}l===c&&r.push(s)}o.tween=r}}function Oc(t,e,n){var i=t._id;return t.each((function(){var t=Ac(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Pc(t,i).value[e]}}var Fc=function(t,e){var n;return("number"==typeof e?yi:e instanceof vn?di:(n=vn(e))?(e=n,di):Si)(t,e)};function Bc(t){return function(){this.removeAttribute(t)}}function Uc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yc(t,e,n){var i,r;return function(){var o=this.getAttribute(t);return o===n?null:o===i?r:r=e(i=o,n)}}function jc(t,e,n){var i,r;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===i?r:r=e(i=o,n)}}function Vc(t,e,n){var i,r,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttribute(t))===s?null:a===i&&s===r?o:o=e(i=a,r=s);this.removeAttribute(t)}}function Gc(t,e,n){var i,r,o;return function(){var a,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===s?null:a===i&&s===r?o:o=e(i=a,r=s);this.removeAttributeNS(t.space,t.local)}}function qc(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}return n._value=e,n}function Hc(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}return n._value=e,n}function $c(t,e){return function(){Dc(this,t).delay=+e.apply(this,arguments)}}function Zc(t,e){return e=+e,function(){Dc(this,t).delay=e}}function Wc(t,e){return function(){Ac(this,t).duration=+e.apply(this,arguments)}}function Xc(t,e){return e=+e,function(){Ac(this,t).duration=e}}function Kc(t,e){if("function"!=typeof e)throw new Error;return function(){Ac(this,t).ease=e}}function Jc(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Dc:Ac;return function(){var a=o(this,t),s=a.on;s!==i&&(r=(i=s).copy()).on(e,n),a.on=r}}var Qc=Tc.prototype.constructor;function tu(t,e,n){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.style.setProperty(t,r(e),n)}}return i._value=e,i}var eu=0;function nu(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function iu(t){return Tc().transition(t)}function ru(){return++eu}var ou=Tc.prototype;nu.prototype=iu.prototype={constructor:nu,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Nl(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s,l,c=i[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),h[d]=l,Lc(h[d],e,n,d,h,Pc(s,n)));return new nu(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ol(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,c=i[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,p=t.call(l,l.__data__,h,c),f=Pc(l,n),m=0,g=p.length;m<g;++m)(d=p[m])&&Lc(d,e,n,m,p,f);o.push(p),a.push(l)}return new nu(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=El(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new nu(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,c=e[s],u=n[s],h=c.length,d=a[s]=new Array(h),p=0;p<h;++p)(l=c[p]||u[p])&&(d[p]=l);for(;s<i;++s)a[s]=e[s];return new nu(a,this._parents,this._name,this._id)},selection:function(){return new Qc(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ru(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=Pc(a,e);Lc(a,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new nu(i,this._parents,t,n)},call:ou.call,nodes:ou.nodes,node:ou.node,size:ou.size,empty:ou.empty,each:ou.each,on:function(t,e){var n=this._id;return arguments.length<2?Pc(this.node(),n).on.on(t):this.each(Jc(n,t,e))},attr:function(t,e){var n=pl(t),i="transform"===n?zi:Fc;return this.attrTween(t,"function"==typeof e?(n.local?Gc:Vc)(n,i,Oc(this,"attr."+t,e)):null==e?(n.local?Uc:Bc)(n):(n.local?jc:Yc)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=pl(t);return this.tween(n,(i.local?qc:Hc)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Pi:Fc;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=Wl(this).getComputedStyle(this,null),a=o.getPropertyValue(t),s=(this.style.removeProperty(t),o.getPropertyValue(t));return a===s?null:a===n&&s===i?r:r=e(n=a,i=s)}}(t,i)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var i,r,o;return function(){var a=Wl(this).getComputedStyle(this,null),s=a.getPropertyValue(t),l=n(this);return null==l&&(this.style.removeProperty(t),l=a.getPropertyValue(t)),s===l?null:s===i&&l===r?o:o=e(i=s,r=l)}}(t,i,Oc(this,"style."+t,e)):function(t,e,n){var i,r;return function(){var o=Wl(this).getComputedStyle(this,null).getPropertyValue(t);return o===n?null:o===i?r:r=e(i=o,n)}}(t,i,e),n)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,tu(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Oc(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Pc(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?Nc:Rc)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?$c:Zc)(e,t)):Pc(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Wc:Xc)(e,t)):Pc(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Kc(e,t)):Pc(this.node(),e).ease}};var au={time:null,delay:0,duration:250,ease:U};function su(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return au.time=Dr(),au;return n}Tc.prototype.interrupt=function(t){return this.each((function(){zc(this,t)}))},Tc.prototype.transition=function(t){var e,n;t instanceof nu?(e=t._id,t=t._name):(e=ru(),(n=au).time=Dr(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)(a=s[c])&&Lc(a,t,e,c,s,n||su(a,e));return new nu(i,this._parents,t,e)};var lu=[null],cu=Array.prototype.slice,uu=function(t){return t},hu=1e-6;function du(t,e,n){var i=t(n);return"translate("+(isFinite(i)?i:e(n))+",0)"}function pu(t,e,n){var i=t(n);return"translate(0,"+(isFinite(i)?i:e(n))+")"}function fu(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function mu(){return!this.__axis}function gu(t,e){var n=[],i=null,r=null,o=6,a=6,s=3;function l(l){var c,u=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,h=null==r?e.tickFormat?e.tickFormat.apply(e,n):uu:r,d=Math.max(o,0)+s,p=1===t||3===t?du:pu,f=e.range(),m=f[0]+.5,g=f[f.length-1]+.5,_=(e.bandwidth?fu:uu)(e.copy()),y=l.selection?l.selection():l,v=y.selectAll(".domain").data([null]),b=y.selectAll(".tick").data(u,e).order(),x=b.exit(),w=b.enter().append("g").attr("class","tick"),E=b.select("line"),M=b.select("text"),T=1===t||4===t?-1:1,S=4===t||2===t?(c="x","y"):(c="y","x");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),b=b.merge(w),E=E.merge(w.append("line").attr("stroke","#000").attr(c+"2",T*o).attr(S+"1",.5).attr(S+"2",.5)),M=M.merge(w.append("text").attr("fill","#000").attr(c,T*d).attr(S,.5).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),l!==y&&(v=v.transition(l),b=b.transition(l),E=E.transition(l),M=M.transition(l),x=x.transition(l).attr("opacity",hu).attr("transform",(function(t){return p(_,this.parentNode.__axis||_,t)})),w.attr("opacity",hu).attr("transform",(function(t){return p(this.parentNode.__axis||_,_,t)}))),x.remove(),v.attr("d",4===t||2==t?"M"+T*a+","+m+"H0.5V"+g+"H"+T*a:"M"+m+","+T*a+"V0.5H"+g+"V"+T*a),b.attr("opacity",1).attr("transform",(function(t){return p(_,_,t)})),E.attr(c+"2",T*o),M.attr(c,T*d).text(h),y.filter(mu).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),y.each((function(){this.__axis=_}))}return l.scale=function(t){return arguments.length?(e=t,l):e},l.ticks=function(){return n=cu.call(arguments),l},l.tickArguments=function(t){return arguments.length?(n=null==t?[]:cu.call(t),l):n.slice()},l.tickValues=function(t){return arguments.length?(i=null==t?null:cu.call(t),l):i&&i.slice()},l.tickFormat=function(t){return arguments.length?(r=t,l):r},l.tickSize=function(t){return arguments.length?(o=a=+t,l):o},l.tickSizeInner=function(t){return arguments.length?(o=+t,l):o},l.tickSizeOuter=function(t){return arguments.length?(a=+t,l):a},l.tickPadding=function(t){return arguments.length?(s=+t,l):s},l}function _u(t,e){return t.parent===e.parent?1:2}function yu(t,e){return t+e.x}function vu(t,e){return Math.max(t,e.y)}function bu(t,e){var n,i,r,o,a,s=new Mu(t),l=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=xu);n=c.pop();)if(l&&(n.value=+n.data.value),(r=e(n.data))&&(a=r.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(i=n.children[o]=new Mu(r[o])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(Eu)}function xu(t){return t.children}function wu(t){t.data=t.data.data}function Eu(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Mu(t){this.data=t,this.depth=this.height=0,this.parent=null}function Tu(t){this._=t,this.next=null}Mu.prototype=bu.prototype={constructor:Mu,each:function(t){var e,n,i,r,o=this,a=[o];do{for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(i=0,r=n.length;i<r;++i)a.push(n[i])}while(a.length);return this},eachAfter:function(t){for(var e,n,i,r=this,o=[r],a=[];r=o.pop();)if(a.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n]);for(;r=a.pop();)t(r);return this},eachBefore:function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return bu(this).eachBefore(wu)}};var Su=function(t){return Cu(function(t){for(var e=(t=t.slice()).length,n=null,i=n;e;){var r=new Tu(t[e-1]);i=i?i.next=r:n=r,t[void 0]=t[--e]}return{head:n,tail:i}}(t),[])};function ku(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r-e.r;return r*r+1e-6>n*n+i*i}function Cu(t,e){var n,i,r,o=null,a=t.head;switch(e.length){case 1:n=function(t){return{x:t.x,y:t.y,r:t.r}}(e[0]);break;case 2:n=function(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,a=e.y,s=e.r,l=o-n,c=a-i,u=s-r,h=Math.sqrt(l*l+c*c);return{x:(n+o+l/h*u)/2,y:(i+a+c/h*u)/2,r:(h+r+s)/2}}(e[0],e[1]);break;case 3:n=function(t,e,n){var i=t.x,r=t.y,o=t.r,a=e.x,s=e.y,l=e.r,c=n.x,u=n.y,h=n.r,d=2*(i-a),p=2*(r-s),f=2*(l-o),m=i*i+r*r-o*o-a*a-s*s+l*l,g=2*(i-c),_=2*(r-u),y=2*(h-o),v=i*i+r*r-o*o-c*c-u*u+h*h,b=g*p-d*_,x=(p*v-_*m)/b-i,w=(_*f-p*y)/b,E=(g*m-d*v)/b-r,M=(d*y-g*f)/b,T=w*w+M*M-1,S=2*(x*w+E*M+o),k=x*x+E*E-o*o,C=(-S-Math.sqrt(S*S-4*T*k))/(2*T);return{x:x+w*C+i,y:E+M*C+r,r:C}}(e[0],e[1],e[2])}for(;a;)r=a._,i=a.next,n&&ku(n,r)?o=a:(o?(t.tail=o,o.next=null):t.head=t.tail=null,e.push(r),n=Cu(t,e),e.pop(),t.head?(a.next=t.head,t.head=a):(a.next=null,t.head=t.tail=a),(o=t.tail).next=i),a=i;return t.tail=o,n}function Iu(t,e,n){var i=t.x,r=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-i,l=e.y-r,c=s*s+l*l;if(c){var u=.5+((a*=a)-(o*=o))/(2*c),h=Math.sqrt(Math.max(0,2*o*(a+c)-(a-=c)*a-o*o))/(2*c);n.x=i+u*s+h*l,n.y=r+u*l-h*s}else n.x=i+a,n.y=r}function Lu(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r>n*n+i*i}function Du(t,e,n){var i=t.x-e,r=t.y-n;return i*i+r*r}function Au(t){this._=t,this.next=null,this.previous=null}function Pu(t){if(!(r=t.length))return 0;var e,n,i,r;if((e=t[0]).x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;Iu(n,e,i=t[2]);var o,a,s,l,c,u,h,d=e.r*e.r,p=n.r*n.r,f=i.r*i.r,m=d+p+f,g=d*e.x+p*n.x+f*i.x,_=d*e.y+p*n.y+f*i.y;e=new Au(e),n=new Au(n),i=new Au(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(s=3;s<r;++s){if(Iu(e._,n._,i=t[s]),i=new Au(i),(c=e.previous)===(l=n.next)){if(Lu(l._,i._)){e=n,n=l,--s;continue t}}else{u=l._.r,h=c._.r;do{if(u<=h){if(Lu(l._,i._)){n=l,e.next=n,n.previous=e,--s;continue t}u+=(l=l.next)._.r}else{if(Lu(c._,i._)){(e=c).next=n,n.previous=e,--s;continue t}h+=(c=c.previous)._.r}}while(l!==c.next)}for(i.previous=e,i.next=n,e.next=n.previous=n=i,m+=f=i._.r*i._.r,g+=f*i._.x,_+=f*i._.y,d=Du(e._,o=g/m,a=_/m);(i=i.next)!==n;)(f=Du(i._,o,a))<d&&(e=i,d=f);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=Su(e),s=0;s<r;++s)(e=t[s]).x-=i.x,e.y-=i.y;return i.r}function zu(t){return null==t?null:Nu(t)}function Nu(t){if("function"!=typeof t)throw new Error;return t}function Ru(){return 0}var Ou=function(t){return function(){return t}};function Fu(t){return Math.sqrt(t.value)}function Bu(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Uu(t,e){return function(n){if(i=n.children){var i,r,o,a=i.length,s=t(n)*e||0;if(s)for(r=0;r<a;++r)i[r].r+=s;if(o=Pu(i),s)for(r=0;r<a;++r)i[r].r-=s;n.r=o+s}}}function Yu(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var ju=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Vu=function(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,c=t.value&&(i-e)/t.value;++s<l;)(o=a[s]).y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*c},Gu={depth:-1},qu={};function Hu(t){return t.id}function $u(t){return t.parentId}function Zu(t,e){return t.parent===e.parent?1:2}function Wu(t){var e=t.children;return e?e[0]:t.t}function Xu(t){var e=t.children;return e?e[e.length-1]:t.t}function Ku(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function Ju(t,e,n){return t.a.parent===e.parent?t.a:n}function Qu(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}Qu.prototype=Object.create(Mu.prototype);var th=function(t,e,n,i,r){for(var o,a=t.children,s=-1,l=a.length,c=t.value&&(r-n)/t.value;++s<l;)(o=a[s]).x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*c},eh=(1+Math.sqrt(5))/2;function nh(t,e,n,i,r,o){for(var a,s,l,c,u,h,d,p,f,m,g,_,y=[],v=e.children,b=0,x=v.length,w=e.value;b<x;){for(c=r-n,u=o-i,d=p=h=v[b].value,_=h*h*(g=Math.max(u/c,c/u)/(w*t)),m=Math.max(p/_,_/d),l=b+1;l<x;++l){if(h+=s=v[l].value,s<d&&(d=s),s>p&&(p=s),_=h*h*g,(f=Math.max(p/_,_/d))>m){h-=s;break}m=f}y.push(a={value:h,dice:c<u,children:v.slice(b,l)}),a.dice?Vu(a,n,i,r,w?i+=u*h/w:o):th(a,n,i,w?n+=c*h/w:r,o),w-=h,b=l}return y}var ih=function t(e){function n(t,n,i,r,o){nh(e,t,n,i,r,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(eh),rh=function t(e){function n(t,n,i,r,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,l,c,u,h=-1,d=a.length,p=t.value;++h<d;){for(l=(s=a[h]).children,c=s.value=0,u=l.length;c<u;++c)s.value+=l[c].value;s.dice?Vu(s,n,i,r,i+=(o-i)*s.value/p):th(s,n,i,n+=(r-n)*s.value/p,o),p-=s.value}else t._squarify=a=nh(e,t,n,i,r,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(eh),oh=function(t){return function(){return t}},ah=function(){return 1e-6*(Math.random()-.5)};function sh(t){return t.x+t.vx}function lh(t){return t.y+t.vy}function ch(t,e){return e}function uh(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function hh(t){return t.x}function dh(t){return t.y}var ph=Math.PI*(3-Math.sqrt(5));function fh(){t.event.stopImmediatePropagation()}var mh=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},gh=function(t){var e=t.document.documentElement,n=Sc(t).on("dragstart.drag",mh,!0);"onselectstart"in e?n.on("selectstart.drag",mh,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function _h(t,e){var n=t.document.documentElement,i=Sc(t).on("dragstart.drag",null);e&&(i.on("click.drag",mh,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var yh=function(t){return function(){return t}};function vh(t,e,n,i,r,o,a,s,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=a,this.dx=s,this.dy=l,this._=c}function bh(){return!t.event.button}function xh(){return this.parentNode}function wh(e){return null==e?{x:t.event.x,y:t.event.y}:e}vh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Eh=function(t){return function(){return t}};function Mh(t){return t[0]}function Th(t){return t[1]}function Sh(){this._=null}function kh(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ch(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ih(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Lh(t){for(;t.L;)t=t.L;return t}function Dh(t,e,n,i){var r=[null,null],o=ed.push(r)-1;return r.left=t,r.right=e,n&&Ph(r,t,e,n),i&&Ph(r,e,t,i),Qh[t.index].halfedges.push(o),Qh[e.index].halfedges.push(o),r}function Ah(t,e,n){var i=[e,n];return i.left=t,i}function Ph(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function zh(t,e,n,i,r){var o,a=t[0],s=t[1],l=a[0],c=a[1],u=0,h=1,d=s[0]-l,p=s[1]-c;if(o=e-l,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>u&&(u=o)}if(o=i-l,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<h&&(h=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<u)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>u&&(u=o)}if(o=r-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>u&&(u=o)}else if(p>0){if(o<u)return;o<h&&(h=o)}return!(u>0||h<1)||(u>0&&(t[0]=[l+u*d,c+u*p]),h<1&&(t[1]=[l+h*d,c+h*p]),!0)}}}}}function Nh(t,e,n,i,r){var o=t[1];if(o)return!0;var a,s,l=t[0],c=t.left,u=t.right,h=c[0],d=c[1],p=u[0],f=u[1],m=(h+p)/2,g=(d+f)/2;if(f===d){if(m<e||m>=i)return;if(h>p){if(l){if(l[1]>=r)return}else l=[m,n];o=[m,r]}else{if(l){if(l[1]<n)return}else l=[m,r];o=[m,n]}}else if(s=g-(a=(h-p)/(f-d))*m,a<-1||a>1)if(h>p){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(d<f){if(l){if(l[0]>=i)return}else l=[e,a*e+s];o=[i,a*i+s]}else{if(l){if(l[0]<e)return}else l=[i,a*i+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function Rh(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function Oh(t,e){return e[+(e.left!==t.site)]}function Fh(t,e){return e[+(e.left===t.site)]}Sh.prototype={constructor:Sh,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Lh(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Ch(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ih(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Ih(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ch(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?Lh(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Ch(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ih(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Ch(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Ih(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ch(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Ih(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Bh,Uh=[];function Yh(){kh(this),this.x=this.y=this.arc=this.site=this.cy=null}function jh(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,c=i[1]-s,u=o[0]-a,h=o[1]-s,d=2*(l*h-c*u);if(!(d>=-id)){var p=l*l+c*c,f=u*u+h*h,m=(h*p-c*f)/d,g=(l*f-u*p)/d,_=Uh.pop()||new Yh;_.arc=t,_.site=r,_.x=m+a,_.y=(_.cy=g+s)+Math.sqrt(m*m+g*g),t.circle=_;for(var y=null,v=td._;v;)if(_.y<v.y||_.y===v.y&&_.x<=v.x){if(!v.L){y=v.P;break}v=v.L}else{if(!v.R){y=v;break}v=v.R}td.insert(y,_),y||(Bh=_)}}}}function Vh(t){var e=t.circle;e&&(e.P||(Bh=e.N),td.remove(e),Uh.push(e),kh(e),t.circle=null)}var Gh=[];function qh(){kh(this),this.edge=this.site=this.circle=null}function Hh(t){var e=Gh.pop()||new qh;return e.site=t,e}function $h(t){Vh(t),Jh.remove(t),Gh.push(t),kh(t)}function Zh(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,s=[t];$h(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<nd&&Math.abs(i-l.circle.cy)<nd;)o=l.P,s.unshift(l),$h(l),l=o;s.unshift(l),Vh(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<nd&&Math.abs(i-c.circle.cy)<nd;)a=c.N,s.push(c),$h(c),c=a;s.push(c),Vh(c);var u,h=s.length;for(u=1;u<h;++u)c=s[u],l=s[u-1],Ph(c.edge,l.site,c.site,r);l=s[0],(c=s[h-1]).edge=Dh(l.site,c.site,null,r),jh(l),jh(c)}function Wh(t){for(var e,n,i,r,o=t[0],a=t[1],s=Jh._;s;)if((i=Xh(s,a)-o)>nd)s=s.L;else{if(!((r=o-Kh(s,a))>nd)){i>-nd?(e=s.P,n=s):r>-nd?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Qh[t.index]={site:t,halfedges:[]}}(t);var l=Hh(t);if(Jh.insert(e,l),e||n){if(e===n)return Vh(e),n=Hh(e.site),Jh.insert(l,n),l.edge=n.edge=Dh(e.site,l.site),jh(e),void jh(n);if(n){Vh(e),Vh(n);var c=e.site,u=c[0],h=c[1],d=t[0]-u,p=t[1]-h,f=n.site,m=f[0]-u,g=f[1]-h,_=2*(d*g-p*m),y=d*d+p*p,v=m*m+g*g,b=[(g*y-p*v)/_+u,(d*v-m*y)/_+h];Ph(n.edge,c,f,b),l.edge=Dh(c,t,null,b),n.edge=Dh(t,f,null,b),jh(e),jh(n)}else l.edge=Dh(e.site,l.site)}}function Xh(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],c=l-e;if(!c)return s;var u=s-i,h=1/o-1/c,d=u/c;return h?(-d+Math.sqrt(d*d-2*h*(u*u/(-2*c)-l+c/2+r-o/2)))/h+i:(i+s)/2}function Kh(t,e){var n=t.N;if(n)return Xh(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Jh,Qh,td,ed,nd=1e-6,id=1e-12;function rd(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function od(t,e){return e[1]-t[1]||e[0]-t[0]}function ad(t,e){var n,i,r,o=t.sort(od).pop();for(ed=[],Qh=new Array(t.length),Jh=new Sh,td=new Sh;;)if(r=Bh,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(Wh(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;Zh(r.arc)}if(function(){for(var t,e,n,i,r=0,o=Qh.length;r<o;++r)if((t=Qh[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=Rh(t,ed[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<i;++n)s[n]=e[a[n]];for(n=0;n<i;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],c=+e[1][1];(function(t,e,n,i){for(var r,o=ed.length;o--;)Nh(r=ed[o],t,e,n,i)&&zh(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>nd||Math.abs(r[0][1]-r[1][1])>nd)||delete ed[o]})(a,s,l,c),function(t,e,n,i){var r,o,a,s,l,c,u,h,d,p,f,m,g=Qh.length,_=!0;for(r=0;r<g;++r)if(o=Qh[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)ed[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)f=(p=Fh(o,ed[l[s]]))[0],m=p[1],h=(u=Oh(o,ed[l[++s%c]]))[0],d=u[1],(Math.abs(f-h)>nd||Math.abs(m-d)>nd)&&(l.splice(s,0,ed.push(Ah(a,p,Math.abs(f-t)<nd&&i-m>nd?[t,Math.abs(h-t)<nd?d:i]:Math.abs(m-i)<nd&&n-f>nd?[Math.abs(d-i)<nd?h:n,i]:Math.abs(f-n)<nd&&m-e>nd?[n,Math.abs(h-n)<nd?d:e]:Math.abs(m-e)<nd&&f-t>nd?[Math.abs(d-e)<nd?h:t,e]:null))-1),++c);c&&(_=!1)}if(_){var y,v,b,x=1/0;for(r=0,_=null;r<g;++r)(o=Qh[r])&&(b=(y=(a=o.site)[0]-t)*y+(v=a[1]-e)*v)<x&&(x=b,_=o);if(_){var w=[t,e],E=[t,i],M=[n,i],T=[n,e];_.halfedges.push(ed.push(Ah(a=_.site,w,E))-1,ed.push(Ah(a,E,M))-1,ed.push(Ah(a,M,T))-1,ed.push(Ah(a,T,w))-1)}}for(r=0;r<g;++r)(o=Qh[r])&&(o.halfedges.length||delete Qh[r])}(a,s,l,c)}this.edges=ed,this.cells=Qh,Jh=td=ed=Qh=null}ad.prototype={constructor:ad,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Oh(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,i){for(var r,o=n.site,a=n.halfedges,s=-1,l=a.length,c=e[a[l-1]],u=c.left===o?c.right:c.left;++s<l;)r=u,u=(c=e[a[s]]).left===o?c.right:c.left,r&&u&&i<r.index&&i<u.index&&rd(o,r,u)<0&&t.push([o.data,r.data,u.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){var i,r=this,o=r._found||0,a=r.cells[o]||r.cells[o=0],s=t-a.site[0],l=e-a.site[1],c=s*s+l*l;do{a=r.cells[i=o],o=null,a.halfedges.forEach((function(n){var i=r.edges[n],s=i.left;if(s!==a.site&&s||(s=i.right)){var l=t-s[0],u=e-s[1],h=l*l+u*u;h<c&&(c=h,o=s.index)}}))}while(null!==o);return r._found=i,null==n||c<=n*n?a.site:null}};var sd=function(t){return function(){return t}};function ld(t,e,n){this.target=t,this.type=e,this.transform=n}function cd(t,e,n){this.k=t,this.x=e,this.y=n}cd.prototype={constructor:cd,scale:function(t){return 1===t?this:new cd(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new cd(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ud=new cd(1,0,0);function hd(t){return t.__zoom||ud}function dd(){t.event.stopImmediatePropagation()}hd.prototype=cd.prototype;var pd=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()};function fd(){return!t.event.button}function md(){var t,e,n=this;return n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function gd(){return this.__zoom||ud}var _d=function(t){return function(){return t}},yd=function(t,e,n){this.target=t,this.type=e,this.selection=n};function vd(){t.event.stopImmediatePropagation()}var bd=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},xd={name:"drag"},wd={name:"space"},Ed={name:"handle"},Md={name:"center"},Td={name:"x",handles:["e","w"].map(Pd),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Sd={name:"y",handles:["n","s"].map(Pd),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},kd={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Pd),input:function(t){return t},output:function(t){return t}},Cd={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Id={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ld={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Dd={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ad={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Pd(t){return{type:t}}function zd(){return!t.event.button}function Nd(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Rd(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Od(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Fd(e){var n,i=Nd,r=zd,o=Zi(s,"start","brush","end"),a=6;function s(t){var n=t.property("__brush",d).selectAll(".overlay").data([Pd("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Cd.overlay).merge(n).each((function(){var t=Rd(this).extent;Sc(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),t.selectAll(".selection").data([Pd("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Cd.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,(function(t){return t.type}));i.exit().remove(),i.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return Cd[t.type]})),t.each(l).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",h)}function l(){var t=Sc(this),e=Rd(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-a/2:e[0][0]-a/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-a/2:e[0][1]-a/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+a:a})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+a:a}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(t,e){return t.__brush.emitter||new u(t,e)}function u(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function h(){if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return bd()}else if(n)return;if(r.apply(this,arguments)){var i,o,a,s,u,h,d,p,f,m,g,_,y,v=this,b=t.event.target.__data__.type,x="selection"===(t.event.metaKey?b="overlay":b)?xd:t.event.altKey?Md:Ed,w=e===Sd?null:Dd[b],E=e===Td?null:Ad[b],M=Rd(v),T=M.extent,S=M.selection,k=T[0][0],C=T[0][1],I=T[1][0],L=T[1][1],D=w&&E&&t.event.shiftKey,A=Pl(v),P=A,z=c(v,arguments).beforestart();"overlay"===b?M.selection=S=[[i=e===Sd?k:A[0],a=e===Td?C:A[1]],[u=e===Sd?I:i,d=e===Td?L:a]]:(i=S[0][0],a=S[0][1],u=S[1][0],d=S[1][1]),o=i,s=a,h=u,p=d;var N=Sc(v).attr("pointer-events","none"),R=N.selectAll(".overlay").attr("cursor",Cd[b]);if(t.event.touches)N.on("touchmove.brush",F,!0).on("touchend.brush touchcancel.brush",U,!0);else{var O=Sc(t.event.view).on("keydown.brush",Y,!0).on("keyup.brush",j,!0).on("mousemove.brush",F,!0).on("mouseup.brush",U,!0);gh(t.event.view)}vd(),zc(v),l.call(v),z.start()}function F(){var t=Pl(v);!D||_||y||(Math.abs(t[0]-P[0])>Math.abs(t[1]-P[1])?y=!0:_=!0),P=t,g=!0,bd(),B()}function B(){var t;switch(f=P[0]-A[0],m=P[1]-A[1],x){case wd:case xd:w&&(f=Math.max(k-i,Math.min(I-u,f)),o=i+f,h=u+f),E&&(m=Math.max(C-a,Math.min(L-d,m)),s=a+m,p=d+m);break;case Ed:w<0?(f=Math.max(k-i,Math.min(I-i,f)),o=i+f,h=u):w>0&&(f=Math.max(k-u,Math.min(I-u,f)),o=i,h=u+f),E<0?(m=Math.max(C-a,Math.min(L-a,m)),s=a+m,p=d):E>0&&(m=Math.max(C-d,Math.min(L-d,m)),s=a,p=d+m);break;case Md:w&&(o=Math.max(k,Math.min(I,i-f*w)),h=Math.max(k,Math.min(I,u+f*w))),E&&(s=Math.max(C,Math.min(L,a-m*E)),p=Math.max(C,Math.min(L,d+m*E)))}h<o&&(w*=-1,t=i,i=u,u=t,t=o,o=h,h=t,b in Id&&R.attr("cursor",Cd[b=Id[b]])),p<s&&(E*=-1,t=a,a=d,d=t,t=s,s=p,p=t,b in Ld&&R.attr("cursor",Cd[b=Ld[b]])),M.selection&&(S=M.selection),_&&(o=S[0][0],h=S[1][0]),y&&(s=S[0][1],p=S[1][1]),S[0][0]===o&&S[0][1]===s&&S[1][0]===h&&S[1][1]===p||(M.selection=[[o,s],[h,p]],l.call(v),z.brush())}function U(){if(vd(),t.event.touches){if(t.event.touches.length)return;n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),N.on("touchmove.brush touchend.brush touchcancel.brush",null)}else _h(t.event.view,g),O.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);N.attr("pointer-events","all"),R.attr("cursor",Cd.overlay),M.selection&&(S=M.selection),Od(S)&&(M.selection=null,l.call(v)),z.end()}function Y(){switch(t.event.keyCode){case 16:D=w&&E;break;case 18:x===Ed&&(w&&(u=h-f*w,i=o+f*w),E&&(d=p-m*E,a=s+m*E),x=Md,B());break;case 32:x!==Ed&&x!==Md||(w<0?u=h-f:w>0&&(i=o-f),E<0?d=p-m:E>0&&(a=s-m),x=wd,R.attr("cursor",Cd.selection),B());break;default:return}bd()}function j(){switch(t.event.keyCode){case 16:D&&(_=y=D=!1,B());break;case 18:x===Md&&(w<0?u=h:w>0&&(i=o),E<0?d=p:E>0&&(a=s),x=Ed,B());break;case 32:x===wd&&(t.event.altKey?(w&&(u=h-f*w,i=o+f*w),E&&(d=p-m*E,a=s+m*E),x=Md):(w<0?u=h:w>0&&(i=o),E<0?d=p:E>0&&(a=s),x=Ed),R.attr("cursor",Cd[b]),B());break;default:return}bd()}}function d(){var t=this.__brush||{selection:null};return t.extent=i.apply(this,arguments),t.dim=e,t}return s.move=function(t,n){t.selection?t.on("start.brush",(function(){c(this,arguments).beforestart().start()})).on("interrupt.brush end.brush",(function(){c(this,arguments).end()})).tween("brush",(function(){var t=this,i=t.__brush,r=c(t,arguments),o=i.selection,a=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),s=ki(o,a);function u(e){i.selection=1===e&&Od(a)?null:s(e),l.call(t),r.brush()}return o&&a?u:u(1)})):t.each((function(){var t=this,i=arguments,r=t.__brush,o=e.input("function"==typeof n?n.apply(t,i):n,r.extent),a=c(t,i).beforestart();zc(t),r.selection=null==o||Od(o)?null:o,l.call(t),a.start().brush().end()}))},u.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Ll(new yd(s,t,e.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},s.extent=function(t){return arguments.length?(i="function"==typeof t?t:_d([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),s):i},s.filter=function(t){return arguments.length?(r="function"==typeof t?t:_d(!!t),s):r},s.handleSize=function(t){return arguments.length?(a=+t,s):a},s.on=function(){var t=o.on.apply(o,arguments);return t===o?s:t},s}var Bd=Math.cos,Ud=Math.sin,Yd=Math.PI,jd=Yd/2,Vd=2*Yd,Gd=Math.max;function qd(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var Hd=Array.prototype.slice,$d=function(t){return function(){return t}};function Zd(t){return t.source}function Wd(t){return t.target}function Xd(t){return t.radius}function Kd(t){return t.startAngle}function Jd(t){return t.endAngle}var Qd=function(){return new tp};function tp(){this.reset()}tp.prototype={constructor:tp,reset:function(){this.s=this.t=0},add:function(t){np(ep,t,this.t),np(this,ep.s,this.s),this.s?this.t+=ep.t:this.s=ep.t},valueOf:function(){return this.s}};var ep=new tp;function np(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var ip=1e-6,rp=Math.PI,op=rp/2,ap=rp/4,sp=2*rp,lp=180/rp,cp=rp/180,up=Math.abs,hp=Math.atan,dp=Math.atan2,pp=Math.cos,fp=Math.ceil,mp=Math.exp,gp=Math.log,_p=Math.pow,yp=Math.sin,vp=Math.sign||function(t){return t>0?1:t<0?-1:0},bp=Math.sqrt,xp=Math.tan;function wp(t){return t>1?0:t<-1?rp:Math.acos(t)}function Ep(t){return t>1?op:t<-1?-op:Math.asin(t)}function Mp(t){return(t=yp(t/2))*t}function Tp(){}function Sp(t,e){t&&Cp.hasOwnProperty(t.type)&&Cp[t.type](t,e)}var kp={Feature:function(t,e){Sp(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Sp(n[i].geometry,e)}},Cp={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ip(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ip(n[i],e,0)},Polygon:function(t,e){Lp(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Lp(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Sp(n[i],e)}};function Ip(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function Lp(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ip(t[n],e,1);e.polygonEnd()}var Dp,Ap,Pp,zp,Np,Rp=function(t,e){t&&kp.hasOwnProperty(t.type)?kp[t.type](t,e):Sp(t,e)},Op=Qd(),Fp=Qd(),Bp={point:Tp,lineStart:Tp,lineEnd:Tp,polygonStart:function(){Op.reset(),Bp.lineStart=Up,Bp.lineEnd=Yp},polygonEnd:function(){var t=+Op;Fp.add(t<0?sp+t:t),this.lineStart=this.lineEnd=this.point=Tp},sphere:function(){Fp.add(sp)}};function Up(){Bp.point=jp}function Yp(){Vp(Dp,Ap)}function jp(t,e){Bp.point=Vp,Dp=t,Ap=e,Pp=t*=cp,zp=pp(e=(e*=cp)/2+ap),Np=yp(e)}function Vp(t,e){var n=(t*=cp)-Pp,i=n>=0?1:-1,r=i*n,o=pp(e=(e*=cp)/2+ap),a=yp(e),s=Np*a,l=zp*o+s*pp(r),c=s*i*yp(r);Op.add(dp(c,l)),Pp=t,zp=o,Np=a}var Gp,qp,Hp,$p,Zp,Wp,Xp,Kp;function Jp(t){return[dp(t[1],t[0]),Ep(t[2])]}function Qp(t){var e=t[0],n=t[1],i=pp(n);return[i*pp(e),i*yp(e),yp(n)]}function tf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ef(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function nf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function rf(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function of(t){var e=bp(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var af,sf,lf=Qd(),cf={point:uf,lineStart:df,lineEnd:pf,polygonStart:function(){cf.point=ff,cf.lineStart=mf,cf.lineEnd=gf,lf.reset(),Bp.polygonStart()},polygonEnd:function(){Bp.polygonEnd(),cf.point=uf,cf.lineStart=df,cf.lineEnd=pf,Op<0?(Gp=-(Hp=180),qp=-($p=90)):lf>ip?$p=90:lf<-1e-6&&(qp=-90),sf[0]=Gp,sf[1]=Hp}};function uf(t,e){af.push(sf=[Gp=t,Hp=t]),e<qp&&(qp=e),e>$p&&($p=e)}function hf(t,e){var n=Qp([t*cp,e*cp]);if(Kp){var i=ef(Kp,n),r=ef([i[1],-i[0],0],i);of(r),r=Jp(r);var o,a=t-Zp,s=a>0?1:-1,l=r[0]*lp*s,c=up(a)>180;c^(s*Zp<l&&l<s*t)?(o=r[1]*lp)>$p&&($p=o):c^(s*Zp<(l=(l+360)%360-180)&&l<s*t)?(o=-r[1]*lp)<qp&&(qp=o):(e<qp&&(qp=e),e>$p&&($p=e)),c?t<Zp?_f(Gp,t)>_f(Gp,Hp)&&(Hp=t):_f(t,Hp)>_f(Gp,Hp)&&(Gp=t):Hp>=Gp?(t<Gp&&(Gp=t),t>Hp&&(Hp=t)):t>Zp?_f(Gp,t)>_f(Gp,Hp)&&(Hp=t):_f(t,Hp)>_f(Gp,Hp)&&(Gp=t)}else uf(t,e);Kp=n,Zp=t}function df(){cf.point=hf}function pf(){sf[0]=Gp,sf[1]=Hp,cf.point=uf,Kp=null}function ff(t,e){if(Kp){var n=t-Zp;lf.add(up(n)>180?n+(n>0?360:-360):n)}else Wp=t,Xp=e;Bp.point(t,e),hf(t,e)}function mf(){Bp.lineStart()}function gf(){ff(Wp,Xp),Bp.lineEnd(),up(lf)>ip&&(Gp=-(Hp=180)),sf[0]=Gp,sf[1]=Hp,Kp=null}function _f(t,e){return(e-=t)<0?e+360:e}function yf(t,e){return t[0]-e[0]}function vf(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var bf,xf,wf,Ef,Mf,Tf,Sf,kf,Cf,If,Lf,Df,Af,Pf,zf,Nf,Rf={sphere:Tp,point:Of,lineStart:Bf,lineEnd:jf,polygonStart:function(){Rf.lineStart=Vf,Rf.lineEnd=Gf},polygonEnd:function(){Rf.lineStart=Bf,Rf.lineEnd=jf}};function Of(t,e){t*=cp;var n=pp(e*=cp);Ff(n*pp(t),n*yp(t),yp(e))}function Ff(t,e,n){++bf,wf+=(t-wf)/bf,Ef+=(e-Ef)/bf,Mf+=(n-Mf)/bf}function Bf(){Rf.point=Uf}function Uf(t,e){t*=cp;var n=pp(e*=cp);Pf=n*pp(t),zf=n*yp(t),Nf=yp(e),Rf.point=Yf,Ff(Pf,zf,Nf)}function Yf(t,e){t*=cp;var n=pp(e*=cp),i=n*pp(t),r=n*yp(t),o=yp(e),a=dp(bp((a=zf*o-Nf*r)*a+(a=Nf*i-Pf*o)*a+(a=Pf*r-zf*i)*a),Pf*i+zf*r+Nf*o);xf+=a,Tf+=a*(Pf+(Pf=i)),Sf+=a*(zf+(zf=r)),kf+=a*(Nf+(Nf=o)),Ff(Pf,zf,Nf)}function jf(){Rf.point=Of}function Vf(){Rf.point=qf}function Gf(){Hf(Df,Af),Rf.point=Of}function qf(t,e){Df=t,Af=e,t*=cp,e*=cp,Rf.point=Hf;var n=pp(e);Pf=n*pp(t),zf=n*yp(t),Nf=yp(e),Ff(Pf,zf,Nf)}function Hf(t,e){t*=cp;var n=pp(e*=cp),i=n*pp(t),r=n*yp(t),o=yp(e),a=zf*o-Nf*r,s=Nf*i-Pf*o,l=Pf*r-zf*i,c=bp(a*a+s*s+l*l),u=Pf*i+zf*r+Nf*o,h=c&&-wp(u)/c,d=dp(c,u);Cf+=h*a,If+=h*s,Lf+=h*l,xf+=d,Tf+=d*(Pf+(Pf=i)),Sf+=d*(zf+(zf=r)),kf+=d*(Nf+(Nf=o)),Ff(Pf,zf,Nf)}var $f=function(t){return function(){return t}},Zf=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n};function Wf(t,e){return[t>rp?t-sp:t<-rp?t+sp:t,e]}function Xf(t,e,n){return(t%=sp)?e||n?Zf(Jf(t),Qf(e,n)):Jf(t):e||n?Qf(e,n):Wf}function Kf(t){return function(e,n){return[(e+=t)>rp?e-sp:e<-rp?e+sp:e,n]}}function Jf(t){var e=Kf(t);return e.invert=Kf(-t),e}function Qf(t,e){var n=pp(t),i=yp(t),r=pp(e),o=yp(e);function a(t,e){var a=pp(e),s=pp(t)*a,l=yp(t)*a,c=yp(e),u=c*n+s*i;return[dp(l*r-u*o,s*n-c*i),Ep(u*r+l*o)]}return a.invert=function(t,e){var a=pp(e),s=pp(t)*a,l=yp(t)*a,c=yp(e),u=c*r-l*o;return[dp(l*r+c*o,s*n+u*i),Ep(u*n-s*i)]},a}Wf.invert=Wf;function tm(t,e,n,i,r,o){if(n){var a=pp(e),s=yp(e),l=i*n;null==r?(r=e+i*sp,o=e-l/2):(r=em(a,r),o=em(a,o),(i>0?r<o:r>o)&&(r+=i*sp));for(var c,u=r;i>0?u>o:u<o;u-=l)c=Jp([a,-s*pp(u),-s*yp(u)]),t.point(c[0],c[1])}}function em(t,e){(e=Qp(e))[0]-=t,of(e);var n=wp(-e[1]);return((-e[2]<0?-n:n)+sp-ip)%sp}var nm=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Tp,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},im=function(t,e){return up(t[0]-e[0])<ip&&up(t[1]-e[1])<ip};function rm(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}var om=function(t,e,n,i,r){var o,a,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(im(i,a)){for(r.lineStart(),o=0;o<e;++o)r.point((i=t[o])[0],i[1]);r.lineEnd()}else s.push(n=new rm(i,t,null,!0)),l.push(n.o=new rm(i,null,n,!1)),s.push(n=new rm(a,t,null,!1)),l.push(n.o=new rm(a,null,n,!0))}})),s.length){for(l.sort(e),am(s),am(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var c,u,h=s[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(o=0,a=c.length;o<a;++o)r.point((u=c[o])[0],u[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(p)for(c=d.p.z,o=c.length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else i(d.x,d.p.x,-1,r);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);r.lineEnd()}}};function am(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}var sm=1e9,lm=-sm;function cm(t,e,n,i){function r(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function o(r,o,s,c){var u=0,h=0;if(null==r||(u=a(r,s))!==(h=a(o,s))||l(r,o)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?i:e)}while((u=(u+s+4)%4)!==h);else c.point(o[0],o[1])}function a(i,r){return up(i[0]-t)<ip?r>0?0:3:up(i[0]-n)<ip?r>0?2:1:up(i[1]-e)<ip?r>0?1:0:r>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var l,c,u,h,d,p,f,m,g,_,y,v=a,b=nm(),x={point:w,lineStart:function(){x.point=M,c&&c.push(u=[]),_=!0,g=!1,f=m=NaN},lineEnd:function(){l&&(M(h,d),p&&g&&b.rejoin(),l.push(b.result())),x.point=w,g&&v.lineEnd()},polygonStart:function(){v=b,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=c.length;n<r;++n)for(var o,a,s=c[n],l=1,u=s.length,h=s[0],d=h[0],p=h[1];l<u;++l)o=d,a=p,d=(h=s[l])[0],p=h[1],a<=i?p>i&&(d-o)*(i-a)>(p-a)*(t-o)&&++e:p<=i&&(d-o)*(i-a)<(p-a)*(t-o)&&--e;return e}(),n=y&&e,r=(l=E(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&om(l,s,e,o,a),a.polygonEnd()),v=a,l=c=u=null}};function w(t,e){r(t,e)&&v.point(t,e)}function M(o,a){var s=r(o,a);if(c&&u.push([o,a]),_)h=o,d=a,p=s,_=!1,s&&(v.lineStart(),v.point(o,a));else if(s&&g)v.point(o,a);else{var l=[f=Math.max(lm,Math.min(sm,f)),m=Math.max(lm,Math.min(sm,m))],b=[o=Math.max(lm,Math.min(sm,o)),a=Math.max(lm,Math.min(sm,a))];!function(t,e,n,i,r,o){var a,s=t[0],l=t[1],c=0,u=1,h=e[0]-s,d=e[1]-l;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>c&&(c=a)}if(a=r-s,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<u&&(u=a)}if(a=i-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<u&&(u=a)}else if(d>0){if(a>u)return;a>c&&(c=a)}if(a=o-l,d||!(a<0)){if(a/=d,d<0){if(a>u)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<u&&(u=a)}return c>0&&(t[0]=s+c*h,t[1]=l+c*d),u<1&&(e[0]=s+u*h,e[1]=l+u*d),!0}}}}}(l,b,t,e,n,i)?s&&(v.lineStart(),v.point(o,a),y=!1):(g||(v.lineStart(),v.point(l[0],l[1])),v.point(b[0],b[1]),s||v.lineEnd(),y=!1)}f=o,m=a,g=s}return x}}var um,hm,dm,pm=Qd(),fm={sphere:Tp,point:Tp,lineStart:function(){fm.point=gm,fm.lineEnd=mm},lineEnd:Tp,polygonStart:Tp,polygonEnd:Tp};function mm(){fm.point=fm.lineEnd=Tp}function gm(t,e){um=t*=cp,hm=yp(e*=cp),dm=pp(e),fm.point=_m}function _m(t,e){t*=cp;var n=yp(e*=cp),i=pp(e),r=up(t-um),o=pp(r),a=i*yp(r),s=dm*n-hm*i*o,l=hm*n+dm*i*o;pm.add(dp(bp(a*a+s*s),l)),um=t,hm=n,dm=i}var ym=function(t){return pm.reset(),Rp(t,fm),+pm},vm=[null,null],bm={type:"LineString",coordinates:vm};function xm(t,e,n){var i=m(t,e-ip,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function wm(t,e,n){var i=m(t,e-ip,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function Em(){var t,e,n,i,r,o,a,s,l,c,u,h,d=10,p=d,f=90,g=360,_=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return m(fp(i/f)*f,n,f).map(u).concat(m(fp(s/g)*g,a,g).map(h)).concat(m(fp(e/d)*d,t,d).filter((function(t){return up(t%f)>ip})).map(l)).concat(m(fp(o/p)*p,r,p).filter((function(t){return up(t%g)>ip})).map(c))}return y.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(h(a).slice(1),u(n).reverse().slice(1),h(s).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],i>n&&(t=i,i=n,n=t),s>a&&(t=s,s=a,a=t),y.precision(_)):[[i,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],r=+n[1][1],e>t&&(n=e,e=t,t=n),o>r&&(n=o,o=r,r=n),y.precision(_)):[[e,o],[t,r]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(f=+t[0],g=+t[1],y):[f,g]},y.stepMinor=function(t){return arguments.length?(d=+t[0],p=+t[1],y):[d,p]},y.precision=function(d){return arguments.length?(_=+d,l=xm(o,r,90),c=wm(e,t,_),u=xm(s,a,90),h=wm(i,n,_),y):_},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}var Mm,Tm,Sm,km,Cm=function(t){return t},Im=Qd(),Lm=Qd(),Dm={point:Tp,lineStart:Tp,lineEnd:Tp,polygonStart:function(){Dm.lineStart=Am,Dm.lineEnd=Nm},polygonEnd:function(){Dm.lineStart=Dm.lineEnd=Dm.point=Tp,Im.add(up(Lm)),Lm.reset()},result:function(){var t=Im/2;return Im.reset(),t}};function Am(){Dm.point=Pm}function Pm(t,e){Dm.point=zm,Mm=Sm=t,Tm=km=e}function zm(t,e){Lm.add(km*t-Sm*e),Sm=t,km=e}function Nm(){zm(Mm,Tm)}var Rm=1/0,Om=Rm,Fm=-Rm,Bm=Fm,Um={point:function(t,e){t<Rm&&(Rm=t),t>Fm&&(Fm=t),e<Om&&(Om=e),e>Bm&&(Bm=e)},lineStart:Tp,lineEnd:Tp,polygonStart:Tp,polygonEnd:Tp,result:function(){var t=[[Rm,Om],[Fm,Bm]];return Fm=Bm=-(Om=Rm=1/0),t}};var Ym,jm,Vm,Gm,qm=0,Hm=0,$m=0,Zm=0,Wm=0,Xm=0,Km=0,Jm=0,Qm=0,tg={point:eg,lineStart:ng,lineEnd:og,polygonStart:function(){tg.lineStart=ag,tg.lineEnd=sg},polygonEnd:function(){tg.point=eg,tg.lineStart=ng,tg.lineEnd=og},result:function(){var t=Qm?[Km/Qm,Jm/Qm]:Xm?[Zm/Xm,Wm/Xm]:$m?[qm/$m,Hm/$m]:[NaN,NaN];return qm=Hm=$m=Zm=Wm=Xm=Km=Jm=Qm=0,t}};function eg(t,e){qm+=t,Hm+=e,++$m}function ng(){tg.point=ig}function ig(t,e){tg.point=rg,eg(Vm=t,Gm=e)}function rg(t,e){var n=t-Vm,i=e-Gm,r=bp(n*n+i*i);Zm+=r*(Vm+t)/2,Wm+=r*(Gm+e)/2,Xm+=r,eg(Vm=t,Gm=e)}function og(){tg.point=eg}function ag(){tg.point=lg}function sg(){cg(Ym,jm)}function lg(t,e){tg.point=cg,eg(Ym=Vm=t,jm=Gm=e)}function cg(t,e){var n=t-Vm,i=e-Gm,r=bp(n*n+i*i);Zm+=r*(Vm+t)/2,Wm+=r*(Gm+e)/2,Xm+=r,Km+=(r=Gm*t-Vm*e)*(Vm+t),Jm+=r*(Gm+e),Qm+=3*r,eg(Vm=t,Gm=e)}function ug(t){this._context=t}function hg(){this._string=[]}function dg(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}ug.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,sp)}},result:Tp},hg.prototype={_circle:dg(4.5),pointRadius:function(t){return this._circle=dg(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var pg=Qd(),fg=function(t,e,n,i){return function(r,o){var a,s,l,c=e(o),u=r.invert(i[0],i[1]),h=nm(),d=e(h),p=!1,f={point:m,lineStart:_,lineEnd:y,polygonStart:function(){f.point=v,f.lineStart=b,f.lineEnd=x,s=[],a=[]},polygonEnd:function(){f.point=m,f.lineStart=_,f.lineEnd=y,s=E(s);var t=function(t,e){var n=e[0],i=e[1],r=[yp(n),-pp(n),0],o=0,a=0;pg.reset();for(var s=0,l=t.length;s<l;++s)if(u=(c=t[s]).length)for(var c,u,h=c[u-1],d=h[0],p=h[1]/2+ap,f=yp(p),m=pp(p),g=0;g<u;++g,d=y,f=b,m=x,h=_){var _=c[g],y=_[0],v=_[1]/2+ap,b=yp(v),x=pp(v),w=y-d,E=w>=0?1:-1,M=E*w,T=M>rp,S=f*b;if(pg.add(dp(S*E*yp(M),m*x+S*pp(M))),o+=T?w+E*sp:w,T^d>=n^y>=n){var k=ef(Qp(h),Qp(_));of(k);var C=ef(r,k);of(C);var I=(T^w>=0?-1:1)*Ep(C[2]);(i>I||i===I&&(k[0]||k[1]))&&(a+=T^w>=0?1:-1)}}return(o<-1e-6||o<ip&&pg<-1e-6)^1&a}(a,u);s.length?(p||(o.polygonStart(),p=!0),om(s,gg,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(e,n){var i=r(e,n);t(e=i[0],n=i[1])&&o.point(e,n)}function g(t,e){var n=r(t,e);c.point(n[0],n[1])}function _(){f.point=g,c.lineStart()}function y(){f.point=m,c.lineEnd()}function v(t,e){l.push([t,e]);var n=r(t,e);d.point(n[0],n[1])}function b(){d.lineStart(),l=[]}function x(){v(l[0][0],l[0][1]),d.lineEnd();var t,e,n,i,r=d.clean(),c=h.result(),u=c.length;if(l.pop(),a.push(l),l=null,u)if(1&r){if((e=(n=c[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else u>1&&2&r&&c.push(c.pop().concat(c.shift())),s.push(c.filter(mg))}return f}};function mg(t){return t.length>1}function gg(t,e){return((t=t.x)[0]<0?t[1]-op-ip:op-t[1])-((e=e.x)[0]<0?e[1]-op-ip:op-e[1])}var _g=fg((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?rp:-rp,l=up(o-n);up(l-rp)<ip?(t.point(n,i=(i+a)/2>0?op:-op),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(o,i),e=0):r!==s&&l>=rp&&(up(n-r)<ip&&(n-=r*ip),up(o-s)<ip&&(o-=s*ip),i=function(t,e,n,i){var r,o,a=yp(t-n);return up(a)>ip?hp((yp(e)*(o=pp(i))*yp(n)-yp(i)*(r=pp(e))*yp(t))/(r*o*a)):(e+i)/2}(n,i,o,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=o,i=a),r=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*op,i.point(-rp,r),i.point(0,r),i.point(rp,r),i.point(rp,0),i.point(rp,-r),i.point(0,-r),i.point(-rp,-r),i.point(-rp,0),i.point(-rp,r);else if(up(t[0]-e[0])>ip){var o=t[0]<e[0]?rp:-rp;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}),[-rp,-op]);var yg=function(t,e){var n=pp(t),i=n>0,r=up(n)>ip;function o(t,e){return pp(t)*pp(e)>n}function a(t,e,i){var r=[1,0,0],o=ef(Qp(t),Qp(e)),a=tf(o,o),s=o[0],l=a-s*s;if(!l)return!i&&t;var c=n*a/l,u=-n*s/l,h=ef(r,o),d=rf(r,c);nf(d,rf(o,u));var p=h,f=tf(d,p),m=tf(p,p),g=f*f-m*(tf(d,d)-1);if(!(g<0)){var _=bp(g),y=rf(p,(-f-_)/m);if(nf(y,d),y=Jp(y),!i)return y;var v,b=t[0],x=e[0],w=t[1],E=e[1];x<b&&(v=b,b=x,x=v);var M=x-b,T=up(M-rp)<ip;if(!T&&E<w&&(v=w,w=E,E=v),T||M<ip?T?w+E>0^y[1]<(up(y[0]-b)<ip?w:E):w<=y[1]&&y[1]<=E:M>rp^(b<=y[0]&&y[0]<=x)){var S=rf(p,(-f+_)/m);return nf(S,d),[y,Jp(S)]}}}function s(e,n){var r=i?t:rp-t,o=0;return e<-r?o|=1:e>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return fg(o,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(h,d){var p,f=[h,d],m=o(h,d),g=i?m?0:s(h,d):m?s(h+(h<0?rp:-rp),d):0;if(!e&&(c=l=m)&&t.lineStart(),m!==l&&(p=a(e,f),(im(e,p)||im(f,p))&&(f[0]+=ip,f[1]+=ip,m=o(f[0],f[1]))),m!==l)u=0,m?(t.lineStart(),p=a(f,e),t.point(p[0],p[1])):(p=a(e,f),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(r&&e&&i^m){var _;g&n||!(_=a(f,e,!0))||(u=0,i?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!m||e&&im(e,f)||t.point(f[0],f[1]),e=f,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(n,i,r,o){tm(o,t,e,r,n,i)}),i?[0,-t]:[-rp,t-rp])};function vg(t){return function(e){var n=new bg;for(var i in t)n[i]=t[i];return n.stream=e,n}}function bg(){}function xg(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Rp(n,t.stream(Um));var a=Um.result(),s=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),l=+e[0][0]+(i-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(r-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,c])}function wg(t,e,n){return xg(t,[[0,0],e],n)}bg.prototype={constructor:bg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Eg=pp(30*cp),Mg=function(t,e){return+e?function(t,e){function n(i,r,o,a,s,l,c,u,h,d,p,f,m,g){var _=c-i,y=u-r,v=_*_+y*y;if(v>4*e&&m--){var b=a+d,x=s+p,w=l+f,E=bp(b*b+x*x+w*w),M=Ep(w/=E),T=up(up(w)-1)<ip||up(o-h)<ip?(o+h)/2:dp(x,b),S=t(T,M),k=S[0],C=S[1],I=k-i,L=C-r,D=y*I-_*L;(D*D/v>e||up((_*I+y*L)/v-.5)>.3||a*d+s*p+l*f<Eg)&&(n(i,r,o,a,s,l,k,C,T,b/=E,x/=E,w,m,g),g.point(k,C),n(k,C,T,b,x,w,c,u,h,d,p,f,m,g))}}return function(e){var i,r,o,a,s,l,c,u,h,d,p,f,m={point:g,lineStart:_,lineEnd:v,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=_}};function g(n,i){n=t(n,i),e.point(n[0],n[1])}function _(){u=NaN,m.point=y,e.lineStart()}function y(i,r){var o=Qp([i,r]),a=t(i,r);n(u,h,c,d,p,f,u=a[0],h=a[1],c=i,d=o[0],p=o[1],f=o[2],16,e),e.point(u,h)}function v(){m.point=g,e.lineEnd()}function b(){_(),m.point=x,m.lineEnd=w}function x(t,e){y(i=t,e),r=u,o=h,a=d,s=p,l=f,m.point=y}function w(){n(u,h,c,d,p,f,r,o,i,a,s,l,16,e),m.lineEnd=v,v()}return m}}(t,e):function(t){return vg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)};var Tg=vg({point:function(t,e){this.stream.point(t*cp,e*cp)}});function Sg(t){return kg((function(){return t}))()}function kg(t){var e,n,i,r,o,a,s,l,c,u,h=150,d=480,p=250,f=0,m=0,g=0,_=0,y=0,v=null,b=_g,x=null,w=Cm,E=.5,M=Mg(k,E);function T(t){return[(t=o(t[0]*cp,t[1]*cp))[0]*h+n,i-t[1]*h]}function S(t){return(t=o.invert((t[0]-n)/h,(i-t[1])/h))&&[t[0]*lp,t[1]*lp]}function k(t,r){return[(t=e(t,r))[0]*h+n,i-t[1]*h]}function C(){o=Zf(r=Xf(g,_,y),e);var t=e(f,m);return n=d-t[0]*h,i=p+t[1]*h,I()}function I(){return c=u=null,T}return T.stream=function(t){return c&&u===t?c:c=Tg(b(r,M(w(u=t))))},T.clipAngle=function(t){return arguments.length?(b=+t?yg(v=t*cp,6*cp):(v=null,_g),I()):v*lp},T.clipExtent=function(t){return arguments.length?(w=null==t?(x=a=s=l=null,Cm):cm(x=+t[0][0],a=+t[0][1],s=+t[1][0],l=+t[1][1]),I()):null==x?null:[[x,a],[s,l]]},T.scale=function(t){return arguments.length?(h=+t,C()):h},T.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],C()):[d,p]},T.center=function(t){return arguments.length?(f=t[0]%360*cp,m=t[1]%360*cp,C()):[f*lp,m*lp]},T.rotate=function(t){return arguments.length?(g=t[0]%360*cp,_=t[1]%360*cp,y=t.length>2?t[2]%360*cp:0,C()):[g*lp,_*lp,y*lp]},T.precision=function(t){return arguments.length?(M=Mg(k,E=t*t),I()):bp(E)},T.fitExtent=function(t,e){return xg(T,t,e)},T.fitSize=function(t,e){return wg(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&S,C()}}function Cg(t){var e=0,n=rp/3,i=kg(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*cp,n=t[1]*cp):[e*lp,n*lp]},r}function Ig(t,e){var n=yp(t),i=(n+yp(e))/2;if(up(i)<ip)return function(t){var e=pp(t);function n(t,n){return[t*e,yp(n)/e]}return n.invert=function(t,n){return[t/e,Ep(n*e)]},n}(t);var r=1+n*(2*i-n),o=bp(r)/i;function a(t,e){var n=bp(r-2*i*yp(e))/i;return[n*yp(t*=i),o-n*pp(t)]}return a.invert=function(t,e){var n=o-e;return[dp(t,up(n))/i*vp(n),Ep((r-(t*t+n*n)*i*i)/(2*i))]},a}var Lg=function(){return Cg(Ig).scale(155.424).center([0,33.6442])},Dg=function(){return Lg().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Ag(t){return function(e,n){var i=pp(e),r=pp(n),o=t(i*r);return[o*r*yp(e),o*yp(n)]}}function Pg(t){return function(e,n){var i=bp(e*e+n*n),r=t(i),o=yp(r),a=pp(r);return[dp(e*o,i*a),Ep(i&&n*o/i)]}}var zg=Ag((function(t){return bp(2/(1+t))}));zg.invert=Pg((function(t){return 2*Ep(t/2)}));var Ng=Ag((function(t){return(t=wp(t))&&t/yp(t)}));Ng.invert=Pg((function(t){return t}));function Rg(t,e){return[t,gp(xp((op+e)/2))]}Rg.invert=function(t,e){return[t,2*hp(mp(e))-op]};function Og(t){var e,n=Sg(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.translate=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.clipExtent=function(t){if(!arguments.length)return e?null:o();if(e=null==t){var a=rp*i(),s=r();t=[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]}return o(t),n},n.clipExtent(null)}function Fg(t){return xp((op+t)/2)}function Bg(t,e){var n=pp(t),i=t===e?yp(t):gp(n/pp(e))/gp(Fg(e)/Fg(t)),r=n*_p(Fg(t),i)/i;if(!i)return Rg;function o(t,e){r>0?e<-op+ip&&(e=-op+ip):e>op-ip&&(e=op-ip);var n=r/_p(Fg(e),i);return[n*yp(i*t),r-n*pp(i*t)]}return o.invert=function(t,e){var n=r-e,o=vp(i)*bp(t*t+n*n);return[dp(t,up(n))/i*vp(n),2*hp(_p(r/o,1/i))-op]},o}function Ug(t,e){return[t,e]}Ug.invert=Ug;function Yg(t,e){var n=pp(t),i=t===e?yp(t):(n-pp(e))/(e-t),r=n/i+t;if(up(i)<ip)return Ug;function o(t,e){var n=r-e,o=i*t;return[n*yp(o),r-n*pp(o)]}return o.invert=function(t,e){var n=r-e;return[dp(t,up(n))/i*vp(n),r-vp(i)*bp(t*t+n*n)]},o}function jg(t,e){var n=pp(e),i=pp(t)*n;return[n*yp(t)/i,yp(e)/i]}jg.invert=Pg(hp);function Vg(t,e,n){return 1===t&&0===e&&0===n?Cm:vg({point:function(i,r){this.stream.point(i*t+e,r*t+n)}})}function Gg(t,e){return[pp(e)*yp(t),yp(e)]}Gg.invert=Pg(Ep);function qg(t,e){var n=pp(e),i=1+pp(t)*n;return[n*yp(t)/i,yp(e)/i]}qg.invert=Pg((function(t){return 2*hp(t)}));function Hg(t,e){return[gp(xp((op+e)/2)),-t]}Hg.invert=function(t,e){return[-e,2*hp(mp(t))-op]};t.version="4.3.0",t.bisect=r,t.bisectRight=r,t.bisectLeft=o,t.ascending=e,t.bisector=n,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.deviation=l,t.extent=c,t.histogram=function(){var t=f,e=c,n=x;function i(i){var o,a,s=i.length,l=new Array(s);for(o=0;o<s;++o)l[o]=t(i[o],o,i);var c=e(l),u=c[0],h=c[1],d=n(l,u,h);Array.isArray(d)||(d=v(u,h,d));for(var p=d.length;d[0]<=u;)d.shift(),--p;for(;d[p-1]>=h;)d.pop(),--p;var f,m=new Array(p+1);for(o=0;o<=p;++o)(f=m[o]=[]).x0=o>0?d[o-1]:u,f.x1=o<p?d[o]:h;for(o=0;o<s;++o)u<=(a=l[o])&&a<=h&&m[r(d,a,0,p)].push(i[o]);return m}return i.value=function(e){return arguments.length?(t="function"==typeof e?e:p(e),i):t},i.domain=function(t){return arguments.length?(e="function"==typeof t?t:p([t[0],t[1]]),i):e},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?p(h.call(t)):p(t),i):n},i},t.thresholdFreedmanDiaconis=function(t,n,i){return t=d.call(t,a).sort(e),Math.ceil((i-n)/(2*(w(t,.75)-w(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,e,n){return Math.ceil((n-e)/(3.5*l(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=x,t.max=function(t,e){var n,i,r=-1,o=t.length;if(null==e){for(;++r<o;)if(null!=(i=t[r])&&i>=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;++r<o;)if(null!=(i=e(t[r],r,t))&&i>=i){n=i;break}for(;++r<o;)null!=(i=e(t[r],r,t))&&i>n&&(n=i)}return n},t.mean=function(t,e){var n,i=0,r=t.length,o=-1,s=r;if(null==e)for(;++o<r;)isNaN(n=a(t[o]))?--s:i+=n;else for(;++o<r;)isNaN(n=a(e(t[o],o,t)))?--s:i+=n;if(s)return i/s},t.median=function(t,n){var i,r=[],o=t.length,s=-1;if(null==n)for(;++s<o;)isNaN(i=a(t[s]))||r.push(i);else for(;++s<o;)isNaN(i=a(n(t[s],s,t)))||r.push(i);return w(r.sort(e),.5)},t.merge=E,t.min=M,t.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},t.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},t.quantile=w,t.range=m,t.scan=function(t,n){if(i=t.length){var i,r,o=0,a=0,s=t[a];for(n||(n=e);++o<i;)(n(r=t[o],s)<0||0!==n(s,s))&&(s=r,a=o);return 0===n(s,s)?a:void 0}},t.shuffle=function(t,e,n){for(var i,r,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},t.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(null==e)for(;++o<r;)(n=+t[o])&&(i+=n);else for(;++o<r;)(n=+e(t[o],o,t))&&(i+=n);return i},t.ticks=v,t.tickStep=b,t.transpose=T,t.variance=s,t.zip=function(){return T(arguments)},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.map=I,t.set=R,t.nest=function(){var t,e,n,i=[],r=[];function o(n,r,a,s){if(r>=i.length)return null!=e?e(n):null!=t?n.sort(t):n;for(var l,c,u,h=-1,d=n.length,p=i[r++],f=I(),m=a();++h<d;)(u=f.get(l=p(c=n[h])+""))?u.push(c):f.set(l,[c]);return f.each((function(t,e){s(m,e,o(t,r,a,s))})),m}function a(t,n){if(++n>i.length)return t;var o,s=r[n-1];return null!=e&&n>=i.length?o=t.entries():(o=[],t.each((function(t,e){o.push({key:e,values:a(t,n)})}))),null!=s?o.sort((function(t,e){return s(t.key,e.key)})):o}return n={object:function(t){return o(t,0,L,D)},map:function(t){return o(t,0,A,P)},entries:function(t){return a(o(t,0,A,P),0)},key:function(t){return i.push(t),n},sortKeys:function(t){return r[i.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}},t.randomUniform=function(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return Math.random()*e+t}},t.randomNormal=O,t.randomLogNormal=function(){var t=O.apply(this,arguments);return function(){return Math.exp(t())}},t.randomBates=function(t){var e=F(t);return function(){return e()/t}},t.randomIrwinHall=F,t.randomExponential=function(t){return function(){return-Math.log(1-Math.random())/t}},t.easeLinear=function(t){return+t},t.easeQuad=B,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=B,t.easeCubic=U,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=U,t.easePoly=V,t.easePolyIn=Y,t.easePolyOut=j,t.easePolyInOut=V,t.easeSin=H,t.easeSinIn=function(t){return 1-Math.cos(t*q)},t.easeSinOut=function(t){return Math.sin(t*q)},t.easeSinInOut=H,t.easeExp=$,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=$,t.easeCircle=Z,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=Z,t.easeBounce=K,t.easeBounceIn=function(t){return 1-K(1-t)},t.easeBounceOut=K,t.easeBounceInOut=function(t){return((t*=2)<=1?1-K(1-t):K(t-1)+1)/2},t.easeBack=et,t.easeBackIn=Q,t.easeBackOut=tt,t.easeBackInOut=et,t.easeElastic=rt,t.easeElasticIn=it,t.easeElasticOut=rt,t.easeElasticInOut=ot,t.polygonArea=function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[1]*r[0]-e[0]*r[1];return o/2},t.polygonCentroid=function(t){for(var e,n,i=-1,r=t.length,o=0,a=0,s=t[r-1],l=0;++i<r;)e=s,s=t[i],l+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(l*=3),a/l]},t.polygonHull=function(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),r=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(st),e=0;e<n;++e)r[e]=[i[e][0],-i[e][1]];var o=lt(i),a=lt(r),s=a[0]===o[0],l=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[i[o[e]][2]]);for(e=+s;e<a.length-l;++e)c.push(t[i[a[e]][2]]);return c},t.polygonContains=function(t,e){for(var n,i,r=t.length,o=t[r-1],a=e[0],s=e[1],l=o[0],c=o[1],u=!1,h=0;h<r;++h)n=(o=t[h])[0],(i=o[1])>s!=c>s&&a<(l-n)*(s-i)/(c-i)+n&&(u=!u),l=n,c=i;return u},t.polygonLength=function(t){for(var e,n,i=-1,r=t.length,o=t[r-1],a=o[0],s=o[1],l=0;++i<r;)e=a,n=s,e-=a=(o=t[i])[0],n-=s=o[1],l+=Math.sqrt(e*e+n*n);return l},t.path=ft,t.quadtree=vt,t.queue=Lt,t.arc=function(){var t=Rt,e=Ot,n=Dt(0),i=null,r=Ft,o=Bt,a=Ut,s=null;function l(){var l,c,u=+t.apply(this,arguments),h=+e.apply(this,arguments),d=r.apply(this,arguments)-zt,p=o.apply(this,arguments)-zt,f=Math.abs(p-d),m=p>d;if(s||(s=l=ft()),h<u&&(c=h,h=u,u=c),h>At)if(f>Nt-At)s.moveTo(h*Math.cos(d),h*Math.sin(d)),s.arc(0,0,h,d,p,!m),u>At&&(s.moveTo(u*Math.cos(p),u*Math.sin(p)),s.arc(0,0,u,p,d,m));else{var g,_,y=d,v=p,b=d,x=p,w=f,E=f,M=a.apply(this,arguments)/2,T=M>At&&(i?+i.apply(this,arguments):Math.sqrt(u*u+h*h)),S=Math.min(Math.abs(h-u)/2,+n.apply(this,arguments)),k=S,C=S;if(T>At){var I=Yt(T/u*Math.sin(M)),L=Yt(T/h*Math.sin(M));(w-=2*I)>At?(b+=I*=m?1:-1,x-=I):(w=0,b=x=(d+p)/2),(E-=2*L)>At?(y+=L*=m?1:-1,v-=L):(E=0,y=v=(d+p)/2)}var D=h*Math.cos(y),A=h*Math.sin(y),P=u*Math.cos(x),z=u*Math.sin(x);if(S>At){var N=h*Math.cos(v),R=h*Math.sin(v),O=u*Math.cos(b),F=u*Math.sin(b);if(f<Pt){var B=w>At?jt(D,A,O,F,N,R,P,z):[P,z],U=D-B[0],Y=A-B[1],j=N-B[0],V=R-B[1],G=1/Math.sin(Math.acos((U*j+Y*V)/(Math.sqrt(U*U+Y*Y)*Math.sqrt(j*j+V*V)))/2),q=Math.sqrt(B[0]*B[0]+B[1]*B[1]);k=Math.min(S,(u-q)/(G-1)),C=Math.min(S,(h-q)/(G+1))}}E>At?C>At?(g=Vt(O,F,D,A,h,C,m),_=Vt(N,R,P,z,h,C,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),C<S?s.arc(g.cx,g.cy,C,Math.atan2(g.y01,g.x01),Math.atan2(_.y01,_.x01),!m):(s.arc(g.cx,g.cy,C,Math.atan2(g.y01,g.x01),Math.atan2(g.y11,g.x11),!m),s.arc(0,0,h,Math.atan2(g.cy+g.y11,g.cx+g.x11),Math.atan2(_.cy+_.y11,_.cx+_.x11),!m),s.arc(_.cx,_.cy,C,Math.atan2(_.y11,_.x11),Math.atan2(_.y01,_.x01),!m))):(s.moveTo(D,A),s.arc(0,0,h,y,v,!m)):s.moveTo(D,A),u>At&&w>At?k>At?(g=Vt(P,z,N,R,u,-k,m),_=Vt(D,A,O,F,u,-k,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),k<S?s.arc(g.cx,g.cy,k,Math.atan2(g.y01,g.x01),Math.atan2(_.y01,_.x01),!m):(s.arc(g.cx,g.cy,k,Math.atan2(g.y01,g.x01),Math.atan2(g.y11,g.x11),!m),s.arc(0,0,u,Math.atan2(g.cy+g.y11,g.cx+g.x11),Math.atan2(_.cy+_.y11,_.cx+_.x11),m),s.arc(_.cx,_.cy,k,Math.atan2(_.y11,_.x11),Math.atan2(_.y01,_.x01),!m))):s.arc(0,0,u,x,b,m):s.lineTo(P,z)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-Pt/2;return[Math.cos(i)*n,Math.sin(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Dt(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Dt(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Dt(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:Dt(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Dt(+t),l):r},l.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Dt(+t),l):o},l.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Dt(+t),l):a},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l},t.area=Wt,t.line=Zt,t.pie=function(){var t=Kt,e=Xt,n=null,i=Dt(0),r=Dt(Nt),o=Dt(0);function a(a){var s,l,c,u,h,d=a.length,p=0,f=new Array(d),m=new Array(d),g=+i.apply(this,arguments),_=Math.min(Nt,Math.max(-Nt,r.apply(this,arguments)-g)),y=Math.min(Math.abs(_)/d,o.apply(this,arguments)),v=y*(_<0?-1:1);for(s=0;s<d;++s)(h=m[f[s]=s]=+t(a[s],s,a))>0&&(p+=h);for(null!=e?f.sort((function(t,n){return e(m[t],m[n])})):null!=n&&f.sort((function(t,e){return n(a[t],a[e])})),s=0,c=p?(_-d*v)/p:0;s<d;++s,g=u)l=f[s],u=g+((h=m[l])>0?h*c:0)+v,m[l]={data:a[l],index:s,value:h,startAngle:g,endAngle:u,padAngle:y};return m}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:Dt(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Dt(+t),a):i},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:Dt(+t),a):r},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Dt(+t),a):o},a},t.radialArea=function(){var t=Wt().curve(Jt),e=t.curve,n=t.lineX0,i=t.lineX1,r=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return ee(n())},delete t.lineX0,t.lineEndAngle=function(){return ee(i())},delete t.lineX1,t.lineInnerRadius=function(){return ee(r())},delete t.lineY0,t.lineOuterRadius=function(){return ee(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(te(t)):e()._curve},t},t.radialLine=function(){return ee(Zt().curve(Jt))},t.symbol=function(){var t=Dt(ne),e=Dt(64),n=null;function i(){var i;if(n||(n=i=ft()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:Dt(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:Dt(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i},t.symbols=ve,t.symbolCircle=ne,t.symbolCross=ie,t.symbolDiamond=ae,t.symbolSquare=he,t.symbolStar=ue,t.symbolTriangle=pe,t.symbolWye=ye,t.curveBasisClosed=function(t){return new Ee(t)},t.curveBasisOpen=function(t){return new Me(t)},t.curveBasis=function(t){return new we(t)},t.curveBundle=Se,t.curveCardinalClosed=De,t.curveCardinalOpen=Pe,t.curveCardinal=Ie,t.curveCatmullRomClosed=Fe,t.curveCatmullRomOpen=Ue,t.curveCatmullRom=Re,t.curveLinearClosed=function(t){return new Ye(t)},t.curveLinear=qt,t.curveMonotoneX=function(t){return new He(t)},t.curveMonotoneY=function(t){return new $e(t)},t.curveNatural=function(t){return new We(t)},t.curveStep=function(t){return new Ke(t,.5)},t.curveStepAfter=function(t){return new Ke(t,1)},t.curveStepBefore=function(t){return new Ke(t,0)},t.stack=function(){var t=Dt([]),e=tn,n=Qe,i=en;function r(r){var o,a,s=t.apply(this,arguments),l=r.length,c=s.length,u=new Array(c);for(o=0;o<c;++o){for(var h,d=s[o],p=u[o]=new Array(l),f=0;f<l;++f)p[f]=h=[0,+i(r[f],d,f,r)],h.data=r[f];p.key=d}for(o=0,a=e(u);o<c;++o)u[a[o]].index=o;return n(u,a),u}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:Dt(Je.call(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:Dt(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?tn:"function"==typeof t?t:Dt(Je.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?Qe:t,r):n},r},t.stackOffsetExpand=function(t,e){if((i=t.length)>0){for(var n,i,r,o=0,a=t[0].length;o<a;++o){for(r=n=0;n<i;++n)r+=t[n][o][1]||0;if(r)for(n=0;n<i;++n)t[n][o][1]/=r}Qe(t,e)}},t.stackOffsetNone=Qe,t.stackOffsetSilhouette=function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],o=r.length;i<o;++i){for(var a=0,s=0;a<n;++a)s+=t[a][i][1]||0;r[i][1]+=r[i][0]=-s/2}Qe(t,e)}},t.stackOffsetWiggle=function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,o=0,a=1;a<i;++a){for(var s=0,l=0,c=0;s<r;++s){for(var u=t[e[s]],h=u[a][1]||0,d=(h-(u[a-1][1]||0))/2,p=0;p<s;++p){var f=t[e[p]];d+=(f[a][1]||0)-(f[a-1][1]||0)}l+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,Qe(t,e)}},t.stackOrderAscending=nn,t.stackOrderDescending=function(t){return nn(t).reverse()},t.stackOrderInsideOut=function(t){var e,n,i=t.length,r=t.map(rn),o=tn(t).sort((function(t,e){return r[e]-r[t]})),a=0,s=0,l=[],c=[];for(e=0;e<i;++e)n=o[e],a<s?(a+=r[n],l.push(n)):(s+=r[n],c.push(n));return c.reverse().concat(l)},t.stackOrderNone=tn,t.stackOrderReverse=function(t){return tn(t).reverse()},t.color=vn,t.rgb=En,t.hsl=kn,t.lab=Fn,t.hcl=qn,t.cubehelix=ni,t.interpolate=ki,t.interpolateArray=gi,t.interpolateDate=_i,t.interpolateNumber=yi,t.interpolateObject=vi,t.interpolateRound=Ci,t.interpolateString=Si,t.interpolateTransformCss=Pi,t.interpolateTransformSvg=zi,t.interpolateZoom=Oi,t.interpolateRgb=di,t.interpolateRgbBasis=fi,t.interpolateRgbBasisClosed=mi,t.interpolateHsl=Bi,t.interpolateHslLong=Ui,t.interpolateLab=function(t,e){var n=hi((t=Fn(t)).l,(e=Fn(e)).l),i=hi(t.a,e.a),r=hi(t.b,e.b),o=hi(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=o(e),t+""}},t.interpolateHcl=ji,t.interpolateHclLong=Vi,t.interpolateCubehelix=qi,t.interpolateCubehelixLong=Hi,t.interpolateBasis=oi,t.interpolateBasisClosed=ai,t.quantize=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n},t.dispatch=Zi,t.dsvFormat=tr,t.csvParse=nr,t.csvParseRows=ir,t.csvFormat=rr,t.csvFormatRows=or,t.tsvParse=sr,t.tsvParseRows=lr,t.tsvFormat=cr,t.tsvFormatRows=ur,t.request=hr,t.html=pr,t.json=fr,t.text=mr,t.xml=gr,t.csv=xr,t.tsv=wr,t.now=Dr,t.timer=zr,t.timerFlush=Nr,t.timeout=Br,t.interval=function(t,e,n){var i=new Pr,r=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?Dr():+n,i.restart((function o(a){a+=r,i.restart(o,r+=e,n),t(a)}),e,n),i)},t.timeInterval=jr,t.timeMillisecond=Vr,t.timeMilliseconds=Gr,t.timeSecond=Xr,t.timeSeconds=Kr,t.timeMinute=Jr,t.timeMinutes=Qr,t.timeHour=to,t.timeHours=eo,t.timeDay=no,t.timeDays=io,t.timeWeek=oo,t.timeWeeks=po,t.timeSunday=oo,t.timeSundays=po,t.timeMonday=ao,t.timeMondays=fo,t.timeTuesday=so,t.timeTuesdays=mo,t.timeWednesday=lo,t.timeWednesdays=go,t.timeThursday=co,t.timeThursdays=_o,t.timeFriday=uo,t.timeFridays=yo,t.timeSaturday=ho,t.timeSaturdays=vo,t.timeMonth=bo,t.timeMonths=xo,t.timeYear=wo,t.timeYears=Eo,t.utcMillisecond=Vr,t.utcMilliseconds=Gr,t.utcSecond=Xr,t.utcSeconds=Kr,t.utcMinute=Mo,t.utcMinutes=To,t.utcHour=So,t.utcHours=ko,t.utcDay=Co,t.utcDays=Io,t.utcWeek=Do,t.utcWeeks=Fo,t.utcSunday=Do,t.utcSundays=Fo,t.utcMonday=Ao,t.utcMondays=Bo,t.utcTuesday=Po,t.utcTuesdays=Uo,t.utcWednesday=zo,t.utcWednesdays=Yo,t.utcThursday=No,t.utcThursdays=jo,t.utcFriday=Ro,t.utcFridays=Vo,t.utcSaturday=Oo,t.utcSaturdays=Go,t.utcMonth=qo,t.utcMonths=Ho,t.utcYear=$o,t.utcYears=Wo,t.formatLocale=aa,t.formatDefaultLocale=sa,t.formatSpecifier=ea,t.precisionFixed=la,t.precisionPrefix=ca,t.precisionRound=ua,t.isoFormat=ms,t.isoParse=gs,t.timeFormatLocale=fa,t.timeFormatDefaultLocale=ps,t.scaleBand=ws,t.scalePoint=function(){return Es(ws().paddingInner(1))},t.scaleIdentity=function t(){var e=[0,1];function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=ys.call(t,Ts),n):e.slice()},n.copy=function(){return t().domain(e)},As(n)},t.scaleLinear=function t(){var e=Ds(ks,yi);return e.copy=function(){return Ls(e,t())},As(e)},t.scaleLog=function e(){var n=Ds(zs,Ns).domain([1,10]),i=n.domain,r=10,o=Fs(10),a=Os(10);function s(){return o=Fs(r),a=Os(r),i()[0]<0&&(o=Bs(o),a=Bs(a)),n}return n.base=function(t){return arguments.length?(r=+t,s()):r},n.domain=function(t){return arguments.length?(i(t),s()):i()},n.ticks=function(t){var e,n=i(),s=n[0],l=n[n.length-1];(e=l<s)&&(d=s,s=l,l=d);var c,u,h,d=o(s),p=o(l),f=null==t?10:+t,m=[];if(!(r%1)&&p-d<f){if(d=Math.round(d)-1,p=Math.round(p)+1,s>0){for(;d<p;++d)for(u=1,c=a(d);u<r;++u)if(!((h=c*u)<s)){if(h>l)break;m.push(h)}}else for(;d<p;++d)for(u=r-1,c=a(d);u>=1;--u)if(!((h=c*u)<s)){if(h>l)break;m.push(h)}}else m=v(d,p,Math.min(p-d,f)).map(a);return e?m.reverse():m},n.tickFormat=function(e,i){if(null==i&&(i=10===r?".0e":","),"function"!=typeof i&&(i=t.format(i)),e===1/0)return i;null==e&&(e=10);var s=Math.max(1,r*e/n.ticks().length);return function(t){var e=t/a(Math.round(o(t)));return e*r<r-.5&&(e*=r),e<=s?i(t):""}},n.nice=function(){return i(Ps(i(),{floor:function(t){return a(Math.floor(o(t)))},ceil:function(t){return a(Math.ceil(o(t)))}}))},n.copy=function(){return Ls(n,e().base(r))},n},t.scaleOrdinal=xs,t.scaleImplicit=bs,t.scalePow=Ys,t.scaleSqrt=function(){return Ys().exponent(.5)},t.scaleQuantile=function t(){var n=[],i=[],o=[];function a(){var t=0,e=Math.max(1,i.length);for(o=new Array(e-1);++t<e;)o[t-1]=w(n,t/e);return s}function s(t){if(!isNaN(t=+t))return i[r(o,t)]}return s.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},s.domain=function(t){if(!arguments.length)return n.slice();n=[];for(var i,r=0,o=t.length;r<o;++r)null==(i=t[r])||isNaN(i=+i)||n.push(i);return n.sort(e),a()},s.range=function(t){return arguments.length?(i=vs.call(t),a()):i.slice()},s.quantiles=function(){return o.slice()},s.copy=function(){return t().domain(n).range(i)},s},t.scaleQuantize=function t(){var e=0,n=1,i=1,o=[.5],a=[0,1];function s(t){if(t<=t)return a[r(o,t,0,i)]}function l(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*n-(t-i)*e)/(i+1);return s}return s.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],l()):[e,n]},s.range=function(t){return arguments.length?(i=(a=vs.call(t)).length-1,l()):a.slice()},s.invertExtent=function(t){var r=a.indexOf(t);return r<0?[NaN,NaN]:r<1?[e,o[0]]:r>=i?[o[i-1],n]:[o[r-1],o[r]]},s.copy=function(){return t().domain([e,n]).range(a)},As(s)},t.scaleThreshold=function t(){var e=[.5],n=[0,1],i=1;function o(t){if(t<=t)return n[r(e,t,0,i)]}return o.domain=function(t){return arguments.length?(e=vs.call(t),i=Math.min(e.length,n.length-1),o):e.slice()},o.range=function(t){return arguments.length?(n=vs.call(t),i=Math.min(e.length,n.length-1),o):n.slice()},o.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},o.copy=function(){return t().domain(e).range(n)},o},t.scaleTime=function(){return Xs(wo,bo,oo,no,to,Jr,Xr,Vr,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},t.scaleUtc=function(){return Xs($o,qo,Do,Co,So,Mo,Xr,Vr,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},t.schemeCategory10=Js,t.schemeCategory20b=Qs,t.schemeCategory20c=tl,t.schemeCategory20=el,t.scaleSequential=function t(e){var n=0,i=1,r=!1;function o(t){var o=(t-n)/(i-n);return e(r?Math.max(0,Math.min(1,o)):o)}return o.domain=function(t){return arguments.length?(n=+t[0],i=+t[1],o):[n,i]},o.clamp=function(t){return arguments.length?(r=!!t,o):r},o.interpolator=function(t){return arguments.length?(e=t,o):e},o.copy=function(){return t(e).domain([n,i]).clamp(r)},As(o)},t.interpolateCubehelixDefault=nl,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ol.h=360*t-100,ol.s=1.5-1.5*e,ol.l=.8-.9*e,ol+""},t.interpolateWarm=il,t.interpolateCool=rl,t.interpolateViridis=sl,t.interpolateMagma=ll,t.interpolateInferno=cl,t.interpolatePlasma=ul,t.creator=gl,t.customEvent=Ll,t.local=yl,t.matcher=El,t.mouse=Pl,t.namespace=pl,t.namespaces=dl,t.select=Sc,t.selectAll=function(t){return"string"==typeof t?new Mc([document.querySelectorAll(t)],[document.documentElement]):new Mc([null==t?[]:t],Ec)},t.selection=Tc,t.selector=Nl,t.selectorAll=Ol,t.touch=kc,t.touches=function(t,e){null==e&&(e=Dl().touches);for(var n=0,i=e?e.length:0,r=new Array(i);n<i;++n)r[n]=Al(t,e[n]);return r},t.window=Wl,t.active=function(t,e){var n,i,r=t.__transition;if(r)for(i in e=null==e?null:e+"",r)if((n=r[i]).state>1&&n.name===e)return new nu([[t]],lu,e,+i);return null},t.interrupt=zc,t.transition=iu,t.axisTop=function(t){return gu(1,t)},t.axisRight=function(t){return gu(2,t)},t.axisBottom=function(t){return gu(3,t)},t.axisLeft=function(t){return gu(4,t)},t.cluster=function(){var t=_u,e=1,n=1,i=!1;function r(r){var o,a=0;r.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(yu,0)/t.length}(n),e.y=function(t){return 1+t.reduce(vu,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(r),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),c=s.x-t(s,l)/2,u=l.x+t(l,s)/2;return r.eachAfter(i?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-c)/(u-c)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},t.hierarchy=bu,t.pack=function(){var t=null,e=1,n=1,i=Ru;function r(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(Bu(t)).eachAfter(Uu(i,.5)).eachBefore(Yu(1)):r.eachBefore(Bu(Fu)).eachAfter(Uu(Ru,1)).eachAfter(Uu(i,r.r/Math.min(e,n))).eachBefore(Yu(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=zu(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(i="function"==typeof t?t:Ou(+t),r):i},r},t.packSiblings=function(t){return Pu(t),t},t.packEnclose=Su,t.partition=function(){var t=1,e=1,n=0,i=!1;function r(r){var o=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/o,r.eachBefore(function(t,e){return function(i){i.children&&Vu(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var r=i.x0,o=i.y0,a=i.x1-n,s=i.y1-n;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),i.x0=r,i.y0=o,i.x1=a,i.y1=s}}(e,o)),i&&r.eachBefore(ju),r}return r.round=function(t){return arguments.length?(i=!!t,r):i},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r},t.stratify=function(){var t=Hu,e=$u;function n(n){var i,r,o,a,s,l,c,u=n.length,h=new Array(u),d={};for(r=0;r<u;++r)i=n[r],s=h[r]=new Mu(i),null!=(l=t(i,r,n))&&(l+="")&&(d[c="$"+(s.id=l)]=c in d?qu:s);for(r=0;r<u;++r)if(s=h[r],null!=(l=e(n[r],r,n))&&(l+="")){if(!(a=d["$"+l]))throw new Error("missing: "+l);if(a===qu)throw new Error("ambiguous: "+l);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=Gu,o.eachBefore((function(t){t.depth=t.parent.depth+1,--u})).eachBefore(Eu),o.parent=null,u>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=Nu(e),n):t},n.parentId=function(t){return arguments.length?(e=Nu(t),n):e},n},t.tree=function(){var t=Zu,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,o,a=new Qu(t,0),s=[a];e=s.pop();)if(i=e._.children)for(e.children=new Array(o=i.length),r=o-1;r>=0;--r)s.push(n=e.children[r]=new Qu(i[r],r)),n.parent=e;return(a.parent=new Qu(null,0)).children=[a],a}(r);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),i)r.eachBefore(s);else{var c=r,u=r,h=r;r.eachBefore((function(t){t.x<c.x&&(c=t),t.x>u.x&&(u=t),t.depth>h.depth&&(h=t)}));var d=c===u?1:t(c,u)/2,p=d-c.x,f=e/(u.x+d+p),m=n/(h.depth||1);r.eachBefore((function(t){t.x=(t.x+p)*f,t.y=t.depth*m}))}return r}function o(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,o=e,a=e,s=n,l=o.parent.children[0],c=o.m,u=a.m,h=s.m,d=l.m;s=Xu(s),o=Wu(o),s&&o;)l=Wu(l),(a=Xu(a)).a=e,(r=s.z+h-o.z-c+t(s._,o._))>0&&(Ku(Ju(s,e,i),e,r),c+=r,u+=r),h+=s.m,c+=o.m,d+=l.m,u+=a.m;s&&!Xu(a)&&(a.t=s,a.m+=h-u),o&&!Wu(l)&&(l.t=o,l.m+=c-d,i=e)}return i}(e,r,e.parent.A||i[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},t.treemap=function(){var t=ih,e=!1,n=1,i=1,r=[0],o=Ru,a=Ru,s=Ru,l=Ru,c=Ru;function u(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(h),r=[0],e&&t.eachBefore(ju),t}function h(e){var n=r[e.depth],i=e.x0+n,u=e.y0+n,h=e.x1-n,d=e.y1-n;h<i&&(i=h=(i+h)/2),d<u&&(u=d=(u+d)/2),e.x0=i,e.y0=u,e.x1=h,e.y1=d,e.children&&(n=r[e.depth+1]=o(e)/2,i+=c(e)-n,u+=a(e)-n,(h-=s(e)-n)<i&&(i=h=(i+h)/2),(d-=l(e)-n)<u&&(u=d=(u+d)/2),t(e,i,u,h,d))}return u.round=function(t){return arguments.length?(e=!!t,u):e},u.size=function(t){return arguments.length?(n=+t[0],i=+t[1],u):[n,i]},u.tile=function(e){return arguments.length?(t=Nu(e),u):t},u.padding=function(t){return arguments.length?u.paddingInner(t).paddingOuter(t):u.paddingInner()},u.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Ou(+t),u):o},u.paddingOuter=function(t){return arguments.length?u.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):u.paddingTop()},u.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Ou(+t),u):a},u.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Ou(+t),u):s},u.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Ou(+t),u):l},u.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Ou(+t),u):c},u},t.treemapBinary=function(t,e,n,i,r){var o,a,s=t.children,l=s.length,c=new Array(l+1);for(c[0]=a=o=0;o<l;++o)c[o+1]=a+=s[o].value;!function t(e,n,i,r,o,a,l){if(e>=n-1){var u=s[e];return u.x0=r,u.y0=o,u.x1=a,void(u.y1=l)}for(var h=c[e],d=i/2+h,p=e+1,f=n-1;p<f;){var m=p+f>>>1;c[m]<d?p=m+1:f=m}var g=c[p]-h,_=i-g;if(l-o>a-r){var y=(o*_+l*g)/i;t(e,p,g,r,o,a,y),t(p,n,_,r,y,a,l)}else{var v=(r*_+a*g)/i;t(e,p,g,r,o,v,l),t(p,n,_,v,o,a,l)}}(0,l,t.value,e,n,i,r)},t.treemapDice=Vu,t.treemapSlice=th,t.treemapSliceDice=function(t,e,n,i,r){(1&t.depth?th:Vu)(t,e,n,i,r)},t.treemapSquarify=ih,t.treemapResquarify=rh,t.forceCenter=function(t,e){var n;function i(){var i,r,o=n.length,a=0,s=0;for(i=0;i<o;++i)a+=(r=n[i]).x,s+=r.y;for(a=a/o-t,s=s/o-e,i=0;i<o;++i)(r=n[i]).x-=a,r.y-=s}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i},t.forceCollide=function(t){var e,n,i=1,r=1;function o(){for(var t,o,s,l,c,u,h,d=e.length,p=0;p<r;++p)for(o=vt(e,sh,lh).visitAfter(a),t=0;t<d;++t)s=e[t],u=n[t],h=u*u,l=s.x+s.vx,c=s.y+s.vy,o.visit(f);function f(e,n,r,o,a){var d=e.data,p=e.r,f=u+p;if(!d)return n>l+f||o<l-f||r>c+f||a<c-f;if(d.index>t){var m=l-d.x-d.vx,g=c-d.y-d.vy,_=m*m+g*g;_<f*f&&(0===m&&(_+=(m=ah())*m),0===g&&(_+=(g=ah())*g),_=(f-(_=Math.sqrt(_)))/_*i,s.vx+=(m*=_)*(f=(p*=p)/(h+p)),s.vy+=(g*=_)*f,d.vx-=m*(f=1-f),d.vy-=g*f)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var i,r=e.length;for(n=new Array(r),i=0;i<r;++i)n[i]=+t(e[i],i,e)}}return"function"!=typeof t&&(t=oh(null==t?1:+t)),o.initialize=function(t){e=t,s()},o.iterations=function(t){return arguments.length?(r=+t,o):r},o.strength=function(t){return arguments.length?(i=+t,o):i},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:oh(+e),s(),o):t},o},t.forceLink=function(t){var e,n,i,r,o,a=ch,s=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},l=oh(30),c=1;function u(i){for(var r=0,a=t.length;r<c;++r)for(var s,l,u,h,d,p,f,m=0;m<a;++m)l=(s=t[m]).source,h=(u=s.target).x+u.vx-l.x-l.vx||ah(),d=u.y+u.vy-l.y-l.vy||ah(),h*=p=((p=Math.sqrt(h*h+d*d))-n[m])/p*i*e[m],d*=p,u.vx-=h*(f=o[m]),u.vy-=d*f,l.vx+=h*(f=1-f),l.vy+=d*f}function h(){if(i){var s,l,c=i.length,u=t.length,h=I(i,a);for(s=0,r=new Array(c);s<c;++s)r[s]=0;for(s=0;s<u;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=uh(h,l.source)),"object"!=typeof l.target&&(l.target=uh(h,l.target)),++r[l.source.index],++r[l.target.index];for(s=0,o=new Array(u);s<u;++s)l=t[s],o[s]=r[l.source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(u),d(),n=new Array(u),p()}}function d(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+s(t[n],n,t)}function p(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+l(t[e],e,t)}return null==t&&(t=[]),u.initialize=function(t){i=t,h()},u.links=function(e){return arguments.length?(t=e,h(),u):t},u.id=function(t){return arguments.length?(a=t,u):a},u.iterations=function(t){return arguments.length?(c=+t,u):c},u.strength=function(t){return arguments.length?(s="function"==typeof t?t:oh(+t),d(),u):s},u.distance=function(t){return arguments.length?(l="function"==typeof t?t:oh(+t),p(),u):l},u},t.forceManyBody=function(){var t,e,n,i,r=oh(-30),o=1,a=1/0,s=.81;function l(i){var r,o=t.length,a=vt(t,hh,dh).visitAfter(u);for(n=i,r=0;r<o;++r)e=t[r],a.visit(h)}function c(){if(t){var e,n=t.length;for(i=new Array(n),e=0;e<n;++e)i[e]=+r(t[e],e,t)}}function u(t){var e,n,r,o,a,s=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=e.value)&&(s+=n,r+=n*e.x,o+=n*e.y);t.x=r/s,t.y=o/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,r,l,c){if(!t.value)return!0;var u=t.x-e.x,h=t.y-e.y,d=c-r,p=u*u+h*h;if(d*d/s<p)return p<a&&(0===u&&(p+=(u=ah())*u),0===h&&(p+=(h=ah())*h),p<o&&(p=Math.sqrt(o*p)),e.vx+=u*t.value*n/p,e.vy+=h*t.value*n/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===u&&(p+=(u=ah())*u),0===h&&(p+=(h=ah())*h),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(d=i[t.data.index]*n/p,e.vx+=u*d,e.vy+=h*d)}while(t=t.next)}}return l.initialize=function(e){t=e,c()},l.strength=function(t){return arguments.length?(r="function"==typeof t?t:oh(+t),c(),l):r},l.distanceMin=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.distanceMax=function(t){return arguments.length?(a=t*t,l):Math.sqrt(a)},l.theta=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l},t.forceSimulation=function(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=I(),l=zr(u),c=Zi("tick","end");function u(){h(),c.call("tick",e),n<i&&(l.stop(),c.call("end",e))}function h(){var e,i,l=t.length;for(n+=(o-n)*r,s.each((function(t){t(n)})),e=0;e<l;++e)null==(i=t[e]).fx?i.x+=i.vx*=a:(i.x=i.fx,i.vx=0),null==i.fy?i.y+=i.vy*=a:(i.y=i.fy,i.vy=0)}function d(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(n),o=n*ph;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:h,restart:function(){return l.restart(u),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),s.each(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?s.remove(t):s.set(t,p(n)),e):s.get(t)},find:function(e,n,i){var r,o,a,s,l,c=0,u=t.length;for(null==i?i=1/0:i*=i,c=0;c<u;++c)(a=(r=e-(s=t[c]).x)*r+(o=n-s.y)*o)<i&&(l=s,i=a);return l},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}},t.forceX=function(t){var e,n,i,r=oh(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vx+=(i[o]-r.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=oh(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:oh(+t),a(),o):r},o.x=function(e){return arguments.length?(t="function"==typeof e?e:oh(+e),a(),o):t},o},t.forceY=function(t){var e,n,i,r=oh(.1);function o(t){for(var r,o=0,a=e.length;o<a;++o)(r=e[o]).vy+=(i[o]-r.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),i=new Array(a),o=0;o<a;++o)n[o]=isNaN(i[o]=+t(e[o],o,e))?0:+r(e[o],o,e)}}return"function"!=typeof t&&(t=oh(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(r="function"==typeof t?t:oh(+t),a(),o):r},o.y=function(e){return arguments.length?(t="function"==typeof e?e:oh(+e),a(),o):t},o},t.drag=function(){var e,n,i=bh,r=xh,o=wh,a={},s=Zi("start","drag","end"),l=0;function c(t){t.on("mousedown.drag",u).on("touchstart.drag",p).on("touchmove.drag",f).on("touchend.drag touchcancel.drag",m).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){if(!n&&i.apply(this,arguments)){var o=g("mouse",r.apply(this,arguments),Pl,this,arguments);o&&(Sc(t.event.view).on("mousemove.drag",h,!0).on("mouseup.drag",d,!0),gh(t.event.view),fh(),e=!1,o("start"))}}function h(){mh(),e=!0,a.mouse("drag")}function d(){Sc(t.event.view).on("mousemove.drag mouseup.drag",null),_h(t.event.view,e),mh(),a.mouse("end")}function p(){if(i.apply(this,arguments)){var e,n,o=t.event.changedTouches,a=r.apply(this,arguments),s=o.length;for(e=0;e<s;++e)(n=g(o[e].identifier,a,kc,this,arguments))&&(fh(),n("start"))}}function f(){var e,n,i=t.event.changedTouches,r=i.length;for(e=0;e<r;++e)(n=a[i[e].identifier])&&(mh(),n("drag"))}function m(){var e,i,r=t.event.changedTouches,o=r.length;for(n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),e=0;e<o;++e)(i=a[r[e].identifier])&&(fh(),i("end"))}function g(e,n,i,r,u){var h,d,p,f=i(n,e),m=s.copy();if(Ll(new vh(c,"beforestart",h,e,l,f[0],f[1],0,0,m),(function(){return null!=(t.event.subject=h=o.apply(r,u))&&(d=h.x-f[0]||0,p=h.y-f[1]||0,!0)})))return function t(o){var s,g=f;switch(o){case"start":a[e]=t,s=l++;break;case"end":delete a[e],--l;case"drag":f=i(n,e),s=l}Ll(new vh(c,o,h,e,s,f[0]+d,f[1]+p,f[0]-g[0],f[1]-g[1],m),m.apply,m,[o,r,u])}}return c.filter=function(t){return arguments.length?(i="function"==typeof t?t:yh(!!t),c):i},c.container=function(t){return arguments.length?(r="function"==typeof t?t:yh(t),c):r},c.subject=function(t){return arguments.length?(o="function"==typeof t?t:yh(t),c):o},c.on=function(){var t=s.on.apply(s,arguments);return t===s?c:t},c},t.dragDisable=gh,t.dragEnable=_h,t.voronoi=function(){var t=Mh,e=Th,n=null;function i(i){return new ad(i.map((function(n,r){var o=[Math.round(t(n,r,i)/nd)*nd,Math.round(e(n,r,i)/nd)*nd];return o.index=r,o.data=n,o})),n)}return i.polygons=function(t){return i(t).polygons()},i.links=function(t){return i(t).links()},i.triangles=function(t){return i(t).triangles()},i.x=function(e){return arguments.length?(t="function"==typeof e?e:Eh(+e),i):t},i.y=function(t){return arguments.length?(e="function"==typeof t?t:Eh(+t),i):e},i.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i},t.zoom=function(){var e,n,i=fd,r=md,o=0,a=1/0,s=-a,l=a,c=s,u=l,h=250,d=[],p=Zi("start","zoom","end"),f=500;function m(t){t.on("wheel.zoom",E).on("mousedown.zoom",M).on("dblclick.zoom",T).on("touchstart.zoom",S).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",gd)}function g(t,e){return(e=Math.max(o,Math.min(a,e)))===t.k?t:new cd(e,t.x,t.y)}function _(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new cd(t.k,i,r)}function y(t,e){var n=Math.min(0,t.invertX(e[0][0])-s)||Math.max(0,t.invertX(e[1][0])-l),i=Math.min(0,t.invertY(e[0][1])-c)||Math.max(0,t.invertY(e[1][1])-u);return n||i?t.translate(n,i):t}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function b(t,e,n){t.on("start.zoom",(function(){x(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,o=x(t,i),a=r.apply(t,i),s=n||v(a),l=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,u="function"==typeof e?e.apply(t,i):e,h=Oi(c.invert(s).concat(l/c.k),u.invert(s).concat(l/u.k));return function(t){if(1===t)t=u;else{var e=h(t),n=l/e[2];t=new cd(n,s[0]-e[0]*n,s[1]-e[1]*n)}o.zoom(null,t)}}))}function x(t,e){for(var n,i=0,r=d.length;i<r;++i)if((n=d[i]).that===t)return n;return new w(t,e)}function w(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=r.apply(t,e)}function E(){if(i.apply(this,arguments)){var e=x(this,arguments),n=this.__zoom,r=Math.max(o,Math.min(a,n.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),s=Pl(this);if(e.wheel)e.mouse[0][0]===s[0]&&e.mouse[0][1]===s[1]||(e.mouse[1]=n.invert(e.mouse[0]=s)),clearTimeout(e.wheel);else{if(n.k===r)return;e.mouse=[s,n.invert(s)],zc(this),e.start()}pd(),e.wheel=setTimeout(l,150),e.zoom("mouse",y(_(g(n,r),e.mouse[0],e.mouse[1]),e.extent))}function l(){e.wheel=null,e.end()}}function M(){if(!n&&i.apply(this,arguments)){var e=x(this,arguments),r=Sc(t.event.view).on("mousemove.zoom",a,!0).on("mouseup.zoom",s,!0),o=Pl(this);gh(t.event.view),dd(),e.mouse=[o,this.__zoom.invert(o)],zc(this),e.start()}function a(){pd(),e.moved=!0,e.zoom("mouse",y(_(e.that.__zoom,e.mouse[0]=Pl(e.that),e.mouse[1]),e.extent))}function s(){r.on("mousemove.zoom mouseup.zoom",null),_h(t.event.view,e.moved),pd(),e.end()}}function T(){if(i.apply(this,arguments)){var e=this.__zoom,n=Pl(this),o=e.invert(n),a=y(_(g(e,e.k*(t.event.shiftKey?.5:2)),n,o),r.apply(this,arguments));pd(),h>0?Sc(this).transition().duration(h).call(b,a,n):Sc(this).call(m.transform,a)}}function S(){if(i.apply(this,arguments)){var n,r,o,a=x(this,arguments),s=t.event.changedTouches,l=s.length;for(dd(),n=0;n<l;++n)r=s[n],o=[o=kc(this,s,r.identifier),this.__zoom.invert(o),r.identifier],a.touch0?a.touch1||(a.touch1=o):a.touch0=o;if(e&&(e=clearTimeout(e),!a.touch1))return a.end(),T.apply(this,arguments);t.event.touches.length===l&&(e=setTimeout((function(){e=null}),f),zc(this),a.start())}}function k(){var n,i,r,o,a=x(this,arguments),s=t.event.changedTouches,l=s.length;for(pd(),e&&(e=clearTimeout(e)),n=0;n<l;++n)i=s[n],r=kc(this,s,i.identifier),a.touch0&&a.touch0[2]===i.identifier?a.touch0[0]=r:a.touch1&&a.touch1[2]===i.identifier&&(a.touch1[0]=r);if(i=a.that.__zoom,a.touch1){var c=a.touch0[0],u=a.touch0[1],h=a.touch1[0],d=a.touch1[1],p=(p=h[0]-c[0])*p+(p=h[1]-c[1])*p,f=(f=d[0]-u[0])*f+(f=d[1]-u[1])*f;i=g(i,Math.sqrt(p/f)),r=[(c[0]+h[0])/2,(c[1]+h[1])/2],o=[(u[0]+d[0])/2,(u[1]+d[1])/2]}else{if(!a.touch0)return;r=a.touch0[0],o=a.touch0[1]}a.zoom("touch",y(_(i,r,o),a.extent))}function C(){var e,i,r=x(this,arguments),o=t.event.changedTouches,a=o.length;for(dd(),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),e=0;e<a;++e)i=o[e],r.touch0&&r.touch0[2]===i.identifier?delete r.touch0:r.touch1&&r.touch1[2]===i.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0||r.end()}return m.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",gd),t!==n?b(t,e):n.interrupt().each((function(){x(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},m.scaleBy=function(t,e){m.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}))},m.scaleTo=function(t,e){m.transform(t,(function(){var t=r.apply(this,arguments),n=this.__zoom,i=v(t),o=n.invert(i);return y(_(g(n,"function"==typeof e?e.apply(this,arguments):e),i,o),t)}))},m.translateBy=function(t,e,n){m.transform(t,(function(){return y(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments))}))},w.prototype={start:function(){return 1==++this.active&&(this.index=d.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(d.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Ll(new ld(m,t,this.that.__zoom),p.apply,p,[t,this.that,this.args])}},m.filter=function(t){return arguments.length?(i="function"==typeof t?t:sd(!!t),m):i},m.extent=function(t){return arguments.length?(r="function"==typeof t?t:sd([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):r},m.scaleExtent=function(t){return arguments.length?(o=+t[0],a=+t[1],m):[o,a]},m.translateExtent=function(t){return arguments.length?(s=+t[0][0],l=+t[1][0],c=+t[0][1],u=+t[1][1],m):[[s,c],[l,u]]},m.duration=function(t){return arguments.length?(h=+t,m):h},m.on=function(){var t=p.on.apply(p,arguments);return t===p?m:t},m},t.zoomIdentity=ud,t.zoomTransform=hd,t.brush=function(){return Fd(kd)},t.brushX=function(){return Fd(Td)},t.brushY=function(){return Fd(Sd)},t.brushSelection=function(t){var e=t.__brush;return e?e.dim.output(e.selection):null},t.chord=function(){var t=0,e=null,n=null,i=null;function r(r){var o,a,s,l,c,u,h=r.length,d=[],p=m(h),f=[],g=[],_=g.groups=new Array(h),y=new Array(h*h);for(o=0,c=-1;++c<h;){for(a=0,u=-1;++u<h;)a+=r[c][u];d.push(a),f.push(m(h)),o+=a}for(e&&p.sort((function(t,n){return e(d[t],d[n])})),n&&f.forEach((function(t,e){t.sort((function(t,i){return n(r[e][t],r[e][i])}))})),l=(o=Gd(0,Vd-t*h)/o)?t:Vd/h,a=0,c=-1;++c<h;){for(s=a,u=-1;++u<h;){var v=p[c],b=f[v][u],x=r[v][b],w=a,E=a+=x*o;y[b*h+v]={index:v,subindex:b,startAngle:w,endAngle:E,value:x}}_[v]={index:v,startAngle:s,endAngle:a,value:d[v]},a+=l}for(c=-1;++c<h;)for(u=c-1;++u<h;){var M=y[u*h+c],T=y[c*h+u];(M.value||T.value)&&g.push(M.value<T.value?{source:T,target:M}:{source:M,target:T})}return i?g.sort(i):g}return r.padAngle=function(e){return arguments.length?(t=Gd(0,e),r):t},r.sortGroups=function(t){return arguments.length?(e=t,r):e},r.sortSubgroups=function(t){return arguments.length?(n=t,r):n},r.sortChords=function(t){return arguments.length?(null==t?i=null:(i=qd(t))._=t,r):i&&i._},r},t.ribbon=function(){var t=Zd,e=Wd,n=Xd,i=Kd,r=Jd,o=null;function a(){var a,s=Hd.call(arguments),l=t.apply(this,s),c=e.apply(this,s),u=+n.apply(this,(s[0]=l,s)),h=i.apply(this,s)-jd,d=r.apply(this,s)-jd,p=u*Bd(h),f=u*Ud(h),m=+n.apply(this,(s[0]=c,s)),g=i.apply(this,s)-jd,_=r.apply(this,s)-jd;if(o||(o=a=ft()),o.moveTo(p,f),o.arc(0,0,u,h,d),h===g&&d===_||(o.quadraticCurveTo(0,0,m*Bd(g),m*Ud(g)),o.arc(0,0,m,g,_)),o.quadraticCurveTo(0,0,p,f),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(n="function"==typeof t?t:$d(+t),a):n},a.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:$d(+t),a):i},a.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:$d(+t),a):r},a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(t){return arguments.length?(e=t,a):e},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a},t.geoAlbers=Dg,t.geoAlbersUsa=function(){var t,e,n,i,r,o,a=Dg(),s=Lg().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Lg().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function u(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(i.point(e,a),o)||(r.point(e,a),o)}function h(){return t=e=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?s:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:a).invert(t)},u.stream=function(n){return t&&e===n?t:(i=[a.stream(e=n),s.stream(n),l.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},u.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),l.precision(t),h()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),l.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],u=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,u-.238*e],[o+.455*e,u+.238*e]]).stream(c),i=s.translate([o-.307*e,u+.201*e]).clipExtent([[o-.425*e+ip,u+.12*e+ip],[o-.214*e-ip,u+.234*e-ip]]).stream(c),r=l.translate([o-.205*e,u+.212*e]).clipExtent([[o-.214*e+ip,u+.166*e+ip],[o-.115*e-ip,u+.234*e-ip]]).stream(c),h()},u.fitExtent=function(t,e){return xg(u,t,e)},u.fitSize=function(t,e){return wg(u,t,e)},u.scale(1070)},t.geoArea=function(t){return Fp.reset(),Rp(t,Bp),2*Fp},t.geoAzimuthalEqualArea=function(){return Sg(zg).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=zg,t.geoAzimuthalEquidistant=function(){return Sg(Ng).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Ng,t.geoBounds=function(t){var e,n,i,r,o,a,s;if($p=Hp=-(Gp=qp=1/0),af=[],Rp(t,cf),n=af.length){for(af.sort(yf),e=1,o=[i=af[0]];e<n;++e)vf(i,(r=af[e])[0])||vf(i,r[1])?(_f(i[0],r[1])>_f(i[0],i[1])&&(i[1]=r[1]),_f(r[0],i[1])>_f(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(s=_f(i[1],r[0]))>a&&(a=s,Gp=r[0],Hp=i[1])}return af=sf=null,Gp===1/0||qp===1/0?[[NaN,NaN],[NaN,NaN]]:[[Gp,qp],[Hp,$p]]},t.geoCentroid=function(t){bf=xf=wf=Ef=Mf=Tf=Sf=kf=Cf=If=Lf=0,Rp(t,Rf);var e=Cf,n=If,i=Lf,r=e*e+n*n+i*i;return r<1e-12&&(e=Tf,n=Sf,i=kf,xf<ip&&(e=wf,n=Ef,i=Mf),(r=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[dp(n,e)*lp,Ep(i/bp(r))*lp]},t.geoCircle=function(){var t,e,n=$f([0,0]),i=$f(90),r=$f(6),o={point:function(n,i){t.push(n=e(n,i)),n[0]*=lp,n[1]*=lp}};function a(){var a=n.apply(this,arguments),s=i.apply(this,arguments)*cp,l=r.apply(this,arguments)*cp;return t=[],e=Xf(-a[0]*cp,-a[1]*cp,0).invert,tm(o,s,l,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:$f([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(i="function"==typeof t?t:$f(+t),a):i},a.precision=function(t){return arguments.length?(r="function"==typeof t?t:$f(+t),a):r},a},t.geoClipExtent=function(){var t,e,n,i=0,r=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=cm(i,r,o,a)(e=n)},extent:function(s){return arguments.length?(i=+s[0][0],r=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[i,r],[o,a]]}}},t.geoConicConformal=function(){return Cg(Bg).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Bg,t.geoConicEqualArea=Lg,t.geoConicEqualAreaRaw=Ig,t.geoConicEquidistant=function(){return Cg(Yg).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Yg,t.geoDistance=function(t,e){return vm[0]=t,vm[1]=e,ym(bm)},t.geoEquirectangular=function(){return Sg(Ug).scale(152.63)},t.geoEquirectangularRaw=Ug,t.geoGnomonic=function(){return Sg(jg).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=jg,t.geoGraticule=Em,t.geoGraticule10=function(){return Em()()},t.geoIdentity=function(){var t,e,n,i,r,o,a=1,s=0,l=0,c=Cm,u=null,h=Cm;function d(){return i=r=null,o}return o={stream:function(t){return i&&r===t?i:i=c(h(r=t))},clipExtent:function(i){return arguments.length?(h=null==i?(u=t=e=n=null,Cm):cm(u=+i[0][0],t=+i[0][1],e=+i[1][0],n=+i[1][1]),d()):null==u?null:[[u,t],[e,n]]},scale:function(t){return arguments.length?(c=Vg(a=+t,s,l),d()):a},translate:function(t){return arguments.length?(c=Vg(a,s=+t[0],l=+t[1]),d()):[s,l]},fitExtent:function(t,e){return xg(o,t,e)},fitSize:function(t,e){return wg(o,t,e)}}},t.geoInterpolate=function(t,e){var n=t[0]*cp,i=t[1]*cp,r=e[0]*cp,o=e[1]*cp,a=pp(i),s=yp(i),l=pp(o),c=yp(o),u=a*pp(n),h=a*yp(n),d=l*pp(r),p=l*yp(r),f=2*Ep(bp(Mp(o-i)+a*l*Mp(r-n))),m=yp(f),g=f?function(t){var e=yp(t*=f)/m,n=yp(f-t)/m,i=n*u+e*d,r=n*h+e*p,o=n*s+e*c;return[dp(r,i)*lp,dp(o,bp(i*i+r*r))*lp]}:function(){return[n*lp,i*lp]};return g.distance=f,g},t.geoLength=ym,t.geoMercator=function(){return Og(Rg).scale(961/sp)},t.geoMercatorRaw=Rg,t.geoOrthographic=function(){return Sg(Gg).scale(249.5).clipAngle(90.000001)},t.geoOrthographicRaw=Gg,t.geoPath=function(t,e){var n,i,r=4.5;function o(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),Rp(t,n(i))),i.result()}return o.area=function(t){return Rp(t,n(Dm)),Dm.result()},o.bounds=function(t){return Rp(t,n(Um)),Um.result()},o.centroid=function(t){return Rp(t,n(tg)),tg.result()},o.projection=function(e){return arguments.length?(n=null==(t=e)?Cm:e.stream,o):t},o.context=function(t){return arguments.length?(i=null==(e=t)?new hg:new ug(t),"function"!=typeof r&&i.pointRadius(r),o):e},o.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),o):r},o.projection(t).context(e)},t.geoProjection=Sg,t.geoProjectionMutator=kg,t.geoRotation=function(t){function e(e){return(e=t(e[0]*cp,e[1]*cp))[0]*=lp,e[1]*=lp,e}return t=Xf(t[0]*cp,t[1]*cp,t.length>2?t[2]*cp:0),e.invert=function(e){return(e=t.invert(e[0]*cp,e[1]*cp))[0]*=lp,e[1]*=lp,e},e},t.geoStereographic=function(){return Sg(qg).scale(250).clipAngle(142)},t.geoStereographicRaw=qg,t.geoStream=Rp,t.geoTransform=function(t){return{stream:vg(t)}},t.geoTransverseMercator=function(){var t=Og(Hg),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=Hg,Object.defineProperty(t,"__esModule",{value:!0})}(e)},9435:t=>{var e=1e3,n=60*e,i=60*n,r=24*i;function o(t,e,n,i){var r=e>=1.5*n;return Math.round(t/n)+" "+i+(r?"s":"")}t.exports=function(t,a){a=a||{};var s,l,c=typeof t;if("string"===c&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===c&&isFinite(t))return a.long?(s=t,(l=Math.abs(s))>=r?o(s,l,r,"day"):l>=i?o(s,l,i,"hour"):l>=n?o(s,l,n,"minute"):l>=e?o(s,l,e,"second"):s+" ms"):function(t){var o=Math.abs(t);return o>=r?Math.round(t/r)+"d":o>=i?Math.round(t/i)+"h":o>=n?Math.round(t/n)+"m":o>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},1227:(t,e,n)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(i++,"%c"===t&&(r=i))})),e.splice(r,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=n(2447)(e);const{formatters:i}=t.exports;i.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},2447:(t,e,n)=>{t.exports=function(t){function e(t){let n,r,o,a=null;function s(...t){if(!s.enabled)return;const i=s,r=Number(new Date),o=r-(n||r);i.diff=o,i.prev=n,i.curr=r,n=r,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((n,r)=>{if("%%"===n)return"%";a++;const o=e.formatters[r];if("function"==typeof o){const e=t[a];n=o.call(i,e),t.splice(a,1),a--}return n})),e.formatArgs.call(i,t),(i.log||e.log).apply(i,t)}return s.namespace=t,s.useColors=e.useColors(),s.color=e.selectColor(t),s.extend=i,s.destroy=e.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(r!==e.namespaces&&(r=e.namespaces,o=e.enabled(t)),o),set:t=>{a=t}}),"function"==typeof e.init&&e.init(s),s}function i(t,n){const i=e(this.namespace+(void 0===n?":":n)+t);return i.log=this.log,i}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const i=("string"==typeof t?t:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(t=i[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,i;for(n=0,i=e.skips.length;n<i;n++)if(e.skips[n].test(t))return!1;for(n=0,i=e.names.length;n<i;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(9435),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.enable(e.load()),e}},251:(t,e,n)=>{var i=n(2215),r=n(2584),o=n(609),a=n(8420),s=n(2847),l=n(8923),c=Date.prototype.getTime;function u(t){return null==t}function h(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}t.exports=function t(e,n,d){var p=d||{};return!!(p.strict?o(e,n):e===n)||(!e||!n||"object"!=typeof e&&"object"!=typeof n?p.strict?o(e,n):e==n:function(e,n,o){var d,p;if(typeof e!=typeof n)return!1;if(u(e)||u(n))return!1;if(e.prototype!==n.prototype)return!1;if(r(e)!==r(n))return!1;var f=a(e),m=a(n);if(f!==m)return!1;if(f||m)return e.source===n.source&&s(e)===s(n);if(l(e)&&l(n))return c.call(e)===c.call(n);var g=h(e),_=h(n);if(g!==_)return!1;if(g||_){if(e.length!==n.length)return!1;for(d=0;d<e.length;d++)if(e[d]!==n[d])return!1;return!0}if(typeof e!=typeof n)return!1;try{var y=i(e),v=i(n)}catch(t){return!1}if(y.length!==v.length)return!1;for(y.sort(),v.sort(),d=y.length-1;d>=0;d--)if(y[d]!=v[d])return!1;for(d=y.length-1;d>=0;d--)if(!t(e[p=y[d]],n[p],o))return!1;return!0}(e,n,p))}},4289:(t,e,n)=>{"use strict";var i=n(2215),r="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,l=s&&function(){var t={};try{for(var e in s(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,n,i){var r;(!(e in t)||"function"==typeof(r=i)&&"[object Function]"===o.call(r)&&i())&&(l?s(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},u=function(t,e){var n=arguments.length>2?arguments[2]:{},o=i(e);r&&(o=a.call(o,Object.getOwnPropertySymbols(e)));for(var s=0;s<o.length;s+=1)c(t,o[s],e[o[s]],n[o[s]])};u.supportsDescriptors=!!l,t.exports=u},8317:t=>{function e(t,e,n,i){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,i)}e.prototype.run=function(t,e,n,i){this._init(t,e,n,i);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(r,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if(1!==this._visited[i]){this._visited[i]=1;var r=this._regionQuery(i);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[i]&&this._addToCluster(i,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,i=0;i<n;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=e)},3781:t=>{function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,i=0;i<this.k;i++)this.centroids[i]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(u),s=0,l=0;l<u;l++)a[l]=0;for(var c=0;c<n;c++){var u=this.dataset[c].length;if(o===this.assignments[c]){for(l=0;l<u;l++)a[l]+=this.dataset[c][l];s++}}if(s>0){for(l=0;l<u;l++)a[l]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,i=0;i<n;i++)(t=this.argmin(this.dataset[i],this.centroids,this.distance))!=this.assignments[i]&&(this.assignments[i]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var i,r=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(i=n(t,e[s]))<r&&(r=i,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;){var r=t[i]-e[i];n+=r*r}return Math.sqrt(n)},t.exports&&(t.exports=e)},3763:(t,e,n)=>{if(t.exports)var i=n(4215);function r(t,e,n,i){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,i)}r.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var l=new i(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,l),this._expandCluster(s,l))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var i=this._orderedList[e],r=this._reachability[i];t.push([i,r])}return t},r.prototype._init=function(t,e,n,i){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),i&&(this.distance=i)},r.prototype._updateQueue=function(t,e,n){var i=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===i._processed[e]){var r=i.distance(i.dataset[t],i.dataset[e]),o=Math.max(i._coreDistance,r);void 0===i._reachability[e]?(i._reachability[e]=o,n.insert(e,o)):o<i._reachability[e]&&(i._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},r.prototype._expandCluster=function(t,e){for(var n=e.getElements(),i=0,r=n.length;i<r;i++){var o=n[i];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],i=0,r=this.dataset.length;i<r;i++)this.distance(this.dataset[t],this.dataset[i])<e&&n.push(i);return n},r.prototype._euclideanDistance=function(t,e){for(var n=0,i=Math.min(t.length,e.length);i--;)n+=(t[i]-e[i])*(t[i]-e[i]);return Math.sqrt(n)},t.exports&&(t.exports=r)},4215:t=>{function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,i=n;i--;){var r=this._priorities[i];"desc"===this._sorting?e>r&&(n=i):e<r&&(n=i)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var i=0;i<t.length;i++)this.insert(t[i],e[i])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)},2606:(t,e,n)=>{t.exports&&(t.exports={DBSCAN:n(8317),KMEANS:n(3781),OPTICS:n(3763),PriorityQueue:n(4215)})},9187:t=>{"use strict";function e(t,e,o){o=o||2;var a,s,l,h,d,f,m,g=e&&e.length,_=g?e[0]*o:t.length,y=n(t,0,_,o,!0),v=[];if(!y||y.next===y.prev)return v;if(g&&(y=function(t,e,r,o){var a,s,l,h=[];for(a=0,s=e.length;a<s;a++)(l=n(t,e[a]*o,a<s-1?e[a+1]*o:t.length,o,!1))===l.next&&(l.steiner=!0),h.push(p(l));for(h.sort(c),a=0;a<h.length;a++)r=i(r=u(h[a],r),r.next);return r}(t,e,y,o)),t.length>80*o){a=l=t[0],s=h=t[1];for(var b=o;b<_;b+=o)(d=t[b])<a&&(a=d),(f=t[b+1])<s&&(s=f),d>l&&(l=d),f>h&&(h=f);m=0!==(m=Math.max(l-a,h-s))?1/m:0}return r(y,v,o,a,s,m),v}function n(t,e,n,i,r){var o,a;if(r===S(t,e,n,i)>0)for(o=e;o<n;o+=i)a=E(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=E(o,t[o],t[o+1],a);return a&&_(a,a.next)&&(M(a),a=a.next),a}function i(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!_(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(M(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function r(t,e,n,c,u,h,p){if(t){!p&&h&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=d(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(t,c,u,h);for(var f,m,g=t;t.prev!==t.next;)if(f=t.prev,m=t.next,h?a(t,c,u,h):o(t))e.push(f.i/n),e.push(t.i/n),e.push(m.i/n),M(t),t=m.next,g=m.next;else if((t=m)===g){p?1===p?r(t=s(i(t),e,n),e,n,c,u,h,2):2===p&&l(t,e,n,c,u,h):r(i(t),e,n,c,u,h,1);break}}}function o(t){var e=t.prev,n=t,i=t.next;if(g(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(f(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function a(t,e,n,i){var r=t.prev,o=t,a=t.next;if(g(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=d(s,l,e,n,i),p=d(c,u,e,n,i),m=t.prevZ,_=t.nextZ;m&&m.z>=h&&_&&_.z<=p;){if(m!==t.prev&&m!==t.next&&f(r.x,r.y,o.x,o.y,a.x,a.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,_!==t.prev&&_!==t.next&&f(r.x,r.y,o.x,o.y,a.x,a.y,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;m&&m.z>=h;){if(m!==t.prev&&m!==t.next&&f(r.x,r.y,o.x,o.y,a.x,a.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;_&&_.z<=p;){if(_!==t.prev&&_!==t.next&&f(r.x,r.y,o.x,o.y,a.x,a.y,_.x,_.y)&&g(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function s(t,e,n){var r=t;do{var o=r.prev,a=r.next.next;!_(o,a)&&y(o,r,r.next,a)&&x(o,a)&&x(a,o)&&(e.push(o.i/n),e.push(r.i/n),e.push(a.i/n),M(r),M(r.next),r=t=a),r=r.next}while(r!==t);return i(r)}function l(t,e,n,o,a,s){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&m(l,c)){var u=w(l,c);return l=i(l,l.next),u=i(u,u.next),r(l,e,n,o,a,s),void r(u,e,n,o,a,s)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var l,c=n,u=n.x,d=n.y,p=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&f(o<d?r:a,o,u,d,o<d?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),x(i,t)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&h(n,i)))&&(n=i,p=l)),i=i.next}while(i!==c);return n}(t,e);if(!n)return e;var r=w(n,t),o=i(n,n.next);return i(r,r.next),e===n?o:e}function h(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function f(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||_(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,i){var r=b(g(t,e,n)),o=b(g(t,e,i)),a=b(g(n,i,t)),s=b(g(n,i,e));return r!==o&&a!==s||!(0!==r||!v(t,n,e))||!(0!==o||!v(t,i,e))||!(0!==a||!v(n,t,i))||!(0!==s||!v(n,e,i))}function v(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var n=new T(t.i,t.x,t.y),i=new T(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function E(t,e,n,i){var r=new T(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(S(t,0,o,n));if(r)for(var s=0,l=e.length;s<l;s++){var c=e[s]*n,u=s<l-1?e[s+1]*n:t.length;a-=Math.abs(S(t,c,u,n))}var h=0;for(s=0;s<i.length;s+=3){var d=i[s]*n,p=i[s+1]*n,f=i[s+2]*n;h+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},8628:(t,e,n)=>{"use strict";var i=n(139),r={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:i}},registerDefault:function(){}};t.exports=r},6508:t=>{"use strict";var e=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};t.exports=n},2297:t=>{"use strict";var e=/-(.)/g;t.exports=function(t){return t.replace(e,(function(t,e){return e.toUpperCase()}))}},250:(t,e,n)=>{"use strict";var i=n(2297),r=/^-ms-/;t.exports=function(t){return i(t.replace(r,"ms-"))}},7476:(t,e,n)=>{"use strict";var i=n(2334);t.exports=function t(e,n){return!(!e||!n)&&(e===n||!i(e)&&(i(n)?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}},9825:(t,e,n)=>{"use strict";var i=n(3759);t.exports=function(t){return function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}(t)?Array.isArray(t)?t.slice():function(t){var e=t.length;if((Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t)&&i(!1),"number"!=typeof e&&i(!1),0===e||e-1 in t||i(!1),"function"==typeof t.callee&&i(!1),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(t){}for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}(t):[t]}},188:(t,e,n)=>{"use strict";var i=n(6508),r=n(9825),o=n(980),a=n(3759),s=i.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=function(t,e){var n=s;s||a(!1);var i=function(t){var e=t.match(l);return e&&e[1].toLowerCase()}(t),c=i&&o(i);if(c){n.innerHTML=c[1]+t+c[2];for(var u=c[0];u--;)n=n.lastChild}else n.innerHTML=t;var h=n.getElementsByTagName("script");h.length&&(e||a(!1),r(h).forEach(e));for(var d=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return d}},139:t=>{"use strict";function e(t){return function(){return t}}var n=function(){};n.thatReturns=e,n.thatReturnsFalse=e(!1),n.thatReturnsTrue=e(!0),n.thatReturnsNull=e(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(t){return t},t.exports=n},3677:t=>{"use strict";t.exports={}},8387:t=>{"use strict";t.exports=function(t){try{t.focus()}catch(t){}}},1003:t=>{"use strict";t.exports=function(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}},980:(t,e,n)=>{"use strict";var i=n(6508),r=n(3759),o=i.canUseDOM?document.createElement("div"):null,a={},s=[1,'<select multiple="true">',"</select>"],l=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],u=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:s,option:s,caption:l,colgroup:l,tbody:l,tfoot:l,thead:l,td:c,th:c};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach((function(t){h[t]=u,a[t]=!0})),t.exports=function(t){return o||r(!1),h.hasOwnProperty(t)||(t="*"),a.hasOwnProperty(t)||(o.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",a[t]=!o.firstChild),a[t]?h[t]:null}},787:t=>{"use strict";t.exports=function(t){return t.Window&&t instanceof t.Window?{x:t.pageXOffset||t.document.documentElement.scrollLeft,y:t.pageYOffset||t.document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}},9349:t=>{"use strict";var e=/([A-Z])/g;t.exports=function(t){return t.replace(e,"-$1").toLowerCase()}},7100:(t,e,n)=>{"use strict";var i=n(9349),r=/^ms-/;t.exports=function(t){return i(t).replace(r,"-ms-")}},3759:t=>{"use strict";t.exports=function(t,e,n,i,r,o,a,s){if(!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,o,a,s],u=0;(l=new Error(e.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},901:t=>{"use strict";t.exports=function(t){var e=(t?t.ownerDocument||t:document).defaultView||window;return!(!t||!("function"==typeof e.Node?t instanceof e.Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}},2334:(t,e,n)=>{"use strict";var i=n(901);t.exports=function(t){return i(t)&&3==t.nodeType}},8918:(t,e,n)=>{"use strict";var i=n(3759);t.exports=function(t){var e,n={};for(e in t instanceof Object&&!Array.isArray(t)||i(!1),t)t.hasOwnProperty(e)&&(n[e]=e);return n}},5721:t=>{"use strict";t.exports=function(t){var e;for(e in t)if(t.hasOwnProperty(e))return e;return null}},1767:t=>{"use strict";t.exports=function(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}},9303:t=>{"use strict";var e=Object.prototype.hasOwnProperty;function n(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}t.exports=function(t,i){if(n(t,i))return!0;if("object"!=typeof t||null===t||"object"!=typeof i||null===i)return!1;var r=Object.keys(t),o=Object.keys(i);if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(!e.call(i,r[a])||!n(t[r[a]],i[r[a]]))return!1;return!0}},3620:(t,e,n)=>{"use strict";var i=n(139);t.exports=i},1791:(t,e,n)=>{"use strict";t.exports=n.p+"8b43027f47b20503057d.eot"},7878:(t,e,n)=>{"use strict";t.exports=n.p+"8b43027f47b20503057d.eot?v=4.7.0"},1752:(t,e,n)=>{"use strict";t.exports=n.p+"c1e38fd9e0e74ba58f7a.svg?v=4.7.0"},9324:(t,e,n)=>{"use strict";t.exports=n.p+"1e59d2330b4c6deb84b3.ttf?v=4.7.0"},9961:(t,e,n)=>{"use strict";t.exports=n.p+"20fd1704ea223900efa9.woff2?v=4.7.0"},8305:(t,e,n)=>{"use strict";t.exports=n.p+"f691f37e57f04c152e23.woff?v=4.7.0"},1167:()=>{!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var n=function(e,n){var o=this;this.element=t(e),this.autoShow=null==n.autoShow||n.autoShow,this.appendTo=n.appendTo||"body",this.closeButton=n.closeButton,this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in i?this.language:this.language.split("-")[0],this.language=this.language in i?this.language:"en",this.isRTL=i[this.language].rtl||!1,this.format=r.parseFormat(n.format||this.element.data("date-format")||i[this.language].format||"mm/dd/yyyy"),this.formatText=n.format||this.element.data("date-format")||i[this.language].format||"mm/dd/yyyy",this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".prefix, .postfix"),this.hasInput=this.component&&this.element.find("input").length,this.disableDblClickSelection=n.disableDblClickSelection,this.onRender=n.onRender||function(){},this.component&&0===this.component.length&&(this.component=!1),this.linkField=n.linkField||this.element.data("link-field")||!1,this.linkFormat=r.parseFormat(n.linkFormat||this.element.data("link-format")||"yyyy-mm-dd hh:ii:ss"),this.minuteStep=n.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=n.pickerPosition||this.element.data("picker-position")||"bottom-right",this.initialDate=n.initialDate||null,this.faCSSprefix=n.faCSSprefix||"fa",this.leftArrow=n.leftArrow||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+'-chevron-left fi-arrow-left"/>',this.rightArrow=n.rightArrow||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+'-chevron-right fi-arrow-right"/>',this.closeIcon=n.closeIcon||'<i class="'+this.faCSSprefix+" "+this.faCSSprefix+"-remove "+this.faCSSprefix+'-times fi-x"></i>',this.minView=0,"minView"in n?this.minView=n.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=r.convertViewMode(this.minView),this.maxView=r.modes.length-1,"maxView"in n?this.maxView=n.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=r.convertViewMode(this.maxView),this.startViewMode="month","startView"in n?this.startViewMode=n.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=r.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,"minView"in n||"maxView"in n||this.element.data("min-view")&&!this.element.data("max-view")||(this.pickTime=!1,"pickTime"in n&&(this.pickTime=n.pickTime),1==this.pickTime?(this.minView=0,this.maxView=4):(this.minView=2,this.maxView=4)),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=t(r.template(this.leftArrow,this.rightArrow,this.closeIcon)).appendTo(this.isInline?this.element:this.appendTo).on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.closeButton?this.picker.find("a.datepicker-close").show():this.picker.find("a.datepicker-close").hide(),this.isInline?this.picker.addClass("datepicker-inline"):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.isRTL&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".date-switch").each((function(){t(this).parent().prepend(t(this).siblings(".next")),t(this).parent().append(t(this).siblings(".prev"))})),this.picker.find(".prev, .next").toggleClass("prev next")),t(document).on("mousedown",(function(e){0===t(e.target).closest(".datepicker.datepicker-inline, .datepicker.datepicker-dropdown").length&&o.hide()})),this.autoclose=!0,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.calendarWeeks=!1,"calendarWeeks"in n?this.calendarWeeks=n.calendarWeeks:"dateCalendarWeeks"in this.element.data()&&(this.calendarWeeks=this.element.data("date-calendar-weeks")),this.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",(function(t,e){return parseInt(e)+1})),this.weekStart=(n.weekStart||this.element.data("date-weekstart")||i[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.datesDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setDatesDisabled(n.datesDisabled||this.element.data("dates-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show(),this._attachEvents()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this.keyboardNavigation?this._events=[[this.element,{focus:this.autoShow?t.proxy(this.show,this):function(){},keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this),click:this.element.attr("readonly")?t.proxy(this.show,this):function(){}}]]:this._events=[[this.element,{focus:this.autoShow?t.proxy(this.show,this):function(){}}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:this.autoShow?t.proxy(this.show,this):function(){},keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this.disableDblClickSelection&&(this._events[this._events.length]=[this.element,{dblclick:function(e){e.preventDefault(),e.stopPropagation(),t(this).blur()}}]);for(var e,n,i=0;i<this._events.length;i++)e=this._events[i][0],n=this._events[i][1],e.on(n)},_detachEvents:function(){for(var t,e,n=0;n<this._events.length;n++)t=this._events[n][0],e=this._events[n][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.element.trigger({type:"show",date:this.date})},hide:function(e){this.isInline||this.picker.is(":visible")&&(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.element.trigger({type:"hide",date:this.date}))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.element.data().datepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t))},getFormattedDate:function(t){return void 0===t&&(t=this.format),r.formatDate(this.date,t,this.language)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=r.parseDate(this.startDate,this.format,this.language)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=r.parseDate(this.endDate,this.format,this.language)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,(function(t){return parseInt(t,10)})),this.update(),this.updateNavArrows()},setDatesDisabled:function(e){this.datesDisabled=e||[],t.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/)),this.datesDisabled=t.map(this.datesDisabled,(function(t){return r.parseDate(t,this.format,this.language).valueOf()})),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter((function(){return"auto"!=t(this).css("z-index")})).first().css("z-index"))+10,n=this.component?this.component:this.element,i=n.offset(),r=n.outerHeight()+parseInt(n.css("margin-top")),o=n.outerWidth()+parseInt(n.css("margin-left")),a=i.top+r,s=i.left;this.picker.removeClass("datepicker-top datepicker-bottom"),a+this.picker.outerHeight()>=t(window).scrollTop()+t(window).height()?(a=i.top-this.picker.outerHeight(),this.picker.addClass("datepicker-top")):this.picker.addClass("datepicker-bottom"),i.left+this.picker.width()>=t(window).width()&&(s=i.left+o-this.picker.width()),this.picker.css({top:a,left:s,zIndex:e})}},update:function(){var e,n=!1,i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],n=!0):e=i||null==this.initialDate?this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val():this.initialDate,e.length>this.formatText.length)return t(this.picker).addClass("is-invalid"),void t(this.element).addClass("is-invalid-input");t(this.picker).removeClass("is-invalid"),t(this.element).removeClass("is-invalid-input"),this.date=r.parseDate(e,this.format,this.language),(n||null!=this.initialDate)&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate.valueOf()):this.date>this.endDate?this.viewDate=new Date(this.endDate.valueOf()):this.viewDate=new Date(this.date.valueOf()),this.fill()},fillDow:function(){var t=this.weekStart,e="<tr>";if(this.calendarWeeks){var n='<th class="cw">&nbsp;</th>';e+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;t<this.weekStart+7;)e+='<th class="dow">'+i[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+i[this.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var n=new Date(this.viewDate.valueOf()),o=n.getUTCFullYear(),a=n.getUTCMonth(),s=n.getUTCDate(),l=n.getUTCHours(),c=n.getUTCMinutes(),u=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,h=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,d=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,p=this.endDate!==1/0?this.endDate.getUTCMonth():1/0,f=this.date&&e(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;i[this.language].titleFormat||i.en.titleFormat,this.picker.find(".datepicker-days thead th:eq(1)").text(i[this.language].months[a]+" "+o),this.picker.find(".datepicker-hours thead th:eq(1)").text(s+" "+i[this.language].months[a]+" "+o),this.picker.find(".datepicker-minutes thead th:eq(1)").text(s+" "+i[this.language].months[a]+" "+o),this.picker.find("tfoot th.today").text(i[this.language].today).toggle(!1!==this.todayBtn),this.updateNavArrows(),this.fillMonths();var g=e(o,a-1,28,0,0,0,0),_=r.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(_),g.setUTCDate(_-(g.getUTCDay()-this.weekStart+7)%7);var y=new Date(g.valueOf());y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var v,b=[];g.valueOf()<y;){if(g.getUTCDay()==this.weekStart&&(b.push("<tr>"),this.calendarWeeks)){var x=new Date(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()-g.getDay()+10-(this.weekStart&&this.weekStart%7<5&&7)),w=new Date(x.getFullYear(),0,4),E=~~((x-w)/864e5/7+1.5);b.push('<td class="cw">'+E+"</td>")}v=" "+this.onRender(g)+" ",g.getUTCFullYear()<o||g.getUTCFullYear()==o&&g.getUTCMonth()<a?v+=" old":(g.getUTCFullYear()>o||g.getUTCFullYear()==o&&g.getUTCMonth()>a)&&(v+=" new"),this.todayHighlight&&g.getUTCFullYear()==m.getFullYear()&&g.getUTCMonth()==m.getMonth()&&g.getUTCDate()==m.getDate()&&(v+=" today"),f&&g.valueOf()==f&&(v+=" active"),(g.valueOf()<this.startDate||g.valueOf()>this.endDate||-1!==t.inArray(g.getUTCDay(),this.daysOfWeekDisabled)||-1!==t.inArray(g.valueOf(),this.datesDisabled))&&(v+=" disabled"),b.push('<td class="day'+v+'">'+g.getUTCDate()+"</td>"),g.getUTCDay()==this.weekEnd&&b.push("</tr>"),g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join("")),b=[];for(var M=0;M<24;M++)v="",(T=e(o,a,s,M)).valueOf()+36e5<this.startDate||T.valueOf()>this.endDate?v+=" disabled":l==M&&(v+=" active"),b.push('<span class="hour'+v+'">'+M+":00</span>");for(this.picker.find(".datepicker-hours td").html(b.join("")),b=[],M=0;M<60;M+=this.minuteStep){var T;v="",(T=e(o,a,s,l,M)).valueOf()<this.startDate||T.valueOf()>this.endDate?v+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(M/this.minuteStep)&&(v+=" active"),b.push('<span class="minute'+v+'">'+l+":"+(M<10?"0"+M:M)+"</span>")}this.picker.find(".datepicker-minutes td").html(b.join(""));var S=this.date&&this.date.getUTCFullYear(),k=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");S&&S==o&&k.eq(this.date.getUTCMonth()).addClass("active"),(o<u||o>d)&&k.addClass("disabled"),o==u&&k.slice(0,h).addClass("disabled"),o==d&&k.slice(p+1).addClass("disabled"),b="",o=10*parseInt(o/10,10);var C=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");for(o-=1,M=-1;M<11;M++)b+='<span class="year'+(-1==M||10==M?" old":"")+(S==o?" active":"")+(o<u||o>d?" disabled":"")+'">'+o+"</span>",o+=1;C.html(b)}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth(),i=t.getUTCDate(),r=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()&&r<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()&&r>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(n){n.stopPropagation(),n.preventDefault(),(t(n.target).hasClass("datepicker-close")||t(n.target).parent().hasClass("datepicker-close"))&&this.hide();var i=t(n.target).closest("span, td, th");if(1==i.length){if(i.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"date-switch":this.showMode(1);break;case"prev":case"next":var o=r.modes[this.viewMode].navStep*("prev"==i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,o);break;case 1:this.viewDate=this.moveDate(this.viewDate,o);break;case 2:this.viewDate=this.moveMonth(this.viewDate,o);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,o)}this.fill();break;case"today":var a=new Date;a=e(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(a)}break;case"span":if(!i.is(".disabled")){if(i.is(".month"))if(3===this.minView){var s=i.parent().find("span").index(i)||0,l=this.viewDate.getUTCFullYear(),c=1,u=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();this._setDate(e(l,s,c,u,h,d,0))}else this.viewDate.setUTCDate(1),s=i.parent().find("span").index(i),this.viewDate.setUTCMonth(s),this.element.trigger({type:"changeMonth",date:this.viewDate});else i.is(".year")?4===this.minView?(l=parseInt(i.text(),10)||0,s=0,c=1,u=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds(),this._setDate(e(l,s,c,u,h,d,0))):(this.viewDate.setUTCDate(1),l=parseInt(i.text(),10)||0,this.viewDate.setUTCFullYear(l),this.element.trigger({type:"changeYear",date:this.viewDate})):i.is(".hour")?(u=parseInt(i.text(),10)||0,l=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds(),this._setDate(e(l,s,c,u,h,d,0))):i.is(".minute")&&(h=parseInt(i.text().substr(i.text().indexOf(":")+1),10)||0,l=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),u=this.viewDate.getUTCHours(),d=this.viewDate.getUTCSeconds(),this._setDate(e(l,s,c,u,h,d,0)));if(0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":i.is(".day")&&!i.is(".disabled")&&(c=parseInt(i.text(),10)||1,l=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),u=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds(),i.is(".old")?0===s?(s=11,l-=1):s-=1:i.is(".new")&&(11==s?(s=0,l+=1):s+=1),this._setDate(e(l,s,c,u,h,d,0))),p=this.viewMode,this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){var n;e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue(),this.element.trigger({type:"changeDate",date:this.date}),this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),this.autoclose)},moveHour:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return e=e>0?1:-1,n.setUTCHours(n.getUTCHours()+e),n},moveDate:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return e=e>0?1:-1,n.setUTCDate(n.getUTCDate()+e),n},moveMonth:function(t,e){if(!e)return t;var n,i,r=new Date(t.valueOf()),o=r.getUTCDate(),a=r.getUTCMonth(),s=Math.abs(e);if(e=e>0?1:-1,1==s)i=-1==e?function(){return r.getUTCMonth()==a}:function(){return r.getUTCMonth()!=n},n=a+e,r.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var l=0;l<s;l++)r=this.moveMonth(r,e);n=r.getUTCMonth(),r.setUTCDate(o),i=function(){return n!=r.getUTCMonth()}}for(;i();)r.setUTCDate(--o),r.setUTCMonth(n);return r},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(!this.keyboardNavigation)return!0;if(this.picker.is(":not(:visible)"))27==t.keyCode&&this.show();else{var e,n,i,r,o=!1;switch(t.keyCode){case 27:case 13:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):((n=new Date(this.date.valueOf())).setUTCDate(this.date.getUTCDate()+e),(i=new Date(this.viewDate.valueOf())).setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):t.shiftKey?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):((n=new Date(this.date.valueOf())).setUTCDate(this.date.getUTCDate()+7*e),(i=new Date(this.viewDate.valueOf())).setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 9:this.hide()}o&&(this.element.trigger({type:"changeDate",date:this.date}),this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change())}},showMode:function(t){if(t){var e=Math.max(0,Math.min(r.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.viewMode=e)}this.picker.find(">div").hide().filter(".datepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(t){this._setDate(null,"date")}},t.fn.fdatepicker=function(e){var i=Array.apply(null,arguments);return i.shift(),this.each((function(){var r=t(this),o=r.data("datepicker"),a="object"==typeof e&&e;o||r.data("datepicker",o=new n(this,t.extend({},t.fn.fdatepicker.defaults,a))),"string"==typeof e&&"function"==typeof o[e]&&o[e].apply(o,i)}))},t.fn.fdatepicker.defaults={onRender:function(t){return""}},t.fn.fdatepicker.Constructor=n;var i=t.fn.fdatepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",titleFormat:"MM yyyy"}},r={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},getDaysInMonth:function(t,e){return[31,r.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return this.formatText=t,{separators:e,parts:n}},parseDate:function(n,r,o){if(n instanceof Date)return new Date(n.valueOf()-6e4*n.getTimezoneOffset());if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(n)&&(r=this.parseFormat("yyyy-mm-dd")),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(n)&&(r=this.parseFormat("yyyy-mm-dd hh:ii")),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(n)&&(r=this.parseFormat("yyyy-mm-dd hh:ii:ss")),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(n)){var a,s=/([-+]\d+)([dmwy])/,l=n.match(/([-+]\d+)([dmwy])/g);n=new Date;for(var c=0;c<l.length;c++)switch(d=s.exec(l[c]),a=parseInt(d[1]),d[2]){case"d":n.setUTCDate(n.getUTCDate()+a);break;case"m":n=Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype,n,a);break;case"w":n.setUTCDate(n.getUTCDate()+7*a);break;case"y":n=Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype,n,a)}return e(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds())}l=n&&n.match(this.nonpunctuation)||[],n=new Date;var u,h,d,p={},f=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","d","dd"],m={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};if(m.M=m.MM=m.mm=m.m,m.dd=m.d,n=e(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0),l.length==r.parts.length){c=0;for(var g=r.parts.length;c<g;c++){if(u=parseInt(l[c],10),d=r.parts[c],isNaN(u))switch(d){case"MM":h=t(i[o].months).filter((function(){var t=this.slice(0,l[c].length);return t==l[c].slice(0,t.length)})),u=t.inArray(h[0],i[o].months)+1;break;case"M":h=t(i[o].monthsShort).filter((function(){var t=this.slice(0,l[c].length);return t==l[c].slice(0,t.length)})),u=t.inArray(h[0],i[o].monthsShort)+1}p[d]=u}var _;for(c=0;c<f.length;c++)(_=f[c])in p&&!isNaN(p[_])&&m[_](n,p[_])}return n},formatDate:function(e,n,r){if(null==e)return"";var o={h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds(),d:e.getUTCDate(),m:e.getUTCMonth()+1,M:i[r].monthsShort[e.getUTCMonth()],MM:i[r].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.hh=(o.h<10?"0":"")+o.h,o.ii=(o.i<10?"0":"")+o.i,o.ss=(o.s<10?"0":"")+o.s,o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var a=t.extend([],n.separators),s=0,l=n.parts.length;s<l;s++)a.length&&e.push(a.shift()),e.push(o[n.parts[s]]);return e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:function(t,e){return'<thead><tr><th class="prev">'+t+'</th><th colspan="5" class="date-switch"></th><th class="next">'+e+"</th></tr></thead>"},contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>',template:function(t,e,n){return'<div class="datepicker"><div class="datepicker-minutes"><table class=" table-condensed">'+r.headTemplate(t,e)+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-hours"><table class=" table-condensed">'+r.headTemplate(t,e)+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-days"><table class=" table-condensed">'+r.headTemplate(t,e)+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+r.headTemplate(t,e)+r.contTemplate+r.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+r.headTemplate(t,e)+r.contTemplate+r.footTemplate+'</table></div><a class="button datepicker-close tiny alert right" style="width:auto;">'+n+"</a></div>"}};t.fn.fdatepicker.DPGlobal=r}(window.jQuery)},7648:t=>{"use strict";var e="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,i=Object.prototype.toString,r="[object Function]";t.exports=function(t){var o=this;if("function"!=typeof o||i.call(o)!==r)throw new TypeError(e+o);for(var a,s=n.call(arguments,1),l=function(){if(this instanceof a){var e=o.apply(this,s.concat(n.call(arguments)));return Object(e)===e?e:this}return o.apply(t,s.concat(n.call(arguments)))},c=Math.max(0,o.length-s.length),u=[],h=0;h<c;h++)u.push("$"+h);if(a=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(l),o.prototype){var d=function(){};d.prototype=o.prototype,a.prototype=new d,d.prototype=null}return a}},8612:(t,e,n)=>{"use strict";var i=n(7648);t.exports=Function.prototype.bind||i},9657:(t,e,n)=>{var i=n(251),r=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:s};function o(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function a(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function s(t,e){return i(t,e,{strict:!0})}r.prototype.compare=function(t,e){if(t.type!==e.type||!a(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=o(t),r=o(e);return i.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),r)}}return!1},r.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},r.prototype.compareLine=function(t,e,n,i){if(!a(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var s=this.compareCoord(r[n],o[n]);return this.direction||s?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},r.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},r.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},r.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),i)}return!1},r.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},r.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},r.prototype.removePseudo=function(t){return t},t.exports=r},1787:(t,e,n)=>{var i=n(2582),r=n(4102),o=n(1540),a=n(9705).Z,s=o.featureEach,l=(o.coordEach,r.polygon,r.featureCollection);function c(t){var e=new i(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),i.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),i.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),i.prototype.remove.call(this,t,e)},e.clear=function(){return i.prototype.clear.call(this)},e.search=function(t){var e=i.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return i.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=i.prototype.all.call(this);return l(t)},e.toJSON=function(){return i.prototype.toJSON.call(this)},e.fromJSON=function(t){return i.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},210:(t,e,n)=>{"use strict";var i,r=SyntaxError,o=Function,a=TypeError,s=function(t){try{return o('"use strict"; return ('+t+").constructor;")()}catch(t){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(t){l=null}var c=function(){throw new a},u=l?function(){try{return c}catch(t){try{return l(arguments,"callee").get}catch(t){return c}}}():c,h=n(1405)(),d=Object.getPrototypeOf||function(t){return t.__proto__},p={},f="undefined"==typeof Uint8Array?i:d(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?i:Atomics,"%BigInt%":"undefined"==typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":"undefined"==typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?d((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?i:Promise,"%Proxy%":"undefined"==typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?d((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):i,"%Symbol%":h?Symbol:i,"%SyntaxError%":r,"%ThrowTypeError%":u,"%TypedArray%":f,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?i:WeakSet},g=function t(e){var n;if("%AsyncFunction%"===e)n=s("async function () {}");else if("%GeneratorFunction%"===e)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=s("async function* () {}");else if("%AsyncGenerator%"===e){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(n=d(r.prototype))}return m[e]=n,n},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(8612),v=n(7642),b=y.call(Function.call,Array.prototype.concat),x=y.call(Function.apply,Array.prototype.splice),w=y.call(Function.call,String.prototype.replace),E=y.call(Function.call,String.prototype.slice),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,S=function(t){var e=E(t,0,1),n=E(t,-1);if("%"===e&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return w(t,M,(function(t,e,n,r){i[i.length]=n?w(r,T,"$1"):e||t})),i},k=function(t,e){var n,i=t;if(v(_,i)&&(i="%"+(n=_[i])[0]+"%"),v(m,i)){var o=m[i];if(o===p&&(o=g(i)),void 0===o&&!e)throw new a("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new r("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new a('"allowMissing" argument must be a boolean');var n=S(t),i=n.length>0?n[0]:"",o=k("%"+i+"%",e),s=o.name,c=o.value,u=!1,h=o.alias;h&&(i=h[0],x(n,b([0,1],h)));for(var d=1,p=!0;d<n.length;d+=1){var f=n[d],g=E(f,0,1),_=E(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===_||"'"===_||"`"===_)&&g!==_)throw new r("property names with quotes must have matching quotes");if("constructor"!==f&&p||(u=!0),v(m,s="%"+(i+="."+f)+"%"))c=m[s];else if(null!=c){if(!(f in c)){if(!e)throw new a("base intrinsic for "+t+" exists, but the property is not available.");return}if(l&&d+1>=n.length){var y=l(c,f);c=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:c[f]}else p=v(c,f),c=c[f];p&&!u&&(m[s]=c)}}return c}},1405:(t,e,n)=>{"use strict";var i="undefined"!=typeof Symbol&&Symbol,r=n(5419);t.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&r()}},5419:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var i=Object.getOwnPropertySymbols(t);if(1!==i.length||i[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}},7642:(t,e,n)=>{"use strict";var i=n(8612);t.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},2584:(t,e,n)=>{"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,r=n(1924)("Object.prototype.toString"),o=function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===r(t)},a=function(t){return!!o(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==r(t)&&"[object Function]"===r(t.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,t.exports=s?o:a},8923:t=>{"use strict";var e=Date.prototype.getDay,n=Object.prototype.toString,i="function"==typeof Symbol&&!!Symbol.toStringTag;t.exports=function(t){return"object"==typeof t&&null!==t&&(i?function(t){try{return e.call(t),!0}catch(t){return!1}}(t):"[object Date]"===n.call(t))}},8420:(t,e,n)=>{"use strict";var i,r,o,a,s=n(1924),l=n(5419)()&&!!Symbol.toStringTag;if(l){i=s("Object.prototype.hasOwnProperty"),r=s("RegExp.prototype.exec"),o={};var c=function(){throw o};a={toString:c,valueOf:c},"symbol"==typeof Symbol.toPrimitive&&(a[Symbol.toPrimitive]=c)}var u=s("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;t.exports=l?function(t){if(!t||"object"!=typeof t)return!1;var e=h(t,"lastIndex");if(!e||!i(e,"value"))return!1;try{r(t,a)}catch(t){return t===o}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===u(t)}},9483:(t,e,n)=>{t.exports=function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){return r(e[a][1][t]||t)}),c,c.exports,t,e,n,i)}return n[a].exports}for(var o=void 0,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){"use strict";var i=t(2);function r(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==r&&p(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i((function(){var i;try{i=e(n)}catch(e){return o.reject(t,e)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function d(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var a=f((function(){e(r,i)}));"error"===a.status&&i(a.value)}function f(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}e.exports=n=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(r);return this.state!==l?h(n,this.state===s?t:e,this.outcome):this.queue.push(new u(n,t,e)),n},u.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){o.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=f(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)p(t,i);else{t.state=s,t.outcome=e;for(var r=-1,a=t.queue.length;++r<a;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},n.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},n.reject=function(t){var e=new this(r);return o.reject(e,t)},n.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,c=new this(r);++l<n;)u(t[l],l);return c;function u(t,r){e.resolve(t).then((function(t){a[r]=t,++s!==n||i||(i=!0,o.resolve(c,a))}),(function(t){i||(i=!0,o.reject(c,t))}))}},n.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n,i=t.length,a=!1;if(!i)return this.resolve([]);for(var s=-1,l=new this(r);++s<i;)n=t[s],e.resolve(n).then((function(t){a||(a=!0,o.resolve(l,t))}),(function(t){a||(a=!0,o.reject(l,t))}));return l}},{2:2}],2:[function(t,e,i){(function(t){"use strict";var n,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,a=new r(u),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var l=new t.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var t,e;i=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}i=!1}e.exports=function(t){1!==c.push(t)||i||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,i){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(1))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(t,e,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){}}();function o(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(r){if("TypeError"!==r.name)throw r;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)n.append(t[i]);return n.getBlob(e.type)}}"undefined"==typeof Promise&&void 0!==t&&t(3);var a=Promise;function s(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function l(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}var c,u,h="local-forage-detect-blob-support",d=Object.prototype.toString;function p(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n),r=0;r<e;r++)i[r]=t.charCodeAt(r);return n}function f(t){return"boolean"==typeof c?a.resolve(c):(e=t,new a((function(t){var n=o([""]);e.objectStore(h).put(n,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))).then((function(t){return c=t}));var e}function m(t,e){return new a((function(n,i){if(t.db){if(!e)return n(t.db);(function(t){var e=u[t.name],n={};n.promise=new a((function(t){n.resolve=t})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise})(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var s=r.open.apply(r,o);e&&(s.onupgradeneeded=function(e){var n=s.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(h)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),s.onerror=function(){i(s.error)},s.onsuccess=function(){n(s.result),function(t){var e=u[t.name].deferredOperations.pop();e&&e.resolve()}(t)}}))}function g(t){return o([p(atob(t.data))],{type:t.type})}function _(t){return t&&t.__local_forage_encoded_blob}function y(t){var e=this,n=e._initReady().then((function(){var t=u[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return l(n,t,t),n}var v={_driver:"asyncStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]=t[i];u||(u={});var r=u[n.name];r||(r={forages:[],db:null,dbReady:null,deferredOperations:[]},u[n.name]=r),r.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=y);var o=[];function s(){return a.resolve()}for(var l=0;l<r.forages.length;l++){var c=r.forages[l];c!==e&&o.push(c._initReady().catch(s))}var h=r.forages.slice(0);return a.all(o).then((function(){return n.db=r.db,function(t){return m(t,!1)}(n)})).then((function(t){return n.db=t,function(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,r=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),r||n){if(n){var o=t.db.version+1;o>t.version&&(t.version=o)}return!0}return!1}(n,e._defaultConfig.version)?function(t){return m(t,!0)}(n):t})).then((function(t){n.db=r.db=t,e._dbInfo=n;for(var i=0;i<h.length;i++){var o=h[i];o!==e&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},iterate:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).openCursor(),a=1;o.onsuccess=function(){var n=o.result;if(n){var i=n.value;_(i)&&(i=g(i));var r=t(i,n.key,a++);void 0!==r?e(r):n.continue()}else e()},o.onerror=function(){i(o.error)}})).catch(i)}));return s(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName).get(t);o.onsuccess=function(){var t=o.result;void 0===t&&(t=null),_(t)&&(t=g(t)),e(t)},o.onerror=function(){i(o.error)}})).catch(i)}));return s(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new a((function(n,r){var o;i.ready().then((function(){return o=i._dbInfo,"[object Blob]"===d.call(e)?f(o.db).then((function(t){return t?e:(n=e,new a((function(t,e){var i=new FileReader;i.onerror=e,i.onloadend=function(e){var i=btoa(e.target.result||"");t({__local_forage_encoded_blob:!0,data:i,type:n.type})},i.readAsBinaryString(n)})));var n})):e})).then((function(e){var i=o.db.transaction(o.storeName,"readwrite"),a=i.objectStore(o.storeName);null===e&&(e=void 0),i.oncomplete=function(){void 0===e&&(e=null),n(e)},i.onabort=i.onerror=function(){var t=s.error?s.error:s.transaction.error;r(t)};var s=a.put(e,t)})).catch(r)}));return s(r,n),r},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readwrite"),a=o.objectStore(r.storeName).delete(t);o.oncomplete=function(){e()},o.onerror=function(){i(a.error)},o.onabort=function(){var t=a.error?a.error:a.transaction.error;i(t)}})).catch(i)}));return s(i,e),i},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readwrite"),o=r.objectStore(i.storeName).clear();r.oncomplete=function(){t()},r.onabort=r.onerror=function(){var t=o.error?o.error:o.transaction.error;n(t)}})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName).count();r.onsuccess=function(){t(r.result)},r.onerror=function(){n(r.error)}})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,i=new a((function(e,i){t<0?e(null):n.ready().then((function(){var r=n._dbInfo,o=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),a=!1,s=o.openCursor();s.onsuccess=function(){var n=s.result;n?0===t||a?e(n.key):(a=!0,n.advance(t)):e(null)},s.onerror=function(){i(s.error)}})).catch(i)}));return s(i,e),i},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo,r=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName).openCursor(),o=[];r.onsuccess=function(){var e=r.result;e?(o.push(e.key),e.continue()):t(o)},r.onerror=function(){n(r.error)}})).catch(n)}));return s(n,t),n}},b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=/^~~local_forage_type~([^~]+)~/,w="__lfsc__:",E=w.length,M="arbf",T="blob",S="si08",k="ui08",C="uic8",I="si16",L="si32",D="ur16",A="ui32",P="fl32",z="fl64",N=E+M.length,R=Object.prototype.toString;function O(t){var e,n,i,r,o,a=.75*t.length,s=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),u=new Uint8Array(c);for(e=0;e<s;e+=4)n=b.indexOf(t[e]),i=b.indexOf(t[e+1]),r=b.indexOf(t[e+2]),o=b.indexOf(t[e+3]),u[l++]=n<<2|i>>4,u[l++]=(15&i)<<4|r>>2,u[l++]=(3&r)<<6|63&o;return c}function F(t){var e,n=new Uint8Array(t),i="";for(e=0;e<n.length;e+=3)i+=b[n[e]>>2],i+=b[(3&n[e])<<4|n[e+1]>>4],i+=b[(15&n[e+1])<<2|n[e+2]>>6],i+=b[63&n[e+2]];return n.length%3==2?i=i.substring(0,i.length-1)+"=":n.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}var B={serialize:function(t,e){var n="";if(t&&(n=R.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===R.call(t.buffer))){var i,r=w;t instanceof ArrayBuffer?(i=t,r+=M):(i=t.buffer,"[object Int8Array]"===n?r+=S:"[object Uint8Array]"===n?r+=k:"[object Uint8ClampedArray]"===n?r+=C:"[object Int16Array]"===n?r+=I:"[object Uint16Array]"===n?r+=D:"[object Int32Array]"===n?r+=L:"[object Uint32Array]"===n?r+=A:"[object Float32Array]"===n?r+=P:"[object Float64Array]"===n?r+=z:e(new Error("Failed to get type for BinaryArray"))),e(r+F(i))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+t.type+"~"+F(this.result);e("__lfsc__:blob"+n)},o.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(n){console.error("Couldn't convert value into a JSON string: ",t),e(null,n)}},deserialize:function(t){if(t.substring(0,E)!==w)return JSON.parse(t);var e,n=t.substring(N),i=t.substring(E,N);if(i===T&&x.test(n)){var r=n.match(x);e=r[1],n=n.substring(r[0].length)}var a=O(n);switch(i){case M:return a;case T:return o([a],{type:e});case S:return new Int8Array(a);case k:return new Uint8Array(a);case C:return new Uint8ClampedArray(a);case I:return new Int16Array(a);case D:return new Uint16Array(a);case L:return new Int32Array(a);case A:return new Uint32Array(a);case P:return new Float32Array(a);case z:return new Float64Array(a);default:throw new Error("Unkown type: "+i)}},stringToBuffer:O,bufferToString:F};var U={_driver:"webSQLStorage",_initStorage:function(t){var e=this,n={db:null};if(t)for(var i in t)n[i]="string"!=typeof t[i]?t[i].toString():t[i];var r=new a((function(t,i){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(t){return i(t)}n.db.transaction((function(r){r.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],(function(){e._dbInfo=n,t()}),(function(t,e){i(e)}))}))}));return n.serializer=B,r},iterate:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("SELECT * FROM "+r.storeName,[],(function(n,i){for(var o=i.rows,a=o.length,s=0;s<a;s++){var l=o.item(s),c=l.value;if(c&&(c=r.serializer.deserialize(c)),void 0!==(c=t(c,l.key,s+1)))return void e(c)}e()}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var i=n.rows.length?n.rows.item(0).value:null;i&&(i=r.serializer.deserialize(i)),e(i)}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=new a((function(n,r){i.ready().then((function(){void 0===e&&(e=null);var o=e,a=i._dbInfo;a.serializer.serialize(e,(function(e,i){i?r(i):a.db.transaction((function(i){i.executeSql("INSERT OR REPLACE INTO "+a.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){n(o)}),(function(t,e){r(e)}))}),(function(t){t.code===t.QUOTA_ERR&&r(t)}))}))})).catch(r)}));return s(r,n),r},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("DELETE FROM "+r.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},clear:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){e.executeSql("DELETE FROM "+i.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},length:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){e.executeSql("SELECT COUNT(key) as c FROM "+i.storeName,[],(function(e,n){var i=n.rows.item(0).c;t(i)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n},key:function(t,e){var n=this,i=new a((function(e,i){n.ready().then((function(){var r=n._dbInfo;r.db.transaction((function(n){n.executeSql("SELECT key FROM "+r.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var i=n.rows.length?n.rows.item(0).key:null;e(i)}),(function(t,e){i(e)}))}))})).catch(i)}));return s(i,e),i},keys:function(t){var e=this,n=new a((function(t,n){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){e.executeSql("SELECT key FROM "+i.storeName,[],(function(e,n){for(var i=[],r=0;r<n.rows.length;r++)i.push(n.rows.item(r).key);t(i)}),(function(t,e){n(e)}))}))})).catch(n)}));return s(n,t),n}};var Y={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=e.name+"/",e.storeName!==this._defaultConfig.storeName&&(e.keyPrefix+=e.storeName+"/"),this._dbInfo=e,e.serializer=B,a.resolve()},iterate:function(t,e){var n=this,i=n.ready().then((function(){for(var e=n._dbInfo,i=e.keyPrefix,r=i.length,o=localStorage.length,a=1,s=0;s<o;s++){var l=localStorage.key(s);if(0===l.indexOf(i)){var c=localStorage.getItem(l);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,l.substring(r),a++)))return c}}}));return s(i,e),i},getItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=n.ready().then((function(){var e=n._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i}));return s(i,e),i},setItem:function(t,e,n){var i=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var r=i.ready().then((function(){void 0===e&&(e=null);var n=e;return new a((function(r,o){var a=i._dbInfo;a.serializer.serialize(e,(function(e,i){if(i)o(i);else try{localStorage.setItem(a.keyPrefix+t,e),r(n)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||o(t),o(t)}}))}))}));return s(r,n),r},removeItem:function(t,e){var n=this;"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t));var i=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return s(i,e),i},clear:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var i=localStorage.key(n);0===i.indexOf(t)&&localStorage.removeItem(i)}}));return s(n,t),n},length:function(t){var e=this.keys().then((function(t){return t.length}));return s(e,t),e},key:function(t,e){var n=this,i=n.ready().then((function(){var e,i=n._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e}));return s(i,e),i},keys:function(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,i=[],r=0;r<n;r++)0===localStorage.key(r).indexOf(t.keyPrefix)&&i.push(localStorage.key(r).substring(t.keyPrefix.length));return i}));return s(n,t),n}},j={},V={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},G=[V.INDEXEDDB,V.WEBSQL,V.LOCALSTORAGE],q=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],H={description:"",driver:G.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},$={};$[V.INDEXEDDB]=function(){try{return!!r&&!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&r&&"function"==typeof r.open&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),$[V.WEBSQL]="function"==typeof openDatabase,$[V.LOCALSTORAGE]=function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(t){return!1}}();var Z=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function W(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function X(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Z(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}function K(t){for(var e in V)if(V.hasOwnProperty(e)&&V[e]===t)return!0;return!1}var J=new(function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.INDEXEDDB=V.INDEXEDDB,this.LOCALSTORAGE=V.LOCALSTORAGE,this.WEBSQL=V.WEBSQL,this._defaultConfig=X({},H),this._config=X({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":i(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t)"storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),this._config[e]=t[e];return"driver"in t&&t.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var i=new a((function(e,n){try{var i=t._driver,r=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),o=new Error("Custom driver name already in use: "+t._driver);if(!t._driver)return void n(r);if(K(t._driver))return void n(o);for(var s=q.concat("_initStorage"),l=0;l<s.length;l++){var c=s[l];if(!c||!t[c]||"function"!=typeof t[c])return void n(r)}var u=a.resolve(!0);"_support"in t&&(u=t._support&&"function"==typeof t._support?t._support():a.resolve(!!t._support)),u.then((function(n){$[i]=n,j[i]=t,e()}),n)}catch(t){n(t)}}));return l(i,e,n),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var i=this,r=a.resolve().then((function(){if(!K(t)){if(j[t])return j[t];throw new Error("Driver not found.")}switch(t){case i.INDEXEDDB:return v;case i.LOCALSTORAGE:return Y;case i.WEBSQL:return U}}));return l(r,e,n),r},t.prototype.getSerializer=function(t){var e=a.resolve(B);return l(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return l(n,t,t),n},t.prototype.setDriver=function(t,e,n){var i=this;Z(t)||(t=[t]);var r=this._getSupportedDrivers(t);function o(){i._config.driver=i.driver()}var s=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=s.then((function(){var t=r[0];return i._dbInfo=null,i._ready=null,i.getDriver(t).then((function(t){i._driver=t._driver,o(),i._wrapLibraryMethodsWithReady(),i._initDriver=function(t){return function(){var e=0;return function n(){for(;e<t.length;){var r=t[e];return e++,i._dbInfo=null,i._ready=null,i.getDriver(r).then((function(t){return i._extend(t),o(),i._ready=i._initStorage(i._config),i._ready})).catch(n)}o();var s=new Error("No available storage method found.");return i._driverSet=a.reject(s),i._driverSet}()}}(r)}))})).catch((function(){o();var t=new Error("No available storage method found.");return i._driverSet=a.reject(t),i._driverSet})),l(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!$[t]},t.prototype._extend=function(t){X(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];this.supports(r)&&e.push(r)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0;t<q.length;t++)W(this,q[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=J},{3:3}]},{},[4])(4)},6486:function(t,e,n){var i;t=n.nmd(t),function(){var r,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",l=32,c=128,u=1/0,h=9007199254740991,d=NaN,p=4294967295,f=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",l],["partialRight",64],["rearg",256]],m="[object Arguments]",g="[object Array]",_="[object Boolean]",y="[object Date]",v="[object Error]",b="[object Function]",x="[object GeneratorFunction]",w="[object Map]",E="[object Number]",M="[object Object]",T="[object Promise]",S="[object RegExp]",k="[object Set]",C="[object String]",I="[object Symbol]",L="[object WeakMap]",D="[object ArrayBuffer]",A="[object DataView]",P="[object Float32Array]",z="[object Float64Array]",N="[object Int8Array]",R="[object Int16Array]",O="[object Int32Array]",F="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",Y="[object Uint32Array]",j=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,$=RegExp(q.source),Z=RegExp(H.source),W=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),it=/^\s+/,rt=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="a-z\\xdf-\\xf6\\xf8-\\xff",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",Mt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tt="["+Mt+"]",St="["+xt+"]",kt="\\d+",Ct="["+wt+"]",It="[^\\ud800-\\udfff"+Mt+kt+"\\u2700-\\u27bf"+wt+Et+"]",Lt="\\ud83c[\\udffb-\\udfff]",Dt="[^\\ud800-\\udfff]",At="(?:\\ud83c[\\udde6-\\uddff]){2}",Pt="[\\ud800-\\udbff][\\udc00-\\udfff]",zt="["+Et+"]",Nt="(?:"+Ct+"|"+It+")",Rt="(?:"+zt+"|"+It+")",Ot="(?:['’](?:d|ll|m|re|s|t|ve))?",Ft="(?:['’](?:D|LL|M|RE|S|T|VE))?",Bt="(?:"+St+"|"+Lt+")?",Ut="[\\ufe0e\\ufe0f]?",Yt=Ut+Bt+"(?:\\u200d(?:"+[Dt,At,Pt].join("|")+")"+Ut+Bt+")*",jt="(?:"+["[\\u2700-\\u27bf]",At,Pt].join("|")+")"+Yt,Vt="(?:"+[Dt+St+"?",St,At,Pt,"[\\ud800-\\udfff]"].join("|")+")",Gt=RegExp("['’]","g"),qt=RegExp(St,"g"),Ht=RegExp(Lt+"(?="+Lt+")|"+Vt+Yt,"g"),$t=RegExp([zt+"?"+Ct+"+"+Ot+"(?="+[Tt,zt,"$"].join("|")+")",Rt+"+"+Ft+"(?="+[Tt,zt+Nt,"$"].join("|")+")",zt+"?"+Nt+"+"+Ot,zt+"+"+Ft,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kt,jt].join("|"),"g"),Zt=RegExp("[\\u200d\\ud800-\\udfff"+xt+"\\ufe0e\\ufe0f]"),Wt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kt=-1,Jt={};Jt[P]=Jt[z]=Jt[N]=Jt[R]=Jt[O]=Jt[F]=Jt[B]=Jt[U]=Jt[Y]=!0,Jt[m]=Jt[g]=Jt[D]=Jt[_]=Jt[A]=Jt[y]=Jt[v]=Jt[b]=Jt[w]=Jt[E]=Jt[M]=Jt[S]=Jt[k]=Jt[C]=Jt[L]=!1;var Qt={};Qt[m]=Qt[g]=Qt[D]=Qt[A]=Qt[_]=Qt[y]=Qt[P]=Qt[z]=Qt[N]=Qt[R]=Qt[O]=Qt[w]=Qt[E]=Qt[M]=Qt[S]=Qt[k]=Qt[C]=Qt[I]=Qt[F]=Qt[B]=Qt[U]=Qt[Y]=!0,Qt[v]=Qt[b]=Qt[L]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,ie="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,re="object"==typeof self&&self&&self.Object===Object&&self,oe=ie||re||Function("return this")(),ae=e&&!e.nodeType&&e,se=ae&&t&&!t.nodeType&&t,le=se&&se.exports===ae,ce=le&&ie.process,ue=function(){try{return se&&se.require&&se.require("util").types||ce&&ce.binding&&ce.binding("util")}catch(t){}}(),he=ue&&ue.isArrayBuffer,de=ue&&ue.isDate,pe=ue&&ue.isMap,fe=ue&&ue.isRegExp,me=ue&&ue.isSet,ge=ue&&ue.isTypedArray;function _e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ye(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(i,a,n(a),t)}return i}function ve(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function xe(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function we(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function Ee(t,e){return!(null==t||!t.length)&&Pe(t,e,0)>-1}function Me(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function Te(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function Se(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function ke(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function Ce(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Ie(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var Le=Oe("length");function De(t,e,n){var i;return n(t,(function(t,n,r){if(e(t,n,r))return i=n,!1})),i}function Ae(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Pe(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Ae(t,Ne,n)}function ze(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Ne(t){return t!=t}function Re(t,e){var n=null==t?0:t.length;return n?Ue(t,e)/n:d}function Oe(t){return function(e){return null==e?r:e[t]}}function Fe(t){return function(e){return null==t?r:t[e]}}function Be(t,e,n,i,r){return r(t,(function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)})),n}function Ue(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function Ye(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function je(t){return t?t.slice(0,sn(t)+1).replace(it,""):t}function Ve(t){return function(e){return t(e)}}function Ge(t,e){return Te(e,(function(e){return t[e]}))}function qe(t,e){return t.has(e)}function He(t,e){for(var n=-1,i=t.length;++n<i&&Pe(e,t[n],0)>-1;);return n}function $e(t,e){for(var n=t.length;n--&&Pe(e,t[n],0)>-1;);return n}function Ze(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}var We=Fe({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Xe=Fe({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ke(t){return"\\"+te[t]}function Je(t){return Zt.test(t)}function Qe(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function tn(t,e){return function(n){return t(e(n))}}function en(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[r++]=n)}return o}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function rn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function on(t){return Je(t)?function(t){for(var e=Ht.lastIndex=0;Ht.test(t);)++e;return e}(t):Le(t)}function an(t){return Je(t)?function(t){return t.match(Ht)||[]}(t):function(t){return t.split("")}(t)}function sn(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var ln=Fe({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),cn=function t(e){var n,i=(e=null==e?oe:cn.defaults(oe.Object(),e,cn.pick(oe,Xt))).Array,rt=e.Date,xt=e.Error,wt=e.Function,Et=e.Math,Mt=e.Object,Tt=e.RegExp,St=e.String,kt=e.TypeError,Ct=i.prototype,It=wt.prototype,Lt=Mt.prototype,Dt=e["__core-js_shared__"],At=It.toString,Pt=Lt.hasOwnProperty,zt=0,Nt=(n=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Rt=Lt.toString,Ot=At.call(Mt),Ft=oe._,Bt=Tt("^"+At.call(Pt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=le?e.Buffer:r,Yt=e.Symbol,jt=e.Uint8Array,Vt=Ut?Ut.allocUnsafe:r,Ht=tn(Mt.getPrototypeOf,Mt),Zt=Mt.create,te=Lt.propertyIsEnumerable,ie=Ct.splice,re=Yt?Yt.isConcatSpreadable:r,ae=Yt?Yt.iterator:r,se=Yt?Yt.toStringTag:r,ce=function(){try{var t=co(Mt,"defineProperty");return t({},"",{}),t}catch(t){}}(),ue=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Le=rt&&rt.now!==oe.Date.now&&rt.now,Fe=e.setTimeout!==oe.setTimeout&&e.setTimeout,un=Et.ceil,hn=Et.floor,dn=Mt.getOwnPropertySymbols,pn=Ut?Ut.isBuffer:r,fn=e.isFinite,mn=Ct.join,gn=tn(Mt.keys,Mt),_n=Et.max,yn=Et.min,vn=rt.now,bn=e.parseInt,xn=Et.random,wn=Ct.reverse,En=co(e,"DataView"),Mn=co(e,"Map"),Tn=co(e,"Promise"),Sn=co(e,"Set"),kn=co(e,"WeakMap"),Cn=co(Mt,"create"),In=kn&&new kn,Ln={},Dn=Bo(En),An=Bo(Mn),Pn=Bo(Tn),zn=Bo(Sn),Nn=Bo(kn),Rn=Yt?Yt.prototype:r,On=Rn?Rn.valueOf:r,Fn=Rn?Rn.toString:r;function Bn(t){if(ns(t)&&!qa(t)&&!(t instanceof Vn)){if(t instanceof jn)return t;if(Pt.call(t,"__wrapped__"))return Uo(t)}return new jn(t)}var Un=function(){function t(){}return function(e){if(!es(e))return{};if(Zt)return Zt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Yn(){}function jn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function $n(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Hn;++e<n;)this.add(t[e])}function Zn(t){var e=this.__data__=new qn(t);this.size=e.size}function Wn(t,e){var n=qa(t),i=!n&&Ga(t),r=!n&&!i&&Wa(t),o=!n&&!i&&!r&&us(t),a=n||i||r||o,s=a?Ye(t.length,St):[],l=s.length;for(var c in t)!e&&!Pt.call(t,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_o(c,l))||s.push(c);return s}function Xn(t){var e=t.length;return e?t[Hi(0,e-1)]:r}function Kn(t,e){return zo(kr(t),ai(e,0,t.length))}function Jn(t){return zo(kr(t))}function Qn(t,e,n){(n!==r&&!Ya(t[e],n)||n===r&&!(e in t))&&ri(t,e,n)}function ti(t,e,n){var i=t[e];Pt.call(t,e)&&Ya(i,n)&&(n!==r||e in t)||ri(t,e,n)}function ei(t,e){for(var n=t.length;n--;)if(Ya(t[n][0],e))return n;return-1}function ni(t,e,n,i){return hi(t,(function(t,r,o){e(i,t,n(t),o)})),i}function ii(t,e){return t&&Cr(e,As(e),t)}function ri(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function oi(t,e){for(var n=-1,o=e.length,a=i(o),s=null==t;++n<o;)a[n]=s?r:ks(t,e[n]);return a}function ai(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function si(t,e,n,i,o,a){var s,l=1&e,c=2&e,u=4&e;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!es(t))return t;var h=qa(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Pt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!l)return kr(t,s)}else{var d=po(t),p=d==b||d==x;if(Wa(t))return xr(t,l);if(d==M||d==m||p&&!o){if(s=c||p?{}:mo(t),!l)return c?function(t,e){return Cr(t,ho(t),e)}(t,function(t,e){return t&&Cr(e,Ps(e),t)}(s,t)):function(t,e){return Cr(t,uo(t),e)}(t,ii(s,t))}else{if(!Qt[d])return o?t:{};s=function(t,e,n){var i,r=t.constructor;switch(e){case D:return wr(t);case _:case y:return new r(+t);case A:return function(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case P:case z:case N:case R:case O:case F:case B:case U:case Y:return Er(t,n);case w:return new r;case E:case C:return new r(t);case S:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case k:return new r;case I:return i=t,On?Mt(On.call(i)):{}}}(t,d,l)}}a||(a=new Zn);var f=a.get(t);if(f)return f;a.set(t,s),ss(t)?t.forEach((function(i){s.add(si(i,e,n,i,t,a))})):is(t)&&t.forEach((function(i,r){s.set(r,si(i,e,n,r,t,a))}));var g=h?r:(u?c?no:eo:c?Ps:As)(t);return ve(g||t,(function(i,r){g&&(i=t[r=i]),ti(s,r,si(i,e,n,r,t,a))})),s}function li(t,e,n){var i=n.length;if(null==t)return!i;for(t=Mt(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function ci(t,e,n){if("function"!=typeof t)throw new kt(o);return Lo((function(){t.apply(r,n)}),e)}function ui(t,e,n,i){var r=-1,o=Ee,a=!0,s=t.length,l=[],c=e.length;if(!s)return l;n&&(e=Te(e,Ve(n))),i?(o=Me,a=!1):e.length>=200&&(o=qe,a=!1,e=new $n(e));t:for(;++r<s;){var u=t[r],h=null==n?u:n(u);if(u=i||0!==u?u:0,a&&h==h){for(var d=c;d--;)if(e[d]===h)continue t;l.push(u)}else o(e,h,i)||l.push(u)}return l}Bn.templateSettings={escape:W,evaluate:X,interpolate:K,variable:"",imports:{_:Bn}},Bn.prototype=Yn.prototype,Bn.prototype.constructor=Bn,jn.prototype=Un(Yn.prototype),jn.prototype.constructor=jn,Vn.prototype=Un(Yn.prototype),Vn.prototype.constructor=Vn,Gn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(Cn){var n=e[t];return n===a?r:n}return Pt.call(e,t)?e[t]:r},Gn.prototype.has=function(t){var e=this.__data__;return Cn?e[t]!==r:Pt.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Cn&&e===r?a:e,this},qn.prototype.clear=function(){this.__data__=[],this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=ei(e,t);return!(n<0||(n==e.length-1?e.pop():ie.call(e,n,1),--this.size,0))},qn.prototype.get=function(t){var e=this.__data__,n=ei(e,t);return n<0?r:e[n][1]},qn.prototype.has=function(t){return ei(this.__data__,t)>-1},qn.prototype.set=function(t,e){var n=this.__data__,i=ei(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Hn.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Mn||qn),string:new Gn}},Hn.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Hn.prototype.get=function(t){return so(this,t).get(t)},Hn.prototype.has=function(t){return so(this,t).has(t)},Hn.prototype.set=function(t,e){var n=so(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},$n.prototype.add=$n.prototype.push=function(t){return this.__data__.set(t,a),this},$n.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.clear=function(){this.__data__=new qn,this.size=0},Zn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zn.prototype.get=function(t){return this.__data__.get(t)},Zn.prototype.has=function(t){return this.__data__.has(t)},Zn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof qn){var i=n.__data__;if(!Mn||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Hn(i)}return n.set(t,e),this.size=n.size,this};var hi=Dr(vi),di=Dr(bi,!0);function pi(t,e){var n=!0;return hi(t,(function(t,i,r){return n=!!e(t,i,r)})),n}function fi(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(l===r?s==s&&!cs(s):n(s,l)))var l=s,c=a}return c}function mi(t,e){var n=[];return hi(t,(function(t,i,r){e(t,i,r)&&n.push(t)})),n}function gi(t,e,n,i,r){var o=-1,a=t.length;for(n||(n=go),r||(r=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?gi(s,e-1,n,i,r):Se(r,s):i||(r[r.length]=s)}return r}var _i=Ar(),yi=Ar(!0);function vi(t,e){return t&&_i(t,e,As)}function bi(t,e){return t&&yi(t,e,As)}function xi(t,e){return we(e,(function(e){return Ja(t[e])}))}function wi(t,e){for(var n=0,i=(e=_r(e,t)).length;null!=t&&n<i;)t=t[Fo(e[n++])];return n&&n==i?t:r}function Ei(t,e,n){var i=e(t);return qa(t)?i:Se(i,n(t))}function Mi(t){return null==t?t===r?"[object Undefined]":"[object Null]":se&&se in Mt(t)?function(t){var e=Pt.call(t,se),n=t[se];try{t[se]=r;var i=!0}catch(t){}var o=Rt.call(t);return i&&(e?t[se]=n:delete t[se]),o}(t):function(t){return Rt.call(t)}(t)}function Ti(t,e){return t>e}function Si(t,e){return null!=t&&Pt.call(t,e)}function ki(t,e){return null!=t&&e in Mt(t)}function Ci(t,e,n){for(var o=n?Me:Ee,a=t[0].length,s=t.length,l=s,c=i(s),u=1/0,h=[];l--;){var d=t[l];l&&e&&(d=Te(d,Ve(e))),u=yn(d.length,u),c[l]=!n&&(e||a>=120&&d.length>=120)?new $n(l&&d):r}d=t[0];var p=-1,f=c[0];t:for(;++p<a&&h.length<u;){var m=d[p],g=e?e(m):m;if(m=n||0!==m?m:0,!(f?qe(f,g):o(h,g,n))){for(l=s;--l;){var _=c[l];if(!(_?qe(_,g):o(t[l],g,n)))continue t}f&&f.push(g),h.push(m)}}return h}function Ii(t,e,n){var i=null==(t=So(t,e=_r(e,t)))?t:t[Fo(Ko(e))];return null==i?r:_e(i,t,n)}function Li(t){return ns(t)&&Mi(t)==m}function Di(t,e,n,i,o){return t===e||(null==t||null==e||!ns(t)&&!ns(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=qa(t),l=qa(e),c=s?g:po(t),u=l?g:po(e),h=(c=c==m?M:c)==M,d=(u=u==m?M:u)==M,p=c==u;if(p&&Wa(t)){if(!Wa(e))return!1;s=!0,h=!1}if(p&&!h)return a||(a=new Zn),s||us(t)?Qr(t,e,n,i,o,a):function(t,e,n,i,r,o,a){switch(n){case A:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!o(new jt(t),new jt(e)));case _:case y:case E:return Ya(+t,+e);case v:return t.name==e.name&&t.message==e.message;case S:case C:return t==e+"";case w:var s=Qe;case k:var l=1&i;if(s||(s=nn),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;i|=2,a.set(t,e);var u=Qr(s(t),s(e),i,r,o,a);return a.delete(t),u;case I:if(On)return On.call(t)==On.call(e)}return!1}(t,e,c,n,i,o,a);if(!(1&n)){var f=h&&Pt.call(t,"__wrapped__"),b=d&&Pt.call(e,"__wrapped__");if(f||b){var x=f?t.value():t,T=b?e.value():e;return a||(a=new Zn),o(x,T,n,i,a)}}return!!p&&(a||(a=new Zn),function(t,e,n,i,o,a){var s=1&n,l=eo(t),c=l.length;if(c!=eo(e).length&&!s)return!1;for(var u=c;u--;){var h=l[u];if(!(s?h in e:Pt.call(e,h)))return!1}var d=a.get(t),p=a.get(e);if(d&&p)return d==e&&p==t;var f=!0;a.set(t,e),a.set(e,t);for(var m=s;++u<c;){var g=t[h=l[u]],_=e[h];if(i)var y=s?i(_,g,h,e,t,a):i(g,_,h,t,e,a);if(!(y===r?g===_||o(g,_,n,i,a):y)){f=!1;break}m||(m="constructor"==h)}if(f&&!m){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(f=!1)}return a.delete(t),a.delete(e),f}(t,e,n,i,o,a))}(t,e,n,i,Di,o))}function Ai(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=Mt(t);o--;){var l=n[o];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<a;){var c=(l=n[o])[0],u=t[c],h=l[1];if(s&&l[2]){if(u===r&&!(c in t))return!1}else{var d=new Zn;if(i)var p=i(u,h,c,t,e,d);if(!(p===r?Di(h,u,3,i,d):p))return!1}}return!0}function Pi(t){return!(!es(t)||(e=t,Nt&&Nt in e))&&(Ja(t)?Bt:mt).test(Bo(t));var e}function zi(t){return"function"==typeof t?t:null==t?rl:"object"==typeof t?qa(t)?Bi(t[0],t[1]):Fi(t):pl(t)}function Ni(t){if(!wo(t))return gn(t);var e=[];for(var n in Mt(t))Pt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ri(t,e){return t<e}function Oi(t,e){var n=-1,r=$a(t)?i(t.length):[];return hi(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Fi(t){var e=lo(t);return 1==e.length&&e[0][2]?Mo(e[0][0],e[0][1]):function(n){return n===t||Ai(n,t,e)}}function Bi(t,e){return vo(t)&&Eo(e)?Mo(Fo(t),e):function(n){var i=ks(n,t);return i===r&&i===e?Cs(n,t):Di(e,i,3)}}function Ui(t,e,n,i,o){t!==e&&_i(e,(function(a,s){if(o||(o=new Zn),es(a))!function(t,e,n,i,o,a,s){var l=Co(t,n),c=Co(e,n),u=s.get(c);if(u)Qn(t,n,u);else{var h=a?a(l,c,n+"",t,e,s):r,d=h===r;if(d){var p=qa(c),f=!p&&Wa(c),m=!p&&!f&&us(c);h=c,p||f||m?qa(l)?h=l:Za(l)?h=kr(l):f?(d=!1,h=xr(c,!0)):m?(d=!1,h=Er(c,!0)):h=[]:os(c)||Ga(c)?(h=l,Ga(l)?h=ys(l):es(l)&&!Ja(l)||(h=mo(c))):d=!1}d&&(s.set(c,h),o(h,c,i,a,s),s.delete(c)),Qn(t,n,h)}}(t,e,s,n,Ui,i,o);else{var l=i?i(Co(t,s),a,s+"",t,e,o):r;l===r&&(l=a),Qn(t,s,l)}}),Ps)}function Yi(t,e){var n=t.length;if(n)return _o(e+=e<0?n:0,n)?t[e]:r}function ji(t,e,n){e=e.length?Te(e,(function(t){return qa(t)?function(e){return wi(e,1===t.length?t[0]:t)}:t})):[rl];var i=-1;e=Te(e,Ve(ao()));var r=Oi(t,(function(t,n,r){var o=Te(e,(function(e){return e(t)}));return{criteria:o,index:++i,value:t}}));return function(t,e){var i=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,a=r.length,s=n.length;++i<a;){var l=Mr(r[i],o[i]);if(l)return i>=s?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}(t,e,n)}));i--;)t[i]=t[i].value;return t}(r)}function Vi(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=wi(t,a);n(s,a)&&Ki(o,_r(a,t),s)}return o}function Gi(t,e,n,i){var r=i?ze:Pe,o=-1,a=e.length,s=t;for(t===e&&(e=kr(e)),n&&(s=Te(t,Ve(n)));++o<a;)for(var l=0,c=e[o],u=n?n(c):c;(l=r(s,u,l,i))>-1;)s!==t&&ie.call(s,l,1),ie.call(t,l,1);return t}function qi(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;_o(r)?ie.call(t,r,1):cr(t,r)}}return t}function Hi(t,e){return t+hn(xn()*(e-t+1))}function $i(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=hn(e/2))&&(t+=t)}while(e);return n}function Zi(t,e){return Do(To(t,e,rl),t+"")}function Wi(t){return Xn(Ys(t))}function Xi(t,e){var n=Ys(t);return zo(n,ai(e,0,n.length))}function Ki(t,e,n,i){if(!es(t))return t;for(var o=-1,a=(e=_r(e,t)).length,s=a-1,l=t;null!=l&&++o<a;){var c=Fo(e[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var h=l[c];(u=i?i(h,c,l):r)===r&&(u=es(h)?h:_o(e[o+1])?[]:{})}ti(l,c,u),l=l[c]}return t}var Ji=In?function(t,e){return In.set(t,e),t}:rl,Qi=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:rl;function tr(t){return zo(Ys(t))}function er(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=i(o);++r<o;)a[r]=t[r+e];return a}function nr(t,e){var n;return hi(t,(function(t,i,r){return!(n=e(t,i,r))})),!!n}function ir(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;i<r;){var o=i+r>>>1,a=t[o];null!==a&&!cs(a)&&(n?a<=e:a<e)?i=o+1:r=o}return r}return rr(t,e,rl,n)}function rr(t,e,n,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,l=null===e,c=cs(e),u=e===r;o<a;){var h=hn((o+a)/2),d=n(t[h]),p=d!==r,f=null===d,m=d==d,g=cs(d);if(s)var _=i||m;else _=u?m&&(i||p):l?m&&p&&(i||!f):c?m&&p&&!f&&(i||!g):!f&&!g&&(i?d<=e:d<e);_?o=h+1:a=h}return yn(a,4294967294)}function or(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var a=t[n],s=e?e(a):a;if(!n||!Ya(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function ar(t){return"number"==typeof t?t:cs(t)?d:+t}function sr(t){if("string"==typeof t)return t;if(qa(t))return Te(t,sr)+"";if(cs(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function lr(t,e,n){var i=-1,r=Ee,o=t.length,a=!0,s=[],l=s;if(n)a=!1,r=Me;else if(o>=200){var c=e?null:$r(t);if(c)return nn(c);a=!1,r=qe,l=new $n}else l=e?[]:s;t:for(;++i<o;){var u=t[i],h=e?e(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue t;e&&l.push(h),s.push(u)}else r(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}function cr(t,e){return null==(t=So(t,e=_r(e,t)))||delete t[Fo(Ko(e))]}function ur(t,e,n,i){return Ki(t,e,n(wi(t,e)),i)}function hr(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?er(t,i?0:o,i?o+1:r):er(t,i?o+1:0,i?r:o)}function dr(t,e){var n=t;return n instanceof Vn&&(n=n.value()),ke(e,(function(t,e){return e.func.apply(e.thisArg,Se([t],e.args))}),n)}function pr(t,e,n){var r=t.length;if(r<2)return r?lr(t[0]):[];for(var o=-1,a=i(r);++o<r;)for(var s=t[o],l=-1;++l<r;)l!=o&&(a[o]=ui(a[o]||s,t[l],e,n));return lr(gi(a,1),e,n)}function fr(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var l=i<a?e[i]:r;n(s,t[i],l)}return s}function mr(t){return Za(t)?t:[]}function gr(t){return"function"==typeof t?t:rl}function _r(t,e){return qa(t)?t:vo(t,e)?[t]:Oo(vs(t))}var yr=Zi;function vr(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:er(t,e,n)}var br=ue||function(t){return oe.clearTimeout(t)};function xr(t,e){if(e)return t.slice();var n=t.length,i=Vt?Vt(n):new t.constructor(n);return t.copy(i),i}function wr(t){var e=new t.constructor(t.byteLength);return new jt(e).set(new jt(t)),e}function Er(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Mr(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=cs(t),s=e!==r,l=null===e,c=e==e,u=cs(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&t<e||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}function Tr(t,e,n,r){for(var o=-1,a=t.length,s=n.length,l=-1,c=e.length,u=_n(a-s,0),h=i(c+u),d=!r;++l<c;)h[l]=e[l];for(;++o<s;)(d||o<a)&&(h[n[o]]=t[o]);for(;u--;)h[l++]=t[o++];return h}function Sr(t,e,n,r){for(var o=-1,a=t.length,s=-1,l=n.length,c=-1,u=e.length,h=_n(a-l,0),d=i(h+u),p=!r;++o<h;)d[o]=t[o];for(var f=o;++c<u;)d[f+c]=e[c];for(;++s<l;)(p||o<a)&&(d[f+n[s]]=t[o++]);return d}function kr(t,e){var n=-1,r=t.length;for(e||(e=i(r));++n<r;)e[n]=t[n];return e}function Cr(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var l=e[a],c=i?i(n[l],t[l],l,n,t):r;c===r&&(c=t[l]),o?ri(n,l,c):ti(n,l,c)}return n}function Ir(t,e){return function(n,i){var r=qa(n)?ye:ni,o=e?e():{};return r(n,t,ao(i,2),o)}}function Lr(t){return Zi((function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&yo(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=Mt(e);++i<o;){var l=n[i];l&&t(e,l,i,a)}return e}))}function Dr(t,e){return function(n,i){if(null==n)return n;if(!$a(n))return t(n,i);for(var r=n.length,o=e?r:-1,a=Mt(n);(e?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function Ar(t){return function(e,n,i){for(var r=-1,o=Mt(e),a=i(e),s=a.length;s--;){var l=a[t?s:++r];if(!1===n(o[l],l,o))break}return e}}function Pr(t){return function(e){var n=Je(e=vs(e))?an(e):r,i=n?n[0]:e.charAt(0),o=n?vr(n,1).join(""):e.slice(1);return i[t]()+o}}function zr(t){return function(e){return ke(Js(Gs(e).replace(Gt,"")),t,"")}}function Nr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Un(t.prototype),i=t.apply(n,e);return es(i)?i:n}}function Rr(t){return function(e,n,i){var o=Mt(e);if(!$a(e)){var a=ao(n,3);e=As(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function Or(t){return to((function(e){var n=e.length,i=n,a=jn.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new kt(o);if(a&&!l&&"wrapper"==ro(s))var l=new jn([],!0)}for(i=l?i:n;++i<n;){var c=ro(s=e[i]),u="wrapper"==c?io(s):r;l=u&&bo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[ro(u[0])].apply(l,u[3]):1==s.length&&bo(s)?l[c]():l.thru(s)}return function(){var t=arguments,i=t[0];if(l&&1==t.length&&qa(i))return l.plant(i).value();for(var r=0,o=n?e[r].apply(this,t):i;++r<n;)o=e[r].call(this,o);return o}}))}function Fr(t,e,n,o,a,s,l,u,h,d){var p=e&c,f=1&e,m=2&e,g=24&e,_=512&e,y=m?r:Nr(t);return function r(){for(var c=arguments.length,v=i(c),b=c;b--;)v[b]=arguments[b];if(g)var x=oo(r),w=Ze(v,x);if(o&&(v=Tr(v,o,a,g)),s&&(v=Sr(v,s,l,g)),c-=w,g&&c<d){var E=en(v,x);return qr(t,e,Fr,r.placeholder,n,v,E,u,h,d-c)}var M=f?n:this,T=m?M[t]:t;return c=v.length,u?v=ko(v,u):_&&c>1&&v.reverse(),p&&h<c&&(v.length=h),this&&this!==oe&&this instanceof r&&(T=y||Nr(T)),T.apply(M,v)}}function Br(t,e){return function(n,i){return function(t,e,n,i){return vi(t,(function(t,r,o){e(i,n(t),r,o)})),i}(n,t,e(i),{})}}function Ur(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=sr(n),i=sr(i)):(n=ar(n),i=ar(i)),o=t(n,i)}return o}}function Yr(t){return to((function(e){return e=Te(e,Ve(ao())),Zi((function(n){var i=this;return t(e,(function(t){return _e(t,i,n)}))}))}))}function jr(t,e){var n=(e=e===r?" ":sr(e)).length;if(n<2)return n?$i(e,t):e;var i=$i(e,un(t/on(e)));return Je(e)?vr(an(i),0,t).join(""):i.slice(0,t)}function Vr(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=r),e=fs(e),n===r?(n=e,e=0):n=fs(n),function(t,e,n,r){for(var o=-1,a=_n(un((e-t)/(n||1)),0),s=i(a);a--;)s[r?a:++o]=t,t+=n;return s}(e,n,o=o===r?e<n?1:-1:fs(o),t)}}function Gr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=_s(e),n=_s(n)),t(e,n)}}function qr(t,e,n,i,o,a,s,c,u,h){var d=8&e;e|=d?l:64,4&(e&=~(d?64:l))||(e&=-4);var p=[t,e,o,d?a:r,d?s:r,d?r:a,d?r:s,c,u,h],f=n.apply(r,p);return bo(t)&&Io(f,p),f.placeholder=i,Ao(f,t,e)}function Hr(t){var e=Et[t];return function(t,n){if(t=_s(t),(n=null==n?0:yn(ms(n),292))&&fn(t)){var i=(vs(t)+"e").split("e");return+((i=(vs(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}var $r=Sn&&1/nn(new Sn([,-0]))[1]==u?function(t){return new Sn(t)}:cl;function Zr(t){return function(e){var n=po(e);return n==w?Qe(e):n==k?rn(e):function(t,e){return Te(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Wr(t,e,n,a,u,h,d,p){var f=2&e;if(!f&&"function"!=typeof t)throw new kt(o);var m=a?a.length:0;if(m||(e&=-97,a=u=r),d=d===r?d:_n(ms(d),0),p=p===r?p:ms(p),m-=u?u.length:0,64&e){var g=a,_=u;a=u=r}var y=f?r:io(t),v=[t,e,n,a,u,g,_,h,d,p];if(y&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<131,a=i==c&&8==n||i==c&&256==n&&t[7].length<=e[8]||384==i&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&i&&(t[2]=e[2],r|=1&n?0:4);var l=e[3];if(l){var u=t[3];t[3]=u?Tr(u,l,e[4]):l,t[4]=u?en(t[3],s):e[4]}(l=e[5])&&(u=t[5],t[5]=u?Sr(u,l,e[6]):l,t[6]=u?en(t[5],s):e[6]),(l=e[7])&&(t[7]=l),i&c&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(v,y),t=v[0],e=v[1],n=v[2],a=v[3],u=v[4],!(p=v[9]=v[9]===r?f?0:t.length:_n(v[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)b=8==e||16==e?function(t,e,n){var o=Nr(t);return function a(){for(var s=arguments.length,l=i(s),c=s,u=oo(a);c--;)l[c]=arguments[c];var h=s<3&&l[0]!==u&&l[s-1]!==u?[]:en(l,u);return(s-=h.length)<n?qr(t,e,Fr,a.placeholder,r,l,h,r,r,n-s):_e(this&&this!==oe&&this instanceof a?o:t,this,l)}}(t,e,p):e!=l&&33!=e||u.length?Fr.apply(r,v):function(t,e,n,r){var o=1&e,a=Nr(t);return function e(){for(var s=-1,l=arguments.length,c=-1,u=r.length,h=i(u+l),d=this&&this!==oe&&this instanceof e?a:t;++c<u;)h[c]=r[c];for(;l--;)h[c++]=arguments[++s];return _e(d,o?n:this,h)}}(t,e,n,a);else var b=function(t,e,n){var i=1&e,r=Nr(t);return function e(){return(this&&this!==oe&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return Ao((y?Ji:Io)(b,v),t,e)}function Xr(t,e,n,i){return t===r||Ya(t,Lt[n])&&!Pt.call(i,n)?e:t}function Kr(t,e,n,i,o,a){return es(t)&&es(e)&&(a.set(e,t),Ui(t,e,r,Kr,a),a.delete(e)),t}function Jr(t){return os(t)?r:t}function Qr(t,e,n,i,o,a){var s=1&n,l=t.length,c=e.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var d=-1,p=!0,f=2&n?new $n:r;for(a.set(t,e),a.set(e,t);++d<l;){var m=t[d],g=e[d];if(i)var _=s?i(g,m,d,e,t,a):i(m,g,d,t,e,a);if(_!==r){if(_)continue;p=!1;break}if(f){if(!Ie(e,(function(t,e){if(!qe(f,e)&&(m===t||o(m,t,n,i,a)))return f.push(e)}))){p=!1;break}}else if(m!==g&&!o(m,g,n,i,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function to(t){return Do(To(t,r,Ho),t+"")}function eo(t){return Ei(t,As,uo)}function no(t){return Ei(t,Ps,ho)}var io=In?function(t){return In.get(t)}:cl;function ro(t){for(var e=t.name+"",n=Ln[e],i=Pt.call(Ln,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function oo(t){return(Pt.call(Bn,"placeholder")?Bn:t).placeholder}function ao(){var t=Bn.iteratee||ol;return t=t===ol?zi:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function lo(t){for(var e=As(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Eo(r)]}return e}function co(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Pi(n)?n:r}var uo=dn?function(t){return null==t?[]:(t=Mt(t),we(dn(t),(function(e){return te.call(t,e)})))}:gl,ho=dn?function(t){for(var e=[];t;)Se(e,uo(t)),t=Ht(t);return e}:gl,po=Mi;function fo(t,e,n){for(var i=-1,r=(e=_r(e,t)).length,o=!1;++i<r;){var a=Fo(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&ts(r)&&_o(a,r)&&(qa(t)||Ga(t))}function mo(t){return"function"!=typeof t.constructor||wo(t)?{}:Un(Ht(t))}function go(t){return qa(t)||Ga(t)||!!(re&&t&&t[re])}function _o(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&_t.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!es(n))return!1;var i=typeof e;return!!("number"==i?$a(n)&&_o(e,n.length):"string"==i&&e in n)&&Ya(n[e],t)}function vo(t,e){if(qa(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!cs(t))||Q.test(t)||!J.test(t)||null!=e&&t in Mt(e)}function bo(t){var e=ro(t),n=Bn[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var i=io(n);return!!i&&t===i[0]}(En&&po(new En(new ArrayBuffer(1)))!=A||Mn&&po(new Mn)!=w||Tn&&po(Tn.resolve())!=T||Sn&&po(new Sn)!=k||kn&&po(new kn)!=L)&&(po=function(t){var e=Mi(t),n=e==M?t.constructor:r,i=n?Bo(n):"";if(i)switch(i){case Dn:return A;case An:return w;case Pn:return T;case zn:return k;case Nn:return L}return e});var xo=Dt?Ja:_l;function wo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function Eo(t){return t==t&&!es(t)}function Mo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Mt(n))}}function To(t,e,n){return e=_n(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=_n(r.length-e,0),s=i(a);++o<a;)s[o]=r[e+o];o=-1;for(var l=i(e+1);++o<e;)l[o]=r[o];return l[e]=n(s),_e(t,this,l)}}function So(t,e){return e.length<2?t:wi(t,er(e,0,-1))}function ko(t,e){for(var n=t.length,i=yn(e.length,n),o=kr(t);i--;){var a=e[i];t[i]=_o(a,n)?o[a]:r}return t}function Co(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Io=Po(Ji),Lo=Fe||function(t,e){return oe.setTimeout(t,e)},Do=Po(Qi);function Ao(t,e,n){var i=e+"";return Do(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return ve(f,(function(n){var i="_."+n[0];e&n[1]&&!Ee(t,i)&&t.push(i)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(i),n)))}function Po(t){var e=0,n=0;return function(){var i=vn(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function zo(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=Hi(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var No,Ro,Oo=(No=Na((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,i,r){e.push(i?r.replace(ut,"$1"):n||t)})),e}),(function(t){return 500===Ro.size&&Ro.clear(),t})),Ro=No.cache,No);function Fo(t){if("string"==typeof t||cs(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return At.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Uo(t){if(t instanceof Vn)return t.clone();var e=new jn(t.__wrapped__,t.__chain__);return e.__actions__=kr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Yo=Zi((function(t,e){return Za(t)?ui(t,gi(e,1,Za,!0)):[]})),jo=Zi((function(t,e){var n=Ko(e);return Za(n)&&(n=r),Za(t)?ui(t,gi(e,1,Za,!0),ao(n,2)):[]})),Vo=Zi((function(t,e){var n=Ko(e);return Za(n)&&(n=r),Za(t)?ui(t,gi(e,1,Za,!0),r,n):[]}));function Go(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ms(n);return r<0&&(r=_n(i+r,0)),Ae(t,ao(e,3),r)}function qo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=ms(n),o=n<0?_n(i+o,0):yn(o,i-1)),Ae(t,ao(e,3),o,!0)}function Ho(t){return null!=t&&t.length?gi(t,1):[]}function $o(t){return t&&t.length?t[0]:r}var Zo=Zi((function(t){var e=Te(t,mr);return e.length&&e[0]===t[0]?Ci(e):[]})),Wo=Zi((function(t){var e=Ko(t),n=Te(t,mr);return e===Ko(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Ci(n,ao(e,2)):[]})),Xo=Zi((function(t){var e=Ko(t),n=Te(t,mr);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?Ci(n,r,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:r}var Jo=Zi(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?Gi(t,e):t}var ta=to((function(t,e){var n=null==t?0:t.length,i=oi(t,e);return qi(t,Te(e,(function(t){return _o(t,n)?+t:t})).sort(Mr)),i}));function ea(t){return null==t?t:wn.call(t)}var na=Zi((function(t){return lr(gi(t,1,Za,!0))})),ia=Zi((function(t){var e=Ko(t);return Za(e)&&(e=r),lr(gi(t,1,Za,!0),ao(e,2))})),ra=Zi((function(t){var e=Ko(t);return e="function"==typeof e?e:r,lr(gi(t,1,Za,!0),r,e)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=we(t,(function(t){if(Za(t))return e=_n(t.length,e),!0})),Ye(e,(function(e){return Te(t,Oe(e))}))}function aa(t,e){if(!t||!t.length)return[];var n=oa(t);return null==e?n:Te(n,(function(t){return _e(e,r,t)}))}var sa=Zi((function(t,e){return Za(t)?ui(t,e):[]})),la=Zi((function(t){return pr(we(t,Za))})),ca=Zi((function(t){var e=Ko(t);return Za(e)&&(e=r),pr(we(t,Za),ao(e,2))})),ua=Zi((function(t){var e=Ko(t);return e="function"==typeof e?e:r,pr(we(t,Za),r,e)})),ha=Zi(oa),da=Zi((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,aa(t,n)}));function pa(t){var e=Bn(t);return e.__chain__=!0,e}function fa(t,e){return e(t)}var ma=to((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return oi(e,t)};return!(e>1||this.__actions__.length)&&i instanceof Vn&&_o(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:fa,args:[o],thisArg:r}),new jn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)})),ga=Ir((function(t,e,n){Pt.call(t,n)?++t[n]:ri(t,n,1)})),_a=Rr(Go),ya=Rr(qo);function va(t,e){return(qa(t)?ve:hi)(t,ao(e,3))}function ba(t,e){return(qa(t)?be:di)(t,ao(e,3))}var xa=Ir((function(t,e,n){Pt.call(t,n)?t[n].push(e):ri(t,n,[e])})),wa=Zi((function(t,e,n){var r=-1,o="function"==typeof e,a=$a(t)?i(t.length):[];return hi(t,(function(t){a[++r]=o?_e(e,t,n):Ii(t,e,n)})),a})),Ea=Ir((function(t,e,n){ri(t,n,e)}));function Ma(t,e){return(qa(t)?Te:Oi)(t,ao(e,3))}var Ta=Ir((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Sa=Zi((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),ji(t,gi(e,1),[])})),ka=Le||function(){return oe.Date.now()};function Ca(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Wr(t,c,r,r,r,r,e)}function Ia(t,e){var n;if("function"!=typeof e)throw new kt(o);return t=ms(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var La=Zi((function(t,e,n){var i=1;if(n.length){var r=en(n,oo(La));i|=l}return Wr(t,i,e,n,r)})),Da=Zi((function(t,e,n){var i=3;if(n.length){var r=en(n,oo(Da));i|=l}return Wr(e,i,t,n,r)}));function Aa(t,e,n){var i,a,s,l,c,u,h=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new kt(o);function m(e){var n=i,o=a;return i=a=r,h=e,l=t.apply(o,n)}function g(t){return h=t,c=Lo(y,e),d?m(t):l}function _(t){var n=t-u;return u===r||n>=e||n<0||p&&t-h>=s}function y(){var t=ka();if(_(t))return v(t);c=Lo(y,function(t){var n=e-(t-u);return p?yn(n,s-(t-h)):n}(t))}function v(t){return c=r,f&&i?m(t):(i=a=r,l)}function b(){var t=ka(),n=_(t);if(i=arguments,a=this,u=t,n){if(c===r)return g(u);if(p)return br(c),c=Lo(y,e),m(u)}return c===r&&(c=Lo(y,e)),l}return e=_s(e)||0,es(n)&&(d=!!n.leading,s=(p="maxWait"in n)?_n(_s(n.maxWait)||0,e):s,f="trailing"in n?!!n.trailing:f),b.cancel=function(){c!==r&&br(c),h=0,i=u=a=c=r},b.flush=function(){return c===r?l:v(ka())},b}var Pa=Zi((function(t,e){return ci(t,1,e)})),za=Zi((function(t,e,n){return ci(t,_s(e)||0,n)}));function Na(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new kt(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(Na.Cache||Hn),n}function Ra(t){if("function"!=typeof t)throw new kt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Na.Cache=Hn;var Oa=yr((function(t,e){var n=(e=1==e.length&&qa(e[0])?Te(e[0],Ve(ao())):Te(gi(e,1),Ve(ao()))).length;return Zi((function(i){for(var r=-1,o=yn(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return _e(t,this,i)}))})),Fa=Zi((function(t,e){var n=en(e,oo(Fa));return Wr(t,l,r,e,n)})),Ba=Zi((function(t,e){var n=en(e,oo(Ba));return Wr(t,64,r,e,n)})),Ua=to((function(t,e){return Wr(t,256,r,r,r,e)}));function Ya(t,e){return t===e||t!=t&&e!=e}var ja=Gr(Ti),Va=Gr((function(t,e){return t>=e})),Ga=Li(function(){return arguments}())?Li:function(t){return ns(t)&&Pt.call(t,"callee")&&!te.call(t,"callee")},qa=i.isArray,Ha=he?Ve(he):function(t){return ns(t)&&Mi(t)==D};function $a(t){return null!=t&&ts(t.length)&&!Ja(t)}function Za(t){return ns(t)&&$a(t)}var Wa=pn||_l,Xa=de?Ve(de):function(t){return ns(t)&&Mi(t)==y};function Ka(t){if(!ns(t))return!1;var e=Mi(t);return e==v||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function Ja(t){if(!es(t))return!1;var e=Mi(t);return e==b||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==ms(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ns(t){return null!=t&&"object"==typeof t}var is=pe?Ve(pe):function(t){return ns(t)&&po(t)==w};function rs(t){return"number"==typeof t||ns(t)&&Mi(t)==E}function os(t){if(!ns(t)||Mi(t)!=M)return!1;var e=Ht(t);if(null===e)return!0;var n=Pt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&At.call(n)==Ot}var as=fe?Ve(fe):function(t){return ns(t)&&Mi(t)==S},ss=me?Ve(me):function(t){return ns(t)&&po(t)==k};function ls(t){return"string"==typeof t||!qa(t)&&ns(t)&&Mi(t)==C}function cs(t){return"symbol"==typeof t||ns(t)&&Mi(t)==I}var us=ge?Ve(ge):function(t){return ns(t)&&ts(t.length)&&!!Jt[Mi(t)]},hs=Gr(Ri),ds=Gr((function(t,e){return t<=e}));function ps(t){if(!t)return[];if($a(t))return ls(t)?an(t):kr(t);if(ae&&t[ae])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ae]());var e=po(t);return(e==w?Qe:e==k?nn:Ys)(t)}function fs(t){return t?(t=_s(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ms(t){var e=fs(t),n=e%1;return e==e?n?e-n:e:0}function gs(t){return t?ai(ms(t),0,p):0}function _s(t){if("number"==typeof t)return t;if(cs(t))return d;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=je(t);var n=ft.test(t);return n||gt.test(t)?ne(t.slice(2),n?2:8):pt.test(t)?d:+t}function ys(t){return Cr(t,Ps(t))}function vs(t){return null==t?"":sr(t)}var bs=Lr((function(t,e){if(wo(e)||$a(e))Cr(e,As(e),t);else for(var n in e)Pt.call(e,n)&&ti(t,n,e[n])})),xs=Lr((function(t,e){Cr(e,Ps(e),t)})),ws=Lr((function(t,e,n,i){Cr(e,Ps(e),t,i)})),Es=Lr((function(t,e,n,i){Cr(e,As(e),t,i)})),Ms=to(oi),Ts=Zi((function(t,e){t=Mt(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&yo(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=Ps(a),l=-1,c=s.length;++l<c;){var u=s[l],h=t[u];(h===r||Ya(h,Lt[u])&&!Pt.call(t,u))&&(t[u]=a[u])}return t})),Ss=Zi((function(t){return t.push(r,Kr),_e(Ns,r,t)}));function ks(t,e,n){var i=null==t?r:wi(t,e);return i===r?n:i}function Cs(t,e){return null!=t&&fo(t,e,ki)}var Is=Br((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),t[e]=n}),el(rl)),Ls=Br((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Rt.call(e)),Pt.call(t,e)?t[e].push(n):t[e]=[n]}),ao),Ds=Zi(Ii);function As(t){return $a(t)?Wn(t):Ni(t)}function Ps(t){return $a(t)?Wn(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var n in Mt(t))e.push(n);return e}(t);var e=wo(t),n=[];for(var i in t)("constructor"!=i||!e&&Pt.call(t,i))&&n.push(i);return n}(t)}var zs=Lr((function(t,e,n){Ui(t,e,n)})),Ns=Lr((function(t,e,n,i){Ui(t,e,n,i)})),Rs=to((function(t,e){var n={};if(null==t)return n;var i=!1;e=Te(e,(function(e){return e=_r(e,t),i||(i=e.length>1),e})),Cr(t,no(t),n),i&&(n=si(n,7,Jr));for(var r=e.length;r--;)cr(n,e[r]);return n})),Os=to((function(t,e){return null==t?{}:function(t,e){return Vi(t,e,(function(e,n){return Cs(t,n)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var n=Te(no(t),(function(t){return[t]}));return e=ao(e),Vi(t,n,(function(t,n){return e(t,n[0])}))}var Bs=Zr(As),Us=Zr(Ps);function Ys(t){return null==t?[]:Ge(t,As(t))}var js=zr((function(t,e,n){return e=e.toLowerCase(),t+(n?Vs(e):e)}));function Vs(t){return Ks(vs(t).toLowerCase())}function Gs(t){return(t=vs(t))&&t.replace(yt,We).replace(qt,"")}var qs=zr((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Hs=zr((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),$s=Pr("toLowerCase"),Zs=zr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ws=zr((function(t,e,n){return t+(n?" ":"")+Ks(e)})),Xs=zr((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=Pr("toUpperCase");function Js(t,e,n){return t=vs(t),(e=n?r:e)===r?function(t){return Wt.test(t)}(t)?function(t){return t.match($t)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var Qs=Zi((function(t,e){try{return _e(t,r,e)}catch(t){return Ka(t)?t:new xt(t)}})),tl=to((function(t,e){return ve(e,(function(e){e=Fo(e),ri(t,e,La(t[e],t))})),t}));function el(t){return function(){return t}}var nl=Or(),il=Or(!0);function rl(t){return t}function ol(t){return zi("function"==typeof t?t:si(t,1))}var al=Zi((function(t,e){return function(n){return Ii(n,t,e)}})),sl=Zi((function(t,e){return function(n){return Ii(t,n,e)}}));function ll(t,e,n){var i=As(e),r=xi(e,i);null!=n||es(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=xi(e,As(e)));var o=!(es(n)&&"chain"in n&&!n.chain),a=Ja(t);return ve(r,(function(n){var i=e[n];t[n]=i,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),r=n.__actions__=kr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,Se([this.value()],arguments))})})),t}function cl(){}var ul=Yr(Te),hl=Yr(xe),dl=Yr(Ie);function pl(t){return vo(t)?Oe(Fo(t)):function(t){return function(e){return wi(e,t)}}(t)}var fl=Vr(),ml=Vr(!0);function gl(){return[]}function _l(){return!1}var yl,vl=Ur((function(t,e){return t+e}),0),bl=Hr("ceil"),xl=Ur((function(t,e){return t/e}),1),wl=Hr("floor"),El=Ur((function(t,e){return t*e}),1),Ml=Hr("round"),Tl=Ur((function(t,e){return t-e}),0);return Bn.after=function(t,e){if("function"!=typeof e)throw new kt(o);return t=ms(t),function(){if(--t<1)return e.apply(this,arguments)}},Bn.ary=Ca,Bn.assign=bs,Bn.assignIn=xs,Bn.assignInWith=ws,Bn.assignWith=Es,Bn.at=Ms,Bn.before=Ia,Bn.bind=La,Bn.bindAll=tl,Bn.bindKey=Da,Bn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return qa(t)?t:[t]},Bn.chain=pa,Bn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===r)?1:_n(ms(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,l=i(un(o/e));a<o;)l[s++]=er(t,a,a+=e);return l},Bn.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},Bn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=i(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Se(qa(n)?kr(n):[n],gi(e,1))},Bn.cond=function(t){var e=null==t?0:t.length,n=ao();return t=e?Te(t,(function(t){if("function"!=typeof t[1])throw new kt(o);return[n(t[0]),t[1]]})):[],Zi((function(n){for(var i=-1;++i<e;){var r=t[i];if(_e(r[0],this,n))return _e(r[1],this,n)}}))},Bn.conforms=function(t){return function(t){var e=As(t);return function(n){return li(n,t,e)}}(si(t,1))},Bn.constant=el,Bn.countBy=ga,Bn.create=function(t,e){var n=Un(t);return null==e?n:ii(n,e)},Bn.curry=function t(e,n,i){var o=Wr(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Bn.curryRight=function t(e,n,i){var o=Wr(e,16,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Bn.debounce=Aa,Bn.defaults=Ts,Bn.defaultsDeep=Ss,Bn.defer=Pa,Bn.delay=za,Bn.difference=Yo,Bn.differenceBy=jo,Bn.differenceWith=Vo,Bn.drop=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=n||e===r?1:ms(e))<0?0:e,i):[]},Bn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,0,(e=i-(e=n||e===r?1:ms(e)))<0?0:e):[]},Bn.dropRightWhile=function(t,e){return t&&t.length?hr(t,ao(e,3),!0,!0):[]},Bn.dropWhile=function(t,e){return t&&t.length?hr(t,ao(e,3),!0):[]},Bn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=ms(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:ms(i))<0&&(i+=o),i=n>i?0:gs(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Bn.filter=function(t,e){return(qa(t)?we:mi)(t,ao(e,3))},Bn.flatMap=function(t,e){return gi(Ma(t,e),1)},Bn.flatMapDeep=function(t,e){return gi(Ma(t,e),u)},Bn.flatMapDepth=function(t,e,n){return n=n===r?1:ms(n),gi(Ma(t,e),n)},Bn.flatten=Ho,Bn.flattenDeep=function(t){return null!=t&&t.length?gi(t,u):[]},Bn.flattenDepth=function(t,e){return null!=t&&t.length?gi(t,e=e===r?1:ms(e)):[]},Bn.flip=function(t){return Wr(t,512)},Bn.flow=nl,Bn.flowRight=il,Bn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},Bn.functions=function(t){return null==t?[]:xi(t,As(t))},Bn.functionsIn=function(t){return null==t?[]:xi(t,Ps(t))},Bn.groupBy=xa,Bn.initial=function(t){return null!=t&&t.length?er(t,0,-1):[]},Bn.intersection=Zo,Bn.intersectionBy=Wo,Bn.intersectionWith=Xo,Bn.invert=Is,Bn.invertBy=Ls,Bn.invokeMap=wa,Bn.iteratee=ol,Bn.keyBy=Ea,Bn.keys=As,Bn.keysIn=Ps,Bn.map=Ma,Bn.mapKeys=function(t,e){var n={};return e=ao(e,3),vi(t,(function(t,i,r){ri(n,e(t,i,r),t)})),n},Bn.mapValues=function(t,e){var n={};return e=ao(e,3),vi(t,(function(t,i,r){ri(n,i,e(t,i,r))})),n},Bn.matches=function(t){return Fi(si(t,1))},Bn.matchesProperty=function(t,e){return Bi(t,si(e,1))},Bn.memoize=Na,Bn.merge=zs,Bn.mergeWith=Ns,Bn.method=al,Bn.methodOf=sl,Bn.mixin=ll,Bn.negate=Ra,Bn.nthArg=function(t){return t=ms(t),Zi((function(e){return Yi(e,t)}))},Bn.omit=Rs,Bn.omitBy=function(t,e){return Fs(t,Ra(ao(e)))},Bn.once=function(t){return Ia(2,t)},Bn.orderBy=function(t,e,n,i){return null==t?[]:(qa(e)||(e=null==e?[]:[e]),qa(n=i?r:n)||(n=null==n?[]:[n]),ji(t,e,n))},Bn.over=ul,Bn.overArgs=Oa,Bn.overEvery=hl,Bn.overSome=dl,Bn.partial=Fa,Bn.partialRight=Ba,Bn.partition=Ta,Bn.pick=Os,Bn.pickBy=Fs,Bn.property=pl,Bn.propertyOf=function(t){return function(e){return null==t?r:wi(t,e)}},Bn.pull=Jo,Bn.pullAll=Qo,Bn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Gi(t,e,ao(n,2)):t},Bn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Gi(t,e,r,n):t},Bn.pullAt=ta,Bn.range=fl,Bn.rangeRight=ml,Bn.rearg=Ua,Bn.reject=function(t,e){return(qa(t)?we:mi)(t,Ra(ao(e,3)))},Bn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=ao(e,3);++i<o;){var a=t[i];e(a,i,t)&&(n.push(a),r.push(i))}return qi(t,r),n},Bn.rest=function(t,e){if("function"!=typeof t)throw new kt(o);return Zi(t,e=e===r?e:ms(e))},Bn.reverse=ea,Bn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===r)?1:ms(e),(qa(t)?Kn:Xi)(t,e)},Bn.set=function(t,e,n){return null==t?t:Ki(t,e,n)},Bn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:Ki(t,e,n,i)},Bn.shuffle=function(t){return(qa(t)?Jn:tr)(t)},Bn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=i):(e=null==e?0:ms(e),n=n===r?i:ms(n)),er(t,e,n)):[]},Bn.sortBy=Sa,Bn.sortedUniq=function(t){return t&&t.length?or(t):[]},Bn.sortedUniqBy=function(t,e){return t&&t.length?or(t,ao(e,2)):[]},Bn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=r),(n=n===r?p:n>>>0)?(t=vs(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=sr(e))&&Je(t)?vr(an(t),0,n):t.split(e,n):[]},Bn.spread=function(t,e){if("function"!=typeof t)throw new kt(o);return e=null==e?0:_n(ms(e),0),Zi((function(n){var i=n[e],r=vr(n,0,e);return i&&Se(r,i),_e(t,this,r)}))},Bn.tail=function(t){var e=null==t?0:t.length;return e?er(t,1,e):[]},Bn.take=function(t,e,n){return t&&t.length?er(t,0,(e=n||e===r?1:ms(e))<0?0:e):[]},Bn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?er(t,(e=i-(e=n||e===r?1:ms(e)))<0?0:e,i):[]},Bn.takeRightWhile=function(t,e){return t&&t.length?hr(t,ao(e,3),!1,!0):[]},Bn.takeWhile=function(t,e){return t&&t.length?hr(t,ao(e,3)):[]},Bn.tap=function(t,e){return e(t),t},Bn.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new kt(o);return es(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Aa(t,e,{leading:i,maxWait:e,trailing:r})},Bn.thru=fa,Bn.toArray=ps,Bn.toPairs=Bs,Bn.toPairsIn=Us,Bn.toPath=function(t){return qa(t)?Te(t,Fo):cs(t)?[t]:kr(Oo(vs(t)))},Bn.toPlainObject=ys,Bn.transform=function(t,e,n){var i=qa(t),r=i||Wa(t)||us(t);if(e=ao(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:es(t)&&Ja(o)?Un(Ht(t)):{}}return(r?ve:vi)(t,(function(t,i,r){return e(n,t,i,r)})),n},Bn.unary=function(t){return Ca(t,1)},Bn.union=na,Bn.unionBy=ia,Bn.unionWith=ra,Bn.uniq=function(t){return t&&t.length?lr(t):[]},Bn.uniqBy=function(t,e){return t&&t.length?lr(t,ao(e,2)):[]},Bn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?lr(t,r,e):[]},Bn.unset=function(t,e){return null==t||cr(t,e)},Bn.unzip=oa,Bn.unzipWith=aa,Bn.update=function(t,e,n){return null==t?t:ur(t,e,gr(n))},Bn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ur(t,e,gr(n),i)},Bn.values=Ys,Bn.valuesIn=function(t){return null==t?[]:Ge(t,Ps(t))},Bn.without=sa,Bn.words=Js,Bn.wrap=function(t,e){return Fa(gr(e),t)},Bn.xor=la,Bn.xorBy=ca,Bn.xorWith=ua,Bn.zip=ha,Bn.zipObject=function(t,e){return fr(t||[],e||[],ti)},Bn.zipObjectDeep=function(t,e){return fr(t||[],e||[],Ki)},Bn.zipWith=da,Bn.entries=Bs,Bn.entriesIn=Us,Bn.extend=xs,Bn.extendWith=ws,ll(Bn,Bn),Bn.add=vl,Bn.attempt=Qs,Bn.camelCase=js,Bn.capitalize=Vs,Bn.ceil=bl,Bn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=_s(n))==n?n:0),e!==r&&(e=(e=_s(e))==e?e:0),ai(_s(t),e,n)},Bn.clone=function(t){return si(t,4)},Bn.cloneDeep=function(t){return si(t,5)},Bn.cloneDeepWith=function(t,e){return si(t,5,e="function"==typeof e?e:r)},Bn.cloneWith=function(t,e){return si(t,4,e="function"==typeof e?e:r)},Bn.conformsTo=function(t,e){return null==e||li(t,e,As(e))},Bn.deburr=Gs,Bn.defaultTo=function(t,e){return null==t||t!=t?e:t},Bn.divide=xl,Bn.endsWith=function(t,e,n){t=vs(t),e=sr(e);var i=t.length,o=n=n===r?i:ai(ms(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Bn.eq=Ya,Bn.escape=function(t){return(t=vs(t))&&Z.test(t)?t.replace(H,Xe):t},Bn.escapeRegExp=function(t){return(t=vs(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Bn.every=function(t,e,n){var i=qa(t)?xe:pi;return n&&yo(t,e,n)&&(e=r),i(t,ao(e,3))},Bn.find=_a,Bn.findIndex=Go,Bn.findKey=function(t,e){return De(t,ao(e,3),vi)},Bn.findLast=ya,Bn.findLastIndex=qo,Bn.findLastKey=function(t,e){return De(t,ao(e,3),bi)},Bn.floor=wl,Bn.forEach=va,Bn.forEachRight=ba,Bn.forIn=function(t,e){return null==t?t:_i(t,ao(e,3),Ps)},Bn.forInRight=function(t,e){return null==t?t:yi(t,ao(e,3),Ps)},Bn.forOwn=function(t,e){return t&&vi(t,ao(e,3))},Bn.forOwnRight=function(t,e){return t&&bi(t,ao(e,3))},Bn.get=ks,Bn.gt=ja,Bn.gte=Va,Bn.has=function(t,e){return null!=t&&fo(t,e,Si)},Bn.hasIn=Cs,Bn.head=$o,Bn.identity=rl,Bn.includes=function(t,e,n,i){t=$a(t)?t:Ys(t),n=n&&!i?ms(n):0;var r=t.length;return n<0&&(n=_n(r+n,0)),ls(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Pe(t,e,n)>-1},Bn.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ms(n);return r<0&&(r=_n(i+r,0)),Pe(t,e,r)},Bn.inRange=function(t,e,n){return e=fs(e),n===r?(n=e,e=0):n=fs(n),function(t,e,n){return t>=yn(e,n)&&t<_n(e,n)}(t=_s(t),e,n)},Bn.invoke=Ds,Bn.isArguments=Ga,Bn.isArray=qa,Bn.isArrayBuffer=Ha,Bn.isArrayLike=$a,Bn.isArrayLikeObject=Za,Bn.isBoolean=function(t){return!0===t||!1===t||ns(t)&&Mi(t)==_},Bn.isBuffer=Wa,Bn.isDate=Xa,Bn.isElement=function(t){return ns(t)&&1===t.nodeType&&!os(t)},Bn.isEmpty=function(t){if(null==t)return!0;if($a(t)&&(qa(t)||"string"==typeof t||"function"==typeof t.splice||Wa(t)||us(t)||Ga(t)))return!t.length;var e=po(t);if(e==w||e==k)return!t.size;if(wo(t))return!Ni(t).length;for(var n in t)if(Pt.call(t,n))return!1;return!0},Bn.isEqual=function(t,e){return Di(t,e)},Bn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Di(t,e,r,n):!!i},Bn.isError=Ka,Bn.isFinite=function(t){return"number"==typeof t&&fn(t)},Bn.isFunction=Ja,Bn.isInteger=Qa,Bn.isLength=ts,Bn.isMap=is,Bn.isMatch=function(t,e){return t===e||Ai(t,e,lo(e))},Bn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Ai(t,e,lo(e),n)},Bn.isNaN=function(t){return rs(t)&&t!=+t},Bn.isNative=function(t){if(xo(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pi(t)},Bn.isNil=function(t){return null==t},Bn.isNull=function(t){return null===t},Bn.isNumber=rs,Bn.isObject=es,Bn.isObjectLike=ns,Bn.isPlainObject=os,Bn.isRegExp=as,Bn.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=h},Bn.isSet=ss,Bn.isString=ls,Bn.isSymbol=cs,Bn.isTypedArray=us,Bn.isUndefined=function(t){return t===r},Bn.isWeakMap=function(t){return ns(t)&&po(t)==L},Bn.isWeakSet=function(t){return ns(t)&&"[object WeakSet]"==Mi(t)},Bn.join=function(t,e){return null==t?"":mn.call(t,e)},Bn.kebabCase=qs,Bn.last=Ko,Bn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=ms(n))<0?_n(i+o,0):yn(o,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,o):Ae(t,Ne,o,!0)},Bn.lowerCase=Hs,Bn.lowerFirst=$s,Bn.lt=hs,Bn.lte=ds,Bn.max=function(t){return t&&t.length?fi(t,rl,Ti):r},Bn.maxBy=function(t,e){return t&&t.length?fi(t,ao(e,2),Ti):r},Bn.mean=function(t){return Re(t,rl)},Bn.meanBy=function(t,e){return Re(t,ao(e,2))},Bn.min=function(t){return t&&t.length?fi(t,rl,Ri):r},Bn.minBy=function(t,e){return t&&t.length?fi(t,ao(e,2),Ri):r},Bn.stubArray=gl,Bn.stubFalse=_l,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=El,Bn.nth=function(t,e){return t&&t.length?Yi(t,ms(e)):r},Bn.noConflict=function(){return oe._===this&&(oe._=Ft),this},Bn.noop=cl,Bn.now=ka,Bn.pad=function(t,e,n){t=vs(t);var i=(e=ms(e))?on(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return jr(hn(r),n)+t+jr(un(r),n)},Bn.padEnd=function(t,e,n){t=vs(t);var i=(e=ms(e))?on(t):0;return e&&i<e?t+jr(e-i,n):t},Bn.padStart=function(t,e,n){t=vs(t);var i=(e=ms(e))?on(t):0;return e&&i<e?jr(e-i,n)+t:t},Bn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(vs(t).replace(it,""),e||0)},Bn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=fs(t),e===r?(e=t,t=0):e=fs(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=xn();return yn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Hi(t,e)},Bn.reduce=function(t,e,n){var i=qa(t)?ke:Be,r=arguments.length<3;return i(t,ao(e,4),n,r,hi)},Bn.reduceRight=function(t,e,n){var i=qa(t)?Ce:Be,r=arguments.length<3;return i(t,ao(e,4),n,r,di)},Bn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===r)?1:ms(e),$i(vs(t),e)},Bn.replace=function(){var t=arguments,e=vs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Bn.result=function(t,e,n){var i=-1,o=(e=_r(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[Fo(e[i])];a===r&&(i=o,a=n),t=Ja(a)?a.call(t):a}return t},Bn.round=Ml,Bn.runInContext=t,Bn.sample=function(t){return(qa(t)?Xn:Wi)(t)},Bn.size=function(t){if(null==t)return 0;if($a(t))return ls(t)?on(t):t.length;var e=po(t);return e==w||e==k?t.size:Ni(t).length},Bn.snakeCase=Zs,Bn.some=function(t,e,n){var i=qa(t)?Ie:nr;return n&&yo(t,e,n)&&(e=r),i(t,ao(e,3))},Bn.sortedIndex=function(t,e){return ir(t,e)},Bn.sortedIndexBy=function(t,e,n){return rr(t,e,ao(n,2))},Bn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=ir(t,e);if(i<n&&Ya(t[i],e))return i}return-1},Bn.sortedLastIndex=function(t,e){return ir(t,e,!0)},Bn.sortedLastIndexBy=function(t,e,n){return rr(t,e,ao(n,2),!0)},Bn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ir(t,e,!0)-1;if(Ya(t[n],e))return n}return-1},Bn.startCase=Ws,Bn.startsWith=function(t,e,n){return t=vs(t),n=null==n?0:ai(ms(n),0,t.length),e=sr(e),t.slice(n,n+e.length)==e},Bn.subtract=Tl,Bn.sum=function(t){return t&&t.length?Ue(t,rl):0},Bn.sumBy=function(t,e){return t&&t.length?Ue(t,ao(e,2)):0},Bn.template=function(t,e,n){var i=Bn.templateSettings;n&&yo(t,e,n)&&(e=r),t=vs(t),e=ws({},e,i,Xr);var o,a,s=ws({},e.imports,i.imports,Xr),l=As(s),c=Ge(s,l),u=0,h=e.interpolate||vt,d="__p += '",p=Tt((e.escape||vt).source+"|"+h.source+"|"+(h===K?ht:vt).source+"|"+(e.evaluate||vt).source+"|$","g"),f="//# sourceURL="+(Pt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kt+"]")+"\n";t.replace(p,(function(e,n,i,r,s,l){return i||(i=r),d+=t.slice(u,l).replace(bt,Ke),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),i&&(d+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=l+e.length,e})),d+="';\n";var m=Pt.call(e,"variable")&&e.variable;if(m){if(ct.test(m))throw new xt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(j,""):d).replace(V,"$1").replace(G,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Qs((function(){return wt(l,f+"return "+d).apply(r,c)}));if(g.source=d,Ka(g))throw g;return g},Bn.times=function(t,e){if((t=ms(t))<1||t>h)return[];var n=p,i=yn(t,p);e=ao(e),t-=p;for(var r=Ye(i,e);++n<t;)e(n);return r},Bn.toFinite=fs,Bn.toInteger=ms,Bn.toLength=gs,Bn.toLower=function(t){return vs(t).toLowerCase()},Bn.toNumber=_s,Bn.toSafeInteger=function(t){return t?ai(ms(t),-9007199254740991,h):0===t?t:0},Bn.toString=vs,Bn.toUpper=function(t){return vs(t).toUpperCase()},Bn.trim=function(t,e,n){if((t=vs(t))&&(n||e===r))return je(t);if(!t||!(e=sr(e)))return t;var i=an(t),o=an(e);return vr(i,He(i,o),$e(i,o)+1).join("")},Bn.trimEnd=function(t,e,n){if((t=vs(t))&&(n||e===r))return t.slice(0,sn(t)+1);if(!t||!(e=sr(e)))return t;var i=an(t);return vr(i,0,$e(i,an(e))+1).join("")},Bn.trimStart=function(t,e,n){if((t=vs(t))&&(n||e===r))return t.replace(it,"");if(!t||!(e=sr(e)))return t;var i=an(t);return vr(i,He(i,an(e))).join("")},Bn.truncate=function(t,e){var n=30,i="...";if(es(e)){var o="separator"in e?e.separator:o;n="length"in e?ms(e.length):n,i="omission"in e?sr(e.omission):i}var a=(t=vs(t)).length;if(Je(t)){var s=an(t);a=s.length}if(n>=a)return t;var l=n-on(i);if(l<1)return i;var c=s?vr(s,0,l).join(""):t.slice(0,l);if(o===r)return c+i;if(s&&(l+=c.length-l),as(o)){if(t.slice(l).search(o)){var u,h=c;for(o.global||(o=Tt(o.source,vs(dt.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;c=c.slice(0,d===r?l:d)}}else if(t.indexOf(sr(o),l)!=l){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+i},Bn.unescape=function(t){return(t=vs(t))&&$.test(t)?t.replace(q,ln):t},Bn.uniqueId=function(t){var e=++zt;return vs(t)+e},Bn.upperCase=Xs,Bn.upperFirst=Ks,Bn.each=va,Bn.eachRight=ba,Bn.first=$o,ll(Bn,(yl={},vi(Bn,(function(t,e){Pt.call(Bn.prototype,e)||(yl[e]=t)})),yl),{chain:!1}),Bn.VERSION="4.17.21",ve(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Bn[t].placeholder=Bn})),ve(["drop","take"],(function(t,e){Vn.prototype[t]=function(n){n=n===r?1:_n(ms(n),0);var i=this.__filtered__&&!e?new Vn(this):this.clone();return i.__filtered__?i.__takeCount__=yn(n,i.__takeCount__):i.__views__.push({size:yn(n,p),type:t+(i.__dir__<0?"Right":"")}),i},Vn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ve(["filter","map","takeWhile"],(function(t,e){var n=e+1,i=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ao(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}})),ve(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}})),ve(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(rl)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Zi((function(t,e){return"function"==typeof t?new Vn(this):this.map((function(n){return Ii(n,t,e)}))})),Vn.prototype.reject=function(t){return this.filter(Ra(ao(t)))},Vn.prototype.slice=function(t,e){t=ms(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Vn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=ms(e))<0?n.dropRight(-e):n.take(e-t)),n)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(p)},vi(Vn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Bn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Bn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,l=e instanceof Vn,c=s[0],u=l||qa(e),h=function(t){var e=o.apply(Bn,Se([t],s));return i&&d?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,p=!!this.__actions__.length,f=a&&!d,m=l&&!p;if(!a&&u){e=m?e:new Vn(this);var g=t.apply(e,s);return g.__actions__.push({func:fa,args:[h],thisArg:r}),new jn(g,d)}return f&&m?t.apply(this,s):(g=this.thru(h),f?i?g.value()[0]:g.value():g)})})),ve(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ct[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);Bn.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return e.apply(qa(r)?r:[],t)}return this[n]((function(n){return e.apply(qa(n)?n:[],t)}))}})),vi(Vn.prototype,(function(t,e){var n=Bn[e];if(n){var i=n.name+"";Pt.call(Ln,i)||(Ln[i]=[]),Ln[i].push({name:e,func:n})}})),Ln[Fr(r,2).name]=[{name:"wrapper",func:r}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=kr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=kr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=kr(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=qa(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=yn(e,t+a);break;case"takeRight":t=_n(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,l=s-a,c=i?s:a-1,u=this.__iteratees__,h=u.length,d=0,p=yn(l,this.__takeCount__);if(!n||!i&&r==l&&p==l)return dr(t,this.__actions__);var f=[];t:for(;l--&&d<p;){for(var m=-1,g=t[c+=e];++m<h;){var _=u[m],y=_.iteratee,v=_.type,b=y(g);if(2==v)g=b;else if(!b){if(1==v)continue t;break t}}f[d++]=g}return f},Bn.prototype.at=ma,Bn.prototype.chain=function(){return pa(this)},Bn.prototype.commit=function(){return new jn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===r&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Bn.prototype.plant=function(t){for(var e,n=this;n instanceof Yn;){var i=Uo(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Bn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vn){var e=t;return this.__actions__.length&&(e=new Vn(this)),(e=e.reverse()).__actions__.push({func:fa,args:[ea],thisArg:r}),new jn(e,this.__chain__)}return this.thru(ea)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return dr(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,ae&&(Bn.prototype[ae]=function(){return this}),Bn}();oe._=cn,(i=function(){return cn}.call(e,n,e,t))===r||(t.exports=i)}.call(this)},4042:function(t,e,n){t.exports=function(){"use strict";var t,e,i;function r(n,r){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",a={};t(a),i=r(a),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=r;else t=r}return r(0,(function(t){function e(t){var e={exports:{}};return t(e,e.exports),e.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self&&self;var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var s=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,l=a(t),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))r.call(n,u)&&(l[u]=n[u]);if(i){s=i(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(l[s[h]]=n[s[h]])}}return l},l=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},c=e((function(t){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}})),u=e((function(t,e){var i=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),l=r[n];n<o;l=r[++n])g(l)||!x(l)?s+=" "+l:s+=" "+a(l);return s},e.deprecate=function(t,i){if(v(n.g.process))return function(){return e.deprecate(t,i).apply(this,arguments)};if(!0===process.noDeprecation)return t;var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(i);process.traceDeprecation?console.trace(i):console.error(i),r=!0}return t.apply(this,arguments)}};var r,o={};function a(t,n){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(n)?i.showHidden=n:n&&e._extend(i,n),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=s),h(i,t,i.depth)}function s(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function u(t,e){return t}function h(t,n,i){if(t.customInspect&&n&&M(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return y(r)||(r=h(t,r,i)),r}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return _(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(M(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return d(n)}var c,u="",x=!1,T=["{","}"];return f(n)&&(x=!0,T=["[","]"]),M(n)&&(u=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(u=" "+RegExp.prototype.toString.call(n)),w(n)&&(u=" "+Date.prototype.toUTCString.call(n)),E(n)&&(u=" "+d(n)),0!==a.length||x&&0!=n.length?i<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=x?function(t,e,n,i,r){for(var o=[],a=0,s=e.length;a<s;++a)I(e,String(a))?o.push(p(t,e,n,i,String(a),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(p(t,e,n,i,r,!0))})),o}(t,n,i,s,a):a.map((function(e){return p(t,n,i,s,e,x)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(c,u,T)):T[0]+u+T[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,i,r,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),I(i,r)||(a="["+r+"]"),s||(t.seen.indexOf(l.value)<0?(s=g(n)?h(t,l.value,null):h(t,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function f(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function g(t){return null===t}function _(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return x(t)&&"[object RegExp]"===T(t)}function x(t){return"object"==typeof t&&null!==t}function w(t){return x(t)&&"[object Date]"===T(t)}function E(t){return x(t)&&("[object Error]"===T(t)||t instanceof Error)}function M(t){return"function"==typeof t}function T(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(r)&&(r=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(r)){var n=process.pid;o[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,i)}}else o[t]=function(){};return o[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=m,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=_,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=x,e.isDate=w,e.isError=E,e.isFunction=M,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=l;var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),k[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",C(),e.format.apply(e,arguments))},e.inherits=c,e._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}})),h=e((function(t){function e(t,e){if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0}function i(t){return n.g.Buffer&&"function"==typeof n.g.Buffer.isBuffer?n.g.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var r=Object.prototype.hasOwnProperty,o=Array.prototype.slice,a="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function c(t){return!i(t)&&"function"==typeof n.g.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var h=t.exports=_,d=/\s*function\s+([^\(\s]*)\s*/;function p(t){if(u.isFunction(t)){if(a)return t.name;var e=t.toString().match(d);return e&&e[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function m(t){if(a||!u.isFunction(t))return u.inspect(t);var e=p(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,n,i,r){throw new h.AssertionError({message:n,actual:t,expected:e,operator:i,stackStartFunction:r})}function _(t,e){t||g(t,!0,e,"==",h.ok)}function y(t,n,r,a){if(t===n)return!0;if(i(t)&&i(n))return 0===e(t,n);if(u.isDate(t)&&u.isDate(n))return t.getTime()===n.getTime();if(u.isRegExp(t)&&u.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if(null!==t&&"object"==typeof t||null!==n&&"object"==typeof n){if(c(t)&&c(n)&&l(t)===l(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===e(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(i(t)!==i(n))return!1;var s=(a=a||{actual:[],expected:[]}).actual.indexOf(t);return-1!==s&&s===a.expected.indexOf(n)||(a.actual.push(t),a.expected.push(n),function(t,e,n,i){if(null==t||null==e)return!1;if(u.isPrimitive(t)||u.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=v(t),a=v(e);if(r&&!a||!r&&a)return!1;if(r)return y(t=o.call(t),e=o.call(e),n);var s,l,c=w(t),h=w(e);if(c.length!==h.length)return!1;for(c.sort(),h.sort(),l=c.length-1;l>=0;l--)if(c[l]!==h[l])return!1;for(l=c.length-1;l>=0;l--)if(!y(t[s=c[l]],e[s],n,i))return!1;return!0}(t,n,r,a))}return r?t===n:t==n}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,i){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(i=n,n=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),i=(n&&n.name?" ("+n.name+").":".")+(i?" "+i:"."),t&&!r&&g(r,n,"Missing expected exception"+i);var o="string"==typeof i,a=!t&&r&&!n;if((!t&&u.isError(r)&&o&&b(r,n)||a)&&g(r,n,"Got unwanted exception"+i),t&&r&&n&&!b(r,n)||!t&&r)throw r}h.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return f(m(t.actual),128)+" "+t.operator+" "+f(m(t.expected),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var i=n.stack,r=p(e),o=i.indexOf("\n"+r);if(o>=0){var a=i.indexOf("\n",o+1);i=i.substring(a+1)}this.stack=i}}},u.inherits(h.AssertionError,Error),h.fail=g,h.ok=_,h.equal=function(t,e,n){t!=e&&g(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&g(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){y(t,e,!1)||g(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){y(t,e,!0)||g(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){y(t,e,!1)&&g(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,i){y(e,n,!0)&&g(e,n,i,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&g(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&g(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){x(!0,t,e,n)},h.doesNotThrow=function(t,e,n){x(!1,t,e,n)},h.ifError=function(t){if(t)throw t},h.strict=s((function t(e,n){e||g(e,!0,n,"==",t)}),h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var w=Object.keys||function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e}})),d="2.4.0",p=f;function f(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}f.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},f.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},f.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},f.prototype.solveCurveX=function(t,e){var n,i,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},f.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var m=g;function g(t,e){this.x=t,this.y=e}g.prototype={clone:function(){return new g(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=e*this.x-n*this.y,r=n*this.x+e*this.y;return this.x=i,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.x+n*(this.x-e.x)-i*(this.y-e.y),o=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},g.convert=function(t){return t instanceof g?t:Array.isArray(t)?new g(t[0],t[1]):t};var _="undefined"!=typeof self?self:{};function y(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!y(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!y(t[n],e[n]))return!1;return!0}return t===e}const v=Math.pow(2,53)-1,b=Math.PI/180,x=180/Math.PI;function w(t){return t*b}const E=[[0,0],[1,0],[1,1],[0,1]];function M(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function T(t,e,n,i){const r=new p(t,e,n,i);return function(t){return r.solve(t)}}const S=T(.25,.1,.25,1);function k(t,e,n){return Math.min(n,Math.max(e,t))}function C(t,e,n){const i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function I(t,e,n){if(!t.length)return n(null,[]);let i=t.length;const r=new Array(t.length);let o=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(o=t),r[a]=e,0==--i&&n(o,r)}))}))}function L(t){const e=[];for(const n in t)e.push(t[n]);return e}function D(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}let A=1;function P(){return A++}function z(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function N(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function R(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function O(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function F(t,e){return-1!==t.indexOf(e,t.length-e.length)}function B(t,e,n){const i={};for(const r in t)i[r]=e.call(n||this,t[r],r,t);return i}function U(t,e,n){const i={};for(const r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function Y(t){return Array.isArray(t)?t.map(Y):"object"==typeof t&&t?B(t,Y):t}const j={};function V(t){j[t]||("undefined"!=typeof console&&console.warn(t),j[t]=!0)}function G(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function q(t){let e=0;for(let n,i,r=0,o=t.length,a=o-1;r<o;a=r++)n=t[r],i=t[a],e+=(i.x-n.x)*(n.y+i.y);return e}function H(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function $(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,i,r)=>{const o=i||r;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let Z,W,X,K=null;function J(t){if(null==K){const e=t.navigator?t.navigator.userAgent:null;K=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return K}function Q(t){try{const e=_[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}const tt={now:()=>void 0!==X?X:_.performance.now(),setNow(t){X=t},restoreNow(){X=void 0},frame(t){const e=_.requestAnimationFrame(t);return{cancel:()=>_.cancelAnimationFrame(e)}},getImageData(t,e=0){const n=_.document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(Z||(Z=_.document.createElement("a")),Z.href=t,Z.href),get devicePixelRatio(){return _.devicePixelRatio},get prefersReducedMotion(){return!!_.matchMedia&&(null==W&&(W=_.matchMedia("(prefers-reduced-motion: reduce)")),W.matches)}};let et;const nt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==et){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{et=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):t}catch(e){et=t}}return et},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},it={supported:!1,testSupport:function(t){!at&&ot&&(st?lt(t):rt=t)}};let rt,ot,at=!1,st=!1;function lt(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,ot),t.isContextLost())return;it.supported=!0}catch(t){}t.deleteTexture(e),at=!0}_.document&&(ot=_.document.createElement("img"),ot.onload=function(){rt&&lt(rt),rt=null,st=!0},ot.onerror=function(){at=!0,rt=null},ot.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ct="01";const ut="NO_ACCESS_TOKEN";function ht(t){return 0===t.indexOf("mapbox:")}function dt(t){return nt.API_URL_REGEX.test(t)}const pt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ft(t){const e=t.match(pt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function mt(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}function gt(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse((n=e[1],decodeURIComponent(_.atob(n).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join(""))))}catch(t){return null}var n}class _t{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const e=gt(nt.ACCESS_TOKEN);let n="";return n=e&&e.u?(i=e.u,_.btoa(encodeURIComponent(i).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e)))))):nt.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${n}`:`mapbox.eventData:${n}`;var i}fetchEventData(){const t=Q("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{const t=_.localStorage.getItem(e);t&&(this.eventData=JSON.parse(t));const i=_.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){V("Unable to read from LocalStorage")}}saveEventData(){const t=Q("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{_.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&_.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){V("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,e,n,i){if(!nt.EVENTS_URL)return;const r=ft(nt.EVENTS_URL);r.params.push(`access_token=${i||nt.ACCESS_TOKEN||""}`);const o={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:d,skuId:ct,userId:this.anonId},a=e?D(o,e):o,s={url:mt(r),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=Yt(s,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const yt=new class extends _t{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){nt.EVENTS_URL&&nt.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>ht(t)||dt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=gt(nt.ACCESS_TOKEN),n=e?e.u:nt.ACCESS_TOKEN;let i=n!==this.eventData.tokenU;R(this.anonId)||(this.anonId=z(),i=!0);const r=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(r),n=(r-this.eventData.lastSuccess)/864e5;i=i||n>=1||n<-1||t.getDate()!==e.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(r,{"enabled.telemetry":!1},(t=>{t||(this.eventData.lastSuccess=r,this.eventData.tokenU=n)}),t)}},vt=yt.postTurnstileEvent.bind(yt),bt=new class extends _t{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,i){this.skuToken=e,this.errorCb=i,nt.EVENTS_URL&&(n||nt.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(ut)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),R(this.anonId)||(this.anonId=z()),this.postEvent(n,{skuToken:this.skuToken},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},xt=bt.postMapLoadEvent.bind(bt),wt=new class extends _t{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,i){if(!nt.API_URL||!nt.SESSION_PATH)return;const r=ft(nt.API_URL+nt.SESSION_PATH);r.params.push(`sku=${e||""}`),r.params.push(`access_token=${i||nt.ACCESS_TOKEN||""}`);const o={url:mt(r),headers:{"Content-Type":"text/plain"}};this.pendingRequest=jt(o,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}getSessionAPI(t,e,n,i){this.skuToken=e,this.errorCb=i,nt.SESSION_PATH&&nt.API_URL&&(n||nt.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(ut)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},Et=wt.getSessionAPI.bind(wt),Mt=new Set;const Tt="mapbox-tiles";let St=500,kt=50;let Ct,It;function Lt(){_.caches&&!Ct&&(Ct=_.caches.open(Tt))}function Dt(t,e,n){if(Lt(),!Ct)return;const i={status:e.status,statusText:e.statusText,headers:new _.Headers};e.headers.forEach(((t,e)=>i.headers.set(e,t)));const r=$(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&i.headers.set("Expires",new Date(n+1e3*r["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===It)try{new Response(new ReadableStream),It=!0}catch(t){It=!1}It?e(t.body):t.blob().then(e)}(e,(e=>{const n=new _.Response(e,i);Lt(),Ct&&Ct.then((e=>e.put(At(t.url),n))).catch((t=>V(t.message)))})))}function At(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}function Pt(t,e){if(Lt(),!Ct)return e(null);const n=At(t.url);Ct.then((t=>{t.match(n).then((i=>{const r=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=$(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),r&&t.put(n,i.clone()),e(null,i,r)})).catch(e)})).catch(e)}let zt=1/0;const Nt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Nt);class Rt extends Error{constructor(t,e,n){401===e&&dt(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ot=H()?()=>self.worker&&self.worker.referrer:()=>("blob:"===_.location.protocol?_.parent:_).location.href;function Ft(t,e){const n=new _.AbortController,i=new _.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Ot(),signal:n.signal});let r=!1,o=!1;const a=(s=i.url).indexOf("sku=")>0&&dt(s);var s;"json"===t.type&&i.headers.set("Accept","application/json");const l=(n,r,s)=>{if(o)return;if(n&&"SecurityError"!==n.message&&V(n),r&&s)return c(r);const l=Date.now();_.fetch(i).then((n=>{if(n.ok){const t=a?n.clone():null;return c(n,t,l)}return e(new Rt(n.statusText,n.status,t.url))})).catch((t=>{20!==t.code&&e(new Error(t.message))}))},c=(n,a,s)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{o||(a&&s&&Dt(i,a,s),r=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((t=>{o||e(new Error(t.message))}))};return a?Pt(i,l):l(null,null),{cancel:()=>{o=!0,r||n.abort()}}}const Bt=function(t,e){if(n=t.url,!(/^file:/.test(n)||/^file:/.test(Ot())&&!/^\w+:/.test(n))){if(_.fetch&&_.Request&&_.AbortController&&_.Request.prototype.hasOwnProperty("signal"))return Ft(t,e);if(H()&&self.worker&&self.worker.actor){const n=!0;return self.worker.actor.send("getResource",t,e,void 0,n)}}var n;return function(t,e){const n=new _.XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new Rt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:()=>n.abort()}}(t,e)},Ut=function(t,e){return Bt(D(t,{type:"arrayBuffer"}),e)},Yt=function(t,e){return Bt(D(t,{method:"POST"}),e)},jt=function(t,e){return Bt(D(t,{method:"GET"}),e)};function Vt(t){const e=_.document.createElement("a");return e.href=t,e.protocol===_.document.location.protocol&&e.host===_.document.location.host}const Gt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let qt,Ht;qt=[],Ht=0;const $t=function(t,e){if(it.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ht>=nt.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return qt.push(n),n}Ht++;let n=!1;const i=()=>{if(!n)for(n=!0,Ht--,h(Ht>=0);qt.length&&Ht<nt.MAX_PARALLEL_IMAGE_REQUESTS;){const t=qt.shift(),{requestParameters:e,callback:n,cancelled:i}=t;i||(t.cancel=$t(e,n).cancel)}},r=Ut(t,((t,n,r,o)=>{i(),t?e(t):n&&(_.createImageBitmap?function(t,e){const n=new _.Blob([new Uint8Array(t)],{type:"image/png"});_.createImageBitmap(n).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,((t,n)=>e(t,n,r,o))):function(t,e){const n=new _.Image,i=_.URL;n.onload=()=>{e(null,n),i.revokeObjectURL(n.src),n.onload=null,_.requestAnimationFrame((()=>{n.src=Gt}))},n.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new _.Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?i.createObjectURL(r):Gt}(n,((t,n)=>e(t,n,r,o))))}));return{cancel:()=>{r.cancel(),i()}}};function Zt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Wt(t,e,n){if(n&&n[t]){const i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}class Xt{constructor(t,e={}){D(this,e),this.type=t}}class Kt extends Xt{constructor(t,e={}){super("error",D({error:t},e))}}class Jt{on(t,e){return this._listeners=this._listeners||{},Zt(t,e,this._listeners),this}off(t,e){return Wt(t,e,this._listeners),Wt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Zt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Xt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const e of i)Wt(n,e,this._oneTimeListeners),e.call(this,t);const r=this._eventedParent;r&&(D(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof Kt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Qt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class te{constructor(t,e,n,i){this.message=(t?`${t}: `:"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)}}function ee(t){const e=t.key,n=t.value;return n?[new te(e,n,"constants have been deprecated as of v8")]:[]}function ne(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}function ie(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function re(t){if(Array.isArray(t))return t.map(re);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=re(t[n]);return e}return ie(t)}class oe extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class ae{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new ae(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const se={kind:"null"},le={kind:"number"},ce={kind:"string"},ue={kind:"boolean"},he={kind:"color"},de={kind:"object"},pe={kind:"value"},fe={kind:"collator"},me={kind:"formatted"},ge={kind:"resolvedImage"};function _e(t,e){return{kind:"array",itemType:t,N:e}}function ye(t){if("array"===t.kind){const e=ye(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const ve=[se,le,ce,ue,he,me,de,_e(pe),ge];function be(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!be(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of ve)if(!be(t,e))return null}return`Expected ${ye(t)} but found ${ye(e)} instead.`}function xe(t,e){return e.some((e=>e.kind===t.kind))}function we(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Ee=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function o(t){return"%"===t[t.length-1]?i(parseFloat(t)/100*255):i(parseInt(t))}function a(t){return"%"===t[t.length-1]?r(parseFloat(t)/100):r(parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in n)return n[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=r.indexOf("("),c=r.indexOf(")");if(-1!==l&&c+1===r.length){var u=r.substr(0,l),h=r.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=a(h.pop());case"rgb":return 3!==h.length?null:[o(h[0]),o(h[1]),o(h[2]),d];case"hsla":if(4!==h.length)return null;d=a(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=a(h[1]),m=a(h[2]),g=m<=.5?m*(f+1):m+f-m*f,_=2*m-g;return[i(255*s(_,g,p+1/3)),i(255*s(_,g,p)),i(255*s(_,g,p-1/3)),d];default:return null}}return null}}catch(t){}}));class Me{constructor(t,e,n,i=1){this.r=t,this.g=e,this.b=n,this.a=i}static parse(t){if(!t)return;if(t instanceof Me)return t;if("string"!=typeof t)return;const e=Ee.parseCSSColor(t);return e?new Me(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,i]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${i})`}toArray(){const{r:t,g:e,b:n,a:i}=this;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*n/i,i]}}Me.black=new Me(0,0,0,1),Me.white=new Me(1,1,1,1),Me.transparent=new Me(0,0,0,0),Me.red=new Me(1,0,0,1),Me.blue=new Me(0,0,1,1);class Te{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Se{constructor(t,e,n,i,r){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r}}class ke{constructor(t){this.sections=t}static fromString(t){return new ke([new Se(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof ke?t:ke.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class Ce{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Ce({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Ie(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[t,e,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Le(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Me)return!0;if(t instanceof Te)return!0;if(t instanceof ke)return!0;if(t instanceof Ce)return!0;if(Array.isArray(t)){for(const e of t)if(!Le(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Le(t[e]))return!1;return!0}return!1}function De(t){if(null===t)return se;if("string"==typeof t)return ce;if("boolean"==typeof t)return ue;if("number"==typeof t)return le;if(t instanceof Me)return he;if(t instanceof Te)return fe;if(t instanceof ke)return me;if(t instanceof Ce)return ge;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=De(e);if(n){if(n===t)continue;n=pe;break}n=t}return _e(n||pe,e)}return h("object"==typeof t),de}function Ae(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Me||t instanceof ke||t instanceof Ce?t.toString():JSON.stringify(t)}class Pe{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Le(t[1]))return e.error("invalid value");const n=t[1];let i=De(n);const r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new Pe(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Me?["rgba"].concat(this.value.toArray()):this.value instanceof ke?this.value.serialize():(h(null===this.value||"string"==typeof this.value||"number"==typeof this.value||"boolean"==typeof this.value),this.value)}}class ze{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Ne={string:ce,number:le,boolean:ue,object:de};class Re{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,i=1;const r=t[0];if("array"===r){let r,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in Ne)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=Ne[n],i++}else r=pe;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],i++}n=_e(r,o)}else h(Ne[r],r),n=Ne[r];const o=[];for(;i<t.length;i++){const n=e.parse(t[i],i,pe);if(!n)return null;o.push(n)}return new Re(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!be(this.type,De(n)))return n;if(e===this.args.length-1)throw new ze(`Expected value to be of type ${ye(this.type)}, but found ${ye(De(n))} instead.`)}return h(!1),null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((t=>t.serialize())))}}class Oe{constructor(t){this.type=me,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const i=[];let r=!1;for(let n=1;n<=t.length-1;++n){const o=t[n];if(r&&"object"==typeof o&&!Array.isArray(o)){r=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,le),!t))return null;let n=null;if(o["text-font"]&&(n=e.parse(o["text-font"],1,_e(ce)),!n))return null;let a=null;if(o["text-color"]&&(a=e.parse(o["text-color"],1,he),!a))return null;const s=i[i.length-1];s.scale=t,s.font=n,s.textColor=a}else{const o=e.parse(t[n],1,pe);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:o,scale:null,font:null,textColor:null})}}return new Oe(i)}evaluate(t){return new ke(this.sections.map((e=>{const n=e.content.evaluate(t);return De(n)===ge?new Se("",n,null,null,null):new Se(Ae(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Fe{constructor(t){this.type=ge,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,ce);return n?new Fe(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=Ce.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Be={"to-boolean":ue,"to-color":he,"to-number":le,"to-string":ce};class Ue{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(h(Be[n],n),("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const i=Be[n],r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],n,pe);if(!i)return null;r.push(i)}return new Ue(i,r)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const i of this.args){if(e=i.evaluate(t),n=null,e instanceof Me)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Ie(e[0],e[1],e[2],e[3]),!n))return new Me(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ze(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const i=Number(e);if(!isNaN(i))return i}throw new ze(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?ke.fromString(Ae(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Ce.fromString(Ae(this.args[0].evaluate(t))):Ae(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Oe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Fe(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Ye=["Unknown","Point","LineString","Polygon"];class je{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ye[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Me.parse(t)),e}}class Ve{constructor(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],i=Ve.definitions[n];if(!i)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[i,o]of a){s=new fn(e.registry,e.path,null,e.scope);const a=[];let l=!1;for(let e=1;e<t.length;e++){const n=t[e],r=Array.isArray(i)?i[e-1]:i.type,o=s.parse(n,1+a.length,r);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(i)&&i.length!==a.length)s.error(`Expected ${i.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){const e=Array.isArray(i)?i[t]:i.type,n=a[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new Ve(n,r,o,a)}}if(h(!s||s.errors.length>0),1===a.length)e.errors.push(...s.errors);else{const n=(a.length?a:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(ye).join(", ")})`:`(${ye(e.type)}...)`;var e})).join(" | "),i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],1+i.length);if(!r)return null;i.push(ye(r.type))}e.error(`Expected arguments of type ${n}, but found (${i.join(", ")}) instead.`)}return null}static register(t,e){h(!Ve.definitions),Ve.definitions=e;for(const n in e)t[n]=Ve}}class Ge{constructor(t,e,n){this.type=fe,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ue);if(!i)return null;const r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ue);if(!r)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,ce),!o)?null:new Ge(i,r,o)}evaluate(t){return new Te(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const qe=8192;function He(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function $e(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ze(t,e){const n=(180+t[0])/360,i=(o=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360),r=Math.pow(2,e.z);var o;return[Math.round(n*r*qe),Math.round(i*r*qe)]}function We(t,e,n){const i=t[0]-e[0],r=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return i*a-o*r==0&&i*o<=0&&r*a<=0}function Xe(t,e){let n=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(We(t,s[e],s[e+1]))return!1;i=t,r=s[e],o=s[e+1],r[1]>i[1]!=o[1]>i[1]&&i[0]<(o[0]-r[0])*(i[1]-r[1])/(o[1]-r[1])+r[0]&&(n=!n)}}var i,r,o;return n}function Ke(t,e){for(let n=0;n<e.length;n++)if(Xe(t,e[n]))return!0;return!1}function Je(t,e,n,i){const r=t[0]-n[0],o=t[1]-n[1],a=e[0]-n[0],s=e[1]-n[1],l=i[0]-n[0],c=i[1]-n[1],u=r*c-l*o,h=a*c-l*s;return u>0&&h<0||u<0&&h>0}function Qe(t,e,n,i){const r=[e[0]-t[0],e[1]-t[1]];return 0!=(o=[i[0]-n[0],i[1]-n[1]],a=r,o[0]*a[1]-o[1]*a[0])&&!(!Je(t,e,n,i)||!Je(n,i,t,e));var o,a}function tn(t,e,n){for(const i of n)for(let n=0;n<i.length-1;++n)if(Qe(t,e,i[n],i[n+1]))return!0;return!1}function en(t,e){for(let n=0;n<t.length;++n)if(!Xe(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(tn(t[n],t[n+1],e))return!1;return!0}function nn(t,e){for(let n=0;n<e.length;n++)if(en(t,e[n]))return!0;return!1}function rn(t,e,n){const i=[];for(let r=0;r<t.length;r++){const o=[];for(let i=0;i<t[r].length;i++){const a=Ze(t[r][i],n);He(e,a),o.push(a)}i.push(o)}return i}function on(t,e,n){const i=[];for(let r=0;r<t.length;r++){const o=rn(t[r],e,n);i.push(o)}return i}function an(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){const e=.5*i;let r=t[0]-n[0]>e?-i:n[0]-t[0]>e?i:0;0===r&&(r=t[0]-n[2]>e?-i:n[2]-t[0]>e?i:0),t[0]+=r}He(e,t)}function sn(t,e,n,i){const r=Math.pow(2,i.z)*qe,o=[i.x*qe,i.y*qe],a=[];for(const i of t)for(const t of i){const i=[t.x+o[0],t.y+o[1]];an(i,e,n,r),a.push(i)}return a}function ln(t,e,n,i){const r=Math.pow(2,i.z)*qe,o=[i.x*qe,i.y*qe],a=[];for(const n of t){const t=[];for(const i of n){const n=[i.x+o[0],i.y+o[1]];He(e,n),t.push(n)}a.push(t)}if(e[2]-e[0]<=r/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const i of t)an(i,e,n,r)}var s;return a}class cn{constructor(t,e){this.type=ue,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Le(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new cn(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new cn(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new cn(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=rn(e.coordinates,i,r),a=sn(t.geometry(),n,i,r);if(!$e(n,i))return!1;for(const t of a)if(!Xe(t,o))return!1}if("MultiPolygon"===e.type){const o=on(e.coordinates,i,r),a=sn(t.geometry(),n,i,r);if(!$e(n,i))return!1;for(const t of a)if(!Ke(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=rn(e.coordinates,i,r),a=ln(t.geometry(),n,i,r);if(!$e(n,i))return!1;for(const t of a)if(!en(t,o))return!1}if("MultiPolygon"===e.type){const o=on(e.coordinates,i,r),a=ln(t.geometry(),n,i,r);if(!$e(n,i))return!1;for(const t of a)if(!nn(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function un(t){if(t instanceof Ve){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof cn)return!1;let e=!0;return t.eachChild((t=>{e&&!un(t)&&(e=!1)})),e}function hn(t){if(t instanceof Ve&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!hn(t)&&(e=!1)})),e}function dn(t,e){if(t instanceof Ve&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!dn(t,e)&&(n=!1)})),n}class pn{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new pn(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class fn{constructor(t,e=[],n,i=new ae,r=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=i,this.errors=r,this.expectedType=n}parse(t,e,n,i,r={}){return e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)}_parse(t,e){function n(t,e,n){return"assert"===n?new Re(e,[t]):"coerce"===n?new Ue(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[i];if(r){let i=r.parse(t,this);if(!i)return null;if(this.expectedType){const t=this.expectedType,r=i.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(t,r))return null}else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"assert")}if(!(i instanceof Pe)&&"resolvedImage"!==i.type.kind&&mn(i)){const t=new je;try{i=new Pe(i.type,i.evaluate(t))}catch(t){return this.error(t.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new fn(this.registry,i,e||null,r,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new oe(n,t))}checkSubtype(t,e){const n=be(t,e);return n&&this.error(n),n}}function mn(t){if(t instanceof pn)return mn(t.boundExpression);if(t instanceof Ve&&"error"===t.name)return!1;if(t instanceof Ge)return!1;if(t instanceof cn)return!1;const e=t instanceof Ue||t instanceof Re;let n=!0;return t.eachChild((t=>{n=e?n&&mn(t):n&&t instanceof Pe})),!!n&&un(t)&&dn(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function gn(t,e){const n=t.length-1;let i,r,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),i=t[s],r=t[s+1],i<=e){if(s===n||e<r)return s;o=s+1}else{if(!(i>e))throw new ze("Input is not a number.");a=s-1}return 0}class _n{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,le);if(!n)return null;const i=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let n=1;n<t.length;n+=2){const o=1===n?-1/0:t[n],a=t[n+1],s=n,l=n+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(i.length&&i[i.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(a,l,r);if(!c)return null;r=r||c.type,i.push([o,c])}return new _n(r,n,i)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[gn(e,i)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function yn(t,e,n){return t*(1-n)+e*n}var vn=Object.freeze({__proto__:null,number:yn,color:function(t,e,n){return new Me(yn(t.r,e.r,n),yn(t.g,e.g,n),yn(t.b,e.b,n),yn(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,i)=>yn(t,e[i],n)))}});const bn=.95047,xn=1.08883,wn=4/29,En=6/29,Mn=3*En*En,Tn=Math.PI/180,Sn=180/Math.PI;function kn(t){return t>.008856451679035631?Math.pow(t,1/3):t/Mn+wn}function Cn(t){return t>En?t*t*t:Mn*(t-wn)}function In(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ln(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Dn(t){const e=Ln(t.r),n=Ln(t.g),i=Ln(t.b),r=kn((.4124564*e+.3575761*n+.1804375*i)/bn),o=kn((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-kn((.0193339*e+.119192*n+.9503041*i)/xn)),alpha:t.a}}function An(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*Cn(e),n=bn*Cn(n),i=xn*Cn(i),new Me(In(3.2404542*n-1.5371385*e-.4985314*i),In(-.969266*n+1.8760108*e+.041556*i),In(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function Pn(t,e,n){const i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}const zn={forward:Dn,reverse:An,interpolate:function(t,e,n){return{l:yn(t.l,e.l,n),a:yn(t.a,e.a,n),b:yn(t.b,e.b,n),alpha:yn(t.alpha,e.alpha,n)}}},Nn={forward:function(t){const{l:e,a:n,b:i}=Dn(t),r=Math.atan2(i,n)*Sn;return{h:r<0?r+360:r,c:Math.sqrt(n*n+i*i),l:e,alpha:t.a}},reverse:function(t){const e=t.h*Tn,n=t.c;return An({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Pn(t.h,e.h,n),c:yn(t.c,e.c,n),l:yn(t.l,e.l,n),alpha:yn(t.alpha,e.alpha,n)}}};var Rn=Object.freeze({__proto__:null,lab:zn,hcl:Nn});class On{constructor(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,i){let r=0;if("exponential"===t.name)r=Fn(e,t.base,n,i);else if("linear"===t.name)r=Fn(e,1,n,i);else if("cubic-bezier"===t.name){const o=t.controlPoints;r=new p(o[0],o[1],o[2],o[3]).solve(Fn(e,1,n,i))}return r}static parse(t,e){let[n,i,r,...o]=t;if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const t=i[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:t}}else{if("cubic-bezier"!==i[0])return e.error(`Unknown interpolation type ${String(i[0])}`,1,0);{const t=i.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,le),!r)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=he:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const n=o[t],i=o[t+1],r=t+3,l=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=e.parse(i,l,s);if(!c)return null;s=s||c.type,a.push([n,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new On(s,n,i,r,a):e.error(`Type ${ye(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);const o=gn(e,i),a=e[o],s=e[o+1],l=On.interpolationFactor(this.interpolation,i,a,s),c=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?vn[this.type.kind.toLowerCase()](c,u,l):"interpolate-hcl"===this.operator?Nn.reverse(Nn.interpolate(Nn.forward(c),Nn.forward(u),l)):zn.reverse(zn.interpolate(zn.forward(c),zn.forward(u),l))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function Fn(t,e,n,i){const r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class Bn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const i=e.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const i of t.slice(1)){const t=e.parse(i,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,r.push(t)}h(n);const o=i&&r.some((t=>be(i,t.type)));return new Bn(o?pe:n,r)}evaluate(t){let e,n=null,i=0;for(const r of this.args)if(i++,n=r.evaluate(t),n&&n instanceof Ce&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Un{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}const i=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return i?new Un(n,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}class Yn{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,le),i=e.parse(t[2],2,_e(e.expectedType||pe));if(!n||!i)return null;const r=i.type;return new Yn(r.itemType,n,i)}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ze(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new ze(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new ze(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class jn{constructor(t,e){this.type=ue,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,pe),i=e.parse(t[2],2,pe);return n&&i?xe(n.type,[ue,ce,le,se,pe])?new jn(n,i):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!we(e,["boolean","string","number","null"]))throw new ze(`Expected first argument to be of type boolean, string, number or null, but found ${ye(De(e))} instead.`);if(!we(n,["string","array"]))throw new ze(`Expected second argument to be of type array or string, but found ${ye(De(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Vn{constructor(t,e,n){this.type=le,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,pe),i=e.parse(t[2],2,pe);if(!n||!i)return null;if(!xe(n.type,[ue,ce,le,se,pe]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,le);return r?new Vn(n,i,r):null}return new Vn(n,i)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!we(e,["boolean","string","number","null"]))throw new ze(`Expected first argument to be of type boolean, string, number or null, but found ${ye(De(e))} instead.`);if(!we(n,["string","array"]))throw new ze(`Expected second argument to be of type array or string, but found ${ye(De(n))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(t);return n.indexOf(e,i)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Gn{constructor(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r={},o=[];for(let a=2;a<t.length-1;a+=2){let s=t[a];const l=t[a+1];Array.isArray(s)||(s=[s]);const c=e.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,De(t)))return null}else n=De(t);if(void 0!==r[String(t)])return c.error("Branch labels must be unique.");r[String(t)]=o.length}const u=e.parse(l,a,i);if(!u)return null;i=i||u.type,o.push(u)}const a=e.parse(t[1],1,pe);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,i);return s?(h(n&&i),"value"!==a.type.kind&&e.concat(1).checkSubtype(n,a.type)?null:new Gn(n,i,a,r,o,s)):null}evaluate(t){const e=this.input.evaluate(t);return(De(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],i={};for(const t of e){const e=i[this.cases[t]];void 0===e?(i[this.cases[t]]=n.length,n.push([this.cases[t],[t]])):n[e][1].push(t)}const r=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,i]of n)1===i.length?t.push(r(i[0])):t.push(i.map(r)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class qn{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i=[];for(let r=1;r<t.length-1;r+=2){const o=e.parse(t[r],r,ue);if(!o)return null;const a=e.parse(t[r+1],r+1,n);if(!a)return null;i.push([o,a]),n=n||a.type}const r=e.parse(t[t.length-1],t.length-1,n);return r?(h(n),new qn(n,i,r)):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Hn{constructor(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,pe),i=e.parse(t[2],2,le);if(!n||!i)return null;if(!xe(n.type,[_e(pe),ce,pe]))return e.error(`Expected first argument to be of type array or string, but found ${ye(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,le);return r?new Hn(n.type,n,i,r):null}return new Hn(n.type,n,i)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!we(e,["string","array"]))throw new ze(`Expected first argument to be of type array or string, but found ${ye(De(e))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(t);return e.slice(n,i)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function $n(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Zn(t,e,n,i){return 0===i.compare(e,n)}function Wn(t,e,n){const i="=="!==t&&"!="!==t;return class r{constructor(t,e,n){this.type=ue,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,pe);if(!o)return null;if(!$n(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${ye(o.type)}'.`);let a=e.parse(t[2],2,pe);if(!a)return null;if(!$n(n,a.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${ye(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${ye(o.type)}' and '${ye(a.type)}'.`);i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Re(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Re(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,fe),!s)return null}return new r(o,a,s)}evaluate(r){const o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const e=De(o),n=De(a);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new ze(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const t=De(o),n=De(a);if("string"!==t.kind||"string"!==n.kind)return e(r,o,a)}return this.collator?n(r,o,a,this.collator.evaluate(r)):e(r,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const Xn=Wn("==",(function(t,e,n){return e===n}),Zn),Kn=Wn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!Zn(0,e,n,i)})),Jn=Wn("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),Qn=Wn(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),ti=Wn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),ei=Wn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0}));class ni{constructor(t,e,n,i,r){this.type=ce,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,le);if(!n)return null;const i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=e.parse(i.locale,1,ce),!r))return null;let o=null;if(i.currency&&(o=e.parse(i.currency,1,ce),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=e.parse(i["min-fraction-digits"],1,le),!a))return null;let s=null;return i["max-fraction-digits"]&&(s=e.parse(i["max-fraction-digits"],1,le),!s)?null:new ni(n,r,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class ii{constructor(t){this.type=le,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${ye(n.type)} instead.`):new ii(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ze(`Expected value to be of type string or array, but found ${ye(De(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const ri={"==":Xn,"!=":Kn,">":Qn,"<":Jn,">=":ei,"<=":ti,array:Re,at:Yn,boolean:Re,case:qn,coalesce:Bn,collator:Ge,format:Oe,image:Fe,in:jn,"index-of":Vn,interpolate:On,"interpolate-hcl":On,"interpolate-lab":On,length:ii,let:Un,literal:Pe,match:Gn,number:Re,"number-format":ni,object:Re,slice:Hn,step:_n,string:Re,"to-boolean":Ue,"to-color":Ue,"to-number":Ue,"to-string":Ue,var:pn,within:cn};function oi(t,[e,n,i,r]){e=e.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);const o=r?r.evaluate(t):1,a=Ie(e,n,i,o);if(a)throw new ze(a);return new Me(e/255*o,n/255*o,i/255*o,o)}function ai(t,e){return t in e}function si(t,e){const n=e[t];return void 0===n?null:n}function li(t){return{type:t}}function ci(t){return{result:"success",value:t}}function ui(t){return{result:"error",value:t}}function hi(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function di(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function pi(t){return!!t.expression&&t.expression.interpolated}function fi(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function mi(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function gi(t){return t}function _i(t,e){const n="color"===e.type,i=t.stops&&"object"==typeof t.stops[0][0],r=i||void 0!==t.property,o=i||!r,a=t.type||(pi(e)?"exponential":"interval");if(n&&((t=ne({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],Me.parse(t[1])]))),t.default?t.default=Me.parse(t.default):t.default=Me.parse(e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Rn[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let s,l,c;if("exponential"===a)s=xi;else if("interval"===a)s=bi;else if("categorical"===a){s=vi,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];c=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);s=wi}if(i){const n={},i=[];for(let e=0;e<t.stops.length;e++){const r=t.stops[e],o=r[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},i.push(o)),n[o].stops.push([r[0].value,r[1]])}const r=[];for(const t of i)r.push([n[t].zoom,_i(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:On.interpolationFactor.bind(void 0,o),zoomStops:r.map((t=>t[0])),evaluate:({zoom:n},i)=>xi({stops:r,base:t.base},e,n).evaluate(n,i)}}if(o){const n="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:On.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:n})=>s(t,e,n,l,c)}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[t.property]:void 0;return void 0===r?yi(t.default,e.default):s(t,e,r,l,c)}}}function yi(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function vi(t,e,n,i,r){return yi(typeof n===r?i[n]:void 0,t.default,e.default)}function bi(t,e,n){if("number"!==fi(n))return yi(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const r=gn(t.stops.map((t=>t[0])),n);return t.stops[r][1]}function xi(t,e,n){const i=void 0!==t.base?t.base:1;if("number"!==fi(n))return yi(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const o=gn(t.stops.map((t=>t[0])),n),a=function(t,e,n,i){const r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let c=vn[e.type]||gi;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Rn[t.colorSpace];c=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==n)return c(e,n,a)}}:c(s,l,a)}function wi(t,e,n){return"color"===e.type?n=Me.parse(n):"formatted"===e.type?n=ke.fromString(n.toString()):"resolvedImage"===e.type?n=Ce.fromString(n.toString()):fi(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),yi(n,t.default,e.default)}Ve.register(ri,{error:[{kind:"error"},[ce],(t,[e])=>{throw new ze(e.evaluate(t))}],typeof:[ce,[pe],(t,[e])=>ye(De(e.evaluate(t)))],"to-rgba":[_e(le,4),[he],(t,[e])=>e.evaluate(t).toArray()],rgb:[he,[le,le,le],oi],rgba:[he,[le,le,le,le],oi],has:{type:ue,overloads:[[[ce],(t,[e])=>ai(e.evaluate(t),t.properties())],[[ce,de],(t,[e,n])=>ai(e.evaluate(t),n.evaluate(t))]]},get:{type:pe,overloads:[[[ce],(t,[e])=>si(e.evaluate(t),t.properties())],[[ce,de],(t,[e,n])=>si(e.evaluate(t),n.evaluate(t))]]},"feature-state":[pe,[ce],(t,[e])=>si(e.evaluate(t),t.featureState||{})],properties:[de,[],t=>t.properties()],"geometry-type":[ce,[],t=>t.geometryType()],id:[pe,[],t=>t.id()],zoom:[le,[],t=>t.globals.zoom],"heatmap-density":[le,[],t=>t.globals.heatmapDensity||0],"line-progress":[le,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[le,[],t=>t.globals.skyRadialProgress||0],accumulated:[pe,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[le,li(le),(t,e)=>{let n=0;for(const i of e)n+=i.evaluate(t);return n}],"*":[le,li(le),(t,e)=>{let n=1;for(const i of e)n*=i.evaluate(t);return n}],"-":{type:le,overloads:[[[le,le],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[le],(t,[e])=>-e.evaluate(t)]]},"/":[le,[le,le],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[le,[le,le],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[le,[],()=>Math.LN2],pi:[le,[],()=>Math.PI],e:[le,[],()=>Math.E],"^":[le,[le,le],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[le,[le],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[le,[le],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[le,[le],(t,[e])=>Math.log(e.evaluate(t))],log2:[le,[le],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[le,[le],(t,[e])=>Math.sin(e.evaluate(t))],cos:[le,[le],(t,[e])=>Math.cos(e.evaluate(t))],tan:[le,[le],(t,[e])=>Math.tan(e.evaluate(t))],asin:[le,[le],(t,[e])=>Math.asin(e.evaluate(t))],acos:[le,[le],(t,[e])=>Math.acos(e.evaluate(t))],atan:[le,[le],(t,[e])=>Math.atan(e.evaluate(t))],min:[le,li(le),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[le,li(le),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[le,[le],(t,[e])=>Math.abs(e.evaluate(t))],round:[le,[le],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[le,[le],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[le,[le],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[ue,[ce,pe],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[ue,[pe],(t,[e])=>t.id()===e.value],"filter-type-==":[ue,[ce],(t,[e])=>t.geometryType()===e.value],"filter-<":[ue,[ce,pe],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<r}],"filter-id-<":[ue,[pe],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<i}],"filter->":[ue,[ce,pe],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>r}],"filter-id->":[ue,[pe],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>i}],"filter-<=":[ue,[ce,pe],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[ue,[pe],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<=i}],"filter->=":[ue,[ce,pe],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[ue,[pe],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>=i}],"filter-has":[ue,[pe],(t,[e])=>e.value in t.properties()],"filter-has-id":[ue,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ue,[_e(ce)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[ue,[_e(pe)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[ue,[ce,_e(pe)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[ue,[ce,_e(pe)],(t,[e,n])=>function(t,e,n,i){for(;n<=i;){const r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:ue,overloads:[[[ue,ue],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[li(ue),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:ue,overloads:[[[ue,ue],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[li(ue),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[ue,[ue],(t,[e])=>!e.evaluate(t)],"is-supported-script":[ue,[ce],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[ce,[ce],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[ce,[ce],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[ce,li(pe),(t,e)=>e.map((e=>Ae(e.evaluate(t)))).join("")],"resolved-locale":[ce,[fe],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Ei{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new je,this._defaultValue=e?function(t){return"color"===t.type&&mi(t.default)?new Me(0,0,0,0):"color"===t.type?Me.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,i,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new ze(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Mi(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ri}function Ti(t,e){const n=new fn(ri,[],e?function(t){const e={color:he,string:ce,number:le,enum:ce,boolean:ue,formatted:me,resolvedImage:ge};return"array"===t.type?_e(e[t.value]||pe,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?ci(new Ei(i,e)):(h(n.errors.length>0),ui(n.errors))}class Si{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!hn(e.expression)}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)}evaluate(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)}}class ki{constructor(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!hn(e.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)}evaluate(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)}interpolationFactor(t,e,n){return this.interpolationType?On.interpolationFactor(this.interpolationType,t,e,n):0}}function Ci(t,e){if("error"===(t=Ti(t,e)).result)return t;const n=t.value.expression,i=un(n);if(!i&&!hi(e))return ui([new oe("","data expressions not supported")]);const r=dn(n,["zoom"]);if(!r&&!di(e))return ui([new oe("","zoom expressions not supported")]);const o=Li(n);if(!o&&!r)return ui([new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof oe)return ui([o]);if(o instanceof On&&!pi(e))return ui([new oe("",'"interpolate" expressions cannot be used with this property')]);if(!o)return ci(new Si(i?"constant":"source",t.value));const a=o instanceof On?o.interpolation:void 0;return ci(new ki(i?"camera":"composite",t.value,o.labels,a))}class Ii{constructor(t,e){this._parameters=t,this._specification=e,ne(this,_i(this._parameters,this._specification))}static deserialize(t){return new Ii(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Li(t){let e=null;if(t instanceof Un)e=Li(t.result);else if(t instanceof Bn){for(const n of t.args)if(e=Li(n),e)break}else(t instanceof _n||t instanceof On)&&t.input instanceof Ve&&"zoom"===t.input.name&&(e=t);return e instanceof oe||t.eachChild((t=>{const n=Li(t);n instanceof oe?e=n:!e&&n?e=new oe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new oe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Di(t){const e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=fi(n);if("object"!==l)return[new te(e,n,`object expected, ${l} found`)];for(const t in n){const l=t.split(".")[0],c=i[l]||i["*"];let u;if(r[l])u=r[l];else if(i[l])u=ar;else if(r["*"])u=r["*"];else{if(!i["*"]){s.push(new te(e,n[t],`unknown property "${t}"`));continue}u=ar}s=s.concat(u({key:(e?`${e}.`:e)+t,value:n[t],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:t},n))}for(const t in i)r[t]||i[t].required&&void 0===i[t].default&&void 0===n[t]&&s.push(new te(e,n,`missing required property "${t}"`));return s}function Ai(t){const e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||ar;if("array"!==fi(e))return[new te(o,e,`array expected, ${fi(e)} found`)];if(n.length&&e.length!==n.length)return[new te(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new te(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};r.$version<7&&(s.function=n.function),"object"===fi(n.value)&&(s=n.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(a({array:e,arrayIndex:t,value:e[t],valueSpec:s,style:i,styleSpec:r,key:`${o}[${t}]`}));return l}function Pi(t){const e=t.key,n=t.value,i=t.valueSpec;let r=fi(n);if("number"===r&&n!=n&&(r="NaN"),"number"!==r)return[new te(e,n,`number expected, ${r} found`)];if("minimum"in i){let r=i.minimum;if("array"===fi(i.minimum)){const e=t.arrayIndex;r=i.minimum[e]}if(n<r)return[new te(e,n,`${n} is less than the minimum value ${r}`)]}if("maximum"in i){let r=i.maximum;if("array"===fi(i.maximum)){const e=t.arrayIndex;r=i.maximum[e]}if(n>r)return[new te(e,n,`${n} is greater than the maximum value ${r}`)]}return[]}function zi(t){const e=t.valueSpec,n=ie(t.value.type);let i,r,o,a={};const s="categorical"!==n&&void 0===t.value.property,l=!s,c="array"===fi(t.value.stops)&&"array"===fi(t.value.stops[0])&&"object"===fi(t.value.stops[0][0]),u=Di({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new te(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const i=t.value;return e=e.concat(Ai({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===fi(i)&&0===i.length&&e.push(new te(t.key,i,"array must have at least one stop")),e},default:function(t){return ar({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&u.push(new te(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||u.push(new te(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!pi(t.valueSpec)&&u.push(new te(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!hi(t.valueSpec)?u.push(new te(t.key,t.value,"property functions not supported")):s&&!di(t.valueSpec)&&u.push(new te(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==t.value.property||u.push(new te(t.key,t.value,'"property" property is required')),u;function h(t){let n=[];const i=t.value,s=t.key;if("array"!==fi(i))return[new te(s,i,`array expected, ${fi(i)} found`)];if(2!==i.length)return[new te(s,i,`array length 2 expected, length ${i.length} found`)];if(c){if("object"!==fi(i[0]))return[new te(s,i,`object expected, ${fi(i[0])} found`)];if(void 0===i[0].zoom)return[new te(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new te(s,i,"object stop key must have value")];if(o&&o>ie(i[0].zoom))return[new te(s,i[0].zoom,"stop zoom values must appear in ascending order")];ie(i[0].zoom)!==o&&(o=ie(i[0].zoom),r=void 0,a={}),n=n.concat(Di({key:`${s}[0]`,value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Pi,value:d}}))}else n=n.concat(d({key:`${s}[0]`,value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return Mi(re(i[1]))?n.concat([new te(`${s}[1]`,i[1],"expressions are not allowed in function stops.")]):n.concat(ar({key:`${s}[1]`,value:i[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,o){const s=fi(t.value),l=ie(t.value),c=null!==t.value?t.value:o;if(i){if(s!==i)return[new te(t.key,c,`${s} stop domain type must match previous stop domain type ${i}`)]}else i=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new te(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let i=`number expected, ${s} found`;return hi(e)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new te(t.key,c,i)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==r&&l<r?[new te(t.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in a?[new te(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new te(t.key,c,`integer expected, found ${l}`)]}}function Ni(t){const e=("property"===t.expressionContext?Ci:Ti)(re(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new te(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new te(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!hn(n))return[new te(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!hn(n))return[new te(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!dn(n,["zoom","feature-state"]))return[new te(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!un(n))return[new te(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ri(t){const e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(ie(n))&&r.push(new te(e,n,`expected one of [${i.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(i.values).indexOf(ie(n))&&r.push(new te(e,n,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(n)} found`)),r}function Oi(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Oi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Fi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bi(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Oi(t)||(t=ji(t));const e=Ti(t,Fi);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,n,i)=>e.value.evaluate(t,n,{},i),needGeometry:Yi(t)}}function Ui(t,e){return t<e?-1:t>e?1:0}function Yi(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Yi(t[e]))return!0;return!1}function ji(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Vi(t[1],t[2],"=="):"!="===e?Hi(Vi(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Vi(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(ji))):"all"===e?["all"].concat(t.slice(1).map(ji)):"none"===e?["all"].concat(t.slice(1).map(ji).map(Hi)):"in"===e?Gi(t[1],t.slice(2)):"!in"===e?Hi(Gi(t[1],t.slice(2))):"has"===e?qi(t[1]):"!has"===e?Hi(qi(t[1])):"within"!==e||t;var n}function Vi(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Gi(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Ui)]]:["filter-in-small",t,["literal",e]]}}function qi(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Hi(t){return["!",t]}function $i(t){return Oi(re(t.value))?Ni(ne({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Zi(t)}function Zi(t){const e=t.value,n=t.key;if("array"!==fi(e))return[new te(n,e,`array expected, ${fi(e)} found`)];const i=t.styleSpec;let r,o=[];if(e.length<1)return[new te(n,e,"filter array must have at least 1 element")];switch(o=o.concat(Ri({key:`${n}[0]`,value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),ie(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===ie(e[1])&&o.push(new te(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new te(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=fi(e[1]),"string"!==r&&o.push(new te(`${n}[1]`,e[1],`string expected, ${r} found`)));for(let a=2;a<e.length;a++)r=fi(e[a]),"$type"===ie(e[1])?o=o.concat(Ri({key:`${n}[${a}]`,value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new te(`${n}[${a}]`,e[a],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let i=1;i<e.length;i++)o=o.concat(Zi({key:`${n}[${i}]`,value:e[i],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=fi(e[1]),2!==e.length?o.push(new te(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==r&&o.push(new te(`${n}[1]`,e[1],`string expected, ${r} found`));break;case"within":r=fi(e[1]),2!==e.length?o.push(new te(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==r&&o.push(new te(`${n}[1]`,e[1],`object expected, ${r} found`))}return o}function Wi(t,e){const n=t.key,i=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[`${e}_${t.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return ar({key:n,value:o,valueSpec:r.transition,style:i,styleSpec:r});const c=t.valueSpec||s[a];if(!c)return[new te(n,o,`unknown property "${a}"`)];let u;if("string"===fi(o)&&hi(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new te(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&h.push(new te(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&mi(re(o))&&"identity"===ie(o.type)&&h.push(new te(n,o,'"text-font" does not support identity functions'))),h.concat(ar({key:t.key,value:o,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function Xi(t){return Wi(t,"paint")}function Ki(t){return Wi(t,"layout")}function Ji(t){let e=[];const n=t.value,i=t.key,r=t.style,o=t.styleSpec;n.type||n.ref||e.push(new te(i,n,'either "type" or "ref" is required'));let a=ie(n.type);const s=ie(n.ref);if(n.id){const o=ie(n.id);for(let a=0;a<t.arrayIndex;a++){const t=r.layers[a];ie(t.id)===o&&e.push(new te(i,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new te(i,n[t],`"${t}" is prohibited for ref layers`))})),r.layers.forEach((e=>{ie(e.id)===s&&(t=e)})),t?t.ref?e.push(new te(i,n.ref,"ref cannot reference another ref layer")):a=ie(t.type):e.push(new te(i,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const t=r.sources&&r.sources[n.source],o=t&&ie(t.type);t?"vector"===o&&"raster"===a?e.push(new te(i,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?e.push(new te(i,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new te(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new te(i,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new te(i,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new te(i,n.source,`source "${n.source}" not found`))}else e.push(new te(i,n,'missing required property "source"'));return e=e.concat(Di({key:i,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ar({key:`${i}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:$i,layout:t=>Di({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ki(ne({layerType:a},t))}}),paint:t=>Di({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Xi(ne({layerType:a},t))}})}})),e}function Qi(t){const e=t.value,n=t.key,i=fi(e);return"string"!==i?[new te(n,e,`string expected, ${i} found`)]:[]}const tr={promoteId:function({key:t,value:e}){if("string"===fi(e))return Qi({key:t,value:e});{const n=[];for(const i in e)n.push(...Qi({key:`${t}.${i}`,value:e[i]}));return n}}};function er(t){const e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new te(n,e,'"type" is required')];const o=ie(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=Di({key:n,value:e,valueSpec:i[`source_${o.replace("-","_")}`],style:t.style,styleSpec:i,objectElementValidators:tr}),a;case"geojson":if(a=Di({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:tr}),e.cluster)for(const t in e.clusterProperties){const[i,r]=e.clusterProperties[t],o="string"==typeof i?[i,["accumulated"],["get",t]]:i;a.push(...Ni({key:`${n}.${t}.map`,value:r,expressionContext:"cluster-map"})),a.push(...Ni({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return Di({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Di({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new te(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ri({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function nr(t){const e=t.value,n=t.styleSpec,i=n.light,r=t.style;let o=[];const a=fi(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new te("light",e,`object expected, ${a} found`)]),o;for(const t in e){const a=t.match(/^(.*)-transition$/);o=a&&i[a[1]]&&i[a[1]].transition?o.concat(ar({key:t,value:e[t],valueSpec:n.transition,style:r,styleSpec:n})):i[t]?o.concat(ar({key:t,value:e[t],valueSpec:i[t],style:r,styleSpec:n})):o.concat([new te(t,e[t],`unknown property "${t}"`)])}return o}function ir(t){const e=t.value,n=t.key,i=t.style,r=t.styleSpec,o=r.terrain;let a=[];const s=fi(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new te("terrain",e,`object expected, ${s} found`)]),a;for(const t in e){const n=t.match(/^(.*)-transition$/);a=n&&o[n[1]]&&o[n[1]].transition?a.concat(ar({key:t,value:e[t],valueSpec:r.transition,style:i,styleSpec:r})):o[t]?a.concat(ar({key:t,value:e[t],valueSpec:o[t],style:i,styleSpec:r})):a.concat([new te(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=i.sources&&i.sources[e.source],r=t&&ie(t.type);t?"raster-dem"!==r&&a.push(new te(n,e.source,`terrain cannot be used with a source of type ${r}, it only be used with a "raster-dem" source type`)):a.push(new te(n,e.source,`source "${e.source}" not found`))}else a.push(new te(n,e,'terrain is missing required property "source"'));return a}function rr(t){const e=t.value,n=t.style,i=t.styleSpec,r=i.fog;let o=[];const a=fi(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new te("fog",e,`object expected, ${a} found`)]),o;for(const t in e){const a=t.match(/^(.*)-transition$/);o=a&&r[a[1]]&&r[a[1]].transition?o.concat(ar({key:t,value:e[t],valueSpec:i.transition,style:n,styleSpec:i})):r[t]?o.concat(ar({key:t,value:e[t],valueSpec:r[t],style:n,styleSpec:i})):o.concat([new te(t,e[t],`unknown property "${t}"`)])}return o}const or={"*":()=>[],array:Ai,boolean:function(t){const e=t.value,n=t.key,i=fi(e);return"boolean"!==i?[new te(n,e,`boolean expected, ${i} found`)]:[]},number:Pi,color:function(t){const e=t.key,n=t.value,i=fi(n);return"string"!==i?[new te(e,n,`color expected, ${i} found`)]:null===Ee.parseCSSColor(n)?[new te(e,n,`color expected, "${n}" found`)]:[]},constants:ee,enum:Ri,filter:$i,function:zi,layer:Ji,object:Di,source:er,light:nr,terrain:ir,fog:rr,string:Qi,formatted:function(t){return 0===Qi(t).length?[]:Ni(t)},resolvedImage:function(t){return 0===Qi(t).length?[]:Ni(t)}};function ar(t){const e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&mi(ie(e))?zi(t):n.expression&&Mi(re(e))?Ni(t):n.type&&or[n.type]?or[n.type](t):Di(ne({},t,{valueSpec:n.type?i[n.type]:n}))}function sr(t){const e=t.value,n=t.key,i=Qi(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new te(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new te(n,e,'"glyphs" url must include a "{range}" token'))),i}function lr(t,e=Qt){let n=[];return n=n.concat(ar({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:sr,"*":()=>[]}})),t.constants&&(n=n.concat(ee({key:"constants",value:t.constants,style:t,styleSpec:e}))),cr(n)}function cr(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function ur(t){return function(...e){return cr(t.apply(this,e))}}lr.source=ur(er),lr.light=ur(nr),lr.terrain=ur(ir),lr.fog=ur(rr),lr.layer=ur(Ji),lr.filter=ur($i),lr.paintProperty=ur(Xi),lr.layoutProperty=ur(Ki);const hr=lr,dr=(hr.source,hr.light),pr=(hr.terrain,hr.fog),fr=(hr.filter,hr.paintProperty),mr=hr.layoutProperty;function gr(t,e){let n=!1;if(e&&e.length)for(const i of e)t.fire(new Kt(new Error(i.message))),n=!0;return n}var _r=yr;function yr(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],e=r[1],n=r[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];i.push(a===s?null:r.subarray(a,s))}var l=r[3+i.length],c=r[3+i.length+1];this.keys=r.subarray(l,c),this.bboxes=r.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var u=0;u<this.d*this.d;u++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var h=n/e*t;this.min=-h,this.max=t+h}yr.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},yr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},yr.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},yr.prototype.query=function(t,e,n,i,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,i,this._queryCell,s,{},r),s},yr.prototype._queryCell=function(t,e,n,i,r,o,a,s){var l=this.cells[r];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):t<=u[p+2]&&e<=u[p+3]&&n>=u[p+0]&&i>=u[p+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},yr.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(n),h=this._convertToCellCoord(i),d=l;d<=u;d++)for(var p=c;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&r.call(this,t,e,n,i,f,o,a,s))return}},yr.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},yr.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},yr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),o+=this.keys.length,r[3+t.length+1]=o,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};const{ImageData:vr,ImageBitmap:br}=_,xr={};function wr(t,e,n={}){h(!xr[t],`${t} is already registered.`),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),xr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}wr("Object",Object),_r.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},_r.deserialize=function(t){return new _r(t.buffer)},wr("Grid",_r),wr("Color",Me),wr("Error",Error),wr("ResolvedImage",Ce),wr("StylePropertyFunction",Ii),wr("StyleExpression",Ei,{omit:["_evaluator"]}),wr("ZoomDependentExpression",ki),wr("ZoomConstantExpression",Si),wr("CompoundExpression",Ve,{omit:["_evaluate"]});for(const t in ri)ri[t]._classRegistryKey||wr(`Expression_${t}`,ri[t]);function Er(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Mr(t){return br&&t instanceof br}function Tr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(Er(t)||Mr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof vr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const i of t)n.push(Tr(i,e));return n}if("object"==typeof t){const n=t.constructor,i=n._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class");h(xr[i]);const r=n.serialize?n.serialize(t,e):{};if(n.serialize)h(!e||r!==e[e.length-1]);else{for(const n in t){if(!t.hasOwnProperty(n))continue;if(xr[i].omit.indexOf(n)>=0)continue;const o=t[n];r[n]=xr[i].shallow.indexOf(n)>=0?o:Tr(o,e)}t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(r.$name=i),r}throw new Error("can't serialize object of type "+typeof t)}function Sr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||Er(t)||Mr(t)||ArrayBuffer.isView(t)||t instanceof vr)return t;if(Array.isArray(t))return t.map(Sr);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=xr[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const i=Object.create(n.prototype);for(const n of Object.keys(t)){if("$name"===n)continue;const r=t[n];i[n]=xr[e].shallow.indexOf(n)>=0?r:Sr(r)}return i}throw new Error("can't deserialize object of type "+typeof t)}class kr{constructor(){this.first=!0}update(t,e){const n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}const Cr=t=>t>=128&&t<=255,Ir=t=>t>=1536&&t<=1791,Lr=t=>t>=1872&&t<=1919,Dr=t=>t>=2208&&t<=2303,Ar=t=>t>=4352&&t<=4607,Pr=t=>t>=5120&&t<=5759,zr=t=>t>=6016&&t<=6143,Nr=t=>t>=6320&&t<=6399,Rr=t=>t>=8192&&t<=8303,Or=t=>t>=8448&&t<=8527,Fr=t=>t>=8528&&t<=8591,Br=t=>t>=8960&&t<=9215,Ur=t=>t>=9216&&t<=9279,Yr=t=>t>=9280&&t<=9311,jr=t=>t>=9312&&t<=9471,Vr=t=>t>=9632&&t<=9727,Gr=t=>t>=9728&&t<=9983,qr=t=>t>=11008&&t<=11263,Hr=t=>t>=11904&&t<=12031,$r=t=>t>=12032&&t<=12255,Zr=t=>t>=12272&&t<=12287,Wr=t=>t>=12288&&t<=12351,Xr=t=>t>=12352&&t<=12447,Kr=t=>t>=12448&&t<=12543,Jr=t=>t>=12544&&t<=12591,Qr=t=>t>=12592&&t<=12687,to=t=>t>=12688&&t<=12703,eo=t=>t>=12704&&t<=12735,no=t=>t>=12736&&t<=12783,io=t=>t>=12784&&t<=12799,ro=t=>t>=12800&&t<=13055,oo=t=>t>=13056&&t<=13311,ao=t=>t>=13312&&t<=19903,so=t=>t>=19904&&t<=19967,lo=t=>t>=19968&&t<=40959,co=t=>t>=40960&&t<=42127,uo=t=>t>=42128&&t<=42191,ho=t=>t>=43360&&t<=43391,po=t=>t>=44032&&t<=55215,fo=t=>t>=55216&&t<=55295,mo=t=>t>=57344&&t<=63743,go=t=>t>=63744&&t<=64255,_o=t=>t>=64336&&t<=65023,yo=t=>t>=65040&&t<=65055,vo=t=>t>=65072&&t<=65103,bo=t=>t>=65104&&t<=65135,xo=t=>t>=65136&&t<=65279,wo=t=>t>=65280&&t<=65519;function Eo(t){for(const e of t)if(So(e.charCodeAt(0)))return!0;return!1}function Mo(t){for(const e of t)if(!To(e.charCodeAt(0)))return!1;return!0}function To(t){return!(Ir(t)||Lr(t)||Dr(t)||_o(t)||xo(t))}function So(t){return!(746!==t&&747!==t&&(t<4352||!(eo(t)||Jr(t)||vo(t)&&!(t>=65097&&t<=65103)||go(t)||oo(t)||Hr(t)||no(t)||!(!Wr(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||ao(t)||lo(t)||ro(t)||Qr(t)||ho(t)||fo(t)||Ar(t)||po(t)||Xr(t)||Zr(t)||to(t)||$r(t)||io(t)||Kr(t)&&12540!==t||!(!wo(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!bo(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Pr(t)||Nr(t)||yo(t)||so(t)||co(t)||uo(t))))}function ko(t){return!(So(t)||function(t){return!!(Cr(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Rr(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Or(t)||Fr(t)||Br(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Ur(t)&&9251!==t||Yr(t)||jr(t)||Vr(t)||Gr(t)&&!(t>=9754&&t<=9759)||qr(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Wr(t)||Kr(t)||mo(t)||vo(t)||bo(t)||wo(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Co(t){return Ir(t)||Lr(t)||Dr(t)||_o(t)||xo(t)}function Io(t){return t>=1424&&t<=2303||_o(t)||xo(t)}function Lo(t,e){return!(!e&&Io(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||zr(t))}function Do(t){for(const e of t)if(Io(e.charCodeAt(0)))return!0;return!1}const Ao="deferred",Po="loading",zo="loaded",No="error";let Ro=null,Oo="unavailable",Fo=null;const Bo=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Oo=No),Ro&&Ro(t)};function Uo(){Yo.fire(new Xt("pluginStateChange",{pluginStatus:Oo,pluginURL:Fo}))}const Yo=new Jt,jo=function(){return Oo},Vo=function(){if(Oo!==Ao||!Fo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Oo=Po,Uo(),Fo&&Ut({url:Fo},(t=>{t?Bo(t):(Oo=zo,Uo())}))},Go={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Oo===zo||null!=Go.applyArabicShaping,isLoading:()=>Oo===Po,setState(t){h(H(),"Cannot set the state of the rtl-text-plugin when not in the web-worker context"),Oo=t.pluginStatus,Fo=t.pluginURL},isParsed:()=>(h(H(),"rtl-text-plugin is only parsed on the worker-threads"),null!=Go.applyArabicShaping&&null!=Go.processBidirectionalText&&null!=Go.processStyledBidirectionalText),getPluginURL:()=>(h(H(),"rtl-text-plugin url can only be queried from the worker threads"),Fo)};class qo{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new kr,this.transition={})}isSupportedScript(t){return function(t,e){for(const n of t)if(!Lo(n.charCodeAt(0),e))return!1;return!0}(t,Go.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}class Ho{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(mi(t))return new Ii(t,e);if(Mi(t)){const n=Ci(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=Me.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class $o{constructor(t){this.property=t,this.value=new Ho(t,void 0)}transitioned(t,e){return new Wo(this.property,this.value,e,D({},t.transition,this.transition),t.now)}untransitioned(){return new Wo(this.property,this.value,null,{},0)}}class Zo{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return Y(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new $o(this._values[t].property)),this._values[t].value=new Ho(this._values[t].property,null===e?void 0:Y(e))}getTransition(t){return Y(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new $o(this._values[t].property)),this._values[t].transition=Y(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const i=this.getTransition(e);void 0!==i&&(t[`${e}-transition`]=i)}return t}transitioned(t,e){const n=new Xo(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(t,e._values[i]);return n}untransitioned(){const t=new Xo(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class Wo{constructor(t,e,n,i,r){const o=i.delay||0,a=i.duration||0;r=r||0,this.property=t,this.value=e,this.begin=r+o,this.end=this.begin+a,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const i=t.now||0,r=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(t,e,n);{const a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),r,M(a))}}return r}}class Xo{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const i=new Qo(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Ko{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return Y(this._values[t].value)}setValue(t,e){this._values[t]=new Ho(this._values[t].property,null===e?void 0:Y(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const i=new Qo(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}}class Jo{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)}}class Qo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class ta{constructor(t){this.specification=t}possiblyEvaluate(t,e){return h(!t.isDataDriven()),t.expression.evaluate(e)}interpolate(t,e,n){const i=vn[this.specification.type];return i?i(t,e,n):t}}class ea{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,i){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Jo(this,{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)},e):new Jo(this,t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Jo(this,{kind:"constant",value:void 0},t.parameters);const i=vn[this.specification.type];return i?new Jo(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,i,r,o){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r,o)}}class na extends ea{possiblyEvaluate(t,e,n,i){if(void 0===t.value)return new Jo(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},n,i),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,e);return new Jo(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const n=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Jo(this,{kind:"constant",value:n},e)}return new Jo(this,t.expression,e)}evaluate(t,e,n,i,r,o){if("source"===t.kind){const a=t.evaluate(e,n,i,r,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value}_calculate(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e,other:n}:{from:n,to:e,other:t}}interpolate(t){return t}}class ia{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){if(void 0!==t.value){if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},n,i);return this._calculate(r,r,r,e)}return h(!t.isDataDriven()),this._calculate(t.expression.evaluate(new qo(Math.floor(e.zoom-1),e)),t.expression.evaluate(new qo(Math.floor(e.zoom),e)),t.expression.evaluate(new qo(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class ra{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)}interpolate(){return!1}}class oa{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const n=t[e];n.specification.overridable&&this.overridableProperties.push(e);const i=this.defaultPropertyValues[e]=new Ho(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new $o(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}}}function aa(t,e){return 256*(t=k(Math.floor(t),0,255))+k(Math.floor(e),0,255)}wr("DataDrivenProperty",ea),wr("DataConstantProperty",ta),wr("CrossFadedDataDrivenProperty",na),wr("CrossFadedProperty",ia),wr("ColorRampProperty",ra);const sa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class la{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ca{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return h(!t.isTransferred),t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){h(!this.isTransferred),this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ua(t,e=1){let n=0,i=0;return{members:t.map((t=>{h(t.name.length);const r=(s=t.type,sa[s].BYTES_PER_ELEMENT),o=n=ha(n,Math.max(e,r)),a=t.components||1;var s;return i=Math.max(i,r),n+=r*a,{name:t.name,type:t.type,components:a,offset:o}})),size:ha(n,Math.max(i,e)),alignment:e}}function ha(t,e){return Math.ceil(t/e)*e}class da extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t}}da.prototype.bytesPerElement=4,wr("StructArrayLayout2i4",da);class pa extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,t}}pa.prototype.bytesPerElement=8,wr("StructArrayLayout4i8",pa);class fa extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r,o,a)}emplace(t,e,n,i,r,o,a,s){const l=6*t,c=12*t,u=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[c+4]=i,this.uint8[c+5]=r,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,t}}fa.prototype.bytesPerElement=12,wr("StructArrayLayout2i4ub1f12",fa);class ma extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t}}ma.prototype.bytesPerElement=8,wr("StructArrayLayout2f8",ma);class ga extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,i,r,o,a,s,l,c)}emplace(t,e,n,i,r,o,a,s,l,c,u){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,t}}ga.prototype.bytesPerElement=20,wr("StructArrayLayout10ui20",ga);class _a extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,i,r,o,a,s)}emplace(t,e,n,i,r,o,a,s,l){const c=8*t;return this.uint16[c+0]=e,this.uint16[c+1]=n,this.uint16[c+2]=i,this.uint16[c+3]=r,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,t}}_a.prototype.bytesPerElement=16,wr("StructArrayLayout8ui16",_a);class ya extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,i,r,o,a,s,l,c,u,h)}emplace(t,e,n,i,r,o,a,s,l,c,u,h,d){const p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=r,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,t}}ya.prototype.bytesPerElement=24,wr("StructArrayLayout4i4ui4i24",ya);class va extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t}}va.prototype.bytesPerElement=12,wr("StructArrayLayout3f12",va);class ba extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.uint32[n+0]=e,t}}ba.prototype.bytesPerElement=4,wr("StructArrayLayout1ul4",ba);class xa extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,i,r,o,a,s,l,c)}emplace(t,e,n,i,r,o,a,s,l,c,u){const h=16*t,d=8*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.float32[d+1]=i,this.float32[d+2]=r,this.float32[d+3]=o,this.float32[d+4]=a,this.int16[h+10]=s,this.uint32[d+6]=l,this.uint16[h+14]=c,this.uint16[h+15]=u,t}}xa.prototype.bytesPerElement=32,wr("StructArrayLayout2i4f1i1ul2ui32",xa);class wa extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)}emplace(t,e,n,i,r,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t}}wa.prototype.bytesPerElement=12,wr("StructArrayLayout2i2i2i12",wa);class Ea extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r)}emplace(t,e,n,i,r,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=i,this.int16[s+6]=r,this.int16[s+7]=o,t}}Ea.prototype.bytesPerElement=16,wr("StructArrayLayout2f1f2i16",Ea);class Ma extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=i,this.float32[a+2]=r,t}}Ma.prototype.bytesPerElement=12,wr("StructArrayLayout2ub2f12",Ma);class Ta extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t}}Ta.prototype.bytesPerElement=6,wr("StructArrayLayout3ui6",Ta);class Sa extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_)}emplace(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y){const v=13*t,b=26*t,x=52*t;return this.float32[v+0]=e,this.float32[v+1]=n,this.uint16[b+4]=i,this.uint16[b+5]=r,this.uint32[v+3]=o,this.uint32[v+4]=a,this.uint32[v+5]=s,this.uint16[b+12]=l,this.uint16[b+13]=c,this.uint16[b+14]=u,this.float32[v+8]=h,this.float32[v+9]=d,this.uint8[x+40]=p,this.uint8[x+41]=f,this.uint8[x+42]=m,this.uint32[v+11]=g,this.int16[b+24]=_,this.uint8[x+50]=y,t}}Sa.prototype.bytesPerElement=52,wr("StructArrayLayout2f2ui3ul3ui2f3ub1ul1i1ub52",Sa);class ka extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E,M,T,S){const k=this.length;return this.resize(k+1),this.emplace(k,t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E,M,T,S)}emplace(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E,M,T,S,k){const C=17*t,I=34*t;return this.float32[C+0]=e,this.float32[C+1]=n,this.int16[I+4]=i,this.int16[I+5]=r,this.int16[I+6]=o,this.int16[I+7]=a,this.int16[I+8]=s,this.int16[I+9]=l,this.uint16[I+10]=c,this.uint16[I+11]=u,this.uint16[I+12]=h,this.uint16[I+13]=d,this.uint16[I+14]=p,this.uint16[I+15]=f,this.uint16[I+16]=m,this.uint16[I+17]=g,this.uint16[I+18]=_,this.uint16[I+19]=y,this.uint16[I+20]=v,this.uint16[I+21]=b,this.uint16[I+22]=x,this.uint16[I+23]=w,this.uint16[I+24]=E,this.uint32[C+13]=M,this.float32[C+14]=T,this.float32[C+15]=S,this.float32[C+16]=k,t}}ka.prototype.bytesPerElement=68,wr("StructArrayLayout2f6i15ui1ul3f68",ka);class Ca extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.float32[n+0]=e,t}}Ca.prototype.bytesPerElement=4,wr("StructArrayLayout1f4",Ca);class Ia extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t}}Ia.prototype.bytesPerElement=6,wr("StructArrayLayout3i6",Ia);class La extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=3*t,a=6*t;return this.uint32[o+0]=e,this.uint16[a+2]=n,this.uint16[a+3]=i,this.uint16[a+4]=r,t}}La.prototype.bytesPerElement=12,wr("StructArrayLayout1ul3ui12",La);class Da extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t}}Da.prototype.bytesPerElement=4,wr("StructArrayLayout2ui4",Da);class Aa extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){const n=1*t;return this.uint16[n+0]=e,t}}Aa.prototype.bytesPerElement=2,wr("StructArrayLayout1ui2",Aa);class Pa extends ca{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,t}}Pa.prototype.bytesPerElement=16,wr("StructArrayLayout4f16",Pa);class za extends la{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new m(this.anchorPointX,this.anchorPointY)}}za.prototype.size=32;class Na extends xa{get(t){return h(!this.isTransferred),new za(this,t)}}wr("CollisionBoxArray",Na);class Ra extends la{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+4]}get numGlyphs(){return this._structArray.uint16[this._pos2+5]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineStartIndex(){return this._structArray.uint32[this._pos4+4]}get lineLength(){return this._structArray.uint32[this._pos4+5]}get segment(){return this._structArray.uint16[this._pos2+12]}get lowerSize(){return this._structArray.uint16[this._pos2+13]}get upperSize(){return this._structArray.uint16[this._pos2+14]}get lineOffsetX(){return this._structArray.float32[this._pos4+8]}get lineOffsetY(){return this._structArray.float32[this._pos4+9]}get writingMode(){return this._structArray.uint8[this._pos1+40]}get placedOrientation(){return this._structArray.uint8[this._pos1+41]}set placedOrientation(t){this._structArray.uint8[this._pos1+41]=t}get hidden(){return this._structArray.uint8[this._pos1+42]}set hidden(t){this._structArray.uint8[this._pos1+42]=t}get crossTileID(){return this._structArray.uint32[this._pos4+11]}set crossTileID(t){this._structArray.uint32[this._pos4+11]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+24]}get flipState(){return this._structArray.uint8[this._pos1+50]}set flipState(t){this._structArray.uint8[this._pos1+50]=t}}Ra.prototype.size=52;class Oa extends Sa{get(t){return h(!this.isTransferred),new Ra(this,t)}}wr("PlacedSymbolArray",Oa);class Fa extends la{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+8]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+9]}get key(){return this._structArray.uint16[this._pos2+10]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get featureIndex(){return this._structArray.uint16[this._pos2+19]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+21]}get numIconVertices(){return this._structArray.uint16[this._pos2+22]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+23]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+24]}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Fa.prototype.size=68;class Ba extends ka{get(t){return h(!this.isTransferred),new Fa(this,t)}}wr("SymbolInstanceArray",Ba);class Ua extends Ca{getoffsetX(t){return this.float32[1*t+0]}}wr("GlyphOffsetArray",Ua);class Ya extends Ia{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}wr("SymbolLineVertexArray",Ya);class ja extends la{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ja.prototype.size=12;class Va extends La{get(t){return h(!this.isTransferred),new ja(this,t)}}wr("FeatureIndexArray",Va);class Ga extends la{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Ga.prototype.size=4;class qa extends Da{get(t){return h(!this.isTransferred),new Ga(this,t)}}wr("FillExtrusionCentroidArray",qa);const Ha=ua([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),$a=ua([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Za=e((function(t){t.exports=function(t,e){var n,i,r,o,a,s,l,c;for(n=3&t.length,i=t.length-n,r=e,a=3432918353,s=461845907,c=0;c<i;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),Wa=e((function(t){t.exports=function(t,e){for(var n,i=t.length,r=e^i,o=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),Xa=Za,Ka=Za,Ja=Wa;Xa.murmur3=Ka,Xa.murmur2=Ja;class Qa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,i){this.ids.push(ts(t)),this.positions.push(e,n,i)}getPositions(t){h(this.indexed);const e=ts(t);let n=0,i=this.ids.length-1;for(;n<i;){const t=n+i>>1;this.ids[t]>=e?i=t:n=t+1}const r=[];for(;this.ids[n]===e;){const t=this.positions[3*n],e=this.positions[3*n+1],i=this.positions[3*n+2];r.push({index:t,start:e,end:i}),n++}return r}static serialize(t,e){const n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return es(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(t){const e=new Qa;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function ts(t){const e=+t;return!isNaN(e)&&e<=v?e:Xa(String(t))}function es(t,e,n,i){for(;n<i;){const r=t[n+i>>1];let o=n-1,a=i+1;for(;;){do{o++}while(t[o]<r);do{a--}while(t[a]>r);if(o>=a)break;ns(t,o,a),ns(e,3*o,3*a),ns(e,3*o+1,3*a+1),ns(e,3*o+2,3*a+2)}a-n<i-a?(es(t,e,n,a),n=a+1):(es(t,e,a+1,i),i=a)}}function ns(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}wr("FeaturePositionMap",Qa);class is{constructor(t,e){this.gl=t.gl,this.location=e}}class rs extends is{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class os extends is{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class as extends is{constructor(t,e){super(t,e),this.current=Me.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const ss=new Float32Array(16);const ls=new Float32Array(9);function cs(t){return[aa(255*t.r,255*t.g),aa(255*t.b,255*t.a)]}class us{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n){t.set(n.constantOr(this.value))}getBinding(t,e,n){return"color"===this.type?new as(t,e):new rs(t,e)}}class hs{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tl.concat(e.br),this.patternTo=t.tl.concat(t.br)}setUniform(t,e,n,i){const r="u_pattern_to"===i||"u_dash_to"===i?this.patternTo:"u_pattern_from"===i||"u_dash_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&t.set(r)}getBinding(t,e,n){return"u_pattern_from"===n||"u_pattern_to"===n||"u_dash_from"===n||"u_dash_to"===n?new os(t,e):new rs(t,e)}}class ds{constructor(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(t,e,n,i,r){const o=this.paintVertexArray.length,a=this.expression.evaluate(new qo(0),e,{},i,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,n,i){const r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,e,r)}_setPaintValue(t,e,n){if("color"===this.type){const i=cs(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ps{constructor(t,e,n,i,r,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,i,r){const o=this.expression.evaluate(new qo(this.zoom),e,{},i,[],r),a=this.expression.evaluate(new qo(this.zoom+1),e,{},i,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}updatePaintArray(t,e,n,i){const r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,e,r,o)}_setPaintValue(t,e,n,i){if("color"===this.type){const r=cs(n),o=cs(i);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1],o[0],o[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=k(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)}getBinding(t,e,n){return new rs(t,e)}}class fs{constructor(t,e,n,i,r,o,a){this.expression=t,this.type=n,this.useIntegerZoom=i,this.zoom=r,this.layerId=a,this.paintVertexAttributes=("array"===n?$a:Ha).members;for(let t=0;t<e.length;++t)h(`a_${e[t]}`===this.paintVertexAttributes[t].name);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(t,e,n){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,i,r){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],r)}_setPaintValues(t,e,n,i){if(!i||!n)return;const{min:r,mid:o,max:a}=n,s=i[r],l=i[o],c=i[a];if(s&&l&&c)for(let n=t;n<e;n++)this._setPaintValue(this.zoomInPaintVertexArray,n,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,n,l,c)}_setPaintValue(t,e,n,i){t.emplace(e,n.tl[0],n.tl[1],n.br[0],n.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],n.pixelRatio,i.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ms{constructor(t,e,n=(()=>!0)){this.binders={},this._buffers=[];const i=[];for(const r in t.paint._values){if(!n(r))continue;const o=t.paint.get(r);if(!(o instanceof Jo&&hi(o.property.specification)))continue;const a=ys(r,t.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u,d="line-dasharray"===String(r)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||h){const n=xs(r,l,"source");this.binders[r]=h?new fs(s,a,l,c,e,n,t.id):new ds(s,a,l,n),i.push(`/a_${r}`)}else{const t=xs(r,l,"composite");this.binders[r]=new ps(s,a,l,c,e,t),i.push(`/z_${r}`)}else this.binders[r]=h?new hs(s.value,a):new us(s.value,a,l),i.push(`/u_${r}`)}this.cacheKey=i.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof ds||e instanceof ps?e.maxValue:0}populatePaintArrays(t,e,n,i,r){for(const o in this.binders){const a=this.binders[o];(a instanceof ds||a instanceof ps||a instanceof fs)&&a.populatePaintArray(t,e,n,i,r)}}setConstantPatternPositions(t,e){for(const n in this.binders){const i=this.binders[n];i instanceof hs&&i.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,n,i,r){let o=!1;for(const a in t){const s=e.getPositions(a);for(const e of s){const s=n.feature(e.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof ds||l instanceof ps||l instanceof fs)&&!0===l.expression.isStateDependent){const c=i.paint.get(n);l.expression=c.value,l.updatePaintArray(e.start,e.end,s,t[a],r),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof us||n instanceof hs)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof ds||n instanceof ps||n instanceof fs)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof us||n instanceof hs||n instanceof ps)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const n=[];for(const i in this.binders){const r=this.binders[i];if(r instanceof us||r instanceof hs||r instanceof ps)for(const o of r.uniformNames)if(e[o]){const a=r.getBinding(t,e[o],o);n.push({name:o,property:i,binding:a})}}return n}setUniforms(t,e,n,i){for(const{name:t,property:r,binding:o}of e)this.binders[r].setUniform(o,i,n.get(r),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const n=this.binders[e];if(t&&n instanceof fs){const e=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(n instanceof ds||n instanceof ps)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof ds||n instanceof ps||n instanceof fs)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof ds||e instanceof ps||e instanceof fs)&&e.destroy()}}}class gs{constructor(t,e,n=(()=>!0)){this.programConfigurations={};for(const i of t)this.programConfigurations[i.id]=new ms(i,e,n);this.needsUpload=!1,this._featureMap=new Qa,this._bufferOffset=0}populatePaintArrays(t,e,n,i,r,o){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e,i,r,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,i){for(const r of n)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,e,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const _s={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function ys(t,e){return _s[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const vs={"line-pattern":{source:ga,composite:ga},"fill-pattern":{source:ga,composite:ga},"fill-extrusion-pattern":{source:ga,composite:ga},"line-dasharray":{source:_a,composite:_a}},bs={color:{source:ma,composite:Pa},number:{source:Ca,composite:ma}};function xs(t,e,n){const i=vs[t];return i&&i[n]||bs[e][n]}wr("ConstantBinder",us),wr("CrossFadedConstantBinder",hs),wr("SourceExpressionBinder",ds),wr("CrossFadedCompositeBinder",fs),wr("CompositeExpressionBinder",ps),wr("ProgramConfiguration",ms,{omit:["_buffers"]}),wr("ProgramConfigurationSet",gs);const ws="-transition";class Es extends Jt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(t=t,this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new Ko(e.layout)),e.paint)){this._transitionablePaint=new Zo(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qo(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n={}){if(null!=e){const i=`layers.${this.id}.layout.${t}`;if(this._validate(mr,i,t,e,n))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e}getPaintProperty(t){return F(t,ws)?this._transitionablePaint.getTransition(t.slice(0,-ws.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(null!=e){const i=`layers.${this.id}.paint.${t}`;if(this._validate(fr,i,t,e,n))return!1}if(F(t,ws))return this._transitionablePaint.setTransition(t.slice(0,-ws.length),e||void 0),!1;{const n=this._transitionablePaint._values[t],i="cross-faded-data-driven"===n.property.specification["property-type"],r=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||r||i||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),U(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,i,r={}){return(!r||!1!==r.validate)&&gr(this,t.call(hr,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:Qt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof Jo&&hi(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const Ms=ua([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ts,size:Ss,alignment:ks}=Ms;class Cs{constructor(t=[]){this.segments=t}prepareSegment(t,e,n,i){let r=this.segments[this.segments.length-1];return t>Cs.MAX_VERTEX_ARRAY_LENGTH&&V(`Max vertices per segment is ${Cs.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!r||r.vertexLength+t>Cs.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,i){return new Cs([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}Cs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,wr("SegmentVector",Cs);var Is=8192;const Ls=Math.pow(2,14)-1,Ds=-Ls-1;function As(t){const e=Is/t.extent,n=t.loadGeometry();for(let t=0;t<n.length;t++){const i=n[t];for(let t=0;t<i.length;t++){const n=i[t],r=Math.round(n.x*e),o=Math.round(n.y*e);n.x=k(r,Ds,Ls),n.y=k(o,Ds,Ls),(r<n.x||r>n.x+1||o<n.y||o>n.y+1)&&V("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Ps(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?As(t):[]}}function zs(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}class Ns{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new da,this.indexArray=new Ta,this.segments=new Cs,this.programConfigurations=new gs(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){const i=this.layers[0],r=[];let o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));for(const{feature:e,id:i,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Ps(e,t);if(!this.layers[0]._featureFilter.filter(new qo(this.zoom),l,n))continue;const c=o?o.evaluate(l,{},n):void 0,u={id:i,properties:e.properties,type:e.type,sourceLayerIndex:s,index:a,geometry:t?l.geometry:As(e),patterns:{},sortKey:c};r.push(u)}o&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of r){const{geometry:r,index:o,sourceLayerIndex:a}=i,s=t[o].feature;this.addFeature(i,r,o,n),e.featureIndex.insert(s,r,o,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ts),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i){for(const n of e)for(const e of n){const n=e.x,i=e.y;if(n<0||n>=Is||i<0||i>=Is)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=r.vertexLength;zs(this.layoutVertexArray,n,i,-1,-1),zs(this.layoutVertexArray,n,i,1,-1),zs(this.layoutVertexArray,n,i,1,1),zs(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i)}}function Rs(t,e){for(let n=0;n<t.length;n++)if(qs(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(qs(t,e[n]))return!0;return!!Us(t,e)}function Os(t,e,n){return!!qs(t,e)||!!js(e,t,n)}function Fs(t,e){if(1===t.length)return Gs(e,t[0]);for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.length;e++)if(qs(t,i[e]))return!0}for(let n=0;n<t.length;n++)if(Gs(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Us(t,e[n]))return!0;return!1}function Bs(t,e,n){if(t.length>1){if(Us(t,e))return!0;for(let i=0;i<e.length;i++)if(js(e[i],t,n))return!0}for(let i=0;i<t.length;i++)if(js(t[i],e,n))return!0;return!1}function Us(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1];for(let t=0;t<e.length-1;t++)if(Ys(i,r,e[t],e[t+1]))return!0}return!1}function Ys(t,e,n,i){return G(t,n,i)!==G(e,n,i)&&G(t,e,n)!==G(t,e,i)}function js(t,e,n){const i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(let n=1;n<e.length;n++)if(Vs(t,e[n-1],e[n])<i)return!0;return!1}function Vs(t,e,n){const i=e.distSqr(n);if(0===i)return t.distSqr(e);const r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return r<0?t.distSqr(e):r>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(r)._add(e))}function Gs(t,e){let n,i,r,o=!1;for(let a=0;a<t.length;a++){n=t[a];for(let t=0,a=n.length-1;t<n.length;a=t++)i=n[t],r=n[a],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function qs(t,e){let n=!1;for(let i=0,r=t.length-1;i<t.length;r=i++){const o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Hs(t,e,n,i,r){for(const o of t)if(e<=o.x&&n<=o.y&&i>=o.x&&r>=o.y)return!0;const o=[new m(e,n),new m(e,r),new m(i,r),new m(i,n)];if(t.length>2)for(const e of o)if(qs(t,e))return!0;for(let e=0;e<t.length-1;e++)if($s(t[e],t[e+1],o))return!0;return!1}function $s(t,e,n){const i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;const o=G(t,e,n[0]);return o!==G(t,e,n[1])||o!==G(t,e,n[2])||o!==G(t,e,n[3])}function Zs(t,e,n){const i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function Ws(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Xs(t,e,n,i,r){if(!e[0]&&!e[1])return t;const o=m.convert(e)._mult(r);"viewport"===n&&o._rotate(-i);const a=[];for(let e=0;e<t.length;e++){const n=t[e];a.push(n.sub(o))}return a}function Ks(t,e,n,i){const r=m.convert(t)._mult(i);return"viewport"===e&&r._rotate(-n),r}wr("CircleBucket",Ns,{omit:["layers"]});const Js=new oa({"circle-sort-key":new ea(Qt.layout_circle["circle-sort-key"])});var Qs={paint:new oa({"circle-radius":new ea(Qt.paint_circle["circle-radius"]),"circle-color":new ea(Qt.paint_circle["circle-color"]),"circle-blur":new ea(Qt.paint_circle["circle-blur"]),"circle-opacity":new ea(Qt.paint_circle["circle-opacity"]),"circle-translate":new ta(Qt.paint_circle["circle-translate"]),"circle-translate-anchor":new ta(Qt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ta(Qt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ta(Qt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ea(Qt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ea(Qt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ea(Qt.paint_circle["circle-stroke-opacity"])}),layout:Js},tl="undefined"!=typeof Float32Array?Float32Array:Array;function el(){var t=new tl(9);return tl!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function nl(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function il(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],_=e[14],y=e[15],v=n[0],b=n[1],x=n[2],w=n[3];return t[0]=v*i+b*s+x*h+w*m,t[1]=v*r+b*l+x*d+w*g,t[2]=v*o+b*c+x*p+w*_,t[3]=v*a+b*u+x*f+w*y,v=n[4],b=n[5],x=n[6],w=n[7],t[4]=v*i+b*s+x*h+w*m,t[5]=v*r+b*l+x*d+w*g,t[6]=v*o+b*c+x*p+w*_,t[7]=v*a+b*u+x*f+w*y,v=n[8],b=n[9],x=n[10],w=n[11],t[8]=v*i+b*s+x*h+w*m,t[9]=v*r+b*l+x*d+w*g,t[10]=v*o+b*c+x*p+w*_,t[11]=v*a+b*u+x*f+w*y,v=n[12],b=n[13],x=n[14],w=n[15],t[12]=v*i+b*s+x*h+w*m,t[13]=v*r+b*l+x*d+w*g,t[14]=v*o+b*c+x*p+w*_,t[15]=v*a+b*u+x*f+w*y,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var rl=il;function ol(){var t=new tl(3);return tl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function al(t){var e=new tl(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function sl(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function ll(t,e,n){var i=new tl(3);return i[0]=t,i[1]=e,i[2]=n,i}function cl(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ul(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function hl(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function dl(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function pl(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function fl(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function ml(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gl(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-o*s,t[1]=o*a-i*l,t[2]=i*s-r*a,t}function _l(t,e,n){var i=n[0],r=n[1],o=n[2],a=n[3],s=e[0],l=e[1],c=e[2],u=r*c-o*l,h=o*s-i*c,d=i*l-r*s,p=r*d-o*h,f=o*u-i*d,m=i*h-r*u,g=2*a;return u*=g,h*=g,d*=g,p*=2,f*=2,m*=2,t[0]=s+u+p,t[1]=l+h+f,t[2]=c+d+m,t}var yl=ul,vl=hl,bl=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},xl=sl;function wl(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}ol();var El,Ml=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t};function Tl(){var t=new tl(4);return tl!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Sl(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function kl(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+a*s,t[1]=r*l+o*s,t[2]=o*l-r*s,t[3]=a*l-i*s,t}El=new tl(4),tl!=Float32Array&&(El[0]=0,El[1]=0,El[2]=0,El[3]=0);var Cl=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.hypot(e,n,i,r)},Il=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=o*a,t},Ll=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]};ol(),ll(1,0,0),ll(0,1,0),Tl(),Tl(),el(),function(){var t=new tl(2);tl!=Float32Array&&(t[0]=0,t[1]=0)}();class Dl{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(t,e,n){const i=Math.pow(2,n),r=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const r=wl([],n,t),o=1/r[3]/e*i;return Ml(r,r,[o,o,1/r[3],o])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((t=>{const e=fl([],gl([],yl([],r[t[0]],r[t[1]]),yl([],r[t[2]],r[t[1]]))),n=-ml(e,r[t[1]]);return e.concat(n)}));return new Dl(r,o)}}class Al{constructor(t,e){this.min=t,this.max=e,this.center=dl([],cl([],this.min,this.max),.5)}quadrant(t){const e=[t%2==0,t<2],n=al(this.min),i=al(this.max);for(let t=0;t<e.length;t++)n[t]=e[t]?this.min[t]:this.center[t],i[t]=e[t]?this.center[t]:this.max[t];return i[2]=this.max[2],new Al(n,i)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}intersects(t){const e=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let o=0;o<t.planes.length;o++){const a=t.planes[o];let s=0;for(let t=0;t<e.length;t++)s+=(r=e[t],(i=a)[0]*r[0]+i[1]*r[1]+i[2]*r[2]+i[3]*r[3]>=0);if(0===s)return 0;s!==e.length&&(n=!1)}var i,r;if(n)return 2;for(let e=0;e<3;e++){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let r=0;r<t.points.length;r++){const o=t.points[r][e]-this.min[e];n=Math.min(n,o),i=Math.max(i,o)}if(i<0||n>this.max[e]-this.min[e])return 0}return 1}}function Pl(t,e,n){const i=wl([],[t.x,t.y,e,1],n);return new m(i[0]/i[3],i[1]/i[3])}const zl=ll(0,0,0),Nl=ll(0,0,1);function Rl(t,e){const n=ol();zl[2]=e;const i=t.intersectsPlane(zl,Nl,n);return h(i,"tilespacePoint should always be below horizon, and since camera cannot have pitch >90, ray should always intersect"),new m(n[0],n[1])}class Ol extends Ns{}function Fl(t,{width:e,height:n},i,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==e*n*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(e*n*i);return t.width=e,t.height=n,t.data=r,t}function Bl(t,{width:e,height:n},i){if(e===t.width&&n===t.height)return;const r=Fl({},{width:e,height:n},i);Ul(t,r,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,n)},i),t.width=e,t.height=n,t.data=r.data}function Ul(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;h(a!==s);for(let l=0;l<r.height;l++){const c=((n.y+l)*t.width+n.x)*o,u=((i.y+l)*e.width+i.x)*o;for(let t=0;t<r.width*o;t++)s[u+t]=a[c+t]}return e}wr("HeatmapBucket",Ol,{omit:["layers"]});class Yl{constructor(t,e){Fl(this,t,1,e)}resize(t){Bl(this,t,1)}clone(){return new Yl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){Ul(t,e,n,i,r,1)}}class jl{constructor(t,e){Fl(this,t,4,e)}resize(t){Bl(this,t,4)}replace(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t}clone(){return new jl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){Ul(t,e,n,i,r,4)}}wr("AlphaImage",Yl),wr("RGBAImage",jl);var Vl={paint:new oa({"heatmap-radius":new ea(Qt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ea(Qt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ta(Qt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ra(Qt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ta(Qt.paint_heatmap["heatmap-opacity"])})};function Gl(t){const e={},n=t.resolution||256,i=t.clips?t.clips.length:1,r=t.image||new jl({width:n,height:i});var o;h((o=n,Math.log(o)/Math.LN2%1==0));const a=(n,i,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);r.data[n+i+0]=Math.floor(255*a.r/a.a),r.data[n+i+1]=Math.floor(255*a.g/a.a),r.data[n+i+2]=Math.floor(255*a.b/a.a),r.data[n+i+3]=Math.floor(255*a.a)};if(t.clips)for(let e=0,r=0;e<i;++e,r+=4*n)for(let i=0,o=0;i<n;i++,o+=4){const s=i/(n-1),{start:l,end:c}=t.clips[e];a(r,o,l*(1-s)+c*s)}else for(let t=0,e=0;t<n;t++,e+=4)a(0,e,t/(n-1));return r}var ql={paint:new oa({"hillshade-illumination-direction":new ta(Qt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ta(Qt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ta(Qt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ta(Qt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ta(Qt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ta(Qt.paint_hillshade["hillshade-accent-color"])})};const Hl=ua([{name:"a_pos",components:2,type:"Int16"}],4),{members:$l,size:Zl,alignment:Wl}=Hl;var Xl=Jl,Kl=Jl;function Jl(t,e,n){n=n||2;var i,r,o,a,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=Ql(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=Ql(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(uc(a));for(s.sort(ac),r=0;r<s.length;r++)sc(s[r],n),n=tc(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<i&&(i=s),(l=t[f+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-i,a-r))?1/c:0}return ec(d,p,n,i,r,c),p}function Ql(t,e,n,i,r){var o,a;if(r===Ec(t,e,n,i)>0)for(o=e;o<n;o+=i)a=bc(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=bc(o,t[o],t[o+1],a);return a&&fc(a,a.next)&&(xc(a),a=a.next),a}function tc(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!fc(i,i.next)&&0!==pc(i.prev,i,i.next))i=i.next;else{if(xc(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function ec(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=cc(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?ic(t,i,r,o):nc(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),xc(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?ec(t=rc(tc(t),e,n),e,n,i,r,o,2):2===a&&oc(t,e,n,i,r,o):ec(tc(t),e,n,i,r,o,1);break}}}function nc(t){var e=t.prev,n=t,i=t.next;if(pc(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(hc(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&pc(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function ic(t,e,n,i){var r=t.prev,o=t,a=t.next;if(pc(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=cc(s,l,e,n,i),d=cc(c,u,e,n,i),p=t.prevZ,f=t.nextZ;p&&p.z>=h&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&hc(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&pc(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&hc(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&pc(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&hc(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&pc(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&hc(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&pc(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function rc(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!fc(r,o)&&mc(r,i,i.next,o)&&yc(r,o)&&yc(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),xc(i),xc(i.next),i=t=o),i=i.next}while(i!==t);return tc(i)}function oc(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&dc(a,s)){var l=vc(a,s);return a=tc(a,a.next),l=tc(l,l.next),ec(a,e,n,i,r,o),void ec(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function ac(t,e){return t.x-e.x}function sc(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var l,c=n,u=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&hc(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),yc(i,t)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&lc(n,i)))&&(n=i,d=l)),i=i.next}while(i!==c);return n}(t,e)){var n=vc(e,t);tc(e,e.next),tc(n,n.next)}}function lc(t,e){return pc(t.prev,t,e.prev)<0&&pc(e.next,t,t.next)<0}function cc(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function uc(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function hc(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function dc(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&mc(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(yc(t,e)&&yc(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(pc(t.prev,t,e.prev)||pc(t,e.prev,e))||fc(t,e)&&pc(t.prev,t,t.next)>0&&pc(e.prev,e,e.next)>0)}function pc(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function fc(t,e){return t.x===e.x&&t.y===e.y}function mc(t,e,n,i){var r=_c(pc(t,e,n)),o=_c(pc(t,e,i)),a=_c(pc(n,i,t)),s=_c(pc(n,i,e));return r!==o&&a!==s||!(0!==r||!gc(t,n,e))||!(0!==o||!gc(t,i,e))||!(0!==a||!gc(n,t,i))||!(0!==s||!gc(n,e,i))}function gc(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _c(t){return t>0?1:t<0?-1:0}function yc(t,e){return pc(t.prev,t,t.next)<0?pc(t,e,t.next)>=0&&pc(t,t.prev,e)>=0:pc(t,e,t.prev)<0||pc(t,t.next,e)<0}function vc(t,e){var n=new wc(t.i,t.x,t.y),i=new wc(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function bc(t,e,n,i){var r=new wc(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function xc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function wc(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ec(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Mc(t,e,n,i,r){Tc(t,e,n||0,i||t.length-1,r||kc)}function Tc(t,e,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);Tc(t,e,Math.max(n,Math.floor(e-a*l/o+c)),Math.min(i,Math.floor(e+(o-a)*l/o+c)),r)}var u=t[e],h=n,d=i;for(Sc(t,n,e),r(t[i],u)>0&&Sc(t,n,i);h<d;){for(Sc(t,h,d),h++,d--;r(t[h],u)<0;)h++;for(;r(t[d],u)>0;)d--}0===r(t[n],u)?Sc(t,n,d):Sc(t,++d,i),d<=e&&(n=d+1),e<=d&&(i=d-1)}}function Sc(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function kc(t,e){return t<e?-1:t>e?1:0}function Cc(t,e){const n=t.length;if(n<=1)return[t];const i=[];let r,o;for(let e=0;e<n;e++){const n=q(t[e]);0!==n&&(t[e].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(r&&i.push(r),r=[t[e]]):r.push(t[e]))}if(r&&i.push(r),e>1)for(let t=0;t<i.length;t++)i[t].length<=e||(Mc(i[t],e,1,i[t].length-1,Ic),i[t]=i[t].slice(0,e));return i}function Ic(t,e){return e.area-t.area}function Lc(t,e,n){const i=n.patternDependencies;let r=!1;for(const n of e){const e=n.paint.get(`${t}-pattern`);e.isConstant()||(r=!0);const o=e.constantOr(null);o&&(r=!0,i[o.to]=!0,i[o.from]=!0)}return r}function Dc(t,e,n,i,r){const o=r.patternDependencies;for(const a of e){const e=a.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:i-1},n,{},r.availableImages),s=e.evaluate({zoom:i},n,{},r.availableImages),l=e.evaluate({zoom:i+1},n,{},r.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:t,mid:s,max:l}}}return n}Jl.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(Ec(t,0,o,n));if(r)for(var s=0,l=e.length;s<l;s++){var c=e[s]*n,u=s<l-1?e[s+1]*n:t.length;a-=Math.abs(Ec(t,c,u,n))}var h=0;for(s=0;s<i.length;s+=3){var d=i[s]*n,p=i[s+1]*n,f=i[s+2]*n;h+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},Jl.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},Xl.default=Kl;class Ac{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new da,this.indexArray=new Ta,this.indexArray2=new Da,this.programConfigurations=new gs(t.layers,t.zoom),this.segments=new Cs,this.segments2=new Cs,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=Lc("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),r=[];for(const{feature:o,id:a,index:s,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Ps(o,t);if(!this.layers[0]._featureFilter.filter(new qo(this.zoom),c,n))continue;const u=i?i.evaluate(c,{},n,e.availableImages):void 0,h={id:a,properties:o.properties,type:o.type,sourceLayerIndex:l,index:s,geometry:t?c.geometry:As(o),patterns:{},sortKey:u};r.push(h)}i&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of r){const{geometry:r,index:o,sourceLayerIndex:a}=i;if(this.hasPattern){const t=Dc("fill",this.layers,i,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(i,r,o,n,{});const s=t[o].feature;e.featureIndex.insert(s,r,o,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,$l),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,i,r){for(const t of Cc(e,500)){let e=0;for(const n of t)e+=n.length;const n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),i=n.vertexLength,r=[],o=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&o.push(r.length/2);const n=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),i=n.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(i+e.length-1,i),r.push(e[0].x),r.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(i+t-1,i+t),r.push(e[t].x),r.push(e[t].y);n.vertexLength+=e.length,n.primitiveLength+=e.length}const a=Xl(r,o);h(a.length%3==0);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(i+a[t],i+a[t+1],i+a[t+2]);n.vertexLength+=e,n.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}}wr("FillBucket",Ac,{omit:["layers","patternFeatures"]});const Pc=new oa({"fill-sort-key":new ea(Qt.layout_fill["fill-sort-key"])});var zc={paint:new oa({"fill-antialias":new ta(Qt.paint_fill["fill-antialias"]),"fill-opacity":new ea(Qt.paint_fill["fill-opacity"]),"fill-color":new ea(Qt.paint_fill["fill-color"]),"fill-outline-color":new ea(Qt.paint_fill["fill-outline-color"]),"fill-translate":new ta(Qt.paint_fill["fill-translate"]),"fill-translate-anchor":new ta(Qt.paint_fill["fill-translate-anchor"]),"fill-pattern":new na(Qt.paint_fill["fill-pattern"])}),layout:Pc};const Nc=ua([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Rc=ua([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Oc,size:Fc,alignment:Bc}=Nc;var Uc=Yc;function Yc(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(jc,this,e)}function jc(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Vc(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],i+=((n=t[a]).x-e.x)*(e.y+n.y);return i}Yc.types=["Unknown","Point","LineString","Polygon"],Yc.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,r=0,o=0,a=0,s=[];t.pos<n;){if(r<=0){var l=t.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)o+=t.readSVarint(),a+=t.readSVarint(),1===i&&(e&&s.push(e),e=[]),e.push(new m(o,a));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Yc.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(i<=0){var u=t.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},Yc.prototype.toGeoJSON=function(t,e,n){var i,r,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=Yc.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e],i=180-360*(n.y+s)/o;t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp(i*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];u(l=h);break;case 2:for(i=0;i<l.length;i++)u(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var a=Vc(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)u(l[i][r])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Gc=qc;function qc(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Hc,this,e),this.length=this._features.length}function Hc(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function $c(t,e,n){if(3===t){var i=new Gc(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}qc.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Uc(this._pbf,e,this.extent,this._keys,this._values)};var Zc={VectorTile:function(t,e){this.layers=t.readFields($c,{},e)},VectorTileFeature:Uc,VectorTileLayer:Gc};const Wc=Zc.VectorTileFeature.types,Xc=Math.pow(2,13);function Kc(t,e,n,i,r,o,a,s){t.emplaceBack((e<<1)+a,(n<<1)+o,(Math.floor(i*Xc)<<1)+r,Math.round(s))}class Jc{constructor(){this.acc=new m(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new m(t.x,t.y),this.max=new m(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);let n=!!this.borders;const i=this.min,r=this.max;t.x<i.x?(i.x=t.x,n=!0):t.x>r.x&&(r.x=t.x,n=!0),t.y<i.y?(i.y=t.y,n=!0):t.y>r.y&&(r.y=t.y,n=!0),((0===t.x||t.x===Is)&&t.x===e.x)!=((0===t.y||t.y===Is)&&t.y===e.y)&&this.processBorderOverlap(t,e),n&&this.checkBorderIntersection(t,e)}checkBorderIntersection(t,e){e.x<0!=t.x<0&&this.addBorderIntersection(0,yn(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>Is!=t.x>Is&&this.addBorderIntersection(1,yn(e.y,t.y,(Is-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,yn(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>Is!=t.y>Is&&this.addBorderIntersection(3,yn(e.x,t.x,(Is-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{h(t.y===e.y);const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new m(0,0)}span(){return new m(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class Qc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new pa,this.centroidVertexArray=new qa,this.indexArray=new Ta,this.programConfigurations=new gs(t.layers,t.zoom),this.segments=new Cs,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n){this.features=[],this.hasPattern=Lc("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(t){const e=40075017,n=t.y/(1<<t.z),i=Math.exp(Math.PI*(1-2*n));return 2*e*i/(i*i+1)/Is/(1<<t.z)}(n);for(const{feature:i,id:r,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,s=Ps(i,t);if(!this.layers[0]._featureFilter.filter(new qo(this.zoom),s,n))continue;const l={id:r,sourceLayerIndex:a,index:o,geometry:t?s.geometry:As(i),properties:i.properties,type:i.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(Dc("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,n,{}),e.featureIndex.insert(i,l.geometry,o,a,this.index,c)}this.sortBorders()}addFeatures(t,e,n){for(const t of this.features){const{geometry:i}=t;this.addFeature(t,i,t.index,e,n)}this.sortBorders()}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Oc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Rc.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i,r){const o=this.enableTerrain?new Jc:null;for(const n of Cc(e,500)){let e=0,i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===n.length||((a=n[0]).every((t=>t.x<=0))||a.every((t=>t.x>=Is))||a.every((t=>t.y<=0))||a.every((t=>t.y>=Is))))continue;for(let t=0;t<n.length;t++){const r=n[t];if(0===r.length)continue;e+=r.length;let a=0;o&&o.startRing(r[0]);for(let t=0;t<r.length;t++){const e=r[t];if(t>=1){const n=r[t-1];if(!tu(e,n)){o&&o.append(e,n),i.vertexLength+4>Cs.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=e.sub(n)._perp(),r=t.x/(Math.abs(t.x)+Math.abs(t.y)),s=t.y>0?1:0,l=n.dist(e);a+l>32768&&(a=0),Kc(this.layoutVertexArray,e.x,e.y,r,s,0,0,a),Kc(this.layoutVertexArray,e.x,e.y,r,s,0,1,a),a+=l,Kc(this.layoutVertexArray,n.x,n.y,r,s,0,0,a),Kc(this.layoutVertexArray,n.x,n.y,r,s,0,1,a);const c=i.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+e>Cs.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Wc[t.type])continue;const r=[],s=[],l=i.vertexLength;for(let t=0;t<n.length;t++){const e=n[t];if(0!==e.length){e!==n[0]&&s.push(r.length/2);for(let t=0;t<e.length;t++){const n=e[t];Kc(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),r.push(n.x),r.push(n.y),o&&o.currentPolyCount.top++}}}const c=Xl(r,s);h(c.length%3==0);for(let t=0;t<c.length;t+=3)this.indexArray.emplaceBack(l+c[t],l+c[t+2],l+c[t+1]);i.primitiveLength+=c.length/3,i.vertexLength+=e}var a;if(o&&o.polyCount.length>0){if(o.borders){o.vertexArrayOffset=this.centroidVertexArray.length;const t=o.borders,e=this.featuresOnBorder.push(o)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(o.borders?void 0:o.centroid(),o),h(!this.centroidVertexArray.length||this.centroidVertexArray.length===this.layoutVertexArray.length)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e,n=!0){let i,r;if(t)if(0!==t.y){const n=e.span()._mult(this.tileToMeter);i=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(n.x/10)),r=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else i=Math.ceil(7*(t.x+450)),r=0;else i=0,r=+n;h(n||void 0!==e.vertexArrayOffset);let o=n?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(o++,0,r),this.centroidVertexArray.emplace(o++,i,r);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(o++,i,r)}}}function tu(t,e){return t.x===e.x&&(t.x<0||t.x>Is)||t.y===e.y&&(t.y<0||t.y>Is)}wr("FillExtrusionBucket",Qc,{omit:["layers","features"]}),wr("PartMetadata",Jc);var eu={paint:new oa({"fill-extrusion-opacity":new ta(Qt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ea(Qt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ta(Qt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ta(Qt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new na(Qt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ea(Qt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ea(Qt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ta(Qt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function nu(t,e){return t.x*e.x+t.y*e.y}function iu(t,e){if(1===t.length){let n=0;const i=e[n++];let r;for(;!r||i.equals(r);)if(r=e[n++],!r)return 1/0;for(;n<e.length;n++){const o=e[n],a=t[0],s=r.sub(i),l=o.sub(i),c=a.sub(i),u=nu(s,s),h=nu(s,l),d=nu(l,l),p=nu(c,s),f=nu(c,l),m=u*d-h*h,g=(d*p-h*f)/m,_=(u*f-h*p)/m,y=1-g-_,v=i.z*y+r.z*g+o.z*_;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function ru(t){const e=new m(t[0],t[1]);return e.z=t[2],e}function ou(t,e,n,i,r,o,a,s){const l=a*r.getElevationAt(t,e,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(t,e,n){const i=Math.floor(e[0]/8),r=Math.floor(e[1]/8),o=10*(e[0]-8*i),a=10*(e[1]-8*r),s=t.getElevationAt(i,r,!0,!0),l=t.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(i,r),d=2*c+1,p=2*u+1,f=function(t,e,n,i,r){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+r,n,!0),t.getElevationAtPixel(e,n+r,!0),t.getElevationAtPixel(e+i,n+r,!0)]}(t,h.x-c,h.y-u,d,p),m=Math.abs(f[0]-f[1])+Math.abs(f[2]-f[3]),g=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),_=Math.min(.25,.5*l*m/d),y=Math.min(.25,.5*l*g/p);return s+Math.max(_*o,y*a)}(r,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+i,l+n+2):l+i}}const au=ua([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:su,size:lu,alignment:cu}=au,uu=ua([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:hu,size:du,alignment:pu}=uu,fu=Zc.VectorTileFeature.types,mu=Math.cos(Math.PI/180*37.5);class gu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new fa,this.layoutVertexArray2=new ma,this.indexArray=new Ta,this.programConfigurations=new gs(t.layers,t.zoom),this.segments=new Cs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=Lc("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),r=[];for(const{feature:e,id:o,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Ps(e,t);if(!this.layers[0]._featureFilter.filter(new qo(this.zoom),l,n))continue;const c=i?i.evaluate(l,{},n):void 0,u={id:o,properties:e.properties,type:e.type,sourceLayerIndex:s,index:a,geometry:t?l.geometry:As(e),patterns:{},sortKey:c};r.push(u)}i&&r.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:o,featureIndex:a}=e,s=this.addConstantDashes(o);for(const i of r){const{geometry:r,index:l,sourceLayerIndex:c}=i;if(s&&this.addFeatureDashes(i,o),this.hasPattern){const t=Dc("line",this.layers,i,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(i,r,l,n,o.positions);const u=t[l].feature;a.insert(u,r,l,c,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,r=n.layout.get("line-cap").value;if("constant"!==i.kind||"constant"!==r.kind)e=!0;else{const e=r.value,n=i.value;if(!n)continue;t.addDash(n.from,e),t.addDash(n.to,e),n.other&&t.addDash(n.other,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const i of this.layers){const r=i.paint.get("line-dasharray").value,o=i.layout.get("line-cap").value;if("constant"===r.kind&&"constant"===o.kind)continue;let a,s,l,c,u,h;if("constant"===r.kind){const t=r.value;if(!t)continue;a=t.other||t.to,s=t.to,l=t.from}else a=r.evaluate({zoom:n-1},t),s=r.evaluate({zoom:n},t),l=r.evaluate({zoom:n+1},t);"constant"===o.kind?c=u=h=o.value:(c=o.evaluate({zoom:n-1},t),u=o.evaluate({zoom:n},t),h=o.evaluate({zoom:n+1},t)),e.addDash(a,c),e.addDash(s,u),e.addDash(l,h);const d=e.getKey(a,c),p=e.getKey(s,u),f=e.getKey(l,h);t.patterns[i.id]={min:d,mid:p,max:f}}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,hu)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,su),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,i,r){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap").evaluate(t,{}),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const n of e)this.addLine(n,t,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}addLine(t,e,n,i,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===fu[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(r=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let e=l;e<s;e++){if(p=e===s-1?a?t[l+1]:void 0:t[e+1],p&&t[e].equals(p))continue;m&&(f=m),h&&(d=h),h=t[e],m=p?p.sub(h)._unit()._perp():f,f=f||m;let g=f.add(m);0===g.x&&0===g.y||g._unit();const _=f.x*m.x+f.y*m.y,y=g.x*m.x+g.y*m.y,v=0!==y?1/y:1/0,b=2*Math.sqrt(2-2*y),x=y<mu&&d&&p,w=f.x*m.y-f.y*m.x>0;if(x&&e>l){const t=h.dist(d);if(t>2*c){const e=h.sub(h.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,f,0,0,u),d=e}}const E=d&&p;let M=E?n:a?"butt":i;if(E&&"round"===M&&(v<o?M="miter":v<=2&&(M="fakeround")),"miter"===M&&v>r&&(M="bevel"),"bevel"===M&&(v>2&&(M="flipbevel"),v<r&&(M="miter")),d&&this.updateDistance(d,h),"miter"===M)g._mult(v),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===M){if(v>100)g=m.mult(-1);else{const t=v*f.add(m).mag()/f.sub(m).mag();g._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===M||"fakeround"===M){const t=-Math.sqrt(v*v-1),e=w?t:0,n=w?0:t;if(d&&this.addCurrentVertex(h,f,e,n,u),"fakeround"===M){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*t*t+(.848013+_*(.215638*_-1.06021)))}const i=m.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,i.x,i.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-e,-n,u)}else if("butt"===M)this.addCurrentVertex(h,g,0,0,u);else if("square"===M){const t=d?1:-1;d||this.addCurrentVertex(h,g,t,t,u),this.addCurrentVertex(h,g,0,0,u),d&&this.addCurrentVertex(h,g,t,t,u)}else"round"===M&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&e<s-1){const t=h.dist(p);if(t>2*c){const e=h.add(p.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}}}addCurrentVertex(t,e,n,i,r,o=!1){const a=e.x+e.y*n,s=e.y-e.x*n,l=-e.x+e.y*i,c=-e.y-e.x*i;this.addHalfVertex(t,a,s,o,!1,n,r),this.addHalfVertex(t,l,c,o,!0,-i,r)}addHalfVertex({x:t,y:e},n,i,r,o,a,s){this.layoutVertexArray.emplaceBack((t<<1)+(r?1:0),(e<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*i)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const t=this.lineClips.end-this.lineClips.start,e=this.totalDistance/t;this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}wr("LineBucket",gu,{omit:["layers","patternFeatures"]});const _u=new oa({"line-cap":new ea(Qt.layout_line["line-cap"]),"line-join":new ea(Qt.layout_line["line-join"]),"line-miter-limit":new ta(Qt.layout_line["line-miter-limit"]),"line-round-limit":new ta(Qt.layout_line["line-round-limit"]),"line-sort-key":new ea(Qt.layout_line["line-sort-key"])});var yu={paint:new oa({"line-opacity":new ea(Qt.paint_line["line-opacity"]),"line-color":new ea(Qt.paint_line["line-color"]),"line-translate":new ta(Qt.paint_line["line-translate"]),"line-translate-anchor":new ta(Qt.paint_line["line-translate-anchor"]),"line-width":new ea(Qt.paint_line["line-width"]),"line-gap-width":new ea(Qt.paint_line["line-gap-width"]),"line-offset":new ea(Qt.paint_line["line-offset"]),"line-blur":new ea(Qt.paint_line["line-blur"]),"line-dasharray":new na(Qt.paint_line["line-dasharray"]),"line-pattern":new na(Qt.paint_line["line-pattern"]),"line-gradient":new ra(Qt.paint_line["line-gradient"])}),layout:_u};const vu=new class extends ea{possiblyEvaluate(t,e){return e=new qo(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,i){return e=D({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,i)}}(yu.paint.properties["line-width"].specification);vu.useIntegerZoom=!0;function bu(t,e){return e>0?e+2*t:t}const xu=ua([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wu=ua([{name:"a_projected_pos",components:3,type:"Float32"}],4),Eu=(ua([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ua([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Mu=ua([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]),Tu=(ua([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ua([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Su=ua([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ua([{name:"triangle",components:3,type:"Uint16"}]),ua([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ua([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ua([{type:"Float32",name:"offsetX"}]),ua([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ku=24;const Cu=128;function Iu(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new qo(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:i}=n;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let o=r;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[r],s=e[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:i}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new qo(a)),maxSize:n.evaluate(new qo(s)),interpolationType:i}}}function Lu(t,{uSize:e,uSizeT:n},{lowerSize:i,upperSize:r}){return"source"===t.kind?i/Cu:"composite"===t.kind?yn(i/Cu,r/Cu,n):e}function Du(t,e){let n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:o,maxZoom:a}=t,s=r?k(On.interpolationFactor(r,e,o,a),0,1):0;"camera"===t.kind?i=yn(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:i}}var Au=Object.freeze({__proto__:null,getSizeData:Iu,evaluateSizeForFeature:Lu,evaluateSizeForZoom:Du,SIZE_PACK_FACTOR:Cu});function Pu(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),Go.applyArabicShaping&&(t=Go.applyArabicShaping(t)),t}(t.text,e,n)})),t}const zu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function Nu(t){return"︶"===t||"﹈"===t||"︸"===t||"﹄"===t||"﹂"===t||"︾"===t||"︼"===t||"︺"===t||"︘"===t||"﹀"===t||"︐"===t||"︓"===t||"︔"===t||"｀"===t||"￣"===t||"︑"===t||"︒"===t}function Ru(t){return"︵"===t||"﹇"===t||"︷"===t||"﹃"===t||"﹁"===t||"︽"===t||"︻"===t||"︹"===t||"︗"===t||"︿"===t}var Ou=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},Fu=function(t,e,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[n+p]=255&a,p+=f,a/=256,c-=8);t[n+p-f]|=128*m},Bu=Uu;function Uu(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Uu.Varint=0,Uu.Fixed64=1,Uu.Bytes=2,Uu.Fixed32=5;var Yu=4294967296,ju=1/Yu,Vu="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Gu(t){return t.type===Uu.Bytes?t.readVarint()+t.pos:t.pos+1}function qu(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Hu(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function $u(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Zu(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function Wu(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Xu(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Ku(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function Ju(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Qu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function th(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function eh(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function nh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ih(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function rh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Uu.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=nh(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=rh(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=nh(this.buf,this.pos)+nh(this.buf,this.pos+4)*Yu;return this.pos+=8,t},readSFixed64:function(){var t=nh(this.buf,this.pos)+rh(this.buf,this.pos+4)*Yu;return this.pos+=8,t},readFloat:function(){var t=Ou(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Ou(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return qu(t,i,e);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return qu(t,i,e);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return qu(t,i,e);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return qu(t,i,e);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return qu(t,i,e);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return qu(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Vu?function(t,e,n){return Vu.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var o,a,s,l=t[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[r+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),r+=u}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Uu.Bytes)return t.push(this.readVarint(e));var n=Gu(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Uu.Bytes)return t.push(this.readSVarint());var e=Gu(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Uu.Bytes)return t.push(this.readBoolean());var e=Gu(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Uu.Bytes)return t.push(this.readFloat());var e=Gu(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Uu.Bytes)return t.push(this.readDouble());var e=Gu(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Uu.Bytes)return t.push(this.readFixed32());var e=Gu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Uu.Bytes)return t.push(this.readSFixed32());var e=Gu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Uu.Bytes)return t.push(this.readFixed64());var e=Gu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Uu.Bytes)return t.push(this.readSFixed64());var e=Gu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Uu.Varint)for(;this.buf[this.pos++]>127;);else if(e===Uu.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Uu.Fixed32)this.pos+=4;else{if(e!==Uu.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ih(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ih(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ih(this.buf,-1&t,this.pos),ih(this.buf,Math.floor(t*ju),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ih(this.buf,-1&t,this.pos),ih(this.buf,Math.floor(t*ju),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Hu(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Fu(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Fu(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Hu(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Uu.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,$u,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Zu,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Ku,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,Wu,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Xu,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,Ju,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Qu,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,th,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,eh,e)},writeBytesField:function(t,e){this.writeTag(t,Uu.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Uu.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Uu.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Uu.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Uu.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Uu.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Uu.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Uu.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Uu.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Uu.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};function oh(t,e,n){e.glyphs=[],1===t&&n.readMessage(ah,e)}function ah(t,e,n){if(3===t){const{id:t,bitmap:i,width:r,height:o,left:a,top:s,advance:l}=n.readMessage(sh,{});e.glyphs.push({id:t,bitmap:new Yl({width:r+6,height:o+6},i),metrics:{width:r,height:o,left:a,top:s,advance:l}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function sh(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function lh(t){let e=0,n=0;for(const i of t)e+=i.w*i.h,n=Math.max(n,i.w);t.sort(((t,e)=>e.h-t.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let r=0,o=0;for(const e of t)for(let t=i.length-1;t>=0;t--){const n=i[t];if(!(e.w>n.w||e.h>n.h)){if(e.x=n.x,e.y=n.y,o=Math.max(o,e.y+e.h),r=Math.max(r,e.x+e.w),e.w===n.w&&e.h===n.h){const e=i.pop();t<i.length&&(i[t]=e)}else e.h===n.h?(n.x+=e.w,n.w-=e.w):e.w===n.w?(n.y+=e.h,n.h-=e.h):(i.push({x:n.x+e.w,y:n.y,w:n.w-e.w,h:e.h}),n.y+=e.h,n.h-=e.h);break}}return{w:r,h:o,fill:e/(r*o)||0}}class ch{constructor(t,{pixelRatio:e,version:n,stretchX:i,stretchY:r,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=i,this.stretchY=r,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class uh{constructor(t,e){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,n,r),this.addImages(e,i,r);const{w:o,h:a}=lh(r),s=new jl({width:o||1,height:a||1});for(const e in t){const i=t[e],r=n[e].paddedRect;jl.copy(i.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},i.data)}for(const t in e){const n=e[t],r=i[t].paddedRect,o=r.x+1,a=r.y+1,l=n.data.width,c=n.data.height;jl.copy(n.data,s,{x:0,y:0},{x:o,y:a},n.data),jl.copy(n.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),jl.copy(n.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),jl.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),jl.copy(n.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=i}addImages(t,e,n){for(const i in t){const r=t[i],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(o),e[i]=new ch(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[i,r]=t.tl;n.update(e.data,void 0,{x:i,y:r})}}wr("ImagePosition",ch),wr("ImageAtlas",uh);const hh={horizontal:1,vertical:2,horizontalOnly:3},dh=-17;class ph{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new ph;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new ph;return e.imageName=t,e}}class fh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new fh;for(let i=0;i<t.sections.length;i++){const r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let n="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i+1)||null,o=t.charCodeAt(i-1)||null;!e&&(r&&ko(r)&&!zu[t[i+1]]||o&&ko(o)&&!zu[t[i-1]])||!zu[t[i]]?n+=t[i]:n+=zu[t[i]]}return n}(this.text,t)}trim(){let t=0;for(let e=0;e<this.text.length&&gh[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&gh[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new fh;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(ph.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void V("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(ph.forImage(e)),this.sectionIndex.push(this.sections.length-1)):V("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function mh(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=fh.fromFeature(t,r);let _;h===hh.vertical&&g.verticalizePunctuation(d);const{processBidirectionalText:y,processStyledBidirectionalText:v}=Go;if(y&&1===g.sections.length){_=[];const t=y(g.toString(),Eh(g,c,o,e,i,p,f));for(const e of t){const t=new fh;t.text=e,t.sections=g.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);_.push(t)}}else if(v){_=[];const t=v(g.text,g.sectionIndex,Eh(g,c,o,e,i,p,f));for(const e of t){const t=new fh;t.text=e[0],t.sectionIndex=e[1],t.sections=g.sections,_.push(t)}}else _=function(t,e){const n=[],i=t.text;let r=0;for(const i of e)n.push(t.substring(r,i)),r=i;return r<i.length&&n.push(t.substring(r,i.length)),n}(g,Eh(g,c,o,e,i,p,f));const b=[],x={positionedLines:b,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,i,r,o,a,s,l,c,u,h){let d=0,p=0,f=0,m=0;const g="right"===s?1:"left"===s?0:.5;let _=!1;for(const t of r){const n=t.getSections();for(const t of n){if(t.imageName)continue;const n=e[t.fontStack];if(n&&(_=void 0!==n.ascender&&void 0!==n.descender,!_))break}if(!_)break}let y=0;for(const a of r){a.trim();const r=a.getMaxScale(),s=(r-1)*ku,v={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=v;const b=v.positionedGlyphs;let x=0;if(!a.length()){p+=o,++y;continue}let w=0,E=0;for(let o=0;o<a.length();o++){const s=a.getSection(o),f=a.getSectionIndex(o),m=a.getCharCode(o);let g=s.scale,y=null,v=null,M=null,T=ku,S=0;const k=!(l===hh.horizontal||!u&&!So(m)||u&&(gh[m]||Co(m)));if(s.imageName){const e=i[s.imageName];if(!e)continue;M=s.imageName,t.iconsInText=t.iconsInText||!0,v=e.paddedRect;const n=e.displaySize;g=g*ku/h,y={width:n[0],height:n[1],left:1,top:-3,advance:k?n[1]:n[0],localGlyph:!1},S=_?-y.height*g:dh+r*ku-n[1]*g,T=y.advance;const o=(k?n[0]:n[1])*g-ku*r;o>0&&o>x&&(x=o)}else{const t=n[s.fontStack];if(!t)continue;t[m]&&(v=t[m]);const i=e[s.fontStack];if(!i)continue;const o=i.glyphs[m];if(!o)continue;if(y=o.metrics,T=8203!==m?ku:0,_){const t=void 0!==i.ascender?Math.abs(i.ascender):0,e=void 0!==i.descender?Math.abs(i.descender):0,n=(t+e)*g;w<n&&(w=n,E=(t-e)/2*g),S=-t*g}else S=dh+(r-g)*ku}k?(t.verticalizable=!0,b.push({glyph:m,imageName:M,x:d,y:p+S,vertical:k,scale:g,localGlyph:y.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:y,rect:v}),d+=T*g+c):(b.push({glyph:m,imageName:M,x:d,y:p+S,vertical:k,scale:g,localGlyph:y.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:y,rect:v}),d+=y.advance*g+c)}if(0!==b.length){const t=d-c;f=Math.max(t,f),_?Th(b,g,x,E,o*r/2):Th(b,g,x,0,o/2)}d=0;const M=o*r+x;v.lineOffset=Math.max(x,s),p+=M,m=Math.max(M,m),++y}const v=p,{horizontalAlign:b,verticalAlign:x}=Mh(a);(function(t,e,n,i,r,o){const a=(e-n)*r,s=-o*i;for(const e of t)for(const t of e.positionedGlyphs)t.x+=a,t.y+=s})(t.positionedLines,g,b,x,f,v),t.top+=-x*v,t.bottom=t.top+v,t.left+=-b*f,t.right=t.left+f,t.hasBaseline=_}(x,e,n,i,_,a,s,l,h,c,d,m),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&x}const gh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_h={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function yh(t,e,n,i,r,o){if(e.imageName){const t=i[e.imageName];return t?t.displaySize[0]*e.scale*ku/o+r:0}{const i=n[e.fontStack],o=i&&i.glyphs[t];return o?o.metrics.advance*e.scale+r:0}}function vh(t,e,n,i){const r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function bh(t,e,n){let i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function xh(t,e,n,i,r,o){let a=null,s=vh(e,n,r,o);for(const t of i){const i=vh(e-t.x,n,r,o)+t.badness;i<=s&&(a=t,s=i)}return{index:t,x:e,priorBreak:a,badness:s}}function wh(t){return t?wh(t.priorBreak).concat(t.index):[]}function Eh(t,e,n,i,r,o,a){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,n,i,r,o){let a=0;for(let n=0;n<t.length();n++){const s=t.getSection(n);a+=yh(t.getCharCode(n),s,i,r,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,i,r,a),c=t.text.indexOf("​")>=0;let u=0;for(let n=0;n<t.length();n++){const o=t.getSection(n),d=t.getCharCode(n);if(gh[d]||(u+=yh(d,o,i,r,e,a)),n<t.length()-1){const e=!((h=d)<11904||!(eo(h)||Jr(h)||vo(h)||go(h)||oo(h)||Hr(h)||no(h)||Wr(h)||ao(h)||lo(h)||ro(h)||wo(h)||Xr(h)||Zr(h)||$r(h)||io(h)||Kr(h)||yo(h)||uo(h)||co(h)));(_h[d]||e||o.imageName)&&s.push(xh(n+1,u,l,s,bh(d,t.getCharCode(n+1),e&&c),!1))}}var h;return wh(xh(t.length(),u,l,s,0,!0))}function Mh(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Th(t,e,n,i,r){if(!(e||n||i||r))return;const o=t.length-1,a=t[o],s=a.metrics.advance*a.scale,l=(a.x+s)*e;for(let e=0;e<=o;e++)t[e].x-=l,t[e].y+=n+i+r}function Sh(t,e,n){const{horizontalAlign:i,verticalAlign:r}=Mh(n),o=e[0],a=e[1],s=o-t.displaySize[0]*i,l=s+t.displaySize[0],c=a-t.displaySize[1]*r;return{image:t,top:c,bottom:c+t.displaySize[1],left:s,right:l}}function kh(t,e,n,i,r,o){h("none"!==n),h(Array.isArray(i)&&4===i.length),h(Array.isArray(r)&&2===r.length);const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,d,p,f;"width"===n||"both"===n?(f=r[0]+l-i[3],d=r[0]+c+i[1]):(f=r[0]+(l+c-a.displaySize[0])/2,d=f+a.displaySize[0]);const m=e.top*o,g=e.bottom*o;return"height"===n||"both"===n?(u=r[1]+m-i[0],p=r[1]+g+i[2]):(u=r[1]+(m+g-a.displaySize[1])/2,p=u+a.displaySize[1]),{image:a,top:u,right:d,bottom:p,left:f,collisionPadding:s}}class Ch extends m{constructor(t,e,n,i){super(t,e),this.angle=n,void 0!==i&&(this.segment=i)}clone(){return new Ch(this.x,this.y,this.angle,this.segment)}}function Ih(t,e,n,i,r){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const e=t[a-1],n=t[a],o=t[a+1];if(!o)return!1;let u=e.angleTo(n)-n.angleTo(o);for(u=Math.abs((u+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:u}),c+=u;s-l[0].distance>i;)c-=l.shift().angleDelta;if(c>r)return!1;a++,s+=n.dist(o)}return!0}function Lh(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Dh(t,e,n){return t?.6*e*n:0}function Ah(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Ph(t,e,n,i,r,o){const a=Dh(n,r,o),s=Ah(n,i)*o;let l=0;const c=Lh(t)/2;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1],o=i.dist(r);if(l+o>c){const u=(c-l)/o,h=yn(i.x,r.x,u),d=yn(i.y,r.y,u),p=new Ch(h,d,r.angleTo(i),n);return!a||Ih(t,p,s,a,e)?p:void 0}l+=o}}function zh(t,e,n,i,r,o,a,s,l){const c=Dh(i,o,a),u=Ah(i,r),h=u*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),Nh(t,d?e/2*s%e:(u/2+2*o)*a*s%e,e,c,n,h,d,!1,l)}function Nh(t,e,n,i,r,o,a,s,l){const c=o/2,u=Lh(t);let h=0,d=e-n,p=[];for(let e=0;e<t.length-1;e++){const a=t[e],s=t[e+1],f=a.dist(s),m=s.angleTo(a);for(;d+n<h+f;){d+=n;const g=(d-h)/f,_=yn(a.x,s.x,g),y=yn(a.y,s.y,g);if(_>=0&&_<l&&y>=0&&y<l&&d-c>=0&&d+c<=u){const n=new Ch(_,y,m,e);n._round(),i&&!Ih(t,n,o,i,r)||p.push(n)}}h+=f}return s||p.length||a||(p=Nh(t,h/2,n,i,r,o,a,!0,l)),p}function Rh(t,e,n,i,r){const o=[];for(let a=0;a<t.length;a++){const s=t[a];let l;for(let t=0;t<s.length-1;t++){let a=s[t],c=s[t+1];a.x<e&&c.x<e||(a.x<e?a=new m(e,a.y+(c.y-a.y)*((e-a.x)/(c.x-a.x)))._round():c.x<e&&(c=new m(e,a.y+(c.y-a.y)*((e-a.x)/(c.x-a.x)))._round()),a.y<n&&c.y<n||(a.y<n?a=new m(a.x+(c.x-a.x)*((n-a.y)/(c.y-a.y)),n)._round():c.y<n&&(c=new m(a.x+(c.x-a.x)*((n-a.y)/(c.y-a.y)),n)._round()),a.x>=i&&c.x>=i||(a.x>=i?a=new m(i,a.y+(c.y-a.y)*((i-a.x)/(c.x-a.x)))._round():c.x>=i&&(c=new m(i,a.y+(c.y-a.y)*((i-a.x)/(c.x-a.x)))._round()),a.y>=r&&c.y>=r||(a.y>=r?a=new m(a.x+(c.x-a.x)*((r-a.y)/(c.y-a.y)),r)._round():c.y>=r&&(c=new m(a.x+(c.x-a.x)*((r-a.y)/(c.y-a.y)),r)._round()),l&&a.equals(l[l.length-1])||(l=[a],o.push(l)),l.push(c)))))}}return o}wr("Anchor",Ch);var Oh=Uh,Fh=Uh,Bh=1e20;function Uh(t,e,n,i,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Yh(t,e,n,i,r,o){for(var a=0;a<e;a++)jh(t,a,e,n,i,r,o);for(var s=0;s<n;s++)jh(t,s*e,1,e,i,r,o)}function jh(t,e,n,i,r,o,a){var s,l,c,u;for(o[0]=0,a[0]=-Bh,a[1]=Bh,s=0;s<i;s++)r[s]=t[e+s*n];for(s=1,l=0,c=0;s<i;s++){do{u=o[l],c=(r[s]-r[u]+s*s-u*u)/(s-u)/2}while(c<=a[l]&&--l>-1);o[++l]=s,a[l]=c,a[l+1]=Bh}for(s=0,l=0;s<i;s++){for(;a[l+1]<s;)l++;u=o[l],t[e+s*n]=r[u]+(s-u)*(s-u)}}Uh.prototype._draw=function(t,e){var n,i,r,o,a,s,l,c,u,h=this.ctx.measureText(t),d=h.width,p=2*this.buffer;e&&this.useMetrics?(a=Math.floor(h.actualBoundingBoxAscent),c=this.buffer+Math.ceil(h.actualBoundingBoxAscent),s=this.buffer,l=this.buffer,n=(i=Math.min(this.size,Math.ceil(h.actualBoundingBoxRight-h.actualBoundingBoxLeft)))+p,r=(o=Math.min(this.size-s,Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent)))+p,this.ctx.textBaseline="alphabetic"):(n=i=this.size,r=o=this.size,a=19*this.fontSize/24,s=l=0,c=this.middle,this.ctx.textBaseline="middle"),i&&o&&(this.ctx.clearRect(l,s,i,o),this.ctx.fillText(t,this.buffer,c),u=this.ctx.getImageData(l,s,i,o));var f=new Uint8ClampedArray(n*r);return function(t,e,n,i,r,o,a){o.fill(Bh,0,e*n),a.fill(0,0,e*n);for(var s=(e-i)/2,l=0;l<r;l++)for(var c=0;c<i;c++){var u=(l+s)*e+c+s,h=t.data[4*(l*i+c)+3]/255;if(1===h)o[u]=0,a[u]=Bh;else if(0===h)o[u]=Bh,a[u]=0;else{var d=Math.max(0,.5-h),p=Math.max(0,h-.5);o[u]=d*d,a[u]=p*p}}}(u,n,r,i,o,this.gridOuter,this.gridInner),Yh(this.gridOuter,n,r,this.f,this.v,this.z),Yh(this.gridInner,n,r,this.f,this.v,this.z),function(t,e,n,i,r,o,a){for(var s=0;s<e*n;s++){var l=Math.sqrt(i[s])-Math.sqrt(r[s]);t[s]=Math.round(255-255*(l/o+a))}}(f,n,r,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:f,metrics:{width:i,height:o,sdfWidth:n,sdfHeight:r,top:a,left:0,advance:d}}},Uh.prototype.draw=function(t){return this._draw(t,!1).data},Uh.prototype.drawWithMetrics=function(t){return this._draw(t,!0)},Oh.default=Fh;const Vh={none:0,ideographs:1,all:2};class Gh{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const e in t)for(const i of t[e])n.push({stack:e,id:i});I(n,(({stack:t,id:e},n)=>{let i=this.entries[t];i||(i=this.entries[t]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let r=i.glyphs[e];if(void 0!==r)return void n(null,{stack:t,id:e,glyph:r});if(r=this._tinySDF(i,t,e),r)return i.glyphs[e]=r,void n(null,{stack:t,id:e,glyph:r});const o=Math.floor(e/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(i.ranges[o])return void n(null,{stack:t,id:e,glyph:r});let a=i.requests[o];a||(a=i.requests[o]=[],Gh.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){i.ascender=e.ascender,i.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(i.glyphs[+t]=e.glyphs[+t]);i.ranges[o]=!0}for(const n of a)n(t,e);delete i.requests[o]}))),a.push(((i,r)=>{i?n(i):r&&n(null,{stack:t,id:e,glyph:r.glyphs[e]||null})}))}),((t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:i,glyph:r}of n)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[i]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==Vh.none&&(this.localGlyphMode===Vh.all?!!this.localFontFamily:!!this.localFontFamily&&(lo(t)||po(t)||Xr(t)||Kr(t))||Wr(t))}_tinySDF(t,e,n){const i=this.localFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(n))return;let r=t.tinySDF;if(!r){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),r=t.tinySDF=new Gh.TinySDF(48,6,16,.25,i,n)}if(this.localGlyphs[r.fontWeight][n])return this.localGlyphs[r.fontWeight][n];const{data:o,metrics:a}=r.drawWithMetrics(String.fromCharCode(n)),{sdfWidth:s,sdfHeight:l,width:c,height:u,left:h,top:d,advance:p}=a;return this.localGlyphs[r.fontWeight][n]={id:n,bitmap:new Yl({width:s,height:l},o),metrics:{width:c/2,height:u/2,left:h/2,top:d/2-27,advance:p/2,localGlyph:!0}}}}Gh.loadGlyphRange=function(t,e,n,i,r){const o=256*e,a=o+255,s=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${o}-${a}`),Nt.Glyphs);Ut(s,((t,e)=>{if(t)r(t);else if(e){const t={},n=function(t){return new Bu(t).readFields(oh,{})}(e);for(const e of n.glyphs)t[e.id]=e;r(null,{glyphs:t,ascender:n.ascender,descender:n.descender})}}))},Gh.TinySDF=Oh;function qh(t,e,n,i){const r=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2,l=o.paddedRect.h-2,c=t.right-t.left,u=t.bottom-t.top,h=o.stretchX||[[0,s]],d=o.stretchY||[[0,l]],p=(t,e)=>t+e[1]-e[0],f=h.reduce(p,0),g=d.reduce(p,0),_=s-f,y=l-g;let v=0,b=f,x=0,w=g,E=0,M=_,T=0,S=y;if(o.content&&i){const t=o.content;v=Hh(h,0,t[0]),x=Hh(d,0,t[1]),b=Hh(h,t[0],t[2]),w=Hh(d,t[1],t[3]),E=t[0]-v,T=t[1]-x,M=t[2]-t[0]-b,S=t[3]-t[1]-w}const k=(i,r,s,l)=>{const h=Zh(i.stretch-v,b,c,t.left),d=Wh(i.fixed-E,M,i.stretch,f),p=Zh(r.stretch-x,w,u,t.top),_=Wh(r.fixed-T,S,r.stretch,g),y=Zh(s.stretch-v,b,c,t.left),k=Wh(s.fixed-E,M,s.stretch,f),C=Zh(l.stretch-x,w,u,t.top),I=Wh(l.fixed-T,S,l.stretch,g),L=new m(h,p),D=new m(y,p),A=new m(y,C),P=new m(h,C),z=new m(d/a,_/a),N=new m(k/a,I/a),R=e*Math.PI/180;if(R){const t=Math.sin(R),e=Math.cos(R),n=[e,-t,t,e];L._matMult(n),D._matMult(n),P._matMult(n),A._matMult(n)}const O=i.stretch+i.fixed,F=s.stretch+s.fixed,B=r.stretch+r.fixed,U=l.stretch+l.fixed;return{tl:L,tr:D,bl:P,br:A,tex:{x:o.paddedRect.x+1+O,y:o.paddedRect.y+1+B,w:F-O,h:U-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:N,minFontScaleX:M/a/c,minFontScaleY:S/a/u,isSDF:n}};if(i&&(o.stretchX||o.stretchY)){const t=$h(h,_,f),e=$h(d,y,g);for(let n=0;n<t.length-1;n++){const i=t[n],o=t[n+1];for(let t=0;t<e.length-1;t++){const n=e[t],a=e[t+1];r.push(k(i,n,o,a))}}}else r.push(k({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return r}function Hh(t,e,n){let i=0;for(const r of t)i+=Math.max(e,Math.min(n,r[1]))-Math.max(e,Math.min(n,r[0]));return i}function $h(t,e,n){const i=[{fixed:-1,stretch:0}];for(const[e,n]of t){const t=i[i.length-1];i.push({fixed:e-t.stretch,stretch:t.stretch}),i.push({fixed:e-t.stretch,stretch:t.stretch+(n-e)})}return i.push({fixed:e+1,stretch:n}),i}function Zh(t,e,n,i){return t/e*n+i}function Wh(t,e,n,i){return t-e*n/i}function Xh(t,e,n,i){const r=e+t.positionedLines[i].lineOffset;return 0===i?n+r/2:n+(r+(e+t.positionedLines[i-1].lineOffset))/2}class Kh{constructor(t=[],e=Jh){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const a=i+1;if(a<this.length&&n(e[a],o)<0&&(i=a,o=e[a]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function Jh(t,e){return t<e?-1:t>e?1:0}function Qh(t,e=1,n=!1){let i=1/0,r=1/0,o=-1/0,a=-1/0;const s=t[0];for(let t=0;t<s.length;t++){const e=s[t];(!t||e.x<i)&&(i=e.x),(!t||e.y<r)&&(r=e.y),(!t||e.x>o)&&(o=e.x),(!t||e.y>a)&&(a=e.y)}const l=o-i,c=a-r,u=Math.min(l,c);let h=u/2;const d=new Kh([],td);if(0===u)return new m(i,r);for(let e=i;e<o;e+=u)for(let n=r;n<a;n+=u)d.push(new ed(e+h,n+h,h,t));let p=function(t){let e=0,n=0,i=0;const r=t[0];for(let t=0,o=r.length,a=o-1;t<o;a=t++){const o=r[t],s=r[a],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,i+=(o.y+s.y)*l,e+=3*l}return new ed(n/e,i/e,0,t)}(t),f=d.length;for(;d.length;){const i=d.pop();(i.d>p.d||!p.d)&&(p=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,f)),i.max-p.d<=e||(h=i.h/2,d.push(new ed(i.p.x-h,i.p.y-h,h,t)),d.push(new ed(i.p.x+h,i.p.y-h,h,t)),d.push(new ed(i.p.x-h,i.p.y+h,h,t)),d.push(new ed(i.p.x+h,i.p.y+h,h,t)),f+=4)}return n&&(console.log(`num probes: ${f}`),console.log(`best distance: ${p.d}`)),p.p}function td(t,e){return e.max-t.max}function ed(t,e,n,i){this.p=new m(t,e),this.h=n,this.d=function(t,e){let n=!1,i=1/0;for(let r=0;r<e.length;r++){const o=e[r];for(let e=0,r=o.length,a=r-1;e<r;a=e++){const r=o[e],s=o[a];r.y>t.y!=s.y>t.y&&t.x<(s.x-r.x)*(t.y-r.y)/(s.y-r.y)+r.x&&(n=!n),i=Math.min(i,Vs(t,r,s))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}const nd=Number.POSITIVE_INFINITY,id=Math.sqrt(2);function rd(t,e){return e[1]!==nd?function(t,e,n){let i=0,r=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,r]}(t,e[0],e[1]):function(t,e){let n=0,i=0;e<0&&(e=0);const r=e/id;switch(t){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=e;break;case"right":n=-e}return[n,i]}(t,e[0])}function od(t,e,n,i,r,o,a,s){t.createArrays();const l=512*t.overscaling;t.tilePixelRatio=Is/l,t.compareText={},t.iconsNeedLinear=!1;const c=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,h={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;h.compositeTextSizes=[u["text-size"].possiblyEvaluate(new qo(e),a),u["text-size"].possiblyEvaluate(new qo(n),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;h.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new qo(e),a),u["icon-size"].possiblyEvaluate(new qo(n),a)]}h.layoutTextSize=u["text-size"].possiblyEvaluate(new qo(s+1),a),h.layoutIconSize=u["icon-size"].possiblyEvaluate(new qo(s+1),a),h.textMaxSize=u["text-size"].possiblyEvaluate(new qo(18),a);const d="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),p=c.get("text-size");for(const o of t.features){const s=c.get("text-font").evaluate(o,{},a).join(","),l=p.evaluate(o,{},a),u=h.layoutTextSize.evaluate(o,{},a),f=h.layoutIconSize.evaluate(o,{},a),m={horizontal:{},vertical:void 0},g=o.text;let _,y=[0,0];if(g){const i=g.toString(),h=c.get("text-letter-spacing").evaluate(o,{},a)*ku,p=c.get("text-line-height").evaluate(o,{},a)*ku,f=Mo(i)?h:0,_=c.get("text-anchor").evaluate(o,{},a),v=c.get("text-variable-anchor");if(!v){const t=c.get("text-radial-offset").evaluate(o,{},a);y=t?rd(_,[t*ku,nd]):c.get("text-offset").evaluate(o,{},a).map((t=>t*ku))}let b=d?"center":c.get("text-justify").evaluate(o,{},a);const x=c.get("symbol-placement"),w="point"===x,E="point"===x?c.get("text-max-width").evaluate(o,{},a)*ku:0,M=o=>{t.allowVerticalPlacement&&Eo(i)&&(m.vertical=mh(g,e,n,r,s,E,p,_,o,f,y,hh.vertical,!0,x,u,l))};if(!d&&v){const t="auto"===b?v.map((t=>ad(t))):[b];let i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(!m.horizontal[a])if(i)m.horizontal[a]=m.horizontal[0];else{const t=mh(g,e,n,r,s,E,p,"center",a,f,y,hh.horizontal,!1,x,u,l);t&&(m.horizontal[a]=t,i=1===t.positionedLines.length)}}M("left")}else{if("auto"===b&&(b=ad(_)),w||c.get("text-writing-mode").indexOf("horizontal")>=0||!Eo(i)){const t=mh(g,e,n,r,s,E,p,_,b,f,y,hh.horizontal,!1,x,u,l);t&&(m.horizontal[b]=t)}M("point"===x?"left":b)}}let v=!1;if(o.icon&&o.icon.name){const e=i[o.icon.name];e&&(_=Sh(r[o.icon.name],c.get("icon-offset").evaluate(o,{},a),c.get("icon-anchor").evaluate(o,{},a)),v=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&V("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const b=ud(m.horizontal)||m.vertical;t.iconsInText||(t.iconsInText=!!b&&b.iconsInText),(b||_)&&sd(t,o,m,_,i,h,u,f,y,v,a)}o&&t.generateCollisionDebugBuffers(s,t.collisionBoxArray)}function ad(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sd(t,e,n,i,r,o,a,s,l,c,u){let h=o.textMaxSize.evaluate(e,{},u);void 0===h&&(h=a);const d=t.layers[0].layout,p=d.get("icon-offset").evaluate(e,{},u),f=ud(n.horizontal)||n.vertical,m=a/24,g=t.tilePixelRatio*h/24,_=(t.tilePixelRatio,t.tilePixelRatio*d.get("symbol-spacing")),y=d.get("text-padding")*t.tilePixelRatio,v=d.get("icon-padding")*t.tilePixelRatio,b=w(d.get("text-max-angle")),x="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),E="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),M=d.get("symbol-placement"),T=_/2,S=d.get("icon-text-fit");let k;i&&"none"!==S&&(t.allowVerticalPlacement&&n.vertical&&(k=kh(i,n.vertical,S,d.get("icon-text-fit-padding"),p,m)),f&&(i=kh(i,f,S,d.get("icon-text-fit-padding"),p,m)));const C=(s,h)=>{h.x<0||h.x>=Is||h.y<0||h.y>=Is||function(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E){const M=t.addToLineVertexArray(e,n);let T,S,k,C,I,L,D,A=0,P=0,z=0,N=0,R=-1,O=-1;const F={};let B=Xa(""),U=0,Y=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?[U,Y]=s.layout.get("text-offset").evaluate(v,{},w).map((t=>t*ku)):(U=s.layout.get("text-radial-offset").evaluate(v,{},w)*ku,Y=nd),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(p)L=dd(t),a&&(D=dd(a));else{const n=s.layout.get("text-rotate").evaluate(v,{},w)+90;k=hd(l,e,c,u,h,t,d,n,f),a&&(C=hd(l,e,c,u,h,a,g,n))}}if(r){const n=s.layout.get("icon-rotate").evaluate(v,{},w),i="none"!==s.layout.get("icon-text-fit"),o=qh(r,n,x,i),d=a?qh(a,n,x,i):void 0;S=hd(l,e,c,u,h,r,g,n),A=4*o.length;const p=t.iconSizeData;let f=null;"source"===p.kind?(f=[Cu*s.layout.get("icon-size").evaluate(v,{},w)],f[0]>ld&&V(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===p.kind&&(f=[Cu*b.compositeIconSizes[0].evaluate(v,{},w),Cu*b.compositeIconSizes[1].evaluate(v,{},w)],(f[0]>ld||f[1]>ld)&&V(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,o,f,y,_,v,!1,e,M.lineStartIndex,M.lineLength,-1,w),R=t.icon.placedSymbolArray.length-1,d&&(P=4*d.length,t.addSymbols(t.icon,d,f,y,_,v,hh.vertical,e,M.lineStartIndex,M.lineLength,-1,w),O=t.icon.placedSymbolArray.length-1)}for(const n in i.horizontal){const r=i.horizontal[n];T||(B=Xa(r.text),p?I=dd(r):T=hd(l,e,c,u,h,r,d,s.layout.get("text-rotate").evaluate(v,{},w),f));const a=1===r.positionedLines.length;if(z+=cd(t,e,r,o,s,p,v,f,M,i.vertical?hh.horizontal:hh.horizontalOnly,a?Object.keys(i.horizontal):[n],F,R,b,w),a)break}i.vertical&&(N+=cd(t,e,i.vertical,o,s,p,v,f,M,hh.vertical,["vertical"],F,O,b,w));let j=-1;const G=(t,e)=>t?Math.max(t,e):e;j=G(I,j),j=G(L,j),j=G(D,j);const q=j>-1?1:0;q&&(j*=E/ku),t.glyphOffsetArray.length>=xd.MAX_GLYPHS&&V("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==v.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,v.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical>=0?F.vertical:-1,R,O,B,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==k?k:t.collisionBoxArray.length,void 0!==k?k+1:t.collisionBoxArray.length,void 0!==S?S:t.collisionBoxArray.length,void 0!==S?S+1:t.collisionBoxArray.length,C||t.collisionBoxArray.length,C?C+1:t.collisionBoxArray.length,c,z,N,A,P,q,0,U,Y,j)}(t,h,s,n,i,r,k,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,y,x,l,0,v,E,p,e,o,c,u,a)};if("line"===M)for(const r of Rh(e.geometry,0,0,Is,Is)){const e=zh(r,_,b,n.vertical||f,i,24,g,t.overscaling,Is);for(const n of e){const e=f;e&&pd(t,e.text,T,n)||C(r,n)}}else if("line-center"===M){for(const t of e.geometry)if(t.length>1){const e=Ph(t,b,n.vertical||f,i,24,g);e&&C(t,e)}}else if("Polygon"===e.type)for(const t of Cc(e.geometry,0)){const e=Qh(t,16);C(t[0],new Ch(e.x,e.y,0))}else if("LineString"===e.type)for(const t of e.geometry)C(t,new Ch(t[0].x,t[0].y,0));else if("Point"===e.type)for(const t of e.geometry)for(const e of t)C([e],new Ch(e.x,e.y,0))}const ld=32640;function cd(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f){const g=function(t,e,n,i,r,o,a,s){const l=[];if(0===e.positionedLines.length)return l;const c=i.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(t){const e=t[0],n=t[1],i=e*n;return i>0?[e,-n]:i<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let h=Math.abs(e.top-e.bottom);for(const t of e.positionedLines)h-=t.lineOffset;const d=e.positionedLines.length,p=h/d;let f=e.top-n[1];for(let t=0;t<d;++t){const i=e.positionedLines[t];f=Xh(e,p,f,t);for(const t of i.positionedGlyphs){if(!t.rect)continue;const i=t.rect||{};let o=4,h=!0,d=1,p=0;const g=(r||s)&&t.vertical,_=t.metrics.advance*t.scale/2,y=t.metrics,v=t.rect;if(null===v)continue;if(s&&e.verticalizable&&(p=t.imageName?_-t.metrics.width*t.scale/2:0),t.imageName){const e=a[t.imageName];if(!e)continue;h=e.sdf,d=e.pixelRatio,o=1/d}const b=r?[t.x+_,t.y]:[0,0];let x=[0,0],w=[0,0],E=!1;r||(g?(w=[t.x+_+u[0],t.y+u[1]-p],E=!0):x=[t.x+_+n[0],t.y+n[1]-p]);const M=v.w*t.scale/(d*(t.localGlyph?2:1)),T=v.h*t.scale/(d*(t.localGlyph?2:1));let S,k,C,I;if(g){const e=t.y-f,n=new m(-_,_-e),i=-Math.PI/2,r=new m(...w);S=new m(-_+x[0],x[1]),S._rotateAround(i,n)._add(r),S.x+=-e+_,S.y-=(y.left-o)*t.scale;const a=t.imageName?y.advance*t.scale:ku*t.scale,s=String.fromCharCode(t.glyph);if(Nu(s))S.x+=(1-o)*t.scale;else if(Ru(s)){const e=a-y.height*t.scale;S.x+=e+(-o-1)*t.scale}else if(t.imageName||y.width+2*o===v.w&&y.height+2*o===v.h){const t=a-T;S.x+=t/2}else{const e=a-(y.height+2*o)*t.scale;S.x+=e/2}k=new m(S.x,S.y-M),C=new m(S.x+T,S.y),I=new m(S.x+T,S.y-M)}else{const e=(y.left-o)*t.scale-_+x[0],n=(-y.top-o)*t.scale+x[1],i=e+M,r=n+T;S=new m(e,n),k=new m(i,n),C=new m(e,r),I=new m(i,r)}if(c){let t;t=r?new m(0,0):E?new m(u[0],u[1]):new m(n[0],n[1]),S._rotateAround(c,t),k._rotateAround(c,t),C._rotateAround(c,t),I._rotateAround(c,t)}const L=new m(0,0),D=new m(0,0),A=0,P=0;l.push({tl:S,tr:k,bl:C,br:I,tex:i,writingMode:e.writingMode,glyphOffset:b,sectionIndex:t.sectionIndex,isSDF:h,pixelOffsetTL:L,pixelOffsetBR:D,minFontScaleX:A,minFontScaleY:P})}}return l}(0,n,s,r,o,a,i,t.allowVerticalPlacement),_=t.textSizeData;let y=null;"source"===_.kind?(y=[Cu*r.layout.get("text-size").evaluate(a,{},f)],y[0]>ld&&V(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===_.kind&&(y=[Cu*p.compositeTextSizes[0].evaluate(a,{},f),Cu*p.compositeTextSizes[1].evaluate(a,{},f)],(y[0]>ld||y[1]>ld)&&V(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,g,y,s,o,a,c,e,l.lineStartIndex,l.lineLength,d,f);for(const e of u)h[e]=t.text.placedSymbolArray.length-1;return 4*g.length}function ud(t){for(const e in t)return t[e];return null}function hd(t,e,n,i,r,o,a,s,l){let c=o.top,u=o.bottom,h=o.left,d=o.right;const p=o.collisionPadding;if(p&&(h-=p[0],c-=p[1],d+=p[2],u+=p[3]),s){const t=new m(h,c),e=new m(d,c),n=new m(h,u),i=new m(d,u),r=w(s);let o=new m(0,0);l&&(o=new m(l[0],l[1])),t._rotateAround(r,o),e._rotateAround(r,o),n._rotateAround(r,o),i._rotateAround(r,o),h=Math.min(t.x,e.x,n.x,i.x),d=Math.max(t.x,e.x,n.x,i.x),c=Math.min(t.y,e.y,n.y,i.y),u=Math.max(t.y,e.y,n.y,i.y)}return t.emplaceBack(e.x,e.y,h,c,d,u,a,n,i,r),t.length-1}function dd(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function pd(t,e,n,i){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(i.dist(t[e])<n)return!0}else r[e]=[];return r[e].push(i),!1}const fd=Zc.VectorTileFeature.types,md=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function gd(t,e,n,i,r,o,a,s,l,c,u,h,d){const p=s?Math.min(ld,Math.round(s[0])):0,f=s?Math.min(ld,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function _d(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function yd(t){for(const e of t.sections)if(Do(e.text))return!0;return!1}class vd{constructor(t){this.layoutVertexArray=new ya,this.indexArray=new Ta,this.programConfigurations=t,this.segments=new Cs,this.dynamicLayoutVertexArray=new va,this.opacityVertexArray=new ba,this.placedSymbolArray=new Oa}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,xu.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,wu.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,md,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}wr("SymbolBuffers",vd);class bd{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Cs,this.collisionVertexArray=new Ma,this.collisionVertexArrayExt=new va}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Eu.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,Mu.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}wr("CollisionBuffers",bd);class xd{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nl([]),this.placementViewportMatrix=nl([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Iu(this.zoom,e["text-size"]),this.iconSizeData=Iu(this.zoom,e["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1);const o="viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey;this.sortFeaturesByY=o&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((t=>hh[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID}createArrays(){this.text=new vd(new gs(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new vd(new gs(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Ua,this.lineVertexArray=new Ya,this.symbolInstances=new Ba}calculateGlyphDependencies(t,e,n,i,r){for(let n=0;n<t.length;n++)if(e[t.charCodeAt(n)]=!0,i&&r){const i=zu[t.charAt(n)];i&&(e[i.charCodeAt(0)]=!0)}}populate(t,e,n){const i=this.layers[0],r=i.layout,o=r.get("text-font"),a=r.get("text-field"),s=r.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof ke&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,u=r.get("symbol-sort-key");if(this.features=[],!l&&!c)return;const h=e.iconDependencies,d=e.glyphDependencies,p=e.availableImages,f=new qo(this.zoom);for(const{feature:e,id:a,index:s,sourceLayerIndex:m}of t){const t=i._featureFilter.needGeometry,g=Ps(e,t);if(!i._featureFilter.filter(f,g,n))continue;let _,y;if(t||(g.geometry=As(e)),l){const t=i.getValueAndResolveTokens("text-field",g,n,p),e=ke.factory(t);yd(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===jo()||this.hasRTLText&&Go.isParsed())&&(_=Pu(e,i,g))}if(c){const t=i.getValueAndResolveTokens("icon-image",g,n,p);y=t instanceof Ce?t:Ce.fromString(t)}if(!_&&!y)continue;const v=this.sortFeaturesByKey?u.evaluate(g,{},n):void 0,b={id:a,text:_,icon:y,index:s,sourceLayerIndex:m,geometry:g.geometry,properties:e.properties,type:fd[e.type],sortKey:v};if(this.features.push(b),y&&(h[y.name]=!0),_){const t=o.evaluate(g,{},n).join(","),e="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(hh.vertical)>=0;for(const n of _.sections)if(n.image)h[n.image.name]=!0;else{const i=Eo(_.toString()),r=n.fontStack||t,o=d[r]=d[r]||{};this.calculateGlyphDependencies(n.text,o,e,this.allowVerticalPlacement,i)}}}"line"===r.get("symbol-placement")&&(this.features=function(t){const e={},n={},i=[];let r=0;function o(e){i.push(t[e]),r++}function a(t,e,r){const o=n[t];return delete n[t],n[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function s(t,n,r){const o=e[n];return delete e[n],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function l(t,e,n){const i=n?e[0][e[0].length-1]:e[0][0];return`${t}:${i.x}:${i.y}`}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in e&&n[p]!==e[f]){const t=s(p,f,h),r=a(p,f,i[t].geometry);delete e[p],delete n[f],n[l(d,i[r].geometry,!0)]=r,i[t].geometry=null}else p in n?a(p,f,h):f in e?s(p,f,h):(o(c),e[p]=r-1,n[f]=r-1)}return i.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment){let n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]);const r={};for(let i=t.segment+1;i<e.length;i++)r[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:n},i<e.length-1&&(n+=e[i+1].dist(e[i]));for(let n=t.segment||0;n>=0;n--)r[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:i},n>0&&(i+=e[n-1].dist(e[n]));for(let t=0;t<e.length;t++){const e=r[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,i,r,o,a,s,l,c,u,h){const d=t.indexArray,p=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,p,d,this.canOverlap?o.sortKey:void 0),m=this.glyphOffsetArray.length,g=f.vertexLength,_=this.allowVerticalPlacement&&a===hh.vertical?Math.PI/2:0,y=o.text&&o.text.sections;for(let i=0;i<e.length;i++){const{tl:r,tr:a,bl:l,br:c,tex:u,pixelOffsetTL:m,pixelOffsetBR:g,minFontScaleX:v,minFontScaleY:b,glyphOffset:x,isSDF:w,sectionIndex:E}=e[i],M=f.vertexLength,T=x[1];gd(p,s.x,s.y,r.x,T+r.y,u.x,u.y,n,w,m.x,m.y,v,b),gd(p,s.x,s.y,a.x,T+a.y,u.x+u.w,u.y,n,w,g.x,m.y,v,b),gd(p,s.x,s.y,l.x,T+l.y,u.x,u.y+u.h,n,w,m.x,g.y,v,b),gd(p,s.x,s.y,c.x,T+c.y,u.x+u.w,u.y+u.h,n,w,g.x,g.y,v,b),_d(t.dynamicLayoutVertexArray,s,_),d.emplaceBack(M,M+1,M+2),d.emplaceBack(M+1,M+2,M+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),i!==e.length-1&&E===e[i+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},h,y&&y[E])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,c,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],a,0,!1,0,u,0)}_commitLayoutVertex(t,e,n,i,r){t.emplaceBack(e.x,e.y,n,i,Math.round(r.x),Math.round(r.y))}_addCollisionDebugVertices(t,e,n,i,r){const o=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),a=o.vertexLength,s=r.anchorX,l=r.anchorY;for(let t=0;t<4;t++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,i,s,l,new m(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,s,l,new m(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,s,l,new m(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,s,l,new m(t.x1,t.y2)),o.vertexLength+=4;const c=n.indexArray;c.emplaceBack(a,a+1),c.emplaceBack(a+1,a+2),c.emplaceBack(a+2,a+3),c.emplaceBack(a+3,a),o.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceTextSize(t,o,e,a);this._addCollisionDebugVertices(i,r,this.textCollisionBox,i.anchorPoint,o)}}_addIconDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceIconSize(t,e,a);this._addCollisionDebugVertices(i,r,this.iconCollisionBox,i.anchorPoint,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new bd(wa,Tu.members,Da),this.iconCollisionBox=new bd(wa,Tu.members,Da);const n=Du(this.iconSizeData,t),i=Du(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(i,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(i,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,n,i){const r=e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:i,o=this.text.placedSymbolArray.get(r),a=Lu(this.textSizeData,t,o)/ku;return this.tilePixelRatio*a}getSymbolInstanceIconSize(t,e,n){const i=this.icon.placedSymbolArray.get(n),r=Lu(this.iconSizeData,t,i);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceTextSize(t,o,e,a),s=this.textCollisionBox.collisionVertexArrayExt;this._commitDebugCollisionVertexUpdate(s,r,i.padding)}}_updateIconDebugCollisionBoxes(t,e,n,i,r){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(t,e,o),a=this.iconCollisionBox.collisionVertexArrayExt;this._commitDebugCollisionVertexUpdate(a,r,i.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Du(this.iconSizeData,t),i=Du(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(i,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(i,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,i,r,o,a,s,l){const c={};for(let i=e;i<n;i++){const e=t.get(i);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.textFeatureIndex=e.featureIndex;break}for(let e=i;e<r;e++){const n=t.get(e);c.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.verticalTextFeatureIndex=n.featureIndex;break}for(let e=o;e<a;e++){const n=t.get(e);c.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.iconFeatureIndex=n.featureIndex;break}for(let e=s;e<l;e++){const n=t.get(e);c.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.verticalIconFeatureIndex=n.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs;for(let e=n.vertexStartIndex;e<i;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),i=[],r=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const a=this.symbolInstances.get(t);i.push(0|Math.round(e*a.anchorX+n*a.anchorY)),r.push(a.featureIndex)}return o.sort(((t,e)=>i[t]-i[e]||r[e]-r[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,n)=>{t>=0&&n.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}wr("SymbolBucket",xd,{omit:["layers","collisionBoxArray","features","compareText"]}),xd.MAX_GLYPHS=65535,xd.addDynamicAttributes=_d;const wd=new oa({"symbol-placement":new ta(Qt.layout_symbol["symbol-placement"]),"symbol-spacing":new ta(Qt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ta(Qt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ea(Qt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ta(Qt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ta(Qt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ta(Qt.layout_symbol["icon-ignore-placement"]),"icon-optional":new ta(Qt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ta(Qt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ea(Qt.layout_symbol["icon-size"]),"icon-text-fit":new ta(Qt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ta(Qt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ea(Qt.layout_symbol["icon-image"]),"icon-rotate":new ea(Qt.layout_symbol["icon-rotate"]),"icon-padding":new ta(Qt.layout_symbol["icon-padding"]),"icon-keep-upright":new ta(Qt.layout_symbol["icon-keep-upright"]),"icon-offset":new ea(Qt.layout_symbol["icon-offset"]),"icon-anchor":new ea(Qt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ta(Qt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ta(Qt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ta(Qt.layout_symbol["text-rotation-alignment"]),"text-field":new ea(Qt.layout_symbol["text-field"]),"text-font":new ea(Qt.layout_symbol["text-font"]),"text-size":new ea(Qt.layout_symbol["text-size"]),"text-max-width":new ea(Qt.layout_symbol["text-max-width"]),"text-line-height":new ea(Qt.layout_symbol["text-line-height"]),"text-letter-spacing":new ea(Qt.layout_symbol["text-letter-spacing"]),"text-justify":new ea(Qt.layout_symbol["text-justify"]),"text-radial-offset":new ea(Qt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ta(Qt.layout_symbol["text-variable-anchor"]),"text-anchor":new ea(Qt.layout_symbol["text-anchor"]),"text-max-angle":new ta(Qt.layout_symbol["text-max-angle"]),"text-writing-mode":new ta(Qt.layout_symbol["text-writing-mode"]),"text-rotate":new ea(Qt.layout_symbol["text-rotate"]),"text-padding":new ta(Qt.layout_symbol["text-padding"]),"text-keep-upright":new ta(Qt.layout_symbol["text-keep-upright"]),"text-transform":new ea(Qt.layout_symbol["text-transform"]),"text-offset":new ea(Qt.layout_symbol["text-offset"]),"text-allow-overlap":new ta(Qt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ta(Qt.layout_symbol["text-ignore-placement"]),"text-optional":new ta(Qt.layout_symbol["text-optional"])});var Ed={paint:new oa({"icon-opacity":new ea(Qt.paint_symbol["icon-opacity"]),"icon-color":new ea(Qt.paint_symbol["icon-color"]),"icon-halo-color":new ea(Qt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ea(Qt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ea(Qt.paint_symbol["icon-halo-blur"]),"icon-translate":new ta(Qt.paint_symbol["icon-translate"]),"icon-translate-anchor":new ta(Qt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ea(Qt.paint_symbol["text-opacity"]),"text-color":new ea(Qt.paint_symbol["text-color"],{runtimeType:he,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new ea(Qt.paint_symbol["text-halo-color"]),"text-halo-width":new ea(Qt.paint_symbol["text-halo-width"]),"text-halo-blur":new ea(Qt.paint_symbol["text-halo-blur"]),"text-translate":new ta(Qt.paint_symbol["text-translate"]),"text-translate-anchor":new ta(Qt.paint_symbol["text-translate-anchor"])}),layout:wd};class Md{constructor(t){h(void 0!==t.property.overrides),this.type=t.property.overrides?t.property.overrides.runtimeType:se,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}wr("FormatSectionOverride",Md,{omit:["defaultValue"]});class Td extends Es{constructor(t){super(t,Ed)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else"point"===this.layout.get("symbol-placement")?this.layout._values["text-writing-mode"]=["horizontal"]:this.layout._values["text-writing-mode"]=["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,i){const r=this.layout.get(t).evaluate(e,{},n,i),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Mi(o.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,r)}createBucket(t){return new xd(t)}queryRadius(){return 0}queryIntersectsFeature(){return h(!1),!1}_setPaintOverrides(){for(const t of Ed.paint.overridableProperties){if(!Td.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new Md(e),i=new Ei(n,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new Si("source",i):new ki("composite",i,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new Jo(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&Td.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),i=Ed.paint.properties[e];let r=!1;const o=t=>{for(const e of t)if(i.overrides&&i.overrides.hasOverride(e))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof ke)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{if(!r)if(e instanceof Pe&&De(e.value)===me){const t=e.value;o(t.sections)}else e instanceof Oe?o(e.sections):e.eachChild(t)},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return r}getProgramConfiguration(t){return new ms(this,t)}}var Sd={paint:new oa({"background-color":new ta(Qt.paint_background["background-color"]),"background-pattern":new ia(Qt.paint_background["background-pattern"]),"background-opacity":new ta(Qt.paint_background["background-opacity"])})};var kd={paint:new oa({"raster-opacity":new ta(Qt.paint_raster["raster-opacity"]),"raster-hue-rotate":new ta(Qt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ta(Qt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ta(Qt.paint_raster["raster-brightness-max"]),"raster-saturation":new ta(Qt.paint_raster["raster-saturation"]),"raster-contrast":new ta(Qt.paint_raster["raster-contrast"]),"raster-resampling":new ta(Qt.paint_raster["raster-resampling"]),"raster-fade-duration":new ta(Qt.paint_raster["raster-fade-duration"])})};class Cd extends Es{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){h(!1,"Custom layers cannot be serialized")}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var Id={paint:new oa({"sky-type":new ta(Qt.paint_sky["sky-type"]),"sky-atmosphere-sun":new ta(Qt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ta(Qt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ta(Qt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ta(Qt.paint_sky["sky-gradient-radius"]),"sky-gradient":new ra(Qt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ta(Qt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ta(Qt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ta(Qt.paint_sky["sky-opacity"])})};function Ld(t,e,n){const i=ll(0,0,1),r=Sl(Tl());return function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=i*l-o*s,t[1]=r*l+a*s,t[2]=o*l+i*s,t[3]=a*l-r*s}(r,r,n?-w(t)+Math.PI:w(t)),kl(r,r,-w(e)),_l(i,i,r),fl(i,i)}const Dd={circle:class extends Es{constructor(t){super(t,Qs)}createBucket(t){return new Ns(t)}queryRadius(t){const e=t;return Zs("circle-radius",this,e)+Zs("circle-stroke-width",this,e)+Ws(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,i,r,o,a,s){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&t.queryGeometry.isAboveHorizon)return!1;const c=Ks(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),h=l?u*t.pixelToTileUnitsFactor:u;for(const e of i)for(const n of e){const e=n.add(c),i=s&&o.elevation?o.elevation.exaggeration()*s.getElevationAt(e.x,e.y,!0):0,r=l?e:Pl(e,i,a),u=l?t.tilespaceRays.map((t=>Rl(t,i))):t.queryGeometry.screenGeometry;let d=h;const p=wl([],[n.x,n.y,i,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?d*=p[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(d*=o.cameraToCenterDistance/p[3]),Os(u,r,d))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new ms(this,t)}},heatmap:class extends Es{createBucket(t){return new Ol(t)}constructor(t){super(t,Vl),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){const t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Gl({expression:t,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new ms(this,t)}},hillshade:class extends Es{constructor(t){super(t,ql)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(t){return new ms(this,t)}},fill:class extends Es{constructor(t){super(t,zc)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new ms(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Ac(t)}queryRadius(){return Ws(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,i,r,o){return!t.queryGeometry.isAboveHorizon&&Fs(Xs(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends Es{constructor(t){super(t,eu)}createBucket(t){return new Qc(t)}queryRadius(){return Ws(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new ms(this,t)}queryIntersectsFeature(t,e,n,i,r,o,a,s,l){const c=Ks(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(e,n),h=this.paint.get("fill-extrusion-base").evaluate(e,n),d=[0,0],p=s&&o.elevation,f=o.elevation?o.elevation.exaggeration():1;if(p){const e=t.tile.getBucket(this).centroidVertexArray,n=l+1;if(n<e.length){const t=e.get(n);d[0]=t.a_centroid_pos0,d[1]=t.a_centroid_pos1}}if(0===d[0]&&1===d[1])return!1;const g=function(t,e,n,i,r,o,a,s,l){return o?function(t,e,n,i,r,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of t){const t=[],p=[];for(const c of d){const u=c.x+i.x,d=c.y+i.y,f=ou(u,d,e,n,o,a,s,l);h[0]=u,h[1]=d,h[2]=f.base,h[3]=1,wl(h,h,r),h[3]=Math.max(h[3],1e-5);const m=ru([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);h[0]=u,h[1]=d,h[2]=f.top,h[3]=1,wl(h,h,r),h[3]=Math.max(h[3],1e-5);const g=ru([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);t.push(m),p.push(g)}c.push(t),u.push(p)}return[c,u]}(t,e,n,i,r,o,a,s,l):function(t,e,n,i,r){const o=[],a=[],s=r[8]*e,l=r[9]*e,c=r[10]*e,u=r[11]*e,h=r[8]*n,d=r[9]*n,p=r[10]*n,f=r[11]*n;for(const e of t){const t=[],n=[];for(const o of e){const e=o.x+i.x,a=o.y+i.y,g=r[0]*e+r[4]*a+r[12],_=r[1]*e+r[5]*a+r[13],y=r[2]*e+r[6]*a+r[14],v=r[3]*e+r[7]*a+r[15],b=g+s,x=_+l,w=y+c,E=Math.max(v+u,1e-5),M=g+h,T=_+d,S=y+p,k=Math.max(v+f,1e-5),C=new m(b/E,x/E);C.z=w/E,t.push(C);const I=new m(M/k,T/k);I.z=S/k,n.push(I)}o.push(t),a.push(n)}return[o,a]}(t,e,n,i,r)}(i,h,u,c,a,p?s:null,d,f,o.center.lat),_=g[0],y=g[1],v=t.queryGeometry;return function(t,e,n){let i=1/0;Fs(n,e)&&(i=iu(n,e[0]));for(let r=0;r<e.length;r++){const o=e[r],a=t[r];for(let t=0;t<o.length-1;t++){const e=o[t],r=o[t+1],s=a[t],l=[e,r,a[t+1],s,e];Rs(n,l)&&(i=Math.min(i,iu(n,l)))}}return i!==1/0&&i}(_,y,v.isPointQuery()?v.screenBounds:v.screenGeometry)}},line:class extends Es{constructor(t){super(t,yu),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof _n,this.gradientVersion=(this.gradientVersion+1)%v}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=vu.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new gu(t)}getProgramIds(){const t=this.paint.get("line-dasharray"),e=this.paint.get("line-pattern").constantOr(1),n=this.paint.get("line-gradient");return[e?"linePattern":t?"lineSDF":n?"lineGradient":"line"]}getProgramConfiguration(t){return new ms(this,t)}queryRadius(t){const e=t,n=bu(Zs("line-width",this,e),Zs("line-gap-width",this,e)),i=Zs("line-offset",this,e);return n/2+Math.abs(i)+Ws(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,i,r,o){if(t.queryGeometry.isAboveHorizon)return!1;const a=Xs(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),s=t.pixelToTileUnitsFactor/2*bu(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),l=this.paint.get("line-offset").evaluate(e,n);return l&&(i=function(t,e){const n=[],i=new m(0,0);for(let r=0;r<t.length;r++){const o=t[r],a=[];for(let t=0;t<o.length;t++){const n=o[t-1],r=o[t],s=o[t+1],l=0===t?i:r.sub(n)._unit()._perp(),c=t===o.length-1?i:s.sub(r)._unit()._perp(),u=l._add(c)._unit(),h=u.x*c.x+u.y*c.y;u._mult(1/h),a.push(u._mult(e)._add(r))}n.push(a)}return n}(i,l*t.pixelToTileUnitsFactor)),function(t,e,n){for(let i=0;i<e.length;i++){const r=e[i];if(t.length>=3)for(let e=0;e<r.length;e++)if(qs(t,r[e]))return!0;if(Bs(t,r,n))return!0}return!1}(a,i,s)}isTileClipped(){return!0}},symbol:Td,background:class extends Es{constructor(t){super(t,Sd)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Es{constructor(t){super(t,kd)}getProgramIds(){return["raster"]}},sky:class extends Es{constructor(t){super(t,Id),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){const t=this._transitionablePaint._values["sky-gradient"].value.expression;this.colorRamp=Gl({expression:t,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(t,e){const n=this.paint.get("sky-type");if("atmosphere"===n){const n=this.paint.get("sky-atmosphere-sun"),i=!n,r=t.style.light,o=r.properties.get("position");return i&&"viewport"===r.properties.get("anchor")&&V("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?Ld(o.azimuthal,90-o.polar,e):Ld(n[0],90-n[1],e)}if("gradient"===n){const t=this.paint.get("sky-gradient-center");return Ld(t[0],90-t[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}};const{HTMLImageElement:Ad,HTMLCanvasElement:Pd,HTMLVideoElement:zd,ImageData:Nd,ImageBitmap:Rd}=_;class Od{constructor(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)}update(t,e,n){const{width:i,height:r}=t,o=!(this.size&&this.size[0]===i&&this.size[1]===r||n),{context:a}=this,{gl:s}=a;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[i,r],t instanceof Ad||t instanceof Pd||t instanceof zd||t instanceof Nd||Rd&&t instanceof Rd?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{const{x:e,y:o}=n||{x:0,y:0};t instanceof Ad||t instanceof Pd||t instanceof zd||t instanceof Nd||Rd&&t instanceof Rd?s.texSubImage2D(s.TEXTURE_2D,0,e,o,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,e,o,i,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(t,e,n){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Fd{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Ud?new Ud(t.lng,t.lat):Ud.convert(t),this}setSouthWest(t){return this._sw=t instanceof Ud?new Ud(t.lng,t.lat):Ud.convert(t),this}extend(t){const e=this._sw,n=this._ne;let i,r;if(t instanceof Ud)i=t,r=t;else{if(!(t instanceof Fd)){if(Array.isArray(t)){if(4===t.length||t.every(Array.isArray)){const e=t;return this.extend(Fd.convert(e))}{const e=t;return this.extend(Ud.convert(e))}}return this}if(i=t._sw,r=t._ne,!i||!r)return this}return e||n?(e.lng=Math.min(i.lng,e.lng),e.lat=Math.min(i.lat,e.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new Ud(i.lng,i.lat),this._ne=new Ud(r.lng,r.lat)),this}getCenter(){return new Ud((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ud(this.getWest(),this.getNorth())}getSouthEast(){return new Ud(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Ud.convert(t),i=this._sw.lat<=n&&n<=this._ne.lat;let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),i&&r}static convert(t){return!t||t instanceof Fd?t:new Fd(t)}}const Bd=6371008.8;class Ud{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ud(C(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return Bd*Math.acos(Math.min(r,1))}toBounds(t=0){const e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Fd(new Ud(this.lng-n,this.lat-e),new Ud(this.lng+n,this.lat+e))}static convert(t){if(t instanceof Ud)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ud(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ud(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Yd=2*Math.PI*Bd;function jd(t){return Yd*Math.cos(t*Math.PI/180)}function Vd(t){return(180+t)/360}function Gd(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function qd(t,e){return t/jd(e)}function Hd(t){const e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function $d(t,e){return t*jd(Hd(e))}class Zd{constructor(t,e,n=0){this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t,e=0){const n=Ud.convert(t);return new Zd(Vd(n.lng),Gd(n.lat),qd(e,n.lat))}toLngLat(){return new Ud(360*this.x-180,Hd(this.y))}toAltitude(){return $d(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Yd*(t=Hd(this.y),1/Math.cos(t*Math.PI/180));var t}}class Wd{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new Yl({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=N(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const i=[];let r=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;i.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let e=1;e<t.length;e++){a=!a;const l=t[e];r=s*n,s+=l,o=s*n,i.push({left:r,right:o,isDash:a,zeroLength:0===l})}return i}addRoundDash(t,e,n){const i=e/2;for(let e=-n;e<=n;e++){const r=this.nextRow+n+e,o=this.width*r;let a=0,s=t[a];for(let r=0;r<this.width;r++){r/s.right>1&&(s=t[++a]);const l=Math.abs(r-s.left),c=Math.abs(r-s.right),u=Math.min(l,c);let h;const d=e/n*(i+1);if(s.isDash){const t=i-Math.abs(d);h=Math.sqrt(u*u+t*t)}else h=i-Math.sqrt(u*u+d*d);this.image.data[o+r]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let e=t.length-1;e>=0;--e){const n=t[e],i=t[e+1];n.zeroLength?t.splice(e,1):i&&i.isDash===n.isDash&&(i.left=n.left,t.splice(e,1))}const n=t[0],i=t[t.length-1];n.isDash===i.isDash&&(n.left=i.left-this.width,i.right=n.right+this.width);const r=this.width*this.nextRow;let o=0,a=t[o];for(let n=0;n<this.width;n++){n/a.right>1&&(a=t[++o]);const i=Math.abs(n-a.left),s=Math.abs(n-a.right),l=Math.min(i,s),c=(a.isDash?l:-l)+e;this.image.data[r+n]=Math.max(0,Math.min(255,c+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const i="round"===e,r=i?7:0,o=2*r+1;if(this.nextRow+o>this.height)return V("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let e=0;e<t.length;e++)t[e]<0&&(V("Negative value is found in line dasharray, replacing values with 0"),t[e]=0),a+=t[e];if(0!==a){const n=this.width/a,o=this.getDashRanges(t,this.width,n);if(i)this.addRoundDash(o,n,r);else{const t="square"===e?.5*n:0;this.addRegularDash(o,t)}}const s=this.nextRow+r;this.nextRow+=o;const l={tl:[s,r],br:[a,0]};return this.positions[n]=l,l}}wr("LineAtlas",Wd);class Xd{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Kd=_.performance,Jd={create:"create",load:"load",fullLoad:"fullLoad"};let Qd=null,tp=[];const ep=[tp];let np=0;const ip=1e3/60,rp={mark(t){Kd.mark(t)},measure(t,e,n){Kd.measure(t,e,n)},beginMeasure(t){const e=t+np++;return Kd.mark(e),{mark:e,name:t}},endMeasure(t){Kd.measure(t.name,t.mark)},frame(t,e){const n=t;if(null!=Qd){const t=n-Qd;tp.push(t)}e?Qd=n:(Qd=null,tp=[],ep.push(tp))},clearMetrics(){Qd=null,tp=[],Kd.clearMeasures("loadTime"),Kd.clearMeasures("fullLoadTime");for(const t in Jd)Kd.clearMarks(Jd[t])},getPerformanceMetrics(){const t={};Kd.measure("loadTime",Jd.create,Jd.load),Kd.measure("fullLoadTime",Jd.create,Jd.fullLoad);const e=Kd.getEntriesByType("measure");for(const n of e)t[n.name]=(t[n.name]||0)+n.duration;let n=0,i=0,r=0;t.jank=0;for(const e of ep){if(!e.length)continue;const o=e.reduce(((t,e)=>t+e),0);n+=Math.max(1,Math.round(o/ip))-e.length,i+=o,r+=e.length;const a=e.map((t=>Math.max(1,Math.round(t/ip))));for(let e=0;e<a.length-1;e++)a[e+1]>a[e]&&t.jank++}const o=i/r/1e3;t.fps=1/o,t.droppedFrames=n,t.percentDroppedFrames=n/(r+n)*100,t.cpuFrameBudgetExceeded=0;const a=Kd.getEntriesByName("render");for(const e of a)t.cpuFrameBudgetExceeded+=Math.max(0,e.duration-14);return t},getWorkerPerformanceMetrics:()=>JSON.parse(JSON.stringify({timeOrigin:Kd.timeOrigin,measures:Kd.getEntriesByType("measure")}))};function op(t){const e=t?t.url.toString():void 0;return Kd.getEntriesByName(e)}class ap{constructor(){this.tasks={},this.taskQueue=[],O(["process"],this),this.invoker=new Xd(this.process),this.nextId=0}add(t,e){const n=this.nextId++,i=function({type:t,isSymbolTile:e,zoom:n}){return n=n||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-n:"maybePrepare"===t&&e?400-n:500:200-n:100-n}(e);if(0===i){const e=H()?rp.beginMeasure("workerTask"):void 0;try{t()}finally{e&&rp.endMeasure(e)}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:i,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){const t=H()?rp.beginMeasure("workerTask"):void 0;try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const n=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{t&&rp.endMeasure(t)}}pick(){let t=null,e=1/0;for(let n=0;n<this.taskQueue.length;n++){const i=this.taskQueue[n],r=this.tasks[i];r.priority<e&&(e=r.priority,t=n)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}function sp(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}class lp{constructor(t,e,n){h(t>=0&&t<=25),h(e>=0&&e<Math.pow(2,t)),h(n>=0&&n<Math.pow(2,t)),this.z=t,this.x=e,this.y=n,this.key=hp(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=(r=this.x,o=this.y,a=this.z,s=sp(256*r,256*(o=Math.pow(2,a)-o-1),a),l=sp(256*(r+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]),i=function(t,e,n){let i,r="";for(let o=t;o>0;o--)i=1<<o-1,r+=(e&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);var r,o,a,s,l;return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)}getTilePoint(t){const e=Math.pow(2,this.z);return new m((t.x*e-this.x)*Is,(t.y*e-this.y)*Is)}getTileVec3(t){const e=Math.pow(2,this.z);return ll((t.x*e-this.x)*Is,(t.y*e-this.y)*Is,$d(t.z,t.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class cp{constructor(t,e){this.wrap=t,this.canonical=e,this.key=hp(t,e.z,e.z,e.x,e.y)}}class up{constructor(t,e,n,i,r){h(t>=n),this.overscaledZ=t,this.wrap=e,this.canonical=new lp(n,+i,+r),this.key=0===e&&t===n?this.canonical.key:hp(e,t,n,i,r)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){h(t<=this.overscaledZ);const e=this.canonical.z-t;return t>this.canonical.z?new up(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new up(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return hp(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return hp(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new up(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new up(e,this.wrap,e,n,i),new up(e,this.wrap,e,n+1,i),new up(e,this.wrap,e,n,i+1),new up(e,this.wrap,e,n+1,i+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new up(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new up(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new cp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Zd(t.x-this.wrap,t.y))}getTileVec3(t){return this.canonical.getTileVec3(new Zd(t.x-this.wrap,t.y,t.z))}}function hp(t,e,n,i,r){const o=1<<Math.min(n,22);let a=o*(r%o)+i%o;t&&n<22&&(a+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n))));const s=16*(32*a+n)+(e-n);return h(s>=0&&s<=v),s}wr("CanonicalTileID",lp),wr("OverscaledTileID",up,{omit:["projMatrix"]});class dp{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return h(t in this._stringToNumber),this._stringToNumber[t]}decode(t){return h(t<this._numberToString.length),this._numberToString[t]}}class pp{constructor(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}const fp={extend:(t,...e)=>D(t,...e),run(t){t()},logToElement(t,e=!1,n="log"){const i=_.document.getElementById(n);i&&(e&&(i.innerHTML=""),i.innerHTML+=`<br>${t}`)}};var mp=ua([{name:"a_pos",type:"Int16",components:2}]);class gp{constructor(t,e=Me.red){this.vertices=new da,this.indices=new Aa,this.tileSize=t,this.needsUpload=!0,this.color=e}addPoints(t){this.clearPoints();for(const e of t)this.addPoint(e);this.addPoint(t[0])}addPoint(t){const e=this.vertices.length;this.vertices.emplaceBack(t.x,t.y),this.vertices.emplaceBack(t.x+40,t.y),this.vertices.emplaceBack(t.x,t.y-40),this.vertices.emplaceBack(t.x,t.y+40),this.vertices.emplaceBack(t.x-40,t.y),this.indices.emplaceBack(e),this.indices.emplaceBack(e+1),this.indices.emplaceBack(e+2),this.indices.emplaceBack(e+3),this.indices.emplaceBack(e+4),this.indices.emplaceBack(e),this.needsUpload=!0}clearPoints(){this.vertices.clear(),this.indices.clear(),this.needsUpload=!0}lazyUpload(t){this.needsUpload&&this.hasVertices()&&(this.unload(),this.vertexBuffer=t.createVertexBuffer(this.vertices,mp.members,!0),this.indexBuffer=t.createIndexBuffer(this.indices,!0),this.segments=Cs.simpleSegment(0,0,this.vertices.length,this.indices.length),this.needsUpload=!1)}hasVertices(){return this.vertices.length>1}unload(){this.vertexBuffer&&(this.vertexBuffer.destroy(),delete this.vertexBuffer),this.indexBuffer&&(this.indexBuffer.destroy(),delete this.indexBuffer),this.segments&&(this.segments.destroy(),delete this.segments)}}class _p{constructor(t,e,n){this.tileID=t,this.uid=P(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const e=t+this.timeAdded;e<tt.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const i of t){const t=i.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){i.layers=t,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=i}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof xd){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof xd&&e.hasRTLText){this.hasRTLText=!0,Go.isLoading()||Go.isLoaded()||"deferred"!==jo()||Vo();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Na}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),fp.run((()=>{this.queryGeometryDebugViz&&(this.queryGeometryDebugViz.unload(),delete this.queryGeometryDebugViz),this.queryBoundsDebugViz&&(this.queryBoundsDebugViz.unload(),delete this.queryBoundsDebugViz)})),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const n=this.buckets[e];n.uploadPending()&&n.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Od(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Od(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Od(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,i,r,o,a,s){return fp.run((()=>{s&&(this.queryGeometryDebugViz||(this.queryGeometryDebugViz=new gp(this.tileSize)),this.queryBoundsDebugViz||(this.queryBoundsDebugViz=new gp(this.tileSize,Me.blue)),this.queryGeometryDebugViz.addPoints(i.tilespaceGeometry),this.queryBoundsDebugViz.addPoints(i.bufferedTilespaceGeometry))})),this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:a,transform:o,params:r},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),r=e?e.sourceLayer:"",o=i._geojsonTileLayer||i[r];if(!o)return;const a=Bi(e&&e.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let e=0;e<o.length;e++){const i=o.feature(e);if(a.needGeometry){const t=Ps(i,!0);if(!a.filter(new qo(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new qo(this.tileID.overscaledZ),i))continue;const h=n.getId(i,r),d=new pp(i,s,l,c,h);d.tile=u,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=$(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const i=this.expirationTime-e;i?this.expirationTime=t+Math.max(i,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(!a||!s||0===Object.keys(s).length)continue;r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<tt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=tt.now()+t}setDependencies(t,e){const n={};for(const t of e)n[t]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){fp.run((()=>{this.queryGeometryDebugViz&&this.queryGeometryDebugViz.clearPoints(),this.queryBoundsDebugViz&&this.queryBoundsDebugViz.clearPoints()}))}}class yp{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},D(this.stateChanges[t][i],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==i&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][i]){this.deletedStates[t][i]={};for(const e in this.state[t][i])n[e]||(this.deletedStates[t][i][e]=null)}else for(const e in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][e]&&delete this.deletedStates[t][i][e]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),i=this.state[t]||{},r=this.stateChanges[t]||{},o=D({},i[n],r[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete o[t]}return o}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const e={};for(const n in this.stateChanges[t])this.state[t][n]||(this.state[t][n]={}),D(this.state[t][n],this.stateChanges[t][n]),e[n]=this.state[t][n];n[t]=e}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const e={};if(null===this.deletedStates[t])for(const n in this.state[t])e[n]={},this.state[t][n]={};else for(const n in this.deletedStates[t]){if(null===this.deletedStates[t][n])this.state[t][n]={};else for(const e of Object.keys(this.deletedStates[t][n]))delete this.state[t][n][e];e[n]=this.state[t][n]}n[t]=n[t]||{},D(n[t],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const i in t)t[i].setFeatureState(n,e)}}class vp{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function bp(t,e,n,i){let r=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(i[a])<1e-15){if(n[a]<t[a]||n[a]>e[a])return null}else{const s=1/i[a];let l=(t[a]-n[a])*s,c=(e[a]-n[a])*s;if(l>c){const t=l;l=c,c=t}if(l>r&&(r=l),c<o&&(o=c),r>o)return null}return r}function xp(t,e,n,i,r,o,a,s,l,c,u){const h=i-t,d=r-e,p=o-n,f=a-t,m=s-e,g=l-n,_=u[1]*g-u[2]*m,y=u[2]*f-u[0]*g,v=u[0]*m-u[1]*f,b=h*_+d*y+p*v;if(Math.abs(b)<1e-15)return null;const x=1/b,w=c[0]-t,E=c[1]-e,M=c[2]-n,T=(w*_+E*y+M*v)*x;if(T<0||T>1)return null;const S=E*p-M*d,k=M*h-w*p,C=w*d-E*h,I=(u[0]*S+u[1]*k+u[2]*C)*x;return I<0||T+I>1?null:(f*S+m*k+g*C)*x}function wp(t,e,n){return(t-e)/(n-e)}function Ep(t,e,n,i,r,o,a,s,l){const c=1<<n,u=o-i,h=a-r,d=(t+0)/c*u+i,p=(t+1)/c*u+i,f=(e+0)/c*h+r,m=(e+1)/c*h+r;s[0]=d,s[1]=f,l[0]=p,l[1]=m}class Mp{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=t.dim,n=5,i=8,r=Math.ceil(Math.log2(e/i)),o=[];let a=Math.ceil(Math.pow(2,r));const s=1/a,l=(t,e,n,i,r)=>{const o=i?1:0,a=t*n,s=(t+1)*n-o,l=e*n,c=(e+1)*n-o;r[0]=a,r[1]=l,r[2]=s,r[3]=c};let c=new vp(a);const u=[];for(let e=0;e<a*a;e++){l(e%a,Math.floor(e/a),s,!1,u);const n=Sp(u[0],u[1],t),i=Sp(u[2],u[1],t),r=Sp(u[2],u[3],t),o=Sp(u[0],u[3],t);c.minimums.push(Math.min(n,i,r,o)),c.maximums.push(Math.max(n,i,r,o)),c.leaves.push(1)}for(o.push(c),a/=2;a>=1;a/=2){const t=o[o.length-1];c=new vp(a);for(let e=0;e<a*a;e++){l(e%a,Math.floor(e/a),2,!0,u);const i=t.getElevation(u[0],u[1]),r=t.getElevation(u[2],u[1]),o=t.getElevation(u[2],u[3]),s=t.getElevation(u[0],u[3]),h=t.isLeaf(u[0],u[1]),d=t.isLeaf(u[2],u[1]),p=t.isLeaf(u[2],u[3]),f=t.isLeaf(u[0],u[3]),m=Math.min(i.min,r.min,o.min,s.min),g=Math.max(i.max,r.max,o.max,s.max),_=h&&d&&p&&f;c.maximums.push(g),c.minimums.push(m),g-m<=n&&_?c.leaves.push(1):c.leaves.push(0)}o.push(c)}return o}(this.dem),n=e.length-1,i=e[n],r=i.minimums,o=i.maximums,a=i.leaves;this._addNode(r[0],o[0],a[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,i,r,o,a=1){return bp([t,e,-100],[n,i,this.maximums[0]*a],r,o)}raycast(t,e,n,i,r,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(t,e,n,i,r,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=d.pop();if(this.leaves[s]){Ep(f,m,g,t,e,n,i,u,h);const s=1<<g,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,_=(m+1)/s,y=Sp(l,d,this.dem)*a,v=Sp(c,d,this.dem)*a,b=Sp(c,_,this.dem)*a,x=Sp(l,_,this.dem)*a,w=xp(u[0],u[1],y,h[0],u[1],v,h[0],h[1],b,r,o),E=xp(h[0],h[1],b,u[0],h[1],x,u[0],u[1],y,r,o),M=Math.min(null!==w?w:Number.MAX_VALUE,null!==E?E:Number.MAX_VALUE);if(M!==Number.MAX_VALUE)return M;{const t=pl([],r,o,p);if(Tp(y,v,x,b,wp(t[0],u[0],h[0]),wp(t[1],u[1],h[1]))>=t[2])return p}continue}let _=0;for(let d=0;d<this._siblingOffset.length;d++){Ep((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,t,e,n,i,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const p=bp(u,h,r,o);if(null!=p){const t=p;l[d]=t;let e=!1;for(let n=0;n<_&&!e;n++)t>=l[c[n]]&&(c.splice(n,0,d),e=!0);e||(c[_]=d),_++}}for(let t=0;t<_;t++){const e=c[t];d.push({idx:this.childOffsets[s]+e,t:l[e],nodex:(f<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:g+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,i,r){if(1===t[i].isLeaf(e,n))return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const o=i-1,a=t[o];let s,l=0;for(let t=0;t<this._siblingOffset.length;t++){const i=2*e+this._siblingOffset[t][0],r=2*n+this._siblingOffset[t][1],o=a.getElevation(i,r),c=a.isLeaf(i,r),u=this._addNode(o.min,o.max,c);c&&(l|=1<<t),s||(s=u)}for(let i=0;i<this._siblingOffset.length;i++)l&1<<i||this._construct(t,2*e+this._siblingOffset[i][0],2*n+this._siblingOffset[i][1],o,s+i)}}function Tp(t,e,n,i,r,o){return yn(yn(t,n,o),yn(e,i,o),r)}function Sp(t,e,n){const i=n.dim,r=k(t*i-.5,0,i-1),o=k(e*i-.5,0,i-1),a=Math.floor(r),s=Math.floor(o),l=Math.min(a+1,i-1),c=Math.min(s+1,i-1);return Tp(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),r-a,o-s)}const kp={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Cp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n,i=!1,r=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return V(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const o=this.dim=e.height-2;if(this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=i,!i){for(let t=0;t<o;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(o,t)]=this.data[this._idx(o-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,o)]=this.data[this._idx(t,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],r&&this._buildQuadTree()}}_buildQuadTree(){h(!this._tree),this._tree=new Mp(this)}get(t,e,n=!1){const i=new Uint8Array(this.data.buffer);n&&(t=k(t,-1,this.dim),e=k(e,-1,this.dim));const r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])}static getUnpackVector(t){return kp[t]}get unpackVector(){return kp[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,n){return(256*t*256+256*e+n)/10-1e4}_unpackTerrarium(t,e,n){return 256*t+e+n/256-32768}static pack(t,e){const n=[0,0,0,0],i=Cp.getUnpackVector(e);let r=Math.floor((t+i[3])/i[2]);return n[2]=r%256,r=Math.floor(r/256),n[1]=r%256,r=Math.floor(r/256),n[0]=r,n}getPixels(){return new jl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let i=e*this.dim,r=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-n*this.dim;for(let e=o;e<a;e++)for(let n=i;n<r;n++)this.data[this._idx(n,e)]=t.data[this._idx(n+s,e+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}wr("DEMData",Cp),wr("DemMinMaxQuadTree",Mp,{omit:["dem"]});class Ip{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:e,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const i of this.data[n])t(i.value)||e.push(i);for(const t of e)this.remove(t.value.tileID,t)}}class Lp{constructor(t,e,n){this.context=t;const i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;h(this.dynamicDraw),this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){const t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)}}const Dp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ap{constructor(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){h(t.length===this.length);const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const i=this.attributes[n],r=e.attributes[i.name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[Dp[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){const t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)}}class Pp{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class zp extends Pp{getDefault(){return Me.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Np extends Pp{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Rp extends Pp{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Op extends Pp{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Fp extends Pp{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Bp extends Pp{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Up extends Pp{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(h(t.ref>=0&&t.ref<=255),this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Yp extends Pp{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class jp extends Pp{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class Vp extends Pp{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Gp extends Pp{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class qp extends Pp{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Hp extends Pp{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class $p extends Pp{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Zp extends Pp{getDefault(){return Me.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Wp extends Pp{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Xp extends Pp{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class Kp extends Pp{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Jp extends Pp{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Qp extends Pp{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class tf extends Pp{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ef extends Pp{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class nf extends Pp{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class rf extends Pp{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class of extends Pp{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class af extends Pp{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class sf extends Pp{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class lf extends Pp{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class cf extends Pp{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class uf extends Pp{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class hf extends Pp{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class df extends Pp{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class pf extends df{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class ff extends df{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class mf{constructor(t,e,n,i){this.context=t,this.width=e,this.height=n;const r=t.gl,o=this.framebuffer=r.createFramebuffer();this.colorAttachment=new pf(t,o),i&&(this.depthAttachment=new ff(t,o)),h(r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE)}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class gf{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}gf.ReadOnly=!1,gf.ReadWrite=!0,gf.disabled=new gf(519,gf.ReadOnly,[0,1]);const _f=7680;class yf{constructor(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o}}yf.disabled=new yf({func:519,mask:0},0,0,_f,_f,_f);class vf{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}vf.Replace=[1,0],vf.disabled=new vf(vf.Replace,Me.transparent,[!1,!1,!1,!1]),vf.unblended=new vf(vf.Replace,Me.transparent,[!0,!0,!0,!0]),vf.alphaBlended=new vf([1,771],Me.transparent,[!0,!0,!0,!0]);const bf=1029,xf=2305;class wf{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}wf.disabled=new wf(!1,bf,xf),wf.backCCW=new wf(!0,bf,xf),wf.backCW=new wf(!0,bf,2304),wf.frontCW=new wf(!0,1028,2304),wf.frontCCW=new wf(!0,1028,xf);class Ef extends Jt{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new Ip(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new yp}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return L(this._tiles).map((t=>t.tileID)).sort(Mf).map((t=>t.key))}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort(((t,e)=>{const n=t.tileID,i=e.tileID,r=new m(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new m(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||o.y-r.y||o.x-r.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(Mf).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new Kt(i,{tile:t})):this.update(this.transform));t.timeAdded=tt.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Xt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let i=0;i<e.length;i++){const r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,i){for(const r in this._tiles){let o=this._tiles[r];if(i[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){i[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),i=this._getLoadedTile(e);if(i)return i}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=(Math.ceil(t.width/e)+1)*(Math.ceil(t.height/e)+1),i=Math.floor(5*n),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(r)}handleWrapJump(t){const e=(t-(void 0===this._prevLng?t:this._prevLng))/360,n=Math.round(e);if(this._prevLng=t,n){const t={};for(const e in this._tiles){const i=this._tiles[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+n),t[i.tileID.key]=i}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles){const e=this._tiles[t];this._setTileReloadTimer(+t,e)}}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(h(!(n&&!this.usedForTerrain)),this.usedForTerrain&&!n)return;let i;this.updateCacheSize(t,e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new up(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(i=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(i=i.filter((t=>this._source.hasTile(t))))):i=[];const r=this._updateRetainedTiles(i);if(Tf(this._source.type)&&0!==i.length){const t={},e={},n=Object.keys(r);for(const i of n){const n=r[i];h(n.key===+i);const o=this._tiles[i];if(!o||o.fadeEndTime&&o.fadeEndTime<=tt.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-Ef.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[i]=n}const o=i[i.length-1].overscaledZ;for(const t in this._tiles){const n=this._tiles[t];if(r[t]||!n.hasData())continue;let i=n.tileID;for(;i.overscaledZ>o;){i=i.scaledTo(i.overscaledZ-1);const o=this._tiles[i.key];if(o&&o.hasData()&&e[i.key]){r[t]=n.tileID;break}}}for(const e in t)r[e]||(this._coveredTiles[e]=!0,r[e]=t[e])}for(const t in r)this._tiles[t].clearFadeHold();const o=function(t,e){const n=[];for(const i in t)i in e||n.push(i);return n}(this._tiles,r);for(const t of o){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+t)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},i=t[t.length-1].overscaledZ,r=t[0].overscaledZ;h(i<=r);const o=Math.max(r-Ef.maxOverzooming,this._source.minzoom),a=Math.max(r+Ef.maxUnderzooming,this._source.minzoom),s={};for(const n of t){const t=this._addTile(n);e[n.key]=n,t.hasData()||i<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,i,a,e);for(const i of t){let t=this._tiles[i.key];if(t.hasData())continue;if(i.canonical.z>=this._source.maxzoom){const t=i.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=i.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let r=t.wasRequested();for(let a=i.overscaledZ-1;a>=o;--a){const o=i.scaledTo(a);if(n[o.key])break;if(n[o.key]=!0,t=this.getTile(o),!t&&r&&(t=this._addTile(o)),t&&(e[o.key]=o,r=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,i=this._tiles[t].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);const t=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;i=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);return n||(e=new _p(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new Xt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._cache.reset()}tilesIn(t,e,n){const i=[],r=this.transform;if(!r)return i;for(const o in this._tiles){const a=this._tiles[o];if(n&&a.clearQueryDebugViz(),a.holdingForFade())continue;const s=t.containsTile(a,r,e);s&&i.push(s)}return i}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.projMatrix=this.transform.calculateProjMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(Tf(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=tt.now())return!0}return!1}setFeatureState(t,e,n){t=t||"_geojsonTileLayer",this._state.updateState(t,e,n)}removeFeatureState(t,e,n){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,n)}getFeatureState(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)}setDependencies(t,e,n){const i=this._tiles[t];i&&i.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}}function Mf(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Tf(t){return"raster"===t||"image"===t||"video"===t}Ef.maxOverzooming=10,Ef.maxUnderzooming=3;class Sf{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const i=n||t.findDEMTileFor(e);if(!i||!i.dem)return;const r=i.dem,o=i.tileID,a=1<<e.canonical.z-o.canonical.z,s=(e.canonical.x/a-o.canonical.x)*r.dim,l=(e.canonical.y/a-o.canonical.y)*r.dim,c=i.tileSize/Is/a;return new Sf(i,c,[s,l])}tileCoordToPixel(t,e){const n=t*this._scale+this._offset[0],i=e*this._scale+this._offset[1],r=Math.floor(n),o=Math.floor(i);return new m(r,o)}getElevationAt(t,e,n,i){const r=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],a=Math.floor(r),s=Math.floor(o),l=this._dem;return i=!!i,n?yn(yn(l.get(a,s,i),l.get(a,s+1,i),o-s),yn(l.get(a+1,s,i),l.get(a+1,s+1,i),o-s),r-a):l.get(a,s,i)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*qd(1,t)*this._dem.stride}}class kf{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new _r(Is,16,0),this.featureIndexArray=new Va,this.promoteId=e}insert(t,e,n,i,r,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r,o);const s=this.grid;for(let t=0;t<e.length;t++){const n=e[t],i=[1/0,1/0,-1/0,-1/0];for(let t=0;t<n.length;t++){const e=n[t];i[0]=Math.min(i[0],e.x),i[1]=Math.min(i[1],e.y),i[2]=Math.max(i[2],e.x),i[3]=Math.max(i[3],e.y)}i[0]<Is&&i[1]<Is&&i[2]>=0&&i[3]>=0&&s.insert(a,i[0],i[1],i[2],i[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Zc.VectorTile(new Bu(this.rawTileData)).layers,this.sourceLayerCoder=new dp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,n,i){this.loadVTLayers();const r=t.params||{},o=Bi(r.filter),a=t.tileResult,s=t.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((t,e,n,i)=>Hs(a.bufferedTilespaceGeometry,t,e,n,i)));c.sort(If);let u=null;s.elevation&&c.length>0&&(u=Sf.create(s.elevation,this.tileID));const h={};let d;for(let s=0;s<c.length;s++){const l=c[s];if(l===d)continue;d=l;const p=this.featureIndexArray.get(l);let f=null;this.loadMatchingFeature(h,p,o,r.layers,r.availableImages,e,n,i,((e,n,i,r=0)=>(f||(f=As(e)),n.queryIntersectsFeature(a,e,i,f,this.z,t.transform,t.pixelPosMatrix,u,r))))}return h}loadMatchingFeature(t,e,n,i,r,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=e,p=this.bucketLayerIDs[u];if(i&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(i,p))return;const f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(c);if(n.needGeometry){const t=Ps(m,!0);if(!n.filter(new qo(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new qo(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let e=0;e<p.length;e++){const n=p[e];if(i&&i.indexOf(n)<0)continue;const u=o[n];if(!u)continue;let h={};void 0!==g&&s&&(h=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const f=D({},a[n]);f.paint=Cf(f.paint,u.paint,m,h,r),f.layout=Cf(f.layout,u.layout,m,h,r);const _=!l||l(m,u,h,d);if(!_)continue;const y=new pp(m,this.z,this.x,this.y,g);y.layer=f;let v=t[n];void 0===v&&(v=t[n]=[]),v.push({featureIndex:c,feature:y,intersectionZ:_})}}lookupSymbolFeatures(t,e,n,i,r,o,a,s){const l={};this.loadVTLayers();const c=Bi(r);for(const r of t)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:i,featureIndex:r,layoutVertexArrayOffset:0},c,o,a,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;if(this.promoteId){const i="string"==typeof this.promoteId?this.promoteId:this.promoteId[e];n=t.properties[i],"boolean"==typeof n&&(n=Number(n))}return n}}function Cf(t,e,n,i,r){return B(t,((t,o)=>{const a=e instanceof Qo?e.get(o):null;return a&&a.evaluate?a.evaluate(n,i,r):a}))}function If(t,e){return e-t}wr("FeatureIndex",kf,{omit:["rawTileData","sourceLayerCoder"]});class Lf{constructor(t){const e={},n=[];for(const i in t){const r=t[i],o=e[i]={};for(const t in r.glyphs){const e=r.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const i=e.metrics.localGlyph?2:1,a={x:0,y:0,w:e.bitmap.width+2*i,h:e.bitmap.height+2*i};n.push(a),o[t]=a}}const{w:i,h:r}=lh(n),o=new Yl({width:i||1,height:r||1});for(const n in t){const i=t[n];for(const t in i.glyphs){const r=i.glyphs[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const a=e[n][t],s=r.metrics.localGlyph?2:1;Yl.copy(r.bitmap,o,{x:0,y:0},{x:a.x+s,y:a.y+s},r.bitmap)}}this.image=o,this.positions=e}}wr("GlyphAtlas",Lf);class Df{constructor(t){this.tileID=new up(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile}parse(t,e,n,i,r){const o=rp.beginMeasure("parseTile1");this.status="parsing",this.data=t,this.collisionBoxArray=new Na;const a=new dp(Object.keys(t.layers).sort()),s=new kf(this.tileID,this.promoteId);s.bucketLayerIDs=[];const l={},c=new Wd(256,256),u={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:c,availableImages:n},d=e.familiesBySource[this.source];for(const e in d){const i=t.layers[e];if(!i)continue;let r=!1,o=!1;for(const t of d[e])"symbol"===t[0].type?r=!0:o=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!o)continue;1===i.version&&V(`Vector tile source "${this.source}" layer "${e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const c=a.encode(e),p=[];for(let t=0;t<i.length;t++){const n=i.feature(t),r=s.getId(n,e);p.push({feature:n,id:r,index:t,sourceLayerIndex:c})}for(const t of d[e]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||(h(e.source===this.source),e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(Af(t,this.zoom,n),(l[e.id]=e.createBucket({index:s.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:c,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(p,u,this.tileID.canonical),s.bucketLayerIDs.push(t.map((t=>t.id)))))}}let p,f,m,g;c.trim();const _={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},y=B(u.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?i.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{p||(p=t,f=e,x.call(this))}),void 0,!1,_):f={};const v=Object.keys(u.iconDependencies);v.length?i.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{p||(p=t,m=e,x.call(this))}),void 0,!1,_):m={};const b=Object.keys(u.patternDependencies);function x(){if(p)return r(p);if(f&&m&&g){const t=rp.beginMeasure("parseTile2"),e=new Lf(f),i=new uh(m,g);for(const t in l){const r=l[t];r instanceof xd?(Af(r.layers,this.zoom,n),od(r,f,e.positions,m,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):r.hasPattern&&(r instanceof gu||r instanceof Ac||r instanceof Qc)&&(Af(r.layers,this.zoom,n),r.addFeatures(u,this.tileID.canonical,i.patternPositions))}this.status="done",r(null,{buckets:L(l).filter((t=>!t.isEmpty())),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:c,imageAtlas:i,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?e.positions:null}),rp.endMeasure(t)}}b.length?i.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{p||(p=t,g=e,x.call(this))}),void 0,!1,_):g={},rp.endMeasure(o),x.call(this)}}function Af(t,e,n){const i=new qo(e);for(const e of t)e.recalculate(i,n)}class Pf{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,i){const r=this.entries[t]=this.entries[t]||{callbacks:[]};if(r.result){const[t,n]=r.result;return this.scheduler?this.scheduler.add((()=>{i(t,n)}),e):i(t,n),()=>{}}return r.callbacks.push(i),r.cancel||(r.cancel=n(((n,i)=>{r.result=[n,i];for(const t of r.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,i)}),e):t(n,i);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{r.result||(r.callbacks=r.callbacks.filter((t=>t!==i)),r.callbacks.length||(r.cancel(),delete this.entries[t]))}}}function zf(t,e,n){const i=JSON.stringify(t.request);t.data&&(this.deduped.entries[i]={result:[null,t.data]});const r={type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom};return this.deduped.request(i,r,(e=>{const i=Ut(t.request,((t,i,r,o)=>{t?e(t):i&&e(null,{vectorTile:n?void 0:new Zc.VectorTile(new Bu(i)),rawData:i,cacheControl:r,expires:o})}));return()=>{i.cancel(),e()}}),e)}t.AUTH_ERR_MSG=ut,t.Aabb=Al,t.Actor=class{constructor(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.cancelCallbacks={},O(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=H()?t:_,this.scheduler=new ap}send(t,e,n,i,r=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=J(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:Tr(e,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||H()){const t=this.callbacks[n],i=t&&t.metadata||{type:"message"};this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,e)),i)}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Sr(e.error)):n(null,Sr(e.data)))}else{const n=J(this.globalScope)?void 0:[],i=e.hasCallback?(e,i)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Tr(e):null,data:Tr(i,n)},n)}:t=>{},r=Sr(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,r,i);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],r.source)[t[1]](r,i)}else i(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=lp,t.Color=Me,t.ColorMode=vf,t.Context=class{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new zp(this),this.clearDepth=new Np(this),this.clearStencil=new Rp(this),this.colorMask=new Op(this),this.depthMask=new Fp(this),this.stencilMask=new Bp(this),this.stencilFunc=new Up(this),this.stencilOp=new Yp(this),this.stencilTest=new jp(this),this.depthRange=new Vp(this),this.depthTest=new Gp(this),this.depthFunc=new qp(this),this.blend=new Hp(this),this.blendFunc=new $p(this),this.blendColor=new Zp(this),this.blendEquation=new Wp(this),this.cullFace=new Xp(this),this.cullFaceSide=new Kp(this),this.frontFace=new Jp(this),this.program=new Qp(this),this.activeTexture=new tf(this),this.viewport=new ef(this),this.bindFramebuffer=new nf(this),this.bindRenderbuffer=new rf(this),this.bindTexture=new of(this),this.bindVertexBuffer=new af(this),this.bindElementBuffer=new sf(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new lf(this),this.pixelStoreUnpack=new cf(this),this.pixelStoreUnpackPremultiplyAlpha=new uf(this),this.pixelStoreUnpackFlipY=new hf(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new Lp(this,t,e)}createVertexBuffer(t,e,n){return new Ap(this,t,e,n)}createRenderbuffer(t,e,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,n){return new mf(this,t,e,n)}clear({color:t,depth:e,stencil:n}){const i=this.gl;let r=0;t&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==n&&(r|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),i.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){y(t.blendFunction,vf.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}},t.CullFaceMode=wf,t.DEMData=Cp,t.DataConstantProperty=ta,t.Debug=fp,t.DedupedRequest=Pf,t.DepthMode=gf,t.DepthStencilAttachment=class extends ff{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}},t.EXTENT=Is,t.Elevation=class{getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){null==e&&(e=null);const i=this._source();if(!i)return e;if(t.y<0||t.y>1)return e;const r=i.getSource().maxzoom,o=1<<r,a=Math.floor(t.x),s=t.x-a,l=new up(r,a,r,Math.floor(s*o),Math.floor(t.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return e;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,p=(t.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(p);return(n?this.exaggeration():1)*yn(yn(u.get(f,m),u.get(f,m+1),p-m),yn(u.get(f+1,m),u.get(f+1,m+1),p-m),d-f)}getAtTileOffset(t,e,n){const i=1<<t.canonical.z;return this.getAtPointOrZero(new Zd(t.wrap+(t.canonical.x+e/Is)/i,(t.canonical.y+n/Is)/i))}getForTilePoints(t,e,n,i){const r=Sf.create(this,t,i);return!!r&&(e.forEach((t=>{t[2]=this.exaggeration()*r.getElevationAt(t[0],t[1],n)})),!0)}getMinMaxForTile(t){const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,i=e.tileID,r=1<<t.canonical.z-i.canonical.z;let o=t.canonical.x/r-i.canonical.x,a=t.canonical.y/r-i.canonical.y,s=0;for(let e=0;e<t.canonical.z-i.canonical.z&&!n.leaves[s];e++){o*=2,a*=2;const t=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+t,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Kt,t.EvaluationParameters=qo,t.Event=Xt,t.Evented=Jt,t.Frustum=Dl,t.GlyphManager=Gh,t.ImagePosition=ch,t.LineAtlas=Wd,t.LngLat=Ud,t.LngLatBounds=Fd,t.LocalGlyphMode=Vh,t.MAX_SAFE_INTEGER=v,t.MercatorCoordinate=Zd,t.ONE_EM=ku,t.OverscaledTileID=up,t.PerformanceMarkers=Jd,t.PerformanceUtils=rp,t.Properties=oa,t.RGBAImage=jl,t.Ray=class{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(t,e,n){const i=ml(e,this.dir);if(Math.abs(i)<1e-6)return!1;const r=ml(yl(ol(),t,this.pos),e)/i;return function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2]}(n,pl(ol(),this.pos,this.dir,r)),!0}},t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ct,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!ht(t))return t;const n=ft(t);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!ht(t))return t;const n=ft(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e){if(!ht(t))return t;const n=ft(t);return n.path=`/v4/${n.authority}.json`,n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,i){const r=ft(t);return ht(t)?(r.path=`/styles/v1${r.path}/sprite${e}${n}`,this._makeAPIURL(r,this._customAccessToken||i)):(r.path+=`${e}${n}`,mt(r))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!ht(t))return t;const i=ft(t),r=it.supported?".webp":"$1",o=n&&"raster"!==i.authority&&512===n,a=e||o?"@2x":"";if(i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${a}${r}`),"raster"===i.authority)i.path=`/${nt.RASTER_URL_PREFIX}${i.path}`;else{const t=/^.+\/v4\//;i.path=i.path.replace(t,"/"),i.path=`/${nt.TILE_URL_VERSION}${i.path}`}const s=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(i.params)||nt.ACCESS_TOKEN;return nt.REQUIRE_ACCESS_TOKEN&&s&&this._skuToken&&i.params.push(`sku=${this._skuToken}`),this._makeAPIURL(i,s)}canonicalizeTileURL(t,e){const n=ft(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let i="mapbox://";if(n.path.match(/^\/raster\/v1\//)){const t=`/${nt.RASTER_URL_PREFIX}/`;i+=`raster/${n.path.replace(t,"")}`}else{const t=`/${nt.TILE_URL_VERSION}/`;i+=`tiles/${n.path.replace(t,"")}`}let r=n.params;return e&&(r=r.filter((t=>!t.match(/^access_token=/)))),r.length&&(i+=`?${r.join("&")}`),i}canonicalizeTileset(t,e){const n=!!e&&ht(e),i=[];for(const e of t.tiles||[])dt(e)?i.push(this.canonicalizeTileURL(e,n)):i.push(e);return i}_makeAPIURL(t,e){const n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=ft(nt.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==i.path&&(t.path=`${i.path}${t.path}`),!nt.REQUIRE_ACCESS_TOKEN)return mt(t);if(e=e||nt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push(`access_token=${e||""}`),mt(t)}},t.ResourceType=Nt,t.SegmentVector=Cs,t.SourceCache=Ef,t.StencilMode=yf,t.StructArrayLayout1ui2=Aa,t.StructArrayLayout2f1f2i16=Ea,t.StructArrayLayout2i4=da,t.StructArrayLayout2ui4=Da,t.StructArrayLayout3f12=va,t.StructArrayLayout3ui6=Ta,t.StructArrayLayout4i8=pa,t.Texture=Od,t.Tile=_p,t.Transitionable=Zo,t.Uniform1f=rs,t.Uniform1i=class extends is{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends is{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends is{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=os,t.UniformColor=as,t.UniformMatrix3f=class extends is{constructor(t,e){super(t,e),this.current=ls}set(t){for(let e=0;e<9;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix3fv(this.location,!1,t);break}}},t.UniformMatrix4f=class extends is{constructor(t,e){super(t,e),this.current=ss}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=cp,t.ValidationError=te,t.VectorTileWorkerSource=class extends Jt{constructor(t,e,n,i,r){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||zf,this.loading={},this.loaded={},this.deduped=new Pf(t.scheduler),this.isSpriteLoaded=i,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,i=t&&t.request,r=i&&i.collectResourceTiming,o=this.loading[n]=new Df(t);o.abort=this.loadVectorData(t,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),e(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new Zc.VectorTile(new Bu(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);const o={};if(r){const t=op(i);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,D({rawTileData:c.slice(0)},n,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{if(this.scheduler){const e={type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom};this.scheduler.add(h,e)}else h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(t,e){const n=this.loaded,i=t.uid,r=this;if(n&&n[i]){const o=n[i];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain;const a=(t,n)=>{const i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,r.layerIndex,this.availableImages,r.actor,i)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const n=t.uid,i=this.loading[n];i&&(i.abort&&i.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()}},t.WritingMode=hh,t.ZoomHistory=kr,t.add=cl,t.addDynamicAttributes=_d,t.altitudeFromMercatorZ=$d,t.assert_1=h,t.asyncAll=I,t.bezier=T,t.bindAll=O,t.bufferConvexPolygon=function(t,e){h(t.length>2,"bufferConvexPolygon requires the ring to have atleast 3 points");const n=[];for(let i=0;i<t.length;i++){const r=C(i-1,-1,t.length-1),o=C(i+1,-1,t.length-1),a=t[r],s=t[i],l=t[o],c=a.sub(s).unit(),u=l.sub(s).unit(),h=u.angleWithSep(c.x,c.y),d=c.add(u).unit().mult(-1*e/Math.sin(h/2));n.push(s.add(d))}return n},t.cacheEntryPossiblyAdded=function(t){zt++,zt>kt&&(t.getActor().send("enforceCacheSizeLimit",St),zt=0)},t.clamp=k,t.clearTileCache=function(t){const e=_.caches.delete(Tt);t&&e.catch(t).then((()=>t()))},t.clipLine=Rh,t.clone=function(t){var e=new tl(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=Y,t.collisionCircleLayout=Su,t.config=nt,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.create=function(){var t=new tl(16);return tl!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=el,t.create$2=function(){var t=new tl(4);return tl!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createExpression=Ti,t.createFilter=Bi,t.createLayout=ua,t.createStyleLayer=function(t){return"custom"===t.type?new Cd(t):new Dd[t.type](t)},t.cross=gl,t.deepEqual=y,t.degToRad=w,t.div=bl,t.dot=ml,t.ease=S,t.easeCubicInOut=M,t.emitValidationErrors=gr,t.endsWith=F,t.enforceCacheSizeLimit=function(t){Lt(),Ct&&Ct.then((e=>{e.keys().then((n=>{for(let i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=Lu,t.evaluateSizeForZoom=Du,t.evaluateVariableOffset=rd,t.evented=Yo,t.exactEquals=Ll,t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=tt,t.exported$1=it,t.extend=D,t.filterObject=U,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,c=n*a,u=i*a,h=i*s,d=r*a,p=r*s,f=r*l,m=o*a,g=o*s,_=o*l;return t[0]=1-h-f,t[1]=u+_,t[2]=d-g,t[3]=0,t[4]=u-_,t[5]=1-c-f,t[6]=p+m,t[7]=0,t[8]=d+g,t[9]=p-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.furthestTileCorner=function(t){const e=(t+45+360)%360,n=Math.round(e/90)%4;return E[n]},t.getAABBPointSquareDist=function(t,e,n){let i=0;for(let r=0;r<2;++r){const o=n?n[r]:0;h(t[r]<e[r],"Invalid aabb min and max inputs, min[i] must be < max[i]."),t[r]>o&&(i+=(t[r]-o)*(t[r]-o)),e[r]<o&&(i+=(o-e[r])*(o-e[r]))}return i},t.getAnchorAlignment=Mh,t.getAnchorJustification=ad,t.getBounds=function(t){let e=1/0,n=1/0,i=-1/0,r=-1/0;for(const o of t)e=Math.min(e,o.x),n=Math.min(n,o.y),i=Math.max(i,o.x),r=Math.max(r,o.y);return{min:new m(e,n),max:new m(i,r)}},t.getImage=$t,t.getJSON=function(t,e){return Bt(D(t,{type:"json"}),e)},t.getMapSessionAPI=Et,t.getPerformanceMeasurement=op,t.getRTLTextPluginStatus=jo,t.getReferrer=Ot,t.getVideo=function(t,e){const n=_.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let e=0;e<t.length;e++){const i=_.document.createElement("source");Vt(t[e])||(n.crossOrigin="Anonymous"),i.src=t[e],n.appendChild(i)}return{cancel:()=>{}}},t.identity=nl,t.identity$1=Sl,t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],_=e[15],y=n*s-i*a,v=n*l-r*a,b=n*c-o*a,x=i*l-r*s,w=i*c-o*s,E=r*c-o*l,M=u*m-h*f,T=u*g-d*f,S=u*_-p*f,k=h*g-d*m,C=h*_-p*m,I=d*_-p*g,L=y*I-v*C+b*k+x*S-w*T+E*M;return L?(L=1/L,t[0]=(s*I-l*C+c*k)*L,t[1]=(r*C-i*I-o*k)*L,t[2]=(m*E-g*w+_*x)*L,t[3]=(d*w-h*E-p*x)*L,t[4]=(l*S-a*I-c*T)*L,t[5]=(n*I-r*S+o*T)*L,t[6]=(g*b-f*E-_*v)*L,t[7]=(u*E-d*b+p*v)*L,t[8]=(a*C-s*S+c*M)*L,t[9]=(i*S-n*C-o*M)*L,t[10]=(f*w-m*b+_*y)*L,t[11]=(h*b-u*w-p*y)*L,t[12]=(s*T-a*k-l*M)*L,t[13]=(n*k-i*T+r*M)*L,t[14]=(m*v-f*x-g*y)*L,t[15]=(u*x-h*v+d*y)*L,t):null},t.isMapAuthenticated=function(t){return Mt.has(t)},t.isMapboxURL=ht,t.isSafari=J,t.latFromMercatorY=Hd,t.len=xl,t.length=sl,t.length$1=Cl,t.loadVectorTile=zf,t.makeRequest=Bt,t.mercatorXfromLng=Vd,t.mercatorYfromLat=Gd,t.mercatorZfromAltitude=qd,t.mul=rl,t.mul$1=vl,t.multiply=il,t.multiply$1=hl,t.nextPowerOfTwo=N,t.normalize=fl,t.normalize$1=Il,t.number=yn,t.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),l=1/(i-r),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*c,t[15]=1,t},t.pbf=Bu,t.perspective=function(t,e,n,i,r){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(o=1/(i-r),t[10]=(r+i)*o,t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){const n={};for(let i=0;i<e.length;i++){const r=e[i];r in t&&(n[r]=t[r])}return n},t.plugin=Go,t.pointGeometry=m,t.polygonIntersectsBox=Hs,t.polygonIntersectsPolygon=Rs,t.polygonizeBounds=function(t,e,n=0,i=!0){const r=new m(n,n),o=t.sub(r),a=e.add(r),s=[o,new m(a.x,o.y),a,new m(o.x,a.y)];return i&&s.push(o),s},t.posAttributes=mp,t.postMapLoadEvent=xt,t.postTurnstileEvent=vt,t.potpack=lh,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=function(t){return t*x},t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Oo,pluginURL:Fo}),Yo.on("pluginStateChange",t),t},t.removeAuthState=function(t){Mt.delete(t)},t.renderColorRamp=Gl,t.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*s,t[1]=r*l+a*s,t[2]=i*-s+o*l,t[3]=r*-s+a*l,t},t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*i,t[5]=a*r+u*i,t[6]=s*r+h*i,t[7]=l*r+d*i,t[8]=c*r-o*i,t[9]=u*r-a*i,t[10]=h*r-s*i,t[11]=d*r-l*i,t},t.rotateX$1=kl,t.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*i,t[1]=a*r-u*i,t[2]=s*r-h*i,t[3]=l*r-d*i,t[8]=o*i+c*r,t[9]=a*i+u*r,t[10]=s*i+h*r,t[11]=l*i+d*r,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*i,t[1]=a*r+u*i,t[2]=s*r+h*i,t[3]=l*r+d*i,t[4]=c*r-o*i,t[5]=u*r-a*i,t[6]=h*r-s*i,t[7]=d*r-l*i,t},t.rotateZ$1=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*s,t[1]=r*l-i*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},t.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=dl,t.scaleAndAdd=pl,t.setCacheLimits=function(t,e){St=t,kt=e},t.setRTLTextPlugin=function(t,e,n=!1){if(Oo===Ao||Oo===Po||Oo===zo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Fo=tt.resolveURL(t),Oo=Ao,Ro=e,Uo(),n||Vo()},t.smoothstep=function(t,e,n){return(n=k((n-t)/(e-t),0,1))*n*(3-2*n)},t.spec=Qt,t.storeAuthState=function(t,e){e?Mt.add(t):Mt.delete(t)},t.sub=yl,t.subtract=ul,t.symbolSize=Au,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},t.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,t},t.transformMat4$1=wl,t.transformQuat=_l,t.translate=function(t,e,n){var i,r,o,a,s,l,c,u,h,d,p,f,m=n[0],g=n[1],_=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*_+e[12],t[13]=e[1]*m+e[5]*g+e[9]*_+e[13],t[14]=e[2]*m+e[6]*g+e[10]*_+e[14],t[15]=e[3]*m+e[7]*g+e[11]*_+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=i*m+s*g+h*_+e[12],t[13]=r*m+l*g+d*_+e[13],t[14]=o*m+c*g+p*_+e[14],t[15]=a*m+u*g+f*_+e[15]),t},t.triggerPluginCompletionEvent=Bo,t.uniqueId=P,t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateFog=pr,t.validateLight=dr,t.validateStyle=hr,t.values=L,t.vectorTile=Zc,t.version=d,t.warnOnce=V,t.window=_,t.wrap=C})),r(0,(function(t){function e(t){const n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const i of t)n+=`${e(i)},`;return`${n}]`}const i=Object.keys(t).sort();let r="{";for(let n=0;n<i.length;n++)r+=`${JSON.stringify(i[n])}:${e(t[i[n]])},`;return`${r}}`}function n(n){let i="";for(const r of t.refProperties)i+=`/${e(n[r])}`;return i}class i{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,i){for(const n of e){this._layerConfigs[n.id]=n;const e=this._layers[n.id]=t.createStyleLayer(n);e._featureFilter=t.createFilter(e.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const t of i)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const i={};for(let r=0;r<t.length;r++){const o=e&&e[t[r].id]||n(t[r]);e&&(e[t[r].id]=o);let a=i[o];a||(a=i[o]=[]),a.push(t[r])}const r=[];for(const t in i)r.push(i[t]);return r}(t.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=r[o];a||(a=r[o]=[]),a.push(e)}}}const{ImageBitmap:r}=t.window;class o{loadTile(e,n){const{uid:i,encoding:o,rawImageData:a,padding:s,buildQuadTree:l}=e,c=r&&a instanceof r?this.getImageData(a,s):a;n(null,new t.DEMData(i,c,o,s<1,l))}getImageData(e,n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const i=this.offscreenCanvasContext.getImageData(-n,-n,e.width+2*n,e.height+2*n);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)}}var a=function t(e,n){var i,r=e&&e.type;if("FeatureCollection"===r)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===r)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===r)t(e.geometry,n);else if("Polygon"===r)s(e.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<e.coordinates.length;i++)s(e.coordinates[i],n);return e};function s(t,e){if(0!==t.length){l(t[0],e);for(var n=1;n<t.length;n++)l(t[n],!e)}}function l(t,e){for(var n=0,i=0,r=t.length,o=r-1;i<r;o=i++)n+=(t[i][0]-t[o][0])*(t[o][1]+t[i][1]);n>=0!=!!e&&t.reverse()}const c=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class u{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.pointGeometry(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const i=[];for(const e of n)i.push(new t.pointGeometry(e[0],e[1]));e.push(i)}return e}}toGeoJSON(t,e,n){return c.call(this,t,e,n)}}class h{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new u(this._features[t])}}var d=t.vectorTile.VectorTileFeature,p=f;function f(t,e){this.options=e||{},this.features=t,this.length=t.length}function m(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}f.prototype.feature=function(t){return new m(this.features[t],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],r=[],o=0;o<i.length;o++)r.push(new t.pointGeometry(i[o][0],i[o][1]));this.geometry.push(r)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[e,i,n,r]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var g=b,_=b,y=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new p(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return b({layers:n})},v=p;function b(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,x,t.layers[n])}(e,n),n.finish()}function x(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,w,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)e.writeMessage(4,k,o[n])}function w(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,E,t),e.writeVarintField(3,n.type),e.writeMessage(4,S,n)}function E(t,e){var n=t.feature,i=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=o[s];void 0===l&&(i.push(s),l=i.length-1,o[s]=l),e.writeVarint(l);var c=n.properties[s],u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var h=u+":"+c,d=a[h];void 0===d&&(r.push(c),d=r.length-1,a[h]=d),e.writeVarint(d)}}function M(t,e){return(e<<3)+(7&t)}function T(t){return t<<1^t>>31}function S(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===i&&(c=l.length),e.writeVarint(M(1,c));for(var u=3===i?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==i&&e.writeVarint(M(2,u-1));var d=l[h].x-r,p=l[h].y-o;e.writeVarint(T(d)),e.writeVarint(T(p)),r+=d,o+=p}3===i&&e.writeVarint(M(7,1))}}function k(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function C(t,e,n,i,r,o){if(r-i<=n)return;const a=i+r>>1;I(t,e,a,i,r,o%2),C(t,e,n,i,a-1,o+1),C(t,e,n,a+1,r,o+1)}function I(t,e,n,i,r,o){for(;r>i;){if(r-i>600){const a=r-i+1,s=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);I(t,e,n,Math.max(i,Math.floor(n-s*c/a+u)),Math.min(r,Math.floor(n+(a-s)*c/a+u)),o)}const a=e[2*n+o];let s=i,l=r;for(L(t,e,i,n),e[2*r+o]>a&&L(t,e,i,r);s<l;){for(L(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*i+o]===a?L(t,e,i,l):(l++,L(t,e,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function L(t,e,n,i){D(t,n,i),D(e,2*n,2*i),D(e,2*n+1,2*i+1)}function D(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function A(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}g.fromVectorTileJs=_,g.fromGeojsonVt=y,g.GeoJSONWrapper=v;const P=t=>t[0],z=t=>t[1];class N{constructor(t,e=P,n=z,i=64,r=Float64Array){this.nodeSize=i,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length);for(let i=0;i<t.length;i++)a[i]=i,s[2*i]=e(t[i]),s[2*i+1]=n(t[i]);C(a,s,i,0,a.length-1,0)}range(t,e,n,i){return function(t,e,n,i,r,o,a){const s=[0,t.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=a){for(let a=p;a<=d;a++)c=e[2*a],u=e[2*a+1],c>=n&&c<=r&&u>=i&&u<=o&&l.push(t[a]);continue}const f=Math.floor((p+d)/2);c=e[2*f],u=e[2*f+1],c>=n&&c<=r&&u>=i&&u<=o&&l.push(t[f]);const m=(h+1)%2;(0===h?n<=c:i<=u)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?r>=c:o>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,t,e,n,i,this.nodeSize)}within(t,e,n){return function(t,e,n,i,r,o){const a=[0,t.length-1,0],s=[],l=r*r;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let r=h;r<=u;r++)A(e[2*r],e[2*r+1],n,i)<=l&&s.push(t[r]);continue}const d=Math.floor((h+u)/2),p=e[2*d],f=e[2*d+1];A(p,f,n,i)<=l&&s.push(t[d]);const m=(c+1)%2;(0===c?n-r<=p:i-r<=f)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?n+r>=p:i+r>=f)&&(a.push(d+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}const R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},O=Math.fround||(F=new Float32Array(1),t=>(F[0]=+t,F[0]));var F;class B{constructor(t){this.options=$(Object.create(R),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:i,nodeSize:r}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let a=[];for(let e=0;e<t.length;e++)t[e].geometry&&a.push(Y(t[e],e));this.trees[i+1]=new N(a,Z,W,r,Float32Array),e&&console.timeEnd(o);for(let t=i;t>=n;t--){const n=+Date.now();a=this._cluster(a,t),this.trees[t]=new N(a,Z,W,r,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,a.length,+Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){const t=this.getClusters([n,i,180,o],e),a=this.getClusters([-180,i,r,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(G(n),q(o),G(r),q(i)),l=[];for(const t of s){const e=a.points[t];l.push(e.numPoints?j(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.points[e];if(!o)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=r.within(o.x,o.y,a),l=[];for(const e of s){const n=r.points[e];n.parentId===t&&l.push(n.numPoints?j(n):this.points[n.index])}if(0===l.length)throw new Error(i);return l}getLeaves(t,e,n){e=e||10,n=n||0;const i=[];return this._appendLeaves(i,t,e,n,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/r,c=(n+1+s)/r,u={features:[]};return this._addTileFeatures(i.range((e-s)/r,l,(e+1+s)/r,c),i.points,e,n,r,u),0===e&&this._addTileFeatures(i.range(1-s/r,l,1,c),i.points,r,n,r,u),e===r-1&&this._addTileFeatures(i.range(0,l,s/r,c),i.points,-1,n,r,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,r){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?r+o.point_count<=i?r+=o.point_count:r=this._appendLeaves(t,o.cluster_id,n,i,r):r<i?r++:t.push(e),t.length===n)break}return r}_addTileFeatures(t,e,n,i,r,o){for(const a of t){const t=e[a],s=t.numPoints;let l,c,u;if(s)l=V(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=G(e.geometry.coordinates[0]),u=q(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*r-n)),Math.round(this.options.extent*(u*r-i))]],tags:l};let d;s?d=t.id:this.options.generateId?d=t.index:this.points[t.index].id&&(d=this.points[t.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:i,extent:r,reduce:o,minPoints:a}=this.options,s=i/(r*Math.pow(2,e));for(let i=0;i<t.length;i++){const r=t[i];if(r.zoom<=e)continue;r.zoom=e;const l=this.trees[e+1],c=l.within(r.x,r.y,s),u=r.numPoints||1;let h=u;for(const t of c){const n=l.points[t];n.zoom>e&&(h+=n.numPoints||1)}if(h>=a){let t=r.x*u,a=r.y*u,s=o&&u>1?this._map(r,!0):null;const d=(i<<5)+(e+1)+this.points.length;for(const n of c){const i=l.points[n];if(i.zoom<=e)continue;i.zoom=e;const c=i.numPoints||1;t+=i.x*c,a+=i.y*c,i.parentId=d,o&&(s||(s=this._map(r,!0)),o(s,this._map(i)))}r.parentId=d,n.push(U(t/h,a/h,d,h,s))}else if(n.push(r),h>1)for(const t of c){const i=l.points[t];i.zoom<=e||(i.zoom=e,n.push(i))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?$({},t.properties):t.properties;const n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?$({},i):i}}function U(t,e,n,i,r){return{x:O(t),y:O(e),zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function Y(t,e){const[n,i]=t.geometry.coordinates;return{x:O(G(n)),y:O(q(i)),zoom:1/0,index:e,parentId:-1}}function j(t){return{type:"Feature",id:t.id,properties:V(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),H(t.y)]}};var e}function V(t){const e=t.numPoints,n=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return $($({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function G(t){return t/360+.5}function q(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function H(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function $(t,e){for(const n in e)t[n]=e[n];return t}function Z(t){return t.x}function W(t){return t.y}function X(t,e,n,i){for(var r,o=i,a=n-e>>1,s=n-e,l=t[e],c=t[e+1],u=t[n],h=t[n+1],d=e+3;d<n;d+=3){var p=K(t[d],t[d+1],l,c,u,h);if(p>o)r=d,o=p;else if(p===o){var f=Math.abs(d-a);f<s&&(r=d,s=f)}}o>i&&(r-e>3&&X(t,e,r,i),t[r+2]=o,n-r>3&&X(t,r,n,i))}function K(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var l=((t-n)*a+(e-i)*s)/(a*a+s*s);l>1?(n=r,i=o):l>0&&(n+=a*l,i+=s*l)}return(a=t-n)*a+(s=e-i)*s}function J(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)Q(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)Q(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)Q(t,e[i][r])}(r),r}function Q(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function tt(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)et(r,s);else if("MultiPoint"===o)for(var c=0;c<r.length;c++)et(r[c],s);else if("LineString"===o)nt(r,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<r.length;c++)s=[],nt(r[c],s,a,!1),t.push(J(l,"LineString",s,e.properties));return}it(r,s,a,!1)}else if("Polygon"===o)it(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)tt(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<r.length;c++){var u=[];it(r[c],u,a,!0),s.push(u)}}t.push(J(l,o,s,e.properties))}}function et(t,e){e.push(rt(t[0])),e.push(ot(t[1])),e.push(0)}function nt(t,e,n,i){for(var r,o,a=0,s=0;s<t.length;s++){var l=rt(t[s][0]),c=ot(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=i?(r*c-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(c-o,2))),r=l,o=c}var u=e.length-3;e[2]=1,X(e,0,u,n),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function it(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];nt(t[r],o,n,i),e.push(o)}}function rt(t){return t/360+.5}function ot(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function at(t,e,n,i,r,o,a,s){if(i/=e,o>=(n/=e)&&a<i)return t;if(a<n||o>=i)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,d=u.type,p=0===r?u.minX:u.minY,f=0===r?u.maxX:u.maxY;if(p>=n&&f<i)l.push(u);else if(!(f<n||p>=i)){var m=[];if("Point"===d||"MultiPoint"===d)st(h,m,n,i,r);else if("LineString"===d)lt(h,m,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===d)ut(h,m,n,i,r,!1);else if("Polygon"===d)ut(h,m,n,i,r,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var _=[];ut(h[g],_,n,i,r,!0),_.length&&m.push(_)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(J(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(J(u.id,d,m,u.tags))}}}return l.length?l:null}function st(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=n&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function lt(t,e,n,i,r,o,a){for(var s,l,c=ct(t),u=0===r?dt:pt,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],m=t[d+2],g=t[d+3],_=t[d+4],y=0===r?p:f,v=0===r?g:_,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-_,2))),y<n?v>n&&(l=u(c,p,f,g,_,n),a&&(c.start=h+s*l)):y>i?v<i&&(l=u(c,p,f,g,_,i),a&&(c.start=h+s*l)):ht(c,p,f,m),v<n&&y>=n&&(l=u(c,p,f,g,_,n),b=!0),v>i&&y<=i&&(l=u(c,p,f,g,_,i),b=!0),!o&&b&&(a&&(c.end=h+s*l),e.push(c),c=ct(t)),a&&(h+=s)}var x=t.length-3;p=t[x],f=t[x+1],m=t[x+2],(y=0===r?p:f)>=n&&y<=i&&ht(c,p,f,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&ht(c,c[0],c[1],c[2]),c.length&&e.push(c)}function ct(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ut(t,e,n,i,r,o){for(var a=0;a<t.length;a++)lt(t[a],e,n,i,r,o,!1)}function ht(t,e,n,i){t.push(e),t.push(n),t.push(i)}function dt(t,e,n,i,r,o){var a=(o-e)/(i-e);return t.push(o),t.push(n+(r-n)*a),t.push(1),a}function pt(t,e,n,i,r,o){var a=(o-n)/(r-n);return t.push(e+(i-e)*a),t.push(o),t.push(1),a}function ft(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=mt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(mt(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(mt(o.geometry[s][c],e));r.push(l)}n.push(J(o.id,a,r,o.tags))}return n}function mt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function gt(t,e){if(t.transformed)return t;var n,i,r,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(i=0;i<c.length;i+=2)l.geometry.push(_t(c[i],c[i+1],e,o,a,s));else for(i=0;i<c.length;i++){var h=[];for(r=0;r<c[i].length;r+=2)h.push(_t(c[i][r],c[i][r+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function _t(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function yt(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,vt(a,t[s],o,r);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function vt(t,e,n,i){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)bt(a,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)bt(a,r[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var c=r[l];for(s=0;s<c.length;s++)bt(a,c[s],t,n,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function bt(t,e,n,i,r,o){var a=i*i;if(i>0&&e.size<(r?a:i))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=a,t[r-1-i]=s}}(s,o),t.push(s)}}function xt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)tt(n,t.features[i],e,i);else"Feature"===t.type?tt(n,t,e):tt(n,{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,r=at(t,1,-1-n,n,0,-1,2,e),o=at(t,1,1-n,2+n,0,-1,2,e);return(r||o)&&(i=at(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=ft(r,1).concat(i)),o&&(i=i.concat(ft(o,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wt(t,e,n){return 32*((1<<t)*n+e)+t}function Et(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);const r=new h(i.features);let o=g(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(t,e,n,i,r,o,a){for(var s=[t,e,n,i],l=this.options,c=l.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=wt(e,n,i),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=yt(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(n!==Math.floor(o/f)||i!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var m,g,_,y,v,b,x=.5*l.buffer/l.extent,w=.5-x,E=.5+x,M=1+x;m=g=_=y=null,v=at(t,u,n-x,n+E,0,d.minX,d.maxX,l),b=at(t,u,n+w,n+M,0,d.minX,d.maxX,l),t=null,v&&(m=at(v,u,i-x,i+E,1,d.minY,d.maxY,l),g=at(v,u,i+w,i+M,1,d.minY,d.maxY,l),v=null),b&&(_=at(b,u,i-x,i+E,1,d.minY,d.maxY,l),y=at(b,u,i+w,i+M,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*i),s.push(g||[],e+1,2*n,2*i+1),s.push(_||[],e+1,2*n+1,2*i),s.push(y||[],e+1,2*n+1,2*i+1)}}},xt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,o=i.debug;if(t<0||t>24)return null;var a=1<<t,s=wt(t,e=(e%a+a)%a,n);if(this.tiles[s])return gt(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,c=t,u=e,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[wt(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?gt(this.tiles[s],r):null):null};class Mt extends t.VectorTileWorkerSource{constructor(t,e,n,i,r){super(t,e,n,i,Et),r&&(this.loadGeoJSON=r)}loadData(e,n){const i=e&&e.request,r=i&&i.collectResourceTiming;this.loadGeoJSON(e,((o,s)=>{if(o||!s)return n(o);if("object"!=typeof s)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{a(s,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const i=s.features.filter((t=>n.value.evaluate({zoom:0},t)));s={type:"FeatureCollection",features:i}}this._geoJSONIndex=e.cluster?new B(function({superclusterOptions:e,clusterProperties:n}){if(!n||!e)return e;const i={},r={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const e of s){const[o,a]=n[e],s=t.createExpression(a),l=t.createExpression("string"==typeof o?[o,["accumulated"],["get",e]]:o);t.assert_1("success"===s.result),t.assert_1("success"===l.result),i[e]=s.value,r[e]=l.value}return e.map=t=>{a.properties=t;const e={};for(const t of s)e[t]=i[t].evaluate(o,a);return e},e.reduce=(t,e)=>{a.properties=e;for(const e of s)o.accumulated=t[e],t[e]=r[e].evaluate(o,a)},e}(e)).load(s.features):function(t,e){return new xt(t,e)}(s,e.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(r){const n=t.getPerformanceMeasurement(i);n&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(t,e){const n=this.loaded,i=t.uid;return n&&n[i]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class Tt{constructor(e){t.PerformanceUtils.measure("workerEvaluateScript"),this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:Mt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded=n;for(const i in this.workerSources[e]){const r=this.workerSources[e][i];for(const e in r)r[e]instanceof t.VectorTileWorkerSource&&(r[e].isSpriteLoaded=n,r[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const n in this.workerSources[t]){const i=this.workerSources[t][n];for(const t in i)i[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,i){t.assert_1(n.type);const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(e,n.type,n.source).loadTile(r,i)}loadDEMTile(e,n,i){const r=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(r,i)}reloadTile(e,n,i){t.assert_1(n.type);const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(e,n.type,n.source).reloadTile(r,i)}abortTile(e,n,i){t.assert_1(n.type),this.getWorkerSource(e,n.type,n.source).abortTile(n,i)}removeTile(e,n,i){t.assert_1(n.type),this.getWorkerSource(e,n.type,n.source).removeTile(n,i)}removeSource(e,n,i){if(t.assert_1(n.type),t.assert_1(n.source),!this.workerSources[e]||!this.workerSources[e][n.type]||!this.workerSources[e][n.type][n.source])return;const r=this.workerSources[e][n.type][n.source];delete this.workerSources[e][n.type][n.source],void 0!==r.removeSource?r.removeSource(n,i):i()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,i){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();i(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),n)}}catch(t){i(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const i={send:(e,n,i,r,o,a)=>{this.actor.send(e,n,i,t,o,a)},scheduler:this.actor.scheduler};this.workerSources[t][e][n]=new this.workerSourceTypes[e](i,this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded)}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new o),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,n,i){i(void 0,t.PerformanceUtils.getWorkerPerformanceMetrics())}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Tt(self)),Tt})),r(0,(function(t){var e=n;function n(t){return!function(t){return"undefined"!=typeof window&&"undefined"!=typeof document?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(e=t&&t.failIfMajorPerformanceCaveat,void 0===i[e]&&(i[e]=function(t){var e,i=function(t){var e=document.createElement("canvas"),i=Object.create(n.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,e.getContext("webgl",i)||e.getContext("experimental-webgl",i)}(t);if(!i)return!1;try{e=i.createShader(i.VERTEX_SHADER)}catch(t){return!1}return!(!e||i.isContextLost())&&(i.shaderSource(e,"void main() {}"),i.compileShader(e),!0===i.getShaderParameter(e,i.COMPILE_STATUS))}(e)),i[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var e}(t)}var i={};n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const r={create:function(e,n,i){const r=t.window.document.createElement(e);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},o=t.window.document&&t.window.document.documentElement.style,a=o&&void 0!==o.userSelect?"userSelect":"WebkitUserSelect";let s;r.disableDrag=function(){o&&a&&(s=o[a],o[a]="none")},r.enableDrag=function(){o&&a&&(o[a]=s)},r.setTransform=function(t,e){t.style.transform=e};let l=!1;try{const e=Object.defineProperty({},"passive",{get(){l=!0}});t.window.addEventListener("test",e,e),t.window.removeEventListener("test",e,e)}catch(t){l=!1}r.addEventListener=function(t,e,n,i={}){"passive"in i&&l?t.addEventListener(e,n,i):t.addEventListener(e,n,i.capture)},r.removeEventListener=function(t,e,n,i={}){"passive"in i&&l?t.removeEventListener(e,n,i):t.removeEventListener(e,n,i.capture)};const c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function u(e,n,i){const r=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.pointGeometry((i.clientX-n.left)*r,(i.clientY-n.top)*r)}function h(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}r.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",c,!0)}),0)},r.mousePos=function(t,e){const n=t.getBoundingClientRect();return u(t,n,e)},r.touchPos=function(t,e){const n=t.getBoundingClientRect(),i=[];for(let r=0;r<e.length;r++)i.push(u(t,n,e[r]));return i},r.mouseButton=function(e){return t.assert_1("mousedown"===e.type||"mouseup"===e.type),void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},r.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};class d extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(e,n){t.assert_1(!this.images[e]),this._validate(e,n)&&(this.images[e]=n)}_validate(e,n){let i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),i=!1),i}_validateStretch(t,e){if(!t)return!0;let n=0;for(const i of t){if(i[0]<n||i[1]<i[0]||e<i[1])return!1;n=i[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(e,n){const i=this.images[e];t.assert_1(i),t.assert_1(i.data.width===n.data.width),t.assert_1(i.data.height===n.data.height),n.version=i.version+1,this.images[e]=n,this.updatedImages[e]=!0}removeImage(e){t.assert_1(this.images[e]);const n=this.images[e];delete this.images[e],delete this.patterns[e],n.userImage&&n.userImage.onRemove&&n.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const i={};for(const n of e){this.images[n]||this.fire(new t.Event("styleimagemissing",{id:n}));const e=this.images[n];e?i[n]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,i)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.ImagePosition(n,i);this.patterns[e]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:i}=t.potpack(e),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const e in this.patterns){const{bin:n}=this.patterns[e],i=n.x+1,o=n.y+1,a=this.images[e].data,s=a.width,l=a.height;t.RGBAImage.copy(a,r,{x:0,y:0},{x:i,y:o},{width:s,height:l}),t.RGBAImage.copy(a,r,{x:0,y:l-1},{x:i,y:o-1},{width:s,height:1}),t.RGBAImage.copy(a,r,{x:0,y:0},{x:i,y:o+l},{width:s,height:1}),t.RGBAImage.copy(a,r,{x:s-1,y:0},{x:i-1,y:o},{width:1,height:l}),t.RGBAImage.copy(a,r,{x:0,y:0},{x:i+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.images[n];t.assert_1(e),h(e)&&this.updateImage(n,e)}}}const p=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function([e,n,i]){const r=t.degToRad(n+90),o=t.degToRad(i);return{x:e*Math.cos(r)*Math.sin(o),y:e*Math.sin(r)*Math.sin(o),z:e*Math.cos(o),azimuthal:n,polar:i}}(e.expression.evaluate(n))}interpolate(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i),azimuthal:t.number(e.azimuthal,n.azimuthal,i),polar:t.number(e.polar,n.polar,i)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),f="-transition";class m extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(p),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(t.validateLight,e,n))for(const n in e){const i=e[n];t.endsWith(n,f)?this._transitionable.setTransition(n.slice(0,-f.length),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const g=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)}),_="-transition";class y extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(g),this.set(e),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(e){for(const n in e){const i=e[n];t.endsWith(n,_)?this._transitionable.setTransition(n.slice(0,-_.length),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function v(e,n,i,r){const o=t.smoothstep(45,65,i),[a,s]=b(e,r),l=(t.length(n)-a)/(s-a);let c=1-Math.min(1,Math.exp(-6*l));return c*=c*c,c=Math.min(1,1.00747*c),c*o*e.alpha}function b(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const x=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"])}),w="-transition";class E extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(x),this.set(e),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e,n={}){if(!this._validate(t.validateFog,e,n))for(const n in e){const i=e[n];t.endsWith(n,w)?this._transitionable.setTransition(n.slice(0,-w.length),i):this._transitionable.setValue(n,i)}}getOpacity(e){const n=this.properties&&this.properties.get("color")||1;return t.smoothstep(45,65,e)*n.a}getOpacityAtLatLng(e,n){return function(e,n,i){const r=t.MercatorCoordinate.fromLngLat(n),o=i.elevation?i.elevation.getAtPointOrZero(r):0,a=[r.x,r.y,o];return t.transformMat4(a,a,i.mercatorFogMatrix),v(e,a,i.pitch,i._fov)}(this.state,e,n)}getFovAdjustedRange(t){return b(this.state,t)}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class M{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const i=this.workerPool.acquire(this.id);for(let t=0;t<i.length;t++){const e=i[t],r=new M.Actor(e,n,this.id);r.name=`Worker ${t}`,this.actors.push(r)}t.assert_1(this.actors.length),this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,n,i){t.assert_1(this.actors.length),i=i||function(){},t.asyncAll(this.actors,((t,i)=>{t.send(e,n,i)}),i)}getActor(){return t.assert_1(this.actors.length),this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function T(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}M.Actor=t.Actor;class S{constructor(t,e,n,i){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((t=>i.pointCoordinate3D(t))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(e,n){let i,r;if(e instanceof t.pointGeometry||"number"==typeof e[0]){const o=t.pointGeometry.convert(e);i=[t.pointGeometry.convert(e)],r=n.isPointAboveHorizon(o)}else{const o=t.pointGeometry.convert(e[0]),a=t.pointGeometry.convert(e[1]);i=[o,a],r=t.polygonizeBounds(o,a).every((t=>n.isPointAboveHorizon(t)))}return new S(i,n.getCameraPoint(),r,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],r=t.polygonizeBounds(n,i,0,!1);return this.cameraPoint.y>i.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<i.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=i.x?r[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(r[3]=this.cameraPoint)),t.bufferConvexPolygon(r,e)}containsTile(e,n,i){const r=e.queryPadding+1,o=i?this._bufferedCameraMercator(r,n).map((t=>e.tileID.getTilePoint(t))):this._bufferedScreenMercator(r,n).map((t=>e.tileID.getTilePoint(t))),a=this.screenGeometryMercator.map((t=>e.tileID.getTileVec3(t))),s=a.map((e=>new t.pointGeometry(e[0],e[1]))),l=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),c=e.tileID.getTileVec3(l),u=a.map((e=>{const n=t.sub(e,e,c);return t.normalize(n,n),new t.Ray(c,n)})),h=T(e,1,n.zoom);if(t.polygonIntersectsBox(o,0,0,t.EXTENT,t.EXTENT))return{queryGeometry:this,tilespaceGeometry:s,tilespaceRays:u,bufferedTilespaceGeometry:o,bufferedTilespaceBounds:(d=t.getBounds(o),d.min.x=t.clamp(d.min.x,0,t.EXTENT),d.min.y=t.clamp(d.min.y,0,t.EXTENT),d.max.x=t.clamp(d.max.x,0,t.EXTENT),d.max.y=t.clamp(d.max.y,0,t.EXTENT),d),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:h};var d}_bufferedScreenMercator(t,e){const n=k(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{const i=this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._screenRaycastCache[n]=i,i}}_bufferedCameraMercator(t,e){const n=k(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{const i=this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._cameraRaycastCache[n]=i,i}}}function k(t){return 100*t|0}function C(e,n,i){const r=function(r,o){if(r)return i(r);if(o){const r=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(r.vectorLayers=o.vector_layers,r.vectorLayerIds=r.vectorLayers.map((t=>t.id))),r.tiles=n.canonicalizeTileset(r,e.url),i(null,r)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.exported.frame((()=>r(null,e)))}class I{constructor(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<a}}class L extends t.Evented{constructor(e,n,i,r){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new I(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t();const e=this.map.style._getSourceCaches(this.id);for(const t of e)t.clearTiles();this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",r,o.bind(this));else if(e.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",r,o.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},r,((t,n)=>{t||!n?o.call(this,t):(r.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",r,o.bind(this),void 0,!0))}),!0);e.request={cancel:n}}function o(i,r){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}}class D extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=C(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new I(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const i=t.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((i,r,o,a)=>{if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a});const i=this.map.painter.context,s=i.gl;e.texture=this.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new t.Texture(i,r,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),i.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let A;class P extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,e,((e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,n){const i=e.actor?"reloadTile":"loadTile";e.actor=this.actor;const r={type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.request=this.actor.send(i,r,((t,r)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(r,this.map.painter,"reloadTile"===i),n(null)))),void 0,"loadTile"===i)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var z=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class N extends t.Evented{constructor(t,e,n,i){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=e}load(e,n){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((i,r)=>{this._loaded=!0,i?this.fire(new t.ErrorEvent(i)):r&&(this.image=t.exported.getImageData(r),e&&(this.coordinates=e),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let n=1/0,i=1/0,r=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y);const a=r-n,s=o-i,l=Math.max(a,s),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),u=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((n+r)/2*u),Math.floor((i+o)/2*u))}(n),this.minzoom=this.maxzoom=this.tileID.z;const i=n.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const R={vector:L,raster:D,"raster-dem":class extends D{constructor(e,n,i,r){super(e,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o,a,s){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s});const n=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==A&&(A=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),A),i=1-(o.width-t.prevPowerOfTwo(o.width))/2;i<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=n?o:t.exported.getImageData(o,i),c={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:i};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",c,r.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:P,video:class extends N{constructor(t,e,n,i){super(t,e,n,i),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:N,canvas:class extends N{constructor(e,n,i,r){super(e,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,i=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,z.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,i.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}},O=function(e,n,i,r){const o=new R[n.type](e,n,i,r);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function F(e,n){const i=t.identity([]);return t.scale(i,i,[.5*e.width,.5*-e.height,1]),t.translate(i,i,[1,-1,0]),t.multiply(i,i,e.calculateProjMatrix(n.toUnwrapped()))}function B(t,e,n,i,r,o,a,s=!1){const l=t.tilesIn(i,a,s);l.sort(Y);const c=[];for(const i of l)c.push({wrappedTileID:i.tile.tileID.wrapped().key,queryResults:i.tile.queryRenderedFeatures(e,n,t._state,i,r,o,F(t.transform,i.tile.tileID),s)});const u=function(t){const e={},n={};for(const i of t){const t=i.queryResults,r=i.wrappedTileID,o=n[r]=n[r]||{};for(const n in t){const i=t[n],r=o[n]=o[n]||{},a=e[n]=e[n]||[];for(const t of i)r[t.featureIndex]||(r[t.featureIndex]=!0,a.push(t))}}return e}(c);for(const e in u)u[e].forEach((e=>{const n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return u}function U(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),i=[],r={};for(let t=0;t<n.length;t++){const o=n[t],a=o.tileID.canonical.key;r[a]||(r[a]=!0,o.querySourceFeatures(i,e))}return i}function Y(t,e){const n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function j(){return null!=yr.workerClass?new yr.workerClass:new t.window.Worker(yr.workerUrl)}const V="mapboxgl_preloaded_worker_pool";class G{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<G.workerCount;)this.workers.push(new j);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[V]}numActive(){return Object.keys(this.active).length}}let q;function H(){return q||(q=new G),q}function $(e,n){const i={};for(const t in e)"ref"!==t&&(i[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(i[t]=n[t])})),i}function Z(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=$(t[n],e[t[n].ref]));return t}G.workerCount=2;const W={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function X(t,e,n){n.push({command:W.addSource,args:[t,e[t]]})}function K(t,e,n){e.push({command:W.removeSource,args:[t]}),n[t]=!0}function J(t,e,n,i){K(t,n,i),X(t,e,n)}function Q(e,n,i){let r;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[i][r],n[i][r]))return!1;return!0}function tt(e,n,i,r,o,a){let s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||i.push({command:a,args:[r,s,n[s],o]}))}function et(t){return t.id}function nt(t,e){return t[e.id]=e,t}function it(e,n){if(!e)return[{command:W.setStyle,args:[n]}];let i=[];try{if(!t.deepEqual(e.version,n.version))return[{command:W.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||i.push({command:W.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||i.push({command:W.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||i.push({command:W.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||i.push({command:W.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||i.push({command:W.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||i.push({command:W.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||i.push({command:W.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||i.push({command:W.setLight,args:[n.light]}),t.deepEqual(e.fog,n.fog)||i.push({command:W.setFog,args:[n.fog]});const r={},o=[];!function(e,n,i,r){let o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||K(o,i,r));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Q(e,n,o)?i.push({command:W.setGeoJSONSourceData,args:[o,n[o].data]}):J(o,n,i,r)):X(o,n,i))}(e.sources,n.sources,o,r);const a=[];e.layers&&e.layers.forEach((t=>{r[t.source]?i.push({command:W.removeLayer,args:[t.id]}):a.push(t)}));let s=e.terrain;s&&r[s.source]&&(i.push({command:W.setTerrain,args:[void 0]}),s=void 0),i=i.concat(o),t.deepEqual(s,n.terrain)||i.push({command:W.setTerrain,args:[n.terrain]}),function(e,n,i){n=n||[];const r=(e=e||[]).map(et),o=n.map(et),a=e.reduce(nt,{}),s=n.reduce(nt,{}),l=r.slice(),c=Object.create(null);let u,h,d,p,f,m,g;for(u=0,h=0;u<r.length;u++)d=r[u],s.hasOwnProperty(d)?h++:(i.push({command:W.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(i.push({command:W.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],i.push({command:W.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],p=a[d],f=s[d],!c[d]&&!t.deepEqual(p,f))if(t.deepEqual(p.source,f.source)&&t.deepEqual(p["source-layer"],f["source-layer"])&&t.deepEqual(p.type,f.type)){for(g in tt(p.layout,f.layout,i,d,null,W.setLayoutProperty),tt(p.paint,f.paint,i,d,null,W.setPaintProperty),t.deepEqual(p.filter,f.filter)||i.push({command:W.setFilter,args:[d,f.filter]}),t.deepEqual(p.minzoom,f.minzoom)&&t.deepEqual(p.maxzoom,f.maxzoom)||i.push({command:W.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?tt(p[g],f[g],i,d,g.slice(6),W.setPaintProperty):t.deepEqual(p[g],f[g])||i.push({command:W.setLayerProperty,args:[d,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?tt(p[g],f[g],i,d,g.slice(6),W.setPaintProperty):t.deepEqual(p[g],f[g])||i.push({command:W.setLayerProperty,args:[d,g,f[g]]}))}else i.push({command:W.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],i.push({command:W.addLayer,args:[f,m]})}(a,n.layers,i)}catch(t){console.warn("Unable to compute style diff:",t),i=[{command:W.setStyle,args:[n]}]}return i}class rt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(t.assert_1(this.points.length>0),1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,i=this._distances[n];const r=e*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const o=n-1,a=this._distances[o],s=i-a,l=s>0?(r-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class ot{constructor(t,e,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let t=0;t<this.xCellCount*this.yCellCount;t++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)}_insertBoxCell(t,e,n,i,r,o){this.boxCells[r].push(o)}_insertCircleCell(t,e,n,i,r,o){this.circleCells[r].push(o)}_query(t,e,n,i,r,o){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];const a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],i=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-i,y1:n-i,x2:e+i,y2:n+i})}return o?a.filter(o):a}{const s={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,n,i,this._queryCell,a,s,o),r?a.length>0:a}}_queryCircle(t,e,n,i,r){const o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!i&&[];const c=[],u={hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,l,this._queryCellCircle,c,u,r),i?c.length>0:c}query(t,e,n,i,r){return this._query(t,e,n,i,!1,r)}hitTest(t,e,n,i,r){return this._query(t,e,n,i,!0,r)}hitTestCircle(t,e,n,i){return this._queryCircle(t,e,n,!0,i)}_queryCell(t,e,n,i,r,o,a,s){const l=a.seenUids,c=this.boxCells[r];if(null!==c){const r=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(t<=r[c+2]&&e<=r[c+3]&&n>=r[c+0]&&i>=r[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:r[c],y1:r[c+1],x2:r[c+2],y2:r[c+3]})}}}const u=this.circleCells[r];if(null!==u){const r=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(r[u],r[u+1],r[u+2],t,e,n,i)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const t=r[u],e=r[u+1],n=r[u+2];o.push({key:this.circleKeys[c],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,i,r,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[r];if(null!==u){const t=this.bboxes;for(const e of u)if(!c.box[e]){c.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[r];if(null!==h){const t=this.circles;for(const e of h)if(!c.circle[e]){c.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,n,i,r,o,a,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++){const c=this.xCellCount*l+d;if(r.call(this,t,e,n,i,c,o,a,s))return}}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,i,r,o){const a=i-t,s=r-e,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,n,i,r,o,a){const s=(o-i)/2,l=Math.abs(t-(i+s));if(l>s+n)return!1;const c=(a-r)/2,u=Math.abs(e-(r+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}const at=0,st=1,lt=2,ct=Math.tan(85*Math.PI/180);function ut(e,n,i,r,o){const a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),i||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function ht(e,n,i,r,o){if(n){const n=t.clone(e);return t.scale(n,n,[o,o,1]),i||t.rotateZ(n,n,-r.angle),n}return r.glCoordMatrix}function dt(e,n,i=0){const r=[e.x,e.y,i,1];i?t.transformMat4$1(r,r,n):Et(r,r,n);const o=r[3];return{point:new t.pointGeometry(r[0]/o,r[1]/o),signedDistanceFromCamera:o}}function pt(t,e){return Math.min(.5+t/e*.5,1.5)}function ft(t,e){const n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function mt(e,n,i,r,o,a,s,l,c){const u=r?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(u,i.transform.zoom),d=[256/i.width*2+1,256/i.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();const f=e.lineVertexArray,m=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=i.transform.width/i.transform.height;let _=!1;for(let r=0;r<m.length;r++){const y=m.get(r);if(y.writingMode!==t.WritingMode.vertical||_||0!==r&&m.get(r-1).writingMode===t.WritingMode.horizontal||(_=!0),y.hidden||y.writingMode===t.WritingMode.vertical&&!_){wt(y.numGlyphs,p);continue}_=!1;const v=c?c({x:y.anchorX,y:y.anchorY}):0,b=[y.anchorX,y.anchorY,v,1];if(t.transformMat4$1(b,b,n),!ft(b,d)){wt(y.numGlyphs,p);continue}const x=b[3],w=pt(i.transform.cameraToCenterDistance,x),E=t.evaluateSizeForFeature(u,h,y),M=s?E/w:E*w,T=new t.pointGeometry(y.anchorX,y.anchorY),S=dt(T,o,v);if(S.signedDistanceFromCamera<=0){wt(y.numGlyphs,p);continue}const k=S.point;let C={};const I=s?null:c,L=yt(y,M,!1,l,n,o,a,e.glyphOffsetArray,f,p,k,T,C,g,I);_=L.useVertical,I&&L.needsFlipping&&(C={}),(L.notEnoughRoom||_||L.needsFlipping&&yt(y,M,!0,l,n,o,a,e.glyphOffsetArray,f,p,k,T,C,g,I).notEnoughRoom)&&wt(y.numGlyphs,p)}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function gt(t,e,n,i,r,o,a,s,l,c,u,h,d){const p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),_=e.getoffsetX(p-1),y=bt(t*g,n,i,r,o,a,s.segment,f,m,l,c,u,h,d,!0);if(!y)return null;const v=bt(t*_,n,i,r,o,a,s.segment,f,m,l,c,u,h,d,!0);return v?{first:y,last:v}:null}function _t(e,n,i,r){return e.writingMode===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:e.writingMode===t.WritingMode.vertical?n.y<i.y?{needsFlipping:!0}:null:e.flipState!==at&&function(t,e,n){const i=e.y-t.y,r=(e.x-t.x)*n;return 0===r||Math.abs(i/r)>ct}(n,i,r)?e.flipState===st?{needsFlipping:!0}:null:n.x>i.x?{needsFlipping:!0}:null}function yt(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=n/24,_=e.lineOffsetX*g,y=e.lineOffsetY*g;let v;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,u=gt(g,l,_,y,i,h,d,e,c,a,p,m);if(!u)return{notEnoughRoom:!0};const b=dt(u.first.point,s).point,x=dt(u.last.point,s).point;if(r&&!i){const t=_t(e,b,x,f);if(e.flipState=t&&t.needsFlipping?st:lt,t)return t}v=[u.first];for(let r=e.glyphStartIndex+1;r<t-1;r++)v.push(bt(g*l.getoffsetX(r),_,y,i,h,d,e.segment,n,o,c,a,p,m));v.push(u.last)}else{if(r&&!i){const n=dt(d,o).point,i=e.lineStartIndex+e.segment+1,r=new t.pointGeometry(c.getx(i),c.gety(i)),a=dt(r,o),s=_t(e,n,a.signedDistanceFromCamera>0?a.point:vt(d,r,n,1,o),f);if(e.flipState=s&&s.needsFlipping?st:lt,s)return s}const n=bt(g*l.getoffsetX(e.glyphStartIndex),_,y,i,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,p,m);if(!n)return{notEnoughRoom:!0};v=[n]}for(const e of v)t.addDynamicAttributes(u,e.point,e.angle);return{}}function vt(t,e,n,i,r,o){const a=t.add(t.sub(e)._unit()),s=dt(a,r,o?o(a):0).point,l=n.sub(s);return n.add(l._mult(i/l.mag()))}function bt(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=r?e-n:e+n;let _=g>0?1:-1,y=0;r&&(_*=-1,y=Math.PI),_<0&&(y+=Math.PI);let v=_>0?l+s:l+s+1,b=o,x=o,w=0,E=0;const M=Math.abs(g),T=[],S=[];let k=a;const C=()=>{const e=v-_;return 0===w?a:new t.pointGeometry(u.getx(e),u.gety(e))},I=()=>vt(C(),k,x,M-w+1,h,p);for(;w+E<=M;){if(v+=_,v<l||v>=c)return null;if(x=b,T.push(b),f&&S.push(k||C()),b=d[v],void 0===b){k=new t.pointGeometry(u.getx(v),u.gety(v));const e=dt(k,h,p?p(k):0);b=e.signedDistanceFromCamera>0?d[v]=e.point:I()}else k=null;w+=E,E=x.dist(b)}m&&p&&(k=k||new t.pointGeometry(u.getx(v),u.gety(v)),d[v]=b=void 0===d[v]?b:I(),E=x.dist(b));const L=(M-w)/E,D=b.sub(x),A=D.mult(L)._add(x);i&&A._add(D._unit()._perp()._mult(i*_));const P=y+Math.atan2(b.y-x.y,b.x-x.x);if(T.push(A),f){k=k||new t.pointGeometry(u.getx(v),u.gety(v));const e=S.length>0?S[S.length-1]:k;S.push(function(e,n,i){const r=1-i;return new t.pointGeometry(e.x*r+n.x*i,e.y*r+n.y*i)}(e,k,L))}return{point:A,angle:P,path:T,tilePath:S}}const xt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wt(t,e){for(let n=0;n<t;n++){const t=e.length;e.resize(t+4),e.float32.set(xt,3*t)}}function Et(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}const Mt=100;class Tt{constructor(t,e,n=new ot(t.width+200,t.height+200,25),i=new ot(t.width+200,t.height+200,25)){this.transform=t,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Mt,this.screenBottomBoundary=t.height+Mt,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(e,n,i,r,o,a,s){t.assert_1(!this.transform.elevation||void 0!==n.elevation);const l=this.projectAndGetPerspectiveRatio(a,n.anchorPointX,n.anchorPointY,n.elevation,n.tileID),c=o*l.perspectiveRatio,u=(n.x1*e+i.x-n.padding)*c+l.point.x,h=(n.y1*e+i.y-n.padding)*c+l.point.y,d=(n.x2*e+i.x+n.padding)*c+l.point.x,p=(n.y2*e+i.y+n.padding)*c+l.point.y,f=l.perspectiveRatio<=.55||l.aboveHorizon;return!this.isInsideGrid(u,h,d,p)||!r&&this.grid.hitTest(u,h,d,p,s)||f?{box:[],offscreen:!1}:{box:[u,h,d,p],offscreen:this.isOffscreen(u,h,d,p)}}placeCollisionCircles(e,n,i,r,o,a,s,l,c,u,h,d,p,f){const m=[],g=this.transform.elevation,_=g?t=>g.getAtTileOffset(f,t.x,t.y):t=>0,y=new t.pointGeometry(n.anchorX,n.anchorY),v=_(y),b=this.projectAndGetPerspectiveRatio(a,y.x,y.y,v,f),{perspectiveRatio:x}=b,w=(u?o/x:o*x)/t.ONE_EM,E=dt(y,s,v).point,M=n.lineOffsetX*w,T=n.lineOffsetY*w,S=b.signedDistanceFromCamera>0?gt(w,r,M,T,!1,E,y,n,i,s,{},g&&!u?_:null,u&&!!g):null;let k=!1,C=!1,I=!0;if(S&&!b.aboveHorizon){const n=.5*d*x+p,i=new t.pointGeometry(-100,-100),r=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new rt,a=S.first,s=S.last;let f=[];for(let t=a.path.length-1;t>=1;t--)f.push(a.path[t]);for(let t=1;t<s.path.length;t++)f.push(s.path[t]);t.assert_1(f.length>=2);const y=2.5*n;if(l){t.assert_1(u);const e=g?f.map(((t,e)=>{const n=_(e<a.path.length-1?a.tilePath[a.path.length-1-e]:s.tilePath[e-a.path.length+2]);return dt(t,l,n)})):f.map((t=>dt(t,l)));f=e.some((t=>t.signedDistanceFromCamera<=0))?[]:e.map((t=>t.point))}let v=[];if(f.length>0){const e=f[0].clone(),n=f[0].clone();for(let t=1;t<f.length;t++)e.x=Math.min(e.x,f[t].x),e.y=Math.min(e.y,f[t].y),n.x=Math.max(n.x,f[t].x),n.y=Math.max(n.y,f[t].y);v=e.x>=i.x&&n.x<=r.x&&e.y>=i.y&&n.y<=r.y?[f]:n.x<i.x||e.x>r.x||n.y<i.y||e.y>r.y?[]:t.clipLine([f],i.x,i.y,r.x,r.y)}for(const i of v){t.assert_1(i.length>0),o.reset(i,.25*n);let r=0;r=o.length<=.5*n?1:Math.ceil(o.paddedLength/y)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),a=o.lerp(i),s=a.x+Mt,l=a.y+Mt;m.push(s,l,n,0);const u=s-n,d=l-n,p=s+n,f=l+n;if(I=I&&this.isOffscreen(u,d,p,f),C=C||this.isInsideGrid(u,d,p,f),!e&&this.grid.hitTestCircle(s,l,n,h)&&(k=!0,!c))return{circles:[],offscreen:!1,collisionDetected:k}}}}return{circles:!c&&k||!C?[]:m,offscreen:I,collisionDetected:k}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,o=-1/0,a=-1/0;for(const s of e){const e=new t.pointGeometry(s.x+Mt,s.y+Mt);i=Math.min(i,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a)),l={},c={};for(const e of s){const i=e.key;if(void 0===l[i.bucketInstanceId]&&(l[i.bucketInstanceId]={}),l[i.bucketInstanceId][i.featureIndex])continue;const r=[new t.pointGeometry(e.x1,e.y1),new t.pointGeometry(e.x2,e.y1),new t.pointGeometry(e.x2,e.y2),new t.pointGeometry(e.x1,e.y2)];t.polygonIntersectsPolygon(n,r)&&(l[i.bucketInstanceId][i.featureIndex]=!0,void 0===c[i.bucketInstanceId]&&(c[i.bucketInstanceId]=[]),c[i.bucketInstanceId].push(i.featureIndex))}return c}insertCollisionBox(t,e,n,i,r){const o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};(e?this.ignoredGrid:this.grid).insert(o,t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,i,r){const o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};for(let e=0;e<t.length;e+=4)o.insertCircle(a,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,n,i,r,o){const a=[n,i,r||0,1];let s=!1;if(r||this.transform.pitch>0){t.transformMat4$1(a,a,e);let l=!1;this.fogState&&o&&(l=function(e,n,i,r,o,a){const s=a.calculateFogTileMatrix(o),l=[n,i,r];return t.transformMat4(l,l,s),v(e,l,a.pitch,a._fov)}(this.fogState,n,i,r||0,o.toUnwrapped(),this.transform)>.9),s=a[2]>a[3]||l}else Et(a,a,e);return{point:new t.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+Mt,(-a[1]/a[3]+1)/2*this.transform.height+Mt),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5),signedDistanceFromCamera:a[3],aboveHorizon:s}}isOffscreen(t,e,n,i){return n<Mt||t>=this.screenRightBoundary||i<Mt||e>this.screenBottomBoundary}isInsideGrid(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}class St{constructor(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class kt{constructor(t,e,n,i,r){this.text=new St(t?t.text:null,e,n,r),this.icon=new St(t?t.icon:null,e,i,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ct{constructor(t,e,n){this.text=t,this.icon=e,this.skipFade=n}}class It{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class Lt{constructor(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class Dt{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function At(e,n,i,r,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*n,c=-(s-.5)*i,u=t.evaluateVariableOffset(e,r);return new t.pointGeometry(l+u[0]*o,c+u[1]*o)}function Pt(e,n,i,r,o){const a=new t.pointGeometry(e,n);return i&&a._rotate(r?o:-o),a}class zt{constructor(t,e,n,i,r){this.transform=t.clone(),this.collisionIndex=new Tt(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new Dt(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,i,r){const o=i.getBucket(n),a=i.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=i.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/t.EXTENT,h=this.transform.calculateProjMatrix(i.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),f=T(i,1,this.transform.zoom),m=ut(h,d,p,this.transform,f);let g=null;if(d){const e=ht(h,d,p,this.transform,f);g=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Lt(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);const _={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=t;e.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:_})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:_})}attemptAnchorPlacement(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y){const v=[d.textOffset0,d.textOffset1],b=At(e,i,r,v,o),x=this.collisionIndex.placeCollisionBox(o,n,Pt(b.x,b.y,a,s,this.transform.angle),h,l,c,u.predicate);if((!g||0!==this.collisionIndex.placeCollisionBox(f.getSymbolInstanceIconSize(y,this.transform.zoom,p),g,Pt(b.x,b.y,a,s,this.transform.angle),h,l,c,u.predicate).box.length)&&x.box.length>0){let n;return this.prevPlacement&&this.prevPlacement.variableOffsets[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID].text&&(n=this.prevPlacement.variableOffsets[d.crossTileID].anchor),t.assert_1(0!==d.crossTileID),this.variableOffsets[d.crossTileID]={textOffset:v,width:i,height:r,anchor:e,textScale:o,prevAnchor:n},this.markUsedJustification(f,e,d,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,d),this.placedOrientations[d.crossTileID]=m),{shift:b,placedGlyphBoxes:x}}}placeLayerBucketPart(e,n,i){const{bucket:r,layout:o,posMatrix:a,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:p,collisionGroup:f}=e.parameters,m=o.get("text-optional"),g=o.get("icon-optional"),_=o.get("text-allow-overlap"),y=o.get("icon-allow-overlap"),v="map"===o.get("text-rotation-alignment"),b="map"===o.get("text-pitch-alignment"),x="none"!==o.get("icon-text-fit"),w="viewport-y"===o.get("symbol-z-order"),E=_&&(y||!r.hasIconData()||g),M=y&&(_||!r.hasTextData()||m);!r.collisionArrays&&h&&r.deserializeCollisionBoxes(h),i&&r.updateCollisionDebugBuffers(this.transform.zoom,h);const T=(e,h,w)=>{if(n[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new Ct(!1,!1,!1));let T=!1,S=!1,k=!0,C=null,I={box:null,offscreen:null},L={box:null,offscreen:null},D=null,A=null,P=null,z=0,N=0,R=0;w.textFeatureIndex?z=w.textFeatureIndex:e.useRuntimeCollisionCircles&&(z=e.featureIndex),w.verticalTextFeatureIndex&&(N=w.verticalTextFeatureIndex);const O=t=>{t.tileID=this.retainedQueryData[r.bucketInstanceId].tileID,(this.transform.elevation||t.elevation)&&(t.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[r.bucketInstanceId].tileID,t.anchorPointX,t.anchorPointY):0)},F=w.textBox;if(F){O(F);const n=n=>{let i=t.WritingMode.horizontal;if(r.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,i=t,this.markUsedOrientation(r,i,e))}return i},i=(n,i)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&w.verticalTextBox){for(const e of r.writingModes)if(e===t.WritingMode.vertical?(I=i(),L=I):I=n(),I&&I.box&&I.box.length)break}else I=n()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];s.indexOf(t.anchor)>0&&(s=s.filter((e=>e!==t.anchor)),s.unshift(t.anchor))}const l=(t,n,i)=>{const o=r.getSymbolInstanceTextSize(d,e,this.transform.zoom,h),l=(t.x2-t.x1)*o+2*t.padding,u=(t.y2-t.y1)*o+2*t.padding,m=x&&!y?n:null;m&&O(m);let g={box:[],offscreen:!1};const w=_?2*s.length:s.length;for(let n=0;n<w;++n){const _=s[n%s.length],y=n>=s.length,x=this.attemptAnchorPlacement(_,t,l,u,o,v,b,c,a,f,y,e,h,r,i,m,d,p);if(x&&(g=x.placedGlyphBoxes,g&&g.box&&g.box.length)){T=!0,C=x.shift;break}}return g};i((()=>l(F,w.iconBox,t.WritingMode.horizontal)),(()=>{const n=w.verticalTextBox;n&&O(n);const i=I&&I.box&&I.box.length;return r.allowVerticalPlacement&&!i&&e.numVerticalGlyphVertices>0&&n?l(n,w.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),I&&(T=I.box,k=I.offscreen);const u=n(I&&I.box);if(!T&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,u))}}else{const o=(n,i)=>{const o=r.getSymbolInstanceTextSize(d,e,this.transform.zoom,h),s=this.collisionIndex.placeCollisionBox(o,n,new t.pointGeometry(0,0),_,c,a,f.predicate);return s&&s.box&&s.box.length&&(this.markUsedOrientation(r,i,e),this.placedOrientations[e.crossTileID]=i),s};i((()=>o(F,t.WritingMode.horizontal)),(()=>{const n=w.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?(O(n),o(n,t.WritingMode.vertical)):{box:null,offscreen:null}})),n(I&&I.box&&I.box.length)}}if(D=I,T=D&&D.box&&D.box.length>0,k=D&&D.offscreen,e.useRuntimeCollisionCircles){const n=e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex,c=r.text.placedSymbolArray.get(n),u=t.evaluateSizeForFeature(r.textSizeData,d,c),h=o.get("text-padding"),p=e.collisionCircleDiameter;A=this.collisionIndex.placeCollisionCircles(_,c,r.lineVertexArray,r.glyphOffsetArray,u,a,s,l,i,b,f.predicate,p,h,this.retainedQueryData[r.bucketInstanceId].tileID),t.assert_1(!A.circles.length||!A.collisionDetected||i),T=_||A.circles.length>0&&!A.collisionDetected,k=k&&A.offscreen}if(w.iconFeatureIndex&&(R=w.iconFeatureIndex),w.iconBox){const e=e=>{O(e);const n=x&&C?Pt(C.x,C.y,v,b,this.transform.angle):new t.pointGeometry(0,0),i=r.getSymbolInstanceIconSize(p,this.transform.zoom,h);return this.collisionIndex.placeCollisionBox(i,e,n,y,c,a,f.predicate)};L&&L.box&&L.box.length&&w.verticalIconBox?(P=e(w.verticalIconBox),S=P.box.length>0):(P=e(w.iconBox),S=P.box.length>0),k=k&&P.offscreen}const B=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,U=g||0===e.numIconVertices;if(B||U?U?B||(S=S&&T):T=S&&T:S=T=S&&T,T&&D&&D.box&&(L&&L.box&&N?this.collisionIndex.insertCollisionBox(D.box,o.get("text-ignore-placement"),r.bucketInstanceId,N,f.ID):this.collisionIndex.insertCollisionBox(D.box,o.get("text-ignore-placement"),r.bucketInstanceId,z,f.ID)),S&&P&&this.collisionIndex.insertCollisionBox(P.box,o.get("icon-ignore-placement"),r.bucketInstanceId,R,f.ID),A&&(T&&this.collisionIndex.insertCollisionCircles(A.circles,o.get("text-ignore-placement"),r.bucketInstanceId,z,f.ID),i)){const t=r.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new It);for(let t=0;t<A.circles.length;t+=4)e.circles.push(A.circles[t+0]),e.circles.push(A.circles[t+1]),e.circles.push(A.circles[t+2]),e.circles.push(A.collisionDetected?1:0)}t.assert_1(0!==e.crossTileID),t.assert_1(0!==r.bucketInstanceId),this.placements[e.crossTileID]=new Ct(T||E,S||M,k||r.justReloaded),n[e.crossTileID]=!0};if(w){t.assert_1(0===e.symbolInstanceStart);const n=r.getSortedSymbolIndexes(this.transform.angle);for(let t=n.length-1;t>=0;--t){const e=n[t];T(r.symbolInstances.get(e),e,r.collisionArrays[e])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)T(r.symbolInstances.get(t),t,r.collisionArrays[t]);if(i&&r.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[r.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1}markUsedJustification(e,n,i,r){const o={left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex};let a;a=r===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:o[t.getAnchorJustification(n)];const s=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];for(const t of s)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=a>=0&&t!==a?0:i.crossTileID)}markUsedOrientation(e,n,i){const r=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const n=this.prevPlacement;let i=!1;this.prevZoomAdjustment=n?n.zoomAdjustment(this.transform.zoom):0;const r=n?n.symbolFadeChange(e):1,o=n?n.opacities:{},a=n?n.variableOffsets:{},s=n?n.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],n=o[t];n?(this.opacities[t]=new kt(n,r,e.text,e.icon),i=i||e.text!==n.text.placed||e.icon!==n.icon.placed):(this.opacities[t]=new kt(null,r,e.text,e.icon,e.skipFade),i=i||e.text||e.icon)}for(const t in o){const e=o[t];if(!this.opacities[t]){const n=new kt(e,r,!1,!1);n.isHidden()||(this.opacities[t]=n,i=i||e.text.placed||e.icon.placed)}}for(const t in a)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=a[t]);for(const t in s)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=s[t]);t.assert_1(!n||void 0!==n.lastPlacementChangeTime),i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=n?n.lastPlacementChangeTime:e)}updateLayerOpacities(t,e){const n={};for(const i of e){const e=i.getBucket(t);e&&i.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,i.collisionBoxArray)}}updateBucketOpacities(e,n,i){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const r=e.layers[0].layout,o=new kt(null,0,!1,!1,!0),a=r.get("text-allow-overlap"),s=r.get("icon-allow-overlap"),l=r.get("text-variable-anchor"),c="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),h="none"!==r.get("icon-text-fit"),d=new kt(null,0,a&&(s||!e.hasIconData()||r.get("icon-optional")),s&&(a||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);const p=(t,e,n)=>{for(let i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)};for(let i=0;i<e.symbolInstances.length;i++){const r=e.symbolInstances.get(i),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:s,crossTileID:f}=r,m=n[f];let g=this.opacities[f];m?g=o:g||(g=d,this.opacities[f]=g),n[f]=!0;const _=a>0||s>0,y=r.numIconVertices>0,v=this.placedOrientations[r.crossTileID],b=v===t.WritingMode.vertical,x=v===t.WritingMode.horizontal||v===t.WritingMode.horizontalOnly;if(_){const t=Vt(g.text),n=b?Gt:t;p(e.text,a,n);const i=x?Gt:t;p(e.text,s,i);const o=g.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=o||b?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=o||x?1:0);const l=this.variableOffsets[r.crossTileID];l&&this.markUsedJustification(e,l.anchor,r,v);const c=this.placedOrientations[r.crossTileID];c&&(this.markUsedJustification(e,"left",r,c),this.markUsedOrientation(e,c,r))}if(y){const t=Vt(g.icon);if(r.placedIconSymbolIndex>=0){const n=b?Gt:t;p(e.icon,r.numIconVertices,n),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=g.icon.isHidden()}if(r.verticalPlacedIconSymbolIndex>=0){const n=x?Gt:t;p(e.icon,r.numVerticalIconVertices,n),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=g.icon.isHidden()}}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[i];if(n){let i=new t.pointGeometry(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[f];e?(i=At(e.anchor,e.width,e.height,e.textOffset,e.textScale),c&&i._rotate(u?this.transform.angle:-this.transform.angle)):t=!1}n.textBox&&Nt(e.textCollisionBox.collisionVertexArray,g.text.placed,!t||b,i.x,i.y),n.verticalTextBox&&Nt(e.textCollisionBox.collisionVertexArray,g.text.placed,!t||x,i.x,i.y)}const r=Boolean(!x&&n.verticalIconBox);n.iconBox&&Nt(e.iconCollisionBox.collisionVertexArray,g.icon.placed,r,h?i.x:0,h?i.y:0),n.verticalIconBox&&Nt(e.iconCollisionBox.collisionVertexArray,g.icon.placed,!r,h?i.x:0,h?i.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),t.assert_1(e.text.opacityVertexArray.length===e.text.layoutVertexArray.length/4),t.assert_1(e.icon.opacityVertexArray.length===e.icon.layoutVertexArray.length/4),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function Nt(t,e,n,i,r){t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0)}const Rt=Math.pow(2,25),Ot=Math.pow(2,24),Ft=Math.pow(2,17),Bt=Math.pow(2,16),Ut=Math.pow(2,9),Yt=Math.pow(2,8),jt=Math.pow(2,1);function Vt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*Rt+e*Ot+n*Ft+e*Bt+n*Ut+e*Yt+n*jt+e}const Gt=0;class qt{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,i,r){const o=this._bucketParts;for(;this._currentTileIndex<t.length;){const n=t[this._currentTileIndex];if(e.getBucketParts(o,i,n,this._sortAcrossTiles),this._currentTileIndex++,r())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;){const t=o[this._currentPartIndex];if(e.placeLayerBucketPart(t,this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0}return!1}}class Ht{constructor(t,e,n,i,r,o,a,s){this.placement=new zt(t,r,o,a,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,n,i){const r=t.exported.now(),o=()=>{const e=t.exported.now()-r;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=r)&&(!t.maxzoom||t.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new qt(t)),this._inProgressLayer.continuePlacement(i[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const $t=512/t.EXTENT/2;class Zt{constructor(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let n=0;n<e.length;n++){const i=e.get(n),r=i.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}}getScaledCoordinates(e,n){const i=n.canonical.z-this.tileID.canonical.z,r=$t/Math.pow(2,i);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}}findMatches(t,e,n){const i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let r=0;r<t.length;r++){const o=t.get(r);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,e);for(const t of a)if(Math.abs(t.coord.x-s.x)<=i&&Math.abs(t.coord.y-s.y)<=i&&!n[t.crossTileID]){n[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class Wt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Xt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const n=this.indexes[t],i={};for(const t in n){const r=n[t];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}this.indexes[t]=i}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const i=this.usedCrossTileIDs[t.overscaledZ];for(const n in this.indexes){const r=this.indexes[n];if(Number(n)>t.overscaledZ)for(const n in r){const o=r[n];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,i)}else{const o=r[t.scaledTo(Number(n)).key];o&&o.findMatches(e.symbolInstances,t,i)}}for(let t=0;t<e.symbolInstances.length;t++){const r=e.symbolInstances.get(t);r.crossTileID||(r.crossTileID=n.generate(),i[r.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Zt(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n in e.indexedSymbolInstances)for(const i of e.indexedSymbolInstances[n])delete this.usedCrossTileIDs[t][i.crossTileID]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e}}class Kt{constructor(){this.layerIndexes={},this.crossTileIDs=new Wt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n){let i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new Xt);let r=!1;const o={};i.handleWrapJump(n);for(const n of e){const e=n.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(n.tileID,e,this.crossTileIDs)&&(r=!0),o[e.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}const Jt=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Qt=t.pick(W,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),te=t.pick(W,["setCenter","setZoom","setBearing","setPitch"]),ee=function(){const e={},n=t.spec.$version;for(const i in t.spec.$root){const r=t.spec.$root[i];if(r.required){let t=null;t="version"===i?n:"array"===r.type?[]:{},null!=t&&(e[i]=t)}}return e}(),ne={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class ie extends t.Evented{constructor(e,n={}){super(),this.map=e,this.dispatcher=new M(H(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.lineAtlas=new t.LineAtlas(256,512),this.crossTileSymbolIndex=new Kt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const i=this;this._rtlTextPluginCallback=ie.registerForPluginStateChange((e=>{const n={pluginStatus:e.pluginStatus,pluginURL:e.pluginURL};i.dispatcher.broadcast("syncRTLPluginState",n,((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in i._sourceCaches){const e=i._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const t in this._layers){const n=this._layers[t];n.source===e.id&&this._validateLayer(n)}}))}loadURL(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,i)}))}loadJSON(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(ee,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&Jt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const i=Z(this.stylesheet.layers);this._order=i.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let e of i)e=t.createStyleLayer(e),e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize(),this._updateLayerCount(e,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new m(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,n,i){let r,o,a;const s=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,a||(a=t,r=e,u())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),((t,e)=>{c=null,a||(a=t,o=e,u())}));function u(){if(a)i(a);else if(r&&o){const e=t.exported.getImageData(o),n={};for(const i in r){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=r[i],f=new t.RGBAImage({width:o,height:a});t.RGBAImage.copy(e,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[i]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p}}i(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const i=e.sourceLayer;i&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${i}" does not exist on source "${n.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?(t.assert_1(this._drapedFirstOrder.length===this._order.length),this._drapedFirstOrder):this._order}isLayerDraped(t){return!!this.terrain&&ne[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const n=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(n.length||i.length)&&this._updateWorkerLayers(n,i);for(const e in this._updatedSources){const n=this._updatedSources[e];t.assert_1("reload"===n||"clear"===n),"reload"===n?this._reloadSource(e):"clear"===n&&this._clearSource(e)}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];i[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const i=this.map.painter;if(i){const t=n.getProgramIds();if(!t)continue;const r=n.getProgramConfiguration(e.zoom);for(const e of t)i.useProgram(e,r)}}for(const e in i){const n=this._sourceCaches[e];i[e]!==n.used&&n.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Jt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=Z(e.layers);const n=it(this.serialize(),e).filter((t=>!(t.command in te)));if(0===n.length)return!1;const i=n.filter((t=>!(t.command in Qt)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((t=>t.command)).join(", ")}.`);return n.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,i={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=O(e,n,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:r.serialize(),sourceId:e})));const o=n=>{const i=(n?"symbol:":"other:")+e,o=this._sourceCaches[i]=new t.SourceCache(i,r,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(void 0===n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const i=this._getSourceCaches(e);for(const e of i)delete this._sourceCaches[e.id],delete this._updatedSources[e.id],e.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e.getSource().id})),e.setEventedParent(null),e.clearTiles();delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,n){this._checkLoaded(),t.assert_1(void 0!==this.getSource(e),"There is no source with this ID");const i=this.getSource(e);t.assert_1("geojson"===i.type),i.setData(n),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}addLayer(e,n,i={}){this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${r}" already exists on this map`)));let o;if("custom"===e.type){if(Jt(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,`layers.${r}`,e,{arrayIndex:-1},i))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[r]&&o.source&&s&&"custom"!==o.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const i=this._order.indexOf(e);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(r,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,i){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(e,n,i={}){this._checkLoaded();const r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,n))return null==n?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,`layers.${r.id}.filter`,n,null,i)||(r.filter=t.clone$1(n),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,n,i,r={}){this._checkLoaded();const o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),i)||(o.setLayoutProperty(n,i,r),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,n){const i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(e,n,i,r={}){this._checkLoaded();const o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),i)||(o.setPaintProperty(n,i,r)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const i=e.source,r=e.sourceLayer,o=this.getSource(i);if(void 0===o)return void this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&r)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!r)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(i);for(const t of s)t.setFeatureState(r,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const i=e.source,r=this.getSource(i);if(void 0===r)return void this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const o=r.type,a="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(i);for(const t of s)t.removeFeatureState(a,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,i=e.sourceLayer,r=this.getSource(n);if(void 0!==r){if("vector"!==r.type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},i=[];for(let r=this._order.length-1;r>=0;r--){const o=this._order[r];if(e(o)){n[o]=r;for(const e of t){const t=e[o];if(t)for(const e of t)i.push(e)}}}i.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=i.length-1;t>=0;t--){const e=i[t].feature;if(n[e.layer.id]<o)break;r.push(e),i.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];r[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),s=S.createFromScreenPoints(e,i);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!r[e]||o.push(B(this._sourceCaches[t],this._layers,this._serializedLayers,s,n,i,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,n,i,r,o,a,s){const l={},c=a.queryRenderedSymbols(r),u=[];for(const t of Object.keys(c).map(Number))u.push(s[t]);u.sort(Y);for(const i of u){const r=i.featureIndex.lookupSymbolFeatures(c[i.bucketInstanceId],n,i.bucketIndex,i.sourceLayerIndex,o.filter,o.layers,o.availableImages,e);for(const e in r){const n=l[e]=l[e]||[],o=r[e];o.sort(((e,n)=>{const r=i.featureSortOrder;if(r){const i=r.indexOf(e.featureIndex),o=r.indexOf(n.featureIndex);return t.assert_1(i>=0),t.assert_1(o>=0),o-i}return n.featureIndex-e.featureIndex}));for(const t of o)n.push(t)}}for(const t in l)l[t].forEach((n=>{const r=n.feature,o=e[t],a=i(o).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a}));return l}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const i=this._getSourceCaches(e);let r=[];for(const t of i)r=r.concat(U(t,n));return r}addSourceType(t,e,n){return ie.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(ie.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const i=this.light.getLight();let r=!1;for(const n in e)if(!t.deepEqual(e[n],i[n])){r=!0;break}if(!r)return;const o={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof e.source){const n="terrain-dem-src";this.addSource(n,e.source),e=t.clone$1(e),e=t.extend(e,{source:n})}if(!this._validate(t.validateStyle.terrain,"terrain",e)){if(this.terrain){const n=this.terrain,i=n.get();for(const r in e)if(!t.deepEqual(e[r],i[r])){n.set(e),this.stylesheet.terrain=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i);break}}else this._createTerrain(e);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(e){const n=this.fog=new E(e);this.stylesheet.fog=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,i=n.get();for(const r in e)if(!t.deepEqual(e[r],i[r])){n.set(e),this.stylesheet.fog=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i);break}}else this._createFog(e);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(e){const n=this.terrain=new y(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_validate(e,n,i,r,o={}){return(!o||!1!==o.validate)&&Jt(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const t of e)t.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const t of e)t.resume(),t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,i,r,o=!1){let a=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const i=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng);a=a||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===i,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new Ht(e,this._order,o,n,i,r,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const i=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};i(this._otherSourceCaches[e.source]),i(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,i){return t.makeRequest(n,i)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}ie.getSourceType=function(t){return R[t]},ie.setSourceType=function(t,e){R[t]=e},ie.registerForPluginStateChange=t.registerForPluginStateChange;var re="// IMPORTANT:\n// This prelude is injected in both vertex and fragment shader be wary\n// of precision qualifiers as vertex and fragment precision may differ\n\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n\n#ifdef FOG\n\nuniform mediump vec4 u_fog_color;\nuniform mediump vec2 u_fog_range;\nuniform mediump float u_fog_horizon_blend;\n\nvarying vec3 v_fog_pos;\n\nfloat fog_range(float depth) {\n    // Map [near, far] to [0, 1] without clamping\n    return (depth - u_fog_range[0]) / (u_fog_range[1] - u_fog_range[0]);\n}\n\n// Assumes z up and camera_dir *normalized* (to avoid computing\n// its length multiple times for different functions).\nfloat fog_horizon_blending(vec3 camera_dir) {\n    float t = max(0.0, camera_dir.z / u_fog_horizon_blend);\n    // Factor of 3 chosen to roughly match smoothstep.\n    // See: https://www.desmos.com/calculator/pub31lvshf\n    return u_fog_color.a * exp(-3.0 * t * t);\n}\n\n// Compute a ramp for fog opacity\n//   - t: depth, rescaled to 0 at fogStart and 1 at fogEnd\n// See: https://www.desmos.com/calculator/3taufutxid\nfloat fog_opacity(float t) {\n    const float decay = 6.0;\n    float falloff = 1.0 - min(1.0, exp(-decay * t));\n\n    // Cube without pow() to smooth the onset\n    falloff *= falloff * falloff;\n\n    // Scale and clip to 1 at the far limit\n    return u_fog_color.a * min(1.0, 1.00747 * falloff);\n}\n\n#endif\n",oe="attribute highp vec3 a_pos_3f;\n\nuniform lowp mat4 u_matrix;\n\nvarying highp vec3 v_uv;\n\nvoid main() {\n    const mat3 half_neg_pi_around_x = mat3(1.0, 0.0,  0.0,\n                                           0.0, 0.0, -1.0,\n                                           0.0, 1.0,  0.0);\n\n    v_uv = half_neg_pi_around_x * a_pos_3f;\n    vec4 pos = u_matrix * vec4(a_pos_3f, 1.0);\n\n    // Enforce depth to be 1.0\n    gl_Position = pos.xyww;\n}\n";let ae={},se={};ae=he("","// Also declared in data/bucket/fill_extrusion_bucket.js\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n\n#ifdef TERRAIN\n\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;\nuniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;\nuniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;\nuniform vec2 u_dem_tl;\nuniform vec2 u_dem_tl_prev;\nuniform float u_dem_scale;\nuniform float u_dem_scale_prev;\nuniform float u_dem_size;\nuniform float u_dem_lerp;\nuniform float u_exaggeration;\nuniform float u_meter_to_dem;\nuniform mat4 u_label_plane_matrix_inv;\n\nuniform sampler2D u_depth;\nuniform vec2 u_depth_size_inv;\n\nvec4 tileUvToDemSample(vec2 uv, float dem_size, float dem_scale, vec2 dem_tl) {\n    vec2 pos = dem_size * (uv * dem_scale + dem_tl) + 1.0;\n    vec2 f = fract(pos);\n    return vec4((pos - f + 0.5) / (dem_size + 2.0), f);\n}\n\nfloat decodeElevation(vec4 v) {\n    return dot(vec4(v.xyz * 255.0, -1.0), u_dem_unpack);\n}\n\nfloat currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\n    vec2 pos = (u_dem_size * (apos / 8192.0 * u_dem_scale + u_dem_tl) + 1.5) / (u_dem_size + 2.0);\n    return u_exaggeration * texture2D(u_dem, pos).a;\n#else\n    float dd = 1.0 / (u_dem_size + 2.0);\n    vec4 r = tileUvToDemSample(apos / 8192.0, u_dem_size, u_dem_scale, u_dem_tl);\n    vec2 pos = r.xy;\n    vec2 f = r.zw;\n\n    float tl = decodeElevation(texture2D(u_dem, pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\n    return u_exaggeration * tl;\n#endif\n    float tr = decodeElevation(texture2D(u_dem, pos + vec2(dd, 0.0)));\n    float bl = decodeElevation(texture2D(u_dem, pos + vec2(0.0, dd)));\n    float br = decodeElevation(texture2D(u_dem, pos + vec2(dd, dd)));\n\n    return u_exaggeration * mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);\n#endif\n}\n\nfloat prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\n    vec2 pos = (u_dem_size * (apos / 8192.0 * u_dem_scale_prev + u_dem_tl_prev) + 1.5) / (u_dem_size + 2.0);\n    return u_exaggeration * texture2D(u_dem_prev, pos).a;\n#else\n    float dd = 1.0 / (u_dem_size + 2.0);\n    vec4 r = tileUvToDemSample(apos / 8192.0, u_dem_size, u_dem_scale_prev, u_dem_tl_prev);\n    vec2 pos = r.xy;\n    vec2 f = r.zw;\n\n    float tl = decodeElevation(texture2D(u_dem_prev, pos));\n    float tr = decodeElevation(texture2D(u_dem_prev, pos + vec2(dd, 0.0)));\n    float bl = decodeElevation(texture2D(u_dem_prev, pos + vec2(0.0, dd)));\n    float br = decodeElevation(texture2D(u_dem_prev, pos + vec2(dd, dd)));\n\n    return u_exaggeration * mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);\n#endif\n}\n\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n    float nextElevation = currentElevation(apos);\n    float prevElevation = prevElevation(apos);\n    return mix(prevElevation, nextElevation, u_dem_lerp);\n}\n#else\nfloat elevation(vec2 apos) {\n    return currentElevation(apos);\n}\n#endif\n\n// Unpack depth from RGBA. A piece of code copied in various libraries and WebGL\n// shadow mapping examples.\nfloat unpack_depth(vec4 rgba_depth)\n{\n    const vec4 bit_shift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\n    return dot(rgba_depth, bit_shift) * 2.0 - 1.0;\n}\n\nbool isOccluded(vec4 frag) {\n    vec3 coord = frag.xyz / frag.w;\n    float depth = unpack_depth(texture2D(u_depth, (coord.xy + 1.0) * 0.5));\n    return coord.z > depth + 0.0005;\n}\n\nfloat occlusionFade(vec4 frag) {\n    vec3 coord = frag.xyz / frag.w;\n\n    vec3 df = vec3(5.0 * u_depth_size_inv, 0.0);\n    vec2 uv = 0.5 * coord.xy + 0.5;\n    vec4 depth = vec4(\n        unpack_depth(texture2D(u_depth, uv - df.xz)),\n        unpack_depth(texture2D(u_depth, uv + df.xz)),\n        unpack_depth(texture2D(u_depth, uv - df.zy)),\n        unpack_depth(texture2D(u_depth, uv + df.zy))\n    );\n    return dot(vec4(0.25), vec4(1.0) - clamp(300.0 * (vec4(coord.z - 0.001) - depth), 0.0, 1.0));\n}\n\n // BEGIN: code for fill-extrusion height offseting\n // When making changes here please also update associated JS ports in src/style/style_layer/fill-extrusion-style-layer.js\n // This is so that rendering changes are reflected on CPU side for feature querying.\n\nvec4 fourSample(vec2 pos, vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\n    float tl = texture2D(u_dem, pos).a;\n    float tr = texture2D(u_dem, pos + vec2(off.x, 0.0)).a;\n    float bl = texture2D(u_dem, pos + vec2(0.0, off.y)).a;\n    float br = texture2D(u_dem, pos + off).a;\n#else\n    vec4 demtl = vec4(texture2D(u_dem, pos).xyz * 255.0, -1.0);\n    float tl = dot(demtl, u_dem_unpack);\n    vec4 demtr = vec4(texture2D(u_dem, pos + vec2(off.x, 0.0)).xyz * 255.0, -1.0);\n    float tr = dot(demtr, u_dem_unpack);\n    vec4 dembl = vec4(texture2D(u_dem, pos + vec2(0.0, off.y)).xyz * 255.0, -1.0);\n    float bl = dot(dembl, u_dem_unpack);\n    vec4 dembr = vec4(texture2D(u_dem, pos + off).xyz * 255.0, -1.0);\n    float br = dot(dembr, u_dem_unpack);\n#endif\n    return vec4(tl, tr, bl, br);\n}\n\nfloat flatElevation(vec2 pack) {\n    vec2 apos = floor(pack / 8.0);\n    vec2 span = 10.0 * (pack - apos * 8.0);\n\n    vec2 uvTex = (apos - vec2(1.0, 1.0)) / 8190.0;\n    float size = u_dem_size + 2.0;\n    float dd = 1.0 / size;\n\n    vec2 pos = u_dem_size * (uvTex * u_dem_scale + u_dem_tl) + 1.0;\n    vec2 f = fract(pos);\n    pos = (pos - f + 0.5) * dd;\n\n    // Get elevation of centroid.\n    vec4 h = fourSample(pos, vec2(dd));\n    float z = mix(mix(h.x, h.y, f.x), mix(h.z, h.w, f.x), f.y);\n\n    vec2 w = floor(0.5 * (span * u_meter_to_dem - 1.0));\n    vec2 d = dd * w;\n    vec4 bounds = vec4(d, vec2(1.0) - d);\n\n    // Get building wide sample, to get better slope estimate.\n    h = fourSample(pos - d, 2.0 * d + vec2(dd));\n\n    vec4 diff = abs(h.xzxy - h.ywzw);\n    vec2 slope = min(vec2(0.25), u_meter_to_dem * 0.5 * (diff.xz + diff.yw) / (2.0 * w + vec2(1.0)));\n    vec2 fix = slope * span;\n    float base = z + max(fix.x, fix.y);\n    return u_exaggeration * base;\n}\n\nfloat elevationFromUint16(float word) {\n    return u_exaggeration * (word / ELEVATION_SCALE - ELEVATION_OFFSET);\n}\n\n// END: code for fill-extrusion height offseting\n\n#else\n\nfloat elevation(vec2 pos) { return 0.0; }\nbool isOccluded(vec4 frag) { return false; }\nfloat occlusionFade(vec4 frag) { return 1.0; }\n\n#endif\n",!0),se=he("#ifdef FOG\n\nuniform float u_fog_temporal_offset;\n\n// This function is only used in rare places like heatmap where opacity is used\n// directly, outside the normal fog_apply method.\nfloat fog_opacity(vec3 pos) {\n    float depth = length(pos);\n    return fog_opacity(fog_range(depth));\n}\n\nvec3 fog_apply(vec3 color, vec3 pos) {\n    float depth = length(pos);\n    float opacity = fog_opacity(fog_range(depth));\n    opacity *= fog_horizon_blending(pos / depth);\n    return mix(color, u_fog_color.rgb, opacity);\n}\n\n// Apply fog computed in the vertex shader\nvec4 fog_apply_from_vert(vec4 color, float fog_opac) {\n    float alpha = EPSILON + color.a;\n    color.rgb = mix(color.rgb / alpha, u_fog_color.rgb, fog_opac) * alpha;\n    return color;\n}\n\n// Assumes z up\nvec3 fog_apply_sky_gradient(vec3 camera_ray, vec3 sky_color) {\n    float horizon_blend = fog_horizon_blending(normalize(camera_ray));\n    return mix(sky_color, u_fog_color.rgb, horizon_blend);\n}\n\n// Un-premultiply the alpha, then blend fog, then re-premultiply alpha.\n// For use with colors using premultiplied alpha\nvec4 fog_apply_premultiplied(vec4 color, vec3 pos) {\n    float alpha = EPSILON + color.a;\n    color.rgb = fog_apply(color.rgb / alpha, pos) * alpha;\n    return color;\n}\n\nvec3 fog_dither(vec3 color) {\n    vec2 dither_seed = gl_FragCoord.xy + u_fog_temporal_offset;\n    return dither(color, dither_seed);\n}\n\nvec4 fog_dither(vec4 color) {\n    return vec4(fog_dither(color.rgb), color.a);\n}\n\n#endif\n","#ifdef FOG\n\nuniform mat4 u_fog_matrix;\n\nvec3 fog_position(vec3 pos) {\n    // The following function requires that u_fog_matrix be affine and\n    // results in a vector with w = 1. Otherwise we must divide by w.\n    return (u_fog_matrix * vec4(pos, 1.0)).xyz;\n}\n\nvec3 fog_position(vec2 pos) {\n    return fog_position(vec3(pos, 0.0));\n}\n\nfloat fog(vec3 pos) {\n    float depth = length(pos);\n    float opacity = fog_opacity(fog_range(depth));\n    return opacity * fog_horizon_blending(pos / depth);\n}\n\n#endif\n",!0);const le=he("#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nhighp vec3 hash(highp vec2 p) {\n    highp vec3 p3 = fract(p.xyx * vec3(443.8975, 397.2973, 491.1871));\n    p3 += dot(p3, p3.yxz + 19.19);\n    return fract((p3.xxy + p3.yzz) * p3.zyx);\n}\n\nvec3 dither(vec3 color, highp vec2 seed) {\n    vec3 rnd = hash(seed) + hash(seed + 0.59374) - 0.5;\n    return color + rnd / 255.0;\n}\n","#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_color(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n\nconst vec4 AWAY = vec4(-1000.0, -1000.0, -1000.0, 1); // Normalized device coordinate that is not rendered.\n"),ce=re;var ue={background:he("uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    vec4 out_color = u_color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),backgroundPattern:he("uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 out_color = mix(color1, color2, u_mix);\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),circle:he("varying vec3 v_data;\nvarying float v_visibility;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    vec4 out_color = mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef FOG\n    out_color = fog_apply_premultiplied(out_color, v_fog_pos);\n#endif\n\n    gl_FragColor = out_color * (v_visibility * opacity_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n\n#define NUM_SAMPLES_PER_RING 16\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform lowp float u_device_pixel_ratio;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\nvarying vec3 v_data;\nvarying float v_visibility;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvec2 calc_offset(vec2 extrusion, float radius, float stroke_width,  float view_scale) {\n    return extrusion * (radius + stroke_width) * u_extrude_scale * view_scale;\n}\n\nfloat cantilevered_elevation(vec2 pos, float radius, float stroke_width, float view_scale) {\n    vec2 c1 = pos + calc_offset(vec2(-1,-1), radius, stroke_width, view_scale);\n    vec2 c2 = pos + calc_offset(vec2(1,-1), radius, stroke_width, view_scale);\n    vec2 c3 = pos + calc_offset(vec2(1,1), radius, stroke_width, view_scale);\n    vec2 c4 = pos + calc_offset(vec2(-1,1), radius, stroke_width, view_scale);\n    float h1 = elevation(c1) + ELEVATION_BIAS;\n    float h2 = elevation(c2) + ELEVATION_BIAS;\n    float h3 = elevation(c3) + ELEVATION_BIAS;\n    float h4 = elevation(c4) + ELEVATION_BIAS;\n    return max(h4, max(h3, max(h1,h2)));\n}\n\nfloat circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\n    return elevation(pos) + ELEVATION_BIAS;\n#else\n    return 0.0;\n#endif\n}\n\nvec4 project_vertex(vec2 extrusion, vec4 world_center, vec4 projected_center, float radius, float stroke_width,  float view_scale) {\n    vec2 sample_offset = calc_offset(extrusion, radius, stroke_width, view_scale);\n#ifdef PITCH_WITH_MAP\n    return u_matrix * ( world_center + vec4(sample_offset, 0, 0) );\n#else\n    return projected_center + vec4(sample_offset, 0, 0);\n#endif\n}\n\nfloat get_sample_step() {\n#ifdef PITCH_WITH_MAP\n    return 2.0 * PI / float(NUM_SAMPLES_PER_RING);\n#else\n    // We want to only sample the top half of the circle when it is viewport-aligned.\n    // This is to prevent the circle from intersecting with the ground plane below it at high pitch.\n    return PI / float(NUM_SAMPLES_PER_RING);\n#endif\n}\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    // extract height offset for terrain, this returns 0 if terrain is not active\n    float height = circle_elevation(circle_center);\n    vec4 world_center = vec4(circle_center, height, 1);\n    vec4 projected_center = u_matrix * world_center;\n\n    float view_scale = 0.0;\n    #ifdef PITCH_WITH_MAP\n        #ifdef SCALE_WITH_MAP\n            view_scale = 1.0;\n        #else\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            view_scale = projected_center.w / u_camera_to_center_distance;\n        #endif\n    #else\n        #ifdef SCALE_WITH_MAP\n            view_scale = u_camera_to_center_distance;\n        #else\n            view_scale = projected_center.w;\n        #endif\n    #endif\n    gl_Position = project_vertex(extrude, world_center, projected_center, radius, stroke_width, view_scale);\n\n    float visibility = 0.0;\n    #ifdef TERRAIN\n        float step = get_sample_step();\n        #ifdef PITCH_WITH_MAP\n            // to prevent the circle from self-intersecting with the terrain underneath on a sloped hill,\n            // we calculate the elevation at each corner and pick the highest one when computing visibility.\n            float cantilevered_height = cantilevered_elevation(circle_center, radius, stroke_width, view_scale);\n            vec4 occlusion_world_center = vec4(circle_center, cantilevered_height, 1);\n            vec4 occlusion_projected_center = u_matrix * occlusion_world_center;\n        #else\n            vec4 occlusion_world_center = world_center;\n            vec4 occlusion_projected_center = projected_center;\n        #endif\n        for(int ring = 0; ring < NUM_VISIBILITY_RINGS; ring++) {\n            float scale = (float(ring) + 1.0)/float(NUM_VISIBILITY_RINGS);\n            for(int i = 0; i < NUM_SAMPLES_PER_RING; i++) {\n                vec2 extrusion = vec2(cos(step * float(i)), -sin(step * float(i))) * scale;\n                vec4 frag_pos = project_vertex(extrusion, occlusion_world_center, occlusion_projected_center, radius, stroke_width, view_scale);\n                visibility += float(!isOccluded(frag_pos));\n            }\n        }\n        visibility /= float(NUM_VISIBILITY_RINGS) * float(NUM_SAMPLES_PER_RING);\n    #else\n        visibility = 1.0;\n    #endif\n    v_visibility = visibility;\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / u_device_pixel_ratio / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n\n#ifdef FOG\n    v_fog_pos = fog_position(world_center.xyz);\n#endif\n}\n"),clippingMask:he("void main() {\n    gl_FragColor = vec4(1.0);\n}\n","attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"),heatmap:he("uniform highp float u_intensity;\n\nvarying vec2 v_extrude;\n\n#pragma mapbox: define highp float weight\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef FOG\n    // Heatmaps work differently than other layers, so we operate on the accumulated\n    // density rather than a final color. The power is chosen so that the density\n    // fades into the fog at a reasonable rate.\n    gl_FragColor.r *= pow(1.0 - fog_opacity(v_fog_pos), 2.0);\n#endif\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec3 pos = vec3(floor(a_pos * 0.5) + extrude, elevation(floor(a_pos * 0.5)));\n\n    gl_Position = u_matrix * vec4(pos, 1);\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),heatmapTexture:he("uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n","attribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = vec4(a_pos, 0, 1);\n\n    v_pos = a_pos * 0.5 + 0.5;\n}\n"),collisionBox:he("varying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 red  = vec4(1.0, 0.0, 0.0, 1.0); // Red = collision, hide label\n    vec4 blue = vec4(0.0, 0.0, 1.0, 0.5); // Blue = no collision, label is showing\n\n    gl_FragColor  = mix(red, blue, step(0.5, v_placed)) * 0.5;\n    gl_FragColor *= mix(1.0, 0.1, step(0.5, v_notUsed));\n}","attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\nattribute vec2 a_shift;\nattribute float a_size_scale;\nattribute vec2 a_padding;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, elevation(a_anchor_pos), 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field boxes in pitched/overzoomed tiles\n        1.5);\n\n    gl_Position = u_matrix * vec4(a_pos, elevation(a_pos), 1.0);\n    gl_Position.xy += (a_extrude * a_size_scale + a_shift + a_padding) * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"),collisionCircle:he("varying float v_radius;\nvarying vec2 v_extrude;\nvarying float v_perspective_ratio;\nvarying float v_collision;\n\nvoid main() {\n    float alpha = 0.5 * min(v_perspective_ratio, 1.0);\n    float stroke_radius = 0.9 * max(v_perspective_ratio, 1.0);\n\n    float distance_to_center = length(v_extrude);\n    float distance_to_edge = abs(distance_to_center - v_radius);\n    float opacity_t = smoothstep(-stroke_radius, 0.0, -distance_to_edge);\n\n    vec4 color = mix(vec4(0.0, 0.0, 1.0, 0.5), vec4(1.0, 0.0, 0.0, 1.0), v_collision);\n\n    gl_FragColor = color * alpha * opacity_t;\n}\n","attribute vec2 a_pos_2f;\nattribute float a_radius;\nattribute vec2 a_flags;\n\nuniform mat4 u_matrix;\nuniform mat4 u_inv_matrix;\nuniform vec2 u_viewport_size;\nuniform float u_camera_to_center_distance;\n\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying float v_perspective_ratio;\nvarying float v_collision;\n\nvec3 toTilePosition(vec2 screenPos) {\n    // Shoot a ray towards the ground to reconstruct the depth-value\n    vec4 rayStart = u_inv_matrix * vec4(screenPos, -1.0, 1.0);\n    vec4 rayEnd   = u_inv_matrix * vec4(screenPos,  1.0, 1.0);\n\n    rayStart.xyz /= rayStart.w;\n    rayEnd.xyz   /= rayEnd.w;\n\n    highp float t = (0.0 - rayStart.z) / (rayEnd.z - rayStart.z);\n    return mix(rayStart.xyz, rayEnd.xyz, t);\n}\n\nvoid main() {\n    vec2 quadCenterPos = a_pos_2f;\n    float radius = a_radius;\n    float collision = a_flags.x;\n    float vertexIdx = a_flags.y;\n\n    vec2 quadVertexOffset = vec2(\n        mix(-1.0, 1.0, float(vertexIdx >= 2.0)),\n        mix(-1.0, 1.0, float(vertexIdx >= 1.0 && vertexIdx <= 2.0)));\n\n    vec2 quadVertexExtent = quadVertexOffset * radius;\n\n    // Screen position of the quad might have been computed with different camera parameters.\n    // Transform the point to a proper position on the current viewport\n    vec3 tilePos = toTilePosition(quadCenterPos);\n    vec4 clipPos = u_matrix * vec4(tilePos, 1.0);\n\n    highp float camera_to_anchor_distance = clipPos.w;\n    highp float collision_perspective_ratio = clamp(\n        0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance),\n        0.0, // Prevents oversized near-field circles in pitched/overzoomed tiles\n        4.0);\n\n    // Apply small padding for the anti-aliasing effect to fit the quad\n    // Note that v_radius and v_extrude are in screen coordinates already\n    float padding_factor = 1.2;\n    v_radius = radius;\n    v_extrude = quadVertexExtent * padding_factor;\n    v_perspective_ratio = collision_perspective_ratio;\n    v_collision = collision;\n\n    gl_Position = vec4(clipPos.xyz / clipPos.w, 1.0) + vec4(quadVertexExtent * padding_factor / u_viewport_size * 2.0, 0.0, 0.0);\n}\n"),debug:he("uniform highp vec4 u_color;\nuniform sampler2D u_overlay;\n\nvarying vec2 v_uv;\n\nvoid main() {\n    vec4 overlay_color = texture2D(u_overlay, v_uv);\n    gl_FragColor = mix(u_color, overlay_color, overlay_color.a);\n}\n","attribute vec2 a_pos;\nvarying vec2 v_uv;\n\nuniform mat4 u_matrix;\nuniform float u_overlay_scale;\n\nvoid main() {\n    // This vertex shader expects a EXTENT x EXTENT quad,\n    // The UV co-ordinates for the overlay texture can be calculated using that knowledge\n    float h = elevation(a_pos);\n    v_uv = a_pos / 8192.0;\n    gl_Position = u_matrix * vec4(a_pos * u_overlay_scale, h, 1);\n}\n"),fill:he("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    vec4 out_color = color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),fillOutline:he("varying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    vec4 out_color = outline_color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),fillOutlinePattern:he("\nuniform vec2 u_texsize;\nuniform sampler2D u_image;\nuniform float u_fade;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n    vec4 out_color = mix(color1, color2, u_fade);\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec3 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float tileRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    vec2 display_size_a = (pattern_br_a - pattern_tl_a) / pixel_ratio_from;\n    vec2 display_size_b = (pattern_br_b - pattern_tl_b) / pixel_ratio_to;\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),fillPattern:he("uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 out_color = mix(color1, color2, u_fade);\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform vec3 u_scale;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float tileZoomRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    vec2 display_size_a = (pattern_br_a - pattern_tl_a) / pixel_ratio_from;\n    vec2 display_size_b = (pattern_br_b - pattern_tl_b) / pixel_ratio_to;\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileZoomRatio, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileZoomRatio, a_pos);\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),fillExtrusion:he("varying vec4 v_color;\n\nvoid main() {\n    vec4 color = v_color;\n#ifdef FOG\n    color = fog_dither(fog_apply_premultiplied(color, v_fog_pos));\n#endif\n    gl_FragColor = color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform float u_vertical_gradient;\nuniform lowp float u_opacity;\n\nattribute vec4 a_pos_normal_ed;\nattribute vec2 a_centroid_pos;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize highp float base\n    #pragma mapbox: initialize highp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 pos_nx = floor(a_pos_normal_ed.xyz * 0.5);\n    // The least significant bits of a_pos_normal_ed.xy hold:\n    // x is 1 if it's on top, 0 for ground.\n    // y is 1 if the normal points up, and 0 if it points to side.\n    // z is sign of ny: 1 for positive, 0 for values <= 0.\n    mediump vec3 top_up_ny = a_pos_normal_ed.xyz - 2.0 * pos_nx;\n\n    float x_normal = pos_nx.z / 8192.0;\n    vec3 normal = top_up_ny.y == 1.0 ? vec3(0.0, 0.0, 1.0) : normalize(vec3(x_normal, (2.0 * top_up_ny.z - 1.0) * (1.0 - abs(x_normal)), 0.0));\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = top_up_ny.x;\n\n#ifdef TERRAIN\n    vec2 centroid_pos = a_centroid_pos;\n    bool flat_roof = centroid_pos.x != 0.0;\n    float ele = elevation(pos_nx.xy);\n    float hidden = float(centroid_pos.x == 0.0 && centroid_pos.y == 1.0);\n    float c_ele = flat_roof ? centroid_pos.y == 0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;\n    // If centroid elevation lower than vertex elevation, roof at least 2 meters height above base.\n    float h = flat_roof ? max(c_ele + height, ele + base + 2.0) : ele + (t > 0.0 ? height : base == 0.0 ? -5.0 : base);\n    vec3 pos = vec3(pos_nx.xy, h);\n    gl_Position = mix(u_matrix * vec4(pos, 1), AWAY, hidden);\n#else\n    vec3 pos = vec3(pos_nx.xy, t > 0.0 ? height : base);\n    gl_Position = u_matrix * vec4(pos, 1);\n#endif\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.rgb += clamp(color.rgb * directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n    v_color *= u_opacity;\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),fillExtrusionPattern:he("uniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(pattern_tl_a / u_texsize, pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(pattern_tl_b / u_texsize, pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 out_color = mix(color1, color2, u_fade);\n\n    out_color = out_color * v_lighting;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_height_factor;\nuniform vec3 u_scale;\nuniform float u_vertical_gradient;\nuniform lowp float u_opacity;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec4 a_pos_normal_ed;\nattribute vec2 a_centroid_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float tileRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    vec3 pos_nx = floor(a_pos_normal_ed.xyz * 0.5);\n    // The least significant bits of a_pos_normal_ed.xy hold:\n    // x is 1 if it's on top, 0 for ground.\n    // y is 1 if the normal points up, and 0 if it points to side.\n    // z is sign of ny: 1 for positive, 0 for values <= 0.\n    mediump vec3 top_up_ny = a_pos_normal_ed.xyz - 2.0 * pos_nx;\n\n    float x_normal = pos_nx.z / 8192.0;\n    vec3 normal = top_up_ny.y == 1.0 ? vec3(0.0, 0.0, 1.0) : normalize(vec3(x_normal, (2.0 * top_up_ny.z - 1.0) * (1.0 - abs(x_normal)), 0.0));\n    float edgedistance = a_pos_normal_ed.w;\n\n    vec2 display_size_a = (pattern_br_a - pattern_tl_a) / pixel_ratio_from;\n    vec2 display_size_b = (pattern_br_b - pattern_tl_b) / pixel_ratio_to;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = top_up_ny.x;\n    float z = t > 0.0 ? height : base;\n\n#ifdef TERRAIN\n    vec2 centroid_pos = a_centroid_pos;\n    bool flat_roof = centroid_pos.x != 0.0;\n    float ele = elevation(pos_nx.xy);\n    float hidden = float(centroid_pos.x == 0.0 && centroid_pos.y == 1.0);\n    float c_ele = flat_roof ? centroid_pos.y == 0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;\n    // If centroid elevation lower than vertex elevation, roof at least 2 meters height above base.\n    float h = flat_roof ? max(c_ele + height, ele + base + 2.0) : ele + (t > 0.0 ? height : base == 0.0 ? -5.0 : base);\n    vec3 p = vec3(pos_nx.xy, h);\n    gl_Position = mix(u_matrix * vec4(p, 1), AWAY, hidden);\n#else\n    vec3 p = vec3(pos_nx.xy, z);\n    gl_Position = u_matrix * vec4(p, 1);\n#endif\n\n    vec2 pos = normal.z == 1.0\n        ? pos_nx.xy // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, fromScale * display_size_a, tileRatio, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, toScale * display_size_b, tileRatio, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        // This avoids another branching statement, but multiplies by a constant of 0.84 if no vertical gradient,\n        // and otherwise calculates the gradient based on base + height\n        directional *= (\n            (1.0 - u_vertical_gradient) +\n            (u_vertical_gradient * clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0)));\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n    v_lighting *= u_opacity;\n\n#ifdef FOG\n    v_fog_pos = fog_position(p);\n#endif\n}\n"),hillshadePrepare:he("#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\nuniform vec4 u_unpack;\n\nfloat getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\n    return texture2D(u_image, coord).a / 4.0;\n#else\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    data.a = -1.0;\n    return dot(data, u_unpack) / 4.0;\n#endif\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y));\n    float b = getElevation(v_pos + vec2(0, -epsilon.y));\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y));\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0));\n    float e = getElevation(v_pos);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0));\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y));\n    float h = getElevation(v_pos + vec2(0, epsilon.y));\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y));\n\n    // Here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom).\n    // We want to vertically exaggerate the hillshading because otherwise\n    // it is barely noticeable at low zooms. To do this, we multiply this by\n    // a scale factor that is a function of zooms below 15, which is an arbitrary\n    // that corresponds to the max zoom level of Mapbox terrain-RGB tiles.\n    // See nickidlugash's awesome breakdown for more info:\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n\n    float exaggerationFactor = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n    float exaggeration = u_zoom < 15.0 ? (u_zoom - 15.0) * exaggerationFactor : 0.0;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) / pow(2.0, exaggeration + (19.2562 - u_zoom));\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_dimension;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    highp vec2 epsilon = 1.0 / u_dimension;\n    float scale = (u_dimension.x - 2.0) / u_dimension.x;\n    v_pos = (a_texture_pos / 8192.0) * scale + epsilon;\n}\n"),hillshade:he("uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef FOG\n    gl_FragColor = fog_dither(fog_apply_premultiplied(gl_FragColor, v_fog_pos));\n#endif\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),line:he("uniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    vec4 out_color = color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_units_to_pixels;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n#ifndef RENDER_TO_TEXTURE\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n#else\n    v_gamma_scale = 1.0;\n#endif\n    v_width2 = vec2(outset, inset);\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),lineGradient:he("uniform lowp float u_device_pixel_ratio;\nuniform sampler2D u_image;\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\nvarying highp vec2 v_uv;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    // For gradient lines, v_lineprogress is the ratio along the\n    // entire line, the gradient ramp is stored in a texture.\n    vec4 color = texture2D(u_image, v_uv);\n\n#ifdef FOG\n    color = fog_dither(fog_apply_premultiplied(color, v_fog_pos));\n#endif\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\nattribute float a_uv_x;\nattribute float a_split_index;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\nuniform vec2 u_units_to_pixels;\nuniform float u_image_height;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\nvarying highp vec2 v_uv;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    highp float texel_height = 1.0 / u_image_height;\n    highp float half_texel_height = 0.5 * texel_height;\n    v_uv = vec2(a_uv_x, a_split_index * texel_height - half_texel_height);\n\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n#ifndef RENDER_TO_TEXTURE\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n#else\n    v_gamma_scale = 1.0;\n#endif\n    v_width2 = vec2(outset, inset);\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),linePattern:he("uniform lowp float u_device_pixel_ratio;\nuniform vec2 u_texsize;\nuniform float u_fade;\nuniform mediump vec3 u_scale;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\nvarying float v_width;\n\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 pattern_tl_a = pattern_from.xy;\n    vec2 pattern_br_a = pattern_from.zw;\n    vec2 pattern_tl_b = pattern_to.xy;\n    vec2 pattern_br_b = pattern_to.zw;\n\n    float tileZoomRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    vec2 display_size_a = (pattern_br_a - pattern_tl_a) / pixel_ratio_from;\n    vec2 display_size_b = (pattern_br_b - pattern_tl_b) / pixel_ratio_to;\n\n    vec2 pattern_size_a = vec2(display_size_a.x * fromScale / tileZoomRatio, display_size_a.y);\n    vec2 pattern_size_b = vec2(display_size_b.x * toScale / tileZoomRatio, display_size_b.y);\n\n    float aspect_a = display_size_a.y / v_width;\n    float aspect_b = display_size_b.y / v_width;\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / pattern_size_a.x * aspect_a, 1.0);\n    float x_b = mod(v_linesofar / pattern_size_b.x * aspect_b, 1.0);\n\n    float y = 0.5 * v_normal.y + 0.5;\n\n    vec2 texel_size = 1.0 / u_texsize;\n\n    vec2 pos_a = mix(pattern_tl_a * texel_size - texel_size, pattern_br_a * texel_size + texel_size, vec2(x_a, y));\n    vec2 pos_b = mix(pattern_tl_b * texel_size - texel_size, pattern_br_b * texel_size + texel_size, vec2(x_b, y));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n#ifdef FOG\n    color = fog_dither(fog_apply_premultiplied(color, v_fog_pos));\n#endif\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\nattribute float a_linesofar;\n\nuniform mat4 u_matrix;\nuniform vec2 u_units_to_pixels;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\nvarying float v_width;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n    #pragma mapbox: initialize mediump vec4 pattern_from\n    #pragma mapbox: initialize mediump vec4 pattern_to\n    #pragma mapbox: initialize lowp float pixel_ratio_from\n    #pragma mapbox: initialize lowp float pixel_ratio_to\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // float tileRatio = u_scale.x;\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n#ifndef RENDER_TO_TEXTURE\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n#else\n    v_gamma_scale = 1.0;\n#endif\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n    v_width = floorwidth;\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),lineSDF:he("\nuniform lowp float u_device_pixel_ratio;\nuniform sampler2D u_image;\nuniform float u_mix;\nuniform vec3 u_scale;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n    #pragma mapbox: initialize mediump vec4 dash_from\n    #pragma mapbox: initialize mediump vec4 dash_to\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / u_device_pixel_ratio) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    float sdfwidth = min(dash_from.z * u_scale.y, dash_to.z * u_scale.z);\n    float sdfgamma = 1.0 / (2.0 * u_device_pixel_ratio) / sdfwidth;\n    alpha *= smoothstep(0.5 - sdfgamma / floorwidth, 0.5 + sdfgamma / floorwidth, sdfdist);\n\n    vec4 out_color = color;\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply_premultiplied(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = out_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define EXTRUDE_SCALE 0.015873016\n\nattribute vec2 a_pos_normal;\nattribute vec4 a_data;\nattribute float a_linesofar;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform lowp float u_device_pixel_ratio;\nuniform vec2 u_units_to_pixels;\n\nuniform vec2 u_texsize;\nuniform mediump vec3 u_scale;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n    #pragma mapbox: initialize mediump vec4 dash_from\n    #pragma mapbox: initialize mediump vec4 dash_to\n\n    // the distance over which the line edge fades out.\n    // Retina devices need a smaller distance to avoid aliasing.\n    float ANTIALIASING = 1.0 / u_device_pixel_ratio / 2.0;\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = floor(a_pos_normal * 0.5);\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    // We store these in the least significant bit of a_pos_normal\n    mediump vec2 normal = a_pos_normal - 2.0 * pos;\n    normal.y = normal.y * 2.0 - 1.0;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + (halfwidth == 0.0 ? 0.0 : ANTIALIASING);\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * EXTRUDE_SCALE;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * EXTRUDE_SCALE * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n#ifndef RENDER_TO_TEXTURE\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n#else\n    v_gamma_scale = 1.0;\n#endif\n\n    float tileZoomRatio = u_scale.x;\n    float fromScale = u_scale.y;\n    float toScale = u_scale.z;\n\n    float scaleA = dash_from.z == 0.0 ? 0.0 : tileZoomRatio / (dash_from.z * fromScale);\n    float scaleB = dash_to.z == 0.0 ? 0.0 : tileZoomRatio / (dash_to.z * toScale);\n    float heightA = dash_from.y;\n    float heightB = dash_to.y;\n\n    v_tex_a = vec2(a_linesofar * scaleA / floorwidth, (-normal.y * heightA + dash_from.x + 0.5) / u_texsize.y);\n    v_tex_b = vec2(a_linesofar * scaleB / floorwidth, (-normal.y * heightB + dash_to.x + 0.5) / u_texsize.y);\n\n    v_width2 = vec2(outset, inset);\n\n#ifdef FOG\n    v_fog_pos = fog_position(pos);\n#endif\n}\n"),raster:he("uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    vec3 out_color = mix(u_high_vec, u_low_vec, rgb);\n\n#ifdef FOG\n    out_color = fog_dither(fog_apply(out_color, v_fog_pos));\n#endif\n\n    gl_FragColor = vec4(out_color * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n\n#ifdef FOG\n    v_fog_pos = fog_position(a_pos);\n#endif\n}\n"),symbolIcon:he("uniform sampler2D u_texture;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec4 a_pixeloffset;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    vec2 a_pxoffset = a_pixeloffset.xy;\n    vec2 a_minFontScale = a_pixeloffset.zw / 256.0;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    float h = elevation(a_pos);\n    vec4 projectedPoint = u_matrix * vec4(a_pos, h, 1);\n\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n            0.5 + 0.5 * distance_ratio,\n            0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n            1.5);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), h, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, h, 1.0);\n    float z = 0.0;\n    vec2 offset = rotation_matrix * (a_offset / 32.0 * max(a_minFontScale, fontScale) + a_pxoffset / 16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\n    vec4 tile_pos = u_label_plane_matrix_inv * vec4(a_projected_pos.xy + offset, 0.0, 1.0);\n    z = elevation(tile_pos.xy);\n#endif\n    // Symbols might end up being behind the camera. Move them AWAY.\n    float occlusion_fade = occlusionFade(projectedPoint);\n    gl_Position = mix(u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + offset, z, 1.0), AWAY, float(projectedPoint.w <= 0.0 || occlusion_fade == 0.0));\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(occlusion_fade, fade_opacity[0] + fade_change));\n}\n"),symbolSDF:he("#define SDF_PX 8.0\n\nuniform bool u_is_halo;\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform lowp float u_device_pixel_ratio;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float EDGE_GAMMA = 0.105 / u_device_pixel_ratio;\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec4 a_pixeloffset;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    vec2 a_pxoffset = a_pixeloffset.xy;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    float h = elevation(a_pos);\n    vec4 projectedPoint = u_matrix * vec4(a_pos, h, 1);\n\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        1.5);\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), h, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, h, 1.0);\n    float z = 0.0;\n    vec2 offset = rotation_matrix * (a_offset / 32.0 * fontScale + a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\n    vec4 tile_pos = u_label_plane_matrix_inv * vec4(a_projected_pos.xy + offset, 0.0, 1.0);\n    z = elevation(tile_pos.xy);\n#endif\n    // Symbols might end up being behind the camera. Move them AWAY.\n    float occlusion_fade = occlusionFade(projectedPoint);\n    gl_Position = mix(u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + offset, z, 1.0), AWAY, float(projectedPoint.w <= 0.0 || occlusion_fade == 0.0));\n    float gamma_scale = gl_Position.w;\n\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(occlusion_fade, fade_opacity[0] + fade_change));\n\n    v_data0 = a_tex / u_texsize;\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"),symbolTextAndIcon:he("#define SDF_PX 8.0\n\n#define SDF 1.0\n#define ICON 0.0\n\nuniform bool u_is_halo;\nuniform sampler2D u_texture;\nuniform sampler2D u_texture_icon;\nuniform highp float u_gamma_scale;\nuniform lowp float u_device_pixel_ratio;\n\nvarying vec4 v_data0;\nvarying vec4 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float fade_opacity = v_data1[2];\n\n    if (v_data1.w == ICON) {\n        vec2 tex_icon = v_data0.zw;\n        lowp float alpha = opacity * fade_opacity;\n        gl_FragColor = texture2D(u_texture_icon, tex_icon) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n#endif\n        return;\n    }\n\n    vec2 tex = v_data0.xy;\n\n    float EDGE_GAMMA = 0.105 / u_device_pixel_ratio;\n\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n\n    float fontScale = size / 24.0;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","attribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_coord_matrix;\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\nuniform vec2 u_texsize;\nuniform vec2 u_texsize_icon;\n\nvarying vec4 v_data0;\nvarying vec4 v_data1;\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    float a_size_min = floor(a_size[0] * 0.5);\n    float is_sdf = a_size[0] - 2.0 * a_size_min;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size_min, a_size[1], u_size_t) / 128.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size_min / 128.0;\n    } else {\n        size = u_size;\n    }\n\n    float h = elevation(a_pos);\n    vec4 projectedPoint = u_matrix * vec4(a_pos, h, 1);\n\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = clamp(\n        0.5 + 0.5 * distance_ratio,\n        0.0, // Prevents oversized near-field symbols in pitched/overzoomed tiles\n        1.5);\n\n    size *= perspective_ratio;\n\n    float fontScale = size / 24.0;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), h, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, h, 1.0);\n    float z = 0.0;\n    vec2 offset = rotation_matrix * (a_offset / 32.0 * fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\n    vec4 tile_pos = u_label_plane_matrix_inv * vec4(a_projected_pos.xy + offset, 0.0, 1.0);\n    z = elevation(tile_pos.xy);\n#endif\n    float occlusion_fade = occlusionFade(projectedPoint);\n    gl_Position = mix(u_coord_matrix * vec4(projected_pos.xy / projected_pos.w + offset, z, 1.0), AWAY, float(projectedPoint.w <= 0.0 || occlusion_fade == 0.0));\n    float gamma_scale = gl_Position.w;\n\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(occlusion_fade, fade_opacity[0] + fade_change));\n\n    v_data0.xy = a_tex / u_texsize;\n    v_data0.zw = a_tex / u_texsize_icon;\n    v_data1 = vec4(gamma_scale, size, interpolated_fade_opacity, is_sdf);\n}\n"),terrainRaster:he("uniform sampler2D u_image0;\nvarying vec2 v_pos0;\n\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n\nvoid main() {\n    vec4 color = texture2D(u_image0, v_pos0);\n#ifdef FOG\n    color = fog_dither(fog_apply_from_vert(color, v_fog_opacity));\n#endif\n    gl_FragColor = color;\n#ifdef TERRAIN_WIREFRAME\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n","uniform mat4 u_matrix;\nuniform float u_skirt_height;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\n\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n\nconst float skirtOffset = 24575.0;\nconst float wireframeOffset = 0.00015;\n\nvoid main() {\n    v_pos0 = a_texture_pos / 8192.0;\n    float skirt = float(a_pos.x >= skirtOffset);\n    float elevation = elevation(a_texture_pos) - skirt * u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\n    elevation += u_skirt_height * u_skirt_height * wireframeOffset;\n#endif\n    vec2 decodedPos = a_pos - vec2(skirt * skirtOffset, 0.0);\n    gl_Position = u_matrix * vec4(decodedPos, elevation, 1.0);\n\n#ifdef FOG\n    v_fog_opacity = fog(fog_position(vec3(decodedPos, elevation)));\n#endif\n}\n"),terrainDepth:he("#ifdef GL_ES\nprecision highp float;\n#endif\n\n// Pack depth to RGBA. A piece of code copied in various libraries and WebGL\n// shadow mapping examples.\nvec4 pack_depth(float ndc_z) {\n    float depth = ndc_z * 0.5 + 0.5;\n    const vec4 bit_shift = vec4(256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0);\n    const vec4 bit_mask  = vec4(0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);\n    vec4 res = fract(depth * bit_shift);\n    res -= res.xxyz * bit_mask;\n    return res;\n}\n\nvarying float v_depth;\n\nvoid main() {\n    gl_FragColor = pack_depth(v_depth);\n}\n","uniform mat4 u_matrix;\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying float v_depth;\n\nvoid main() {\n    float elevation = elevation(a_texture_pos);\n    gl_Position = u_matrix * vec4(a_pos, elevation, 1.0);\n    v_depth = gl_Position.z / gl_Position.w;\n}\n"),skybox:he("// [1] Banding in games http://loopit.dk/banding_in_games.pdf\n\nvarying lowp vec3 v_uv;\n\nuniform lowp samplerCube u_cubemap;\nuniform lowp float u_opacity;\nuniform highp float u_temporal_offset;\nuniform highp vec3 u_sun_direction;\n\nfloat sun_disk(highp vec3 ray_direction, highp vec3 sun_direction) {\n    highp float cos_angle = dot(normalize(ray_direction), sun_direction);\n\n    // Sun angular angle is ~0.5°\n    const highp float cos_sun_angular_diameter = 0.99996192306;\n    const highp float smoothstep_delta = 1e-5;\n\n    return smoothstep(\n        cos_sun_angular_diameter - smoothstep_delta,\n        cos_sun_angular_diameter + smoothstep_delta,\n        cos_angle);\n}\n\nfloat map(float value, float start, float end, float new_start, float new_end) {\n    return ((value - start) * (new_end - new_start)) / (end - start) + new_start;\n}\n\nvoid main() {\n    vec3 uv = v_uv;\n\n    // Add a small offset to prevent black bands around areas where\n    // the scattering algorithm does not manage to gather lighting\n    const float y_bias = 0.015;\n    uv.y += y_bias;\n\n    // Inverse of the operation applied for non-linear UV parameterization\n    uv.y = pow(abs(uv.y), 1.0 / 5.0);\n\n    // To make better utilization of the visible range (e.g. over the horizon, UVs\n    // from 0.0 to 1.0 on the Y-axis in cubemap space), the UV range is remapped from\n    // (0.0,1.0) to (-1.0,1.0) on y. The inverse operation is applied when generating.\n    uv.y = map(uv.y, 0.0, 1.0, -1.0, 1.0);\n\n    vec3 sky_color = textureCube(u_cubemap, uv).rgb;\n\n#ifdef FOG\n    // Apply fog contribution if enabled\n    // Swizzle to put z-up (ignoring x-y mirror since fog does not depend on azimuth)\n    sky_color = fog_apply_sky_gradient(v_uv.xzy, sky_color);\n#endif\n\n    // Dither [1]\n    sky_color.rgb = dither(sky_color.rgb, gl_FragCoord.xy + u_temporal_offset);\n    // Add sun disk\n    sky_color += 0.1 * sun_disk(v_uv, u_sun_direction);\n\n    gl_FragColor = vec4(sky_color * u_opacity, u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",oe),skyboxGradient:he("varying highp vec3 v_uv;\n\nuniform lowp sampler2D u_color_ramp;\nuniform highp vec3 u_center_direction;\nuniform lowp float u_radius;\nuniform lowp float u_opacity;\nuniform highp float u_temporal_offset;\n\nvoid main() {\n    float progress = acos(dot(normalize(v_uv), u_center_direction)) / u_radius;\n    vec4 color = texture2D(u_color_ramp, vec2(progress, 0.5));\n\n#ifdef FOG\n    // Apply fog contribution if enabled, make sure to un/post multiply alpha before/after\n    // applying sky gradient contribution, as color ramps are premultiplied-alpha colors.\n    // Swizzle to put z-up (ignoring x-y mirror since fog does not depend on azimuth)\n    color.rgb = fog_apply_sky_gradient(v_uv.xzy, color.rgb / color.a) * color.a;\n#endif\n\n    color *= u_opacity;\n\n    // Dither\n    color.rgb = dither(color.rgb, gl_FragCoord.xy + u_temporal_offset);\n\n    gl_FragColor = color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",oe),skyboxCapture:he("// [1] Precomputed Atmospheric Scattering: https://hal.inria.fr/inria-00288758/document\n// [2] Earth Fact Sheet https://nssdc.gsfc.nasa.gov/planetary/factsheet/earthfact.html\n// [3] Tonemapping Operators http://filmicworlds.com/blog/filmic-tonemapping-operators\n\nvarying highp vec3 v_position;\n\nuniform highp float u_sun_intensity;\nuniform highp float u_luminance;\nuniform lowp vec3 u_sun_direction;\nuniform highp vec4 u_color_tint_r;\nuniform highp vec4 u_color_tint_m;\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// [1] equation (1) section 2.1. for λ = (680, 550, 440) nm,\n// which corresponds to scattering coefficients at sea level\n#define BETA_R                  vec3(5.5e-6, 13.0e-6, 22.4e-6)\n// The following constants are from [1] Figure 6 and section 2.1\n#define BETA_M                  vec3(21e-6, 21e-6, 21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0 // m\n#define DENSITY_HEIGHT_SCALE_M  1200.0 // m\n// [1] and [2] section 2.1\n#define PLANET_RADIUS           6360e3 // m\n#define ATMOSPHERE_RADIUS       6420e3 // m\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\n\nfloat ray_sphere_exit(vec3 orig, vec3 dir, float radius) {\n    float a = dot(dir, dir);\n    float b = 2.0 * dot(dir, orig);\n    float c = dot(orig, orig) - radius * radius;\n    float d = sqrt(b * b - 4.0 * a * c);\n    return (-b + d) / (2.0 * a);\n}\n\nvec3 extinction(vec2 density) {\n    return exp(-vec3(BETA_R * u_color_tint_r.a * density.x + BETA_M * u_color_tint_m.a * density.y));\n}\n\nvec2 local_density(vec3 point) {\n    float height = max(length(point) - PLANET_RADIUS, 0.0);\n    // Explicitly split in two shader statements, exp(vec2)\n    // did not behave correctly on specific arm mali arch.\n    float exp_r = exp(-height / DENSITY_HEIGHT_SCALE_R);\n    float exp_m = exp(-height / DENSITY_HEIGHT_SCALE_M);\n    return vec2(exp_r, exp_m);\n}\n\nfloat phase_ray(float cos_angle) {\n    return (3.0 / (16.0 * PI)) * (1.0 + cos_angle * cos_angle);\n}\n\nfloat phase_mie(float cos_angle) {\n    return (3.0 / (8.0 * PI)) * ((1.0 - MIE_G * MIE_G) * (1.0 + cos_angle * cos_angle)) /\n        ((2.0 + MIE_G * MIE_G) * pow(1.0 + MIE_G * MIE_G - 2.0 * MIE_G * cos_angle, 1.5));\n}\n\nvec2 density_to_atmosphere(vec3 point, vec3 light_dir) {\n    float ray_len = ray_sphere_exit(point, light_dir, ATMOSPHERE_RADIUS);\n    float step_len = ray_len / float(DENSITY_STEPS);\n\n    vec2 density_point_to_atmosphere = vec2(0.0);\n    for (int i = 0; i < DENSITY_STEPS; ++i) {\n        vec3 point_on_ray = point + light_dir * ((float(i) + 0.5) * step_len);\n        density_point_to_atmosphere += local_density(point_on_ray) * step_len;;\n    }\n\n    return density_point_to_atmosphere;\n}\n\nvec3 atmosphere(vec3 ray_dir, vec3 sun_direction, float sun_intensity) {\n    vec2 density_orig_to_point = vec2(0.0);\n    vec3 scatter_r = vec3(0.0);\n    vec3 scatter_m = vec3(0.0);\n    vec3 origin = vec3(0.0, PLANET_RADIUS, 0.0);\n\n    float ray_len = ray_sphere_exit(origin, ray_dir, ATMOSPHERE_RADIUS);\n    float step_len = ray_len / float(SAMPLE_STEPS);\n    for (int i = 0; i < SAMPLE_STEPS; ++i) {\n        vec3 point_on_ray = origin + ray_dir * ((float(i) + 0.5) * step_len);\n\n        // Local density\n        vec2 density = local_density(point_on_ray) * step_len;\n        density_orig_to_point += density;\n\n        // Density from point to atmosphere\n        vec2 density_point_to_atmosphere = density_to_atmosphere(point_on_ray, sun_direction);\n\n        // Scattering contribution\n        vec2 density_orig_to_atmosphere = density_orig_to_point + density_point_to_atmosphere;\n        vec3 extinction = extinction(density_orig_to_atmosphere);\n        scatter_r += density.x * extinction;\n        scatter_m += density.y * extinction;\n    }\n\n    // The mie and rayleigh phase functions describe how much light\n    // is scattered towards the eye when colliding with particles\n    float cos_angle = dot(ray_dir, sun_direction);\n    float phase_r = phase_ray(cos_angle);\n    float phase_m = phase_mie(cos_angle);\n\n    // Apply light color adjustments\n    vec3 beta_r = BETA_R * u_color_tint_r.rgb * u_color_tint_r.a;\n    vec3 beta_m = BETA_M * u_color_tint_m.rgb * u_color_tint_m.a;\n\n    return (scatter_r * phase_r * beta_r + scatter_m * phase_m * beta_m) * sun_intensity;\n}\n\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nvec3 uncharted2_tonemap(vec3 x) {\n   return ((x * (A * x + C * B) + D * E) / (x * (A * x + B) + D * F)) - E / F;\n}\n\nvoid main() {\n    vec3 ray_direction = v_position;\n\n    // Non-linear UV parameterization to increase horizon events\n    ray_direction.y = pow(ray_direction.y, 5.0);\n\n    // Add a small offset to prevent black bands around areas where\n    // the scattering algorithm does not manage to gather lighting\n    const float y_bias = 0.015;\n    ray_direction.y += y_bias;\n\n    vec3 color = atmosphere(normalize(ray_direction), u_sun_direction, u_sun_intensity);\n\n    // Apply exposure [3]\n    float white_scale = 1.0748724675633854; // 1.0 / uncharted2_tonemap(1000.0)\n    color = uncharted2_tonemap((log2(2.0 / pow(u_luminance, 4.0))) * color) * white_scale;\n\n    gl_FragColor = vec4(color, 1.0);\n}\n","attribute highp vec3 a_pos_3f;\n\nuniform mat3 u_matrix_3f;\n\nvarying highp vec3 v_position;\n\nfloat map(float value, float start, float end, float new_start, float new_end) {\n    return ((value - start) * (new_end - new_start)) / (end - start) + new_start;\n}\n\nvoid main() {\n    vec4 pos = vec4(u_matrix_3f * a_pos_3f, 1.0);\n\n    v_position = pos.xyz;\n    v_position.y *= -1.0;\n\n    // To make better utilization of the visible range (e.g. over the horizon, UVs\n    // from 0.0 to 1.0 on the Y-axis in cubemap space), the UV range is remapped from\n    // (-1.0,1.0) to (0.0,1.0) on y. The inverse operation is applied when sampling.\n    v_position.y = map(v_position.y, -1.0, 1.0, 0.0, 1.0);\n\n    gl_Position = vec4(a_pos_3f.xy, 0.0, 1.0);\n}\n")};function he(t,e,n){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,o=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=t.match(r),s=e.match(r),l=re.match(r);let c=s?s.concat(a):a;n||(ae.staticUniforms&&(c=ae.staticUniforms.concat(c)),se.staticUniforms&&(c=se.staticUniforms.concat(c))),c&&(c=c.concat(l));const u={};return{fragmentSource:t=t.replace(i,((t,e,n,i,r)=>(u[r]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nvarying ${n} ${i} ${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = u_${r};\n#endif\n`))),vertexSource:e=e.replace(i,((t,e,n,i,r)=>{const o="float"===i?"vec2":"vec4",a=r.match(/color/)?"color":o;return u[r]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${n} ${o} a_${r};\nvarying ${n} ${i} ${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = a_${r};\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = unpack_mix_${a}(a_${r}, u_${r}_t);\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${n} ${o} a_${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = a_${r};\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = unpack_mix_${a}(a_${r}, u_${r}_t);\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`})),staticAttributes:o,staticUniforms:c}}class de{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,n,i,r,o,a,s){this.context=t;let l=this.boundPaintVertexBuffers.length!==i.length;for(let t=0;!l&&t<i.length;t++)this.boundPaintVertexBuffers[t]!==i[t]&&(l=!0);const c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==n||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,n,i,r,o,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())}freshBind(e,n,i,r,o,a,s){let l;const c=e.numAttributes,u=this.context,h=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=e,this.boundLayoutVertexBuffer=n,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=o,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=s;else{l=u.currentNumAttributes||0;for(let e=c;e<l;e++)t.assert_1(0!==e),h.disableVertexAttribArray(e)}n.enableAttributes(h,e);for(const t of i)t.enableAttributes(h,e);a&&a.enableAttributes(h,e),s&&s.enableAttributes(h,e),n.bind(),n.setVertexAttribPointers(h,e,o);for(const t of i)t.bind(),t.setVertexAttribPointers(h,e,o);a&&(a.bind(),a.setVertexAttribPointers(h,e,o)),r&&r.bind(),s&&(s.bind(),s.setVertexAttribPointers(h,e,o)),u.currentNumAttributes=c}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function pe(e,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.MercatorCoordinate(0,r/i).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/i).toLngLat().lat]}function fe(e,n,i,r,o,a,s){const l=e.context,c=l.gl,u=i.fbo;if(!u)return;e.prepareDrawTile(n);const h=e.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((t,e,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:i||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:pe(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}})(e,i,r,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,h,n.toUnwrapped()),h.draw(l,c.TRIANGLES,o,a,s,t.CullFaceMode.disabled,d,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function me(e,n,i){if(!n.needsDEMTextureUpload)return;const r=e.context,o=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1);const a=i.stride;n.demTexture=n.demTexture||e.getTileTexture(a);const s=i.getPixels();n.demTexture?n.demTexture.update(s,{premultiply:!1}):n.demTexture=new t.Texture(r,s,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function ge(e,n,i,r,o,a){const s=e.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),me(e,n,c),t.assert_1(n.demTexture),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const e=new t.Texture(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(e.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,o,a,t.CullFaceMode.disabled,((e,n)=>{const i=n.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}const _e=(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image0:new t.Uniform1i(e,n.u_image0),u_skirt_height:new t.Uniform1f(e,n.u_skirt_height)}),ye=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e});const ve=new class{constructor(){this.operations={}}newMorphing(e,n,i,r,o){if(t.assert_1(n.demTexture&&i.demTexture),t.assert_1(n.tileID.key!==i.tileID.key),e in this.operations){const n=this.operations[e];t.assert_1(n.from&&n.to),n.to.tileID.key!==i.tileID.key&&(n.queued=i)}else this.operations[e]={startTime:r,phase:0,duration:o,from:n,to:i,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const n=this.operations[e],i=n.from,r=n.to;return t.assert_1(i&&r),{from:i,to:r,phase:n.phase}}update(e){for(const n in this.operations){const i=this.operations[n];for(t.assert_1(i.from&&i.to),i.phase=(e-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,e)){delete this.operations[n];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},be={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function xe(e,n,i,r,o){const a=e.context,s=a.gl;let l,c;const u=e.options.showTerrainWireframe?2:0,h=(t,n)=>{if(c===t)return;const i=[be[t]];n&&i.push(be[u]),l=e.useProgram("terrainRaster",null,i),c=t},d=e.colorModeForRenderPass(),p=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);ve.update(o);const f=e.transform,m=(g=f.zoom,6*Math.pow(1.5,22-g)*n.exaggeration());var g;(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[_,y]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of r){const r=i.getTile(c),x=t.StencilMode.disabled,w=n.prevTerrainTileForTile[c.key],E=n.terrainTileForTile[c.key];b=E,null!=(v=w)&&null!=b&&!(!v.hasData()||!b.hasData())&&null!=v.demTexture&&null!=b.demTexture&&v.tileID.key!==b.tileID.key&&ve.newMorphing(c.key,w,E,o,250),a.activeTexture.set(s.TEXTURE0),r.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const M=ve.getMorphValuesForProxy(c.key),T=M?1:0;let S;M&&(S={morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:t.easeCubicInOut(M.phase)}});const k=ye(c.projMatrix,we(c.canonical,f.renderWorldCopies)?m/10:m);h(T,u),n.setupElevationDraw(r,l,S),e.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,x,d,t.CullFaceMode.backCCW,k,"terrain_raster",n.gridBuffer,_,y)}var v,b}))}function we(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const Ee=t=>({u_matrix:t});function Me(e,n,i,r,o){if(o>0){const a=t.exported.now(),s=(a-e.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=i.getSource(),u=r.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class Te extends t.SourceCache{constructor(t){const e=O("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new M(H(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,i){if(e.freezeTileCoverage)return;this.transform=e;const r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,i)=>{if(n[i.key]="",!this._tiles[i.key]){const n=new t.Tile(i,this._source.tileSize*i.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[i.key]=n}return n}),{});for(const t in this._tiles)t in r||(this.freeFBO(t),this._tiles[t].state="unloaded",delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Se extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class ke extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[i,r,o]=function(e){const n=new t.StructArrayLayout4i8,i=new t.StructArrayLayout3ui6,r=e+2;n.reserve(r*r),i.reserve((r-1)*(r-1)*2);const o=t.EXTENT/(e-1),a=t.EXTENT+o/2,s=a+o,l=24575;for(let e=-o;e<s;e+=o)for(let i=-o;i<s;i+=o){const r=i<0||i>a||e<0||e>a?l:0,o=t.clamp(Math.round(i),0,t.EXTENT),s=t.clamp(Math.round(e),0,t.EXTENT);n.emplaceBack(o+r,s,o,s)}const c=(r-3)*(r-3)*2,u=(t,e)=>{const n=e*r+t;i.emplaceBack(n+1,n,n+r),i.emplaceBack(n+r,n+r+1,n+1)};for(let t=1;t<r-2;t++)for(let e=1;e<r-2;e++)u(e,t);return[0,r-2].forEach((t=>{for(let e=0;e<r-1;e++)u(e,t),u(t,e)})),[n,i,c]}(129),a=e.context;this.gridBuffer=a.createVertexBuffer(i,z.members),this.gridIndexBuffer=a.createIndexBuffer(r),this.gridSegments=t.SegmentVector.simpleSegment(0,0,i.length,r.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,i.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Te(n.map),this.orthoMatrix=t.create(),t.ortho(this.orthoMatrix,0,t.EXTENT,0,t.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new t.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(e,n,i){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const r=e.terrain.properties;this.sourceCache=e._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const e=this.sourceCache.getSource().tileSize/128,i=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(n,e*i,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!i),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain?t.assert_1(100===e.efficiency):100!==e.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${e.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${e.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=n.getIds().map((t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=i.calculateProjMatrix(e.toUnwrapped()),e}));(function(e,n){const i=n.transform.pointCoordinate(n.transform.getCameraPoint()),r=new t.pointGeometry(i.x,i.y);e.sort(((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const i=new t.pointGeometry(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=r.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(i)-a.distSqr(o)}))})(r,this.painter),this._previousZoom=i.zoom;const o=this.proxyToSource||{};this.proxyToSource={},r.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const t in a){const n=a[t];if(!n.used)continue;if(n!==this.sourceCache&&(this._findCoveringTileCache[n.id]={}),this._setupProxiedCoordsForOrtho(n,e[t],o),n.usedForTerrain)continue;const i=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(i)}this.proxiedCoords[n.id]=r.map((t=>new Se(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const s={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in s||(this._visibleDemTiles.push(e),s[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const i=this.terrainTileForTile[n],r=i.dem;!r||i.demTexture&&!i.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),me(this.painter,i,r))}}_prepareDemTileUniforms(e,n,i,r){if(!n||null==n.demTexture)return!1;t.assert_1(n.dem);const o=e.tileID.canonical,a=n.tileID.canonical,s=Math.pow(2,a.z-o.z),l=r||"";return i[`u_dem_tl${l}`]=[o.x*s%1,o.y*s%1],i[`u_dem_scale${l}`]=s,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,n)=>{if(!n.dem)return e;const i=n.dem.tree.minimums[0];return i>0&&t++,e+i}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const i=this._getLoadedAreaMinimum(),r={width:1,height:1,data:new Uint8Array(t.DEMData.pack(i,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(r,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1}),o}setupElevationDraw(e,n,i){const r=this.painter.context,o=r.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(i&&i.morphing&&this._useVertexMorphing){const t=i.morphing.srcDemTile,n=i.morphing.dstDemTile;u=i.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,a,"_prev")&&(c=t),this._prepareDemTileUniforms(e,n,a)&&(l=n))}if(c&&l?(r.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),r.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[e.tileID.key],r.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST)),i&&i.useDepthForOcclusion&&(r.activeTexture.set(o.TEXTURE3),this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),i&&i.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=e}i&&i.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=i.labelPlaneMatrixInv),n.setTerrainUniformValues(r,a)}renderToBackBuffer(t){const e=this.painter,n=this.painter.context;0!==t.length&&(n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height]),this.renderingToTexture=!1,xe(e,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,t.splice(0,t.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,i=this.painter.context,r=this.proxySourceCache,o=this.proxiedCoords[r.id],a=this._drapedRenderBatches.shift();t.assert_1(a.start===e);const s=[],l=n.style.order;let c=0;for(const u of o){const o=r.getTileByID(u.proxyTileKey),h=r.proxyCachedFBO[u.key]?r.proxyCachedFBO[u.key][e]:void 0,d=void 0!==h?r.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=d.tex,p&&!d.dirty){s.push(o.tileID);continue}let f;i.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(i.clear({color:t.Color.transparent}),d.dirty=!1);for(let e=a.start;e<=a.end;++e){const r=n.style._layers[l[e]],o=r.isHidden(n.transform.zoom);if(t.assert_1(this._style.isLayerDraped(r)||o),o)continue;const a=n.style._getLayerSourceCache(r),s=a?this.proxyToSource[u.key][a.id]:[u];if(!s)continue;const c=s;i.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(a?a.id:null)&&(this._setupStencil(d,s,r,a),f=a?a.id:null),n.renderLayer(n,a,r,c)}this.renderedToTile?(d.dirty=!0,s.push(o.tileID)):p||(--c,t.assert_1(c>=0)),5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){t.assert_1(0===this._drapedRenderBatches.length)}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,i=0,r=0,o=!1;for(let a=0;a<e;++a){const e=t._layers[t.order[a]];this._style.isLayerDraped(e)?(o&&++i,++r):o||(o=!0,n=e.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-i/r),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{const n=e.dem.tree;t=Math.min(t,n.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const i=this._visibleDemTiles.filter((t=>t.dem)).map((i=>{const r=i.tileID,o=Math.pow(2,r.overscaledZ),{x:a,y:s}=r.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:i.dem.tree.raycastRoot(l,u,c,h,t,e,n),tile:i}}));i.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const r of i){if(null==r.t)return null;const i=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,t,e,n);if(null!=i)return i}return null}_createFBO(){const e=this.painter.context,n=e.gl,i=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const r=new t.Texture(e,{width:i[0],height:i[1],data:null},n.RGBA);r.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=e.createFramebuffer(i[0],i[1],!1);return o.colorAttachment.set(r.texture),o.depthAttachment=new t.DepthStencilAttachment(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,i[0],i[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom),i=e.getCrossfadeParameters(),r=!!i&&1!==i.t,o=e.hasTransition();return"custom"!==e.type&&!n&&(r||o)}))}_clearRasterFadeFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof D){t=!0;break}if(t)for(let t=0;t<this._style.order.length;++t){const e=this._style._layers[this._style.order[t]],n=e.isHidden(this.painter.transform.zoom),i=this._style._getLayerSourceCache(e);if("raster"!==e.type||n||!i)continue;const r=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][i.id];if(e)for(const t of e){const e=Me(i.getTile(t),i.findLoadedParent(t,0),i,this.painter.transform,r);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(i.id,t)}}}}_setupDrapedRenderBatches(){const e=this._style.order,n=e.length;if(0===n)return;const i=[];let r,o=0,a=this._style._layers[e[o]];for(;!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++o<n;)a=this._style._layers[e[o]];for(;o<n;++o){const t=this._style._layers[e[o]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=o):void 0!==r&&(i.push({start:r,end:o-1}),r=void 0))}void 0!==r&&i.push({start:r,end:o-1}),this._style.map._optimizeForTerrain&&t.assert_1(1===i.length||0===i.length),this._drapedRenderBatches=i}_setupRenderCache(e){const n=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,n.renderCache.length>n.renderCachePool.length){const e=Object.values(n.proxyCachedFBO);n.proxyCachedFBO={};for(let t=0;t<e.length;++t){const i=Object.values(e[t]);n.renderCachePool.push(...i)}t.assert_1(n.renderCache.length===n.renderCachePool.length)}return}this._clearRasterFadeFromRenderCache();const i=this.proxyCoords,r=this._tilesDirty;for(let o=i.length-1;o>=0;o--){const a=i[o],s=n.getTileByID(a.key);if(void 0!==n.proxyCachedFBO[a.key]){t.assert_1(s.texture);const i=e[a.key];t.assert_1(i);const o=this.proxyToSource[a.key];let l=0;for(const t in o){const e=o[t],n=i[t];if(!n||n.length!==e.length||e.some(((e,i)=>e!==n[i]||r[t]&&r[t].hasOwnProperty(e.key)))){l=-1;break}++l}for(const t in n.proxyCachedFBO[a.key])n.renderCache[n.proxyCachedFBO[a.key][t]].dirty=l<0||l!==Object.values(i).length}}const o=[...this._drapedRenderBatches];o.sort(((t,e)=>{const n=t.end-t.start;return e.end-e.start-n}));for(const t of o)for(const e of i){if(n.proxyCachedFBO[e.key])continue;let i=n.renderCachePool.pop();void 0===i&&n.renderCache.length<50&&(i=n.renderCache.length,n.renderCache.push(this._createFBO())),void 0!==i&&(n.proxyCachedFBO[e.key]={},n.proxyCachedFBO[e.key][t.start]=i,n.renderCache[i].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,n,i){if(!i||!this._sourceTilesOverlap[i.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,o=r.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let a;if(t.fb,n.isTileClipped())a=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const i=this.painter,r=this.painter.context,o=r.gl;i._tileClippingMaskIDs={},r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const a=i.useProgram("clippingMask");for(const s of e){const e=i._tileClippingMaskIDs[s.key]=--n;a.draw(r,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Ee(s.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const i=[e.x,e.y,1,1];t.transformMat4$1(i,i,n.pixelMatrixInverse),t.scale$1(i,i,1/i[3]),i[0]/=n.worldSize,i[1]/=n.worldSize;const r=n._camera.position,o=t.mercatorZfromAltitude(1,n.center.lat),a=[r[0],r[1],r[2]/o,0],s=t.subtract([],i.slice(0,3),a);t.normalize(s,s);const l=this._exaggeration,c=this.raycast(a,s,l);return null!==c&&c?(t.scaleAndAdd(a,a,s,c),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const e=this.painter,n=e.context,i=this.proxySourceCache,r=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const e=n.gl,i=n.createFramebuffer(r,o,!0);n.activeTexture.set(e.TEXTURE0);const a=new t.Texture(n,{width:r,height:o,data:null},e.RGBA);a.bind(e.NEAREST,e.CLAMP_TO_EDGE),i.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,r,o);i.depthAttachment.set(s),this._depthFBO=i,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,r,o]),function(e,n,i,r){t.assert_1("offscreen"===e.renderPass);const o=e.context,a=o.gl;o.clear({depth:1});const s=e.useProgram("terrainDepth"),l=new t.DepthMode(a.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const e of r){const r=i.getTile(e),c=ye(e.projMatrix,0);n.setupElevationDraw(r,s),s.draw(o,a.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,c,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,i,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,n,i){if(e.getSource()instanceof N)return this._setupProxiedCoordsForImageSource(e,n,i);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],o=this.proxyCoords;for(let n=0;n<o.length;n++){const a=o[n],s=this._findTileCoveringTileID(a,e);if(s){t.assert_1(s.hasData());const n=this._createProxiedId(a,s,i[a.key]&&i[a.key][e.id]);r.push(n),this.proxyToSource[a.key][e.id]=[n]}}let a=!1;for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;const s=this._findTileCoveringTileID(o.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==o.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],n=this._createProxiedId(s.tileID,o,i[s.tileID.key]&&i[s.tileID.key][e.id]);t?t.splice(t.length-1,0,n):this.proxyToSource[s.tileID.key][e.id]=[n],r.push(n),a=!0}}this._sourceTilesOverlap[e.id]=a}_setupProxiedCoordsForImageSource(e,n,i){if(!e.getSource().loaded())return;const r=this.proxiedCoords[e.id]=[],o=this.proxyCoords,a=e.getSource(),s=new t.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-s.x),t.min.y=Math.min(t.min.y,e.y-s.y),t.max.x=Math.max(t.max.x,e.x-s.x),t.max.y=Math.max(t.max.y,e.y-s.y),t)),{min:new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(e,n)=>{const i=e.wrap+e.canonical.x/(1<<e.canonical.z),r=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return i+o<a+l.min.x||i>a+l.max.x||r+o<s+l.min.y||r>s+l.max.y};for(let t=0;t<o.length;t++){const a=o[t];for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,i[a.key]&&i[a.key][e.id]),l=this.proxyToSource[a.key][e.id];l?l.push(s):this.proxyToSource[a.key][e.id]=[s],r.push(s)}}}_createProxiedId(e,n,i){let r=this.orthoMatrix;if(i){const t=i.find((t=>t.key===n.tileID.key));if(t)return t}if(n.tileID.key!==e.key){const i=e.canonical.z-n.tileID.canonical.z;let o,a,s;r=t.create();const l=n.tileID.wrap-e.wrap<<e.overscaledZ;i>0?(o=t.EXTENT>>i,a=o*((n.tileID.canonical.x<<i)-e.canonical.x+l),s=o*((n.tileID.canonical.y<<i)-e.canonical.y)):(o=t.EXTENT<<-i,a=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+l<<-i)),s=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-i))),t.ortho(r,0,o,0,o,0,1),t.translate(r,r,[a,s,0])}return new Se(n.tileID,e.key,r)}_findTileCoveringTileID(e,n){let i=n.getTile(e);if(i&&i.hasData())return i;const r=this._findCoveringTileCache[n.id],o=r[e.key];if(i=o?n.getTileByID(o):null,i&&i.hasData()||null===o)return i;t.assert_1(!o||i);let a=i?i.tileID:e,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const r=n.getSource().maxzoom;if(e.canonical.z>=r){const i=e.canonical.z-r;n.getSource().reparseOverscaled?(s=Math.max(e.canonical.z+2,n.transform.tileZoom),a=new t.OverscaledTileID(s,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i)):0!==i&&(s=r,a=new t.OverscaledTileID(s,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i))}a.key!==e.key&&(c.push(a.key),i=n.getTile(a))}const u=t=>{c.forEach((e=>{r[e]=t})),c.length=0};for(s-=1;s>=l&&(!i||!i.hasData());s--){i&&u(i.tileID.key);const e=a.calculateScaledKey(s);if(i=n.getTileByID(e),i&&i.hasData())break;const o=r[e];if(null===o)break;void 0===o?c.push(e):(i=n.getTileByID(o),t.assert_1(i))}return u(i?i.tileID.key:null),i&&i.hasData()?i:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(t){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n,i,r;const o=new t.StructArrayLayout2ui4,a=e+2;for(i=1;i<e;i++){for(n=1;n<e;n++)r=i*a+n,o.emplaceBack(r,r+1),o.emplaceBack(r,r+a),o.emplaceBack(r+1,r+a),i===e-1&&o.emplaceBack(r+a,r+a+1);o.emplaceBack(r+1,r+1+a)}return o}(129);this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function Ce(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const i=t[n].split(" ");e.push(i.pop())}return e}class Ie{static cacheKey(t,e,n){let i=`${t}${n?n.cacheKey:""}`;for(const t of e)i+=`/${t}`;return i}constructor(e,n,i,r,o,a){const s=e.gl;this.program=s.createProgram();const l=Ce(i.staticAttributes),c=r?r.getBinderAttributes():[],u=l.concat(c),h=i.staticUniforms?Ce(i.staticUniforms):[],d=r?r.getBinderUniforms():[],p=h.concat(d),f=[];for(const t of p)f.indexOf(t)<0&&f.push(t);let m=r?r.defines():[];m=m.concat(a.map((t=>`#define ${t}`)));const g=m.concat(le.fragmentSource,ce,se.fragmentSource,i.fragmentSource).join("\n"),_=m.concat(le.vertexSource,ce,se.vertexSource,ae.vertexSource,i.vertexSource).join("\n"),y=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(y,g),s.compileShader(y),t.assert_1(s.getShaderParameter(y,s.COMPILE_STATUS),s.getShaderInfoLog(y)),s.attachShader(this.program,y);const v=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(v,_),s.compileShader(v),t.assert_1(s.getShaderParameter(v,s.COMPILE_STATUS),s.getShaderInfoLog(v)),s.attachShader(this.program,v),this.attributes={};const b={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);s.linkProgram(this.program),t.assert_1(s.getProgramParameter(this.program,s.LINK_STATUS),s.getProgramInfoLog(this.program)),s.deleteShader(v),s.deleteShader(y);for(let t=0;t<f.length;t++){const e=f[t];if(e&&!b[e]){const t=s.getUniformLocation(this.program,e);t&&(b[e]=t)}}this.fixedUniforms=o(e,b),this.binderUniforms=r?r.getUniforms(e,b):[],-1!==a.indexOf("TERRAIN")&&(this.terrainUniforms=((e,n)=>({u_dem:new t.Uniform1i(e,n.u_dem),u_dem_prev:new t.Uniform1i(e,n.u_dem_prev),u_dem_unpack:new t.Uniform4f(e,n.u_dem_unpack),u_dem_tl:new t.Uniform2f(e,n.u_dem_tl),u_dem_scale:new t.Uniform1f(e,n.u_dem_scale),u_dem_tl_prev:new t.Uniform2f(e,n.u_dem_tl_prev),u_dem_scale_prev:new t.Uniform1f(e,n.u_dem_scale_prev),u_dem_size:new t.Uniform1f(e,n.u_dem_size),u_dem_lerp:new t.Uniform1f(e,n.u_dem_lerp),u_exaggeration:new t.Uniform1f(e,n.u_exaggeration),u_depth:new t.Uniform1i(e,n.u_depth),u_depth_size_inv:new t.Uniform2f(e,n.u_depth_size_inv),u_meter_to_dem:new t.Uniform1f(e,n.u_meter_to_dem),u_label_plane_matrix_inv:new t.UniformMatrix4f(e,n.u_label_plane_matrix_inv)}))(e,b)),-1!==a.indexOf("FOG")&&(this.fogUniforms=((e,n)=>({u_fog_matrix:new t.UniformMatrix4f(e,n.u_fog_matrix),u_fog_range:new t.Uniform2f(e,n.u_fog_range),u_fog_color:new t.Uniform4f(e,n.u_fog_color),u_fog_horizon_blend:new t.Uniform1f(e,n.u_fog_horizon_blend),u_fog_temporal_offset:new t.Uniform1f(e,n.u_fog_temporal_offset)}))(e,b))}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].location&&n[t].set(e[t])}}draw(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(o);for(const t in this.fixedUniforms)this.fixedUniforms[t].set(a[t]);p&&p.setUniforms(t,this.binderUniforms,h,{zoom:d});const _={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[e];for(const n of u.get()){const i=n.vaos||(n.vaos={});(i[s]||(i[s]=new de)).bind(t,this,l,p?p.getPaintVertexBuffers():[],c,n.vertexOffset,f,m),g.drawElements(e,n.primitiveLength*_,g.UNSIGNED_SHORT,n.primitiveOffset*_*2)}}}function Le(t,e,n){const i=1/T(n,1,e.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/r,a=o*(n.tileID.canonical.x+n.tileID.wrap*r),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const De=(e,n,i,r)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$1();"viewport"===o.properties.get("anchor")&&(t.fromRotation(l,-n.transform.angle),t.transformMat3(s,s,l));const c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+i,u_opacity:r}},Ae=(e,n,i,r,o,a,s)=>t.extend(De(e,n,i,r),Le(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),Pe=t=>({u_matrix:t}),ze=(e,n,i,r)=>t.extend(Pe(e),Le(i,n,r)),Ne=(t,e)=>({u_matrix:t,u_world:e}),Re=(e,n,i,r,o)=>t.extend(ze(e,n,i,r),{u_world:o}),Oe=(e,n,i,r)=>{const o=e.transform;let a;if("map"===r.paint.get("circle-pitch-alignment")){const t=T(i,1,o.zoom);a=[t,t]}else a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:a}},Fe=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Be=(e,n,i)=>{const r=t.EXTENT/i.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/r,n.pixelsToGLUnits[1]/r]}},Ue=(t,e,n=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}),Ye=(t,e,n,i)=>({u_matrix:t,u_extrude_scale:T(e,1,n),u_intensity:i}),je=(e,n,i,r)=>{const o=e.transform;return{u_matrix:$e(e,n,i,r),u_ratio:1/T(n,1,o.zoom),u_device_pixel_ratio:t.exported.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Ve=(e,n,i,r,o)=>t.extend(je(e,n,i,r),{u_image:0,u_image_height:o}),Ge=(e,n,i,r,o)=>{const a=e.transform,s=He(n,a);return{u_matrix:$e(e,n,i,o),u_texsize:n.imageAtlasTexture.size,u_ratio:1/T(n,1,a.zoom),u_device_pixel_ratio:t.exported.devicePixelRatio,u_image:0,u_scale:[s,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},qe=(e,n,i,r,o)=>{const a=He(n,e.transform);return t.extend(je(e,n,i,o),{u_texsize:n.lineAtlasTexture.size,u_scale:[a,r.fromScale,r.toScale],u_image:0,u_mix:r.t})};function He(t,e){return 1/T(t,1,e.tileZoom)}function $e(t,e,n,i){return t.translatePosMatrix(i||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Ze=(t,e,n,i,r)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:We(r.paint.get("raster-hue-rotate"))};var o,a};function We(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const Xe=(t,e,n,i,r,o,a,s,l,c)=>{const u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+i,u_texsize:c,u_texture:0}},Ke=(e,n,i,r,o,a,s,l,c,u,h)=>{const{cameraToCenterDistance:d,_pitch:p}=o.transform;return t.extend(Xe(e,n,i,r,o,a,s,l,c,u),{u_gamma_scale:r?d*Math.cos(o.terrain?0:p):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h})},Je=(e,n,i,r,o,a,s,l,c,u)=>t.extend(Ke(e,n,i,r,o,a,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),Qe=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),tn=(e,n,i,r,o,a)=>t.extend(function(e,n,i,r){const o=i.imageManager.getPattern(e.from.toString()),a=i.imageManager.getPattern(e.to.toString());t.assert_1(o&&a);const{width:s,height:l}=i.imageManager.getPixelSize(),c=Math.pow(2,r.tileID.overscaledZ),u=r.tileSize*Math.pow(2,i.transform.tileZoom)/c,h=u*(r.tileID.canonical.x+r.tileID.wrap*c),d=u*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:o.tl,u_pattern_br_a:o.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:n.t,u_pattern_size_a:o.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:n.fromScale,u_scale_b:n.toScale,u_tile_units_to_pixels:1/T(r,1,i.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(r,a,i,o),{u_matrix:e,u_opacity:n}),en={fillExtrusion:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale)}),collisionCircle:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_scale:new t.Uniform3f(e,n.u_scale),u_mix:new t.Uniform1f(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),background:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}),terrainRaster:_e,terrainDepth:_e,skybox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_sun_direction:new t.Uniform3f(e,n.u_sun_direction),u_cubemap:new t.Uniform1i(e,n.u_cubemap),u_opacity:new t.Uniform1f(e,n.u_opacity),u_temporal_offset:new t.Uniform1f(e,n.u_temporal_offset)}),skyboxGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_center_direction:new t.Uniform3f(e,n.u_center_direction),u_radius:new t.Uniform1f(e,n.u_radius),u_opacity:new t.Uniform1f(e,n.u_opacity),u_temporal_offset:new t.Uniform1f(e,n.u_temporal_offset)}),skyboxCapture:(e,n)=>({u_matrix_3f:new t.UniformMatrix3f(e,n.u_matrix_3f),u_sun_direction:new t.Uniform3f(e,n.u_sun_direction),u_sun_intensity:new t.Uniform1f(e,n.u_sun_intensity),u_color_tint_r:new t.Uniform4f(e,n.u_color_tint_r),u_color_tint_m:new t.Uniform4f(e,n.u_color_tint_m),u_luminance:new t.Uniform1f(e,n.u_luminance)})};let nn;function rn(e,n,i,r,o,a,s){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[];let d=0,p=0;for(let f=0;f<r.length;f++){const m=r[f],g=n.getTile(m),_=g.getBucket(i);if(!_)continue;let y=m.projMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(m.projMatrix,g,o,a));const v=s?_.textCollisionBox:_.iconCollisionBox,b=_.collisionCircleArray;if(b.length>0){const n=t.create(),i=y;t.mul(n,_.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(n,n,_.placementViewportMatrix),h.push({circleArray:b,circleOffset:p,transform:i,invTransform:n}),d+=b.length/4,p=d}v&&(e.terrain&&e.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Be(y,e.transform,g),i.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,v.collisionVertexBuffer,v.collisionVertexBufferExt))}if(!s||!h.length)return;const f=e.useProgram("collisionCircle"),m=new t.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let g=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];m.emplace(g++,i,r,o,a,0),m.emplace(g++,i,r,o,a,1),m.emplace(g++,i,r,o,a,2),m.emplace(g++,i,r,o,a,3)}(!nn||nn.length<2*d)&&(nn=function(e){const n=2*e,i=new t.StructArrayLayout3ui6;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(d));const _=l.createIndexBuffer(nn,!0),y=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const n of h){const r=(v=n.transform,b=n.invTransform,x=e.transform,{u_matrix:v,u_inv_matrix:b,u_camera_to_center_distance:x.cameraToCenterDistance,u_viewport_size:[x.width,x.height]});f.draw(l,c.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,r,i.id,y,_,t.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,e.transform.zoom,null,null,null)}var v,b,x;y.destroy(),_.destroy()}const on=t.identity(new Float32Array(16));function an(e,n,i,r,o,a){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),c=-(s-.5)*n,u=-(l-.5)*i,h=t.evaluateVariableOffset(e,r);return new t.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function sn(e,n,i,r,o,a,s,l,c,u,h,d){const p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,g={};f.clear();for(let m=0;m<p.length;m++){const _=p.get(m),y=e.allowVerticalPlacement&&!_.placedOrientation,v=_.hidden||!_.crossTileID||y?null:r[_.crossTileID];if(v){const r=new t.pointGeometry(_.anchorX,_.anchorY),p=d(r),m=dt(r,i?l:s,p),y=pt(a.cameraToCenterDistance,m.signedDistanceFromCamera);let b=o.evaluateSizeForFeature(e.textSizeData,u,_)*y/t.ONE_EM;i&&(b*=e.tilePixelRatio/c);const{width:x,height:w,anchor:E,textOffset:M,textScale:T}=v,S=an(E,x,w,M,T,b),k=i?dt(r.add(S),s,p).point:m.point.add(n?S.rotate(-a.angle):S),C=e.allowVerticalPlacement&&_.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<_.numGlyphs;e++)t.addDynamicAttributes(f,k,C);h&&_.associatedIconIndex>=0&&(g[_.associatedIconIndex]={shiftedAnchor:k,angle:C})}else wt(_.numGlyphs,f)}if(h){m.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const i=n.get(e);if(i.hidden)wt(i.numGlyphs,m);else{const n=g[e];if(n)for(let e=0;e<i.numGlyphs;e++)t.addDynamicAttributes(m,n.shiftedAnchor,n.angle);else wt(i.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function ln(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function cn(e,n,i,r,o,a,s,l,c,u,h,d){const p=e.context,f=p.gl,m=e.transform,g="map"===l,_="map"===c,y=g&&"point"!==i.layout.get("symbol-placement"),v=g&&!_&&!y,b=void 0!==i.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),E=i.layout.get("text-variable-anchor"),M=[],S=e.terrain&&_?["PITCH_WITH_MAP_TERRAIN"]:null;for(const l of r){const r=n.getTile(l),c=r.getBucket(i);if(!c)continue;const h=o?c.text:c.icon;if(!h||!h.segments.get().length)continue;const d=h.programConfigurations.get(i.id),p=o||c.sdfIcons,w=o?c.textSizeData:c.iconSizeData,k=_||0!==m.pitch,C=e.useProgram(ln(p,o,c),d,S),I=t.evaluateSizeForZoom(w,m.zoom);let L,D,A,P,z=[0,0],N=null;if(o){if(D=r.glyphAtlasTexture,A=f.LINEAR,L=r.glyphAtlasTexture.size,c.iconsInText){z=r.imageAtlasTexture.size,N=r.imageAtlasTexture;const t="composite"===w.kind||"camera"===w.kind;P=k||e.options.rotating||e.options.zooming||t?f.LINEAR:f.NEAREST}}else{const t=1!==i.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;D=r.imageAtlasTexture,A=p||e.options.rotating||e.options.zooming||t||k?f.LINEAR:f.NEAREST,L=r.imageAtlasTexture.size}const R=T(r,1,e.transform.zoom),O=ut(l.projMatrix,_,g,e.transform,R),F=e.terrain&&_&&y?t.invert(new Float32Array(16),O):on,B=ht(l.projMatrix,_,g,e.transform,R),U=E&&c.hasTextData(),Y="none"!==i.layout.get("icon-text-fit")&&U&&c.hasIconData();if(y){const t=m.elevation,n=t?e=>t.getAtTileOffset(l,e.x,e.y):null;mt(c,l.projMatrix,e,o,O,B,_,u,n)}const j=e.translatePosMatrix(l.projMatrix,r,a,s),V=y||o&&E||Y?on:O,G=e.translatePosMatrix(B,r,a,s,!0),q=p&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let H;H=p?c.iconsInText?Je(w.kind,I,v,_,e,j,V,G,L,z):Ke(w.kind,I,v,_,e,j,V,G,o,L,!0):Xe(w.kind,I,v,_,e,j,V,G,o,L);const $={program:C,buffers:h,uniformValues:H,atlasTexture:D,atlasTextureIcon:N,atlasInterpolation:A,atlasInterpolationIcon:P,isSDF:p,hasHalo:q,tile:r,labelPlaneMatrixInv:F};if(b&&c.canOverlap){x=!0;const e=h.segments.get();for(const n of e)M.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:$})}else M.push({segments:h.segments,sortKey:0,state:$})}x&&M.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of M){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,un(n.buffers,t.segments,i,e,n.program,w,h,d,r)),r.u_is_halo=0}un(n.buffers,t.segments,i,e,n.program,w,h,d,n.uniformValues)}}function un(e,n,i,r,o,a,s,l,c){const u=r.context,h=u.gl;o.draw(u,h.TRIANGLES,a,s,l,t.CullFaceMode.disabled,c,i.id,e.layoutVertexBuffer,e.indexBuffer,n,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function hn(e,n,i,r,o,a,s){const l=e.context.gl,c=i.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=i.getCrossfadeParameters();let d,p,f,m,g;s?(p=u&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=u?"fillPattern":"fill",d=l.TRIANGLES);for(const _ of r){const r=n.getTile(_);if(u&&!r.patternsLoaded())continue;const y=r.getBucket(i);if(!y)continue;e.prepareDrawTile(_);const v=y.programConfigurations.get(i.id),b=e.useProgram(p,v);u&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));const x=c.constantOr(null);if(x&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[x.to.toString()],n=t.patternPositions[x.from.toString()];e&&n&&v.setConstantPatternPositions(e,n)}const w=e.translatePosMatrix(_.projMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(s){m=y.indexBuffer2,g=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===p&&u?Re(w,e,h,r,t):Ne(w,t)}else m=y.indexBuffer,g=y.segments,f=u?ze(w,e,h,r):Pe(w);e.prepareDrawProgram(e.context,b,_.toUnwrapped()),b.draw(e.context,d,o,e.stencilModeForClipping(_),a,t.CullFaceMode.disabled,f,i.id,y.layoutVertexBuffer,m,g,i.paint,e.transform.zoom,v)}}function dn(e,n,i,r,o,a,s){const l=e.context,c=l.gl,u=i.paint.get("fill-extrusion-pattern"),h=u.constantOr(1),d=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity");for(const f of r){const r=n.getTile(f),m=r.getBucket(i);if(!m)continue;const g=m.programConfigurations.get(i.id),_=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g);if(e.terrain){const t=e.terrain;if(!m.enableTerrain)continue;if(t.setupElevationDraw(r,_,{useMeterToDem:!0}),pn(l,n,f,m,i,t),!m.centroidVertexBuffer){const t=_.attributes.a_centroid_pos;void 0!==t&&c.vertexAttrib2f(t,0,0)}}h&&(e.context.activeTexture.set(c.TEXTURE0),r.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers(d));const y=u.constantOr(null);if(y&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[y.to.toString()],n=t.patternPositions[y.from.toString()];e&&n&&g.setConstantPatternPositions(e,n)}const v=e.translatePosMatrix(f.projMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),b=i.paint.get("fill-extrusion-vertical-gradient"),x=h?Ae(v,e,b,p,f,d,r):De(v,e,b,p);e.prepareDrawProgram(l,_,f.toUnwrapped()),_.draw(l,l.gl.TRIANGLES,o,a,s,t.CullFaceMode.backCCW,x,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,e.transform.zoom,g,e.terrain?m.centroidVertexBuffer:null)}}function pn(e,n,i,r,o,a){const s=[e=>{let n=e.canonical.x-1,i=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,i--),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,i=e.wrap;return n===1<<e.canonical.z&&(n=0,i++),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=n.getSource().maxzoom,i=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)};let r,a,s;return(t.overscaledZ===t.canonical.z||t.overscaledZ>=e)&&(r=i(t.key)),t.overscaledZ>=e&&(a=i(t.calculateScaledKey(t.overscaledZ+1))),t.overscaledZ>e&&(s=i(t.calculateScaledKey(t.overscaledZ-1))),r||a||s},c=[0,0,0],u=(e,n)=>(c[0]=Math.min(e.min.y,n.min.y),c[1]=Math.max(e.max.y,n.max.y),c[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,c),h=(e,n)=>(c[0]=Math.min(e.min.x,n.min.x),c[1]=Math.max(e.max.x,n.max.x),c[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,c),d=[(t,e)=>u(t,e),(t,e)=>u(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],p=new t.pointGeometry(0,0);let f,m,g;const _=(e,n,r,o,s)=>{const l=[[o?r:e,o?e:r,0],[o?r:n,o?n:r,0]],c=s<0?t.EXTENT+s:s,u=[o?c:(e+n)/2,o?(e+n)/2:c,0];return 0===r&&s<0||0!==r&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(i,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let e=0;e<4;e++){const n=r.borders[e];if(0===n.length&&(r.borderDone[e]=!0),r.borderDone[e])continue;const o=g=s[e](i),c=l(o);if(!c||!c.enableTerrain)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!f){const t=a.findDEMTileFor(i);if(!t||!t.dem)return;f=t}const u=(e<2?1:5)-e,h=c.borders[u];let y=0;for(let i=0;i<n.length;i++){const o=r.featuresOnBorder[n[i]],a=o.borders[e];let s;for(;y<h.length&&(s=c.featuresOnBorder[h[y]],!(s.borders[u][1]>a[0]+3));)c.borderDone[u]||c.encodeCentroid(void 0,s,!1),y++;if(s&&y<h.length){const n=y;let i=0;for(;!(s.borders[u][0]>a[1]-3)&&(i++,++y!==h.length);)s=c.featuresOnBorder[h[y]];if(s=c.featuresOnBorder[h[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==i){1!==i&&(y=n),r.encodeCentroid(void 0,o,!1),c.borderDone[u]||c.encodeCentroid(void 0,s,!1);continue}const l=d[e](o,s),f=e%2?t.EXTENT-1:0;p.x=_(l[0],Math.min(t.EXTENT-1,l[1]),f,e<2,l[2]),p.y=0,t.assert_1(void 0!==o.vertexArrayOffset&&o.vertexArrayOffset<r.layoutVertexArray.length),r.encodeCentroid(p,o,!1),t.assert_1(void 0!==s.vertexArrayOffset&&s.vertexArrayOffset<c.layoutVertexArray.length),c.borderDone[u]||c.encodeCentroid(p,s,!1)}else t.assert_1(o.intersectsCount()>1||s&&s.intersectsCount()>1),r.encodeCentroid(void 0,o,!1)}r.borderDone[e]=r.needsCentroidUpdate=!0,c.borderDone[u]||(c.borderDone[u]=c.needsCentroidUpdate=!0)}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(e)}const fn=new t.Color(1,0,0,1),mn=new t.Color(0,1,0,1),gn=new t.Color(0,0,1,1),_n=new t.Color(1,0,1,1),yn=new t.Color(0,1,1,1);function vn(t){const e=t.transform.padding;bn(t,t.transform.height-(e.top||0),3,fn),bn(t,e.bottom||0,3,mn),xn(t,e.left||0,3,gn),xn(t,t.transform.width-(e.right||0),3,_n);const n=t.transform.centerPoint;!function(t,e,n,i){const r=20,o=2;wn(t,e-o/2,n-r/2,o,r,i),wn(t,e-r/2,n-o/2,r,o,i)}(t,n.x,t.transform.height-n.y,yn)}function bn(t,e,n,i){wn(t,0,e+n/2,t.transform.width,n,i)}function xn(t,e,n,i){wn(t,e-n/2,0,n,t.transform.height,i)}function wn(e,n,i,r,o,a){const s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function En(e,n,i){const r=e.context,o=r.gl,a=i.projMatrix,s=e.useProgram("debug"),l=n.getTileByID(i.key);e.terrain&&e.terrain.setupElevationDraw(l,s);const c=t.DepthMode.disabled,u=t.StencilMode.disabled,h=e.colorModeForRenderPass(),d="$debug";if(r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),l.queryGeometryDebugViz&&l.queryGeometryDebugViz.vertices.length>0){l.queryGeometryDebugViz.lazyUpload(r);const e=l.queryGeometryDebugViz.vertexBuffer,n=l.queryGeometryDebugViz.indexBuffer,i=l.queryGeometryDebugViz.segments;null!=e&&null!=n&&null!=i&&s.draw(r,o.LINE_STRIP,c,u,h,t.CullFaceMode.disabled,Ue(a,l.queryGeometryDebugViz.color),d,e,n,i)}if(l.queryBoundsDebugViz&&l.queryBoundsDebugViz.vertices.length>0){l.queryBoundsDebugViz.lazyUpload(r);const e=l.queryBoundsDebugViz.vertexBuffer,n=l.queryBoundsDebugViz.indexBuffer,i=l.queryBoundsDebugViz.segments;null!=e&&null!=n&&null!=i&&s.draw(r,o.LINE_STRIP,c,u,h,t.CullFaceMode.disabled,Ue(a,l.queryBoundsDebugViz.color),d,e,n,i)}}function Mn(e,n,i){const r=e.context,o=r.gl,a=i.projMatrix,s=e.useProgram("debug"),l=n.getTileByID(i.key);e.terrain&&e.terrain.setupElevationDraw(l,s);const c=t.DepthMode.disabled,u=t.StencilMode.disabled,h=e.colorModeForRenderPass(),d="$debug";r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(r,o.LINE_STRIP,c,u,h,t.CullFaceMode.disabled,Ue(a,t.Color.red),d,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);const p=l.latestRawTileData,f=p&&p.byteLength||0,m=Math.floor(f/1024),g=n.getTile(i).tileSize,_=512/Math.min(g,512)*(i.overscaledZ/e.transform.zoom)*.5;let y=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(y+=` => ${i.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,i=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,`${y} ${m}kb`),s.draw(r,o.TRIANGLES,c,u,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Ue(a,t.Color.transparent,_),d,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const Tn=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Sn,size:kn,alignment:Cn}=Tn;function In(t,e,n,i){t.emplaceBack(e,n,i)}class Ln{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,In(this.vertexArray,-1,-1,1),In(this.vertexArray,1,-1,1),In(this.vertexArray,-1,1,1),In(this.vertexArray,1,1,1),In(this.vertexArray,-1,-1,-1),In(this.vertexArray,1,-1,-1),In(this.vertexArray,-1,1,-1),In(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,Sn),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function Dn(e,n,i,r,o,a){const s=e.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,n,i,r)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(t.fromMat4([],r),o,u,l,c),d=s.TEXTURE_CUBE_MAP_POSITIVE_X+a;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,d,n.skyboxTexture,0),i.draw(e,s.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const An={symbol:function(e,n,i,r,o){if("translucent"!==e.renderPass)return;const a=t.StencilMode.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,r,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const o of e){const e=r.getTile(o),a=e.getBucket(i);if(!a||!a.text||!a.text.segments.get().length)continue;const h=a.textSizeData,d=t.evaluateSizeForZoom(h,l.zoom),p=T(e,1,n.transform.zoom),f=ut(o.projMatrix,u,c,n.transform,p),m="none"!==i.layout.get("icon-text-fit")&&a.hasIconData();if(d){const n=Math.pow(2,l.zoom-e.tileID.overscaledZ),i=l.elevation,r=i?t=>i.getAtTileOffset(o,t.x,t.y):t=>0;sn(a,c,u,s,t.symbolSize,l,f,o.projMatrix,n,d,m,r)}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&cn(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&cn(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(rn(e,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),rn(e,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,p=e.colorModeForRenderPass(),f=[];for(let o=0;o<r.length;o++){const a=r[o],s=n.getTile(a),c=s.getBucket(i);if(!c)continue;const u=c.programConfigurations.get(i.id),h=Fe(i),d={programConfiguration:u,program:e.useProgram("circle",u,h),layoutVertexBuffer:c.layoutVertexBuffer,indexBuffer:c.indexBuffer,uniformValues:Oe(e,a,s,i),tile:s};if(l){const e=c.segments.get();for(const n of e)f.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:d})}else f.push({segments:c.segments,sortKey:0,state:d})}l&&f.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of f){const{programConfiguration:r,program:o,layoutVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:f}=n.state,m=n.segments;e.terrain&&e.terrain.setupElevationDraw(f,o,{useDepthForOcclusion:!0}),e.prepareDrawProgram(c,o,f.tileID.toUnwrapped()),o.draw(c,u.TRIANGLES,h,d,p,t.CullFaceMode.disabled,l,i.id,a,s,m,i.paint,e.transform.zoom,r)}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=t.StencilMode.disabled,l=new t.ColorMode([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);(function(t,e,n){const i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{const o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,i){const r=t.gl,o=t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,o,null),i.colorAttachment.set(n)}(t,e,o,r)}})(o,e,i),o.clear({color:t.Color.transparent});for(let c=0;c<r.length;c++){const u=r[c];if(n.hasRenderableParent(u))continue;const h=n.getTile(u),d=h.getBucket(i);if(!d)continue;const p=d.programConfigurations.get(i.id),f=e.useProgram("heatmap",p),{zoom:m}=e.transform;e.terrain&&e.terrain.setupElevationDraw(h,f),e.prepareDrawProgram(o,f,u.toUnwrapped()),f.draw(o,a.TRIANGLES,t.DepthMode.disabled,s,l,t.CullFaceMode.disabled,Ye(u.projMatrix,h,m,i.paint.get("heatmap-intensity")),i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,p)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const i=e.context,r=i.gl,o=n.heatmapFbo;if(!o)return;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,n,i)=>({u_image:n,u_color_ramp:i,u_opacity:e.paint.get("heatmap-opacity")}))(0,n,0,1),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,i))},line:function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),c=i.paint.get("line-dasharray"),u=c.constantOr(1),h=i.layout.get("line-cap"),d=i.paint.get("line-pattern"),p=d.constantOr(1),f=i.paint.get("line-gradient"),m=i.getCrossfadeParameters(),g=p?"linePattern":u?"lineSDF":f?"lineGradient":"line",_=e.context,y=_.gl;for(const o of r){const r=n.getTile(o);if(p&&!r.patternsLoaded())continue;const a=r.getBucket(i);if(!a)continue;e.prepareDrawTile(o);const v=a.programConfigurations.get(i.id),b=e.useProgram(g,v),x=d.constantOr(null);if(x&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[x.to.toString()],n=t.patternPositions[x.from.toString()];e&&n&&v.setConstantPatternPositions(e,n)}const w=c.constantOr(null),E=h.constantOr(null);if(!p&&w&&E&&r.lineAtlas){const t=r.lineAtlas,e=t.getDash(w.to,E),n=t.getDash(w.from,E);e&&n&&v.setConstantPatternPositions(e,n)}const M=e.terrain?o.projMatrix:null,T=p?Ge(e,r,i,m,M):u?qe(e,r,i,m,M):f?Ve(e,r,i,M,a.lineClipsArray.length):je(e,r,i,M);if(p)_.activeTexture.set(y.TEXTURE0),r.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),v.updatePaintBuffers(m);else if(u)_.activeTexture.set(y.TEXTURE0),r.lineAtlasTexture.bind(y.LINEAR,y.REPEAT),v.updatePaintBuffers(m);else if(f){const r=a.gradients[i.id];let s=r.texture;if(i.gradientVersion!==r.version){let l=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=o.canonical.z===i?Math.ceil(1<<e.transform.maxZoom-o.canonical.z):1,s=a.maxLineLength/t.EXTENT*1024*r;l=t.clamp(t.nextPowerOfTwo(s),256,_.maxTextureSize)}r.gradient=t.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:r.gradient||void 0,clips:a.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new t.Texture(_,r.gradient,y.RGBA),r.version=i.gradientVersion,s=r.texture}_.activeTexture.set(y.TEXTURE0),s.bind(i.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}e.prepareDrawProgram(_,b,o.toUnwrapped()),b.draw(_,y.TRIANGLES,s,e.stencilModeForClipping(o),l,t.CullFaceMode.disabled,T,i.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,i.paint,e.transform.zoom,v,a.layoutVertexBuffer2)}},fill:function(e,n,i,r){const o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);hn(e,n,i,r,o,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const o=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);hn(e,n,i,r,o,s,!0)}},"fill-extrusion":function(e,n,i,r){const o=i.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const a=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||i.paint.get("fill-extrusion-pattern").constantOr(1))dn(e,n,i,r,a,t.StencilMode.disabled,t.ColorMode.disabled),dn(e,n,i,r,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const o=e.colorModeForRenderPass();dn(e,n,i,r,a,t.StencilMode.disabled,o)}}},hillshade:function(e,n,i,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),s=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[c,u]="translucent"!==e.renderPass||l?[{},r]:e.stencilConfigForOverlap(r);for(const r of u){const o=n.getTile(r);if(o.needsHillshadePrepare&&"offscreen"===e.renderPass)ge(e,o,i,a,t.StencilMode.disabled,s);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(r):c[r.overscaledZ];fe(e,r,o,i,a,t,s)}}o.viewport.set([0,0,e.width,e.height])},raster:function(e,n,i,r,o,a){if("translucent"!==e.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const s=e.context,l=s.gl,c=n.getSource(),u=e.useProgram("raster"),h=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,[p,f]=c instanceof N||d?[{},r]:e.stencilConfigForOverlap(r),m=f[f.length-1].overscaledZ,g=!e.options.moving;for(const r of f){const o=d?t.DepthMode.disabled:e.depthModeForSublayer(r.overscaledZ-m,1===i.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),f=r.toUnwrapped(),_=n.getTile(r);if(d&&(!_||!_.hasData()))continue;const y=d?r.projMatrix:e.transform.calculateProjMatrix(f,g),v=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(r):p[r.overscaledZ],b=a?0:i.paint.get("raster-fade-duration");_.registerFadeDuration(b);const x=n.findLoadedParent(r,0),w=Me(_,x,n,e.transform,b);let E,M;e.terrain&&e.terrain.prepareDrawTile(r);const T="nearest"===i.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),_.texture.bind(T,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(T,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),E=Math.pow(2,x.tileID.overscaledZ-_.tileID.overscaledZ),M=[_.tileID.canonical.x*E%1,_.tileID.canonical.y*E%1]):_.texture.bind(T,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const S=Ze(y,M||[0,0],E||1,w,i);e.prepareDrawProgram(s,u,f),c instanceof N?u.draw(s,l.TRIANGLES,o,t.StencilMode.disabled,h,t.CullFaceMode.disabled,S,i.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments):u.draw(s,l.TRIANGLES,o,v,h,t.CullFaceMode.disabled,S,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,n,i,r){const o=i.paint.get("background-color"),a=i.paint.get("background-opacity");if(0===a)return;const s=e.context,l=s.gl,c=e.transform,u=c.tileSize,h=i.paint.get("background-pattern");if(e.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const p=t.StencilMode.disabled,f=e.depthModeForSublayer(0,"opaque"===d?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(h?"backgroundPattern":"background"),_=r||c.coveringTiles({tileSize:u});h&&(s.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const y=i.getCrossfadeParameters();for(const n of _){const c=n.toUnwrapped(),d=r?n.projMatrix:e.transform.calculateProjMatrix(c);e.prepareDrawTile(n);const _=h?tn(d,a,e,h,{tileID:n,tileSize:u},y):Qe(d,a,o);e.prepareDrawProgram(s,g,c),g.draw(s,l.TRIANGLES,f,p,m,t.CullFaceMode.disabled,_,i.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},sky:function(e,n,i){const r=i.paint.get("sky-opacity");if(0===r)return;const o=e.context,a=i.paint.get("sky-type"),s=new t.DepthMode(o.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),l=e.frameCounter/1e3%1;"atmosphere"===a?"offscreen"===e.renderPass?i.needsSkyboxCapture(e)&&(function(e,n,i,r){const o=e.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(i,r,!1),n.skyboxGeometry=new Ln(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let t=0;t<6;++t){const e=a.TEXTURE_CUBE_MAP_POSITIVE_X+t;a.texImage2D(e,0,a.RGBA,i,r,0,a.RGBA,a.UNSIGNED_BYTE,null)}}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,i,r]);const l=n.getCenter(e,!0),c=e.useProgram("skyboxCapture"),u=new Float64Array(16);t.identity(u),t.rotateY(u,u,.5*-Math.PI),Dn(o,n,c,u,l,0),t.identity(u),t.rotateY(u,u,.5*Math.PI),Dn(o,n,c,u,l,1),t.identity(u),t.rotateX(u,u,.5*-Math.PI),Dn(o,n,c,u,l,2),t.identity(u),t.rotateX(u,u,.5*Math.PI),Dn(o,n,c,u,l,3),t.identity(u),Dn(o,n,c,u,l,4),t.identity(u),t.rotateY(u,u,Math.PI),Dn(o,n,c,u,l,5),o.viewport.set([0,0,e.width,e.height])}(e,i,32,32),i.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,i,r,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((t,e,n,i,r)=>({u_matrix:t,u_sun_direction:e,u_cubemap:n,u_opacity:i,u_temporal_offset:r}))(l.skyboxMatrix,n.getCenter(e,!1),0,r,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,s,r,l):"gradient"===a?"sky"===e.renderPass&&function(e,n,i,r,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Ln(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new t.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((e,n,i,r,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(i),u_opacity:r,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),r,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,s,r,l):t.assert_1(!1,`${a} is unsupported sky-type`)},debug:function(t,e,n){for(let i=0;i<n.length;i++)Mn(t,e,n[i])},custom:function(e,n,i){const r=e.context,o=i.implementation;if("offscreen"===e.renderPass){const t=o.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(o,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(t.StencilMode.disabled);const n="3d"===o.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);r.setDepthMode(n),o.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}};class Pn{constructor(e,n){this.context=new t.Context(e),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kt,this.gpuTimers={},this.frameCounter=0}updateTerrain(t,e){const n=!!t&&!!t.terrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ke(this,t));const i=this._terrain;this.transform.elevation=n?i:null,i.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,i]=e.getFovAdjustedRange(this.transform._fov);if(n>i)return void(this.transform.fogCullDistSq=null);const r=n+.78*(i-n);this.transform.fogCullDistSq=r*r}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,z.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout2i4;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(-1,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA),this.identityMat=t.create();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now())}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,Ee(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,n,i){if(!(n&&this.currentStencilSource!==n.id&&e.isTileClipped()&&i&&i.length))return;this.currentStencilSource=n.id;const r=this.context,o=r.gl;this.nextStencilID+i.length>256&&this.clearStencil(),r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of i){const n=this._tileClippingMaskIDs[e.key]=this.nextStencilID++;a.draw(r,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},n,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,Ee(e.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,i=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=i[i.length-1].overscaledZ,o=i[0].overscaledZ-r+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let i=0;i<o;i++)e[i+r]=new t.StencilMode({func:n.GEQUAL,mask:255},i+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[e,i]}return[{[r]:t.StencilMode.disabled},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,i){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(i||this.context.gl.LEQUAL,n,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const i=this.style.order,r=this.style._sourceCaches;for(const t in r){const e=r[t];e.used&&e.prepare(this.context)}const o={},a={},s={};for(const t in r){const e=r[t];o[t]=e.getVisibleCoordinates(),a[t]=o[t].slice().reverse(),s[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++){const e=i[t];if(this.style._layers[e].is3D()){this.opaquePassCutoff=t;break}}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of i){const n=this.style._layers[t],i=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const r=i?a[i.id]:void 0;("custom"===n.type||n.isSky()||r&&r.length)&&this.renderLayer(this,i,n,r)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let l=t.Color.transparent;if(this.style.fog&&(l=this.style.fog.properties.get("color")),this.context.clear({color:n.showOverdrawInspector?t.Color.black:l,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const r=n?a[n.id]:void 0;this._renderTileClippingMasks(t,n,r),this.renderLayer(this,n,t,r)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(!t.isSky())continue;const r=n?a[n.id]:void 0;this.renderLayer(this,n,t,r)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){const n=this.style._layers[i[this.currentLayer]],r=e._getLayerSourceCache(n);if(n.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(n)){if(n.isHidden(this.transform.zoom)){++this.currentLayer;continue}const e=this.terrain,i=this.currentLayer;this.currentLayer=e.renderBatch(this.currentLayer),t.assert_1(null===this.context.bindFramebuffer.current),t.assert_1(this.currentLayer>i);continue}const l=r?("symbol"===n.type?s:a)[r.id]:void 0;this._renderTileClippingMasks(n,r,r?o[r.id]:void 0),this.renderLayer(this,r,n,l),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let n=null;t.values(this.style._layers).forEach((t=>{const i=e._getLayerSourceCache(t);i&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<i.getSource().maxzoom)&&(n=i)})),n&&(this.options.showTileBoundaries&&An.debug(this,n,n.getVisibleCoordinates()),t.Debug.run((()=>{this.options.showQueryGeometry&&n&&function(t,e,n){for(let i=0;i<n.length;i++)En(t,e,n[i])}(this,n,n.getVisibleCoordinates())})))}this.options.showPadding&&vn(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%t.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),An[n.type](t,e,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const n in t){const i=t[n],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),e[n]=o}return e}translatePosMatrix(e,n,i,r,o){if(!i[0]&&!i[1])return e;const a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);i=[i[0]*e-i[1]*t,i[0]*t+i[1]*e]}const s=[o?i[0]:T(n,i[0],this.transform.zoom),o?i[1]:T(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}currentGlobalDefines(){const t=this.terrain&&!this.terrain.renderingToTexture,e=this.terrain&&this.terrain.renderingToTexture,n=this.style&&this.style.fog,i=[];return t&&i.push("TERRAIN"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&i.push("FOG"),e&&i.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&i.push("OVERDRAW_INSPECTOR"),i}useProgram(t,e,n){this.cache=this.cache||{};const i=n||[],r=this.currentGlobalDefines().concat(i),o=Ie.cacheKey(t,r,e);return this.cache[o]||(this.cache[o]=new Ie(this.context,t,ue[t],e,en[t],r)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){if(null==this.debugOverlayCanvas){this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;const e=this.context.gl;this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,e.RGBA)}}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(t){this.terrain&&this.terrain.prepareDrawTile(t)}prepareDrawProgram(t,e,n){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const r=i.getOpacity(this.transform.pitch);0!==r&&e.setFogUniformValues(t,((t,e,n,i)=>{const r=e.properties.get("color"),o=t.frameCounter/1e3%1,a=[r.r/r.a,r.g/r.a,r.b/r.a,i];return{u_fog_matrix:n?t.transform.calculateFogTileMatrix(n):t.identityMat,u_fog_range:e.getFovAdjustedRange(t.transform._fov),u_fog_color:a,u_fog_horizon_blend:e.properties.get("horizon-blend"),u_fog_temporal_offset:o}})(this,i,n,r))}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}}class zn{constructor(t=0,e=0,n=0,i=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i}interpolate(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,i)),this}getCenter(e,n){const i=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(i,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new zn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Nn(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function Rn(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]}function On(e,n){const i=Nn(e,3);t.fromQuat(e,n),Rn(e,3,i)}function Fn(t,e){Rn(t,3,[e[0],e[1],e[2],1])}function Bn(e,n){const i=t.identity$1([]);return t.rotateZ$1(i,i,-n),t.rotateX$1(i,i,-e),i}function Un(e,n){const i=[e[0],e[1],0],r=[n[0],n[1],0];if(t.length(i)>=1e-15){const e=t.normalize([],i);t.scale$2(r,e,t.dot(r,e)),n[0]=r[0],n[1]=r[1]}const o=t.cross([],n,e);if(t.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Bn(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),a)}class Yn{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){this._position=this._renderWorldCopies?function(e){if(!e)return;const n=Array.isArray(e)?new t.MercatorCoordinate(e[0],e[1],e[2]):e;return n.x=t.wrap(n.x,0,1),n}(e):e}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const i=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,r=this.position,o=t.MercatorCoordinate.fromLngLat(e,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Un(a,n)}setPitchBearing(e,n){this.orientation=Bn(t.degToRad(e),t.degToRad(-n))}}class jn{constructor(e,n){this._transform=t.identity([]),this._orientation=t.identity$1([]),n&&(this._orientation=n,On(this._transform,this._orientation)),e&&Fn(this._transform,e)}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const t=Nn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){Fn(this._transform,t)}get orientation(){return this._orientation}set orientation(t){this._orientation=t,On(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=Bn(t,e),On(this._transform,this._orientation)}forward(){const t=Nn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=Nn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=Nn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(e,n){const i=new Float64Array(16);return t.invert(i,this.getWorldToCamera(e,n)),i}getWorldToCameraPosition(e,n,i){const r=this.position;t.scale$2(r,r,-e);const o=new Float64Array(16);return t.fromScaling(o,[i,i,i]),t.translate(o,o,r),o[10]*=n,o}getWorldToCamera(e,n){const i=new Float64Array(16),r=new Float64Array(4),o=this.position;return t.conjugate(r,this._orientation),t.scale$2(o,o,-e),t.fromQuat(i,r),t.translate(i,i,o),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=n,i[9]*=n,i[10]*=n,i[11]*=n,i}getCameraToClipPerspective(e,n,i,r){const o=new Float64Array(16);return t.perspective(o,e,n,i,r),o}getDistanceToElevation(e){const n=0===e?0:t.mercatorZfromAltitude(e,this.position[1]),i=this.forward();return(n-this.position[2])/i[2]}clone(){return new jn([...this.position],[...this.orientation])}}class Vn{constructor(e,n,i,r,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new zn,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new jn,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const t=new Vn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,t?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(t){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),t&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const e=this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}_updateCameraOnTerrain(){const e=this.cameraToCenterDistance/this.worldSize,n=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(n+e)}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],i=this.horizonLineFromTop();let r=0,o=0;for(let a=0;a<n.length;a++){const s=new t.pointGeometry(n[a][0]*this.width,i+n[a][1]*(this.height-i)),l=e.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*c,o+=c}return 0===o?NaN:r/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const e=this._cameraZoom,n=this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(this.center)),i=t.mercatorZfromAltitude(n,this.center.lat),r=this._mercatorZfromZoom(e),o=this._mercatorZfromZoom(this._maxZoom),a=Math.max(r-i,o);this._setZoom(this._zoomFromMercatorZ(a))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let i;i=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const r=t.length(t.sub([],this._camera.position,i));return t.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const i=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(i,this._camera.position)||(this._setCameraPosition(i),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new Yn;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this._renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),i=t.transformQuat([],[0,-1,0],e);if(i[2]<0)return!1;const r=Un(n,i);return!!r&&(this._camera.orientation=r,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,i=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;e[2]=t.clamp(e[2],r/i,r/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const i=this.pointCoordinate(new t.pointGeometry(0,0)),r=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),l=Math.floor(Math.max(i.x,r.x,o.x,a.x)),c=1;for(let i=s-c;i<=l+c;i++)0!==i&&n.push(new t.UnwrappedTileID(i,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const i=n,r=this.elevation&&!e.isTerrainDEM;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const o=t.MercatorCoordinate.fromLngLat(this.center),a=1<<n,s=[a*o.x,a*o.y,0],l=t.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),c=this.pointCoordinate(this.getCameraPoint()),u=a*t.mercatorZfromAltitude(1,this.center.lat),h=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),d=[a*c.x,a*c.y,h],p=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),f=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?n:0,m=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,g=e.isTerrainDEM?-m:this._elevation?this._elevation.getMinElevationBelowMSL():0,_=e=>{const n=m,i=g;return{aabb:new t.Aabb([e*a,0,i],[(e+1)*a,a,n]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},y=[],v=[],b=n,x=e.reparseOverscaled?i:n,w=e=>{if(t.assert_1(this._elevation),!this._elevation||!e.tileID)return;const n=this._elevation.getMinMaxForTile(e.tileID),i=e.aabb;n?(i.min[2]=n.min,i.max[2]=n.max,i.center[2]=(i.min[2]+i.max[2])/2):(e.shouldSplit=T(e),e.shouldSplit||(i.min[2]=i.max[2]=i.center[2]=this._centerAltitude))},E=t=>t*t,M=E((h-this._centerAltitude)*u),T=t=>{if(t.zoom<f)return!0;if(t.zoom===b)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const e=t.aabb.distanceX(d),n=t.aabb.distanceY(d);let i=M;r&&(i=E(t.aabb.distanceZ(d)*u));const o=e*e+n*n+i,a=(1<<b-t.zoom)*p;return o<E(a*((t,e)=>{if(e*E(.707)<t)return 1;const n=Math.sqrt(e/t),i=n-1.4144271570014144;return n/(1.4144271570014144+(Math.pow(1.1,i+1)-1)/(1.1-1)-1)})(Math.max(i,M),o))};if(this._renderWorldCopies)for(let t=1;t<=3;t++)y.push(_(-t)),y.push(_(t));for(y.push(_(0));y.length>0;){const i=y.pop(),o=i.x,a=i.y;let c=i.fullyVisible;if(!c){const t=i.aabb.intersects(l);if(0===t)continue;c=2===t}if(i.zoom!==b&&T(i))for(let e=0;e<4;e++){const n=(o<<1)+e%2,s=(a<<1)+(e>>1),l={aabb:i.aabb.quadrant(e),zoom:i.zoom+1,x:n,y:s,wrap:i.wrap,fullyVisible:c,tileID:void 0,shouldSplit:void 0};r&&(l.tileID=new t.OverscaledTileID(i.zoom+1===b?x:i.zoom+1,i.wrap,i.zoom+1,n,s),w(l)),y.push(l)}else{const r=i.zoom===b?x:i.zoom;if(e.minzoom&&e.minzoom>r)continue;const l=s[0]-(.5+o+(i.wrap<<i.zoom))*(1<<n-i.zoom),c=s[1]-.5-a,u=i.tileID?i.tileID:new t.OverscaledTileID(r,i.wrap,i.zoom,o,a);v.push({tileID:u,distanceSq:l*l+c*c})}}if(this.fogCullDistSq){const e=this.fogCullDistSq;v.splice(0,v.length,...v.filter((n=>{const i=[0,0,0,1],o=[t.EXTENT,t.EXTENT,0,1],a=this.calculateFogTileMatrix(n.tileID.toUnwrapped());t.transformMat4$1(i,i,a),t.transformMat4$1(o,o,a);const s=t.getAABBPointSquareDist(i,o);if(0===s)return!0;let l=!1;const c=this.horizonLineFromTop();if(s>e&&0!==c){const e=this.calculateProjMatrix(n.tileID.toUnwrapped());let i;r&&this._elevation&&(i=this._elevation.getMinMaxForTile(n.tileID)),i||(i={min:g,max:m});const o=t.furthestTileCorner(this.bearing),a=[o[0]*t.EXTENT,o[1]*t.EXTENT,i.max];t.transformMat4(a,a,e),l=(1-a[1])*this.height*.5<c}return s<e||l})))}const S=v.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID));return t.assert_1(!S.length||this.elevation||S[0].overscaledZ===x),S}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(e,n){const i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(t){this.center=this.coordinateLocation(t),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this._coordinatePoint(this.locationCoordinate(t),!1)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t.toLngLat()}pointRayIntersection(e,n){const i=null!=n?n:this._centerAltitude,r=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4$1(r,r,this.pixelMatrixInverse),t.transformMat4$1(o,o,this.pixelMatrixInverse);const a=r[3],s=o[3];t.scale$1(r,r,1/a),t.scale$1(o,o,1/s);const l=r[2],c=o[2];return{p0:r,p1:o,t:l===c?0:(i-l)/(c-l)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];return t.transformMat4$1(n,n,this.pixelMatrixInverse),t.transformMat4$1(i,i,this.pixelMatrixInverse),t.scale$1(n,n,1/n[3]),t.scale$1(i,i,1/i[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,i[2]=t.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,t.scale$1(n,n,1/this.worldSize),t.scale$1(i,i,1/this.worldSize),new t.Ray([n[0],n[1],n[2]],t.normalize([],t.sub([],i,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:i,t:r}=e,o=t.mercatorZfromAltitude(n[2],this._center.lat),a=t.mercatorZfromAltitude(i[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],i[0],r)/this.worldSize,t.number(n[1],i[1],r)/this.worldSize,t.number(o,a,r))}pointCoordinate(e){const n=this.horizonLineFromTop(!1),i=new t.pointGeometry(e.x,Math.max(n,e.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(i))}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);const n=this.elevation;let i=this.elevation.pointCoordinate(e);if(i)return new t.MercatorCoordinate(i[0],i[1],i[2]);let r=0,o=this.horizonLineFromTop();if(e.y>o)return this.pointCoordinate(e);const a=.02*o,s=e.clone();for(let e=0;e<10&&o-r>a;e++){s.y=t.number(r,o,.66);const e=n.pointCoordinate(s);e?(o=s.y,i=e):r=s.y}return i?new t.MercatorCoordinate(i[0],i[1],i[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const e=this.horizonLineFromTop();return t.y<e}}_coordinatePoint(e,n){const i=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,r=[e.x*this.worldSize,e.y*this.worldSize,i+e.toAltitude(),1];return t.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new t.pointGeometry(r[0]/r[3],r[1]/r[3]):new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new t.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new t.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new t.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}_getBounds3D(){t.assert_1(this.elevation);const e=this.elevation,n=e.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});n.min*=e.exaggeration(),n.max*=e.exaggeration();const i=this.horizonLineFromTop();return[new t.pointGeometry(0,i),new t.pointGeometry(this.width,i),new t.pointGeometry(this.width,this.height),new t.pointGeometry(0,this.height)].reduce(((t,e)=>t.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,n.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,n.max))))),new t.LngLatBounds)}horizonLineFromTop(t=!0){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-.97*e;return t?Math.max(0,n):n}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,n){const i=e.canonical,r=n/this.zoomScale(i.z),o=i.x+Math.pow(2,i.z)*e.wrap,a=t.identity(new Float64Array(16));return t.translate(a,a,[o*r,i.y*r,0]),t.scale(a,a,[r/t.EXTENT,r/t.EXTENT,1]),a}calculateFogTileMatrix(e){const n=e.key,i=this._fogTileMatrixCache;if(i[n])return i[n];const r=this.calculatePosMatrix(e,this.cameraWorldSize);return t.multiply(r,this.worldToFogMatrix,r),i[n]=new Float32Array(r),i[n]}calculateProjMatrix(e,n=!1){const i=e.key,r=n?this._alignedProjMatrixCache:this._projMatrixCache;if(r[i])return r[i];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,n?this.alignedProjMatrix:this.projMatrix,o),r[i]=new Float32Array(o),r[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const n=this._camera.position,i=this._camera.forward();if(n[2]<=0||i[2]>=0)return;const r=t.mercatorZfromAltitude(1,this._center.lat);n[2]/=r,i[2]/=r,t.normalize(i,i);const o=e.raycast(n,i,e.exaggeration());if(o){const e=t.scaleAndAdd([],n,i,o),r=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=this._camera.position,s=[r.x-a[0],r.y-a[1],r.z-a[2]],l=r.z+t.length(s);this._cameraZoom=this._zoomFromMercatorZ(l),this._centerAltitude=r.toAltitude(),this._center=r.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const n=e.getAtPointOrZero(this._camera.mercatorPosition),i=this._minimumHeightOverTerrain()*Math.cos(t.degToRad(this._maxPitch)),r=t.mercatorZfromAltitude(n,this._center.lat),o=this._camera.position[2]-r;if(o<i){const e=t.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),n=this._camera.mercatorPosition,r=[e.x-n.x,e.y-n.y,e.z-n.z],a=t.length(r);r[2]-=i-o;const s=t.length(r);if(0===s)return;t.scale$2(r,r,a/s),this._camera.position=[e.x-r[0],e.y-r[1],e.z-r[2]],this._camera.orientation=Un(r,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,n,i,r,o=-90,a=90,s=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const n=this.latRange;o=t.mercatorYfromLat(n[1])*this.worldSize,a=t.mercatorYfromLat(n[0])*this.worldSize,e=a-o<c.y?c.y/(a-o):0}if(this.lngRange){const e=this.lngRange;s=t.mercatorXfromLng(e[0])*this.worldSize,l=t.mercatorXfromLng(e[1])*this.worldSize,n=l-s<c.x?c.x/(l-s):0}const h=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.pointGeometry(n?(l+s)/2:h.x,e?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const t=h.y,e=c.y/2;t-e<o&&(r=o+e),t+e>a&&(r=a-e)}if(this.lngRange){const t=h.x,e=c.x/2;t-e<s&&(i=s+e),t+e>l&&(i=l-e)}void 0===i&&void 0===r||(this.center=this.unproject(new t.pointGeometry(void 0!==i?i:h.x,void 0!==r?r:h.y))),this._constrainCameraAltitude(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){const e=(t,e)=>Math.log2(t/(this.tileSize*Math.abs(e[1]-e[0])));let n=0;if(this.latRange){const i=this.latRange;n=e(this.height,[t.mercatorYfromLat(i[0]),t.mercatorYfromLat(i[1])])}let i=0;if(this.lngRange){const n=this.lngRange;i=e(this.width,[t.mercatorXfromLng(n[0]),t.mercatorXfromLng(n[1])])}return Math.max(n,i)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this._fov/2,n=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(e)*this.height;const i=this.pixelsPerMeter;this._updateCameraState();const r=Math.PI/2+this._pitch,o=this.fovAboveCenter,a=this.elevation?this.elevation.getMinElevationBelowMSL()*i:0,s=(this._camera.position[2]*this.worldSize-a)/Math.cos(this._pitch),l=Math.sin(o)*s/Math.sin(t.clamp(Math.PI-r-o,.01,Math.PI-.01)),c=this.point,u=c.x,h=c.y,d=Math.cos(Math.PI/2-this._pitch)*l+s,p=s*(1/this._horizonShift),f=Math.min(1.01*d,p),m=this.height/50,g=this._camera.getWorldToCamera(this.worldSize,i),_=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,m,f);_[8]=2*-n.x/this.width,_[9]=2*n.y/this.height;let y=t.mul([],_,g);this.mercatorMatrix=t.scale([],y,[this.worldSize,this.worldSize,this.worldSize/i]),this.projMatrix=y,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const v=new Float32Array(16);t.identity(v),t.scale(v,v,[1,-1,1]),t.rotateX(v,v,this._pitch),t.rotateZ(v,v,this.angle);const b=t.perspective(new Float32Array(16),this._fov,this.width/this.height,m,f),x=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;b[8]=2*-n.x/this.width,b[9]=2*(n.y+x)/this.height,this.skyboxMatrix=t.multiply(v,b,v);const w=this.width%2/2,E=this.height%2/2,M=Math.cos(this.angle),T=Math.sin(this.angle),S=u-Math.round(u)+M*w+T*E,k=h-Math.round(h)+M*E+T*w,C=new Float64Array(y);if(t.translate(C,C,[S>.5?S-1:S,k>.5?k-1:k,0]),this.alignedProjMatrix=C,y=t.create(),t.scale(y,y,[this.width/2,-this.height/2,1]),t.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=t.create(),t.scale(y,y,[1,-1,1]),t.translate(y,y,[-1,-1,0]),t.scale(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),y=t.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSize,n=this.cameraPixelsPerMeter,i=this._camera.position,r=1/this.height,o=[e,e,n];t.scale$2(o,o,r),t.scale$2(i,i,-1),t.multiply$1(i,i,o);const a=t.create();t.translate(a,a,i),t.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,r)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const e=this._camera.forward(),n=this.cameraToCenterDistance,i=this.point,r=this._cameraZoom?this._cameraZoom:this._zoom,o=this._mercatorZfromZoom(r)-t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this.cameraToCenterDistance/o;this._camera.position=[i.x/this.worldSize-e[0]*n/a,i.y/this.worldSize-e[1]*n/a,t.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-e[2]*n/a]}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),i=this._camera.position[2],r=e[2];let o=1;r>0&&(o=Math.min((n-i)/r,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,o),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:i,bearing:r}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),s=Math.max((e[2]-o)/Math.cos(i),a),l=this._zoomFromMercatorZ(s);t.scaleAndAdd(e,e,n,s),this._pitch=t.clamp(i,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(r,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new t.MercatorCoordinate(e[0],e[1],e[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(e,n){const i=Math.min(e.x,n.x),r=Math.max(e.x,n.x),o=Math.min(e.y,n.y),a=Math.max(e.y,n.y),s=[new t.pointGeometry(i,o),new t.pointGeometry(r,a),new t.pointGeometry(i,a),new t.pointGeometry(r,o)],l=this._renderWorldCopies?-3:0,c=this._renderWorldCopies?4:1;for(const t of s){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new t.pointGeometry(0,0),new t.pointGeometry(this.width,this.height))}zoomDeltaToMovement(e,n){const i=t.length(t.sub([],this._camera.position,e)),r=this._zoomFromMercatorZ(i)+n;return i-this._mercatorZfromZoom(r)}getCameraPoint(){const e=this._pitch,n=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,n))}}function Gn(t,e){let n=!1,i=null;const r=()=>{i=null,n&&(t(),i=setTimeout(r,e),n=!1)};return()=>(n=!0,i||r(),i)}class qn{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Gn(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const n=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=e?`/${a}/${s}/${i}`:`${i}/${s}/${a}`,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),this._hashName){const e=this._hashName;let n=!1;const i=t.window.location.hash.slice(1).split("&").map((t=>{const i=t.split("=")[0];return i===e?(n=!0,`${i}=${u}`):t})).filter((t=>t));return n||i.push(`${e}=${u}`),`#${i.join("&")}`}return`#${u}`}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}const Hn={linearity:.3,easing:t.bezier(0,0,.3,1)},$n=t.extend({deceleration:2500,maxSpeed:1400},Hn),Zn=t.extend({deceleration:20,maxSpeed:1400},Hn),Wn=t.extend({deceleration:1e3,maxSpeed:360},Hn),Xn=t.extend({deceleration:1e3,maxSpeed:90},Hn);class Kn{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const o=Qn(n.pan.mag(),i,t.extend({},$n,e||{}));r.offset=n.pan.mult(o.amount/n.pan.mag()),r.center=this._map.transform.center,Jn(r,o)}if(n.zoom){const t=Qn(n.zoom,i,Zn);r.zoom=this._map.transform.zoom+t.amount,Jn(r,t)}if(n.bearing){const e=Qn(n.bearing,i,Wn);r.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),Jn(r,e)}if(n.pitch){const t=Qn(n.pitch,i,Xn);r.pitch=this._map.transform.pitch+t.amount,Jn(r,t)}if(r.zoom||r.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(r,{noMoveStart:!0})}}function Jn(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Qn(e,n,i){const{maxSpeed:r,linearity:o,deceleration:a}=i,s=t.clamp(e*o/(n/1e3),-r,r),l=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}class ti extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i,o={}){const a=r.mousePos(n.getCanvasContainer(),i),s=n.unproject(a);super(e,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=n}}class ei extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){const o="touchend"===e?i.changedTouches:i.touches,a=r.touchPos(n.getCanvasContainer(),o),s=a.map((t=>n.unproject(t))),l=a.reduce(((t,e,n,i)=>t.add(e.div(i.length))),new t.pointGeometry(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:i}),this._defaultPrevented=!1}}class ni extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class ii{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new ni(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new ti(t.type,this._map,t))}mouseup(t){this._map.fire(new ti(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new ti(t.type,this._map,t))}dblclick(t){return this._firePreventable(new ti(t.type,this._map,t))}mouseover(t){this._map.fire(new ti(t.type,this._map,t))}mouseout(t){this._map.fire(new ti(t.type,this._map,t))}touchstart(t){return this._firePreventable(new ei(t.type,this._map,t))}touchmove(t){this._map.fire(new ei(t.type,this._map,t))}touchend(t){this._map.fire(new ei(t.type,this._map,t))}touchcancel(t){this._map.fire(new ei(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ri{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new ti(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ti("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new ti(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class oi{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(r.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=n,this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const o=Math.min(i.x,n.x),a=Math.max(i.x,n.x),s=Math.min(i.y,n.y),l=Math.max(i.y,n.y);this._map._requestDomTask((()=>{this._box&&(r.setTransform(this._box,`translate(${o}px,${s}px)`),this._box.style.width=a-o+"px",this._box.style.height=l-s+"px")}))}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const i=this._startPos,o=n;if(this.reset(),r.suppressClick(),i.x!==o.x||i.y!==o.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(i,o,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function ai(e,n){t.assert_1(e.length===n.length);const i={};for(let t=0;t<e.length;t++)i[e[t].identifier]=n[t];return i}class si{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const n=new t.pointGeometry(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=ai(i,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const i=ai(n,e);for(const t in this.touches){const e=this.touches[t],n=i[t];(!n||n.dist(e)>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class li{constructor(t){this.singleTap=new si(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const i=this.singleTap.touchend(t,e,n);if(i){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class ci{constructor(){this._zoomIn=new li({numTouches:1,numTaps:2}),this._zoomOut=new li({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const i=this._zoomIn.touchend(t,e,n),r=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const ui={0:1,2:2};class hi{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=r.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){const n=ui[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&r.mouseButton(t)===this._eventButton&&(this._moved&&r.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class di extends hi{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class pi extends hi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class fi extends hi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class mi{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,i){i.length>0&&(this._active=!0);const r=ai(i,n),o=new t.pointGeometry(0,0),a=new t.pointGeometry(0,0);let s=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,r[t]=e)}if(this._touches=r,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){if(!this._firstTwoTouches)return;t.preventDefault();const[i,r]=this._firstTwoTouches,o=_i(n,e,i),a=_i(n,e,r);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[i,o]=this._firstTwoTouches,a=_i(n,e,i),s=_i(n,e,o);a&&s||(this._active&&r.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function _i(t,e,n){for(let i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function yi(t,e){return Math.log(t/e)/Math.LN2}class vi extends gi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(yi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:yi(this._distance,n),pinchAround:e}}}function bi(t,e){return 180*t.angleWith(e)/Math.PI}class xi extends gi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:bi(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=bi(t,this._startVector);return Math.abs(n)<e}}function wi(t){return Math.abs(t.y)>Math.abs(t.x)}class Ei extends gi{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,wi(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,n){const i=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const i=t.mag()>=2,r=e.mag()>=2;if(!i&&!r)return;if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return wi(t)&&wi(e)&&o}}const Mi={panStep:100,bearingStep:15,pitchStep:10};class Ti{constructor(){const t=Mi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,i=0,r=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Si,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+i*this._pitchStep,offset:[-r*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Si(t){return t*(2-t)}const ki=4.000244140625;class Ci{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const i=t.exported.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%ki==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=r.mousePos(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform,n=()=>e._terrainEnabled()?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>ki?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==i&&(i=1/i);const r=n(),o=Math.pow(2,r),a="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(a*i))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:n(),r=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&r&&o){t.assert_1(o&&"number"==typeof r);const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=o(e);a=t.number(r,i,n),e<1?this._frameId||(this._frameId=!0):s=!0}else a=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,i=(t.exported.now()-e.start)/e.duration,r=e.easing(i+.01)-e.easing(i),o=.27/Math.sqrt(r*r+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}reset(){this._active=!1}}class Ii{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Li{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Di{constructor(){this._tap=new li({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ai{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Pi{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class zi{constructor(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ni=t=>t.zoom||t.drag||t.pitch||t.rotate;class Ri extends t.Event{}class Oi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const i=t.sub([],n,e);i[2]<0?this.radius=t.length(t.div([],i,this.constants)):this.radius=t.length([i[0],i[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$1(e,e,this.constants);const n=t.scale$2([],e,this.radius);if(n[2]>0){const e=t.scale$2([],[0,0,1],t.dot(n,[0,0,1])),i=t.scale$2([],t.normalize([],[n[0],n[1],0]),this.radius),r=t.add([],n,t.scale$2([],t.sub([],t.add([],i,e),n),2));n[0]=r[0],n[1]=r[1]}return n}}function Fi(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Bi{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kn(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Oi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[e,n,i]of this._listeners)r.addEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[e,n,i]of this._listeners)r.removeEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new ii(e,t));const i=e.boxZoom=new oi(e,t);this._add("boxZoom",i);const r=new ci,o=new Li;e.doubleClickZoom=new Ii(o,r),this._add("tapZoom",r),this._add("clickZoom",o);const a=new Di;this._add("tapDragZoom",a);const s=e.touchPitch=new Ei;this._add("touchPitch",s);const l=new pi(t),c=new fi(t);e.dragRotate=new Pi(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new di(t),h=new mi(t);e.dragPan=new Ai(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new xi,p=new vi;e.touchZoomRotate=new zi(n,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ri(e));const f=e.scrollZoom=new Ci(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new Ti;this._add("keyboard",m);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[n]&&e[n].enable(t[n])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ni(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,n){for(const i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const n of t){const t=n.target;this._el.contains(t)&&e.push(n)}return e}handleEvent(e,n){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0,t.assert_1(void 0!==e.timeStamp);const i="renderFrame"===e.type,o=i?void 0:e,a={needsRenderFrame:!1},s={},l={},c=e.touches?this._getMapTouches(e.touches):void 0,u=c?r.touchPos(this._el,c):i?void 0:r.mousePos(this._el,e);for(const{handlerName:t,handler:i,allowed:r}of this._handlers){if(!i.isEnabled())continue;let h;this._blockedByActive(l,r,t)?i.reset():i[n||e.type]&&(h=i[n||e.type](e,u,c),this.mergeHandlerResult(a,s,h,t,o),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||i.isActive())&&(l[t]=i)}const h={};for(const t in this._previousActiveHandlers)l[t]||(h[t]=o);this._previousActiveHandlers=l,(Object.keys(h).length||Fi(a))&&(this._changes.push([a,s,h]),this._triggerRenderFrame()),(Object.keys(l).length||Fi(a))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:d}=a;d&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],d(this._map))}mergeHandlerResult(e,n,i,r,o){if(!i)return;t.extend(e,i);const a={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=a),void 0!==i.panDelta&&(n.drag=a),void 0!==i.pitchDelta&&(n.pitch=a),void 0!==i.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},i={};for(const[r,o,a]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.aroundCoord&&(e.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.extend(n,o),t.extend(i,a);this._updateMapTransform(e,n,i),this._changes=[]}_updateMapTransform(e,n,i){const r=this._map,o=r.transform,a=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!Fi(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(!Fi(e))return this._fireEvents(n,i,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:p}=e;void 0!==p&&(h=p),(t=>n[t]&&!this._eventsInProgress[t])("drag")&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",r._stop(!0),h=h||r.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s){t.assert_1(this._dragOrigin,"_dragOrigin should have been setup with a previous dragstart");const e=o.screenPointToMercatorRay(h),n=o.screenPointToMercatorRay(h.sub(s)),i=this._trackingEllipsoid.projectRay(e.dir),r=this._trackingEllipsoid.projectRay(n.dir);f[0]=r[0]-i[0],f[1]=r[1]-i[1]}const m=o.zoom,g=[0,0,0];if(l){const e=a(d||o.pointCoordinate3D(h)),n={dir:t.normalize([],t.sub([],e,o._camera.position))},i=o.screenPointToMercatorRay(o.centerPoint);if(n.dir[2]<0){const r=t.altitudeFromMercatorZ(e[2],e[1]),s=o.rayIntersectionCoordinate(o.pointRayIntersection(o.centerPoint,r)),c=o.zoomDeltaToMovement(a(s),l)*(i.dir[2]/n.dir[2]);t.scale$2(g,n.dir,c)}else if(o._terrainEnabled()){const i=o.zoomDeltaToMovement(e,l);t.scale$2(g,n.dir,i)}}const _=t.add(f,f,g);o._translateCameraConstrained(_),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,i,!0)}_fireEvents(e,n,i){const r=Ni(this._eventsInProgress),o=Ni(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!r&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||i,s[`${t}end`]=l)}for(const t in s)this._fireEvent(t,s[t]);const c=Ni(this._eventsInProgress);if(i&&(r||o)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Ri("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Ui extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,i){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)}panTo(e,n,i){return this.easeTo(t.extend({center:e},n),i)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const i=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),i,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_cameraForBoxAndBearing(e,n,i,r){const o=this._extendCameraOptions(r),a=this.transform,s=a.padding,l=a.project(t.LngLat.convert(e)),c=a.project(t.LngLat.convert(n)),u=l.rotate(-t.degToRad(i)),h=c.rotate(-t.degToRad(i)),d=new t.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),p=new t.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),f=d.sub(p),m=(a.width-(s.left+s.right+o.padding.left+o.padding.right))/f.x,g=(a.height-(s.top+s.bottom+o.padding.top+o.padding.bottom))/f.y;if(g<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const _=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),o.maxZoom),y="number"==typeof o.offset.x?new t.pointGeometry(o.offset.x,o.offset.y):t.pointGeometry.convert(o.offset),v=(o.padding.left-o.padding.right)/2,b=(o.padding.top-o.padding.bottom)/2,x=new t.pointGeometry(v,b).rotate(i*Math.PI/180),w=y.add(x).mult(a.scale/a.zoomScale(_));return{center:a.unproject(l.add(c).div(2).sub(w)),zoom:_,bearing:i}}_cameraForBox(e,n,i,r,o){const a=this._extendCameraOptions(o);i=i||0,r=r||0,e=t.LngLat.convert(e),n=t.LngLat.convert(n);const s=this.transform.clone();s.padding=a.padding;const l=this.getFreeCameraOptions(),c=new t.LngLat(.5*(e.lng+n.lng),.5*(e.lat+n.lat)),u=.5*(i+r);if(s._camera.position[2]<t.mercatorZfromAltitude(u,c.lat))return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),s.setFreeCameraOptions(l);const h=t.MercatorCoordinate.fromLngLat(e),d=t.MercatorCoordinate.fromLngLat(n),p=s.pointRayIntersection(s.centerPoint,u),f=[(g=s.rayIntersectionCoordinate(p)).x,g.y,g.z],m=s.screenPointToMercatorRay(s.centerPoint);var g;let _,y=0;do{const e=Math.floor(s.zoom),n=1<<e,o=Math.min(n*h.x,n*d.x),a=Math.min(n*h.y,n*d.y),l=Math.max(n*h.x,n*d.x),c=Math.max(n*h.y,n*d.y),u=new t.Aabb([o,a,i],[l,c,r]),p=t.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,e);if(2!==u.intersects(p)){_&&(s._camera.position=t.scaleAndAdd([],s._camera.position,m.dir,-_),s._updateStateFromCamera());break}const g=t.sub([],s._camera.position,f);_=.5*t.length(g),s._camera.position=t.scaleAndAdd([],s._camera.position,m.dir,_);try{s._updateStateFromCamera()}catch(e){return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++y<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}_raycastElevationBox(e,n){const i=this.transform.elevation;if(!i)return;const r=new t.pointGeometry(e.x,n.y),o=new t.pointGeometry(n.x,e.y),a=i.pointCoordinate(e);if(!a)return;const s=i.pointCoordinate(n);if(!s)return;const l=i.pointCoordinate(r);if(!l)return;const c=i.pointCoordinate(o);if(!c)return;const u=new t.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new t.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new t.MercatorCoordinate(l[0],l[1]).toLngLat(),p=new t.MercatorCoordinate(c[0],c[1]).toLngLat(),f=Math.min(u.lng,Math.min(h.lng,Math.min(d.lng,p.lng))),m=Math.min(u.lat,Math.min(h.lat,Math.min(d.lat,p.lat))),g=Math.max(u.lng,Math.max(h.lng,Math.max(d.lng,p.lng))),_=Math.max(u.lat,Math.max(h.lat,Math.max(d.lat,p.lat))),y=Math.min(a[3],Math.min(s[3],Math.min(l[3],c[3]))),v=Math.max(a[3],Math.max(s[3],Math.max(l[3],c[3])));return{minLngLat:new t.LngLat(f,m),maxLngLat:new t.LngLat(g,_),minAltitude:y,maxAltitude:v}}fitScreenCoordinates(e,n,i,r,o){let a,s,l,c;const u=t.pointGeometry.convert(e),h=t.pointGeometry.convert(n),d=this._raycastElevationBox(u,h);if(d)a=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,c=d.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(u,h))return this;a=this.transform.pointLocation(u),s=this.transform.pointLocation(h)}return 0===this.transform.pitch?this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(n)),i,r),r,o):this._fitInternal(this._cameraForBox(a,s,l,c,r),r,o)}_fitInternal(e,n,i){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(e,n){this.stop();const i=this.transform;let r=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){this.stop();const i=this.transform,r=i.zoom,o=i.pitch,a=i.bearing;i.setFreeCameraOptions(e);const s=r!==i.zoom,l=o!==i.pitch,c=a!==i.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),s&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),c&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const i=this.transform,r=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:r,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:i.padding,d=t.pointGeometry.convert(e.offset);let p=i.centerPoint.add(d);const f=i.pointLocation(p),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);const g=i.project(f),_=i.project(m).sub(g),y=i.zoomScale(l-r);let v,b;e.around&&(v=t.LngLat.convert(e.around),b=i.locationPoint(v));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==r,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==a,this._padding=!i.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,x),this._ease((e=>{if(this._zooming&&(i.zoom=t.number(r,l,e)),this._rotating&&(i.bearing=t.number(o,c,e)),this._pitching&&(i.pitch=t.number(a,u,e)),this._padding&&(i.interpolatePadding(s,h,e),p=i.centerPoint.add(d)),v)i.setLocationAtPoint(v,b);else{const t=i.zoomScale(i.zoom-r),n=l>r?Math.min(2,y):Math.max(.5,y),o=Math.pow(n,1-e),a=i.unproject(g.add(_.mult(e*o)).mult(t));i.setLocationAtPoint(i.renderWorldCopies?a.wrap():a,p)}this._fireMoveEvents(n)}),(t=>{i.recenterOnTerrain(),this._afterEase(n,t)}),e),this}_prepareEase(e,n,i={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.transform.cameraElevationReference="ground";const i=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(!e.essential&&t.exported.prefersReducedMotion){const i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const i=this.transform,r=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):r,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:i.padding,d=i.zoomScale(l-r),p=t.pointGeometry.convert(e.offset);let f=i.centerPoint.add(p);const m=i.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const _=i.project(m),y=i.project(g).sub(_);let v=e.curve;const b=Math.max(i.width,i.height),x=b/d,w=y.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,r,l),i.minZoom,i.maxZoom),o=b/i.zoomScale(n-r);v=Math.sqrt(o/w*2)}const E=v*v;function M(t){const e=(x*x-b*b+(t?-1:1)*E*E*w*w)/(2*(t?x:b)*E*w);return Math.log(Math.sqrt(e*e+1)-e)}function T(t){return(Math.exp(t)-Math.exp(-t))/2}function S(t){return(Math.exp(t)+Math.exp(-t))/2}const k=M(0);let C=function(t){return S(k)/S(k+v*t)},I=function(t){return b*((S(k)*(T(e=k+v*t)/S(e))-T(k))/E)/w;var e},L=(M(1)-k)/v;if(Math.abs(w)<1e-6||!isFinite(L)){if(Math.abs(b-x)<1e-6)return this.easeTo(e,n);const t=x<b?-1:1;L=Math.abs(Math.log(x/b))/v,I=function(){return 0},C=function(e){return Math.exp(t*v*e)}}if("duration"in e)e.duration=+e.duration;else{const t="screenSpeed"in e?+e.screenSpeed/v:+e.speed;e.duration=1e3*L/t}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==a,this._padding=!i.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((e=>{const d=e*L,m=1/C(d);i.zoom=1===e?l:r+i.scaleZoom(m),this._rotating&&(i.bearing=t.number(o,c,e)),this._pitching&&(i.pitch=t.number(a,u,e)),this._padding&&(i.interpolatePadding(s,h,e),f=i.centerPoint.add(p));const v=1===e?g:i.unproject(_.add(y.mult(I(d))).mult(m));i.setLocationAtPoint(i.renderWorldCopies?v.wrap():v,f),i._updateCenterElevation(),this._fireMoveEvents(n)}),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}class Yi{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=r.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=r.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){r.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const i=n.reduce(((t,e,i)=>(e.value&&(t+=`${e.key}=${e.value}${i<n.length-1?"&":""}`),t)),"?");e.href=`${t.config.FEEDBACK_URL}/${i}${this._map._hash?this._map._hash.getHashString(!0):""}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const n in e){const i=e[n];if(i.used){const e=i.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ji{constructor(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)}onAdd(t){this._map=t,this._container=r.create("div","mapboxgl-ctrl");const e=r.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Vi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const e of n)if(e.id===t)return void(e.cancelled=!0)}run(e=0){t.assert_1(!this._currentlyRunning);const n=this._currentlyRunning=this._queue;this._queue=[];for(const t of n)if(!t.cancelled&&(t.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Gi(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){const r=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-i.center.lng)/360),s=i.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>i.width||n.y>i.height;i.locationPoint(r).distSqr(n)<s&&(l||Math.abs(r.lng-i.center.lng)<a)?e=r:i.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-i.center.lng)<a)&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}const qi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Hi(t,e,n){const i=t.classList;for(const t in qi)i.remove(`mapboxgl-${n}-anchor-${t}`);i.add(`mapboxgl-${n}-anchor-${e}`)}class $i extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=r.create("div"),this._element.setAttribute("aria-label","Map marker");const n=r.createNS("http://www.w3.org/2000/svg","svg"),i=41,o=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${i}px`),n.setAttributeNS(null,"width",`${o}px`),n.setAttributeNS(null,"viewBox",`0 0 ${o} ${i}`);const a=r.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=r.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=r.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=r.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=r.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=r.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=r.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=r.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=r.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=r.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const _=r.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(_),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",i*this._scale+"px"),n.setAttributeNS(null,"width",o*this._scale+"px"),this._element.appendChild(n),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),Hi(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),r.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[i,-1*(e-n+i)],"bottom-right":[-i,-1*(e-n+i)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_evaluateOpacity(){const t=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(t))return void this._clearFadeTimer();const e=this._map.unproject(t);let n=!1;if(this._map.getTerrain()){const t=this._map.getFreeCameraOptions();if(t.position){const i=t.position.toLngLat();n=i.distanceTo(e)<.9*i.distanceTo(this._lngLat)}}const i=(1-this._map._queryFogOpacity(e))*(n?.2:1);this._element.style.opacity=`${i}`,this._popup&&this._popup._setOpacity(`${i}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(t){const e=this._map.transform;return!!t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Gi(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),this._map._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&r.setTransform(this._element,`${qi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${e}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}_transformedOffset(){if(!this._defaultMarker)return this._offset;const t=this._map.transform,e=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&e._rotate(t.angle),"map"===this._pitchAlignment&&(e.y*=Math.cos(t._pitch)),e}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Zi{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const Wi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:Xi,HTMLElement:Ki,ImageBitmap:Ji}=t.window,Qi=85,tr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Qi,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function er(t){t.parentNode&&t.parentNode.removeChild(t)}const nr={showCompass:!0,showZoom:!0,visualizePitch:!1};class ir{constructor(e,n,i=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new pi({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,i&&(this.mousePitch=new fi({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener(n,"mousedown",this.mousedown),r.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),r.addEventListener(n,"touchmove",this.touchmove),r.addEventListener(n,"touchend",this.touchend),r.addEventListener(n,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),r.disableDrag()}move(t,e){const n=this.map,i=this.mouseRotate.mousemoveWindow(t,e);if(i&&i.bearingDelta&&n.setBearing(n.getBearing()+i.bearingDelta),this.mousePitch){const i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}}off(){const t=this.element;r.removeEventListener(t,"mousedown",this.mousedown),r.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),r.removeEventListener(t,"touchmove",this.touchmove),r.removeEventListener(t,"touchend",this.touchend),r.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){r.enableDrag(),r.removeEventListener(t.window,"mousemove",this.mousemove),r.removeEventListener(t.window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),r.mousePos(this.element,e)),r.addEventListener(t.window,"mousemove",this.mousemove),r.addEventListener(t.window,"mouseup",this.mouseup)}mousemove(t){this.move(t,r.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=r.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=r.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const rr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let or;let ar=0,sr=!1;class lr extends t.Evented{constructor(e){super(),this.options=t.extend({},rr,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=Gn(this._updateMarkerRotation,20)}onAdd(e){return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==or?n(or):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>{or="denied"!==t.state,n(or)})):(or=!!t.window.navigator.geolocation,n(or)),this._container;var n}onRemove(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),r.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ar=0,sr=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:t.assert_1(!1,`Unexpected watchState ${this._watchState}`)}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;default:t.assert_1(!1,`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){t.assert_1(this._circleElement);const e=this._map._container.clientHeight/2,n=this._map.unproject([0,e]),i=this._map.unproject([100,e]),r=n.distanceTo(i)/100,o=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${o}px`,this._circleElement.style.height=`${o}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&sr)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=r.create("button","mapboxgl-ctrl-geolocate",this._container),r.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=r.create("div","mapboxgl-user-location"),this._dotElement.appendChild(r.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(r.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new $i({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=r.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new $i({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{const n=e.originalEvent&&"resize"===e.originalEvent.type;e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||n||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ar--,sr=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break;default:t.assert_1(!1,`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break;case"OFF":break;default:t.assert_1(!1,`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ar++,ar>1?(e={maximumAge:6e5,timeout:0},sr=!0):(e=this.options.positionOptions,sr=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{"ondeviceorientationabsolute"in t.window?t.window.addEventListener("deviceorientationabsolute",this._onDeviceOrientationListener):t.window.addEventListener("deviceorientation",this._onDeviceOrientationListener)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(console.error):e()}_clearWatch(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}const cr={maxWidth:100,unit:"metric"};function ur(t,e,n){const i=n&&n.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),a=t.unproject([i,r]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?hr(e,i,n/5280,t._getUIString("ScaleControl.Miles"),t):hr(e,i,n,t._getUIString("ScaleControl.Feet"),t)}else n&&"nautical"===n.unit?hr(e,i,s/1852,t._getUIString("ScaleControl.NauticalMiles"),t):s>=1e3?hr(e,i,s/1e3,t._getUIString("ScaleControl.Kilometers"),t):hr(e,i,s,t._getUIString("ScaleControl.Meters"),t)}function hr(t,e,n,i,r){const o=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n),a=o/n;r._requestDomTask((()=>{t.style.width=e*a+"px",t.innerHTML=`${o}&nbsp;${i}`}))}const dr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},pr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");class fr extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(dr),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&r.remove(this._content),this._container&&(r.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");let r;for(i.innerHTML=e;r=i.firstChild,r;)n.appendChild(r);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=r.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=r.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){const e=this._lngLat||this._trackPointer;if(!this._map||!e||!this._content)return;if(this._container||(this._container=r.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=r.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Gi(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const n=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let i=this.options.anchor;const o=mr(this.options.offset);if(!i){const t=this._container.offsetWidth,e=this._container.offsetHeight;let r;r=n.y+o.bottom.y<e?["top"]:n.y>this._map.transform.height-e?["bottom"]:[],n.x<t/2?r.push("left"):n.x>this._map.transform.width-t/2&&r.push("right"),i=0===r.length?"bottom":r.join("-")}const a=n.add(o[i]).round();this._map._requestDomTask((()=>{this._container&&i&&(r.setTransform(this._container,`${qi[i]} translate(${a.x}px,${a.y}px)`),Hi(this._container,i,"popup"))}))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(pr);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._content&&(this._content.style.opacity=t),this._tip&&(this._tip.style.opacity=t)}}function mr(e){if(e){if("number"==typeof e){const n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(n,n),"top-right":new t.pointGeometry(-n,n),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(n,-n),"bottom-right":new t.pointGeometry(-n,-n),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const n=t.pointGeometry.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return mr(new t.pointGeometry(0,0))}const gr=t.window.performance,_r={getPerformanceMetricsAsync(e){const n=t.PerformanceUtils.getPerformanceMetrics(),i=new M(H(),this),r=gr.getEntriesByName("create","mark")[0].startTime;i.broadcast("getWorkerPerformanceMetrics",{},((t,o)=>{if(i.remove(),t)return e(t);const a={};for(const t of o){for(const e of t.measures)a[e.name]=(a[e.name]||0)+e.duration;a.workerInitialization=t.timeOrigin-gr.timeOrigin-r}for(const t in a)n[t]=a[t]/o.length;return n.workerIdle=n.loadTime-n.workerInitialization-n.workerEvaluateScript-n.workerTask,n.workerIdlePercent=n.workerIdle/n.loadTime,n.parseTile=n.parseTile1+n.parseTile2,e(void 0,n)}))}},yr={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Ui{constructor(e){if(t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},tr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>Qi)throw new Error("maxPitch must be less than or equal to 85");if(super(new Vn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._renderTaskQueue=new Vi,this._domRenderTaskQueue=new Vi,this._controls=[],this._markers=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Wi,e.locale),this._clickTolerance=e.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Zi(0),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof Ki))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Bi(this,e);const n="string"==typeof e.hash&&e.hash||void 0;this._hash=e.hash&&new qn(n).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.attributionControl&&this.addControl(new Yi({customAttribution:e.customAttribution})),this._logoControl=new ji,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){const n=this._containerDimensions(),i=n[0],r=n[1];this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r);const o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?Qi:t)>Qi)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let i=!1;const r=r=>{const o=this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[];o.length?i||(i=!0,n.call(this,new ti(t,this,r.originalEvent,{features:o}))):i=!1};return{layer:e,listener:n,delegates:{mousemove:r,mouseout:()=>{i=!1}}}}if("mouseleave"===t||"mouseout"===t){let i=!1;const r=r=>{(this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?i=!0:i&&(i=!1,n.call(this,new ti(t,this,r.originalEvent)))},o=e=>{i&&(i=!1,n.call(this,new ti(t,this,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:r,mouseout:o}}}{const i=t=>{const i=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(this,t),delete t.features)};return{layer:e,listener:n,delegates:{[t]:i}}}}on(t,e,n){if(void 0===n)return super.on(t,e);const i=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i);for(const t in i.delegates)this.on(t,i.delegates[t]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);const i=this._createDelegatedListener(t,e,n);for(const t in i.delegates)this.once(t,i.delegates[t]);return this}off(t,e,n){if(void 0===n)return super.off(t,e);return this._delegatedListeners&&this._delegatedListeners[t]&&(i=>{const r=i[t];for(let t=0;t<r.length;t++){const i=r[t];if(i.layer===e&&i.listener===n){for(const t in i.delegates)this.off(t,i.delegates[t]);return r.splice(t,1),this}}})(this._delegatedListeners),this}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),n=n||{},e=e||[[0,0],[this.transform.width,this.transform.height]],this.style.queryRenderedFeatures(e,n,this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}queryTerrainElevation(e,n){const i=this.transform.elevation;return i?(n=t.extend({},{exaggerated:!0},n),i.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),t&&(this.style=new ie(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ie(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const i=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(r,((e,i)=>{e?this.fire(new t.ErrorEvent(e)):i&&this._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style._getSourceCaches(e);if(0!==n.length)return n.every((t=>t.loaded()));this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n,{pixelRatio:i=1,sdf:r=!1,stretchX:o,stretchY:a,content:s}={}){this._lazyInitEmptyStyle();if(n instanceof Xi||Ji&&n instanceof Ji){const{width:l,height:c,data:u}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:i,stretchX:o,stretchY:a,content:s,sdf:r,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=n,h=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:i,stretchX:o,stretchY:a,content:s,sdf:r,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,n){const i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof Xi||Ji&&n instanceof Ji?t.exported.getImageData(n):n,{width:o,height:a,data:s}=r;if(void 0===o||void 0===a)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(o!==i.data.width||a!==i.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(n instanceof Xi||Ji&&n instanceof Ji);i.data.replace(s,l),this.style.updateImage(e,i)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,i)=>{n(e,i instanceof Xi?t.exported.getImageData(i):i)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e,n={}){return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n,i={}){return this.style.setPaintProperty(t,e,n,i),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n,i={}){return this.style.setLayoutProperty(t,e,n,i),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=r.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=r.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=r.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);const i=this._controlContainer=r.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{o[t]=r.create("div",`mapboxgl-ctrl-${t}`,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const i=t.exported.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${n}px`}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_setupPainter(){const n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(t.storeAuthState(i,!0),this.painter=new Pn(i,this.transform),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.isMoving()&&this.loaded()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const i=this.painter.context.extTimerQuery,r=t.exported.now();this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n));const o=t.PerformanceUtils.beginMeasure("render");let a=this._updateAverageElevation(r);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;let s=!1;const l=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=t.exported.now();this.style.zoomHistory.update(e,n);const i=new t.EvaluationParameters(e,{now:n,fadeDuration:l,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=i.crossFadingFactor();1===r&&r===this._crossFadingFactor||(s=!0,this._crossFadingFactor=r),this.style.update(i)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||s)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const r=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))}),50)}if(t.PerformanceUtils.endMeasure(o),this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const c=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(c||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(a=this._updateAverageElevation(r,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||c||(this._fullyLoaded=!0,this._authenticate(),t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}_updateAverageElevation(t,e=!1){const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let i=this.transform.sampleAverageElevation();isNaN(i)?i=0:this._averageElevationLastSampledAt=t;const r=Math.abs(e-i);if(r>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(i),n(i);this._averageElevation.easeTo(i,t,300)}else if(r>1e-4)return this._averageElevation.jumpTo(i),n(i)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof ji&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,i=n.createFramebuffer();function r(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(r(t),e.canvasCopies.map(r),e.timeStamps)}_canvasPixelComparison(t,e,n){let i=n[1]-n[0];const r=t.length/4;for(let o=0;o<e.length;o++){const a=e[o];let s=0;for(let e=0;e<a.length;e+=4)a[e]===t[e]&&a[e+1]===t[e+1]&&a[e+2]===t[e+2]&&a[e+3]===t[e+3]&&(s+=1);i+=(n[o+2]-n[o+1])*(1-s/r)}return i}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),er(this._canvasContainer),er(this._controlContainer),er(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),t.PerformanceUtils.clearMetrics(),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((e=>{const n=!!this._renderNextFrame;t.PerformanceUtils.frame(e,n),this._frame=null,this._renderNextFrame=null,n&&this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},nr,e),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),r.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),r.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=r.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ir(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){r.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=r.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){const n=this._map._getUIString(`NavigationControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}},GeolocateControl:lr,AttributionControl:Yi,ScaleControl:class{constructor(e){this.options=t.extend({},cr,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){ur(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){r.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,ur(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){r.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=r.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);r.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:fr,Marker:$i,Style:ie,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:Yn,Evented:t.Evented,config:t.config,prewarm:function(){H().acquire(V)},clearPrewarmedResources:function(){const t=q;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(V),q=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return G.workerCount},set workerCount(t){G.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return t.Debug.extend(yr,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics,getPerformanceMetricsAsync:_r.getPerformanceMetricsAsync}),t.assert_1(!0,"canary assert"),yr})),i}()},6158:function(t){t.exports=function(){"use strict";var t,e,n;function i(i,r){if(t)if(e){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/api/#transpiling-v2'); }; var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk); self.onerror = null;",a={};t(a),n=r(a),"undefined"!=typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else e=r;else t=r}return i(0,(function(t){var e="2.4.0",n=i;function i(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=i,this.p2x=n,this.p2y=i}i.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},i.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},i.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},i.prototype.solveCurveX=function(t,e){var n,i,r,o,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(o=this.sampleCurveX(r)-t,Math.abs(o)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=o/s}if((r=t)<(n=0))return n;if(r>(i=1))return i;for(;n<i;){if(o=this.sampleCurveX(r),Math.abs(o-t)<e)return r;t>o?n=r:i=r,r=.5*(i-n)+n}return r},i.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=o;function o(t,e){this.x=t,this.y=e}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),i=Math.sin(t),r=e.y+i*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-i*(this.y-e.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var a="undefined"!=typeof self?self:{};const s=Math.pow(2,53)-1,l=Math.PI/180,c=180/Math.PI;function u(t){return t*l}const h=[[0,0],[1,0],[1,1],[0,1]];function d(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function p(t,e,i,r){const o=new n(t,e,i,r);return function(t){return o.solve(t)}}const f=p(.25,.1,.25,1);function m(t,e,n){return Math.min(n,Math.max(e,t))}function g(t,e,n){const i=n-e,r=((t-e)%i+i)%i+e;return r===e?n:r}function _(t,e,n){if(!t.length)return n(null,[]);let i=t.length;const r=new Array(t.length);let o=null;t.forEach(((t,a)=>{e(t,((t,e)=>{t&&(o=t),r[a]=e,0==--i&&n(o,r)}))}))}function y(t){const e=[];for(const n in t)e.push(t[n]);return e}function v(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}let b=1;function x(){return b++}function w(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function E(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function M(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function T(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function S(t,e){return-1!==t.indexOf(e,t.length-e.length)}function k(t,e,n){const i={};for(const r in t)i[r]=e.call(n||this,t[r],r,t);return i}function C(t,e,n){const i={};for(const r in t)e.call(n||this,t[r],r,t)&&(i[r]=t[r]);return i}function I(t){return Array.isArray(t)?t.map(I):"object"==typeof t&&t?k(t,I):t}const L={};function D(t){L[t]||("undefined"!=typeof console&&console.warn(t),L[t]=!0)}function A(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function P(t){let e=0;for(let n,i,r=0,o=t.length,a=o-1;r<o;a=r++)n=t[r],i=t[a],e+=(i.x-n.x)*(n.y+i.y);return e}function z(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function N(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,i,r)=>{const o=i||r;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let R,O,F,B=null;function U(t){if(null==B){const e=t.navigator?t.navigator.userAgent:null;B=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return B}function Y(t){try{const e=a[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}const j={now:()=>void 0!==F?F:a.performance.now(),setNow(t){F=t},restoreNow(){F=void 0},frame(t){const e=a.requestAnimationFrame(t);return{cancel:()=>a.cancelAnimationFrame(e)}},getImageData(t,e=0){const n=a.document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,i.drawImage(t,0,0,t.width,t.height),i.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(R||(R=a.document.createElement("a")),R.href=t,R.href),get devicePixelRatio(){return a.devicePixelRatio},get prefersReducedMotion(){return!!a.matchMedia&&(null==O&&(O=a.matchMedia("(prefers-reduced-motion: reduce)")),O.matches)}};let V;const G={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==V){const t=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{V=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):t}catch(e){V=t}}return V},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},q={supported:!1,testSupport:function(t){!Z&&$&&(W?X(t):H=t)}};let H,$,Z=!1,W=!1;function X(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,$),t.isContextLost())return;q.supported=!0}catch(t){}t.deleteTexture(e),Z=!0}a.document&&($=a.document.createElement("img"),$.onload=function(){H&&X(H),H=null,W=!0},$.onerror=function(){Z=!0,H=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const K="01",J="NO_ACCESS_TOKEN";function Q(t){return 0===t.indexOf("mapbox:")}function tt(t){return G.API_URL_REGEX.test(t)}const et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function nt(t){const e=t.match(et);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function it(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}function rt(t){if(!t)return null;const e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(a.atob(e[1]).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){return null}}class ot{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const e=rt(G.ACCESS_TOKEN);let n="";return n=e&&e.u?a.btoa(encodeURIComponent(e.u).replace(/%([0-9A-F]{2})/g,((t,e)=>String.fromCharCode(Number("0x"+e))))):G.ACCESS_TOKEN||"",t?`mapbox.eventData.${t}:${n}`:`mapbox.eventData:${n}`}fetchEventData(){const t=Y("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{const t=a.localStorage.getItem(e);t&&(this.eventData=JSON.parse(t));const i=a.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){D("Unable to read from LocalStorage")}}saveEventData(){const t=Y("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{a.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&a.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){D("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,n,i,r){if(!G.EVENTS_URL)return;const o=nt(G.EVENTS_URL);o.params.push(`access_token=${r||G.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:e,skuId:K,userId:this.anonId},s=n?v(a,n):a,l={url:it(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=St(l,(t=>{this.pendingRequest=null,i(t),this.saveEventData(),this.processRequests(r)}))}queueRequest(t,e){this.queue.push(t),this.processRequests(e)}}const at=new class extends ot{constructor(t){super("appUserTurnstile"),this._customAccessToken=t}postTurnstileEvent(t,e){G.EVENTS_URL&&G.ACCESS_TOKEN&&Array.isArray(t)&&t.some((t=>Q(t)||tt(t)))&&this.queueRequest(Date.now(),e)}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=rt(G.ACCESS_TOKEN),n=e?e.u:G.ACCESS_TOKEN;let i=n!==this.eventData.tokenU;M(this.anonId)||(this.anonId=w(),i=!0);const r=this.queue.shift();if(this.eventData.lastSuccess){const t=new Date(this.eventData.lastSuccess),e=new Date(r),n=(r-this.eventData.lastSuccess)/864e5;i=i||n>=1||n<-1||t.getDate()!==e.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(r,{"enabled.telemetry":!1},(t=>{t||(this.eventData.lastSuccess=r,this.eventData.tokenU=n)}),t)}},st=at.postTurnstileEvent.bind(at),lt=new class extends ot{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,e,n,i){this.skuToken=e,this.errorCb=i,G.EVENTS_URL&&(n||G.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(J)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),M(this.anonId)||(this.anonId=w()),this.postEvent(n,{skuToken:this.skuToken},(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t))}},ct=lt.postMapLoadEvent.bind(lt),ut=new class extends ot{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,e,n,i){if(!G.API_URL||!G.SESSION_PATH)return;const r=nt(G.API_URL+G.SESSION_PATH);r.params.push(`sku=${e||""}`),r.params.push(`access_token=${i||G.ACCESS_TOKEN||""}`);const o={url:it(r),headers:{"Content-Type":"text/plain"}};this.pendingRequest=kt(o,(t=>{this.pendingRequest=null,n(t),this.saveEventData(),this.processRequests(i)}))}getSessionAPI(t,e,n,i){this.skuToken=e,this.errorCb=i,G.SESSION_PATH&&G.API_URL&&(n||G.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},n):this.errorCb(new Error(J)))}processRequests(t){if(this.pendingRequest||0===this.queue.length)return;const{id:e,timestamp:n}=this.queue.shift();e&&this.success[e]||this.getSession(n,this.skuToken,(t=>{t?this.errorCb(t):e&&(this.success[e]=!0)}),t)}},ht=ut.getSessionAPI.bind(ut),dt=new Set,pt="mapbox-tiles";let ft,mt,gt=500,_t=50;function yt(){a.caches&&!ft&&(ft=a.caches.open(pt))}function vt(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}let bt=1/0;const xt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xt);class wt extends Error{constructor(t,e,n){401===e&&tt(n)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(t),this.status=e,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Et=z()?()=>self.worker&&self.worker.referrer:()=>("blob:"===a.location.protocol?a.parent:a).location.href,Mt=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(Et())&&!/^\w+:/.test(n))){if(a.fetch&&a.Request&&a.AbortController&&a.Request.prototype.hasOwnProperty("signal"))return function(t,e){const n=new a.AbortController,i=new a.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:Et(),signal:n.signal});let r=!1,o=!1;const s=(l=i.url).indexOf("sku=")>0&&tt(l);var l;"json"===t.type&&i.headers.set("Accept","application/json");const c=(n,r,l)=>{if(o)return;if(n&&"SecurityError"!==n.message&&D(n),r&&l)return u(r);const c=Date.now();a.fetch(i).then((n=>{if(n.ok){const t=s?n.clone():null;return u(n,t,c)}return e(new wt(n.statusText,n.status,t.url))})).catch((t=>{20!==t.code&&e(new Error(t.message))}))},u=(n,s,l)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{o||(s&&l&&function(t,e,n){if(yt(),!ft)return;const i={status:e.status,statusText:e.statusText,headers:new a.Headers};e.headers.forEach(((t,e)=>i.headers.set(e,t)));const r=N(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&i.headers.set("Expires",new Date(n+1e3*r["max-age"]).toUTCString()),new Date(i.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===mt)try{new Response(new ReadableStream),mt=!0}catch(t){mt=!1}mt?e(t.body):t.blob().then(e)}(e,(e=>{const n=new a.Response(e,i);yt(),ft&&ft.then((e=>e.put(vt(t.url),n))).catch((t=>D(t.message)))})))}(i,s,l),r=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((t=>{o||e(new Error(t.message))}))};return s?function(t,e){if(yt(),!ft)return e(null);const n=vt(t.url);ft.then((t=>{t.match(n).then((i=>{const r=function(t){if(!t)return!1;const e=new Date(t.headers.get("Expires")||0),n=N(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(i);t.delete(n),r&&t.put(n,i.clone()),e(null,i,r)})).catch(e)})).catch(e)}(i,c):c(null,null),{cancel:()=>{o=!0,r||n.abort()}}}(t,e);if(z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){const n=new a.XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const e in t.headers)n.setRequestHeader(e,t.headers[e]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new wt(n.statusText,n.status,t.url))},n.send(t.body),{cancel:()=>n.abort()}}(t,e)},Tt=function(t,e){return Mt(v(t,{type:"arrayBuffer"}),e)},St=function(t,e){return Mt(v(t,{method:"POST"}),e)},kt=function(t,e){return Mt(v(t,{method:"GET"}),e)};function Ct(t){const e=a.document.createElement("a");return e.href=t,e.protocol===a.document.location.protocol&&e.host===a.document.location.host}const It="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Lt,Dt;Lt=[],Dt=0;const At=function(t,e){if(q.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Dt>=G.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return Lt.push(n),n}Dt++;let n=!1;const i=()=>{if(!n)for(n=!0,Dt--;Lt.length&&Dt<G.MAX_PARALLEL_IMAGE_REQUESTS;){const t=Lt.shift(),{requestParameters:e,callback:n,cancelled:i}=t;i||(t.cancel=At(e,n).cancel)}},r=Tt(t,((t,n,r,o)=>{i(),t?e(t):n&&(a.createImageBitmap?function(t,e){const n=new a.Blob([new Uint8Array(t)],{type:"image/png"});a.createImageBitmap(n).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(n,((t,n)=>e(t,n,r,o))):function(t,e){const n=new a.Image,i=a.URL;n.onload=()=>{e(null,n),i.revokeObjectURL(n.src),n.onload=null,a.requestAnimationFrame((()=>{n.src=It}))},n.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new a.Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?i.createObjectURL(r):It}(n,((t,n)=>e(t,n,r,o))))}));return{cancel:()=>{r.cancel(),i()}}};function Pt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function zt(t,e,n){if(n&&n[t]){const i=n[t].indexOf(e);-1!==i&&n[t].splice(i,1)}}class Nt{constructor(t,e={}){v(this,e),this.type=t}}class Rt extends Nt{constructor(t,e={}){super("error",v({error:t},e))}}class Ot{on(t,e){return this._listeners=this._listeners||{},Pt(t,e,this._listeners),this}off(t,e){return zt(t,e,this._listeners),zt(t,e,this._oneTimeListeners),this}once(t,e){return e?(this._oneTimeListeners=this._oneTimeListeners||{},Pt(t,e,this._oneTimeListeners),this):new Promise((e=>this.once(t,e)))}fire(t,e){"string"==typeof t&&(t=new Nt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const e of i)zt(n,e,this._oneTimeListeners),e.call(this,t);const r=this._eventedParent;r&&(v(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(t))}else t instanceof Rt&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var Ft={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Bt{constructor(t,e,n,i){this.message=(t?`${t}: `:"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)}}function Ut(t){const e=t.value;return e?[new Bt(t.key,e,"constants have been deprecated as of v8")]:[]}function Yt(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}function jt(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Vt(t){if(Array.isArray(t))return t.map(Vt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=Vt(t[n]);return e}return jt(t)}class Gt extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class qt{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new qt(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Ht={kind:"null"},$t={kind:"number"},Zt={kind:"string"},Wt={kind:"boolean"},Xt={kind:"color"},Kt={kind:"object"},Jt={kind:"value"},Qt={kind:"collator"},te={kind:"formatted"},ee={kind:"resolvedImage"};function ne(t,e){return{kind:"array",itemType:t,N:e}}function ie(t){if("array"===t.kind){const e=ie(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const re=[Ht,$t,Zt,Wt,Xt,te,Kt,ne(Jt),ee];function oe(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!oe(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of re)if(!oe(t,e))return null}return`Expected ${ie(t)} but found ${ie(e)} instead.`}function ae(t,e){return e.some((e=>e.kind===t.kind))}function se(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}function le(t){var e={exports:{}};return t(e,e.exports),e.exports}var ce=le((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function i(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return i("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),h=s.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=o(h.pop());case"rgb":return 3!==h.length?null:[r(h[0]),r(h[1]),r(h[2]),d];case"hsla":if(4!==h.length)return null;d=o(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=o(h[1]),m=o(h[2]),g=m<=.5?m*(f+1):m+f-m*f,_=2*m-g;return[i(255*a(_,g,p+1/3)),i(255*a(_,g,p)),i(255*a(_,g,p-1/3)),d];default:return null}}return null}}catch(t){}}));class ue{constructor(t,e,n,i=1){this.r=t,this.g=e,this.b=n,this.a=i}static parse(t){if(!t)return;if(t instanceof ue)return t;if("string"!=typeof t)return;const e=ce.parseCSSColor(t);return e?new ue(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,i]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${i})`}toArray(){const{r:t,g:e,b:n,a:i}=this;return 0===i?[0,0,0,0]:[255*t/i,255*e/i,255*n/i,i]}}ue.black=new ue(0,0,0,1),ue.white=new ue(1,1,1,1),ue.transparent=new ue(0,0,0,0),ue.red=new ue(1,0,0,1),ue.blue=new ue(0,0,1,1);class he{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class de{constructor(t,e,n,i,r){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r}}class pe{constructor(t){this.sections=t}static fromString(t){return new pe([new de(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof pe?t:pe.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class fe{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new fe({name:t,available:!1}):null}serialize(){return["image",this.name]}}function me(t,e,n,i){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[t,e,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ge(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof ue)return!0;if(t instanceof he)return!0;if(t instanceof pe)return!0;if(t instanceof fe)return!0;if(Array.isArray(t)){for(const e of t)if(!ge(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!ge(t[e]))return!1;return!0}return!1}function _e(t){if(null===t)return Ht;if("string"==typeof t)return Zt;if("boolean"==typeof t)return Wt;if("number"==typeof t)return $t;if(t instanceof ue)return Xt;if(t instanceof he)return Qt;if(t instanceof pe)return te;if(t instanceof fe)return ee;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=_e(e);if(n){if(n===t)continue;n=Jt;break}n=t}return ne(n||Jt,e)}return Kt}function ye(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof ue||t instanceof pe||t instanceof fe?t.toString():JSON.stringify(t)}class ve{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!ge(t[1]))return e.error("invalid value");const n=t[1];let i=_e(n);const r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new ve(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ue?["rgba"].concat(this.value.toArray()):this.value instanceof pe?this.value.serialize():this.value}}class be{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const xe={string:Zt,number:$t,boolean:Wt,object:Kt};class we{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,i=1;const r=t[0];if("array"===r){let r,o;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in xe)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=xe[n],i++}else r=Jt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],i++}n=ne(r,o)}else n=xe[r];const o=[];for(;i<t.length;i++){const n=e.parse(t[i],i,Jt);if(!n)return null;o.push(n)}return new we(n,o)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!oe(this.type,_e(n)))return n;if(e===this.args.length-1)throw new be(`Expected value to be of type ${ie(this.type)}, but found ${ie(_e(n))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const i=t.N;("number"==typeof i||this.args.length>1)&&e.push(i)}}return e.concat(this.args.map((t=>t.serialize())))}}class Ee{constructor(t){this.type=te,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const i=[];let r=!1;for(let n=1;n<=t.length-1;++n){const o=t[n];if(r&&"object"==typeof o&&!Array.isArray(o)){r=!1;let t=null;if(o["font-scale"]&&(t=e.parse(o["font-scale"],1,$t),!t))return null;let n=null;if(o["text-font"]&&(n=e.parse(o["text-font"],1,ne(Zt)),!n))return null;let a=null;if(o["text-color"]&&(a=e.parse(o["text-color"],1,Xt),!a))return null;const s=i[i.length-1];s.scale=t,s.font=n,s.textColor=a}else{const o=e.parse(t[n],1,Jt);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:o,scale:null,font:null,textColor:null})}}return new Ee(i)}evaluate(t){return new pe(this.sections.map((e=>{const n=e.content.evaluate(t);return _e(n)===ee?new de("",n,null,null,null):new de(ye(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class Me{constructor(t){this.type=ee,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,Zt);return n?new Me(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=fe.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Te={"to-boolean":Wt,"to-color":Xt,"to-number":$t,"to-string":Zt};class Se{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const i=Te[n],r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],n,Jt);if(!i)return null;r.push(i)}return new Se(i,r)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const i of this.args){if(e=i.evaluate(t),n=null,e instanceof ue)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:me(e[0],e[1],e[2],e[3]),!n))return new ue(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new be(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const i=Number(e);if(!isNaN(i))return i}throw new be(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?pe.fromString(ye(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?fe.fromString(ye(this.args[0].evaluate(t))):ye(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new Ee([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Me(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild((e=>{t.push(e.serialize())})),t}}const ke=["Unknown","Point","LineString","Polygon"];class Ce{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ke[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=ue.parse(t)),e}}class Ie{constructor(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((t=>t.serialize())))}static parse(t,e){const n=t[0],i=Ie.definitions[n];if(!i)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[i,o]of a){s=new Je(e.registry,e.path,null,e.scope);const a=[];let l=!1;for(let e=1;e<t.length;e++){const n=t[e],r=Array.isArray(i)?i[e-1]:i.type,o=s.parse(n,1+a.length,r);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(i)&&i.length!==a.length)s.error(`Expected ${i.length} arguments, but found ${a.length} instead.`);else{for(let t=0;t<a.length;t++){const e=Array.isArray(i)?i[t]:i.type,n=a[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new Ie(n,r,o,a)}}if(1===a.length)e.errors.push(...s.errors);else{const n=(a.length?a:o).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(ie).join(", ")})`:`(${ie(e.type)}...)`;var e})).join(" | "),i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],1+i.length);if(!r)return null;i.push(ie(r.type))}e.error(`Expected arguments of type ${n}, but found (${i.join(", ")}) instead.`)}return null}static register(t,e){Ie.definitions=e;for(const n in e)t[n]=Ie}}class Le{constructor(t,e,n){this.type=Qt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Wt);if(!i)return null;const r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Wt);if(!r)return null;let o=null;return n.locale&&(o=e.parse(n.locale,1,Zt),!o)?null:new Le(i,r,o)}evaluate(t){return new he(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const De=8192;function Ae(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Pe(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ze(t,e){const n=(180+t[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,r=Math.pow(2,e.z);return[Math.round(n*r*De),Math.round(i*r*De)]}function Ne(t,e,n){const i=t[0]-e[0],r=t[1]-e[1],o=t[0]-n[0],a=t[1]-n[1];return i*a-o*r==0&&i*o<=0&&r*a<=0}function Re(t,e){let n=!1;for(let a=0,s=e.length;a<s;a++){const s=e[a];for(let e=0,a=s.length;e<a-1;e++){if(Ne(t,s[e],s[e+1]))return!1;(r=s[e])[1]>(i=t)[1]!=(o=s[e+1])[1]>i[1]&&i[0]<(o[0]-r[0])*(i[1]-r[1])/(o[1]-r[1])+r[0]&&(n=!n)}}var i,r,o;return n}function Oe(t,e){for(let n=0;n<e.length;n++)if(Re(t,e[n]))return!0;return!1}function Fe(t,e,n,i){const r=i[0]-n[0],o=i[1]-n[1],a=(t[0]-n[0])*o-r*(t[1]-n[1]),s=(e[0]-n[0])*o-r*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function Be(t,e,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(l=[(r=e)[0]-(i=t)[0],r[1]-i[1]])[1]-s[1]*l[0]&&Fe(i,r,o,a)&&Fe(o,a,i,r))return!0;var i,r,o,a,s,l;return!1}function Ue(t,e){for(let n=0;n<t.length;++n)if(!Re(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(Be(t[n],t[n+1],e))return!1;return!0}function Ye(t,e){for(let n=0;n<e.length;n++)if(Ue(t,e[n]))return!0;return!1}function je(t,e,n){const i=[];for(let r=0;r<t.length;r++){const o=[];for(let i=0;i<t[r].length;i++){const a=ze(t[r][i],n);Ae(e,a),o.push(a)}i.push(o)}return i}function Ve(t,e,n){const i=[];for(let r=0;r<t.length;r++){const o=je(t[r],e,n);i.push(o)}return i}function Ge(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){const e=.5*i;let r=t[0]-n[0]>e?-i:n[0]-t[0]>e?i:0;0===r&&(r=t[0]-n[2]>e?-i:n[2]-t[0]>e?i:0),t[0]+=r}Ae(e,t)}function qe(t,e,n,i){const r=Math.pow(2,i.z)*De,o=[i.x*De,i.y*De],a=[];for(const i of t)for(const t of i){const i=[t.x+o[0],t.y+o[1]];Ge(i,e,n,r),a.push(i)}return a}function He(t,e,n,i){const r=Math.pow(2,i.z)*De,o=[i.x*De,i.y*De],a=[];for(const n of t){const t=[];for(const i of n){const n=[i.x+o[0],i.y+o[1]];Ae(e,n),t.push(n)}a.push(t)}if(e[2]-e[0]<=r/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of a)for(const i of t)Ge(i,e,n,r)}var s;return a}class $e{constructor(t,e){this.type=Wt,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(ge(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new $e(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new $e(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new $e(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=je(e.coordinates,i,r),a=qe(t.geometry(),n,i,r);if(!Pe(n,i))return!1;for(const t of a)if(!Re(t,o))return!1}if("MultiPolygon"===e.type){const o=Ve(e.coordinates,i,r),a=qe(t.geometry(),n,i,r);if(!Pe(n,i))return!1;for(const t of a)if(!Oe(t,o))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const o=je(e.coordinates,i,r),a=He(t.geometry(),n,i,r);if(!Pe(n,i))return!1;for(const t of a)if(!Ue(t,o))return!1}if("MultiPolygon"===e.type){const o=Ve(e.coordinates,i,r),a=He(t.geometry(),n,i,r);if(!Pe(n,i))return!1;for(const t of a)if(!Ye(t,o))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Ze(t){if(t instanceof Ie){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof $e)return!1;let e=!0;return t.eachChild((t=>{e&&!Ze(t)&&(e=!1)})),e}function We(t){if(t instanceof Ie&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!We(t)&&(e=!1)})),e}function Xe(t,e){if(t instanceof Ie&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!Xe(t,e)&&(n=!1)})),n}class Ke{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new Ke(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Je{constructor(t,e=[],n,i=new qt,r=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=i,this.errors=r,this.expectedType=n}parse(t,e,n,i,r={}){return e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)}_parse(t,e){function n(t,e,n){return"assert"===n?new we(e,[t]):"coerce"===n?new Se(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[i];if(r){let i=r.parse(t,this);if(!i)return null;if(this.expectedType){const t=this.expectedType,r=i.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(t,r))return null}else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"assert")}if(!(i instanceof ve)&&"resolvedImage"!==i.type.kind&&Qe(i)){const e=new Ce;try{i=new ve(i.type,i.evaluate(e))}catch(t){return this.error(t.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new Je(this.registry,i,e||null,r,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new Gt(n,t))}checkSubtype(t,e){const n=oe(t,e);return n&&this.error(n),n}}function Qe(t){if(t instanceof Ke)return Qe(t.boundExpression);if(t instanceof Ie&&"error"===t.name)return!1;if(t instanceof Le)return!1;if(t instanceof $e)return!1;const e=t instanceof Se||t instanceof we;let n=!0;return t.eachChild((t=>{n=e?n&&Qe(t):n&&t instanceof ve})),!!n&&Ze(t)&&Xe(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function tn(t,e){const n=t.length-1;let i,r,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),i=t[s],r=t[s+1],i<=e){if(s===n||e<r)return s;o=s+1}else{if(!(i>e))throw new be("Input is not a number.");a=s-1}return 0}class en{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,$t);if(!n)return null;const i=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let n=1;n<t.length;n+=2){const o=1===n?-1/0:t[n],a=t[n+1],s=n,l=n+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(i.length&&i[i.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(a,l,r);if(!c)return null;r=r||c.type,i.push([o,c])}return new en(r,n,i)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;return i>=e[r-1]?n[r-1].evaluate(t):n[tn(e,i)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}function nn(t,e,n){return t*(1-n)+e*n}var rn=Object.freeze({__proto__:null,number:nn,color:function(t,e,n){return new ue(nn(t.r,e.r,n),nn(t.g,e.g,n),nn(t.b,e.b,n),nn(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,i)=>nn(t,e[i],n)))}});const on=.95047,an=1.08883,sn=4/29,ln=6/29,cn=3*ln*ln,un=Math.PI/180,hn=180/Math.PI;function dn(t){return t>.008856451679035631?Math.pow(t,1/3):t/cn+sn}function pn(t){return t>ln?t*t*t:cn*(t-sn)}function fn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function mn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gn(t){const e=mn(t.r),n=mn(t.g),i=mn(t.b),r=dn((.4124564*e+.3575761*n+.1804375*i)/on),o=dn((.2126729*e+.7151522*n+.072175*i)/1);return{l:116*o-16,a:500*(r-o),b:200*(o-dn((.0193339*e+.119192*n+.9503041*i)/an)),alpha:t.a}}function _n(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,i=isNaN(t.b)?e:e-t.b/200;return e=1*pn(e),n=on*pn(n),i=an*pn(i),new ue(fn(3.2404542*n-1.5371385*e-.4985314*i),fn(-.969266*n+1.8760108*e+.041556*i),fn(.0556434*n-.2040259*e+1.0572252*i),t.alpha)}function yn(t,e,n){const i=e-t;return t+n*(i>180||i<-180?i-360*Math.round(i/360):i)}const vn={forward:gn,reverse:_n,interpolate:function(t,e,n){return{l:nn(t.l,e.l,n),a:nn(t.a,e.a,n),b:nn(t.b,e.b,n),alpha:nn(t.alpha,e.alpha,n)}}},bn={forward:function(t){const{l:e,a:n,b:i}=gn(t),r=Math.atan2(i,n)*hn;return{h:r<0?r+360:r,c:Math.sqrt(n*n+i*i),l:e,alpha:t.a}},reverse:function(t){const e=t.h*un,n=t.c;return _n({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:yn(t.h,e.h,n),c:nn(t.c,e.c,n),l:nn(t.l,e.l,n),alpha:nn(t.alpha,e.alpha,n)}}};var xn=Object.freeze({__proto__:null,lab:vn,hcl:bn});class wn{constructor(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,i,r){let o=0;if("exponential"===t.name)o=En(e,t.base,i,r);else if("linear"===t.name)o=En(e,1,i,r);else if("cubic-bezier"===t.name){const a=t.controlPoints;o=new n(a[0],a[1],a[2],a[3]).solve(En(e,1,i,r))}return o}static parse(t,e){let[n,i,r,...o]=t;if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const t=i[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:t}}else{if("cubic-bezier"!==i[0])return e.error(`Unknown interpolation type ${String(i[0])}`,1,0);{const t=i.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,$t),!r)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=Xt:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let t=0;t<o.length;t+=2){const n=o[t],i=o[t+1],r=t+3,l=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=e.parse(i,l,s);if(!c)return null;s=s||c.type,a.push([n,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new wn(s,n,i,r,a):e.error(`Type ${ie(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);const o=tn(e,i),a=wn.interpolationFactor(this.interpolation,i,e[o],e[o+1]),s=n[o].evaluate(t),l=n[o+1].evaluate(t);return"interpolate"===this.operator?rn[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?bn.reverse(bn.interpolate(bn.forward(s),bn.forward(l),a)):vn.reverse(vn.interpolate(vn.forward(s),vn.forward(l),a))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let t=0;t<this.labels.length;t++)e.push(this.labels[t],this.outputs[t].serialize());return e}}function En(t,e,n,i){const r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}class Mn{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const i=e.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const i of t.slice(1)){const t=e.parse(i,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,r.push(t)}const o=i&&r.some((t=>oe(i,t.type)));return new Mn(o?Jt:n,r)}evaluate(t){let e,n=null,i=0;for(const r of this.args)if(i++,n=r.evaluate(t),n&&n instanceof fe&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}serialize(){const t=["coalesce"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Tn{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=e.parse(t[i+1],i+1);if(!o)return null;n.push([r,o])}const i=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return i?new Tn(n,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}class Sn{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,$t),i=e.parse(t[2],2,ne(e.expectedType||Jt));return n&&i?new Sn(i.type.itemType,n,i):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new be(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new be(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new be(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class kn{constructor(t,e){this.type=Wt,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Jt),i=e.parse(t[2],2,Jt);return n&&i?ae(n.type,[Wt,Zt,$t,Ht,Jt])?new kn(n,i):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!se(e,["boolean","string","number","null"]))throw new be(`Expected first argument to be of type boolean, string, number or null, but found ${ie(_e(e))} instead.`);if(!se(n,["string","array"]))throw new be(`Expected second argument to be of type array or string, but found ${ie(_e(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Cn{constructor(t,e,n){this.type=$t,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Jt),i=e.parse(t[2],2,Jt);if(!n||!i)return null;if(!ae(n.type,[Wt,Zt,$t,Ht,Jt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,$t);return r?new Cn(n,i,r):null}return new Cn(n,i)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!se(e,["boolean","string","number","null"]))throw new be(`Expected first argument to be of type boolean, string, number or null, but found ${ie(_e(e))} instead.`);if(!se(n,["string","array"]))throw new be(`Expected second argument to be of type array or string, but found ${ie(_e(n))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(t);return n.indexOf(e,i)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class In{constructor(t,e,n,i,r,o){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=o}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r={},o=[];for(let a=2;a<t.length-1;a+=2){let s=t[a];const l=t[a+1];Array.isArray(s)||(s=[s]);const c=e.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(const t of s){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,_e(t)))return null}else n=_e(t);if(void 0!==r[String(t)])return c.error("Branch labels must be unique.");r[String(t)]=o.length}const u=e.parse(l,a,i);if(!u)return null;i=i||u.type,o.push(u)}const a=e.parse(t[1],1,Jt);if(!a)return null;const s=e.parse(t[t.length-1],t.length-1,i);return s?"value"!==a.type.kind&&e.concat(1).checkSubtype(n,a.type)?null:new In(n,i,a,r,o,s):null}evaluate(t){const e=this.input.evaluate(t);return(_e(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],i={};for(const t of e){const e=i[this.cases[t]];void 0===e?(i[this.cases[t]]=n.length,n.push([this.cases[t],[t]])):n[e][1].push(t)}const r=t=>"number"===this.inputType.kind?Number(t):t;for(const[e,i]of n)t.push(1===i.length?r(i[0]):i.map(r)),t.push(this.outputs[e].serialize());return t.push(this.otherwise.serialize()),t}}class Ln{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i=[];for(let r=1;r<t.length-1;r+=2){const o=e.parse(t[r],r,Wt);if(!o)return null;const a=e.parse(t[r+1],r+1,n);if(!a)return null;i.push([o,a]),n=n||a.type}const r=e.parse(t[t.length-1],t.length-1,n);return r?new Ln(n,i,r):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild((e=>{t.push(e.serialize())})),t}}class Dn{constructor(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Jt),i=e.parse(t[2],2,$t);if(!n||!i)return null;if(!ae(n.type,[ne(Jt),Zt,Jt]))return e.error(`Expected first argument to be of type array or string, but found ${ie(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,$t);return r?new Dn(n.type,n,i,r):null}return new Dn(n.type,n,i)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!se(e,["string","array"]))throw new be(`Expected first argument to be of type array or string, but found ${ie(_e(e))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(t);return e.slice(n,i)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function An(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Pn(t,e,n,i){return 0===i.compare(e,n)}function zn(t,e,n){const i="=="!==t&&"!="!==t;return class r{constructor(t,e,n){this.type=Wt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let o=e.parse(t[1],1,Jt);if(!o)return null;if(!An(n,o.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${ie(o.type)}'.`);let a=e.parse(t[2],2,Jt);if(!a)return null;if(!An(n,a.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${ie(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error(`Cannot compare types '${ie(o.type)}' and '${ie(a.type)}'.`);i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new we(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new we(o.type,[a])));let s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,Qt),!s)return null}return new r(o,a,s)}evaluate(r){const o=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const e=_e(o),n=_e(a);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new be(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const t=_e(o),n=_e(a);if("string"!==t.kind||"string"!==n.kind)return e(r,o,a)}return this.collator?n(r,o,a,this.collator.evaluate(r)):e(r,o,a)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}serialize(){const e=[t];return this.eachChild((t=>{e.push(t.serialize())})),e}}}const Nn=zn("==",(function(t,e,n){return e===n}),Pn),Rn=zn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!Pn(0,e,n,i)})),On=zn("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),Fn=zn(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),Bn=zn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),Un=zn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0}));class Yn{constructor(t,e,n,i,r){this.type=Zt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,$t);if(!n)return null;const i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=e.parse(i.locale,1,Zt),!r))return null;let o=null;if(i.currency&&(o=e.parse(i.currency,1,Zt),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=e.parse(i["min-fraction-digits"],1,$t),!a))return null;let s=null;return i["max-fraction-digits"]&&(s=e.parse(i["max-fraction-digits"],1,$t),!s)?null:new Yn(n,r,o,a,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class jn{constructor(t){this.type=$t,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${ie(n.type)} instead.`):new jn(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new be(`Expected value to be of type string or array, but found ${ie(_e(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild((e=>{t.push(e.serialize())})),t}}const Vn={"==":Nn,"!=":Rn,">":Fn,"<":On,">=":Un,"<=":Bn,array:we,at:Sn,boolean:we,case:Ln,coalesce:Mn,collator:Le,format:Ee,image:Me,in:kn,"index-of":Cn,interpolate:wn,"interpolate-hcl":wn,"interpolate-lab":wn,length:jn,let:Tn,literal:ve,match:In,number:we,"number-format":Yn,object:we,slice:Dn,step:en,string:we,"to-boolean":Se,"to-color":Se,"to-number":Se,"to-string":Se,var:Ke,within:$e};function Gn(t,[e,n,i,r]){e=e.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);const o=r?r.evaluate(t):1,a=me(e,n,i,o);if(a)throw new be(a);return new ue(e/255*o,n/255*o,i/255*o,o)}function qn(t,e){return t in e}function Hn(t,e){const n=e[t];return void 0===n?null:n}function $n(t){return{type:t}}function Zn(t){return{result:"success",value:t}}function Wn(t){return{result:"error",value:t}}function Xn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Kn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Jn(t){return!!t.expression&&t.expression.interpolated}function Qn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function ti(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function ei(t){return t}function ni(t,e){const n="color"===e.type,i=t.stops&&"object"==typeof t.stops[0][0],r=i||!(i||void 0!==t.property),o=t.type||(Jn(e)?"exponential":"interval");if(n&&((t=Yt({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],ue.parse(t[1])]))),t.default=ue.parse(t.default?t.default:e.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!xn[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let a,s,l;if("exponential"===o)a=ai;else if("interval"===o)a=oi;else if("categorical"===o){a=ri,s=Object.create(null);for(const e of t.stops)s[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=si}if(i){const n={},i=[];for(let e=0;e<t.stops.length;e++){const r=t.stops[e],o=r[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},i.push(o)),n[o].stops.push([r[0].value,r[1]])}const r=[];for(const t of i)r.push([n[t].zoom,ni(n[t],e)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:wn.interpolationFactor.bind(void 0,o),zoomStops:r.map((t=>t[0])),evaluate:({zoom:n},i)=>ai({stops:r,base:t.base},e,n).evaluate(n,i)}}if(r){const n="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:wn.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:n})=>a(t,e,n,s,l)}}return{kind:"source",evaluate(n,i){const r=i&&i.properties?i.properties[t.property]:void 0;return void 0===r?ii(t.default,e.default):a(t,e,r,s,l)}}}function ii(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function ri(t,e,n,i,r){return ii(typeof n===r?i[n]:void 0,t.default,e.default)}function oi(t,e,n){if("number"!==Qn(n))return ii(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const r=tn(t.stops.map((t=>t[0])),n);return t.stops[r][1]}function ai(t,e,n){const i=void 0!==t.base?t.base:1;if("number"!==Qn(n))return ii(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const o=tn(t.stops.map((t=>t[0])),n),a=function(t,e,n,i){const r=i-n,o=t-n;return 0===r?0:1===e?o/r:(Math.pow(e,o)-1)/(Math.pow(e,r)-1)}(n,i,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],l=t.stops[o+1][1];let c=rn[e.type]||ei;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=xn[t.colorSpace];c=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==n)return c(e,n,a)}}:c(s,l,a)}function si(t,e,n){return"color"===e.type?n=ue.parse(n):"formatted"===e.type?n=pe.fromString(n.toString()):"resolvedImage"===e.type?n=fe.fromString(n.toString()):Qn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),ii(n,t.default,e.default)}Ie.register(Vn,{error:[{kind:"error"},[Zt],(t,[e])=>{throw new be(e.evaluate(t))}],typeof:[Zt,[Jt],(t,[e])=>ie(_e(e.evaluate(t)))],"to-rgba":[ne($t,4),[Xt],(t,[e])=>e.evaluate(t).toArray()],rgb:[Xt,[$t,$t,$t],Gn],rgba:[Xt,[$t,$t,$t,$t],Gn],has:{type:Wt,overloads:[[[Zt],(t,[e])=>qn(e.evaluate(t),t.properties())],[[Zt,Kt],(t,[e,n])=>qn(e.evaluate(t),n.evaluate(t))]]},get:{type:Jt,overloads:[[[Zt],(t,[e])=>Hn(e.evaluate(t),t.properties())],[[Zt,Kt],(t,[e,n])=>Hn(e.evaluate(t),n.evaluate(t))]]},"feature-state":[Jt,[Zt],(t,[e])=>Hn(e.evaluate(t),t.featureState||{})],properties:[Kt,[],t=>t.properties()],"geometry-type":[Zt,[],t=>t.geometryType()],id:[Jt,[],t=>t.id()],zoom:[$t,[],t=>t.globals.zoom],"heatmap-density":[$t,[],t=>t.globals.heatmapDensity||0],"line-progress":[$t,[],t=>t.globals.lineProgress||0],"sky-radial-progress":[$t,[],t=>t.globals.skyRadialProgress||0],accumulated:[Jt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[$t,$n($t),(t,e)=>{let n=0;for(const i of e)n+=i.evaluate(t);return n}],"*":[$t,$n($t),(t,e)=>{let n=1;for(const i of e)n*=i.evaluate(t);return n}],"-":{type:$t,overloads:[[[$t,$t],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[$t],(t,[e])=>-e.evaluate(t)]]},"/":[$t,[$t,$t],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[$t,[$t,$t],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[$t,[],()=>Math.LN2],pi:[$t,[],()=>Math.PI],e:[$t,[],()=>Math.E],"^":[$t,[$t,$t],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[$t,[$t],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[$t,[$t],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[$t,[$t],(t,[e])=>Math.log(e.evaluate(t))],log2:[$t,[$t],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[$t,[$t],(t,[e])=>Math.sin(e.evaluate(t))],cos:[$t,[$t],(t,[e])=>Math.cos(e.evaluate(t))],tan:[$t,[$t],(t,[e])=>Math.tan(e.evaluate(t))],asin:[$t,[$t],(t,[e])=>Math.asin(e.evaluate(t))],acos:[$t,[$t],(t,[e])=>Math.acos(e.evaluate(t))],atan:[$t,[$t],(t,[e])=>Math.atan(e.evaluate(t))],min:[$t,$n($t),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[$t,$n($t),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[$t,[$t],(t,[e])=>Math.abs(e.evaluate(t))],round:[$t,[$t],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[$t,[$t],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[$t,[$t],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[Wt,[Zt,Jt],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[Wt,[Jt],(t,[e])=>t.id()===e.value],"filter-type-==":[Wt,[Zt],(t,[e])=>t.geometryType()===e.value],"filter-<":[Wt,[Zt,Jt],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<r}],"filter-id-<":[Wt,[Jt],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<i}],"filter->":[Wt,[Zt,Jt],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>r}],"filter-id->":[Wt,[Jt],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>i}],"filter-<=":[Wt,[Zt,Jt],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[Wt,[Jt],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<=i}],"filter->=":[Wt,[Zt,Jt],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[Wt,[Jt],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>=i}],"filter-has":[Wt,[Jt],(t,[e])=>e.value in t.properties()],"filter-has-id":[Wt,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[Wt,[ne(Zt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[Wt,[ne(Jt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[Wt,[Zt,ne(Jt)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[Wt,[Zt,ne(Jt)],(t,[e,n])=>function(t,e,n,i){for(;n<=i;){const r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Wt,overloads:[[[Wt,Wt],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[$n(Wt),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:Wt,overloads:[[[Wt,Wt],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[$n(Wt),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[Wt,[Wt],(t,[e])=>!e.evaluate(t)],"is-supported-script":[Wt,[Zt],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[Zt,[Zt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[Zt,[Zt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[Zt,$n(Jt),(t,e)=>e.map((e=>ye(e.evaluate(t)))).join("")],"resolved-locale":[Zt,[Qt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class li{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Ce,this._defaultValue=e?function(t){return"color"===t.type&&ti(t.default)?new ue(0,0,0,0):"color"===t.type?ue.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,i,r,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=o||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new be(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function ci(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Vn}function ui(t,e){const n=new Je(Vn,[],e?function(t){const e={color:Xt,string:Zt,number:$t,enum:Zt,boolean:Wt,formatted:te,resolvedImage:ee};return"array"===t.type?ne(e[t.value]||Jt,t.length):e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?Zn(new li(i,e)):Wn(n.errors)}class hi{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!We(e.expression)}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)}evaluate(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)}}class di{constructor(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!We(e.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,e,n,i,r,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,o)}evaluate(t,e,n,i,r,o){return this._styleExpression.evaluate(t,e,n,i,r,o)}interpolationFactor(t,e,n){return this.interpolationType?wn.interpolationFactor(this.interpolationType,t,e,n):0}}function pi(t,e){if("error"===(t=ui(t,e)).result)return t;const n=t.value.expression,i=Ze(n);if(!i&&!Xn(e))return Wn([new Gt("","data expressions not supported")]);const r=Xe(n,["zoom"]);if(!r&&!Kn(e))return Wn([new Gt("","zoom expressions not supported")]);const o=mi(n);return o||r?o instanceof Gt?Wn([o]):o instanceof wn&&!Jn(e)?Wn([new Gt("",'"interpolate" expressions cannot be used with this property')]):Zn(o?new di(i?"camera":"composite",t.value,o.labels,o instanceof wn?o.interpolation:void 0):new hi(i?"constant":"source",t.value)):Wn([new Gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fi{constructor(t,e){this._parameters=t,this._specification=e,Yt(this,ni(this._parameters,this._specification))}static deserialize(t){return new fi(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function mi(t){let e=null;if(t instanceof Tn)e=mi(t.result);else if(t instanceof Mn){for(const n of t.args)if(e=mi(n),e)break}else(t instanceof en||t instanceof wn)&&t.input instanceof Ie&&"zoom"===t.input.name&&(e=t);return e instanceof Gt||t.eachChild((t=>{const n=mi(t);n instanceof Gt?e=n:!e&&n?e=new Gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new Gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function gi(t){const e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},o=t.style,a=t.styleSpec;let s=[];const l=Qn(n);if("object"!==l)return[new Bt(e,n,`object expected, ${l} found`)];for(const t in n){const l=t.split(".")[0],c=i[l]||i["*"];let u;if(r[l])u=r[l];else if(i[l])u=qi;else if(r["*"])u=r["*"];else{if(!i["*"]){s.push(new Bt(e,n[t],`unknown property "${t}"`));continue}u=qi}s=s.concat(u({key:(e?`${e}.`:e)+t,value:n[t],valueSpec:c,style:o,styleSpec:a,object:n,objectKey:t},n))}for(const t in i)r[t]||i[t].required&&void 0===i[t].default&&void 0===n[t]&&s.push(new Bt(e,n,`missing required property "${t}"`));return s}function _i(t){const e=t.value,n=t.valueSpec,i=t.style,r=t.styleSpec,o=t.key,a=t.arrayElementValidator||qi;if("array"!==Qn(e))return[new Bt(o,e,`array expected, ${Qn(e)} found`)];if(n.length&&e.length!==n.length)return[new Bt(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new Bt(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum};r.$version<7&&(s.function=n.function),"object"===Qn(n.value)&&(s=n.value);let l=[];for(let t=0;t<e.length;t++)l=l.concat(a({array:e,arrayIndex:t,value:e[t],valueSpec:s,style:i,styleSpec:r,key:`${o}[${t}]`}));return l}function yi(t){const e=t.key,n=t.value,i=t.valueSpec;let r=Qn(n);if("number"===r&&n!=n&&(r="NaN"),"number"!==r)return[new Bt(e,n,`number expected, ${r} found`)];if("minimum"in i){let r=i.minimum;if("array"===Qn(i.minimum)&&(r=i.minimum[t.arrayIndex]),n<r)return[new Bt(e,n,`${n} is less than the minimum value ${r}`)]}if("maximum"in i){let r=i.maximum;if("array"===Qn(i.maximum)&&(r=i.maximum[t.arrayIndex]),n>r)return[new Bt(e,n,`${n} is greater than the maximum value ${r}`)]}return[]}function vi(t){const e=t.valueSpec,n=jt(t.value.type);let i,r,o,a={};const s="categorical"!==n&&void 0===t.value.property,l=!s,c="array"===Qn(t.value.stops)&&"array"===Qn(t.value.stops[0])&&"object"===Qn(t.value.stops[0][0]),u=gi({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new Bt(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const i=t.value;return e=e.concat(_i({key:t.key,value:i,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Qn(i)&&0===i.length&&e.push(new Bt(t.key,i,"array must have at least one stop")),e},default:function(t){return qi({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&u.push(new Bt(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||u.push(new Bt(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!Jn(t.valueSpec)&&u.push(new Bt(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Xn(t.valueSpec)?u.push(new Bt(t.key,t.value,"property functions not supported")):s&&!Kn(t.valueSpec)&&u.push(new Bt(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==t.value.property||u.push(new Bt(t.key,t.value,'"property" property is required')),u;function h(t){let n=[];const i=t.value,s=t.key;if("array"!==Qn(i))return[new Bt(s,i,`array expected, ${Qn(i)} found`)];if(2!==i.length)return[new Bt(s,i,`array length 2 expected, length ${i.length} found`)];if(c){if("object"!==Qn(i[0]))return[new Bt(s,i,`object expected, ${Qn(i[0])} found`)];if(void 0===i[0].zoom)return[new Bt(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Bt(s,i,"object stop key must have value")];if(o&&o>jt(i[0].zoom))return[new Bt(s,i[0].zoom,"stop zoom values must appear in ascending order")];jt(i[0].zoom)!==o&&(o=jt(i[0].zoom),r=void 0,a={}),n=n.concat(gi({key:`${s}[0]`,value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:yi,value:d}}))}else n=n.concat(d({key:`${s}[0]`,value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return ci(Vt(i[1]))?n.concat([new Bt(`${s}[1]`,i[1],"expressions are not allowed in function stops.")]):n.concat(qi({key:`${s}[1]`,value:i[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,o){const s=Qn(t.value),l=jt(t.value),c=null!==t.value?t.value:o;if(i){if(s!==i)return[new Bt(t.key,c,`${s} stop domain type must match previous stop domain type ${i}`)]}else i=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Bt(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let i=`number expected, ${s} found`;return Xn(e)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Bt(t.key,c,i)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==r&&l<r?[new Bt(t.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in a?[new Bt(t.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new Bt(t.key,c,`integer expected, found ${l}`)]}}function bi(t){const e=("property"===t.expressionContext?pi:ui)(Vt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new Bt(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new Bt(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!We(n))return[new Bt(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!We(n))return[new Bt(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Xe(n,["zoom","feature-state"]))return[new Bt(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ze(n))return[new Bt(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xi(t){const e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(jt(n))&&r.push(new Bt(e,n,`expected one of [${i.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(i.values).indexOf(jt(n))&&r.push(new Bt(e,n,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(n)} found`)),r}function wi(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!wi(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Ei={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Mi(t){if(null==t)return{filter:()=>!0,needGeometry:!1};wi(t)||(t=ki(t));const e=ui(t,Ei);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,n,i)=>e.value.evaluate(t,n,{},i),needGeometry:Si(t)}}function Ti(t,e){return t<e?-1:t>e?1:0}function Si(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Si(t[e]))return!0;return!1}function ki(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Ci(t[1],t[2],"=="):"!="===e?Di(Ci(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Ci(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(ki))):"all"===e?["all"].concat(t.slice(1).map(ki)):"none"===e?["all"].concat(t.slice(1).map(ki).map(Di)):"in"===e?Ii(t[1],t.slice(2)):"!in"===e?Di(Ii(t[1],t.slice(2))):"has"===e?Li(t[1]):"!has"===e?Di(Li(t[1])):"within"!==e||t;var n}function Ci(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Ii(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Ti)]]:["filter-in-small",t,["literal",e]]}}function Li(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Di(t){return["!",t]}function Ai(t){return wi(Vt(t.value))?bi(Yt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Pi(t)}function Pi(t){const e=t.value,n=t.key;if("array"!==Qn(e))return[new Bt(n,e,`array expected, ${Qn(e)} found`)];const i=t.styleSpec;let r,o=[];if(e.length<1)return[new Bt(n,e,"filter array must have at least 1 element")];switch(o=o.concat(xi({key:`${n}[0]`,value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),jt(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===jt(e[1])&&o.push(new Bt(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&o.push(new Bt(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=Qn(e[1]),"string"!==r&&o.push(new Bt(`${n}[1]`,e[1],`string expected, ${r} found`)));for(let a=2;a<e.length;a++)r=Qn(e[a]),"$type"===jt(e[1])?o=o.concat(xi({key:`${n}[${a}]`,value:e[a],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&o.push(new Bt(`${n}[${a}]`,e[a],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let i=1;i<e.length;i++)o=o.concat(Pi({key:`${n}[${i}]`,value:e[i],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=Qn(e[1]),2!==e.length?o.push(new Bt(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==r&&o.push(new Bt(`${n}[1]`,e[1],`string expected, ${r} found`));break;case"within":r=Qn(e[1]),2!==e.length?o.push(new Bt(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==r&&o.push(new Bt(`${n}[1]`,e[1],`object expected, ${r} found`))}return o}function zi(t,e){const n=t.key,i=t.style,r=t.styleSpec,o=t.value,a=t.objectKey,s=r[`${e}_${t.layerType}`];if(!s)return[];const l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return qi({key:n,value:o,valueSpec:r.transition,style:i,styleSpec:r});const c=t.valueSpec||s[a];if(!c)return[new Bt(n,o,`unknown property "${a}"`)];let u;if("string"===Qn(o)&&Xn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new Bt(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===a&&i&&!i.glyphs&&h.push(new Bt(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&ti(Vt(o))&&"identity"===jt(o.type)&&h.push(new Bt(n,o,'"text-font" does not support identity functions'))),h.concat(qi({key:t.key,value:o,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function Ni(t){return zi(t,"paint")}function Ri(t){return zi(t,"layout")}function Oi(t){let e=[];const n=t.value,i=t.key,r=t.style,o=t.styleSpec;n.type||n.ref||e.push(new Bt(i,n,'either "type" or "ref" is required'));let a=jt(n.type);const s=jt(n.ref);if(n.id){const o=jt(n.id);for(let a=0;a<t.arrayIndex;a++){const t=r.layers[a];jt(t.id)===o&&e.push(new Bt(i,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new Bt(i,n[t],`"${t}" is prohibited for ref layers`))})),r.layers.forEach((e=>{jt(e.id)===s&&(t=e)})),t?t.ref?e.push(new Bt(i,n.ref,"ref cannot reference another ref layer")):a=jt(t.type):e.push(new Bt(i,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const t=r.sources&&r.sources[n.source],o=t&&jt(t.type);t?"vector"===o&&"raster"===a?e.push(new Bt(i,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?e.push(new Bt(i,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?e.push(new Bt(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]||"geojson"===o&&t.lineMetrics||e.push(new Bt(i,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Bt(i,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new Bt(i,n.source,`source "${n.source}" not found`))}else e.push(new Bt(i,n,'missing required property "source"'));return e=e.concat(gi({key:i,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>qi({key:`${i}.type`,value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:Ai,layout:t=>gi({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ri(Yt({layerType:a},t))}}),paint:t=>gi({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>Ni(Yt({layerType:a},t))}})}})),e}function Fi(t){const e=t.value,n=t.key,i=Qn(e);return"string"!==i?[new Bt(n,e,`string expected, ${i} found`)]:[]}const Bi={promoteId:function({key:t,value:e}){if("string"===Qn(e))return Fi({key:t,value:e});{const n=[];for(const i in e)n.push(...Fi({key:`${t}.${i}`,value:e[i]}));return n}}};function Ui(t){const e=t.value,n=t.key,i=t.styleSpec,r=t.style;if(!e.type)return[new Bt(n,e,'"type" is required')];const o=jt(e.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=gi({key:n,value:e,valueSpec:i[`source_${o.replace("-","_")}`],style:t.style,styleSpec:i,objectElementValidators:Bi}),a;case"geojson":if(a=gi({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:Bi}),e.cluster)for(const t in e.clusterProperties){const[i,r]=e.clusterProperties[t],o="string"==typeof i?[i,["accumulated"],["get",t]]:i;a.push(...bi({key:`${n}.${t}.map`,value:r,expressionContext:"cluster-map"})),a.push(...bi({key:`${n}.${t}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return gi({key:n,value:e,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return gi({key:n,value:e,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new Bt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xi({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:i})}}function Yi(t){const e=t.value,n=t.styleSpec,i=n.light,r=t.style;let o=[];const a=Qn(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new Bt("light",e,`object expected, ${a} found`)]),o;for(const t in e){const a=t.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?qi({key:t,value:e[t],valueSpec:n.transition,style:r,styleSpec:n}):i[t]?qi({key:t,value:e[t],valueSpec:i[t],style:r,styleSpec:n}):[new Bt(t,e[t],`unknown property "${t}"`)])}return o}function ji(t){const e=t.value,n=t.key,i=t.style,r=t.styleSpec,o=r.terrain;let a=[];const s=Qn(e);if(void 0===e)return a;if("object"!==s)return a=a.concat([new Bt("terrain",e,`object expected, ${s} found`)]),a;for(const t in e){const n=t.match(/^(.*)-transition$/);a=a.concat(n&&o[n[1]]&&o[n[1]].transition?qi({key:t,value:e[t],valueSpec:r.transition,style:i,styleSpec:r}):o[t]?qi({key:t,value:e[t],valueSpec:o[t],style:i,styleSpec:r}):[new Bt(t,e[t],`unknown property "${t}"`)])}if(e.source){const t=i.sources&&i.sources[e.source],r=t&&jt(t.type);t?"raster-dem"!==r&&a.push(new Bt(n,e.source,`terrain cannot be used with a source of type ${r}, it only be used with a "raster-dem" source type`)):a.push(new Bt(n,e.source,`source "${e.source}" not found`))}else a.push(new Bt(n,e,'terrain is missing required property "source"'));return a}function Vi(t){const e=t.value,n=t.style,i=t.styleSpec,r=i.fog;let o=[];const a=Qn(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new Bt("fog",e,`object expected, ${a} found`)]),o;for(const t in e){const a=t.match(/^(.*)-transition$/);o=o.concat(a&&r[a[1]]&&r[a[1]].transition?qi({key:t,value:e[t],valueSpec:i.transition,style:n,styleSpec:i}):r[t]?qi({key:t,value:e[t],valueSpec:r[t],style:n,styleSpec:i}):[new Bt(t,e[t],`unknown property "${t}"`)])}return o}const Gi={"*":()=>[],array:_i,boolean:function(t){const e=t.value,n=t.key,i=Qn(e);return"boolean"!==i?[new Bt(n,e,`boolean expected, ${i} found`)]:[]},number:yi,color:function(t){const e=t.key,n=t.value,i=Qn(n);return"string"!==i?[new Bt(e,n,`color expected, ${i} found`)]:null===ce.parseCSSColor(n)?[new Bt(e,n,`color expected, "${n}" found`)]:[]},constants:Ut,enum:xi,filter:Ai,function:vi,layer:Oi,object:gi,source:Ui,light:Yi,terrain:ji,fog:Vi,string:Fi,formatted:function(t){return 0===Fi(t).length?[]:bi(t)},resolvedImage:function(t){return 0===Fi(t).length?[]:bi(t)}};function qi(t){const e=t.value,n=t.valueSpec,i=t.styleSpec;return n.expression&&ti(jt(e))?vi(t):n.expression&&ci(Vt(e))?bi(t):n.type&&Gi[n.type]?Gi[n.type](t):gi(Yt({},t,{valueSpec:n.type?i[n.type]:n}))}function Hi(t){const e=t.value,n=t.key,i=Fi(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new Bt(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new Bt(n,e,'"glyphs" url must include a "{range}" token'))),i}function $i(t,e=Ft){let n=[];return n=n.concat(qi({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Hi,"*":()=>[]}})),t.constants&&(n=n.concat(Ut({key:"constants",value:t.constants,style:t,styleSpec:e}))),Zi(n)}function Zi(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function Wi(t){return function(...e){return Zi(t.apply(this,e))}}$i.source=Wi(Ui),$i.light=Wi(Yi),$i.terrain=Wi(ji),$i.fog=Wi(Vi),$i.layer=Wi(Oi),$i.filter=Wi(Ai),$i.paintProperty=Wi(Ni),$i.layoutProperty=Wi(Ri);const Xi=$i,Ki=Xi.light,Ji=Xi.fog,Qi=Xi.paintProperty,tr=Xi.layoutProperty;function er(t,e){let n=!1;if(e&&e.length)for(const i of e)t.fire(new Rt(new Error(i.message))),n=!0;return n}var nr=ir;function ir(t,e,n){var i=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],this.d=(e=r[1])+2*(n=r[2]);for(var o=0;o<this.d*this.d;o++){var a=r[3+o],s=r[3+o+1];i.push(a===s?null:r.subarray(a,s))}var l=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var u=n/e*t;this.min=-u,this.max=t+u}ir.prototype.insert=function(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},ir.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ir.prototype._insertCell=function(t,e,n,i,r,o){this.cells[r].push(o)},ir.prototype.query=function(t,e,n,i,r){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,i,this._queryCell,s,{},r),s},ir.prototype._queryCell=function(t,e,n,i,r,o,a,s){var l=this.cells[r];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):t<=u[p+2]&&e<=u[p+3]&&n>=u[p+0]&&i>=u[p+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},ir.prototype._forEachCell=function(t,e,n,i,r,o,a,s){for(var l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(n),h=this._convertToCellCoord(i),d=l;d<=u;d++)for(var p=c;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&r.call(this,t,e,n,i,f,o,a,s))return}},ir.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},ir.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},ir.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];r[3+a]=o,r.set(s,o),o+=s.length}return r[3+t.length]=o,r.set(this.keys,o),r[3+t.length+1]=o+=this.keys.length,r.set(this.bboxes,o),o+=this.bboxes.length,r.buffer};const{ImageData:rr,ImageBitmap:or}=a,ar={};function sr(t,e,n={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),ar[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}sr("Object",Object),nr.serialize=function(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},nr.deserialize=function(t){return new nr(t.buffer)},sr("Grid",nr),sr("Color",ue),sr("Error",Error),sr("ResolvedImage",fe),sr("StylePropertyFunction",fi),sr("StyleExpression",li,{omit:["_evaluator"]}),sr("ZoomDependentExpression",di),sr("ZoomConstantExpression",hi),sr("CompoundExpression",Ie,{omit:["_evaluate"]});for(const t in Vn)Vn[t]._classRegistryKey||sr(`Expression_${t}`,Vn[t]);function lr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function cr(t){return or&&t instanceof or}function ur(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(lr(t)||cr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof rr)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const i of t)n.push(ur(i,e));return n}if("object"==typeof t){const n=t.constructor,i=n._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class");const r=n.serialize?n.serialize(t,e):{};if(!n.serialize){for(const n in t){if(!t.hasOwnProperty(n))continue;if(ar[i].omit.indexOf(n)>=0)continue;const o=t[n];r[n]=ar[i].shallow.indexOf(n)>=0?o:ur(o,e)}t instanceof Error&&(r.message=t.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(r.$name=i),r}throw new Error("can't serialize object of type "+typeof t)}function hr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||lr(t)||cr(t)||ArrayBuffer.isView(t)||t instanceof rr)return t;if(Array.isArray(t))return t.map(hr);if("object"==typeof t){const e=t.$name||"Object",{klass:n}=ar[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const i=Object.create(n.prototype);for(const n of Object.keys(t)){if("$name"===n)continue;const r=t[n];i[n]=ar[e].shallow.indexOf(n)>=0?r:hr(r)}return i}throw new Error("can't deserialize object of type "+typeof t)}class dr{constructor(){this.first=!0}update(t,e){const n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}const pr=t=>t>=1536&&t<=1791,fr=t=>t>=1872&&t<=1919,mr=t=>t>=2208&&t<=2303,gr=t=>t>=11904&&t<=12031,_r=t=>t>=12032&&t<=12255,yr=t=>t>=12272&&t<=12287,vr=t=>t>=12288&&t<=12351,br=t=>t>=12352&&t<=12447,xr=t=>t>=12448&&t<=12543,wr=t=>t>=12544&&t<=12591,Er=t=>t>=12704&&t<=12735,Mr=t=>t>=12736&&t<=12783,Tr=t=>t>=12784&&t<=12799,Sr=t=>t>=12800&&t<=13055,kr=t=>t>=13056&&t<=13311,Cr=t=>t>=13312&&t<=19903,Ir=t=>t>=19968&&t<=40959,Lr=t=>t>=40960&&t<=42127,Dr=t=>t>=42128&&t<=42191,Ar=t=>t>=44032&&t<=55215,Pr=t=>t>=63744&&t<=64255,zr=t=>t>=64336&&t<=65023,Nr=t=>t>=65040&&t<=65055,Rr=t=>t>=65072&&t<=65103,Or=t=>t>=65104&&t<=65135,Fr=t=>t>=65136&&t<=65279,Br=t=>t>=65280&&t<=65519;function Ur(t){for(const e of t)if(Vr(e.charCodeAt(0)))return!0;return!1}function Yr(t){for(const e of t)if(!jr(e.charCodeAt(0)))return!1;return!0}function jr(t){return!(pr(t)||fr(t)||mr(t)||zr(t)||Fr(t))}function Vr(t){return!(746!==t&&747!==t&&(t<4352||!(Er(t)||wr(t)||Rr(t)&&!(t>=65097&&t<=65103)||Pr(t)||kr(t)||gr(t)||Mr(t)||!(!vr(t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Cr(t)||Ir(t)||Sr(t)||(t=>t>=12592&&t<=12687)(t)||(t=>t>=43360&&t<=43391)(t)||(t=>t>=55216&&t<=55295)(t)||(t=>t>=4352&&t<=4607)(t)||Ar(t)||br(t)||yr(t)||(t=>t>=12688&&t<=12703)(t)||_r(t)||Tr(t)||xr(t)&&12540!==t||!(!Br(t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Or(t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(t=>t>=5120&&t<=5759)(t)||(t=>t>=6320&&t<=6399)(t)||Nr(t)||(t=>t>=19904&&t<=19967)(t)||Lr(t)||Dr(t))))}function Gr(t){return!(Vr(t)||function(t){return!!((t=>t>=128&&t<=255)(t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||(t=>t>=8192&&t<=8303)(t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||(t=>t>=8448&&t<=8527)(t)||(t=>t>=8528&&t<=8591)(t)||(t=>t>=8960&&t<=9215)(t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||(t=>t>=9216&&t<=9279)(t)&&9251!==t||(t=>t>=9280&&t<=9311)(t)||(t=>t>=9312&&t<=9471)(t)||(t=>t>=9632&&t<=9727)(t)||(t=>t>=9728&&t<=9983)(t)&&!(t>=9754&&t<=9759)||(t=>t>=11008&&t<=11263)(t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||vr(t)||xr(t)||(t=>t>=57344&&t<=63743)(t)||Rr(t)||Or(t)||Br(t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function qr(t){return t>=1424&&t<=2303||zr(t)||Fr(t)}function Hr(t,e){return!(!e&&qr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||(t=>t>=6016&&t<=6143)(t))}function $r(t){for(const e of t)if(qr(e.charCodeAt(0)))return!0;return!1}const Zr="deferred",Wr="loading",Xr="loaded";let Kr=null,Jr="unavailable",Qr=null;const to=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Jr="error"),Kr&&Kr(t)};function eo(){no.fire(new Nt("pluginStateChange",{pluginStatus:Jr,pluginURL:Qr}))}const no=new Ot,io=function(){return Jr},ro=function(){if(Jr!==Zr||!Qr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Jr=Wr,eo(),Qr&&Tt({url:Qr},(t=>{t?to(t):(Jr=Xr,eo())}))},oo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Jr===Xr||null!=oo.applyArabicShaping,isLoading:()=>Jr===Wr,setState(t){Jr=t.pluginStatus,Qr=t.pluginURL},isParsed:()=>null!=oo.applyArabicShaping&&null!=oo.processBidirectionalText&&null!=oo.processStyledBidirectionalText,getPluginURL:()=>Qr};class ao{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new dr,this.transition={})}isSupportedScript(t){return function(t,e){for(const n of t)if(!Hr(n.charCodeAt(0),e))return!1;return!0}(t,oo.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}class so{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(ti(t))return new fi(t,e);if(ci(t)){const n=pi(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"string"==typeof t&&"color"===e.type&&(n=ue.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class lo{constructor(t){this.property=t,this.value=new so(t,void 0)}transitioned(t,e){return new uo(this.property,this.value,e,v({},t.transition,this.transition),t.now)}untransitioned(){return new uo(this.property,this.value,null,{},0)}}class co{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return I(this._values[t].value.value)}setValue(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new lo(this._values[t].property)),this._values[t].value=new so(this._values[t].property,null===e?void 0:I(e))}getTransition(t){return I(this._values[t].transition)}setTransition(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new lo(this._values[t].property)),this._values[t].transition=I(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const i=this.getTransition(e);void 0!==i&&(t[`${e}-transition`]=i)}return t}transitioned(t,e){const n=new ho(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(t,e._values[i]);return n}untransitioned(){const t=new ho(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class uo{constructor(t,e,n,i,r){const o=i.delay||0,a=i.duration||0;r=r||0,this.property=t,this.value=e,this.begin=r+o,this.end=this.begin+a,t.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const i=t.now||0,r=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return o.possiblyEvaluate(t,e,n);{const a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),r,d(a))}}return r}}class ho{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const i=new mo(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class po{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return I(this._values[t].value)}setValue(t,e){this._values[t]=new so(this._values[t].property,null===e?void 0:I(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const i=new mo(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(t,e,n);return i}}class fo{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,i){return this.property.evaluate(this.value,this.parameters,t,e,n,i)}}class mo{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class go{constructor(t){this.specification=t}possiblyEvaluate(t,e){return t.expression.evaluate(e)}interpolate(t,e,n){const i=rn[this.specification.type];return i?i(t,e,n):t}}class _o{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,i){return new fo(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,i)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new fo(this,{kind:"constant",value:void 0},t.parameters);const i=rn[this.specification.type];return i?new fo(this,{kind:"constant",value:i(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,i,r,o){return"constant"===t.kind?t.value:t.evaluate(e,n,i,r,o)}}class yo extends _o{possiblyEvaluate(t,e,n,i){if(void 0===t.value)return new fo(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},n,i),o="resolvedImage"===t.property.specification.type&&"string"!=typeof r?r.name:r,a=this._calculate(o,o,o,e);return new fo(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){const n=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new fo(this,{kind:"constant",value:n},e)}return new fo(this,t.expression,e)}evaluate(t,e,n,i,r,o){if("source"===t.kind){const a=t.evaluate(e,n,i,r,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,i),t.evaluate({zoom:Math.floor(e.zoom)},n,i),t.evaluate({zoom:Math.floor(e.zoom)+1},n,i),e):t.value}_calculate(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e,other:n}:{from:n,to:e,other:t}}interpolate(t){return t}}class vo{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){if(void 0!==t.value){if("constant"===t.expression.kind){const r=t.expression.evaluate(e,null,{},n,i);return this._calculate(r,r,r,e)}return this._calculate(t.expression.evaluate(new ao(Math.floor(e.zoom-1),e)),t.expression.evaluate(new ao(Math.floor(e.zoom),e)),t.expression.evaluate(new ao(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,n,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class bo{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,i){return!!t.expression.evaluate(e,null,{},n,i)}interpolate(){return!1}}class xo{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const n=t[e];n.specification.overridable&&this.overridableProperties.push(e);const i=this.defaultPropertyValues[e]=new so(n,void 0),r=this.defaultTransitionablePropertyValues[e]=new lo(n);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=i.possiblyEvaluate({})}}}function wo(t,e){return 256*(t=m(Math.floor(t),0,255))+m(Math.floor(e),0,255)}sr("DataDrivenProperty",_o),sr("DataConstantProperty",go),sr("CrossFadedDataDrivenProperty",yo),sr("CrossFadedProperty",vo),sr("ColorRampProperty",bo);const Eo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Mo{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class To{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function So(t,e=1){let n=0,i=0;return{members:t.map((t=>{const r=Eo[t.type].BYTES_PER_ELEMENT,o=n=ko(n,Math.max(e,r)),a=t.components||1;return i=Math.max(i,r),n+=r*a,{name:t.name,type:t.type,components:a,offset:o}})),size:ko(n,Math.max(i,e)),alignment:e}}function ko(t,e){return Math.ceil(t/e)*e}class Co extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.int16[i+0]=e,this.int16[i+1]=n,t}}Co.prototype.bytesPerElement=4,sr("StructArrayLayout2i4",Co);class Io extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=i,this.int16[o+3]=r,t}}Io.prototype.bytesPerElement=8,sr("StructArrayLayout4i8",Io);class Lo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,t,e,n,i,r,o,a)}emplace(t,e,n,i,r,o,a,s){const l=6*t,c=12*t,u=3*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.uint8[c+4]=i,this.uint8[c+5]=r,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,t}}Lo.prototype.bytesPerElement=12,sr("StructArrayLayout2i4ub1f12",Lo);class Do extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.float32[i+0]=e,this.float32[i+1]=n,t}}Do.prototype.bytesPerElement=8,sr("StructArrayLayout2f8",Do);class Ao extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,i,r,o,a,s,l,c)}emplace(t,e,n,i,r,o,a,s,l,c,u){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=i,this.uint16[h+3]=r,this.uint16[h+4]=o,this.uint16[h+5]=a,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,t}}Ao.prototype.bytesPerElement=20,sr("StructArrayLayout10ui20",Ao);class Po extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s){const l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,i,r,o,a,s)}emplace(t,e,n,i,r,o,a,s,l){const c=8*t;return this.uint16[c+0]=e,this.uint16[c+1]=n,this.uint16[c+2]=i,this.uint16[c+3]=r,this.uint16[c+4]=o,this.uint16[c+5]=a,this.uint16[c+6]=s,this.uint16[c+7]=l,t}}Po.prototype.bytesPerElement=16,sr("StructArrayLayout8ui16",Po);class zo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,i,r,o,a,s,l,c,u,h)}emplace(t,e,n,i,r,o,a,s,l,c,u,h,d){const p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=i,this.int16[p+3]=r,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,t}}zo.prototype.bytesPerElement=24,sr("StructArrayLayout4i4ui4i24",zo);class No extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.float32[r+0]=e,this.float32[r+1]=n,this.float32[r+2]=i,t}}No.prototype.bytesPerElement=12,sr("StructArrayLayout3f12",No);class Ro extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Ro.prototype.bytesPerElement=4,sr("StructArrayLayout1ul4",Ro);class Oo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,i,r,o,a,s,l,c)}emplace(t,e,n,i,r,o,a,s,l,c,u){const h=16*t,d=8*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.float32[d+1]=i,this.float32[d+2]=r,this.float32[d+3]=o,this.float32[d+4]=a,this.int16[h+10]=s,this.uint32[d+6]=l,this.uint16[h+14]=c,this.uint16[h+15]=u,t}}Oo.prototype.bytesPerElement=32,sr("StructArrayLayout2i4f1i1ul2ui32",Oo);class Fo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,i,r,o)}emplace(t,e,n,i,r,o,a){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=o,this.int16[s+5]=a,t}}Fo.prototype.bytesPerElement=12,sr("StructArrayLayout2i2i2i12",Fo);class Bo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,i,r)}emplace(t,e,n,i,r,o){const a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=i,this.int16[s+6]=r,this.int16[s+7]=o,t}}Bo.prototype.bytesPerElement=16,sr("StructArrayLayout2f1f2i16",Bo);class Uo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=i,this.float32[a+2]=r,t}}Uo.prototype.bytesPerElement=12,sr("StructArrayLayout2ub2f12",Uo);class Yo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,this.uint16[r+2]=i,t}}Yo.prototype.bytesPerElement=6,sr("StructArrayLayout3ui6",Yo);class jo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_){const y=this.length;return this.resize(y+1),this.emplace(y,t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_)}emplace(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y){const v=13*t,b=26*t,x=52*t;return this.float32[v+0]=e,this.float32[v+1]=n,this.uint16[b+4]=i,this.uint16[b+5]=r,this.uint32[v+3]=o,this.uint32[v+4]=a,this.uint32[v+5]=s,this.uint16[b+12]=l,this.uint16[b+13]=c,this.uint16[b+14]=u,this.float32[v+8]=h,this.float32[v+9]=d,this.uint8[x+40]=p,this.uint8[x+41]=f,this.uint8[x+42]=m,this.uint32[v+11]=g,this.int16[b+24]=_,this.uint8[x+50]=y,t}}jo.prototype.bytesPerElement=52,sr("StructArrayLayout2f2ui3ul3ui2f3ub1ul1i1ub52",jo);class Vo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E,M,T,S){const k=this.length;return this.resize(k+1),this.emplace(k,t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E,M,T,S)}emplace(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E,M,T,S,k){const C=17*t,I=34*t;return this.float32[C+0]=e,this.float32[C+1]=n,this.int16[I+4]=i,this.int16[I+5]=r,this.int16[I+6]=o,this.int16[I+7]=a,this.int16[I+8]=s,this.int16[I+9]=l,this.uint16[I+10]=c,this.uint16[I+11]=u,this.uint16[I+12]=h,this.uint16[I+13]=d,this.uint16[I+14]=p,this.uint16[I+15]=f,this.uint16[I+16]=m,this.uint16[I+17]=g,this.uint16[I+18]=_,this.uint16[I+19]=y,this.uint16[I+20]=v,this.uint16[I+21]=b,this.uint16[I+22]=x,this.uint16[I+23]=w,this.uint16[I+24]=E,this.uint32[C+13]=M,this.float32[C+14]=T,this.float32[C+15]=S,this.float32[C+16]=k,t}}Vo.prototype.bytesPerElement=68,sr("StructArrayLayout2f6i15ui1ul3f68",Vo);class Go extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Go.prototype.bytesPerElement=4,sr("StructArrayLayout1f4",Go);class qo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n)}emplace(t,e,n,i){const r=3*t;return this.int16[r+0]=e,this.int16[r+1]=n,this.int16[r+2]=i,t}}qo.prototype.bytesPerElement=6,sr("StructArrayLayout3i6",qo);class Ho extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=6*t;return this.uint32[3*t+0]=e,this.uint16[o+2]=n,this.uint16[o+3]=i,this.uint16[o+4]=r,t}}Ho.prototype.bytesPerElement=12,sr("StructArrayLayout1ul3ui12",Ho);class $o extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const i=2*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,t}}$o.prototype.bytesPerElement=4,sr("StructArrayLayout2ui4",$o);class Zo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Zo.prototype.bytesPerElement=2,sr("StructArrayLayout1ui2",Zo);class Wo extends To{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n,i)}emplace(t,e,n,i,r){const o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,t}}Wo.prototype.bytesPerElement=16,sr("StructArrayLayout4f16",Wo);class Xo extends Mo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new r(this.anchorPointX,this.anchorPointY)}}Xo.prototype.size=32;class Ko extends Oo{get(t){return new Xo(this,t)}}sr("CollisionBoxArray",Ko);class Jo extends Mo{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+4]}get numGlyphs(){return this._structArray.uint16[this._pos2+5]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineStartIndex(){return this._structArray.uint32[this._pos4+4]}get lineLength(){return this._structArray.uint32[this._pos4+5]}get segment(){return this._structArray.uint16[this._pos2+12]}get lowerSize(){return this._structArray.uint16[this._pos2+13]}get upperSize(){return this._structArray.uint16[this._pos2+14]}get lineOffsetX(){return this._structArray.float32[this._pos4+8]}get lineOffsetY(){return this._structArray.float32[this._pos4+9]}get writingMode(){return this._structArray.uint8[this._pos1+40]}get placedOrientation(){return this._structArray.uint8[this._pos1+41]}set placedOrientation(t){this._structArray.uint8[this._pos1+41]=t}get hidden(){return this._structArray.uint8[this._pos1+42]}set hidden(t){this._structArray.uint8[this._pos1+42]=t}get crossTileID(){return this._structArray.uint32[this._pos4+11]}set crossTileID(t){this._structArray.uint32[this._pos4+11]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+24]}get flipState(){return this._structArray.uint8[this._pos1+50]}set flipState(t){this._structArray.uint8[this._pos1+50]=t}}Jo.prototype.size=52;class Qo extends jo{get(t){return new Jo(this,t)}}sr("PlacedSymbolArray",Qo);class ta extends Mo{get anchorX(){return this._structArray.float32[this._pos4+0]}get anchorY(){return this._structArray.float32[this._pos4+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+8]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+9]}get key(){return this._structArray.uint16[this._pos2+10]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get featureIndex(){return this._structArray.uint16[this._pos2+19]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+21]}get numIconVertices(){return this._structArray.uint16[this._pos2+22]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+23]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+24]}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}ta.prototype.size=68;class ea extends Vo{get(t){return new ta(this,t)}}sr("SymbolInstanceArray",ea);class na extends Go{getoffsetX(t){return this.float32[1*t+0]}}sr("GlyphOffsetArray",na);class ia extends qo{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}sr("SymbolLineVertexArray",ia);class ra extends Mo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ra.prototype.size=12;class oa extends Ho{get(t){return new ra(this,t)}}sr("FeatureIndexArray",oa);class aa extends Mo{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}aa.prototype.size=4;class sa extends $o{get(t){return new aa(this,t)}}sr("FillExtrusionCentroidArray",sa);const la=So([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),ca=So([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var ua=le((function(t){t.exports=function(t,e){var n,i,r,o,a,s,l,c;for(i=t.length-(n=3&t.length),r=e,a=3432918353,s=461845907,c=0;c<i;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,r=27492+(65535&(o=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}})),ha=le((function(t){t.exports=function(t,e){for(var n,i=t.length,r=e^i,o=0;i>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&t.charCodeAt(o+2))<<16;case 2:r^=(255&t.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}})),da=ua,pa=ha;da.murmur3=ua,da.murmur2=pa;class fa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,i){this.ids.push(ma(t)),this.positions.push(e,n,i)}getPositions(t){const e=ma(t);let n=0,i=this.ids.length-1;for(;n<i;){const t=n+i>>1;this.ids[t]>=e?i=t:n=t+1}const r=[];for(;this.ids[n]===e;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r}static serialize(t,e){const n=new Float64Array(t.ids),i=new Uint32Array(t.positions);return ga(n,i,0,n.length-1),e&&e.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(t){const e=new fa;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function ma(t){const e=+t;return!isNaN(e)&&e<=s?e:da(String(t))}function ga(t,e,n,i){for(;n<i;){const r=t[n+i>>1];let o=n-1,a=i+1;for(;;){do{o++}while(t[o]<r);do{a--}while(t[a]>r);if(o>=a)break;_a(t,o,a),_a(e,3*o,3*a),_a(e,3*o+1,3*a+1),_a(e,3*o+2,3*a+2)}a-n<i-a?(ga(t,e,n,a),n=a+1):(ga(t,e,a+1,i),i=a)}}function _a(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}sr("FeaturePositionMap",fa);class ya{constructor(t,e){this.gl=t.gl,this.location=e}}class va extends ya{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class ba extends ya{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class xa extends ya{constructor(t,e){super(t,e),this.current=ue.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const wa=new Float32Array(16),Ea=new Float32Array(9);function Ma(t){return[wo(255*t.r,255*t.g),wo(255*t.b,255*t.a)]}class Ta{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n){t.set(n.constantOr(this.value))}getBinding(t,e,n){return"color"===this.type?new xa(t,e):new va(t,e)}}class Sa{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tl.concat(e.br),this.patternTo=t.tl.concat(t.br)}setUniform(t,e,n,i){const r="u_pattern_to"===i||"u_dash_to"===i?this.patternTo:"u_pattern_from"===i||"u_dash_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;r&&t.set(r)}getBinding(t,e,n){return"u_pattern_from"===n||"u_pattern_to"===n||"u_dash_from"===n||"u_dash_to"===n?new ba(t,e):new va(t,e)}}class ka{constructor(t,e,n,i){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(t,e,n,i,r){const o=this.paintVertexArray.length,a=this.expression.evaluate(new ao(0),e,{},i,[],r);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)}updatePaintArray(t,e,n,i){const r=this.expression.evaluate({zoom:0},n,i);this._setPaintValue(t,e,r)}_setPaintValue(t,e,n){if("color"===this.type){const i=Ma(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ca{constructor(t,e,n,i,r,o){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(t,e,n,i,r){const o=this.expression.evaluate(new ao(this.zoom),e,{},i,[],r),a=this.expression.evaluate(new ao(this.zoom+1),e,{},i,[],r),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)}updatePaintArray(t,e,n,i){const r=this.expression.evaluate({zoom:this.zoom},n,i),o=this.expression.evaluate({zoom:this.zoom+1},n,i);this._setPaintValue(t,e,r,o)}_setPaintValue(t,e,n,i){if("color"===this.type){const r=Ma(n),o=Ma(i);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1],o[0],o[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,i=m(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(i)}getBinding(t,e,n){return new va(t,e)}}class Ia{constructor(t,e,n,i,r,o,a){this.expression=t,this.type=n,this.useIntegerZoom=i,this.zoom=r,this.layerId=a,this.paintVertexAttributes=("array"===n?ca:la).members;for(let t=0;t<e.length;++t);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}populatePaintArray(t,e,n){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(i,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,i,r){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],r)}_setPaintValues(t,e,n,i){if(!i||!n)return;const{min:r,mid:o,max:a}=n,s=i[r],l=i[o],c=i[a];if(s&&l&&c)for(let n=t;n<e;n++)this._setPaintValue(this.zoomInPaintVertexArray,n,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,n,l,c)}_setPaintValue(t,e,n,i){t.emplace(e,n.tl[0],n.tl[1],n.br[0],n.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],n.pixelRatio,i.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class La{constructor(t,e,n=(()=>!0)){this.binders={},this._buffers=[];const i=[];for(const r in t.paint._values){if(!n(r))continue;const o=t.paint.get(r);if(!(o instanceof fo&&Xn(o.property.specification)))continue;const a=Pa(r,t.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u,d="line-dasharray"===String(r)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||h){const n=Ra(r,l,"source");this.binders[r]=h?new Ia(s,a,l,c,e,n,t.id):new ka(s,a,l,n),i.push(`/a_${r}`)}else{const t=Ra(r,l,"composite");this.binders[r]=new Ca(s,a,l,c,e,t),i.push(`/z_${r}`)}else this.binders[r]=h?new Sa(s.value,a):new Ta(s.value,a,l),i.push(`/u_${r}`)}this.cacheKey=i.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof ka||e instanceof Ca?e.maxValue:0}populatePaintArrays(t,e,n,i,r){for(const o in this.binders){const a=this.binders[o];(a instanceof ka||a instanceof Ca||a instanceof Ia)&&a.populatePaintArray(t,e,n,i,r)}}setConstantPatternPositions(t,e){for(const n in this.binders){const i=this.binders[n];i instanceof Sa&&i.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,n,i,r){let o=!1;for(const a in t){const s=e.getPositions(a);for(const e of s){const s=n.feature(e.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof ka||l instanceof Ca||l instanceof Ia)&&!0===l.expression.isStateDependent){const c=i.paint.get(n);l.expression=c.value,l.updatePaintArray(e.start,e.end,s,t[a],r),o=!0}}}}return o}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof Ta||n instanceof Sa)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof ka||n instanceof Ca||n instanceof Ia)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Ta||n instanceof Sa||n instanceof Ca)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const n=[];for(const i in this.binders){const r=this.binders[i];if(r instanceof Ta||r instanceof Sa||r instanceof Ca)for(const o of r.uniformNames)if(e[o]){const a=r.getBinding(t,e[o],o);n.push({name:o,property:i,binding:a})}}return n}setUniforms(t,e,n,i){for(const{name:t,property:r,binding:o}of e)this.binders[r].setUniform(o,i,n.get(r),t)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const n=this.binders[e];if(t&&n instanceof Ia){const e=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(n instanceof ka||n instanceof Ca)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof ka||n instanceof Ca||n instanceof Ia)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof ka||e instanceof Ca||e instanceof Ia)&&e.destroy()}}}class Da{constructor(t,e,n=(()=>!0)){this.programConfigurations={};for(const i of t)this.programConfigurations[i.id]=new La(i,e,n);this.needsUpload=!1,this._featureMap=new fa,this._bufferOffset=0}populatePaintArrays(t,e,n,i,r,o){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(t,e,i,r,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,i){for(const r of n)this.needsUpload=this.programConfigurations[r.id].updatePaintArrays(t,this._featureMap,e,r,i)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const Aa={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Pa(t,e){return Aa[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}const za={"line-pattern":{source:Ao,composite:Ao},"fill-pattern":{source:Ao,composite:Ao},"fill-extrusion-pattern":{source:Ao,composite:Ao},"line-dasharray":{source:Po,composite:Po}},Na={color:{source:Do,composite:Wo},number:{source:Go,composite:Do}};function Ra(t,e,n){const i=za[t];return i&&i[n]||Na[e][n]}sr("ConstantBinder",Ta),sr("CrossFadedConstantBinder",Sa),sr("SourceExpressionBinder",ka),sr("CrossFadedCompositeBinder",Ia),sr("CompositeExpressionBinder",Ca),sr("ProgramConfiguration",La,{omit:["_buffers"]}),sr("ProgramConfigurationSet",Da);const Oa="-transition";class Fa extends Ot{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&"sky"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new po(e.layout)),e.paint)){this._transitionablePaint=new co(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mo(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n={}){null!=e&&this._validate(tr,`layers.${this.id}.layout.${t}`,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return S(t,Oa)?this._transitionablePaint.getTransition(t.slice(0,-Oa.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(null!=e&&this._validate(Qi,`layers.${this.id}.paint.${t}`,t,e,n))return!1;if(S(t,Oa))return this._transitionablePaint.setTransition(t.slice(0,-Oa.length),e||void 0),!1;{const n=this._transitionablePaint._values[t],i="cross-faded-data-driven"===n.property.specification["property-type"],r=n.value.isDataDriven(),o=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const a=this._transitionablePaint._values[t].value;return a.isDataDriven()||r||i||this._handleOverridablePaintPropertyUpdate(t,o,a)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),C(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,i,r={}){return(!r||!1!==r.validate)&&er(this,t.call(Xi,{key:e,layerType:this.type,objectKey:n,value:i,styleSpec:Ft,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof fo&&Xn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const Ba=So([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ua}=Ba;class Ya{constructor(t=[]){this.segments=t}prepareSegment(t,e,n,i){let r=this.segments[this.segments.length-1];return t>Ya.MAX_VERTEX_ARRAY_LENGTH&&D(`Max vertices per segment is ${Ya.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!r||r.vertexLength+t>Ya.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,i){return new Ya([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}Ya.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sr("SegmentVector",Ya);var ja=8192;const Va=Math.pow(2,14)-1,Ga=-Va-1;function qa(t){const e=ja/t.extent,n=t.loadGeometry();for(let t=0;t<n.length;t++){const i=n[t];for(let t=0;t<i.length;t++){const n=i[t],r=Math.round(n.x*e),o=Math.round(n.y*e);n.x=m(r,Ga,Va),n.y=m(o,Ga,Va),(r<n.x||r>n.x+1||o<n.y||o>n.y+1)&&D("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Ha(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?qa(t):[]}}function $a(t,e,n,i,r){t.emplaceBack(2*e+(i+1)/2,2*n+(r+1)/2)}class Za{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Co,this.indexArray=new Yo,this.segments=new Ya,this.programConfigurations=new Da(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){const i=this.layers[0],r=[];let o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));for(const{feature:e,id:i,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Ha(e,t);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),l,n))continue;const c=o?o.evaluate(l,{},n):void 0,u={id:i,properties:e.properties,type:e.type,sourceLayerIndex:s,index:a,geometry:t?l.geometry:qa(e),patterns:{},sortKey:c};r.push(u)}o&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of r){const{geometry:r,index:o,sourceLayerIndex:a}=i,s=t[o].feature;this.addFeature(i,r,o,n),e.featureIndex.insert(s,r,o,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ua),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i){for(const n of e)for(const e of n){const n=e.x,i=e.y;if(n<0||n>=ja||i<0||i>=ja)continue;const r=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),o=r.vertexLength;$a(this.layoutVertexArray,n,i,-1,-1),$a(this.layoutVertexArray,n,i,1,-1),$a(this.layoutVertexArray,n,i,1,1),$a(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),r.vertexLength+=4,r.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},i)}}function Wa(t,e){for(let n=0;n<t.length;n++)if(rs(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(rs(t,e[n]))return!0;return!!Qa(t,e)}function Xa(t,e,n){return!!rs(t,e)||!!es(e,t,n)}function Ka(t,e){if(1===t.length)return is(e,t[0]);for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<i.length;e++)if(rs(t,i[e]))return!0}for(let n=0;n<t.length;n++)if(is(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Qa(t,e[n]))return!0;return!1}function Ja(t,e,n){if(t.length>1){if(Qa(t,e))return!0;for(let i=0;i<e.length;i++)if(es(e[i],t,n))return!0}for(let i=0;i<t.length;i++)if(es(t[i],e,n))return!0;return!1}function Qa(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1];for(let t=0;t<e.length-1;t++)if(ts(i,r,e[t],e[t+1]))return!0}return!1}function ts(t,e,n,i){return A(t,n,i)!==A(e,n,i)&&A(t,e,n)!==A(t,e,i)}function es(t,e,n){const i=n*n;if(1===e.length)return t.distSqr(e[0])<i;for(let n=1;n<e.length;n++)if(ns(t,e[n-1],e[n])<i)return!0;return!1}function ns(t,e,n){const i=e.distSqr(n);if(0===i)return t.distSqr(e);const r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return t.distSqr(r<0?e:r>1?n:n.sub(e)._mult(r)._add(e))}function is(t,e){let n,i,r,o=!1;for(let a=0;a<t.length;a++){n=t[a];for(let t=0,a=n.length-1;t<n.length;a=t++)i=n[t],r=n[a],i.y>e.y!=r.y>e.y&&e.x<(r.x-i.x)*(e.y-i.y)/(r.y-i.y)+i.x&&(o=!o)}return o}function rs(t,e){let n=!1;for(let i=0,r=t.length-1;i<t.length;r=i++){const o=t[i],a=t[r];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function os(t,e,n,i,o){for(const r of t)if(e<=r.x&&n<=r.y&&i>=r.x&&o>=r.y)return!0;const a=[new r(e,n),new r(e,o),new r(i,o),new r(i,n)];if(t.length>2)for(const e of a)if(rs(t,e))return!0;for(let e=0;e<t.length-1;e++)if(as(t[e],t[e+1],a))return!0;return!1}function as(t,e,n){const i=n[0],r=n[2];if(t.x<i.x&&e.x<i.x||t.x>r.x&&e.x>r.x||t.y<i.y&&e.y<i.y||t.y>r.y&&e.y>r.y)return!1;const o=A(t,e,n[0]);return o!==A(t,e,n[1])||o!==A(t,e,n[2])||o!==A(t,e,n[3])}function ss(t,e,n){const i=e.paint.get(t).value;return"constant"===i.kind?i.value:n.programConfigurations.get(e.id).getMaxValue(t)}function ls(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function cs(t,e,n,i,o){if(!e[0]&&!e[1])return t;const a=r.convert(e)._mult(o);"viewport"===n&&a._rotate(-i);const s=[];for(let e=0;e<t.length;e++)s.push(t[e].sub(a));return s}function us(t,e,n,i){const o=r.convert(t)._mult(i);return"viewport"===e&&o._rotate(-n),o}sr("CircleBucket",Za,{omit:["layers"]});const hs=new xo({"circle-sort-key":new _o(Ft.layout_circle["circle-sort-key"])});var ds={paint:new xo({"circle-radius":new _o(Ft.paint_circle["circle-radius"]),"circle-color":new _o(Ft.paint_circle["circle-color"]),"circle-blur":new _o(Ft.paint_circle["circle-blur"]),"circle-opacity":new _o(Ft.paint_circle["circle-opacity"]),"circle-translate":new go(Ft.paint_circle["circle-translate"]),"circle-translate-anchor":new go(Ft.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new go(Ft.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new go(Ft.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _o(Ft.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _o(Ft.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _o(Ft.paint_circle["circle-stroke-opacity"])}),layout:hs},ps="undefined"!=typeof Float32Array?Float32Array:Array;function fs(){var t=new ps(9);return ps!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ms(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gs(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],_=e[14],y=e[15],v=n[0],b=n[1],x=n[2],w=n[3];return t[0]=v*i+b*s+x*h+w*m,t[1]=v*r+b*l+x*d+w*g,t[2]=v*o+b*c+x*p+w*_,t[3]=v*a+b*u+x*f+w*y,t[4]=(v=n[4])*i+(b=n[5])*s+(x=n[6])*h+(w=n[7])*m,t[5]=v*r+b*l+x*d+w*g,t[6]=v*o+b*c+x*p+w*_,t[7]=v*a+b*u+x*f+w*y,t[8]=(v=n[8])*i+(b=n[9])*s+(x=n[10])*h+(w=n[11])*m,t[9]=v*r+b*l+x*d+w*g,t[10]=v*o+b*c+x*p+w*_,t[11]=v*a+b*u+x*f+w*y,t[12]=(v=n[12])*i+(b=n[13])*s+(x=n[14])*h+(w=n[15])*m,t[13]=v*r+b*l+x*d+w*g,t[14]=v*o+b*c+x*p+w*_,t[15]=v*a+b*u+x*f+w*y,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var _s=gs;function ys(){var t=new ps(3);return ps!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function vs(t){return Math.hypot(t[0],t[1],t[2])}function bs(t,e,n){var i=new ps(3);return i[0]=t,i[1]=e,i[2]=n,i}function xs(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function ws(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Es(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function Ms(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Ts(t,e,n){var i=n[0],r=n[1],o=n[2],a=e[0],s=e[1],l=e[2],c=r*l-o*s,u=o*a-i*l,h=i*s-r*a,d=r*h-o*u,p=o*c-i*h,f=i*u-r*c,m=2*n[3];return u*=m,h*=m,p*=2,f*=2,t[0]=a+(c*=m)+(d*=2),t[1]=s+u+p,t[2]=l+h+f,t}var Ss,ks=xs,Cs=ws,Is=vs;function Ls(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t}function Ds(){var t=new ps(4);return ps!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function As(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ps(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+a*s,t[1]=r*l+o*s,t[2]=o*l-r*s,t[3]=a*l-i*s,t}function zs(t,e,n){const i=Ls([],[t.x,t.y,e,1],n);return new r(i[0]/i[3],i[1]/i[3])}ys(),Ss=new ps(4),ps!=Float32Array&&(Ss[0]=0,Ss[1]=0,Ss[2]=0,Ss[3]=0),ys(),bs(1,0,0),bs(0,1,0),Ds(),Ds(),fs();const Ns=bs(0,0,0),Rs=bs(0,0,1);function Os(t,e){const n=ys();return Ns[2]=e,t.intersectsPlane(Ns,Rs,n),new r(n[0],n[1])}class Fs extends Za{}function Bs(t,{width:e,height:n},i,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==e*n*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(e*n*i);return t.width=e,t.height=n,t.data=r,t}function Us(t,{width:e,height:n},i){if(e===t.width&&n===t.height)return;const r=Bs({},{width:e,height:n},i);Ys(t,r,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,n)},i),t.width=e,t.height=n,t.data=r.data}function Ys(t,e,n,i,r,o){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||n.x>t.width-r.width||n.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||i.x>e.width-r.width||i.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;for(let l=0;l<r.height;l++){const c=((n.y+l)*t.width+n.x)*o,u=((i.y+l)*e.width+i.x)*o;for(let t=0;t<r.width*o;t++)s[u+t]=a[c+t]}return e}sr("HeatmapBucket",Fs,{omit:["layers"]});class js{constructor(t,e){Bs(this,t,1,e)}resize(t){Us(this,t,1)}clone(){return new js({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){Ys(t,e,n,i,r,1)}}class Vs{constructor(t,e){Bs(this,t,4,e)}resize(t){Us(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Vs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,i,r){Ys(t,e,n,i,r,4)}}sr("AlphaImage",js),sr("RGBAImage",Vs);var Gs={paint:new xo({"heatmap-radius":new _o(Ft.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _o(Ft.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new go(Ft.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bo(Ft.paint_heatmap["heatmap-color"]),"heatmap-opacity":new go(Ft.paint_heatmap["heatmap-opacity"])})};function qs(t){const e={},n=t.resolution||256,i=t.clips?t.clips.length:1,r=t.image||new Vs({width:n,height:i}),o=(n,i,o)=>{e[t.evaluationKey]=o;const a=t.expression.evaluate(e);r.data[n+i+0]=Math.floor(255*a.r/a.a),r.data[n+i+1]=Math.floor(255*a.g/a.a),r.data[n+i+2]=Math.floor(255*a.b/a.a),r.data[n+i+3]=Math.floor(255*a.a)};if(t.clips)for(let e=0,r=0;e<i;++e,r+=4*n)for(let i=0,a=0;i<n;i++,a+=4){const s=i/(n-1),{start:l,end:c}=t.clips[e];o(r,a,l*(1-s)+c*s)}else for(let t=0,e=0;t<n;t++,e+=4)o(0,e,t/(n-1));return r}var Hs={paint:new xo({"hillshade-illumination-direction":new go(Ft.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new go(Ft.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new go(Ft.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new go(Ft.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new go(Ft.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new go(Ft.paint_hillshade["hillshade-accent-color"])})};const $s=So([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zs}=$s;var Ws=Ks,Xs=Ks;function Ks(t,e,n){n=n||2;var i,r,o,a,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=Js(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=Js(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(cl(a));for(s.sort(ol),r=0;r<s.length;r++)al(s[r],n),n=Qs(n,n.next);return n}(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)(s=t[f])<i&&(i=s),(l=t[f+1])<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=0!==(c=Math.max(o-i,a-r))?1/c:0}return tl(d,p,n,i,r,c),p}function Js(t,e,n,i,r){var o,a;if(r===wl(t,e,n,i)>0)for(o=e;o<n;o+=i)a=vl(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=vl(o,t[o],t[o+1],a);return a&&pl(a,a.next)&&(bl(a),a=a.next),a}function Qs(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!pl(i,i.next)&&0!==dl(i.prev,i,i.next))i=i.next;else{if(bl(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function tl(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=ll(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?nl(t,i,r,o):el(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),bl(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?tl(t=il(Qs(t),e,n),e,n,i,r,o,2):2===a&&rl(t,e,n,i,r,o):tl(Qs(t),e,n,i,r,o,1);break}}}function el(t){var e=t.prev,n=t,i=t.next;if(dl(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ul(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&dl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function nl(t,e,n,i){var r=t.prev,o=t,a=t.next;if(dl(r,o,a)>=0)return!1;for(var s=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,l=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,c=ll(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),u=ll(s,l,e,n,i),h=t.prevZ,d=t.nextZ;h&&h.z>=c&&d&&d.z<=u;){if(h!==t.prev&&h!==t.next&&ul(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&dl(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,d!==t.prev&&d!==t.next&&ul(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&dl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;h&&h.z>=c;){if(h!==t.prev&&h!==t.next&&ul(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&dl(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;d&&d.z<=u;){if(d!==t.prev&&d!==t.next&&ul(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&dl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function il(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!pl(r,o)&&fl(r,i,i.next,o)&&_l(r,o)&&_l(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),bl(i),bl(i.next),i=t=o),i=i.next}while(i!==t);return Qs(i)}function rl(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&hl(a,s)){var l=yl(a,s);return a=Qs(a,a.next),l=Qs(l,l.next),tl(a,e,n,i,r,o),void tl(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function ol(t,e){return t.x-e.x}function al(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var l,c=n,u=n.x,h=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&ul(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),_l(i,t)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&sl(n,i)))&&(n=i,d=l)),i=i.next}while(i!==c);return n}(t,e)){var n=yl(e,t);Qs(e,e.next),Qs(n,n.next)}}function sl(t,e){return dl(t.prev,t,e.prev)<0&&dl(e.next,t,t.next)<0}function ll(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function cl(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function ul(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function hl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&fl(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(_l(t,e)&&_l(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(dl(t.prev,t,e.prev)||dl(t,e.prev,e))||pl(t,e)&&dl(t.prev,t,t.next)>0&&dl(e.prev,e,e.next)>0)}function dl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function pl(t,e){return t.x===e.x&&t.y===e.y}function fl(t,e,n,i){var r=gl(dl(t,e,n)),o=gl(dl(t,e,i)),a=gl(dl(n,i,t)),s=gl(dl(n,i,e));return r!==o&&a!==s||!(0!==r||!ml(t,n,e))||!(0!==o||!ml(t,i,e))||!(0!==a||!ml(n,t,i))||!(0!==s||!ml(n,e,i))}function ml(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function gl(t){return t>0?1:t<0?-1:0}function _l(t,e){return dl(t.prev,t,t.next)<0?dl(t,e,t.next)>=0&&dl(t,t.prev,e)>=0:dl(t,e,t.prev)<0||dl(t,t.next,e)<0}function yl(t,e){var n=new xl(t.i,t.x,t.y),i=new xl(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function vl(t,e,n,i){var r=new xl(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function bl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function wl(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function El(t,e,n,i,r){Ml(t,e,n||0,i||t.length-1,r||Sl)}function Ml(t,e,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,a=e-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);Ml(t,e,Math.max(n,Math.floor(e-a*l/o+c)),Math.min(i,Math.floor(e+(o-a)*l/o+c)),r)}var u=t[e],h=n,d=i;for(Tl(t,n,e),r(t[i],u)>0&&Tl(t,n,i);h<d;){for(Tl(t,h,d),h++,d--;r(t[h],u)<0;)h++;for(;r(t[d],u)>0;)d--}0===r(t[n],u)?Tl(t,n,d):Tl(t,++d,i),d<=e&&(n=d+1),e<=d&&(i=d-1)}}function Tl(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Sl(t,e){return t<e?-1:t>e?1:0}function kl(t,e){const n=t.length;if(n<=1)return[t];const i=[];let r,o;for(let e=0;e<n;e++){const n=P(t[e]);0!==n&&(t[e].area=Math.abs(n),void 0===o&&(o=n<0),o===n<0?(r&&i.push(r),r=[t[e]]):r.push(t[e]))}if(r&&i.push(r),e>1)for(let t=0;t<i.length;t++)i[t].length<=e||(El(i[t],e,1,i[t].length-1,Cl),i[t]=i[t].slice(0,e));return i}function Cl(t,e){return e.area-t.area}function Il(t,e,n){const i=n.patternDependencies;let r=!1;for(const n of e){const e=n.paint.get(`${t}-pattern`);e.isConstant()||(r=!0);const o=e.constantOr(null);o&&(r=!0,i[o.to]=!0,i[o.from]=!0)}return r}function Ll(t,e,n,i,r){const o=r.patternDependencies;for(const a of e){const e=a.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:i-1},n,{},r.availableImages),s=e.evaluate({zoom:i},n,{},r.availableImages),l=e.evaluate({zoom:i+1},n,{},r.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[t]=!0,o[s]=!0,o[l]=!0,n.patterns[a.id]={min:t,mid:s,max:l}}}return n}Ks.deviation=function(t,e,n,i){var r=e&&e.length,o=Math.abs(wl(t,0,r?e[0]*n:t.length,n));if(r)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(wl(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var l=0;for(a=0;a<i.length;a+=3){var c=i[a]*n,u=i[a+1]*n,h=i[a+2]*n;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Ks.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n},Ws.default=Xs;class Dl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Co,this.indexArray=new Yo,this.indexArray2=new $o,this.programConfigurations=new Da(t.layers,t.zoom),this.segments=new Ya,this.segments2=new Ya,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=Il("fill",this.layers,e);const i=this.layers[0].layout.get("fill-sort-key"),r=[];for(const{feature:o,id:a,index:s,sourceLayerIndex:l}of t){const t=this.layers[0]._featureFilter.needGeometry,c=Ha(o,t);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),c,n))continue;const u=i?i.evaluate(c,{},n,e.availableImages):void 0,h={id:a,properties:o.properties,type:o.type,sourceLayerIndex:l,index:s,geometry:t?c.geometry:qa(o),patterns:{},sortKey:u};r.push(h)}i&&r.sort(((t,e)=>t.sortKey-e.sortKey));for(const i of r){const{geometry:r,index:o,sourceLayerIndex:a}=i;if(this.hasPattern){const t=Ll("fill",this.layers,i,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(i,r,o,n,{});e.featureIndex.insert(t[o].feature,r,o,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Zs),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,i,r){for(const t of kl(e,500)){let e=0;for(const n of t)e+=n.length;const n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),i=n.vertexLength,r=[],o=[];for(const e of t){if(0===e.length)continue;e!==t[0]&&o.push(r.length/2);const n=this.segments2.prepareSegment(e.length,this.layoutVertexArray,this.indexArray2),i=n.vertexLength;this.layoutVertexArray.emplaceBack(e[0].x,e[0].y),this.indexArray2.emplaceBack(i+e.length-1,i),r.push(e[0].x),r.push(e[0].y);for(let t=1;t<e.length;t++)this.layoutVertexArray.emplaceBack(e[t].x,e[t].y),this.indexArray2.emplaceBack(i+t-1,i+t),r.push(e[t].x),r.push(e[t].y);n.vertexLength+=e.length,n.primitiveLength+=e.length}const a=Ws(r,o);for(let t=0;t<a.length;t+=3)this.indexArray.emplaceBack(i+a[t],i+a[t+1],i+a[t+2]);n.vertexLength+=e,n.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}}sr("FillBucket",Dl,{omit:["layers","patternFeatures"]});const Al=new xo({"fill-sort-key":new _o(Ft.layout_fill["fill-sort-key"])});var Pl={paint:new xo({"fill-antialias":new go(Ft.paint_fill["fill-antialias"]),"fill-opacity":new _o(Ft.paint_fill["fill-opacity"]),"fill-color":new _o(Ft.paint_fill["fill-color"]),"fill-outline-color":new _o(Ft.paint_fill["fill-outline-color"]),"fill-translate":new go(Ft.paint_fill["fill-translate"]),"fill-translate-anchor":new go(Ft.paint_fill["fill-translate-anchor"]),"fill-pattern":new yo(Ft.paint_fill["fill-pattern"])}),layout:Al};const zl=So([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Nl=So([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Rl}=zl;var Ol=Fl;function Fl(t,e,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=i,this._values=r,t.readFields(Bl,this,e)}function Bl(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var i=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[i]=r}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Ul(t){for(var e,n,i=0,r=0,o=t.length,a=o-1;r<o;a=r++)i+=((n=t[a]).x-(e=t[r]).x)*(e.y+n.y);return i}Fl.types=["Unknown","Point","LineString","Polygon"],Fl.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,i=1,o=0,a=0,s=0,l=[];t.pos<n;){if(o<=0){var c=t.readVarint();i=7&c,o=c>>3}if(o--,1===i||2===i)a+=t.readSVarint(),s+=t.readSVarint(),1===i&&(e&&l.push(e),e=[]),e.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&l.push(e),l},Fl.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,i=0,r=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(i<=0){var u=t.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(o+=t.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,c]},Fl.prototype.toGeoJSON=function(t,e,n){var i,r,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=Fl.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(i=0;i<l.length;i++)h[i]=l[i][0];u(l=h);break;case 2:for(i=0;i<l.length;i++)u(l[i]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,i,r=[],o=0;o<e;o++){var a=Ul(t[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(n&&r.push(n),n=[t[o]]):n.push(t[o]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)u(l[i][r])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Yl=jl;function jl(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Vl,this,e),this.length=this._features.length}function Vl(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var i=t.readVarint()>>3;e=1===i?t.readString():2===i?t.readFloat():3===i?t.readDouble():4===i?t.readVarint64():5===i?t.readVarint():6===i?t.readSVarint():7===i?t.readBoolean():null}return e}(n))}function Gl(t,e,n){if(3===t){var i=new Yl(n,n.readVarint()+n.pos);i.length&&(e[i.name]=i)}}jl.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Ol(this._pbf,e,this.extent,this._keys,this._values)};var ql={VectorTile:function(t,e){this.layers=t.readFields(Gl,{},e)},VectorTileFeature:Ol,VectorTileLayer:Yl};const Hl=ql.VectorTileFeature.types,$l=Math.pow(2,13);function Zl(t,e,n,i,r,o,a,s){t.emplaceBack((e<<1)+a,(n<<1)+o,(Math.floor(i*$l)<<1)+r,Math.round(s))}class Wl{constructor(){this.acc=new r(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new r(t.x,t.y),this.max=new r(t.x,t.y))}append(t,e){this.currentPolyCount.edges++,this.acc._add(t);let n=!!this.borders;const i=this.min,r=this.max;t.x<i.x?(i.x=t.x,n=!0):t.x>r.x&&(r.x=t.x,n=!0),t.y<i.y?(i.y=t.y,n=!0):t.y>r.y&&(r.y=t.y,n=!0),((0===t.x||t.x===ja)&&t.x===e.x)!=((0===t.y||t.y===ja)&&t.y===e.y)&&this.processBorderOverlap(t,e),n&&this.checkBorderIntersection(t,e)}checkBorderIntersection(t,e){e.x<0!=t.x<0&&this.addBorderIntersection(0,nn(e.y,t.y,(0-e.x)/(t.x-e.x))),e.x>ja!=t.x>ja&&this.addBorderIntersection(1,nn(e.y,t.y,(ja-e.x)/(t.x-e.x))),e.y<0!=t.y<0&&this.addBorderIntersection(2,nn(e.x,t.x,(0-e.y)/(t.y-e.y))),e.y>ja!=t.y>ja&&this.addBorderIntersection(3,nn(e.x,t.x,(ja-e.y)/(t.y-e.y)))}addBorderIntersection(t,e){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[t];e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e)}processBorderOverlap(t,e){if(t.x===e.x){if(t.y===e.y)return;const n=0===t.x?0:1;this.addBorderIntersection(n,e.y),this.addBorderIntersection(n,t.y)}else{const n=0===t.y?2:3;this.addBorderIntersection(n,e.x),this.addBorderIntersection(n,t.x)}}centroid(){const t=this.polyCount.reduce(((t,e)=>t+e.edges),0);return 0!==t?this.acc.div(t)._round():new r(0,0)}span(){return new r(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((t,e)=>t+ +(e[0]!==Number.MAX_VALUE)),0)}}class Xl{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Io,this.centroidVertexArray=new sa,this.indexArray=new Yo,this.programConfigurations=new Da(t.layers,t.zoom),this.segments=new Ya,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.enableTerrain=t.enableTerrain}populate(t,e,n){this.features=[],this.hasPattern=Il("fill-extrusion",this.layers,e),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(t){const e=Math.exp(Math.PI*(1-t.y/(1<<t.z)*2));return 80150034*e/(e*e+1)/ja/(1<<t.z)}(n);for(const{feature:i,id:r,index:o,sourceLayerIndex:a}of t){const t=this.layers[0]._featureFilter.needGeometry,s=Ha(i,t);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),s,n))continue;const l={id:r,sourceLayerIndex:a,index:o,geometry:t?s.geometry:qa(i),properties:i.properties,type:i.type,patterns:{}},c=this.layoutVertexArray.length;this.hasPattern?this.features.push(Ll("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,o,n,{}),e.featureIndex.insert(i,l.geometry,o,a,this.index,c)}this.sortBorders()}addFeatures(t,e,n){for(const t of this.features){const{geometry:i}=t;this.addFeature(t,i,t.index,e,n)}this.sortBorders()}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Rl),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Nl.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,i,r){const o=this.enableTerrain?new Wl:null;for(const n of kl(e,500)){let e=0,i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===n.length||(a=n[0]).every((t=>t.x<=0))||a.every((t=>t.x>=ja))||a.every((t=>t.y<=0))||a.every((t=>t.y>=ja)))continue;for(let t=0;t<n.length;t++){const r=n[t];if(0===r.length)continue;e+=r.length;let a=0;o&&o.startRing(r[0]);for(let t=0;t<r.length;t++){const e=r[t];if(t>=1){const n=r[t-1];if(!Kl(e,n)){o&&o.append(e,n),i.vertexLength+4>Ya.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=e.sub(n)._perp(),r=t.x/(Math.abs(t.x)+Math.abs(t.y)),s=t.y>0?1:0,l=n.dist(e);a+l>32768&&(a=0),Zl(this.layoutVertexArray,e.x,e.y,r,s,0,0,a),Zl(this.layoutVertexArray,e.x,e.y,r,s,0,1,a),a+=l,Zl(this.layoutVertexArray,n.x,n.y,r,s,0,0,a),Zl(this.layoutVertexArray,n.x,n.y,r,s,0,1,a);const c=i.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+e>Ya.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Hl[t.type])continue;const r=[],s=[],l=i.vertexLength;for(let t=0;t<n.length;t++){const e=n[t];if(0!==e.length){e!==n[0]&&s.push(r.length/2);for(let t=0;t<e.length;t++){const n=e[t];Zl(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),r.push(n.x),r.push(n.y),o&&o.currentPolyCount.top++}}}const c=Ws(r,s);for(let t=0;t<c.length;t+=3)this.indexArray.emplaceBack(l+c[t],l+c[t+2],l+c[t+1]);i.primitiveLength+=c.length/3,i.vertexLength+=e}var a;if(o&&o.polyCount.length>0){if(o.borders){o.vertexArrayOffset=this.centroidVertexArray.length;const t=o.borders,e=this.featuresOnBorder.push(o)-1;for(let n=0;n<4;n++)t[n][0]!==Number.MAX_VALUE&&this.borders[n].push(e)}this.encodeCentroid(o.borders?void 0:o.centroid(),o)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort(((e,n)=>this.featuresOnBorder[e].borders[t][0]-this.featuresOnBorder[n].borders[t][0]))}encodeCentroid(t,e,n=!0){let i,r;if(t)if(0!==t.y){const n=e.span()._mult(this.tileToMeter);i=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(n.x/10)),r=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else i=Math.ceil(7*(t.x+450)),r=0;else i=0,r=+n;let o=n?this.centroidVertexArray.length:e.vertexArrayOffset;for(const t of e.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*t.edges+t.top);for(let e=0;e<2*t.edges;e++)this.centroidVertexArray.emplace(o++,0,r),this.centroidVertexArray.emplace(o++,i,r);for(let e=0;e<t.top;e++)this.centroidVertexArray.emplace(o++,i,r)}}}function Kl(t,e){return t.x===e.x&&(t.x<0||t.x>ja)||t.y===e.y&&(t.y<0||t.y>ja)}sr("FillExtrusionBucket",Xl,{omit:["layers","features"]}),sr("PartMetadata",Wl);var Jl={paint:new xo({"fill-extrusion-opacity":new go(Ft["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _o(Ft["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new go(Ft["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new go(Ft["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yo(Ft["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _o(Ft["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _o(Ft["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new go(Ft["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Ql(t,e){return t.x*e.x+t.y*e.y}function tc(t,e){if(1===t.length){let n=0;const i=e[n++];let r;for(;!r||i.equals(r);)if(r=e[n++],!r)return 1/0;for(;n<e.length;n++){const o=e[n],a=t[0],s=r.sub(i),l=o.sub(i),c=a.sub(i),u=Ql(s,s),h=Ql(s,l),d=Ql(l,l),p=Ql(c,s),f=Ql(c,l),m=u*d-h*h,g=(d*p-h*f)/m,_=(u*f-h*p)/m,y=i.z*(1-g-_)+r.z*g+o.z*_;if(isFinite(y))return y}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}function ec(t){const e=new r(t[0],t[1]);return e.z=t[2],e}function nc(t,e,n,i,r,o,a,s){const l=a*r.getElevationAt(t,e,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(t,e,n){const i=Math.floor(e[0]/8),r=Math.floor(e[1]/8),o=10*(e[0]-8*i),a=10*(e[1]-8*r),s=t.getElevationAt(i,r,!0,!0),l=t.getMeterToDEM(n),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=t.tileCoordToPixel(i,r),d=2*c+1,p=2*u+1,f=function(t,e,n,i,r){return[t.getElevationAtPixel(e,n,!0),t.getElevationAtPixel(e+r,n,!0),t.getElevationAtPixel(e,n+r,!0),t.getElevationAtPixel(e+i,n+r,!0)]}(t,h.x-c,h.y-u,d,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),_=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),y=Math.min(.25,.5*l*(m+g)/d),v=Math.min(.25,.5*l*_/p);return s+Math.max(y*o,v*a)}(r,o,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+i,l+n+2):l+i}}const ic=So([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:rc}=ic,oc=So([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ac}=oc,sc=ql.VectorTileFeature.types,lc=Math.cos(Math.PI/180*37.5);class cc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new Lo,this.layoutVertexArray2=new Do,this.indexArray=new Yo,this.programConfigurations=new Da(t.layers,t.zoom),this.segments=new Ya,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=Il("line",this.layers,e);const i=this.layers[0].layout.get("line-sort-key"),r=[];for(const{feature:e,id:o,index:a,sourceLayerIndex:s}of t){const t=this.layers[0]._featureFilter.needGeometry,l=Ha(e,t);if(!this.layers[0]._featureFilter.filter(new ao(this.zoom),l,n))continue;const c=i?i.evaluate(l,{},n):void 0,u={id:o,properties:e.properties,type:e.type,sourceLayerIndex:s,index:a,geometry:t?l.geometry:qa(e),patterns:{},sortKey:c};r.push(u)}i&&r.sort(((t,e)=>t.sortKey-e.sortKey));const{lineAtlas:o,featureIndex:a}=e,s=this.addConstantDashes(o);for(const i of r){const{geometry:r,index:l,sourceLayerIndex:c}=i;if(s&&this.addFeatureDashes(i,o),this.hasPattern){const t=Ll("line",this.layers,i,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(i,r,l,n,o.positions);a.insert(t[l].feature,r,l,c,this.index)}}addConstantDashes(t){let e=!1;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,r=n.layout.get("line-cap").value;if("constant"!==i.kind||"constant"!==r.kind)e=!0;else{const e=r.value,n=i.value;if(!n)continue;t.addDash(n.from,e),t.addDash(n.to,e),n.other&&t.addDash(n.other,e)}}return e}addFeatureDashes(t,e){const n=this.zoom;for(const i of this.layers){const r=i.paint.get("line-dasharray").value,o=i.layout.get("line-cap").value;if("constant"===r.kind&&"constant"===o.kind)continue;let a,s,l,c,u,h;if("constant"===r.kind){const t=r.value;if(!t)continue;a=t.other||t.to,s=t.to,l=t.from}else a=r.evaluate({zoom:n-1},t),s=r.evaluate({zoom:n},t),l=r.evaluate({zoom:n+1},t);"constant"===o.kind?c=u=h=o.value:(c=o.evaluate({zoom:n-1},t),u=o.evaluate({zoom:n},t),h=o.evaluate({zoom:n+1},t)),e.addDash(a,c),e.addDash(s,u),e.addDash(l,h);const d=e.getKey(a,c),p=e.getKey(s,u),f=e.getKey(l,h);t.patterns[i.id]={min:d,mid:p,max:f}}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const t of this.patternFeatures)this.addFeature(t,t.geometry,t.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,ac)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rc),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,i,r){const o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap").evaluate(t,{}),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const n of e)this.addLine(n,t,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,r,i)}addLine(t,e,n,i,r,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===sc[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(a?3:2))return;"bevel"===n&&(r=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,a&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let e=l;e<s;e++){if(p=e===s-1?a?t[l+1]:void 0:t[e+1],p&&t[e].equals(p))continue;m&&(f=m),h&&(d=h),h=t[e],m=p?p.sub(h)._unit()._perp():f,f=f||m;let g=f.add(m);0===g.x&&0===g.y||g._unit();const _=f.x*m.x+f.y*m.y,y=g.x*m.x+g.y*m.y,v=0!==y?1/y:1/0,b=2*Math.sqrt(2-2*y),x=y<lc&&d&&p,w=f.x*m.y-f.y*m.x>0;if(x&&e>l){const t=h.dist(d);if(t>2*c){const e=h.sub(h.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,f,0,0,u),d=e}}const E=d&&p;let M=E?n:a?"butt":i;if(E&&"round"===M&&(v<o?M="miter":v<=2&&(M="fakeround")),"miter"===M&&v>r&&(M="bevel"),"bevel"===M&&(v>2&&(M="flipbevel"),v<r&&(M="miter")),d&&this.updateDistance(d,h),"miter"===M)g._mult(v),this.addCurrentVertex(h,g,0,0,u);else if("flipbevel"===M){if(v>100)g=m.mult(-1);else{const t=v*f.add(m).mag()/f.sub(m).mag();g._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,g,0,0,u),this.addCurrentVertex(h,g.mult(-1),0,0,u)}else if("bevel"===M||"fakeround"===M){const t=-Math.sqrt(v*v-1),e=w?t:0,n=w?0:t;if(d&&this.addCurrentVertex(h,f,e,n,u),"fakeround"===M){const t=Math.round(180*b/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*t*t+(.848013+_*(.215638*_-1.06021)))}const i=m.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,i.x,i.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-e,-n,u)}else if("butt"===M)this.addCurrentVertex(h,g,0,0,u);else if("square"===M){const t=d?1:-1;d||this.addCurrentVertex(h,g,t,t,u),this.addCurrentVertex(h,g,0,0,u),d&&this.addCurrentVertex(h,g,t,t,u)}else"round"===M&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(x&&e<s-1){const t=h.dist(p);if(t>2*c){const e=h.add(p.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}}}addCurrentVertex(t,e,n,i,r,o=!1){const a=e.y*i-e.x,s=-e.y-e.x*i;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,r),this.addHalfVertex(t,a,s,o,!0,-i,r)}addHalfVertex({x:t,y:e},n,i,r,o,a,s){this.layoutVertexArray.emplaceBack((t<<1)+(r?1:0),(e<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*i)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}sr("LineBucket",cc,{omit:["layers","patternFeatures"]});const uc=new xo({"line-cap":new _o(Ft.layout_line["line-cap"]),"line-join":new _o(Ft.layout_line["line-join"]),"line-miter-limit":new go(Ft.layout_line["line-miter-limit"]),"line-round-limit":new go(Ft.layout_line["line-round-limit"]),"line-sort-key":new _o(Ft.layout_line["line-sort-key"])});var hc={paint:new xo({"line-opacity":new _o(Ft.paint_line["line-opacity"]),"line-color":new _o(Ft.paint_line["line-color"]),"line-translate":new go(Ft.paint_line["line-translate"]),"line-translate-anchor":new go(Ft.paint_line["line-translate-anchor"]),"line-width":new _o(Ft.paint_line["line-width"]),"line-gap-width":new _o(Ft.paint_line["line-gap-width"]),"line-offset":new _o(Ft.paint_line["line-offset"]),"line-blur":new _o(Ft.paint_line["line-blur"]),"line-dasharray":new yo(Ft.paint_line["line-dasharray"]),"line-pattern":new yo(Ft.paint_line["line-pattern"]),"line-gradient":new bo(Ft.paint_line["line-gradient"])}),layout:uc};const dc=new class extends _o{possiblyEvaluate(t,e){return e=new ao(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,i){return e=v({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,i)}}(hc.paint.properties["line-width"].specification);function pc(t,e){return e>0?e+2*t:t}dc.useIntegerZoom=!0;const fc=So([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mc=So([{name:"a_projected_pos",components:3,type:"Float32"}],4);So([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const gc=So([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),_c=So([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);So([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const yc=So([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),vc=So([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);So([{name:"triangle",components:3,type:"Uint16"}]),So([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),So([{type:"Float32",name:"anchorX"},{type:"Float32",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),So([{type:"Float32",name:"offsetX"}]),So([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var bc=24;const xc=128;function wc(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new ao(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:i}=n;let r=0;for(;r<e.length&&e[r]<=t;)r++;r=Math.max(0,r-1);let o=r;for(;o<e.length&&e[o]<t+1;)o++;o=Math.min(e.length-1,o);const a=e[r],s=e[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:i}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new ao(a)),maxSize:n.evaluate(new ao(s)),interpolationType:i}}}function Ec(t,{uSize:e,uSizeT:n},{lowerSize:i,upperSize:r}){return"source"===t.kind?i/xc:"composite"===t.kind?nn(i/xc,r/xc,n):e}function Mc(t,e){let n=0,i=0;if("constant"===t.kind)i=t.layoutSize;else if("source"!==t.kind){const{interpolationType:r,minZoom:o,maxZoom:a}=t,s=r?m(wn.interpolationFactor(r,e,o,a),0,1):0;"camera"===t.kind?i=nn(t.minSize,t.maxSize,s):n=s}return{uSizeT:n,uSize:i}}var Tc=Object.freeze({__proto__:null,getSizeData:wc,evaluateSizeForFeature:Ec,evaluateSizeForZoom:Mc,SIZE_PACK_FACTOR:xc});function Sc(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const i=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?t=t.toLocaleUpperCase():"lowercase"===i&&(t=t.toLocaleLowerCase()),oo.applyArabicShaping&&(t=oo.applyArabicShaping(t)),t}(t.text,e,n)})),t}const kc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function Cc(t){return"︶"===t||"﹈"===t||"︸"===t||"﹄"===t||"﹂"===t||"︾"===t||"︼"===t||"︺"===t||"︘"===t||"﹀"===t||"︐"===t||"︓"===t||"︔"===t||"｀"===t||"￣"===t||"︑"===t||"︒"===t}function Ic(t){return"︵"===t||"﹇"===t||"︷"===t||"﹃"===t||"﹁"===t||"︽"===t||"︻"===t||"︹"===t||"︗"===t||"︿"===t}var Lc=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},Dc=function(t,e,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[n+p]=255&a,p+=f,a/=256,c-=8);t[n+p-f]|=128*m},Ac=Pc;function Pc(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Pc.Varint=0,Pc.Fixed64=1,Pc.Bytes=2,Pc.Fixed32=5;var zc=4294967296,Nc=1/zc,Rc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Oc(t){return t.type===Pc.Bytes?t.readVarint()+t.pos:t.pos+1}function Fc(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Bc(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function Uc(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function Yc(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function jc(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Vc(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Gc(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function qc(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function Hc(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function $c(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Zc(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Wc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Xc(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Kc(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function Jc(t,e,n){e.glyphs=[],1===t&&n.readMessage(Qc,e)}function Qc(t,e,n){if(3===t){const{id:t,bitmap:i,width:r,height:o,left:a,top:s,advance:l}=n.readMessage(tu,{});e.glyphs.push({id:t,bitmap:new js({width:r+6,height:o+6},i),metrics:{width:r,height:o,left:a,top:s,advance:l}})}else 4===t?e.ascender=n.readSVarint():5===t&&(e.descender=n.readSVarint())}function tu(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function eu(t){let e=0,n=0;for(const i of t)e+=i.w*i.h,n=Math.max(n,i.w);t.sort(((t,e)=>e.h-t.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let r=0,o=0;for(const e of t)for(let t=i.length-1;t>=0;t--){const n=i[t];if(!(e.w>n.w||e.h>n.h)){if(e.x=n.x,e.y=n.y,o=Math.max(o,e.y+e.h),r=Math.max(r,e.x+e.w),e.w===n.w&&e.h===n.h){const e=i.pop();t<i.length&&(i[t]=e)}else e.h===n.h?(n.x+=e.w,n.w-=e.w):e.w===n.w?(n.y+=e.h,n.h-=e.h):(i.push({x:n.x+e.w,y:n.y,w:n.w-e.w,h:e.h}),n.y+=e.h,n.h-=e.h);break}}return{w:r,h:o,fill:e/(r*o)||0}}Pc.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,o=this.pos;this.type=7&i,t(r,e,this),this.pos===o&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Wc(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Kc(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Wc(this.buf,this.pos)+Wc(this.buf,this.pos+4)*zc;return this.pos+=8,t},readSFixed64:function(){var t=Wc(this.buf,this.pos)+Kc(this.buf,this.pos+4)*zc;return this.pos+=8,t},readFloat:function(){var t=Lc(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Lc(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return e=127&(n=i[this.pos++]),n<128?e:(e|=(127&(n=i[this.pos++]))<<7,n<128?e:(e|=(127&(n=i[this.pos++]))<<14,n<128?e:(e|=(127&(n=i[this.pos++]))<<21,n<128?e:function(t,e,n){var i,r,o=n.buf;if(i=(112&(r=o[n.pos++]))>>4,r<128)return Fc(t,i,e);if(i|=(127&(r=o[n.pos++]))<<3,r<128)return Fc(t,i,e);if(i|=(127&(r=o[n.pos++]))<<10,r<128)return Fc(t,i,e);if(i|=(127&(r=o[n.pos++]))<<17,r<128)return Fc(t,i,e);if(i|=(127&(r=o[n.pos++]))<<24,r<128)return Fc(t,i,e);if(i|=(1&(r=o[n.pos++]))<<31,r<128)return Fc(t,i,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=i[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Rc?function(t,e,n){return Rc.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var i="",r=e;r<n;){var o,a,s,l=t[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(o=t[r+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=t[r+2],128==(192&(o=t[r+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=t[r+2],s=t[r+3],128==(192&(o=t[r+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),r+=u}return i}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==Pc.Bytes)return t.push(this.readVarint(e));var n=Oc(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==Pc.Bytes)return t.push(this.readSVarint());var e=Oc(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==Pc.Bytes)return t.push(this.readBoolean());var e=Oc(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==Pc.Bytes)return t.push(this.readFloat());var e=Oc(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==Pc.Bytes)return t.push(this.readDouble());var e=Oc(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==Pc.Bytes)return t.push(this.readFixed32());var e=Oc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==Pc.Bytes)return t.push(this.readSFixed32());var e=Oc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==Pc.Bytes)return t.push(this.readFixed64());var e=Oc(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==Pc.Bytes)return t.push(this.readSFixed64());var e=Oc(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Pc.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pc.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pc.Fixed32)this.pos+=4;else{if(e!==Pc.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Xc(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Xc(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Xc(this.buf,-1&t,this.pos),Xc(this.buf,Math.floor(t*Nc),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Xc(this.buf,-1&t,this.pos),Xc(this.buf,Math.floor(t*Nc),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(i=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var i,r,o=0;o<e.length;o++){if((i=e.charCodeAt(o))>55295&&i<57344){if(!r){i>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&Bc(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Dc(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Dc(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&Bc(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,Pc.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,Uc,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,Yc,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Gc,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,jc,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Vc,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,qc,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,Hc,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,$c,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Zc,e)},writeBytesField:function(t,e){this.writeTag(t,Pc.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Pc.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Pc.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Pc.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Pc.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Pc.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Pc.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Pc.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Pc.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Pc.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class nu{constructor(t,{pixelRatio:e,version:n,stretchX:i,stretchY:r,content:o}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=i,this.stretchY=r,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class iu{constructor(t,e){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(t,n,r),this.addImages(e,i,r);const{w:o,h:a}=eu(r),s=new Vs({width:o||1,height:a||1});for(const e in t){const i=t[e],r=n[e].paddedRect;Vs.copy(i.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},i.data)}for(const t in e){const n=e[t],r=i[t].paddedRect,o=r.x+1,a=r.y+1,l=n.data.width,c=n.data.height;Vs.copy(n.data,s,{x:0,y:0},{x:o,y:a},n.data),Vs.copy(n.data,s,{x:0,y:c-1},{x:o,y:a-1},{width:l,height:1}),Vs.copy(n.data,s,{x:0,y:0},{x:o,y:a+c},{width:l,height:1}),Vs.copy(n.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:c}),Vs.copy(n.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=i}addImages(t,e,n){for(const i in t){const r=t[i],o={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(o),e[i]=new nu(o,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[i,r]=t.tl;n.update(e.data,void 0,{x:i,y:r})}}sr("ImagePosition",nu),sr("ImageAtlas",iu);const ru={horizontal:1,vertical:2,horizontalOnly:3};class ou{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new ou;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new ou;return e.imageName=t,e}}class au{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new au;for(let i=0;i<t.sections.length;i++){const r=t.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(t,e){let n="";for(let i=0;i<t.length;i++){const r=t.charCodeAt(i+1)||null,o=t.charCodeAt(i-1)||null;n+=!e&&(r&&Gr(r)&&!kc[t[i+1]]||o&&Gr(o)&&!kc[t[i-1]])||!kc[t[i]]?t[i]:kc[t[i]]}return n}(this.text,t)}trim(){let t=0;for(let e=0;e<this.text.length&&lu[this.text.charCodeAt(e)];e++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&lu[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new au;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(ou.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let e=0;e<t.text.length;++e)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void D("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(ou.forImage(e)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function su(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=au.fromFeature(t,r);let _;h===ru.vertical&&g.verticalizePunctuation(d);const{processBidirectionalText:y,processStyledBidirectionalText:v}=oo;if(y&&1===g.sections.length){_=[];const t=y(g.toString(),mu(g,c,o,e,i,p,f));for(const e of t){const t=new au;t.text=e,t.sections=g.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);_.push(t)}}else if(v){_=[];const t=v(g.text,g.sectionIndex,mu(g,c,o,e,i,p,f));for(const e of t){const t=new au;t.text=e[0],t.sectionIndex=e[1],t.sections=g.sections,_.push(t)}}else _=function(t,e){const n=[],i=t.text;let r=0;for(const i of e)n.push(t.substring(r,i)),r=i;return r<i.length&&n.push(t.substring(r,i.length)),n}(g,mu(g,c,o,e,i,p,f));const b=[],x={positionedLines:b,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(t,e,n,i,r,o,a,s,l,c,u,h){let d=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const t of r){const n=t.getSections();for(const t of n){if(t.imageName)continue;const n=e[t.fontStack];if(n&&(g=void 0!==n.ascender&&void 0!==n.descender,!g))break}if(!g)break}let _=0;for(const a of r){a.trim();const r=a.getMaxScale(),s=(r-1)*bc,v={positionedGlyphs:[],lineOffset:0};t.positionedLines[_]=v;const b=v.positionedGlyphs;let x=0;if(!a.length()){p+=o,++_;continue}let w=0,E=0;for(let o=0;o<a.length();o++){const s=a.getSection(o),f=a.getSectionIndex(o),m=a.getCharCode(o);let _=s.scale,v=null,M=null,T=null,S=bc,k=0;const C=!(l===ru.horizontal||!u&&!Vr(m)||u&&(lu[m]||(y=m,pr(y)||fr(y)||mr(y)||zr(y)||Fr(y))));if(s.imageName){const e=i[s.imageName];if(!e)continue;T=s.imageName,t.iconsInText=t.iconsInText||!0,M=e.paddedRect;const n=e.displaySize;_=_*bc/h,v={width:n[0],height:n[1],left:1,top:-3,advance:C?n[1]:n[0],localGlyph:!1},k=g?-v.height*_:r*bc-17-n[1]*_,S=v.advance;const o=(C?n[0]:n[1])*_-bc*r;o>0&&o>x&&(x=o)}else{const t=n[s.fontStack];if(!t)continue;t[m]&&(M=t[m]);const i=e[s.fontStack];if(!i)continue;const o=i.glyphs[m];if(!o)continue;if(v=o.metrics,S=8203!==m?bc:0,g){const t=void 0!==i.ascender?Math.abs(i.ascender):0,e=void 0!==i.descender?Math.abs(i.descender):0,n=(t+e)*_;w<n&&(w=n,E=(t-e)/2*_),k=-t*_}else k=(r-_)*bc-17}C?(t.verticalizable=!0,b.push({glyph:m,imageName:T,x:d,y:p+k,vertical:C,scale:_,localGlyph:v.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:v,rect:M}),d+=S*_+c):(b.push({glyph:m,imageName:T,x:d,y:p+k,vertical:C,scale:_,localGlyph:v.localGlyph,fontStack:s.fontStack,sectionIndex:f,metrics:v,rect:M}),d+=v.advance*_+c)}0!==b.length&&(f=Math.max(d-c,f),g?_u(b,m,x,E,o*r/2):_u(b,m,x,0,o/2)),d=0;const M=o*r+x;v.lineOffset=Math.max(x,s),p+=M,++_}var y;const v=p,{horizontalAlign:b,verticalAlign:x}=gu(a);(function(t,e,n,i,r,o){const a=(e-n)*r,s=-o*i;for(const e of t)for(const t of e.positionedGlyphs)t.x+=a,t.y+=s})(t.positionedLines,m,b,x,f,v),t.top+=-x*v,t.bottom=t.top+v,t.left+=-b*f,t.right=t.left+f,t.hasBaseline=g}(x,e,n,i,_,a,s,l,h,c,d,m),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&x}const lu={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function uu(t,e,n,i,r,o){if(e.imageName){const t=i[e.imageName];return t?t.displaySize[0]*e.scale*bc/o+r:0}{const i=n[e.fontStack],o=i&&i.glyphs[t];return o?o.metrics.advance*e.scale+r:0}}function hu(t,e,n,i){const r=Math.pow(t-e,2);return i?t<e?r/2:2*r:r+Math.abs(n)*n}function du(t,e,n){let i=0;return 10===t&&(i-=1e4),n&&(i+=150),40!==t&&65288!==t||(i+=50),41!==e&&65289!==e||(i+=50),i}function pu(t,e,n,i,r,o){let a=null,s=hu(e,n,r,o);for(const t of i){const i=hu(e-t.x,n,r,o)+t.badness;i<=s&&(a=t,s=i)}return{index:t,x:e,priorBreak:a,badness:s}}function fu(t){return t?fu(t.priorBreak).concat(t.index):[]}function mu(t,e,n,i,r,o,a){if("point"!==o)return[];if(!t)return[];const s=[],l=function(t,e,n,i,r,o){let a=0;for(let n=0;n<t.length();n++){const s=t.getSection(n);a+=uu(t.getCharCode(n),s,i,r,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,i,r,a),c=t.text.indexOf("​")>=0;let u=0;for(let n=0;n<t.length();n++){const o=t.getSection(n),d=t.getCharCode(n);if(lu[d]||(u+=uu(d,o,i,r,e,a)),n<t.length()-1){const e=!((h=d)<11904||!(Er(h)||wr(h)||Rr(h)||Pr(h)||kr(h)||gr(h)||Mr(h)||vr(h)||Cr(h)||Ir(h)||Sr(h)||Br(h)||br(h)||yr(h)||_r(h)||Tr(h)||xr(h)||Nr(h)||Dr(h)||Lr(h)));(cu[d]||e||o.imageName)&&s.push(pu(n+1,u,l,s,du(d,t.getCharCode(n+1),e&&c),!1))}}var h;return fu(pu(t.length(),u,l,s,0,!0))}function gu(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function _u(t,e,n,i,r){if(!(e||n||i||r))return;const o=t.length-1,a=t[o],s=(a.x+a.metrics.advance*a.scale)*e;for(let e=0;e<=o;e++)t[e].x-=s,t[e].y+=n+i+r}function yu(t,e,n){const{horizontalAlign:i,verticalAlign:r}=gu(n),o=e[0]-t.displaySize[0]*i,a=e[1]-t.displaySize[1]*r;return{image:t,top:a,bottom:a+t.displaySize[1],left:o,right:o+t.displaySize[0]}}function vu(t,e,n,i,r,o){const a=t.image;let s;if(a.content){const t=a.content,e=a.pixelRatio||1;s=[t[0]/e,t[1]/e,a.displaySize[0]-t[2]/e,a.displaySize[1]-t[3]/e]}const l=e.left*o,c=e.right*o;let u,h,d,p;"width"===n||"both"===n?(p=r[0]+l-i[3],h=r[0]+c+i[1]):(p=r[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=e.top*o,m=e.bottom*o;return"height"===n||"both"===n?(u=r[1]+f-i[0],d=r[1]+m+i[2]):(u=r[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{image:a,top:u,right:h,bottom:d,left:p,collisionPadding:s}}class bu extends r{constructor(t,e,n,i){super(t,e),this.angle=n,void 0!==i&&(this.segment=i)}clone(){return new bu(this.x,this.y,this.angle,this.segment)}}function xu(t,e,n,i,r){if(void 0===e.segment)return!0;let o=e,a=e.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;const l=[];let c=0;for(;s<n/2;){const e=t[a],n=t[a+1];if(!n)return!1;let o=t[a-1].angleTo(e)-e.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>i;)c-=l.shift().angleDelta;if(c>r)return!1;a++,s+=e.dist(n)}return!0}function wu(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Eu(t,e,n){return t?.6*e*n:0}function Mu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function Tu(t,e,n,i,r,o){const a=Eu(n,r,o),s=Mu(n,i)*o;let l=0;const c=wu(t)/2;for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1],o=i.dist(r);if(l+o>c){const u=(c-l)/o,h=nn(i.x,r.x,u),d=nn(i.y,r.y,u),p=new bu(h,d,r.angleTo(i),n);return!a||xu(t,p,s,a,e)?p:void 0}l+=o}}function Su(t,e,n,i,r,o,a,s,l){const c=Eu(i,o,a),u=Mu(i,r),h=u*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),ku(t,d?e/2*s%e:(u/2+2*o)*a*s%e,e,c,n,h,d,!1,l)}function ku(t,e,n,i,r,o,a,s,l){const c=o/2,u=wu(t);let h=0,d=e-n,p=[];for(let e=0;e<t.length-1;e++){const a=t[e],s=t[e+1],f=a.dist(s),m=s.angleTo(a);for(;d+n<h+f;){d+=n;const g=(d-h)/f,_=nn(a.x,s.x,g),y=nn(a.y,s.y,g);if(_>=0&&_<l&&y>=0&&y<l&&d-c>=0&&d+c<=u){const n=new bu(_,y,m,e);n._round(),i&&!xu(t,n,o,i,r)||p.push(n)}}h+=f}return s||p.length||a||(p=ku(t,h/2,n,i,r,o,a,!0,l)),p}function Cu(t,e,n,i,o){const a=[];for(let s=0;s<t.length;s++){const l=t[s];let c;for(let t=0;t<l.length-1;t++){let s=l[t],u=l[t+1];s.x<e&&u.x<e||(s.x<e?s=new r(e,s.y+(e-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<e&&(u=new r(e,s.y+(e-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<n&&u.y<n||(s.y<n?s=new r(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y<n&&(u=new r(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),s.x>=i&&u.x>=i||(s.x>=i?s=new r(i,s.y+(i-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=i&&(u=new r(i,s.y+(i-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=o&&u.y>=o||(s.y>=o?s=new r(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round():u.y>=o&&(u=new r(s.x+(o-s.y)/(u.y-s.y)*(u.x-s.x),o)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}sr("Anchor",bu);var Iu=Au,Lu=Au,Du=1e20;function Au(t,e,n,i,r,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Pu(t,e,n,i,r,o){for(var a=0;a<e;a++)zu(t,a,e,n,i,r,o);for(var s=0;s<n;s++)zu(t,s*e,1,e,i,r,o)}function zu(t,e,n,i,r,o,a){var s,l,c,u;for(o[0]=0,a[0]=-Du,a[1]=Du,s=0;s<i;s++)r[s]=t[e+s*n];for(s=1,l=0,c=0;s<i;s++){do{c=(r[s]-r[u=o[l]]+s*s-u*u)/(s-u)/2}while(c<=a[l]&&--l>-1);o[++l]=s,a[l]=c,a[l+1]=Du}for(s=0,l=0;s<i;s++){for(;a[l+1]<s;)l++;t[e+s*n]=r[u=o[l]]+(s-u)*(s-u)}}Au.prototype._draw=function(t,e){var n,i,r,o,a,s,l,c,u,h=this.ctx.measureText(t),d=h.width,p=2*this.buffer;e&&this.useMetrics?(a=Math.floor(h.actualBoundingBoxAscent),c=this.buffer+Math.ceil(h.actualBoundingBoxAscent),s=this.buffer,l=this.buffer,n=(i=Math.min(this.size,Math.ceil(h.actualBoundingBoxRight-h.actualBoundingBoxLeft)))+p,r=(o=Math.min(this.size-s,Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent)))+p,this.ctx.textBaseline="alphabetic"):(n=i=this.size,r=o=this.size,a=19*this.fontSize/24,s=l=0,c=this.middle,this.ctx.textBaseline="middle"),i&&o&&(this.ctx.clearRect(l,s,i,o),this.ctx.fillText(t,this.buffer,c),u=this.ctx.getImageData(l,s,i,o));var f=new Uint8ClampedArray(n*r);return function(t,e,n,i,r,o,a){o.fill(Du,0,e*n),a.fill(0,0,e*n);for(var s=(e-i)/2,l=0;l<r;l++)for(var c=0;c<i;c++){var u=(l+s)*e+c+s,h=t.data[4*(l*i+c)+3]/255;if(1===h)o[u]=0,a[u]=Du;else if(0===h)o[u]=Du,a[u]=0;else{var d=Math.max(0,.5-h),p=Math.max(0,h-.5);o[u]=d*d,a[u]=p*p}}}(u,n,r,i,o,this.gridOuter,this.gridInner),Pu(this.gridOuter,n,r,this.f,this.v,this.z),Pu(this.gridInner,n,r,this.f,this.v,this.z),function(t,e,n,i,r,o,a){for(var s=0;s<e*n;s++){var l=Math.sqrt(i[s])-Math.sqrt(r[s]);t[s]=Math.round(255-255*(l/o+a))}}(f,n,r,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:f,metrics:{width:i,height:o,sdfWidth:n,sdfHeight:r,top:a,left:0,advance:d}}},Au.prototype.draw=function(t){return this._draw(t,!1).data},Au.prototype.drawWithMetrics=function(t){return this._draw(t,!0)},Iu.default=Lu;const Nu={none:0,ideographs:1,all:2};class Ru{constructor(t,e,n){this.requestManager=t,this.localGlyphMode=e,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,e){const n=[];for(const e in t)for(const i of t[e])n.push({stack:e,id:i});_(n,(({stack:t,id:e},n)=>{let i=this.entries[t];i||(i=this.entries[t]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let r=i.glyphs[e];if(void 0!==r)return void n(null,{stack:t,id:e,glyph:r});if(r=this._tinySDF(i,t,e),r)return i.glyphs[e]=r,void n(null,{stack:t,id:e,glyph:r});const o=Math.floor(e/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(i.ranges[o])return void n(null,{stack:t,id:e,glyph:r});let a=i.requests[o];a||(a=i.requests[o]=[],Ru.loadGlyphRange(t,o,this.url,this.requestManager,((t,e)=>{if(e){i.ascender=e.ascender,i.descender=e.descender;for(const t in e.glyphs)this._doesCharSupportLocalGlyph(+t)||(i.glyphs[+t]=e.glyphs[+t]);i.ranges[o]=!0}for(const n of a)n(t,e);delete i.requests[o]}))),a.push(((i,r)=>{i?n(i):r&&n(null,{stack:t,id:e,glyph:r.glyphs[e]||null})}))}),((t,n)=>{if(t)e(t);else if(n){const t={};for(const{stack:e,id:i,glyph:r}of n)void 0===t[e]&&(t[e]={}),void 0===t[e].glyphs&&(t[e].glyphs={}),t[e].glyphs[i]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics},t[e].ascender=this.entries[e].ascender,t[e].descender=this.entries[e].descender;e(null,t)}}))}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==Nu.none&&(this.localGlyphMode===Nu.all?!!this.localFontFamily:!!this.localFontFamily&&(Ir(t)||Ar(t)||br(t)||xr(t))||vr(t))}_tinySDF(t,e,n){const i=this.localFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(n))return;let r=t.tinySDF;if(!r){let n="400";/bold/i.test(e)?n="900":/medium/i.test(e)?n="500":/light/i.test(e)&&(n="200"),r=t.tinySDF=new Ru.TinySDF(48,6,16,.25,i,n)}if(this.localGlyphs[r.fontWeight][n])return this.localGlyphs[r.fontWeight][n];const{data:o,metrics:a}=r.drawWithMetrics(String.fromCharCode(n)),{sdfWidth:s,sdfHeight:l,width:c,height:u,left:h,top:d,advance:p}=a;return this.localGlyphs[r.fontWeight][n]={id:n,bitmap:new js({width:s,height:l},o),metrics:{width:c/2,height:u/2,left:h/2,top:d/2-27,advance:p/2,localGlyph:!0}}}}function Ou(t,e,n,i){const o=[],a=t.image,s=a.pixelRatio,l=a.paddedRect.w-2,c=a.paddedRect.h-2,u=t.right-t.left,h=t.bottom-t.top,d=a.stretchX||[[0,l]],p=a.stretchY||[[0,c]],f=(t,e)=>t+e[1]-e[0],m=d.reduce(f,0),g=p.reduce(f,0),_=l-m,y=c-g;let v=0,b=m,x=0,w=g,E=0,M=_,T=0,S=y;if(a.content&&i){const t=a.content;v=Fu(d,0,t[0]),x=Fu(p,0,t[1]),b=Fu(d,t[0],t[2]),w=Fu(p,t[1],t[3]),E=t[0]-v,T=t[1]-x,M=t[2]-t[0]-b,S=t[3]-t[1]-w}const k=(i,o,l,c)=>{const d=Uu(i.stretch-v,b,u,t.left),p=Yu(i.fixed-E,M,i.stretch,m),f=Uu(o.stretch-x,w,h,t.top),_=Yu(o.fixed-T,S,o.stretch,g),y=Uu(l.stretch-v,b,u,t.left),k=Yu(l.fixed-E,M,l.stretch,m),C=Uu(c.stretch-x,w,h,t.top),I=Yu(c.fixed-T,S,c.stretch,g),L=new r(d,f),D=new r(y,f),A=new r(y,C),P=new r(d,C),z=new r(p/s,_/s),N=new r(k/s,I/s),R=e*Math.PI/180;if(R){const t=Math.sin(R),e=Math.cos(R),n=[e,-t,t,e];L._matMult(n),D._matMult(n),P._matMult(n),A._matMult(n)}const O=i.stretch+i.fixed,F=o.stretch+o.fixed;return{tl:L,tr:D,bl:P,br:A,tex:{x:a.paddedRect.x+1+O,y:a.paddedRect.y+1+F,w:l.stretch+l.fixed-O,h:c.stretch+c.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:N,minFontScaleX:M/s/u,minFontScaleY:S/s/h,isSDF:n}};if(i&&(a.stretchX||a.stretchY)){const t=Bu(d,_,m),e=Bu(p,y,g);for(let n=0;n<t.length-1;n++){const i=t[n],r=t[n+1];for(let t=0;t<e.length-1;t++)o.push(k(i,e[t],r,e[t+1]))}}else o.push(k({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function Fu(t,e,n){let i=0;for(const r of t)i+=Math.max(e,Math.min(n,r[1]))-Math.max(e,Math.min(n,r[0]));return i}function Bu(t,e,n){const i=[{fixed:-1,stretch:0}];for(const[e,n]of t){const t=i[i.length-1];i.push({fixed:e-t.stretch,stretch:t.stretch}),i.push({fixed:e-t.stretch,stretch:t.stretch+(n-e)})}return i.push({fixed:e+1,stretch:n}),i}function Uu(t,e,n,i){return t/e*n+i}function Yu(t,e,n,i){return t-e*n/i}function ju(t,e,n,i){const r=e+t.positionedLines[i].lineOffset;return 0===i?n+r/2:n+(r+(e+t.positionedLines[i-1].lineOffset))/2}Ru.loadGlyphRange=function(t,e,n,i,r){const o=256*e,a=o+255,s=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",t).replace("{range}",`${o}-${a}`),xt.Glyphs);Tt(s,((t,e)=>{if(t)r(t);else if(e){const t={},n=function(t){return new Ac(t).readFields(Jc,{})}(e);for(const e of n.glyphs)t[e.id]=e;r(null,{glyphs:t,ascender:n.ascender,descender:n.descender})}}))},Ru.TinySDF=Iu;class Vu{constructor(t=[],e=Gu){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const a=i+1;if(a<this.length&&n(e[a],o)<0&&(i=a,o=e[a]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function Gu(t,e){return t<e?-1:t>e?1:0}function qu(t,e=1,n=!1){let i=1/0,o=1/0,a=-1/0,s=-1/0;const l=t[0];for(let t=0;t<l.length;t++){const e=l[t];(!t||e.x<i)&&(i=e.x),(!t||e.y<o)&&(o=e.y),(!t||e.x>a)&&(a=e.x),(!t||e.y>s)&&(s=e.y)}const c=Math.min(a-i,s-o);let u=c/2;const h=new Vu([],Hu);if(0===c)return new r(i,o);for(let e=i;e<a;e+=c)for(let n=o;n<s;n+=c)h.push(new $u(e+u,n+u,u,t));let d=function(t){let e=0,n=0,i=0;const r=t[0];for(let t=0,o=r.length,a=o-1;t<o;a=t++){const o=r[t],s=r[a],l=o.x*s.y-s.x*o.y;n+=(o.x+s.x)*l,i+=(o.y+s.y)*l,e+=3*l}return new $u(n/e,i/e,0,t)}(t),p=h.length;for(;h.length;){const i=h.pop();(i.d>d.d||!d.d)&&(d=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-d.d<=e||(u=i.h/2,h.push(new $u(i.p.x-u,i.p.y-u,u,t)),h.push(new $u(i.p.x+u,i.p.y-u,u,t)),h.push(new $u(i.p.x-u,i.p.y+u,u,t)),h.push(new $u(i.p.x+u,i.p.y+u,u,t)),p+=4)}return n&&(console.log(`num probes: ${p}`),console.log(`best distance: ${d.d}`)),d.p}function Hu(t,e){return e.max-t.max}function $u(t,e,n,i){this.p=new r(t,e),this.h=n,this.d=function(t,e){let n=!1,i=1/0;for(let r=0;r<e.length;r++){const o=e[r];for(let e=0,r=o.length,a=r-1;e<r;a=e++){const r=o[e],s=o[a];r.y>t.y!=s.y>t.y&&t.x<(s.x-r.x)*(t.y-r.y)/(s.y-r.y)+r.x&&(n=!n),i=Math.min(i,ns(t,r,s))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}const Zu=Number.POSITIVE_INFINITY,Wu=Math.sqrt(2);function Xu(t,e){return e[1]!==Zu?function(t,e,n){let i=0,r=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(t){case"top-right":case"bottom-right":case"right":i=-e;break;case"top-left":case"bottom-left":case"left":i=e}return[i,r]}(t,e[0],e[1]):function(t,e){let n=0,i=0;e<0&&(e=0);const r=e/Wu;switch(t){case"top-right":case"top-left":i=r-7;break;case"bottom-right":case"bottom-left":i=7-r;break;case"bottom":i=7-e;break;case"top":i=e-7}switch(t){case"top-right":case"bottom-right":n=-r;break;case"top-left":case"bottom-left":n=r;break;case"left":n=e;break;case"right":n=-e}return[n,i]}(t,e[0])}function Ku(t,e,n,i,r,o,a,s){t.createArrays(),t.tilePixelRatio=ja/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;const l=t.layers[0].layout,c=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.kind){const{minZoom:e,maxZoom:n}=t.textSizeData;u.compositeTextSizes=[c["text-size"].possiblyEvaluate(new ao(e),a),c["text-size"].possiblyEvaluate(new ao(n),a)]}if("composite"===t.iconSizeData.kind){const{minZoom:e,maxZoom:n}=t.iconSizeData;u.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new ao(e),a),c["icon-size"].possiblyEvaluate(new ao(n),a)]}u.layoutTextSize=c["text-size"].possiblyEvaluate(new ao(s+1),a),u.layoutIconSize=c["icon-size"].possiblyEvaluate(new ao(s+1),a),u.textMaxSize=c["text-size"].possiblyEvaluate(new ao(18),a);const h="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),d=l.get("text-size");for(const o of t.features){const s=l.get("text-font").evaluate(o,{},a).join(","),c=d.evaluate(o,{},a),p=u.layoutTextSize.evaluate(o,{},a),f=(u.layoutIconSize.evaluate(o,{},a),{horizontal:{},vertical:void 0}),m=o.text;let g,_=[0,0];if(m){const i=m.toString(),u=l.get("text-letter-spacing").evaluate(o,{},a)*bc,d=l.get("text-line-height").evaluate(o,{},a)*bc,g=Yr(i)?u:0,y=l.get("text-anchor").evaluate(o,{},a),v=l.get("text-variable-anchor");if(!v){const t=l.get("text-radial-offset").evaluate(o,{},a);_=t?Xu(y,[t*bc,Zu]):l.get("text-offset").evaluate(o,{},a).map((t=>t*bc))}let b=h?"center":l.get("text-justify").evaluate(o,{},a);const x=l.get("symbol-placement"),w="point"===x,E="point"===x?l.get("text-max-width").evaluate(o,{},a)*bc:0,M=o=>{t.allowVerticalPlacement&&Ur(i)&&(f.vertical=su(m,e,n,r,s,E,d,y,o,g,_,ru.vertical,!0,x,p,c))};if(!h&&v){const t="auto"===b?v.map((t=>Ju(t))):[b];let i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(!f.horizontal[a])if(i)f.horizontal[a]=f.horizontal[0];else{const t=su(m,e,n,r,s,E,d,"center",a,g,_,ru.horizontal,!1,x,p,c);t&&(f.horizontal[a]=t,i=1===t.positionedLines.length)}}M("left")}else{if("auto"===b&&(b=Ju(y)),w||l.get("text-writing-mode").indexOf("horizontal")>=0||!Ur(i)){const t=su(m,e,n,r,s,E,d,y,b,g,_,ru.horizontal,!1,x,p,c);t&&(f.horizontal[b]=t)}M("point"===x?"left":b)}}let y=!1;if(o.icon&&o.icon.name){const e=i[o.icon.name];e&&(g=yu(r[o.icon.name],l.get("icon-offset").evaluate(o,{},a),l.get("icon-anchor").evaluate(o,{},a)),y=e.sdf,void 0===t.sdfIcons?t.sdfIcons=e.sdf:t.sdfIcons!==e.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}const v=nh(f.horizontal)||f.vertical;t.iconsInText||(t.iconsInText=!!v&&v.iconsInText),(v||g)&&Qu(t,o,f,g,i,u,p,0,_,y,a)}o&&t.generateCollisionDebugBuffers(s,t.collisionBoxArray)}function Ju(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Qu(t,e,n,i,r,o,a,s,l,c,h){let d=o.textMaxSize.evaluate(e,{},h);void 0===d&&(d=a);const p=t.layers[0].layout,f=p.get("icon-offset").evaluate(e,{},h),m=nh(n.horizontal)||n.vertical,g=a/24,_=t.tilePixelRatio*d/24,y=t.tilePixelRatio*p.get("symbol-spacing"),v=p.get("text-padding")*t.tilePixelRatio,b=p.get("icon-padding")*t.tilePixelRatio,x=u(p.get("text-max-angle")),w="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),E="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),M=p.get("symbol-placement"),T=y/2,S=p.get("icon-text-fit");let k;i&&"none"!==S&&(t.allowVerticalPlacement&&n.vertical&&(k=vu(i,n.vertical,S,p.get("icon-text-fit-padding"),f,g)),m&&(i=vu(i,m,S,p.get("icon-text-fit-padding"),f,g)));const C=(s,u)=>{u.x<0||u.x>=ja||u.y<0||u.y>=ja||function(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E){const M=t.addToLineVertexArray(e,n);let T,S,k,C,I,L,A,P=0,z=0,N=0,R=0,O=-1,F=-1;const B={};let U=da(""),Y=0,j=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?[Y,j]=s.layout.get("text-offset").evaluate(v,{},w).map((t=>t*bc)):(Y=s.layout.get("text-radial-offset").evaluate(v,{},w)*bc,j=Zu),t.allowVerticalPlacement&&i.vertical){const t=i.vertical;if(p)L=rh(t),a&&(A=rh(a));else{const n=s.layout.get("text-rotate").evaluate(v,{},w)+90;k=ih(l,e,c,u,h,t,d,n,f),a&&(C=ih(l,e,c,u,h,a,g,n))}}if(r){const n=s.layout.get("icon-rotate").evaluate(v,{},w),i="none"!==s.layout.get("icon-text-fit"),o=Ou(r,n,x,i),d=a?Ou(a,n,x,i):void 0;S=ih(l,e,c,u,h,r,g,n),P=4*o.length;const p=t.iconSizeData;let f=null;"source"===p.kind?(f=[xc*s.layout.get("icon-size").evaluate(v,{},w)],f[0]>th&&D(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===p.kind&&(f=[xc*b.compositeIconSizes[0].evaluate(v,{},w),xc*b.compositeIconSizes[1].evaluate(v,{},w)],(f[0]>th||f[1]>th)&&D(`${t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),t.addSymbols(t.icon,o,f,y,_,v,!1,e,M.lineStartIndex,M.lineLength,-1,w),O=t.icon.placedSymbolArray.length-1,d&&(z=4*d.length,t.addSymbols(t.icon,d,f,y,_,v,ru.vertical,e,M.lineStartIndex,M.lineLength,-1,w),F=t.icon.placedSymbolArray.length-1)}for(const n in i.horizontal){const r=i.horizontal[n];T||(U=da(r.text),p?I=rh(r):T=ih(l,e,c,u,h,r,d,s.layout.get("text-rotate").evaluate(v,{},w),f));const a=1===r.positionedLines.length;if(N+=eh(t,e,r,o,s,p,v,f,M,i.vertical?ru.horizontal:ru.horizontalOnly,a?Object.keys(i.horizontal):[n],B,O,b,w),a)break}i.vertical&&(R+=eh(t,e,i.vertical,o,s,p,v,f,M,ru.vertical,["vertical"],B,F,b,w));let V=-1;const G=(t,e)=>t?Math.max(t,e):e;V=G(I,V),V=G(L,V),V=G(A,V);const q=V>-1?1:0;q&&(V*=E/bc),t.glyphOffsetArray.length>=ph.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==v.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,v.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,B.right>=0?B.right:-1,B.center>=0?B.center:-1,B.left>=0?B.left:-1,B.vertical>=0?B.vertical:-1,O,F,U,void 0!==T?T:t.collisionBoxArray.length,void 0!==T?T+1:t.collisionBoxArray.length,void 0!==k?k:t.collisionBoxArray.length,void 0!==k?k+1:t.collisionBoxArray.length,void 0!==S?S:t.collisionBoxArray.length,void 0!==S?S+1:t.collisionBoxArray.length,C||t.collisionBoxArray.length,C?C+1:t.collisionBoxArray.length,c,N,R,P,z,q,0,Y,j,V)}(t,u,s,n,i,r,k,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,v,w,l,0,b,E,f,e,o,c,h,a)};if("line"===M)for(const r of Cu(e.geometry,0,0,ja,ja)){const e=Su(r,y,x,n.vertical||m,i,24,_,t.overscaling,ja);for(const n of e){const e=m;e&&oh(t,e.text,T,n)||C(r,n)}}else if("line-center"===M){for(const t of e.geometry)if(t.length>1){const e=Tu(t,x,n.vertical||m,i,24,_);e&&C(t,e)}}else if("Polygon"===e.type)for(const t of kl(e.geometry,0)){const e=qu(t,16);C(t[0],new bu(e.x,e.y,0))}else if("LineString"===e.type)for(const t of e.geometry)C(t,new bu(t[0].x,t[0].y,0));else if("Point"===e.type)for(const t of e.geometry)for(const e of t)C([e],new bu(e.x,e.y,0))}const th=32640;function eh(t,e,n,i,o,a,s,l,c,u,h,d,p,f,m){const g=function(t,e,n,i,o,a,s,l){const c=[];if(0===e.positionedLines.length)return c;const u=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,h=function(t){const e=t[0],n=t[1],i=e*n;return i>0?[e,-n]:i<0?[-e,n]:0===e?[n,e]:[n,-e]}(n);let d=Math.abs(e.top-e.bottom);for(const t of e.positionedLines)d-=t.lineOffset;const p=e.positionedLines.length,f=d/p;let m=e.top-n[1];for(let t=0;t<p;++t){const i=e.positionedLines[t];m=ju(e,f,m,t);for(const t of i.positionedGlyphs){if(!t.rect)continue;const i=t.rect||{};let a=4,d=!0,p=1,f=0;const g=(o||l)&&t.vertical,_=t.metrics.advance*t.scale/2,y=t.metrics,v=t.rect;if(null===v)continue;if(l&&e.verticalizable&&(f=t.imageName?_-t.metrics.width*t.scale/2:0),t.imageName){const e=s[t.imageName];if(!e)continue;d=e.sdf,p=e.pixelRatio,a=1/p}const b=o?[t.x+_,t.y]:[0,0];let x=[0,0],w=[0,0],E=!1;o||(g?(w=[t.x+_+h[0],t.y+h[1]-f],E=!0):x=[t.x+_+n[0],t.y+n[1]-f]);const M=v.w*t.scale/(p*(t.localGlyph?2:1)),T=v.h*t.scale/(p*(t.localGlyph?2:1));let S,k,C,I;if(g){const e=t.y-m,n=new r(-_,_-e),i=-Math.PI/2,o=new r(...w);S=new r(-_+x[0],x[1]),S._rotateAround(i,n)._add(o),S.x+=-e+_,S.y-=(y.left-a)*t.scale;const s=t.imageName?y.advance*t.scale:bc*t.scale,l=String.fromCharCode(t.glyph);Cc(l)?S.x+=(1-a)*t.scale:Ic(l)?S.x+=s-y.height*t.scale+(-a-1)*t.scale:S.x+=t.imageName||y.width+2*a===v.w&&y.height+2*a===v.h?(s-T)/2:(s-(y.height+2*a)*t.scale)/2,k=new r(S.x,S.y-M),C=new r(S.x+T,S.y),I=new r(S.x+T,S.y-M)}else{const e=(y.left-a)*t.scale-_+x[0],n=(-y.top-a)*t.scale+x[1],i=e+M,o=n+T;S=new r(e,n),k=new r(i,n),C=new r(e,o),I=new r(i,o)}if(u){let t;t=o?new r(0,0):E?new r(h[0],h[1]):new r(n[0],n[1]),S._rotateAround(u,t),k._rotateAround(u,t),C._rotateAround(u,t),I._rotateAround(u,t)}const L=new r(0,0),D=new r(0,0);c.push({tl:S,tr:k,bl:C,br:I,tex:i,writingMode:e.writingMode,glyphOffset:b,sectionIndex:t.sectionIndex,isSDF:d,pixelOffsetTL:L,pixelOffsetBR:D,minFontScaleX:0,minFontScaleY:0})}}return c}(0,n,l,o,a,s,i,t.allowVerticalPlacement),_=t.textSizeData;let y=null;"source"===_.kind?(y=[xc*o.layout.get("text-size").evaluate(s,{},m)],y[0]>th&&D(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===_.kind&&(y=[xc*f.compositeTextSizes[0].evaluate(s,{},m),xc*f.compositeTextSizes[1].evaluate(s,{},m)],(y[0]>th||y[1]>th)&&D(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,g,y,l,a,s,u,e,c.lineStartIndex,c.lineLength,p,m);for(const e of h)d[e]=t.text.placedSymbolArray.length-1;return 4*g.length}function nh(t){for(const e in t)return t[e];return null}function ih(t,e,n,i,o,a,s,l,c){let h=a.top,d=a.bottom,p=a.left,f=a.right;const m=a.collisionPadding;if(m&&(p-=m[0],h-=m[1],f+=m[2],d+=m[3]),l){const t=new r(p,h),e=new r(f,h),n=new r(p,d),i=new r(f,d),o=u(l);let a=new r(0,0);c&&(a=new r(c[0],c[1])),t._rotateAround(o,a),e._rotateAround(o,a),n._rotateAround(o,a),i._rotateAround(o,a),p=Math.min(t.x,e.x,n.x,i.x),f=Math.max(t.x,e.x,n.x,i.x),h=Math.min(t.y,e.y,n.y,i.y),d=Math.max(t.y,e.y,n.y,i.y)}return t.emplaceBack(e.x,e.y,p,h,f,d,s,n,i,o),t.length-1}function rh(t){t.collisionPadding&&(t.top-=t.collisionPadding[1],t.bottom+=t.collisionPadding[3]);const e=t.bottom-t.top;return e>0?Math.max(10,e):null}function oh(t,e,n,i){const r=t.compareText;if(e in r){const t=r[e];for(let e=t.length-1;e>=0;e--)if(i.dist(t[e])<n)return!0}else r[e]=[];return r[e].push(i),!1}const ah=ql.VectorTileFeature.types,sh=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lh(t,e,n,i,r,o,a,s,l,c,u,h,d){const p=s?Math.min(th,Math.round(s[0])):0,f=s?Math.min(th,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*i),Math.round(32*r),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function ch(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function uh(t){for(const e of t.sections)if($r(e.text))return!0;return!1}class hh{constructor(t){this.layoutVertexArray=new zo,this.indexArray=new Yo,this.programConfigurations=t,this.segments=new Ya,this.dynamicLayoutVertexArray=new No,this.opacityVertexArray=new Ro,this.placedSymbolArray=new Qo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fc.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,mc.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,sh,!0),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}sr("SymbolBuffers",hh);class dh{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Ya,this.collisionVertexArray=new Uo,this.collisionVertexArrayExt=new No}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,gc.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,_c.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}sr("CollisionBuffers",dh);class ph{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ms([]),this.placementViewportMatrix=ms([]);const e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=wc(this.zoom,e["text-size"]),this.iconSizeData=wc(this.zoom,e["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((t=>ru[t])),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=t.sourceID}createArrays(){this.text=new hh(new Da(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new hh(new Da(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new na,this.lineVertexArray=new ia,this.symbolInstances=new ea}calculateGlyphDependencies(t,e,n,i,r){for(let n=0;n<t.length;n++)if(e[t.charCodeAt(n)]=!0,i&&r){const i=kc[t.charAt(n)];i&&(e[i.charCodeAt(0)]=!0)}}populate(t,e,n){const i=this.layers[0],r=i.layout,o=r.get("text-font"),a=r.get("text-field"),s=r.get("icon-image"),l=("constant"!==a.value.kind||a.value.value instanceof pe&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,u=r.get("symbol-sort-key");if(this.features=[],!l&&!c)return;const h=e.iconDependencies,d=e.glyphDependencies,p=e.availableImages,f=new ao(this.zoom);for(const{feature:e,id:a,index:s,sourceLayerIndex:m}of t){const t=i._featureFilter.needGeometry,g=Ha(e,t);if(!i._featureFilter.filter(f,g,n))continue;let _,y;if(t||(g.geometry=qa(e)),l){const t=i.getValueAndResolveTokens("text-field",g,n,p),e=pe.factory(t);uh(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===io()||this.hasRTLText&&oo.isParsed())&&(_=Sc(e,i,g))}if(c){const t=i.getValueAndResolveTokens("icon-image",g,n,p);y=t instanceof fe?t:fe.fromString(t)}if(!_&&!y)continue;const v=this.sortFeaturesByKey?u.evaluate(g,{},n):void 0;if(this.features.push({id:a,text:_,icon:y,index:s,sourceLayerIndex:m,geometry:g.geometry,properties:e.properties,type:ah[e.type],sortKey:v}),y&&(h[y.name]=!0),_){const t=o.evaluate(g,{},n).join(","),e="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ru.vertical)>=0;for(const n of _.sections)if(n.image)h[n.image.name]=!0;else{const i=Ur(_.toString()),r=n.fontStack||t,o=d[r]=d[r]||{};this.calculateGlyphDependencies(n.text,o,e,this.allowVerticalPlacement,i)}}}"line"===r.get("symbol-placement")&&(this.features=function(t){const e={},n={},i=[];let r=0;function o(e){i.push(t[e]),r++}function a(t,e,r){const o=n[t];return delete n[t],n[e]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(r[0]),o}function s(t,n,r){const o=e[n];return delete e[n],e[t]=o,i[o].geometry[0].shift(),i[o].geometry[0]=r[0].concat(i[o].geometry[0]),o}function l(t,e,n){const i=n?e[0][e[0].length-1]:e[0][0];return`${t}:${i.x}:${i.y}`}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in e&&n[p]!==e[f]){const t=s(p,f,h),r=a(p,f,i[t].geometry);delete e[p],delete n[f],n[l(d,i[r].geometry,!0)]=r,i[t].geometry=null}else p in n?a(p,f,h):f in e?s(p,f,h):(o(c),e[p]=r-1,n[f]=r-1)}return i.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment){let n=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]);const r={};for(let i=t.segment+1;i<e.length;i++)r[i]={x:e[i].x,y:e[i].y,tileUnitDistanceFromAnchor:n},i<e.length-1&&(n+=e[i+1].dist(e[i]));for(let n=t.segment||0;n>=0;n--)r[n]={x:e[n].x,y:e[n].y,tileUnitDistanceFromAnchor:i},n>0&&(i+=e[n-1].dist(e[n]));for(let t=0;t<e.length;t++){const e=r[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(t,e,n,i,r,o,a,s,l,c,u,h){const d=t.indexArray,p=t.layoutVertexArray,f=t.segments.prepareSegment(4*e.length,p,d,this.canOverlap?o.sortKey:void 0),m=this.glyphOffsetArray.length,g=f.vertexLength,_=this.allowVerticalPlacement&&a===ru.vertical?Math.PI/2:0,y=o.text&&o.text.sections;for(let i=0;i<e.length;i++){const{tl:r,tr:a,bl:l,br:c,tex:u,pixelOffsetTL:m,pixelOffsetBR:g,minFontScaleX:v,minFontScaleY:b,glyphOffset:x,isSDF:w,sectionIndex:E}=e[i],M=f.vertexLength,T=x[1];lh(p,s.x,s.y,r.x,T+r.y,u.x,u.y,n,w,m.x,m.y,v,b),lh(p,s.x,s.y,a.x,T+a.y,u.x+u.w,u.y,n,w,g.x,m.y,v,b),lh(p,s.x,s.y,l.x,T+l.y,u.x,u.y+u.h,n,w,m.x,g.y,v,b),lh(p,s.x,s.y,c.x,T+c.y,u.x+u.w,u.y+u.h,n,w,g.x,g.y,v,b),ch(t.dynamicLayoutVertexArray,s,_),d.emplaceBack(M,M+1,M+2),d.emplaceBack(M+1,M+2,M+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),i!==e.length-1&&E===e[i+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},h,y&&y[E])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,g,l,c,s.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],a,0,!1,0,u,0)}_commitLayoutVertex(t,e,n,i,r){t.emplaceBack(e.x,e.y,n,i,Math.round(r.x),Math.round(r.y))}_addCollisionDebugVertices(t,e,n,i,o){const a=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),s=a.vertexLength,l=o.anchorX,c=o.anchorY;for(let t=0;t<4;t++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(e,-t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,-t.padding),n.collisionVertexArrayExt.emplaceBack(e,t.padding,t.padding),n.collisionVertexArrayExt.emplaceBack(e,-t.padding,t.padding),this._commitLayoutVertex(n.layoutVertexArray,i,l,c,new r(t.x1,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,l,c,new r(t.x2,t.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,l,c,new r(t.x2,t.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,l,c,new r(t.x1,t.y2)),a.vertexLength+=4;const u=n.indexArray;u.emplaceBack(s,s+1),u.emplaceBack(s+1,s+2),u.emplaceBack(s+2,s+3),u.emplaceBack(s+3,s),a.primitiveLength+=4}_addTextDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceTextSize(t,o,e,a);this._addCollisionDebugVertices(i,r,this.textCollisionBox,i.anchorPoint,o)}}_addIconDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceIconSize(t,e,a);this._addCollisionDebugVertices(i,r,this.iconCollisionBox,i.anchorPoint,o)}}generateCollisionDebugBuffers(t,e){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dh(Fo,yc.members,$o),this.iconCollisionBox=new dh(Fo,yc.members,$o);const n=Mc(this.iconSizeData,t),i=Mc(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(i,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(i,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(t,e,n,i){const r=this.text.placedSymbolArray.get(e.rightJustifiedTextSymbolIndex>=0?e.rightJustifiedTextSymbolIndex:e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.leftJustifiedTextSymbolIndex>=0?e.leftJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex>=0?e.verticalPlacedTextSymbolIndex:i),o=Ec(this.textSizeData,t,r)/bc;return this.tilePixelRatio*o}getSymbolInstanceIconSize(t,e,n){const i=this.icon.placedSymbolArray.get(n),r=Ec(this.iconSizeData,t,i);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(t,e,n){t.emplaceBack(e,-n,-n),t.emplaceBack(e,n,-n),t.emplaceBack(e,n,n),t.emplaceBack(e,-n,n)}_updateTextDebugCollisionBoxes(t,e,n,i,r,o){for(let a=i;a<r;a++){const i=n.get(a),r=this.getSymbolInstanceTextSize(t,o,e,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,r,i.padding)}}_updateIconDebugCollisionBoxes(t,e,n,i,r){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(t,e,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,r,i.padding)}}updateCollisionDebugBuffers(t,e){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Mc(this.iconSizeData,t),i=Mc(this.textSizeData,t);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(i,t,e,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(i,t,e,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,t,e,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,t,e,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,e,n,i,r,o,a,s,l){const c={};for(let i=e;i<n;i++){const e=t.get(i);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,padding:e.padding,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.textFeatureIndex=e.featureIndex;break}for(let e=i;e<r;e++){const n=t.get(e);c.verticalTextBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.verticalTextFeatureIndex=n.featureIndex;break}for(let e=o;e<a;e++){const n=t.get(e);c.iconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.iconFeatureIndex=n.featureIndex;break}for(let e=s;e<l;e++){const n=t.get(e);c.verticalIconBox={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,padding:n.padding,anchorPointX:n.anchorPointX,anchorPointY:n.anchorPointY},c.verticalIconFeatureIndex=n.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),i=n.vertexStartIndex+4*n.numGlyphs;for(let e=n.vertexStartIndex;e<i;e+=4)t.indexArray.emplaceBack(e,e+1,e+2),t.indexArray.emplaceBack(e+1,e+2,e+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),i=[],r=[],o=[];for(let t=0;t<this.symbolInstances.length;++t){o.push(t);const a=this.symbolInstances.get(t);i.push(0|Math.round(e*a.anchorX+n*a.anchorY)),r.push(a.featureIndex)}return o.sort(((t,e)=>i[t]-i[e]||r[e]-r[t])),o}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,n)=>{t>=0&&n.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}sr("SymbolBucket",ph,{omit:["layers","collisionBoxArray","features","compareText"]}),ph.MAX_GLYPHS=65535,ph.addDynamicAttributes=ch;const fh=new xo({"symbol-placement":new go(Ft.layout_symbol["symbol-placement"]),"symbol-spacing":new go(Ft.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new go(Ft.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _o(Ft.layout_symbol["symbol-sort-key"]),"symbol-z-order":new go(Ft.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new go(Ft.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new go(Ft.layout_symbol["icon-ignore-placement"]),"icon-optional":new go(Ft.layout_symbol["icon-optional"]),"icon-rotation-alignment":new go(Ft.layout_symbol["icon-rotation-alignment"]),"icon-size":new _o(Ft.layout_symbol["icon-size"]),"icon-text-fit":new go(Ft.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new go(Ft.layout_symbol["icon-text-fit-padding"]),"icon-image":new _o(Ft.layout_symbol["icon-image"]),"icon-rotate":new _o(Ft.layout_symbol["icon-rotate"]),"icon-padding":new go(Ft.layout_symbol["icon-padding"]),"icon-keep-upright":new go(Ft.layout_symbol["icon-keep-upright"]),"icon-offset":new _o(Ft.layout_symbol["icon-offset"]),"icon-anchor":new _o(Ft.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new go(Ft.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new go(Ft.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new go(Ft.layout_symbol["text-rotation-alignment"]),"text-field":new _o(Ft.layout_symbol["text-field"]),"text-font":new _o(Ft.layout_symbol["text-font"]),"text-size":new _o(Ft.layout_symbol["text-size"]),"text-max-width":new _o(Ft.layout_symbol["text-max-width"]),"text-line-height":new _o(Ft.layout_symbol["text-line-height"]),"text-letter-spacing":new _o(Ft.layout_symbol["text-letter-spacing"]),"text-justify":new _o(Ft.layout_symbol["text-justify"]),"text-radial-offset":new _o(Ft.layout_symbol["text-radial-offset"]),"text-variable-anchor":new go(Ft.layout_symbol["text-variable-anchor"]),"text-anchor":new _o(Ft.layout_symbol["text-anchor"]),"text-max-angle":new go(Ft.layout_symbol["text-max-angle"]),"text-writing-mode":new go(Ft.layout_symbol["text-writing-mode"]),"text-rotate":new _o(Ft.layout_symbol["text-rotate"]),"text-padding":new go(Ft.layout_symbol["text-padding"]),"text-keep-upright":new go(Ft.layout_symbol["text-keep-upright"]),"text-transform":new _o(Ft.layout_symbol["text-transform"]),"text-offset":new _o(Ft.layout_symbol["text-offset"]),"text-allow-overlap":new go(Ft.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new go(Ft.layout_symbol["text-ignore-placement"]),"text-optional":new go(Ft.layout_symbol["text-optional"])});var mh={paint:new xo({"icon-opacity":new _o(Ft.paint_symbol["icon-opacity"]),"icon-color":new _o(Ft.paint_symbol["icon-color"]),"icon-halo-color":new _o(Ft.paint_symbol["icon-halo-color"]),"icon-halo-width":new _o(Ft.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _o(Ft.paint_symbol["icon-halo-blur"]),"icon-translate":new go(Ft.paint_symbol["icon-translate"]),"icon-translate-anchor":new go(Ft.paint_symbol["icon-translate-anchor"]),"text-opacity":new _o(Ft.paint_symbol["text-opacity"]),"text-color":new _o(Ft.paint_symbol["text-color"],{runtimeType:Xt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new _o(Ft.paint_symbol["text-halo-color"]),"text-halo-width":new _o(Ft.paint_symbol["text-halo-width"]),"text-halo-blur":new _o(Ft.paint_symbol["text-halo-blur"]),"text-translate":new go(Ft.paint_symbol["text-translate"]),"text-translate-anchor":new go(Ft.paint_symbol["text-translate-anchor"])}),layout:fh};class gh{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Ht,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}sr("FormatSectionOverride",gh,{omit:["defaultValue"]});class _h extends Fa{constructor(t){super(t,mh)}recalculate(t,e){super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const t=[];for(const e of n)t.indexOf(e)<0&&t.push(e);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,i){const r=this.layout.get(t).evaluate(e,{},n,i),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||ci(o.value)||!r?r:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,r)}createBucket(t){return new ph(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of mh.paint.overridableProperties){if(!_h.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new gh(e),i=new li(n,e.property.specification);let r=null;r="constant"===e.value.kind||"source"===e.value.kind?new hi("source",i):new di("composite",i,e.value.zoomStops,e.value._interpolationType),this.paint._values[t]=new fo(e.property,r,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&_h.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),i=mh.paint.properties[e];let r=!1;const o=t=>{for(const e of t)if(i.overrides&&i.overrides.hasOverride(e))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof pe)o(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{r||(e instanceof ve&&_e(e.value)===te?o(e.value.sections):e instanceof Ee?o(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return r}getProgramConfiguration(t){return new La(this,t)}}var yh={paint:new xo({"background-color":new go(Ft.paint_background["background-color"]),"background-pattern":new vo(Ft.paint_background["background-pattern"]),"background-opacity":new go(Ft.paint_background["background-opacity"])})},vh={paint:new xo({"raster-opacity":new go(Ft.paint_raster["raster-opacity"]),"raster-hue-rotate":new go(Ft.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new go(Ft.paint_raster["raster-brightness-min"]),"raster-brightness-max":new go(Ft.paint_raster["raster-brightness-max"]),"raster-saturation":new go(Ft.paint_raster["raster-saturation"]),"raster-contrast":new go(Ft.paint_raster["raster-contrast"]),"raster-resampling":new go(Ft.paint_raster["raster-resampling"]),"raster-fade-duration":new go(Ft.paint_raster["raster-fade-duration"])})};class bh extends Fa{constructor(t){super(t,{}),this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var xh={paint:new xo({"sky-type":new go(Ft.paint_sky["sky-type"]),"sky-atmosphere-sun":new go(Ft.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new go(Ft.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new go(Ft.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new go(Ft.paint_sky["sky-gradient-radius"]),"sky-gradient":new bo(Ft.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new go(Ft.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new go(Ft.paint_sky["sky-atmosphere-color"]),"sky-opacity":new go(Ft.paint_sky["sky-opacity"])})};function wh(t,e,n){const i=bs(0,0,1),r=As(Ds());return function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=i*l-o*s,t[1]=r*l+a*s,t[2]=o*l+i*s,t[3]=a*l-r*s}(r,r,n?-u(t)+Math.PI:u(t)),Ps(r,r,-u(e)),Ts(i,i,r),Ms(i,i)}const Eh={circle:class extends Fa{constructor(t){super(t,ds)}createBucket(t){return new Za(t)}queryRadius(t){const e=t;return ss("circle-radius",this,e)+ss("circle-stroke-width",this,e)+ls(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,i,r,o,a,s){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&t.queryGeometry.isAboveHorizon)return!1;const c=us(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),h=l?u*t.pixelToTileUnitsFactor:u;for(const e of i)for(const n of e){const e=n.add(c),i=s&&o.elevation?o.elevation.exaggeration()*s.getElevationAt(e.x,e.y,!0):0,r=l?e:zs(e,i,a),u=l?t.tilespaceRays.map((t=>Os(t,i))):t.queryGeometry.screenGeometry;let d=h;const p=Ls([],[n.x,n.y,i,1],a);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?d*=p[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(d*=o.cameraToCenterDistance/p[3]),Xa(u,r,d))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(t){return new La(this,t)}},heatmap:class extends Fa{createBucket(t){return new Fs(t)}constructor(t){super(t,Gs),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=qs({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(t){return new La(this,t)}},hillshade:class extends Fa{constructor(t){super(t,Hs)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(t){return new La(this,t)}},fill:class extends Fa{constructor(t){super(t,Pl)}getProgramIds(){const t=this.paint.get("fill-pattern"),e=t&&t.constantOr(1),n=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(t){return new La(this,t)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new Dl(t)}queryRadius(){return ls(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,i,r,o){return!t.queryGeometry.isAboveHorizon&&Ka(cs(t.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,t.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends Fa{constructor(t){super(t,Jl)}createBucket(t){return new Xl(t)}queryRadius(){return ls(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(t){return new La(this,t)}queryIntersectsFeature(t,e,n,i,o,a,s,l,c){const u=us(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,t.pixelToTileUnitsFactor),h=this.paint.get("fill-extrusion-height").evaluate(e,n),d=this.paint.get("fill-extrusion-base").evaluate(e,n),p=[0,0],f=l&&a.elevation,m=a.elevation?a.elevation.exaggeration():1;if(f){const e=t.tile.getBucket(this).centroidVertexArray,n=c+1;if(n<e.length){const t=e.get(n);p[0]=t.a_centroid_pos0,p[1]=t.a_centroid_pos1}}if(0===p[0]&&1===p[1])return!1;const g=function(t,e,n,i,o,a,s,l,c){return a?function(t,e,n,i,r,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of t){const t=[],p=[];for(const c of d){const u=c.x+i.x,d=c.y+i.y,f=nc(u,d,e,n,o,a,s,l);h[0]=u,h[1]=d,h[2]=f.base,h[3]=1,Ls(h,h,r),h[3]=Math.max(h[3],1e-5);const m=ec([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);h[0]=u,h[1]=d,h[2]=f.top,h[3]=1,Ls(h,h,r),h[3]=Math.max(h[3],1e-5);const g=ec([h[0]/h[3],h[1]/h[3],h[2]/h[3]]);t.push(m),p.push(g)}c.push(t),u.push(p)}return[c,u]}(t,e,n,i,o,a,s,l,c):function(t,e,n,i,o){const a=[],s=[],l=o[8]*e,c=o[9]*e,u=o[10]*e,h=o[11]*e,d=o[8]*n,p=o[9]*n,f=o[10]*n,m=o[11]*n;for(const e of t){const t=[],n=[];for(const a of e){const e=a.x+i.x,s=a.y+i.y,g=o[0]*e+o[4]*s+o[12],_=o[1]*e+o[5]*s+o[13],y=o[2]*e+o[6]*s+o[14],v=o[3]*e+o[7]*s+o[15],b=g+l,x=_+c,w=y+u,E=Math.max(v+h,1e-5),M=g+d,T=_+p,S=y+f,k=Math.max(v+m,1e-5),C=new r(b/E,x/E);C.z=w/E,t.push(C);const I=new r(M/k,T/k);I.z=S/k,n.push(I)}a.push(t),s.push(n)}return[a,s]}(t,e,n,i,o)}(i,d,h,u,s,f?l:null,p,m,a.center.lat),_=t.queryGeometry;return function(t,e,n){let i=1/0;Ka(n,e)&&(i=tc(n,e[0]));for(let r=0;r<e.length;r++){const o=e[r],a=t[r];for(let t=0;t<o.length-1;t++){const e=o[t],r=[e,o[t+1],a[t+1],a[t],e];Wa(n,r)&&(i=Math.min(i,tc(n,r)))}}return i!==1/0&&i}(g[0],g[1],_.isPointQuery()?_.screenBounds:_.screenGeometry)}},line:class extends Fa{constructor(t){super(t,hc),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){if("line-gradient"===t){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof en,this.gradientVersion=(this.gradientVersion+1)%s}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=dc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new cc(t)}getProgramIds(){const t=this.paint.get("line-dasharray"),e=this.paint.get("line-pattern").constantOr(1),n=this.paint.get("line-gradient");return[e?"linePattern":t?"lineSDF":n?"lineGradient":"line"]}getProgramConfiguration(t){return new La(this,t)}queryRadius(t){const e=t,n=pc(ss("line-width",this,e),ss("line-gap-width",this,e)),i=ss("line-offset",this,e);return n/2+Math.abs(i)+ls(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,i,o,a){if(t.queryGeometry.isAboveHorizon)return!1;const s=cs(t.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,t.pixelToTileUnitsFactor),l=t.pixelToTileUnitsFactor/2*pc(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(i=function(t,e){const n=[],i=new r(0,0);for(let r=0;r<t.length;r++){const o=t[r],a=[];for(let t=0;t<o.length;t++){const n=o[t-1],r=o[t],s=o[t+1],l=0===t?i:r.sub(n)._unit()._perp(),c=t===o.length-1?i:s.sub(r)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),a.push(u._mult(e)._add(r))}n.push(a)}return n}(i,c*t.pixelToTileUnitsFactor)),function(t,e,n){for(let i=0;i<e.length;i++){const r=e[i];if(t.length>=3)for(let e=0;e<r.length;e++)if(rs(t,r[e]))return!0;if(Ja(t,r,n))return!0}return!1}(s,i,l)}isTileClipped(){return!0}},symbol:_h,background:class extends Fa{constructor(t){super(t,yh)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Fa{constructor(t){super(t,vh)}getProgramIds(){return["raster"]}},sky:class extends Fa{constructor(t){super(t,xh),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){"sky-gradient"===t?this._updateColorRamp():"sky-atmosphere-sun"!==t&&"sky-atmosphere-halo-color"!==t&&"sky-atmosphere-color"!==t&&"sky-atmosphere-sun-intensity"!==t||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=qs({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(t){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=t.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}}getCenter(t,e){const n=this.paint.get("sky-type");if("atmosphere"===n){const n=this.paint.get("sky-atmosphere-sun"),i=!n,r=t.style.light,o=r.properties.get("position");return i&&"viewport"===r.properties.get("anchor")&&D("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?wh(o.azimuthal,90-o.polar,e):wh(n[0],90-n[1],e)}if("gradient"===n){const t=this.paint.get("sky-gradient-center");return wh(t[0],90-t[1],e)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(t){this._skyboxInvalidated=!1,this._lightPosition=t.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const t=this.paint.get("sky-type");return"atmosphere"===t?["skyboxCapture","skybox"]:"gradient"===t?["skyboxGradient"]:null}}},{HTMLImageElement:Mh,HTMLCanvasElement:Th,HTMLVideoElement:Sh,ImageData:kh,ImageBitmap:Ch}=a;class Ih{constructor(t,e,n,i){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,i)}update(t,e,n){const{width:i,height:r}=t,o=!(this.size&&this.size[0]===i&&this.size[1]===r||n),{context:a}=this,{gl:s}=a;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[i,r],t instanceof Mh||t instanceof Th||t instanceof Sh||t instanceof kh||Ch&&t instanceof Ch?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,i,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{const{x:e,y:o}=n||{x:0,y:0};t instanceof Mh||t instanceof Th||t instanceof Sh||t instanceof kh||Ch&&t instanceof Ch?s.texSubImage2D(s.TEXTURE_2D,0,e,o,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,e,o,i,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)}bind(t,e,n){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Lh{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Ah?new Ah(t.lng,t.lat):Ah.convert(t),this}setSouthWest(t){return this._sw=t instanceof Ah?new Ah(t.lng,t.lat):Ah.convert(t),this}extend(t){const e=this._sw,n=this._ne;let i,r;if(t instanceof Ah)i=t,r=t;else{if(!(t instanceof Lh))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Lh.convert(t)):this.extend(Ah.convert(t)):this;if(i=t._sw,r=t._ne,!i||!r)return this}return e||n?(e.lng=Math.min(i.lng,e.lng),e.lat=Math.min(i.lat,e.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new Ah(i.lng,i.lat),this._ne=new Ah(r.lng,r.lat)),this}getCenter(){return new Ah((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ah(this.getWest(),this.getNorth())}getSouthEast(){return new Ah(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Ah.convert(t);let i=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i}static convert(t){return!t||t instanceof Lh?t:new Lh(t)}}const Dh=6371008.8;class Ah{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ah(g(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,i=t.lat*e,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((t.lng-this.lng)*e);return Dh*Math.acos(Math.min(r,1))}toBounds(t=0){const e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Lh(new Ah(this.lng-n,this.lat-e),new Ah(this.lng+n,this.lat+e))}static convert(t){if(t instanceof Ah)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Ah(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Ah(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Ph=2*Math.PI*Dh;function zh(t){return Ph*Math.cos(t*Math.PI/180)}function Nh(t){return(180+t)/360}function Rh(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Oh(t,e){return t/zh(e)}function Fh(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function Bh(t,e){return t*zh(Fh(e))}class Uh{constructor(t,e,n=0){this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t,e=0){const n=Ah.convert(t);return new Uh(Nh(n.lng),Rh(n.lat),Oh(e,n.lat))}toLngLat(){return new Ah(360*this.x-180,Fh(this.y))}toAltitude(){return Bh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Ph*(t=Fh(this.y),1/Math.cos(t*Math.PI/180));var t}}class Yh{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.image=new js({width:t,height:e}),this.positions={},this.uploaded=!1}getDash(t,e){const n=this.getKey(t,e);return this.positions[n]}trim(){const t=this.width,e=this.height=E(this.nextRow);this.image.resize({width:t,height:e})}getKey(t,e){return t.join(",")+e}getDashRanges(t,e,n){const i=[];let r=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;i.push({left:r,right:o,isDash:a,zeroLength:0===t[0]});let s=t[0];for(let e=1;e<t.length;e++){a=!a;const l=t[e];r=s*n,s+=l,o=s*n,i.push({left:r,right:o,isDash:a,zeroLength:0===l})}return i}addRoundDash(t,e,n){const i=e/2;for(let e=-n;e<=n;e++){const r=this.width*(this.nextRow+n+e);let o=0,a=t[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=t[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=e/n*(i+1);if(a.isDash){const t=i-Math.abs(d);h=Math.sqrt(u*u+t*t)}else h=i-Math.sqrt(u*u+d*d);this.image.data[r+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t,e){for(let e=t.length-1;e>=0;--e){const n=t[e],i=t[e+1];n.zeroLength?t.splice(e,1):i&&i.isDash===n.isDash&&(i.left=n.left,t.splice(e,1))}const n=t[0],i=t[t.length-1];n.isDash===i.isDash&&(n.left=i.left-this.width,i.right=n.right+this.width);const r=this.width*this.nextRow;let o=0,a=t[o];for(let n=0;n<this.width;n++){n/a.right>1&&(a=t[++o]);const i=Math.abs(n-a.left),s=Math.abs(n-a.right),l=Math.min(i,s);this.image.data[r+n]=Math.max(0,Math.min(255,(a.isDash?l:-l)+e+128))}}addDash(t,e){const n=this.getKey(t,e);if(this.positions[n])return this.positions[n];const i="round"===e,r=i?7:0,o=2*r+1;if(this.nextRow+o>this.height)return D("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let e=0;e<t.length;e++)t[e]<0&&(D("Negative value is found in line dasharray, replacing values with 0"),t[e]=0),a+=t[e];if(0!==a){const n=this.width/a,o=this.getDashRanges(t,this.width,n);i?this.addRoundDash(o,n,r):this.addRegularDash(o,"square"===e?.5*n:0)}const s=this.nextRow+r;this.nextRow+=o;const l={tl:[s,r],br:[a,0]};return this.positions[n]=l,l}}sr("LineAtlas",Yh);class jh{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Vh=a.performance;function Gh(t){const e=t?t.url.toString():void 0;return Vh.getEntriesByName(e)}class qh{constructor(){this.tasks={},this.taskQueue=[],T(["process"],this),this.invoker=new jh(this.process),this.nextId=0}add(t,e){const n=this.nextId++,i=function({type:t,isSymbolTile:e,zoom:n}){return n=n||0,"message"===t?0:"maybePrepare"!==t||e?"parseTile"!==t||e?"parseTile"===t&&e?300-n:"maybePrepare"===t&&e?400-n:500:200-n:100-n}(e);if(0===i){z();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:t,metadata:e,priority:i,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){z();try{if(this.taskQueue=this.taskQueue.filter((t=>!!this.tasks[t])),!this.taskQueue.length)return;const t=this.pick();if(null===t)return;const e=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!e)return;e.fn()}finally{}}pick(){let t=null,e=1/0;for(let n=0;n<this.taskQueue.length;n++){const i=this.tasks[this.taskQueue[n]];i.priority<e&&(e=i.priority,t=n)}if(null===t)return null;const n=this.taskQueue[t];return this.taskQueue.splice(t,1),n}remove(){this.invoker.remove()}}function Hh(t,e,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[t*i-2*Math.PI*6378137/2,e*i-2*Math.PI*6378137/2]}class $h{constructor(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Xh(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e){const n=(r=this.y,o=this.z,a=Hh(256*(i=this.x),256*(r=Math.pow(2,o)-r-1),o),s=Hh(256*(i+1),256*(r+1),o),a[0]+","+a[1]+","+s[0]+","+s[1]);var i,r,o,a,s;const l=function(t,e,n){let i,r="";for(let o=t;o>0;o--)i=1<<o-1,r+=(e&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",n)}getTilePoint(t){const e=Math.pow(2,this.z);return new r((t.x*e-this.x)*ja,(t.y*e-this.y)*ja)}getTileVec3(t){const e=Math.pow(2,this.z);return bs((t.x*e-this.x)*ja,(t.y*e-this.y)*ja,Bh(t.z,t.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class Zh{constructor(t,e){this.wrap=t,this.canonical=e,this.key=Xh(t,e.z,e.z,e.x,e.y)}}class Wh{constructor(t,e,n,i,r){this.overscaledZ=t,this.wrap=e,this.canonical=new $h(n,+i,+r),this.key=0===e&&t===n?this.canonical.key:Xh(e,t,n,i,r)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const e=this.canonical.z-t;return t>this.canonical.z?new Wh(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wh(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e=!0){if(this.overscaledZ===t&&e)return this.key;if(t>this.canonical.z)return Xh(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-t;return Xh(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new Wh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Wh(e,this.wrap,e,n,i),new Wh(e,this.wrap,e,n+1,i),new Wh(e,this.wrap,e,n,i+1),new Wh(e,this.wrap,e,n+1,i+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Wh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Wh(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Zh(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Uh(t.x-this.wrap,t.y))}getTileVec3(t){return this.canonical.getTileVec3(new Uh(t.x-this.wrap,t.y,t.z))}}function Xh(t,e,n,i,r){const o=1<<Math.min(n,22);let a=o*(r%o)+i%o;return t&&n<22&&(a+=o*o*((t<0?-2*t-1:2*t)%(1<<2*(22-n)))),16*(32*a+n)+(e-n)}sr("CanonicalTileID",$h),sr("OverscaledTileID",Wh,{omit:["projMatrix"]});class Kh{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}class Jh{constructor(t,e,n,i,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=i,this.properties=t.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}var Qh=So([{name:"a_pos",type:"Int16",components:2}]);class td{constructor(t,e,n){this.tileID=t,this.uid=x(),this.uses=0,this.tileSize=e,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const e=t+this.timeAdded;e<j.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const i of t){const t=i.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){i.layers=t,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=i}}return n}(t.buckets,e.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const e=this.buckets[t];if(e instanceof ph){if(this.hasSymbolBuckets=!0,!n)break;e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const e=this.buckets[t];if(e instanceof ph&&e.hasRTLText){this.hasRTLText=!0,oo.isLoading()||oo.isLoaded()||"deferred"!==io()||ro();break}}this.queryPadding=0;for(const t in this.buckets){const n=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(t).queryRadius(n))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new Ko}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const e in this.buckets){const n=this.buckets[e];n.uploadPending()&&n.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ih(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ih(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ih(t,this.lineAtlas.image,e.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,i,r,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:a,transform:o,params:r},t,e,n):{}}querySourceFeatures(t,e){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),r=e?e.sourceLayer:"",o=i._geojsonTileLayer||i[r];if(!o)return;const a=Mi(e&&e.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let e=0;e<o.length;e++){const i=o.feature(e);if(a.needGeometry){const t=Ha(i,!0);if(!a.filter(new ao(this.tileID.overscaledZ),t,this.tileID.canonical))continue}else if(!a.filter(new ao(this.tileID.overscaledZ),i))continue;const h=n.getId(i,r),d=new Jh(i,s,l,c,h);d.tile=u,t.push(d)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const e=this.expirationTime;if(t.cacheControl){const e=N(t.cacheControl);e["max-age"]&&(this.expirationTime=Date.now()+1e3*e["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const t=Date.now();let n=!1;if(this.expirationTime>t)n=!1;else if(e)if(this.expirationTime<e)n=!0;else{const i=this.expirationTime-e;i?this.expirationTime=t+Math.max(i,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const i in this.buckets){if(!e.style.hasLayer(i))continue;const r=this.buckets[i],o=r.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(!a||!s||0===Object.keys(s).length)continue;r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(r)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=j.now()+t}setDependencies(t,e){const n={};for(const t of e)n[t]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}clearQueryDebugViz(){}}class ed{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,e,n){const i=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][i]=this.stateChanges[t][i]||{},v(this.stateChanges[t][i],n),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==i&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][i]){this.deletedStates[t][i]={};for(const e in this.state[t][i])n[e]||(this.deletedStates[t][i][e]=null)}else for(const e in n)this.deletedStates[t]&&this.deletedStates[t][i]&&null===this.deletedStates[t][i][e]&&delete this.deletedStates[t][i][e]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const i=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][i]&&(this.deletedStates[t][i]=this.deletedStates[t][i]||{},this.deletedStates[t][i][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][i])for(n in this.deletedStates[t][i]={},this.stateChanges[t][i])this.deletedStates[t][i][n]=null;else this.deletedStates[t][i]=null;else this.deletedStates[t]=null}getState(t,e){const n=String(e),i=v({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){const n=this.deletedStates[t][e];if(null===n)return{};for(const t in n)delete i[t]}return i}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(t,e){const n={};for(const t in this.stateChanges){this.state[t]=this.state[t]||{};const e={};for(const n in this.stateChanges[t])this.state[t][n]||(this.state[t][n]={}),v(this.state[t][n],this.stateChanges[t][n]),e[n]=this.state[t][n];n[t]=e}for(const t in this.deletedStates){this.state[t]=this.state[t]||{};const e={};if(null===this.deletedStates[t])for(const n in this.state[t])e[n]={},this.state[t][n]={};else for(const n in this.deletedStates[t]){if(null===this.deletedStates[t][n])this.state[t][n]={};else for(const e of Object.keys(this.deletedStates[t][n]))delete this.state[t][n][e];e[n]=this.state[t][n]}n[t]=n[t]||{},v(n[t],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const i in t)t[i].setFeatureState(n,e)}}class nd{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,e){const n=this.toIdx(t,e);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(t,e){return this.leaves[this.toIdx(t,e)]}toIdx(t,e){return e*this.size+t}}function id(t,e,n,i){let r=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(i[a])<1e-15){if(n[a]<t[a]||n[a]>e[a])return null}else{const s=1/i[a];let l=(t[a]-n[a])*s,c=(e[a]-n[a])*s;if(l>c){const t=l;l=c,c=t}if(l>r&&(r=l),c<o&&(o=c),r>o)return null}return r}function rd(t,e,n,i,r,o,a,s,l,c,u){const h=i-t,d=r-e,p=o-n,f=a-t,m=s-e,g=l-n,_=u[1]*g-u[2]*m,y=u[2]*f-u[0]*g,v=u[0]*m-u[1]*f,b=h*_+d*y+p*v;if(Math.abs(b)<1e-15)return null;const x=1/b,w=c[0]-t,E=c[1]-e,M=c[2]-n,T=(w*_+E*y+M*v)*x;if(T<0||T>1)return null;const S=E*p-M*d,k=M*h-w*p,C=w*d-E*h,I=(u[0]*S+u[1]*k+u[2]*C)*x;return I<0||T+I>1?null:(f*S+m*k+g*C)*x}function od(t,e,n){return(t-e)/(n-e)}function ad(t,e,n,i,r,o,a,s,l){const c=1<<n,u=o-i,h=a-r,d=(t+1)/c*u+i,p=(e+0)/c*h+r,f=(e+1)/c*h+r;s[0]=(t+0)/c*u+i,s[1]=p,l[0]=d,l[1]=f}class sd{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const e=function(t){const e=Math.ceil(Math.log2(t.dim/8)),n=[];let i=Math.ceil(Math.pow(2,e));const r=1/i,o=(t,e,n,i,r)=>{const o=i?1:0,a=(t+1)*n-o,s=e*n,l=(e+1)*n-o;r[0]=t*n,r[1]=s,r[2]=a,r[3]=l};let a=new nd(i);const s=[];for(let e=0;e<i*i;e++){o(e%i,Math.floor(e/i),r,!1,s);const n=cd(s[0],s[1],t),l=cd(s[2],s[1],t),c=cd(s[2],s[3],t),u=cd(s[0],s[3],t);a.minimums.push(Math.min(n,l,c,u)),a.maximums.push(Math.max(n,l,c,u)),a.leaves.push(1)}for(n.push(a),i/=2;i>=1;i/=2){const t=n[n.length-1];a=new nd(i);for(let e=0;e<i*i;e++){o(e%i,Math.floor(e/i),2,!0,s);const n=t.getElevation(s[0],s[1]),r=t.getElevation(s[2],s[1]),l=t.getElevation(s[2],s[3]),c=t.getElevation(s[0],s[3]),u=t.isLeaf(s[0],s[1]),h=t.isLeaf(s[2],s[1]),d=t.isLeaf(s[2],s[3]),p=t.isLeaf(s[0],s[3]),f=Math.min(n.min,r.min,l.min,c.min),m=Math.max(n.max,r.max,l.max,c.max),g=u&&h&&d&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&g?1:0)}n.push(a)}return n}(this.dem),n=e.length-1,i=e[n];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(e,0,0,n,0)}raycastRoot(t,e,n,i,r,o,a=1){return id([t,e,-100],[n,i,this.maximums[0]*a],r,o)}raycast(t,e,n,i,r,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(t,e,n,i,r,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=d.pop();if(this.leaves[s]){ad(f,m,g,t,e,n,i,u,h);const s=1<<g,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,_=(m+1)/s,y=cd(l,d,this.dem)*a,v=cd(c,d,this.dem)*a,b=cd(c,_,this.dem)*a,x=cd(l,_,this.dem)*a,w=rd(u[0],u[1],y,h[0],u[1],v,h[0],h[1],b,r,o),E=rd(h[0],h[1],b,u[0],h[1],x,u[0],u[1],y,r,o),M=Math.min(null!==w?w:Number.MAX_VALUE,null!==E?E:Number.MAX_VALUE);if(M!==Number.MAX_VALUE)return M;{const t=Es([],r,o,p);if(ld(y,v,x,b,od(t[0],u[0],h[0]),od(t[1],u[1],h[1]))>=t[2])return p}continue}let _=0;for(let d=0;d<this._siblingOffset.length;d++){ad((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,t,e,n,i,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const p=id(u,h,r,o);if(null!=p){const t=p;l[d]=t;let e=!1;for(let n=0;n<_&&!e;n++)t>=l[c[n]]&&(c.splice(n,0,d),e=!0);e||(c[_]=d),_++}}for(let t=0;t<_;t++){const e=c[t];d.push({idx:this.childOffsets[s]+e,t:l[e],nodex:(f<<1)+this._siblingOffset[e][0],nodey:(m<<1)+this._siblingOffset[e][1],depth:g+1})}}return null}_addNode(t,e,n){return this.minimums.push(t),this.maximums.push(e),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(t,e,n,i,r){if(1===t[i].isLeaf(e,n))return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const o=i-1,a=t[o];let s,l=0;for(let t=0;t<this._siblingOffset.length;t++){const i=2*e+this._siblingOffset[t][0],r=2*n+this._siblingOffset[t][1],o=a.getElevation(i,r),c=a.isLeaf(i,r),u=this._addNode(o.min,o.max,c);c&&(l|=1<<t),s||(s=u)}for(let i=0;i<this._siblingOffset.length;i++)l&1<<i||this._construct(t,2*e+this._siblingOffset[i][0],2*n+this._siblingOffset[i][1],o,s+i)}}function ld(t,e,n,i,r,o){return nn(nn(t,n,o),nn(e,i,o),r)}function cd(t,e,n){const i=n.dim,r=m(t*i-.5,0,i-1),o=m(e*i-.5,0,i-1),a=Math.floor(r),s=Math.floor(o),l=Math.min(a+1,i-1),c=Math.min(s+1,i-1);return ld(n.get(a,s),n.get(l,s),n.get(a,c),n.get(l,c),r-a,o-s)}const ud={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class hd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,e,n,i=!1,r=!1){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return D(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const o=this.dim=e.height-2;if(this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox",this.borderReady=i,!i){for(let t=0;t<o;t++)this.data[this._idx(-1,t)]=this.data[this._idx(0,t)],this.data[this._idx(o,t)]=this.data[this._idx(o-1,t)],this.data[this._idx(t,-1)]=this.data[this._idx(t,0)],this.data[this._idx(t,o)]=this.data[this._idx(t,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],r&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new sd(this)}get(t,e,n=!1){const i=new Uint8Array(this.data.buffer);n&&(t=m(t,-1,this.dim),e=m(e,-1,this.dim));const r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])}static getUnpackVector(t){return ud[t]}get unpackVector(){return ud[this.encoding]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,n){return(256*t*256+256*e+n)/10-1e4}_unpackTerrarium(t,e,n){return 256*t+e+n/256-32768}static pack(t,e){const n=[0,0,0,0],i=hd.getUnpackVector(e);let r=Math.floor((t+i[3])/i[2]);return n[2]=r%256,r=Math.floor(r/256),n[1]=r%256,r=Math.floor(r/256),n[0]=r,n}getPixels(){return new Vs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let i=e*this.dim,r=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-e*this.dim,l=-n*this.dim;for(let e=o;e<a;e++)for(let n=i;n<r;n++)this.data[this._idx(n,e)]=t.data[this._idx(n+s,e+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}sr("DEMData",hd),sr("DemMinMaxQuadTree",sd,{omit:["dem"]});class dd{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:e,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout((()=>{this.remove(t,r)}),n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,i=void 0===e?0:this.data[n].indexOf(e),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const i of this.data[n])t(i.value)||e.push(i);for(const t of e)this.remove(t.value.tileID,t)}}class pd{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}pd.ReadOnly=!1,pd.ReadWrite=!0,pd.disabled=new pd(519,pd.ReadOnly,[0,1]);const fd=7680;class md{constructor(t,e,n,i,r,o){this.test=t,this.ref=e,this.mask=n,this.fail=i,this.depthFail=r,this.pass=o}}md.disabled=new md({func:519,mask:0},0,0,fd,fd,fd);class gd{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}gd.Replace=[1,0],gd.disabled=new gd(gd.Replace,ue.transparent,[!1,!1,!1,!1]),gd.unblended=new gd(gd.Replace,ue.transparent,[!0,!0,!0,!0]),gd.alphaBlended=new gd([1,771],ue.transparent,[!0,!0,!0,!0]);const _d=1029,yd=2305;class vd{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}vd.disabled=new vd(!1,_d,yd),vd.backCCW=new vd(!0,_d,yd),vd.backCW=new vd(!0,_d,2304),vd.frontCW=new vd(!0,1028,2304),vd.frontCCW=new vd(!0,1028,yd);class bd extends Ot{constructor(t,e,n){super(),this.id=t,this._onlySymbols=n,e.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),e.on("error",(()=>{this._sourceErrored=!0})),this._source=e,this._tiles={},this._cache=new dd(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ed}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,e){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,(()=>{}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return y(this._tiles).map((t=>t.tileID)).sort(xd).map((t=>t.key))}getRenderableIds(t){const e=[];for(const n in this._tiles)this._isIdRenderable(+n,t)&&e.push(this._tiles[n]);return t?e.sort(((t,e)=>{const n=t.tileID,i=e.tileID,o=new r(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),a=new r(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((t=>t.tileID.key)):e.map((t=>t.tileID)).sort(xd).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(+t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(t,e,n,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new Rt(i,{tile:t})):this.update(this.transform));t.timeAdded=j.now(),"expired"===n&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(e,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new Nt("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const e=this.getRenderableIds();for(let i=0;i<e.length;i++){const r=e[i];if(t.neighboringTiles&&t.neighboringTiles[r]){const e=this.getTileByID(r);n(t,e),n(e,t)}}function n(t,e){if(!t.dem||t.dem.borderReady)return;t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const i=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,i),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,i){for(const r in this._tiles){let o=this._tiles[r];if(i[r]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>e+1;){const t=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[t.key],o&&o.hasData()&&(a=t)}let s=a;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){i[a.key]=a;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),i=this._getLoadedTile(e);if(i)return i}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,e){e=e||this._source.tileSize;const n=Math.ceil(t.width/e)+1,i=Math.ceil(t.height/e)+1,r=Math.floor(n*i*5),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(o)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),t[i.tileID.key]=i}this._tiles=t;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(t,e,n){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let i;this.updateCacheSize(t,e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((t=>new Wh(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y))):(i=t.coveringTiles({tileSize:e||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(i=i.filter((t=>this._source.hasTile(t))))):i=[];const r=this._updateRetainedTiles(i);if(wd(this._source.type)&&0!==i.length){const t={},e={},n=Object.keys(r);for(const i of n){const n=r[i],o=this._tiles[i];if(!o||o.fadeEndTime&&o.fadeEndTime<=j.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-bd.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),e[i]=n}const o=i[i.length-1].overscaledZ;for(const t in this._tiles){const n=this._tiles[t];if(r[t]||!n.hasData())continue;let i=n.tileID;for(;i.overscaledZ>o;){i=i.scaledTo(i.overscaledZ-1);const o=this._tiles[i.key];if(o&&o.hasData()&&e[i.key]){r[t]=n.tileID;break}}}for(const e in t)r[e]||(this._coveredTiles[e]=!0,r[e]=t[e])}for(const t in r)this._tiles[t].clearFadeHold();const o=function(t,e){const n=[];for(const i in t)i in e||n.push(i);return n}(this._tiles,r);for(const t of o){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+t)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const e={};if(0===t.length)return e;const n={},i=t[t.length-1].overscaledZ,r=t[0].overscaledZ,o=Math.max(r-bd.maxOverzooming,this._source.minzoom),a=Math.max(r+bd.maxUnderzooming,this._source.minzoom),s={};for(const n of t){const t=this._addTile(n);e[n.key]=n,t.hasData()||i<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,i,a,e);for(const i of t){let t=this._tiles[i.key];if(t.hasData())continue;if(i.canonical.z>=this._source.maxzoom){const t=i.children(this._source.maxzoom)[0],n=this.getTile(t);if(n&&n.hasData()){e[t.key]=t;continue}}else{const t=i.children(this._source.maxzoom);if(e[t[0].key]&&e[t[1].key]&&e[t[2].key]&&e[t[3].key])continue}let r=t.wasRequested();for(let a=i.overscaledZ-1;a>=o;--a){const o=i.scaledTo(a);if(n[o.key])break;if(n[o.key]=!0,t=this.getTile(o),!t&&r&&(t=this._addTile(o)),t&&(e[o.key]=o,r=t.wasRequested(),t.hasData()))break}}return e}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,i=this._tiles[t].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}e.push(i.key);const t=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;i=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(t){let e=this._tiles[t.key];if(e)return e;e=this._cache.getAndRemove(t),e&&(this._setTileReloadTimer(t.key,e),e.tileID=t,this._state.initializeTileState(e,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,e)));const n=Boolean(e);return n||(e=new td(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom),this._loadTile(e,this._tileLoaded.bind(this,e,t.key,e.state))),e?(e.uses++,this._tiles[t.key]=e,n||this._source.fire(new Nt("dataloading",{tile:e,coord:e.tileID,dataType:"source"})),e):null}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._cache.reset()}tilesIn(t,e,n){const i=[],r=this.transform;if(!r)return i;for(const o in this._tiles){const a=this._tiles[o];if(n&&a.clearQueryDebugViz(),a.holdingForFade())continue;const s=t.containsTile(a,r,e);s&&i.push(s)}return i}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const t of e)t.projMatrix=this.transform.calculateProjMatrix(t.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(wd(this._source.type))for(const t in this._tiles){const e=this._tiles[t];if(void 0!==e.fadeEndTime&&e.fadeEndTime>=j.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const i=this._tiles[t];i&&i.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}}function xd(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),i=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||i-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function wd(t){return"raster"===t||"image"===t||"video"===t}bd.maxOverzooming=10,bd.maxUnderzooming=3;class Ed{constructor(t,e,n){this._demTile=t,this._dem=this._demTile.dem,this._scale=e,this._offset=n}static create(t,e,n){const i=n||t.findDEMTileFor(e);if(!i||!i.dem)return;const r=i.dem,o=i.tileID,a=1<<e.canonical.z-o.canonical.z;return new Ed(i,i.tileSize/ja/a,[(e.canonical.x/a-o.canonical.x)*r.dim,(e.canonical.y/a-o.canonical.y)*r.dim])}tileCoordToPixel(t,e){const n=e*this._scale+this._offset[1],i=Math.floor(t*this._scale+this._offset[0]),o=Math.floor(n);return new r(i,o)}getElevationAt(t,e,n,i){const r=t*this._scale+this._offset[0],o=e*this._scale+this._offset[1],a=Math.floor(r),s=Math.floor(o),l=this._dem;return i=!!i,n?nn(nn(l.get(a,s,i),l.get(a,s+1,i),o-s),nn(l.get(a+1,s,i),l.get(a+1,s+1,i),o-s),r-a):l.get(a,s,i)}getElevationAtPixel(t,e,n){return this._dem.get(t,e,!!n)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Oh(1,t)*this._dem.stride}}class Md{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new nr(ja,16,0),this.featureIndexArray=new oa,this.promoteId=e}insert(t,e,n,i,r,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r,o);const s=this.grid;for(let t=0;t<e.length;t++){const n=e[t],i=[1/0,1/0,-1/0,-1/0];for(let t=0;t<n.length;t++){const e=n[t];i[0]=Math.min(i[0],e.x),i[1]=Math.min(i[1],e.y),i[2]=Math.max(i[2],e.x),i[3]=Math.max(i[3],e.y)}i[0]<ja&&i[1]<ja&&i[2]>=0&&i[3]>=0&&s.insert(a,i[0],i[1],i[2],i[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ql.VectorTile(new Ac(this.rawTileData)).layers,this.sourceLayerCoder=new Kh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,n,i){this.loadVTLayers();const r=t.params||{},o=Mi(r.filter),a=t.tileResult,s=t.transform,l=a.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,((t,e,n,i)=>os(a.bufferedTilespaceGeometry,t,e,n,i)));c.sort(Sd);let u=null;s.elevation&&c.length>0&&(u=Ed.create(s.elevation,this.tileID));const h={};let d;for(let s=0;s<c.length;s++){const l=c[s];if(l===d)continue;d=l;const p=this.featureIndexArray.get(l);let f=null;this.loadMatchingFeature(h,p,o,r.layers,r.availableImages,e,n,i,((e,n,i,r=0)=>(f||(f=qa(e)),n.queryIntersectsFeature(a,e,i,f,this.z,t.transform,t.pixelPosMatrix,u,r))))}return h}loadMatchingFeature(t,e,n,i,r,o,a,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:h,layoutVertexArrayOffset:d}=e,p=this.bucketLayerIDs[u];if(i&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(i,p))return;const f=this.sourceLayerCoder.decode(h),m=this.vtLayers[f].feature(c);if(n.needGeometry){const t=Ha(m,!0);if(!n.filter(new ao(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!n.filter(new ao(this.tileID.overscaledZ),m))return;const g=this.getId(m,f);for(let e=0;e<p.length;e++){const n=p[e];if(i&&i.indexOf(n)<0)continue;const u=o[n];if(!u)continue;let h={};void 0!==g&&s&&(h=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const f=v({},a[n]);f.paint=Td(f.paint,u.paint,m,h,r),f.layout=Td(f.layout,u.layout,m,h,r);const _=!l||l(m,u,h,d);if(!_)continue;const y=new Jh(m,this.z,this.x,this.y,g);y.layer=f;let b=t[n];void 0===b&&(b=t[n]=[]),b.push({featureIndex:c,feature:y,intersectionZ:_})}}lookupSymbolFeatures(t,e,n,i,r,o,a,s){const l={};this.loadVTLayers();const c=Mi(r);for(const r of t)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:i,featureIndex:r,layoutVertexArrayOffset:0},c,o,a,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;return this.promoteId&&(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof n&&(n=Number(n))),n}}function Td(t,e,n,i,r){return k(t,((t,o)=>{const a=e instanceof mo?e.get(o):null;return a&&a.evaluate?a.evaluate(n,i,r):a}))}function Sd(t,e){return e-t}sr("FeatureIndex",Md,{omit:["rawTileData","sourceLayerCoder"]});class kd{constructor(t){const e={},n=[];for(const i in t){const r=t[i],o=e[i]={};for(const t in r.glyphs){const e=r.glyphs[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const i=e.metrics.localGlyph?2:1,a={x:0,y:0,w:e.bitmap.width+2*i,h:e.bitmap.height+2*i};n.push(a),o[t]=a}}const{w:i,h:r}=eu(n),o=new js({width:i||1,height:r||1});for(const n in t){const i=t[n];for(const t in i.glyphs){const r=i.glyphs[+t];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const a=e[n][t],s=r.metrics.localGlyph?2:1;js.copy(r.bitmap,o,{x:0,y:0},{x:a.x+s,y:a.y+s},r.bitmap)}}this.image=o,this.positions=e}}sr("GlyphAtlas",kd);class Cd{constructor(t){this.tileID=new Wh(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile}parse(t,e,n,i,r){this.status="parsing",this.data=t,this.collisionBoxArray=new Ko;const o=new Kh(Object.keys(t.layers).sort()),a=new Md(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},l=new Yh(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=e.familiesBySource[this.source];for(const e in u){const i=t.layers[e];if(!i)continue;let r=!1,l=!1;for(const t of u[e])"symbol"===t[0].type?r=!0:l=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!l)continue;1===i.version&&D(`Vector tile source "${this.source}" layer "${e}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=o.encode(e),d=[];for(let t=0;t<i.length;t++){const n=i.feature(t),r=a.getId(n,e);d.push({feature:n,id:r,index:t,sourceLayerIndex:h})}for(const t of u[e]){const e=t[0];void 0!==this.isSymbolTile&&"symbol"===e.type!==this.isSymbolTile||e.minzoom&&this.zoom<Math.floor(e.minzoom)||e.maxzoom&&this.zoom>=e.maxzoom||"none"!==e.visibility&&(Id(t,this.zoom,n),(s[e.id]=e.createBucket({index:a.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(d,c,this.tileID.canonical),a.bucketLayerIDs.push(t.map((t=>t.id))))}}let h,d,p,f;l.trim();const m={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=k(c.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(g).length?i.send("getGlyphs",{uid:this.uid,stacks:g},((t,e)=>{h||(h=t,d=e,b.call(this))}),void 0,!1,m):d={};const _=Object.keys(c.iconDependencies);_.length?i.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{h||(h=t,p=e,b.call(this))}),void 0,!1,m):p={};const v=Object.keys(c.patternDependencies);function b(){if(h)return r(h);if(d&&p&&f){const t=new kd(d),e=new iu(p,f);for(const i in s){const r=s[i];r instanceof ph?(Id(r.layers,this.zoom,n),Ku(r,d,t.positions,p,e.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):r.hasPattern&&(r instanceof cc||r instanceof Dl||r instanceof Xl)&&(Id(r.layers,this.zoom,n),r.addFeatures(c,this.tileID.canonical,e.patternPositions))}this.status="done",r(null,{buckets:y(s).filter((t=>!t.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,lineAtlas:l,imageAtlas:e,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?t.positions:null})}}v.length?i.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{h||(h=t,f=e,b.call(this))}),void 0,!1,m):f={},b.call(this)}}function Id(t,e,n){const i=new ao(e);for(const e of t)e.recalculate(i,n)}class Ld{constructor(t){this.entries={},this.scheduler=t}request(t,e,n,i){const r=this.entries[t]=this.entries[t]||{callbacks:[]};if(r.result){const[t,n]=r.result;return this.scheduler?this.scheduler.add((()=>{i(t,n)}),e):i(t,n),()=>{}}return r.callbacks.push(i),r.cancel||(r.cancel=n(((n,i)=>{r.result=[n,i];for(const t of r.callbacks)this.scheduler?this.scheduler.add((()=>{t(n,i)}),e):t(n,i);setTimeout((()=>delete this.entries[t]),3e3)}))),()=>{r.result||(r.callbacks=r.callbacks.filter((t=>t!==i)),r.callbacks.length||(r.cancel(),delete this.entries[t]))}}}function Dd(t,e,n){const i=JSON.stringify(t.request);return t.data&&(this.deduped.entries[i]={result:[null,t.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom},(e=>{const i=Tt(t.request,((t,i,r,o)=>{t?e(t):i&&e(null,{vectorTile:n?void 0:new ql.VectorTile(new Ac(i)),rawData:i,cacheControl:r,expires:o})}));return()=>{i.cancel(),e()}}),e)}t.ARRAY_TYPE=ps,t.AUTH_ERR_MSG=J,t.Actor=class{constructor(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.cancelCallbacks={},T(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=z()?t:a,this.scheduler=new qh}send(t,e,n,i,r=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=U(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:ur(e,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t.cancel()}else if(e.mustQueue||z()){const t=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,e)),t&&t.metadata||{type:"message"})}else this.processTask(n,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(hr(e.error)):n(null,hr(e.data)))}else{const n=U(this.globalScope)?void 0:[],i=e.hasCallback?(e,i)=>{delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?ur(e):null,data:ur(i,n)},n)}:t=>{},r=hr(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,r,i);else if(this.parent.getWorkerSource){const t=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,t[0],r.source)[t[1]](r,i)}else i(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.CanonicalTileID=$h,t.Color=ue,t.ColorMode=gd,t.CullFaceMode=vd,t.DEMData=hd,t.DataConstantProperty=go,t.DedupedRequest=Ld,t.DepthMode=pd,t.EXTENT=ja,t.Elevation=class{getAtPointOrZero(t,e=0){return this.getAtPoint(t,e)||0}getAtPoint(t,e,n=!0){null==e&&(e=null);const i=this._source();if(!i)return e;if(t.y<0||t.y>1)return e;const r=i.getSource().maxzoom,o=1<<r,a=Math.floor(t.x),s=t.x-a,l=new Wh(r,a,r,Math.floor(s*o),Math.floor(t.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return e;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,p=(t.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(p);return(n?this.exaggeration():1)*nn(nn(u.get(f,m),u.get(f,m+1),p-m),nn(u.get(f+1,m),u.get(f+1,m+1),p-m),d-f)}getAtTileOffset(t,e,n){const i=1<<t.canonical.z;return this.getAtPointOrZero(new Uh(t.wrap+(t.canonical.x+e/ja)/i,(t.canonical.y+n/ja)/i))}getForTilePoints(t,e,n,i){const r=Ed.create(this,t,i);return!!r&&(e.forEach((t=>{t[2]=this.exaggeration()*r.getElevationAt(t[0],t[1],n)})),!0)}getMinMaxForTile(t){const e=this.findDEMTileFor(t);if(!e||!e.dem)return null;const n=e.dem.tree,i=e.tileID,r=1<<t.canonical.z-i.canonical.z;let o=t.canonical.x/r-i.canonical.x,a=t.canonical.y/r-i.canonical.y,s=0;for(let e=0;e<t.canonical.z-i.canonical.z&&!n.leaves[s];e++){o*=2,a*=2;const t=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+t,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(t,e,n){throw new Error("Pure virtual method called.")}pointCoordinate(t){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(t){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},t.ErrorEvent=Rt,t.EvaluationParameters=ao,t.Event=Nt,t.Evented=Ot,t.GlyphManager=Ru,t.ImagePosition=nu,t.LineAtlas=Yh,t.LngLat=Ah,t.LngLatBounds=Lh,t.LocalGlyphMode=Nu,t.MAX_SAFE_INTEGER=s,t.MercatorCoordinate=Uh,t.ONE_EM=bc,t.OverscaledTileID=Wh,t.Properties=xo,t.RGBAImage=Vs,t.RequestManager=class{constructor(t,e,n){this._transformRequestFn=t,this._customAccessToken=e,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const t=function(){let t="";for(let e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",K,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeStyleURL(t,e){if(!Q(t))return t;const n=nt(t);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeGlyphsURL(t,e){if(!Q(t))return t;const n=nt(t);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||e)}normalizeSourceURL(t,e){if(!Q(t))return t;const n=nt(t);return n.path=`/v4/${n.authority}.json`,n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)}normalizeSpriteURL(t,e,n,i){const r=nt(t);return Q(t)?(r.path=`/styles/v1${r.path}/sprite${e}${n}`,this._makeAPIURL(r,this._customAccessToken||i)):(r.path+=`${e}${n}`,it(r))}normalizeTileURL(t,e,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!Q(t))return t;const i=nt(t);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||n&&"raster"!==i.authority&&512===n?"@2x":""}${q.supported?".webp":"$1"}`),"raster"===i.authority?i.path=`/${G.RASTER_URL_PREFIX}${i.path}`:(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path=`/${G.TILE_URL_VERSION}${i.path}`);const r=this._customAccessToken||function(t){for(const e of t){const t=e.match(/^access_token=(.*)$/);if(t)return t[1]}return null}(i.params)||G.ACCESS_TOKEN;return G.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push(`sku=${this._skuToken}`),this._makeAPIURL(i,r)}canonicalizeTileURL(t,e){const n=nt(t);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return t;let i="mapbox://";n.path.match(/^\/raster\/v1\//)?i+=`raster/${n.path.replace(`/${G.RASTER_URL_PREFIX}/`,"")}`:i+=`tiles/${n.path.replace(`/${G.TILE_URL_VERSION}/`,"")}`;let r=n.params;return e&&(r=r.filter((t=>!t.match(/^access_token=/)))),r.length&&(i+=`?${r.join("&")}`),i}canonicalizeTileset(t,e){const n=!!e&&Q(e),i=[];for(const e of t.tiles||[])tt(e)?i.push(this.canonicalizeTileURL(e,n)):i.push(e);return i}_makeAPIURL(t,e){const n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",i=nt(G.API_URL);if(t.protocol=i.protocol,t.authority=i.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==i.path&&(t.path=`${i.path}${t.path}`),!G.REQUIRE_ACCESS_TOKEN)return it(t);if(e=e||G.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===e[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return t.params=t.params.filter((t=>-1===t.indexOf("access_token"))),t.params.push(`access_token=${e||""}`),it(t)}},t.ResourceType=xt,t.SegmentVector=Ya,t.SourceCache=bd,t.StencilMode=md,t.StructArrayLayout1ui2=Zo,t.StructArrayLayout2f1f2i16=Bo,t.StructArrayLayout2i4=Co,t.StructArrayLayout2ui4=$o,t.StructArrayLayout3f12=No,t.StructArrayLayout3ui6=Yo,t.StructArrayLayout4i8=Io,t.Texture=Ih,t.Tile=td,t.Transitionable=co,t.Uniform1f=va,t.Uniform1i=class extends ya{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends ya{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends ya{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=ba,t.UniformColor=xa,t.UniformMatrix3f=class extends ya{constructor(t,e){super(t,e),this.current=Ea}set(t){for(let e=0;e<9;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix3fv(this.location,!1,t);break}}},t.UniformMatrix4f=class extends ya{constructor(t,e){super(t,e),this.current=wa}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=Zh,t.ValidationError=Bt,t.VectorTileWorkerSource=class extends Ot{constructor(t,e,n,i,r){super(),this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||Dd,this.loading={},this.loaded={},this.deduped=new Ld(t.scheduler),this.isSpriteLoaded=i,this.scheduler=t.scheduler}loadTile(t,e){const n=t.uid,i=t&&t.request,r=i&&i.collectResourceTiming,o=this.loading[n]=new Cd(t);o.abort=this.loadVectorData(t,((a,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||a||!s)return o.status="done",l||(this.loaded[n]=o),e(a);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new ql.VectorTile(new Ac(c));const h=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((t,n)=>{if(t||!n)return e(t);const o={};if(r){const t=Gh(i);t.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(t)))}e(null,v({rawTileData:c.slice(0)},n,u,o))}))};this.isSpriteLoaded?h():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(h,{type:"parseTile",isSymbolTile:t.isSymbolTile,zoom:t.tileZoom}):h()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(t,e){const n=this.loaded,i=t.uid,r=this;if(n&&n[i]){const o=n[i];o.showCollisionBoxes=t.showCollisionBoxes,o.enableTerrain=!!t.enableTerrain;const a=(t,n)=>{const i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,r.layerIndex,this.availableImages,r.actor,i)),e(t,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(t,e){const n=t.uid,i=this.loading[n];i&&(i.abort&&i.abort(),delete this.loading[n]),e()}removeTile(t,e){const n=this.loaded,i=t.uid;n&&n[i]&&delete n[i],e()}},t.WritingMode=ru,t.ZoomHistory=dr,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=ch,t.altitudeFromMercatorZ=Bh,t.asyncAll=_,t.bezier=p,t.bindAll=T,t.bufferConvexPolygon=function(t,e){const n=[];for(let i=0;i<t.length;i++){const r=g(i-1,-1,t.length-1),o=g(i+1,-1,t.length-1),a=t[i],s=t[o],l=t[r].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*e/Math.sin(u/2));n.push(a.add(h))}return n},t.cacheEntryPossiblyAdded=function(t){bt++,bt>_t&&(t.getActor().send("enforceCacheSizeLimit",gt),bt=0)},t.clamp=m,t.clearTileCache=function(t){const e=a.caches.delete(pt);t&&e.catch(t).then((()=>t()))},t.clipLine=Cu,t.clone=function(t){var e=new ps(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.clone$1=function(t){var e=new ps(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$2=I,t.collisionCircleLayout=vc,t.config=G,t.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},t.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},t.create=ys,t.create$1=function(){var t=new ps(16);return ps!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$2=fs,t.createExpression=ui,t.createFilter=Mi,t.createLayout=So,t.createStyleLayer=function(t){return"custom"===t.type?new bh(t):new Eh[t.type](t)},t.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-o*s,t[1]=o*a-i*l,t[2]=i*s-r*a,t},t.degToRad=u,t.div=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=f,t.easeCubicInOut=d,t.emitValidationErrors=er,t.endsWith=S,t.enforceCacheSizeLimit=function(t){yt(),ft&&ft.then((e=>{e.keys().then((n=>{for(let i=0;i<n.length-t;i++)e.delete(n[i])}))}))},t.evaluateSizeForFeature=Ec,t.evaluateSizeForZoom=Mc,t.evaluateVariableOffset=Xu,t.evented=no,t.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},t.exactEquals$1=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},t.exported=j,t.exported$1=q,t.extend=v,t.filterObject=C,t.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},t.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,c=n*a,u=i*a,h=i*s,d=r*a,p=r*s,f=r*l,m=o*a,g=o*s,_=o*l;return t[0]=1-h-f,t[1]=u+_,t[2]=d-g,t[3]=0,t[4]=u-_,t[5]=1-c-f,t[6]=p+m,t[7]=0,t[8]=d+g,t[9]=p-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.fromRotation=function(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.furthestTileCorner=function(t){const e=Math.round((t+45+360)%360/90)%4;return h[e]},t.getAABBPointSquareDist=function(t,e,n){let i=0;for(let r=0;r<2;++r){const o=n?n[r]:0;t[r]>o&&(i+=(t[r]-o)*(t[r]-o)),e[r]<o&&(i+=(o-e[r])*(o-e[r]))}return i},t.getAnchorAlignment=gu,t.getAnchorJustification=Ju,t.getBounds=function(t){let e=1/0,n=1/0,i=-1/0,o=-1/0;for(const r of t)e=Math.min(e,r.x),n=Math.min(n,r.y),i=Math.max(i,r.x),o=Math.max(o,r.y);return{min:new r(e,n),max:new r(i,o)}},t.getImage=At,t.getJSON=function(t,e){return Mt(v(t,{type:"json"}),e)},t.getMapSessionAPI=ht,t.getPerformanceMeasurement=Gh,t.getRTLTextPluginStatus=io,t.getReferrer=Et,t.getVideo=function(t,e){const n=a.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let e=0;e<t.length;e++){const i=a.document.createElement("source");Ct(t[e])||(n.crossOrigin="Anonymous"),i.src=t[e],n.appendChild(i)}return{cancel:()=>{}}},t.identity=ms,t.identity$1=As,t.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],_=e[15],y=n*s-i*a,v=n*l-r*a,b=n*c-o*a,x=i*l-r*s,w=i*c-o*s,E=r*c-o*l,M=u*m-h*f,T=u*g-d*f,S=u*_-p*f,k=h*g-d*m,C=h*_-p*m,I=d*_-p*g,L=y*I-v*C+b*k+x*S-w*T+E*M;return L?(t[0]=(s*I-l*C+c*k)*(L=1/L),t[1]=(r*C-i*I-o*k)*L,t[2]=(m*E-g*w+_*x)*L,t[3]=(d*w-h*E-p*x)*L,t[4]=(l*S-a*I-c*T)*L,t[5]=(n*I-r*S+o*T)*L,t[6]=(g*b-f*E-_*v)*L,t[7]=(u*E-d*b+p*v)*L,t[8]=(a*C-s*S+c*M)*L,t[9]=(i*S-n*C-o*M)*L,t[10]=(f*w-m*b+_*y)*L,t[11]=(h*b-u*w-p*y)*L,t[12]=(s*T-a*k-l*M)*L,t[13]=(n*k-i*T+r*M)*L,t[14]=(m*v-f*x-g*y)*L,t[15]=(u*x-h*v+d*y)*L,t):null},t.isMapAuthenticated=function(t){return dt.has(t)},t.isMapboxURL=Q,t.latFromMercatorY=Fh,t.len=Is,t.length=vs,t.length$1=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},t.loadVectorTile=Dd,t.makeRequest=Mt,t.mercatorXfromLng=Nh,t.mercatorYfromLat=Rh,t.mercatorZfromAltitude=Oh,t.mul=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},t.mul$1=_s,t.mul$2=Cs,t.multiply=gs,t.multiply$1=ws,t.nextPowerOfTwo=E,t.normalize=Ms,t.normalize$1=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=i*a,t[2]=r*a,t[3]=o*a,t},t.number=nn,t.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),l=1/(i-r),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*c,t[15]=1,t},t.pbf=Ac,t.perspective=function(t,e,n,i,r){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i),t},t.pick=function(t,e){const n={};for(let i=0;i<e.length;i++){const r=e[i];r in t&&(n[r]=t[r])}return n},t.plugin=oo,t.pointGeometry=r,t.polygonIntersectsBox=os,t.polygonIntersectsPolygon=Wa,t.polygonizeBounds=function(t,e,n=0,i=!0){const o=new r(n,n),a=t.sub(o),s=e.add(o),l=[a,new r(s.x,a.y),s,new r(a.x,s.y)];return i&&l.push(a),l},t.posAttributes=Qh,t.postMapLoadEvent=ct,t.postTurnstileEvent=st,t.potpack=eu,t.prevPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},t.radToDeg=function(t){return t*c},t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.registerForPluginStateChange=function(t){return t({pluginStatus:Jr,pluginURL:Qr}),no.on("pluginStateChange",t),t},t.removeAuthState=function(t){dt.delete(t)},t.renderColorRamp=qs,t.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*i,t[5]=a*r+u*i,t[6]=s*r+h*i,t[7]=l*r+d*i,t[8]=c*r-o*i,t[9]=u*r-a*i,t[10]=h*r-s*i,t[11]=d*r-l*i,t},t.rotateX$1=Ps,t.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*i,t[1]=a*r-u*i,t[2]=s*r-h*i,t[3]=l*r-d*i,t[8]=o*i+c*r,t[9]=a*i+u*r,t[10]=s*i+h*r,t[11]=l*i+d*r,t},t.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*i,t[1]=a*r+u*i,t[2]=s*r+h*i,t[3]=l*r+d*i,t[4]=c*r-o*i,t[5]=u*r-a*i,t[6]=h*r-s*i,t[7]=d*r-l*i,t},t.rotateZ$1=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*s,t[1]=r*l-i*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},t.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.scale$1=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scaleAndAdd=Es,t.setCacheLimits=function(t,e){gt=t,_t=e},t.setRTLTextPlugin=function(t,e,n=!1){if(Jr===Zr||Jr===Wr||Jr===Xr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Qr=j.resolveURL(t),Jr=Zr,Kr=e,eo(),n||ro()},t.smoothstep=function(t,e,n){return(n=m((n-t)/(e-t),0,1))*n*(3-2*n)},t.spec=Ft,t.storeAuthState=function(t,e){e?dt.add(t):dt.delete(t)},t.sub=ks,t.subtract=xs,t.symbolSize=Tc,t.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},t.transformMat4=Ls,t.transformMat4$1=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/(a=a||1),t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,t},t.transformQuat=Ts,t.translate=function(t,e,n){var i,r,o,a,s,l,c,u,h,d,p,f,m=n[0],g=n[1],_=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*_+e[12],t[13]=e[1]*m+e[5]*g+e[9]*_+e[13],t[14]=e[2]*m+e[6]*g+e[10]*_+e[14],t[15]=e[3]*m+e[7]*g+e[11]*_+e[15]):(r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=i=e[0],t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=i*m+s*g+h*_+e[12],t[13]=r*m+l*g+d*_+e[13],t[14]=o*m+c*g+p*_+e[14],t[15]=a*m+u*g+f*_+e[15]),t},t.triggerPluginCompletionEvent=to,t.uniqueId=x,t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateFog=Ji,t.validateLight=Ki,t.validateStyle=Xi,t.values=y,t.vectorTile=ql,t.version=e,t.warnOnce=D,t.window=a,t.wrap=g})),i(0,(function(t){function e(t){const n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const i of t)n+=`${e(i)},`;return`${n}]`}const i=Object.keys(t).sort();let r="{";for(let n=0;n<i.length;n++)r+=`${JSON.stringify(i[n])}:${e(t[i[n]])},`;return`${r}}`}function n(n){let i="";for(const r of t.refProperties)i+=`/${e(n[r])}`;return i}class i{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,i){for(const n of e){this._layerConfigs[n.id]=n;const e=this._layers[n.id]=t.createStyleLayer(n);e._featureFilter=t.createFilter(e.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const t of i)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const r=function(t,e){const i={};for(let r=0;r<t.length;r++){const o=e&&e[t[r].id]||n(t[r]);e&&(e[t[r].id]=o);let a=i[o];a||(a=i[o]=[]),a.push(t[r])}const r=[];for(const t in i)r.push(i[t]);return r}(t.values(this._layerConfigs),this.keyCache);for(const t of r){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=r[o];a||(a=r[o]=[]),a.push(e)}}}const{ImageBitmap:r}=t.window;class o{loadTile(e,n){const{uid:i,encoding:o,rawImageData:a,padding:s,buildQuadTree:l}=e,c=r&&a instanceof r?this.getImageData(a,s):a;n(null,new t.DEMData(i,c,o,s<1,l))}getImageData(e,n){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const i=this.offscreenCanvasContext.getImageData(-n,-n,e.width+2*n,e.height+2*n);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:i.width,height:i.height},i.data)}}var a=function t(e,n){var i,r=e&&e.type;if("FeatureCollection"===r)for(i=0;i<e.features.length;i++)t(e.features[i],n);else if("GeometryCollection"===r)for(i=0;i<e.geometries.length;i++)t(e.geometries[i],n);else if("Feature"===r)t(e.geometry,n);else if("Polygon"===r)s(e.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<e.coordinates.length;i++)s(e.coordinates[i],n);return e};function s(t,e){if(0!==t.length){l(t[0],e);for(var n=1;n<t.length;n++)l(t[n],!e)}}function l(t,e){for(var n=0,i=0,r=t.length,o=r-1;i<r;o=i++)n+=(t[i][0]-t[o][0])*(t[o][1]+t[i][1]);n>=0!=!!e&&t.reverse()}const c=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class u{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.pointGeometry(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const i=[];for(const e of n)i.push(new t.pointGeometry(e[0],e[1]));e.push(i)}return e}}toGeoJSON(t,e,n){return c.call(this,t,e,n)}}class h{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new u(this._features[t])}}var d=t.vectorTile.VectorTileFeature,p=f;function f(t,e){this.options=e||{},this.features=t,this.length=t.length}function m(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}f.prototype.feature=function(t){return new m(this.features[t],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],r=[],o=0;o<i.length;o++)r.push(new t.pointGeometry(i[o][0],i[o][1]));this.geometry.push(r)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,i=1/0,r=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[e,i,n,r]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var g=y,_=p;function y(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,v,t.layers[n])}(e,n),n.finish()}function v(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)i.feature=t.feature(n),e.writeMessage(2,b,i);var r=i.keys;for(n=0;n<r.length;n++)e.writeStringField(3,r[n]);var o=i.values;for(n=0;n<o.length;n++)e.writeMessage(4,T,o[n])}function b(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,x,t),e.writeVarintField(3,n.type),e.writeMessage(4,M,n)}function x(t,e){var n=t.feature,i=t.keys,r=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var l=o[s];void 0===l&&(i.push(s),o[s]=l=i.length-1),e.writeVarint(l);var c=n.properties[s],u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var h=u+":"+c,d=a[h];void 0===d&&(r.push(c),a[h]=d=r.length-1),e.writeVarint(d)}}function w(t,e){return(e<<3)+(7&t)}function E(t){return t<<1^t>>31}function M(t,e){for(var n=t.loadGeometry(),i=t.type,r=0,o=0,a=n.length,s=0;s<a;s++){var l=n[s],c=1;1===i&&(c=l.length),e.writeVarint(w(1,c));for(var u=3===i?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==i&&e.writeVarint(w(2,u-1));var d=l[h].x-r,p=l[h].y-o;e.writeVarint(E(d)),e.writeVarint(E(p)),r+=d,o+=p}3===i&&e.writeVarint(w(7,1))}}function T(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function S(t,e,n,i,r,o){if(r-i<=n)return;const a=i+r>>1;k(t,e,a,i,r,o%2),S(t,e,n,i,a-1,o+1),S(t,e,n,a+1,r,o+1)}function k(t,e,n,i,r,o){for(;r>i;){if(r-i>600){const a=r-i+1,s=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);k(t,e,n,Math.max(i,Math.floor(n-s*c/a+u)),Math.min(r,Math.floor(n+(a-s)*c/a+u)),o)}const a=e[2*n+o];let s=i,l=r;for(C(t,e,i,n),e[2*r+o]>a&&C(t,e,i,r);s<l;){for(C(t,e,s,l),s++,l--;e[2*s+o]<a;)s++;for(;e[2*l+o]>a;)l--}e[2*i+o]===a?C(t,e,i,l):(l++,C(t,e,l,r)),l<=n&&(i=l+1),n<=l&&(r=l-1)}}function C(t,e,n,i){I(t,n,i),I(e,2*n,2*i),I(e,2*n+1,2*i+1)}function I(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function L(t,e,n,i){const r=t-n,o=e-i;return r*r+o*o}g.fromVectorTileJs=y,g.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var i in t)n[i]=new p(t[i].features,e),n[i].name=i,n[i].version=e.version,n[i].extent=e.extent;return y({layers:n})},g.GeoJSONWrapper=_;const D=t=>t[0],A=t=>t[1];class P{constructor(t,e=D,n=A,i=64,r=Float64Array){this.nodeSize=i,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new r(2*t.length);for(let i=0;i<t.length;i++)a[i]=i,s[2*i]=e(t[i]),s[2*i+1]=n(t[i]);S(a,s,i,0,a.length-1,0)}range(t,e,n,i){return function(t,e,n,i,r,o,a){const s=[0,t.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=a){for(let a=p;a<=d;a++)c=e[2*a],u=e[2*a+1],c>=n&&c<=r&&u>=i&&u<=o&&l.push(t[a]);continue}const f=Math.floor((p+d)/2);c=e[2*f],u=e[2*f+1],c>=n&&c<=r&&u>=i&&u<=o&&l.push(t[f]);const m=(h+1)%2;(0===h?n<=c:i<=u)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?r>=c:o>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,t,e,n,i,this.nodeSize)}within(t,e,n){return function(t,e,n,i,r,o){const a=[0,t.length-1,0],s=[],l=r*r;for(;a.length;){const c=a.pop(),u=a.pop(),h=a.pop();if(u-h<=o){for(let r=h;r<=u;r++)L(e[2*r],e[2*r+1],n,i)<=l&&s.push(t[r]);continue}const d=Math.floor((h+u)/2),p=e[2*d],f=e[2*d+1];L(p,f,n,i)<=l&&s.push(t[d]);const m=(c+1)%2;(0===c?n-r<=p:i-r<=f)&&(a.push(h),a.push(d-1),a.push(m)),(0===c?n+r>=p:i+r>=f)&&(a.push(d+1),a.push(u),a.push(m))}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}const z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},N=Math.fround||(R=new Float32Array(1),t=>(R[0]=+t,R[0]));var R;class O{constructor(t){this.options=q(Object.create(z),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:i,nodeSize:r}=this.options;e&&console.time("total time");const o=`prepare ${t.length} points`;e&&console.time(o),this.points=t;let a=[];for(let e=0;e<t.length;e++)t[e].geometry&&a.push(B(t[e],e));this.trees[i+1]=new P(a,H,$,r,Float32Array),e&&console.timeEnd(o);for(let t=i;t>=n;t--){const n=+Date.now();a=this._cluster(a,t),this.trees[t]=new P(a,H,$,r,Float32Array),e&&console.log("z%d: %d clusters in %dms",t,a.length,+Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,t[1]));let r=180===t[2]?180:((t[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,r=180;else if(n>r){const t=this.getClusters([n,i,180,o],e),a=this.getClusters([-180,i,r,o],e);return t.concat(a)}const a=this.trees[this._limitZoom(e)],s=a.range(j(n),V(o),j(r),V(i)),l=[];for(const t of s){const e=a.points[t];l.push(e.numPoints?U(e):this.points[e.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const o=r.points[e];if(!o)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=r.within(o.x,o.y,a),l=[];for(const e of s){const n=r.points[e];n.parentId===t&&l.push(n.numPoints?U(n):this.points[n.index])}if(0===l.length)throw new Error(i);return l}getLeaves(t,e,n){const i=[];return this._appendLeaves(i,t,e=e||10,n=n||0,0),i}getTile(t,e,n){const i=this.trees[this._limitZoom(t)],r=Math.pow(2,t),{extent:o,radius:a}=this.options,s=a/o,l=(n-s)/r,c=(n+1+s)/r,u={features:[]};return this._addTileFeatures(i.range((e-s)/r,l,(e+1+s)/r,c),i.points,e,n,r,u),0===e&&this._addTileFeatures(i.range(1-s/r,l,1,c),i.points,r,n,r,u),e===r-1&&this._addTileFeatures(i.range(0,l,s/r,c),i.points,-1,n,r,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,i,r){const o=this.getChildren(e);for(const e of o){const o=e.properties;if(o&&o.cluster?r+o.point_count<=i?r+=o.point_count:r=this._appendLeaves(t,o.cluster_id,n,i,r):r<i?r++:t.push(e),t.length===n)break}return r}_addTileFeatures(t,e,n,i,r,o){for(const a of t){const t=e[a],s=t.numPoints;let l,c,u;if(s)l=Y(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=j(e.geometry.coordinates[0]),u=V(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*r-n)),Math.round(this.options.extent*(u*r-i))]],tags:l};let d;s?d=t.id:this.options.generateId?d=t.index:this.points[t.index].id&&(d=this.points[t.index].id),void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:i,extent:r,reduce:o,minPoints:a}=this.options,s=i/(r*Math.pow(2,e));for(let i=0;i<t.length;i++){const r=t[i];if(r.zoom<=e)continue;r.zoom=e;const l=this.trees[e+1],c=l.within(r.x,r.y,s),u=r.numPoints||1;let h=u;for(const t of c){const n=l.points[t];n.zoom>e&&(h+=n.numPoints||1)}if(h>=a){let t=r.x*u,a=r.y*u,s=o&&u>1?this._map(r,!0):null;const d=(i<<5)+(e+1)+this.points.length;for(const n of c){const i=l.points[n];if(i.zoom<=e)continue;i.zoom=e;const c=i.numPoints||1;t+=i.x*c,a+=i.y*c,i.parentId=d,o&&(s||(s=this._map(r,!0)),o(s,this._map(i)))}r.parentId=d,n.push(F(t/h,a/h,d,h,s))}else if(n.push(r),h>1)for(const t of c){const i=l.points[t];i.zoom<=e||(i.zoom=e,n.push(i))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?q({},t.properties):t.properties;const n=this.points[t.index].properties,i=this.options.map(n);return e&&i===n?q({},i):i}}function F(t,e,n,i,r){return{x:N(t),y:N(e),zoom:1/0,id:n,parentId:-1,numPoints:i,properties:r}}function B(t,e){const[n,i]=t.geometry.coordinates;return{x:N(j(n)),y:N(V(i)),zoom:1/0,index:e,parentId:-1}}function U(t){return{type:"Feature",id:t.id,properties:Y(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),G(t.y)]}};var e}function Y(t){const e=t.numPoints,n=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return q(q({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function j(t){return t/360+.5}function V(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function G(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function q(t,e){for(const n in e)t[n]=e[n];return t}function H(t){return t.x}function $(t){return t.y}function Z(t,e,n,i){for(var r,o=i,a=n-e>>1,s=n-e,l=t[e],c=t[e+1],u=t[n],h=t[n+1],d=e+3;d<n;d+=3){var p=W(t[d],t[d+1],l,c,u,h);if(p>o)r=d,o=p;else if(p===o){var f=Math.abs(d-a);f<s&&(r=d,s=f)}}o>i&&(r-e>3&&Z(t,e,r,i),t[r+2]=o,n-r>3&&Z(t,r,n,i))}function W(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var l=((t-n)*a+(e-i)*s)/(a*a+s*s);l>1?(n=r,i=o):l>0&&(n+=a*l,i+=s*l)}return(a=t-n)*a+(s=e-i)*s}function X(t,e,n,i){var r={id:void 0===t?null:t,type:e,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)K(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<e.length;i++)K(t,e[i]);else if("MultiPolygon"===n)for(i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)K(t,e[i][r])}(r),r}function K(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function J(t,e,n,i){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===o)Q(r,s);else if("MultiPoint"===o)for(var c=0;c<r.length;c++)Q(r[c],s);else if("LineString"===o)tt(r,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<r.length;c++)tt(r[c],s=[],a,!1),t.push(X(l,"LineString",s,e.properties));return}et(r,s,a,!1)}else if("Polygon"===o)et(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)J(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<r.length;c++){var u=[];et(r[c],u,a,!0),s.push(u)}}t.push(X(l,o,s,e.properties))}}function Q(t,e){e.push(nt(t[0])),e.push(it(t[1])),e.push(0)}function tt(t,e,n,i){for(var r,o,a=0,s=0;s<t.length;s++){var l=nt(t[s][0]),c=it(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(a+=i?(r*c-l*o)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(c-o,2))),r=l,o=c}var u=e.length-3;e[2]=1,Z(e,0,u,n),e[u+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function et(t,e,n,i){for(var r=0;r<t.length;r++){var o=[];tt(t[r],o,n,i),e.push(o)}}function nt(t){return t/360+.5}function it(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function rt(t,e,n,i,r,o,a,s){if(i/=e,o>=(n/=e)&&a<i)return t;if(a<n||o>=i)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,d=u.type,p=0===r?u.minX:u.minY,f=0===r?u.maxX:u.maxY;if(p>=n&&f<i)l.push(u);else if(!(f<n||p>=i)){var m=[];if("Point"===d||"MultiPoint"===d)ot(h,m,n,i,r);else if("LineString"===d)at(h,m,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===d)lt(h,m,n,i,r,!1);else if("Polygon"===d)lt(h,m,n,i,r,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var _=[];lt(h[g],_,n,i,r,!0),_.length&&m.push(_)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(X(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(X(u.id,d,m,u.tags))}}}return l.length?l:null}function ot(t,e,n,i,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];a>=n&&a<=i&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function at(t,e,n,i,r,o,a){for(var s,l,c=st(t),u=0===r?ut:ht,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],m=t[d+2],g=t[d+3],_=t[d+4],y=0===r?p:f,v=0===r?g:_,b=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-_,2))),y<n?v>n&&(l=u(c,p,f,g,_,n),a&&(c.start=h+s*l)):y>i?v<i&&(l=u(c,p,f,g,_,i),a&&(c.start=h+s*l)):ct(c,p,f,m),v<n&&y>=n&&(l=u(c,p,f,g,_,n),b=!0),v>i&&y<=i&&(l=u(c,p,f,g,_,i),b=!0),!o&&b&&(a&&(c.end=h+s*l),e.push(c),c=st(t)),a&&(h+=s)}var x=t.length-3;p=t[x],f=t[x+1],m=t[x+2],(y=0===r?p:f)>=n&&y<=i&&ct(c,p,f,m),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&ct(c,c[0],c[1],c[2]),c.length&&e.push(c)}function st(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function lt(t,e,n,i,r,o){for(var a=0;a<t.length;a++)at(t[a],e,n,i,r,o,!1)}function ct(t,e,n,i){t.push(e),t.push(n),t.push(i)}function ut(t,e,n,i,r,o){var a=(o-e)/(i-e);return t.push(o),t.push(n+(r-n)*a),t.push(1),a}function ht(t,e,n,i,r,o){var a=(o-n)/(r-n);return t.push(e+(i-e)*a),t.push(o),t.push(1),a}function dt(t,e){for(var n=[],i=0;i<t.length;i++){var r,o=t[i],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=pt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(pt(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var l=[],c=0;c<o.geometry[s].length;c++)l.push(pt(o.geometry[s][c],e));r.push(l)}n.push(X(o.id,a,r,o.tags))}return n}function pt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var i=0;i<t.length;i+=3)n.push(t[i]+e,t[i+1],t[i+2]);return n}function ft(t,e){if(t.transformed)return t;var n,i,r,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(i=0;i<c.length;i+=2)l.geometry.push(mt(c[i],c[i+1],e,o,a,s));else for(i=0;i<c.length;i++){var h=[];for(r=0;r<c[i].length;r+=2)h.push(mt(c[i][r],c[i][r+1],e,o,a,s));l.geometry.push(h)}}return t.transformed=!0,t}function mt(t,e,n,i,r,o){return[Math.round(n*(t*i-r)),Math.round(n*(e*i-o))]}function gt(t,e,n,i,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,_t(a,t[s],o,r);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<a.minX&&(a.minX=l),c<a.minY&&(a.minY=c),u>a.maxX&&(a.maxX=u),h>a.maxY&&(a.maxY=h)}return a}function _t(t,e,n,i){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)yt(a,r,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)yt(a,r[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<r.length;l++){var c=r[l];for(s=0;s<c.length;s++)yt(a,c[s],t,n,!0,0===s)}if(a.length){var u=e.tags||null;if("LineString"===o&&i.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var d={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function yt(t,e,n,i,r,o){var a=i*i;if(i>0&&e.size<(r?a:i))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===i||e[l+2]>a)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;r&&function(t,e){for(var n=0,i=0,r=t.length,o=r-2;i<r;o=i,i+=2)n+=(t[i]-t[o])*(t[i+1]+t[o+1]);if(n>0===e)for(i=0,r=t.length;i<r/2;i+=2){var a=t[i],s=t[i+1];t[i]=t[r-2-i],t[i+1]=t[r-1-i],t[r-2-i]=a,t[r-1-i]=s}}(s,o),t.push(s)}}function vt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var i=0;i<t.features.length;i++)J(n,t.features[i],e,i);else J(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(t,e){var n=e.buffer/e.extent,i=t,r=rt(t,1,-1-n,n,0,-1,2,e),o=rt(t,1,1-n,2+n,0,-1,2,e);return(r||o)&&(i=rt(t,1,-n,1+n,0,-1,2,e)||[],r&&(i=dt(r,1).concat(i)),o&&(i=i.concat(dt(o,-1)))),i}(i,e)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function bt(t,e,n){return 32*((1<<t)*n+e)+t}function xt(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const i=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!i)return e(null,null);const r=new h(i.features);let o=g(r);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:r,rawData:o.buffer})}vt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vt.prototype.splitTile=function(t,e,n,i,r,o,a){for(var s=[t,e,n,i],l=this.options,c=l.debug;s.length;){i=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=bt(e,n,i),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=gt(t,e,n,i,l),this.tileCoords.push({z:e,x:n,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,i,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(n!==Math.floor(o/f)||i!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var m,g,_,y,v,b,x=.5*l.buffer/l.extent,w=.5-x,E=.5+x,M=1+x;m=g=_=y=null,v=rt(t,u,n-x,n+E,0,d.minX,d.maxX,l),b=rt(t,u,n+w,n+M,0,d.minX,d.maxX,l),t=null,v&&(m=rt(v,u,i-x,i+E,1,d.minY,d.maxY,l),g=rt(v,u,i+w,i+M,1,d.minY,d.maxY,l),v=null),b&&(_=rt(b,u,i-x,i+E,1,d.minY,d.maxY,l),y=rt(b,u,i+w,i+M,1,d.minY,d.maxY,l),b=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*i),s.push(g||[],e+1,2*n,2*i+1),s.push(_||[],e+1,2*n+1,2*i),s.push(y||[],e+1,2*n+1,2*i+1)}}},vt.prototype.getTile=function(t,e,n){var i=this.options,r=i.extent,o=i.debug;if(t<0||t>24)return null;var a=1<<t,s=bt(t,e=(e%a+a)%a,n);if(this.tiles[s])return ft(this.tiles[s],r);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,c=t,u=e,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[bt(c,u,h)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,u,h),o>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ft(this.tiles[s],r):null):null};class wt extends t.VectorTileWorkerSource{constructor(t,e,n,i,r){super(t,e,n,i,xt),r&&(this.loadGeoJSON=r)}loadData(e,n){const i=e&&e.request,r=i&&i.collectResourceTiming;this.loadGeoJSON(e,((o,s)=>{if(o||!s)return n(o);if("object"!=typeof s)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{a(s,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const i=s.features.filter((t=>n.value.evaluate({zoom:0},t)));s={type:"FeatureCollection",features:i}}this._geoJSONIndex=e.cluster?new O(function({superclusterOptions:e,clusterProperties:n}){if(!n||!e)return e;const i={},r={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const e of s){const[o,a]=n[e],s=t.createExpression(a),l=t.createExpression("string"==typeof o?[o,["accumulated"],["get",e]]:o);i[e]=s.value,r[e]=l.value}return e.map=t=>{a.properties=t;const e={};for(const t of s)e[t]=i[t].evaluate(o,a);return e},e.reduce=(t,e)=>{a.properties=e;for(const e of s)o.accumulated=t[e],t[e]=r[e].evaluate(o,a)},e}(e)).load(s.features):function(t,e){return new vt(t,e)}(s,e.geojsonVtOptions)}catch(o){return n(o)}this.loaded={};const l={};if(r){const n=t.getPerformanceMeasurement(i);n&&(l.resourceTiming={},l.resourceTiming[e.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}}))}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class Et{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded=!1,this.workerSourceTypes={vector:t.VectorTileWorkerSource,geojson:wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}checkIfReady(t,e,n){n()}setReferrer(t,e){this.referrer=e}spriteLoaded(e,n){this.isSpriteLoaded=n;for(const i in this.workerSources[e]){const r=this.workerSources[e][i];for(const e in r)r[e]instanceof t.VectorTileWorkerSource&&(r[e].isSpriteLoaded=n,r[e].fire(new t.Event("isSpriteLoaded")))}}setImages(t,e,n){this.availableImages[t]=e;for(const n in this.workerSources[t]){const i=this.workerSources[t][n];for(const t in i)i[t].availableImages=e}n()}enableTerrain(t,e,n){this.terrain=e,n()}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(e,n,i){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(e,n.type,n.source).loadTile(r,i)}loadDEMTile(e,n,i){const r=this.enableTerrain?t.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(e,n.source).loadTile(r,i)}reloadTile(e,n,i){const r=this.enableTerrain?t.extend({enableTerrain:this.terrain},n):n;this.getWorkerSource(e,n.type,n.source).reloadTile(r,i)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const i=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==i.removeSource?i.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,i){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();i(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),n)}}catch(t){i(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e}getWorkerSource(t,e,n){return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:(e,n,i,r,o,a)=>{this.actor.send(e,n,i,t,o,a)},scheduler:this.actor.scheduler},this.getLayerIndex(t),this.getAvailableImages(t),this.isSpriteLoaded)),this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new o),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(t,e,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Et(self)),Et})),i(0,(function(t){var e=n;function n(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{e=new Worker(i),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(i),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===i[e=t&&t.failIfMajorPerformanceCaveat]&&(i[e]=function(t){var e,i=function(t){var e=document.createElement("canvas"),i=Object.create(n.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=t,e.getContext("webgl",i)||e.getContext("experimental-webgl",i)}(t);if(!i)return!1;try{e=i.createShader(i.VERTEX_SHADER)}catch(t){return!1}return!(!e||i.isContextLost())&&(i.shaderSource(e,"void main() {}"),i.compileShader(e),!0===i.getShaderParameter(e,i.COMPILE_STATUS))}(e)),i[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var i={};function r(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!r(t[n],e[n]))return!1;return!0}return t===e}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const o={create:function(e,n,i){const r=t.window.document.createElement(e);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},a=t.window.document&&t.window.document.documentElement.style,s=a&&void 0!==a.userSelect?"userSelect":"WebkitUserSelect";let l;o.disableDrag=function(){a&&s&&(l=a[s],a[s]="none")},o.enableDrag=function(){a&&s&&(a[s]=l)},o.setTransform=function(t,e){t.style.transform=e};let c=!1;try{const e=Object.defineProperty({},"passive",{get(){c=!0}});t.window.addEventListener("test",e,e),t.window.removeEventListener("test",e,e)}catch(t){c=!1}o.addEventListener=function(t,e,n,i={}){t.addEventListener(e,n,"passive"in i&&c?i:i.capture)},o.removeEventListener=function(t,e,n,i={}){t.removeEventListener(e,n,"passive"in i&&c?i:i.capture)};const u=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",u,!0)};function h(e,n,i){const r=e.offsetWidth===n.width?1:e.offsetWidth/n.width;return new t.pointGeometry((i.clientX-n.left)*r,(i.clientY-n.top)*r)}o.suppressClick=function(){t.window.addEventListener("click",u,!0),t.window.setTimeout((()=>{t.window.removeEventListener("click",u,!0)}),0)},o.mousePos=function(t,e){const n=t.getBoundingClientRect();return h(t,n,e)},o.touchPos=function(t,e){const n=t.getBoundingClientRect(),i=[];for(let r=0;r<e.length;r++)i.push(h(t,n,e[r]));return i},o.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},o.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};class d{constructor(t,e){this.pos=t,this.dir=e}intersectsPlane(e,n,i){const r=t.dot(n,this.dir);if(Math.abs(r)<1e-6)return!1;const o=t.dot(t.sub(t.create(),e,this.pos),n)/r,a=t.scaleAndAdd(t.create(),this.pos,this.dir,o);return t.copy(i,a),!0}}class p{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,n,i){const r=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((i=>{const o=t.transformMat4([],i,e),a=1/o[3]/n*r;return t.mul(o,o,[a,a,1/o[3],a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const n=t.sub([],o[e[0]],o[e[1]]),i=t.sub([],o[e[2]],o[e[1]]),r=t.normalize([],t.cross([],n,i)),a=-t.dot(r,o[e[1]]);return r.concat(a)}));return new p(o,a)}}class f{constructor(e,n){this.min=e,this.max=n,this.center=t.scale([],t.add([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],i=t.clone(this.min),r=t.clone(this.max);for(let t=0;t<n.length;t++)i[t]=n[t]?this.min[t]:this.center[t],r[t]=n[t]?this.center[t]:this.max[t];return r[2]=this.max[2],new f(i,r)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}intersects(e){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let r=0;r<e.planes.length;r++){const o=e.planes[r];let a=0;for(let e=0;e<n.length;e++)a+=t.dot$1(o,n[e])>=0;if(0===a)return 0;a!==n.length&&(i=!1)}if(i)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let r=0;r<e.points.length;r++){const o=e.points[r][t]-this.min[t];n=Math.min(n,o),i=Math.max(i,o)}if(i<0||n>this.max[t]-this.min[t])return 0}return 1}}function m(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class g extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),i=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),i=!1),i}_validateStretch(t,e){if(!t)return!0;let n=0;for(const i of t){if(i[0]<n||i[1]<i[0]||e<i[1])return!1;n=i[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const e of t)this.images[e]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const i={};for(const n of e){this.images[n]||this.fire(new t.Event("styleimagemissing",{id:n}));const e=this.images[n];e?i[n]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,i)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],i=this.getImage(e);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new t.ImagePosition(n,i);this.patterns[e]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:i}=t.potpack(e),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const e in this.patterns){const{bin:n}=this.patterns[e],i=n.x+1,o=n.y+1,a=this.images[e].data,s=a.width,l=a.height;t.RGBAImage.copy(a,r,{x:0,y:0},{x:i,y:o},{width:s,height:l}),t.RGBAImage.copy(a,r,{x:0,y:l-1},{x:i,y:o-1},{width:s,height:1}),t.RGBAImage.copy(a,r,{x:0,y:0},{x:i,y:o+l},{width:s,height:1}),t.RGBAImage.copy(a,r,{x:s-1,y:0},{x:i-1,y:o},{width:1,height:l}),t.RGBAImage.copy(a,r,{x:0,y:0},{x:i+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const e of t){if(this.callbackDispatchedThisFrame[e])continue;this.callbackDispatchedThisFrame[e]=!0;const t=this.images[e];m(t)&&this.updateImage(e,t)}}}const _=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return function([e,n,i]){const r=t.degToRad(n+90),o=t.degToRad(i);return{x:e*Math.cos(r)*Math.sin(o),y:e*Math.sin(r)*Math.sin(o),z:e*Math.cos(o),azimuthal:n,polar:i}}(e.expression.evaluate(n))}interpolate(e,n,i){return{x:t.number(e.x,n.x,i),y:t.number(e.y,n.y,i),z:t.number(e.z,n.z,i),azimuthal:t.number(e.azimuthal,n.azimuthal,i),polar:t.number(e.polar,n.polar,i)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),y="-transition";class v extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(_),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(t.validateLight,e,n))for(const n in e){const i=e[n];t.endsWith(n,y)?this._transitionable.setTransition(n.slice(0,-y.length),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}const b=new t.Properties({source:new t.DataConstantProperty(t.spec.terrain.source),exaggeration:new t.DataConstantProperty(t.spec.terrain.exaggeration)}),x="-transition";class w extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(b),this.set(e),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(e){for(const n in e){const i=e[n];t.endsWith(n,x)?this._transitionable.setTransition(n.slice(0,-x.length),i):this._transitionable.setValue(n,i)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}}function E(e,n,i,r){const o=t.smoothstep(45,65,i),[a,s]=M(e,r),l=t.length(n);let c=1-Math.min(1,Math.exp((l-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*e.alpha}function M(t,e){const n=.5/Math.tan(.5*e);return[t.range[0]+n,t.range[1]+n]}const T=new t.Properties({range:new t.DataConstantProperty(t.spec.fog.range),color:new t.DataConstantProperty(t.spec.fog.color),"horizon-blend":new t.DataConstantProperty(t.spec.fog["horizon-blend"])}),S="-transition";class k extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(T),this.set(e),this._transitioning=this._transitionable.untransitioned()}get state(){return{range:this.properties.get("range"),horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(e,n={}){if(!this._validate(t.validateFog,e,n))for(const n in e){const i=e[n];t.endsWith(n,S)?this._transitionable.setTransition(n.slice(0,-S.length),i):this._transitionable.setValue(n,i)}}getOpacity(e){const n=this.properties&&this.properties.get("color")||1;return t.smoothstep(45,65,e)*n.a}getOpacityAtLatLng(e,n){return function(e,n,i){const r=t.MercatorCoordinate.fromLngLat(n),o=i.elevation?i.elevation.getAtPointOrZero(r):0,a=[r.x,r.y,o];return t.transformMat4$1(a,a,i.mercatorFogMatrix),E(e,a,i.pitch,i._fov)}(this.state,e,n)}getFovAdjustedRange(t){return M(this.state,t)}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,i){return(!i||!1!==i.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class C{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const i=this.workerPool.acquire(this.id);for(let t=0;t<i.length;t++){const e=new C.Actor(i[t],n,this.id);e.name=`Worker ${t}`,this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(e,n,i){t.asyncAll(this.actors,((t,i)=>{t.send(e,n,i)}),i=i||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function I(e,n,i){return n*(t.EXTENT/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}C.Actor=t.Actor;class L{constructor(t,e,n,i){this.screenBounds=t,this.cameraPoint=e,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map((t=>i.pointCoordinate3D(t))),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(e,n){let i,r;if(e instanceof t.pointGeometry||"number"==typeof e[0]){const o=t.pointGeometry.convert(e);i=[t.pointGeometry.convert(e)],r=n.isPointAboveHorizon(o)}else{const o=t.pointGeometry.convert(e[0]),a=t.pointGeometry.convert(e[1]);i=[o,a],r=t.polygonizeBounds(o,a).every((t=>n.isPointAboveHorizon(t)))}return new L(i,n.getCameraPoint(),r,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(e){return t.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],e)}bufferedCameraGeometry(e){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new t.pointGeometry(1,1)):this.screenBounds[1],r=t.polygonizeBounds(n,i,0,!1);return this.cameraPoint.y>i.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<i.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=i.x?r[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(r[3]=this.cameraPoint)),t.bufferConvexPolygon(r,e)}containsTile(e,n,i){const r=e.queryPadding+1,o=i?this._bufferedCameraMercator(r,n).map((t=>e.tileID.getTilePoint(t))):this._bufferedScreenMercator(r,n).map((t=>e.tileID.getTilePoint(t))),a=this.screenGeometryMercator.map((t=>e.tileID.getTileVec3(t))),s=a.map((e=>new t.pointGeometry(e[0],e[1]))),l=n.getFreeCameraOptions().position||new t.MercatorCoordinate(0,0,0),c=e.tileID.getTileVec3(l),u=a.map((e=>{const n=t.sub(e,e,c);return t.normalize(n,n),new d(c,n)})),h=I(e,1,n.zoom);if(t.polygonIntersectsBox(o,0,0,t.EXTENT,t.EXTENT))return{queryGeometry:this,tilespaceGeometry:s,tilespaceRays:u,bufferedTilespaceGeometry:o,bufferedTilespaceBounds:(p=t.getBounds(o),p.min.x=t.clamp(p.min.x,0,t.EXTENT),p.min.y=t.clamp(p.min.y,0,t.EXTENT),p.max.x=t.clamp(p.max.x,0,t.EXTENT),p.max.y=t.clamp(p.max.y,0,t.EXTENT),p),tile:e,tileID:e.tileID,pixelToTileUnitsFactor:h};var p}_bufferedScreenMercator(t,e){const n=D(t);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{const i=this.bufferedScreenGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._screenRaycastCache[n]=i,i}}_bufferedCameraMercator(t,e){const n=D(t);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{const i=this.bufferedCameraGeometry(t).map((t=>e.pointCoordinate3D(t)));return this._cameraRaycastCache[n]=i,i}}}function D(t){return 100*t|0}function A(e,n,i){const r=function(r,o){if(r)return i(r);if(o){const r=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(r.vectorLayers=o.vector_layers,r.vectorLayerIds=r.vectorLayers.map((t=>t.id))),r.tiles=n.canonicalizeTileset(r,e.url),i(null,r)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.exported.frame((()=>r(null,e)))}class P{constructor(e,n,i){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=i||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),i=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=i&&e.x<o&&e.y>=r&&e.y<a}}class z{constructor(t,e,n){this.context=t;const i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const N={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class R{constructor(t,e,n,i){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=i,this.context=t;const r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const i=e.attributes[this.attributes[n].name];void 0!==i&&t.enableVertexAttribArray(i)}}setVertexAttribPointers(t,e,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],o=e.attributes[r.name];void 0!==o&&t.vertexAttribPointer(o,r.components,t[N[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class O{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class F extends O{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class B extends O{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class U extends O{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Y extends O{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class j extends O{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class V extends O{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class G extends O{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class q extends O{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class H extends O{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class $ extends O{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Z extends O{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class W extends O{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class X extends O{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class K extends O{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class J extends O{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Q extends O{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class tt extends O{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class et extends O{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class nt extends O{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class it extends O{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class rt extends O{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ot extends O{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class at extends O{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class st extends O{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class lt extends O{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class ct extends O{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ut extends O{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ht extends O{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class dt extends O{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class pt extends O{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class ft extends O{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class mt extends O{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class gt extends mt{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class _t extends mt{attachment(){return this.gl.DEPTH_ATTACHMENT}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,this.attachment(),e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class yt extends _t{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class vt{constructor(t,e,n,i){this.context=t,this.width=e,this.height=n;const r=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new gt(t,r),i&&(this.depthAttachment=new _t(t,r))}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class bt{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new F(this),this.clearDepth=new B(this),this.clearStencil=new U(this),this.colorMask=new Y(this),this.depthMask=new j(this),this.stencilMask=new V(this),this.stencilFunc=new G(this),this.stencilOp=new q(this),this.stencilTest=new H(this),this.depthRange=new $(this),this.depthTest=new Z(this),this.depthFunc=new W(this),this.blend=new X(this),this.blendFunc=new K(this),this.blendColor=new J(this),this.blendEquation=new Q(this),this.cullFace=new tt(this),this.cullFaceSide=new et(this),this.frontFace=new nt(this),this.program=new it(this),this.activeTexture=new rt(this),this.viewport=new ot(this),this.bindFramebuffer=new at(this),this.bindRenderbuffer=new st(this),this.bindTexture=new lt(this),this.bindVertexBuffer=new ct(this),this.bindElementBuffer=new ut(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ht(this),this.pixelStoreUnpack=new dt(this),this.pixelStoreUnpackPremultiplyAlpha=new pt(this),this.pixelStoreUnpackFlipY=new ft(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new z(this,t,e)}createVertexBuffer(t,e,n){return new R(this,t,e,n)}createRenderbuffer(t,e,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),r}createFramebuffer(t,e,n){return new vt(this,t,e,n)}clear({color:t,depth:e,stencil:n}){const i=this.gl;let r=0;t&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),void 0!==n&&(r|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),i.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(e){r(e.blendFunction,t.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class xt extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=A(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new P(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const i=t.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((i,r,o,a)=>{if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:o,expires:a});const i=this.map.painter.context,s=i.gl;e.texture=this.map.painter.getTileTexture(r.width),e.texture?e.texture.update(r,{useMipmap:!0}):(e.texture=new t.Texture(i,r,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),i.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let wt;var Et=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Mt extends t.Evented{constructor(t,e,n,i){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=e}load(e,n){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((i,r)=>{this._loaded=!0,i?this.fire(new t.ErrorEvent(i)):r&&(this.image=t.exported.getImageData(r),e&&(this.coordinates=e),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let n=1/0,i=1/0,r=-1/0,o=-1/0;for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.x),o=Math.max(o,t.y);const a=Math.max(r-n,o-i),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((n+r)/2*l),Math.floor((i+o)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const i=n.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Et.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Tt={vector:class extends t.Evented{constructor(e,n,i,r){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new t.DedupedRequest}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=A(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new P(n.bounds,this.minzoom,this.maxzoom)),t.postTurnstileEvent(n.tiles,this.map._requestManager._customAccessToken),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t();const e=this.map.style._getSourceCaches(this.id);for(const t of e)t.clearTiles();this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),data:void 0,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:e.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state)"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",r,o.bind(this));else if(e.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)e.request=e.actor.send("loadTile",r,o.bind(this),void 0,!0);else{const n=t.loadVectorTile.call({deduped:this._deduped},r,((t,n)=>{t||!n?o.call(this,t):(r.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},e.actor&&e.actor.send("loadTile",r,o.bind(this),void 0,!0))}),!0);e.request={cancel:n}}function o(i,r){return delete e.request,e.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id})}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:xt,"raster-dem":class extends xt{constructor(e,n,i,r){super(e,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(e,n){const i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(t,i){t&&(e.state="errored",n(t)),i&&(e.dem=i,e.dem.onDeserialize(),e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o,a,s){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData({cacheControl:a,expires:s});const n=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&(null==wt&&(wt=t.window.OffscreenCanvas&&new t.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof t.window.createImageBitmap),wt),i=1-(o.width-t.prevPowerOfTwo(o.width))/2;i<1||e.neighboringTiles||(e.neighboringTiles=this._getNeighboringTiles(e.tileID));const l=n?o:t.exported.getImageData(o,i),c={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:i};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",c,r.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(e){const n=e.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+i)%i,s=n.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new t.OverscaledTileID(e.overscaledZ,o,n.z,r,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded"}},geojson:class extends t.Evented{constructor(e,n,i,r){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(t){this.map=t,this.setData(this._data)}setData(t){return this._data=t,this._updateWorkerData(),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},i),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new t.Event("dataloading",{dataType:"source"})),this._loaded=!1;const e=t.extend({},this.workerOptions),n=this._data;"string"==typeof n?(e.request=this.map._requestManager.transformRequest(t.exported.resolveURL(n),t.ResourceType.Source),e.request.collectResourceTiming=this._collectResourceTiming):e.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,e,((e,n)=>{if(this._loaded=!0,this._pendingLoad=null,e)this.fire(new t.ErrorEvent(e));else{const e={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(e.resourceTiming=n.resourceTiming[this.id]),this.fire(new t.Event("data",e)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(e,n){const i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,tileZoom:e.tileZoom,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((t,r)=>(delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(r,this.map.painter,"reloadTile"===i),n(null)))),void 0,"loadTile"===i)}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Mt{constructor(t,e,n,i){super(t,e,n,i),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Et.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Mt,canvas:class extends Mt{constructor(e,n,i,r){super(e,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,i=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,Et.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,i.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}},St=function(e,n,i,r){const o=new Tt[n.type](e,n,i,r);if(o.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${o.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o};function kt(e,n){const i=t.identity([]);return t.scale$1(i,i,[.5*e.width,.5*-e.height,1]),t.translate(i,i,[1,-1,0]),t.multiply(i,i,e.calculateProjMatrix(n.toUnwrapped()))}function Ct(t,e,n,i,r,o,a,s=!1){const l=t.tilesIn(i,a,s);l.sort(Lt);const c=[];for(const i of l)c.push({wrappedTileID:i.tile.tileID.wrapped().key,queryResults:i.tile.queryRenderedFeatures(e,n,t._state,i,r,o,kt(t.transform,i.tile.tileID),s)});const u=function(t){const e={},n={};for(const i of t){const t=i.queryResults,r=i.wrappedTileID,o=n[r]=n[r]||{};for(const n in t){const i=t[n],r=o[n]=o[n]||{},a=e[n]=e[n]||[];for(const t of i)r[t.featureIndex]||(r[t.featureIndex]=!0,a.push(t))}}return e}(c);for(const e in u)u[e].forEach((e=>{const n=e.feature,i=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=i}));return u}function It(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),i=[],r={};for(let t=0;t<n.length;t++){const o=n[t],a=o.tileID.canonical.key;r[a]||(r[a]=!0,o.querySourceFeatures(i,e))}return i}function Lt(t,e){const n=t.tileID,i=e.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function Dt(){return null!=$r.workerClass?new $r.workerClass:new t.window.Worker($r.workerUrl)}const At="mapboxgl_preloaded_worker_pool";class Pt{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Pt.workerCount;)this.workers.push(new Dt);return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[At]}numActive(){return Object.keys(this.active).length}}let zt;function Nt(){return zt||(zt=new Pt),zt}function Rt(e,n){const i={};for(const t in e)"ref"!==t&&(i[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(i[t]=n[t])})),i}function Ot(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Rt(t[n],e[t[n].ref]));return t}Pt.workerCount=2;const Ft={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog"};function Bt(t,e,n){n.push({command:Ft.addSource,args:[t,e[t]]})}function Ut(t,e,n){e.push({command:Ft.removeSource,args:[t]}),n[t]=!0}function Yt(t,e,n,i){Ut(t,n,i),Bt(t,e,n)}function jt(t,e,n){let i;for(i in t[n])if(t[n].hasOwnProperty(i)&&"data"!==i&&!r(t[n][i],e[n][i]))return!1;for(i in e[n])if(e[n].hasOwnProperty(i)&&"data"!==i&&!r(t[n][i],e[n][i]))return!1;return!0}function Vt(t,e,n,i,o,a){let s;for(s in e=e||{},t=t||{})t.hasOwnProperty(s)&&(r(t[s],e[s])||n.push({command:a,args:[i,s,e[s],o]}));for(s in e)e.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(r(t[s],e[s])||n.push({command:a,args:[i,s,e[s],o]}))}function Gt(t){return t.id}function qt(t,e){return t[e.id]=e,t}class Ht{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let t=1;t<this.points.length;t++)this._distances[t]=this._distances[t-1]+this.points[t].dist(this.points[t-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,i=this._distances[n];const r=e*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const o=n-1,a=this._distances[o],s=i-a,l=s>0?(r-a)/s:0;return this.points[o].mult(1-l).add(this.points[n].mult(l))}}class $t{constructor(t,e,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let t=0;t<this.xCellCount*this.yCellCount;t++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,i,r){this._forEachCell(e,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(t,e,n,i){this._forEachCell(e-i,n-i,e+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(i)}_insertBoxCell(t,e,n,i,r,o){this.boxCells[r].push(o)}_insertCircleCell(t,e,n,i,r,o){this.circleCells[r].push(o)}_query(t,e,n,i,r,o){if(n<0||t>this.width||i<0||e>this.height)return!r&&[];const a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(let t=0;t<this.boxKeys.length;t++)a.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],i=this.circles[3*t+2];a.push({key:this.circleKeys[t],x1:e-i,y1:n-i,x2:e+i,y2:n+i})}return o?a.filter(o):a}return this._forEachCell(t,e,n,i,this._queryCell,a,{hitTest:r,seenUids:{box:{},circle:{}}},o),r?a.length>0:a}_queryCircle(t,e,n,i,r){const o=t-n,a=t+n,s=e-n,l=e+n;if(a<0||o>this.width||l<0||s>this.height)return!i&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:i,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},r),i?c.length>0:c}query(t,e,n,i,r){return this._query(t,e,n,i,!1,r)}hitTest(t,e,n,i,r){return this._query(t,e,n,i,!0,r)}hitTestCircle(t,e,n,i){return this._queryCircle(t,e,n,!0,i)}_queryCell(t,e,n,i,r,o,a,s){const l=a.seenUids,c=this.boxCells[r];if(null!==c){const r=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(t<=r[c+2]&&e<=r[c+3]&&n>=r[c+0]&&i>=r[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:r[c],y1:r[c+1],x2:r[c+2],y2:r[c+3]})}}}const u=this.circleCells[r];if(null!==u){const r=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(r[u],r[u+1],r[u+2],t,e,n,i)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const t=r[u],e=r[u+1],n=r[u+2];o.push({key:this.circleKeys[c],x1:t-n,y1:e-n,x2:t+n,y2:e+n})}}}}}_queryCellCircle(t,e,n,i,r,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[r];if(null!==u){const t=this.bboxes;for(const e of u)if(!c.box[e]){c.box[e]=!0;const n=4*e;if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(this.boxKeys[e])))return o.push(!0),!0}}const h=this.circleCells[r];if(null!==h){const t=this.circles;for(const e of h)if(!c.circle[e]){c.circle[e]=!0;const n=3*e;if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[e])))return o.push(!0),!0}}}_forEachCell(t,e,n,i,r,o,a,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(i);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(r.call(this,t,e,n,i,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,i,r,o){const a=i-t,s=r-e,l=n+o;return l*l>a*a+s*s}_circleAndRectCollide(t,e,n,i,r,o,a){const s=(o-i)/2,l=Math.abs(t-(i+s));if(l>s+n)return!1;const c=(a-r)/2,u=Math.abs(e-(r+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}const Zt=Math.tan(85*Math.PI/180);function Wt(e,n,i,r,o){const a=t.create$1();return n?(t.scale$1(a,a,[1/o,1/o,1]),i||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function Xt(e,n,i,r,o){if(n){const n=t.clone$1(e);return t.scale$1(n,n,[o,o,1]),i||t.rotateZ(n,n,-r.angle),n}return r.glCoordMatrix}function Kt(e,n,i=0){const r=[e.x,e.y,i,1];i?t.transformMat4(r,r,n):le(r,r,n);const o=r[3];return{point:new t.pointGeometry(r[0]/o,r[1]/o),signedDistanceFromCamera:o}}function Jt(t,e){return Math.min(.5+t/e*.5,1.5)}function Qt(t,e){const n=t[0]/t[3],i=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&i>=-e[1]&&i<=e[1]}function te(e,n,i,r,o,a,s,l,c){const u=r?e.textSizeData:e.iconSizeData,h=t.evaluateSizeForZoom(u,i.transform.zoom),d=[256/i.width*2+1,256/i.height*2+1],p=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;p.clear();const f=e.lineVertexArray,m=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=i.transform.width/i.transform.height;let _=!1;for(let r=0;r<m.length;r++){const y=m.get(r);if(y.writingMode!==t.WritingMode.vertical||_||0!==r&&m.get(r-1).writingMode===t.WritingMode.horizontal||(_=!0),y.hidden||y.writingMode===t.WritingMode.vertical&&!_){se(y.numGlyphs,p);continue}_=!1;const v=c?c({x:y.anchorX,y:y.anchorY}):0,b=[y.anchorX,y.anchorY,v,1];if(t.transformMat4(b,b,n),!Qt(b,d)){se(y.numGlyphs,p);continue}const x=Jt(i.transform.cameraToCenterDistance,b[3]),w=t.evaluateSizeForFeature(u,h,y),E=s?w/x:w*x,M=new t.pointGeometry(y.anchorX,y.anchorY),T=Kt(M,o,v);if(T.signedDistanceFromCamera<=0){se(y.numGlyphs,p);continue}const S=T.point;let k={};const C=s?null:c,I=ie(y,E,!1,l,n,o,a,e.glyphOffsetArray,f,p,S,M,k,g,C);_=I.useVertical,C&&I.needsFlipping&&(k={}),(I.notEnoughRoom||_||I.needsFlipping&&ie(y,E,!0,l,n,o,a,e.glyphOffsetArray,f,p,S,M,k,g,C).notEnoughRoom)&&se(y.numGlyphs,p)}r?e.text.dynamicLayoutVertexBuffer.updateData(p):e.icon.dynamicLayoutVertexBuffer.updateData(p)}function ee(t,e,n,i,r,o,a,s,l,c,u,h,d){const p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),_=e.getoffsetX(p-1),y=oe(t*g,n,i,r,o,a,s.segment,f,m,l,c,u,h,d,!0);if(!y)return null;const v=oe(t*_,n,i,r,o,a,s.segment,f,m,l,c,u,h,d,!0);return v?{first:y,last:v}:null}function ne(e,n,i,r){return e.writingMode===t.WritingMode.horizontal&&Math.abs(i.y-n.y)>Math.abs(i.x-n.x)*r?{useVertical:!0}:e.writingMode===t.WritingMode.vertical?n.y<i.y?{needsFlipping:!0}:null:0!==e.flipState&&function(t,e,n){const i=(e.x-t.x)*n;return 0===i||Math.abs((e.y-t.y)/i)>Zt}(n,i,r)?1===e.flipState?{needsFlipping:!0}:null:n.x>i.x?{needsFlipping:!0}:null}function ie(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=n/24,_=e.lineOffsetX*g,y=e.lineOffsetY*g;let v;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,o=e.lineStartIndex+e.lineLength,u=ee(g,l,_,y,i,h,d,e,c,a,p,m);if(!u)return{notEnoughRoom:!0};const b=Kt(u.first.point,s).point,x=Kt(u.last.point,s).point;if(r&&!i){const t=ne(e,b,x,f);if(e.flipState=t&&t.needsFlipping?1:2,t)return t}v=[u.first];for(let r=e.glyphStartIndex+1;r<t-1;r++)v.push(oe(g*l.getoffsetX(r),_,y,i,h,d,e.segment,n,o,c,a,p,m));v.push(u.last)}else{if(r&&!i){const n=Kt(d,o).point,i=e.lineStartIndex+e.segment+1,r=new t.pointGeometry(c.getx(i),c.gety(i)),a=Kt(r,o),s=ne(e,n,a.signedDistanceFromCamera>0?a.point:re(d,r,n,1,o),f);if(e.flipState=s&&s.needsFlipping?1:2,s)return s}const n=oe(g*l.getoffsetX(e.glyphStartIndex),_,y,i,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,p,m);if(!n)return{notEnoughRoom:!0};v=[n]}for(const e of v)t.addDynamicAttributes(u,e.point,e.angle);return{}}function re(t,e,n,i,r,o){const a=t.add(t.sub(e)._unit()),s=Kt(a,r,o?o(a):0).point,l=n.sub(s);return n.add(l._mult(i/l.mag()))}function oe(e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=r?e-n:e+n;let _=g>0?1:-1,y=0;r&&(_*=-1,y=Math.PI),_<0&&(y+=Math.PI);let v=_>0?l+s:l+s+1,b=o,x=o,w=0,E=0;const M=Math.abs(g),T=[],S=[];let k=a;const C=()=>{const e=v-_;return 0===w?a:new t.pointGeometry(u.getx(e),u.gety(e))},I=()=>re(C(),k,x,M-w+1,h,p);for(;w+E<=M;){if(v+=_,v<l||v>=c)return null;if(x=b,T.push(b),f&&S.push(k||C()),b=d[v],void 0===b){k=new t.pointGeometry(u.getx(v),u.gety(v));const e=Kt(k,h,p?p(k):0);b=e.signedDistanceFromCamera>0?d[v]=e.point:I()}else k=null;w+=E,E=x.dist(b)}m&&p&&(k=k||new t.pointGeometry(u.getx(v),u.gety(v)),d[v]=b=void 0===d[v]?b:I(),E=x.dist(b));const L=(M-w)/E,D=b.sub(x),A=D.mult(L)._add(x);i&&A._add(D._unit()._perp()._mult(i*_));const P=y+Math.atan2(b.y-x.y,b.x-x.x);return T.push(A),f&&(k=k||new t.pointGeometry(u.getx(v),u.gety(v)),S.push(function(e,n,i){const r=1-i;return new t.pointGeometry(e.x*r+n.x*i,e.y*r+n.y*i)}(S.length>0?S[S.length-1]:k,k,L))),{point:A,angle:P,path:T,tilePath:S}}const ae=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function se(t,e){for(let n=0;n<t;n++){const t=e.length;e.resize(t+4),e.float32.set(ae,3*t)}}function le(t,e,n){const i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t[3]=n[3]*i+n[7]*r+n[15],t}const ce=100;class ue{constructor(t,e,n=new $t(t.width+200,t.height+200,25),i=new $t(t.width+200,t.height+200,25)){this.transform=t,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ce,this.screenBottomBoundary=t.height+ce,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.fogState=e}placeCollisionBox(t,e,n,i,r,o,a){const s=this.projectAndGetPerspectiveRatio(o,e.anchorPointX,e.anchorPointY,e.elevation,e.tileID),l=r*s.perspectiveRatio,c=(e.x1*t+n.x-e.padding)*l+s.point.x,u=(e.y1*t+n.y-e.padding)*l+s.point.y,h=(e.x2*t+n.x+e.padding)*l+s.point.x,d=(e.y2*t+n.y+e.padding)*l+s.point.y,p=s.perspectiveRatio<=.55||s.aboveHorizon;return!this.isInsideGrid(c,u,h,d)||!i&&this.grid.hitTest(c,u,h,d,a)||p?{box:[],offscreen:!1}:{box:[c,u,h,d],offscreen:this.isOffscreen(c,u,h,d)}}placeCollisionCircles(e,n,i,r,o,a,s,l,c,u,h,d,p,f){const m=[],g=this.transform.elevation,_=g?t=>g.getAtTileOffset(f,t.x,t.y):t=>0,y=new t.pointGeometry(n.anchorX,n.anchorY),v=_(y),b=this.projectAndGetPerspectiveRatio(a,y.x,y.y,v,f),{perspectiveRatio:x}=b,w=(u?o/x:o*x)/t.ONE_EM,E=Kt(y,s,v).point,M=b.signedDistanceFromCamera>0?ee(w,r,n.lineOffsetX*w,n.lineOffsetY*w,!1,E,y,n,i,s,{},g&&!u?_:null,u&&!!g):null;let T=!1,S=!1,k=!0;if(M&&!b.aboveHorizon){const n=.5*d*x+p,i=new t.pointGeometry(-100,-100),r=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new Ht,a=M.first,s=M.last;let u=[];for(let t=a.path.length-1;t>=1;t--)u.push(a.path[t]);for(let t=1;t<s.path.length;t++)u.push(s.path[t]);const f=2.5*n;if(l){const t=u.map(g?(t,e)=>{const n=_(e<a.path.length-1?a.tilePath[a.path.length-1-e]:s.tilePath[e-a.path.length+2]);return Kt(t,l,n)}:t=>Kt(t,l));u=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let y=[];if(u.length>0){const e=u[0].clone(),n=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),n.x=Math.max(n.x,u[t].x),n.y=Math.max(n.y,u[t].y);y=e.x>=i.x&&n.x<=r.x&&e.y>=i.y&&n.y<=r.y?[u]:n.x<i.x||e.x>r.x||n.y<i.y||e.y>r.y?[]:t.clipLine([u],i.x,i.y,r.x,r.y)}for(const t of y){o.reset(t,.25*n);let i=0;i=o.length<=.5*n?1:Math.ceil(o.paddedLength/f)+1;for(let t=0;t<i;t++){const r=t/Math.max(i-1,1),a=o.lerp(r),s=a.x+ce,l=a.y+ce;m.push(s,l,n,0);const u=s-n,d=l-n,p=s+n,f=l+n;if(k=k&&this.isOffscreen(u,d,p,f),S=S||this.isInsideGrid(u,d,p,f),!e&&this.grid.hitTestCircle(s,l,n,h)&&(T=!0,!c))return{circles:[],offscreen:!1,collisionDetected:T}}}}return{circles:!c&&T||!S?[]:m,offscreen:k,collisionDetected:T}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,o=-1/0,a=-1/0;for(const s of e){const e=new t.pointGeometry(s.x+ce,s.y+ce);i=Math.min(i,e.x),r=Math.min(r,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),n.push(e)}const s=this.grid.query(i,r,o,a).concat(this.ignoredGrid.query(i,r,o,a)),l={},c={};for(const e of s){const i=e.key;if(void 0===l[i.bucketInstanceId]&&(l[i.bucketInstanceId]={}),l[i.bucketInstanceId][i.featureIndex])continue;const r=[new t.pointGeometry(e.x1,e.y1),new t.pointGeometry(e.x2,e.y1),new t.pointGeometry(e.x2,e.y2),new t.pointGeometry(e.x1,e.y2)];t.polygonIntersectsPolygon(n,r)&&(l[i.bucketInstanceId][i.featureIndex]=!0,void 0===c[i.bucketInstanceId]&&(c[i.bucketInstanceId]=[]),c[i.bucketInstanceId].push(i.featureIndex))}return c}insertCollisionBox(t,e,n,i,r){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,i,r){const o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};for(let e=0;e<t.length;e+=4)o.insertCircle(a,t[e],t[e+1],t[e+2])}projectAndGetPerspectiveRatio(e,n,i,r,o){const a=[n,i,r||0,1];let s=!1;if(r||this.transform.pitch>0){t.transformMat4(a,a,e);let l=!1;this.fogState&&o&&(l=function(e,n,i,r,o,a){const s=a.calculateFogTileMatrix(o),l=[n,i,r];return t.transformMat4$1(l,l,s),E(e,l,a.pitch,a._fov)}(this.fogState,n,i,r||0,o.toUnwrapped(),this.transform)>.9),s=a[2]>a[3]||l}else le(a,a,e);return{point:new t.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+ce,(-a[1]/a[3]+1)/2*this.transform.height+ce),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5),signedDistanceFromCamera:a[3],aboveHorizon:s}}isOffscreen(t,e,n,i){return n<ce||t>=this.screenRightBoundary||i<ce||e>this.screenBottomBoundary}isInsideGrid(t,e,n,i){return n>=0&&t<this.gridRightBoundary&&i>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}class he{constructor(t,e,n,i){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class de{constructor(t,e,n,i,r){this.text=new he(t?t.text:null,e,n,r),this.icon=new he(t?t.icon:null,e,i,r)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class pe{constructor(t,e,n){this.text=t,this.icon=e,this.skipFade=n}}class fe{constructor(){this.invProjMatrix=t.create$1(),this.viewportMatrix=t.create$1(),this.circles=[]}}class me{constructor(t,e,n,i,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class ge{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function _e(e,n,i,r,o){const{horizontalAlign:a,verticalAlign:s}=t.getAnchorAlignment(e),l=-(a-.5)*n,c=-(s-.5)*i,u=t.evaluateVariableOffset(e,r);return new t.pointGeometry(l+u[0]*o,c+u[1]*o)}function ye(e,n,i,r,o){const a=new t.pointGeometry(e,n);return i&&a._rotate(r?o:-o),a}class ve{constructor(t,e,n,i,r){this.transform=t.clone(),this.collisionIndex=new ue(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new ge(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,i,r){const o=i.getBucket(n),a=i.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=i.collisionBoxArray,l=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/t.EXTENT,h=this.transform.calculateProjMatrix(i.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),f=I(i,1,this.transform.zoom),m=Wt(h,d,p,this.transform,f);let g=null;if(d){const e=Xt(h,d,p,this.transform,f);g=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new me(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);const _={bucket:o,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:t.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(r)for(const t of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=t;e.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:_})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:_})}attemptAnchorPlacement(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_){const y=[h.textOffset0,h.textOffset1],v=_e(t,n,i,y,r),b=this.collisionIndex.placeCollisionBox(r,e,ye(v.x,v.y,o,a,this.transform.angle),u,s,l,c.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(p.getSymbolInstanceIconSize(_,this.transform.zoom,d),m,ye(v.x,v.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)&&b.box.length>0){let e;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(e=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:y,width:n,height:i,anchor:t,textScale:r,prevAnchor:e},this.markUsedJustification(p,t,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[h.crossTileID]=f),{shift:v,placedGlyphBoxes:b}}}placeLayerBucketPart(e,n,i){const{bucket:r,layout:o,posMatrix:a,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:d,partiallyEvaluatedIconSize:p,collisionGroup:f}=e.parameters,m=o.get("text-optional"),g=o.get("icon-optional"),_=o.get("text-allow-overlap"),y=o.get("icon-allow-overlap"),v="map"===o.get("text-rotation-alignment"),b="map"===o.get("text-pitch-alignment"),x="none"!==o.get("icon-text-fit"),w="viewport-y"===o.get("symbol-z-order"),E=_&&(y||!r.hasIconData()||g),M=y&&(_||!r.hasTextData()||m);!r.collisionArrays&&h&&r.deserializeCollisionBoxes(h),i&&r.updateCollisionDebugBuffers(this.transform.zoom,h);const T=(e,h,w)=>{if(n[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new pe(!1,!1,!1));let T=!1,S=!1,k=!0,C=null,I={box:null,offscreen:null},L={box:null,offscreen:null},D=null,A=null,P=null,z=0,N=0,R=0;w.textFeatureIndex?z=w.textFeatureIndex:e.useRuntimeCollisionCircles&&(z=e.featureIndex),w.verticalTextFeatureIndex&&(N=w.verticalTextFeatureIndex);const O=t=>{t.tileID=this.retainedQueryData[r.bucketInstanceId].tileID,(this.transform.elevation||t.elevation)&&(t.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[r.bucketInstanceId].tileID,t.anchorPointX,t.anchorPointY):0)},F=w.textBox;if(F){O(F);const n=n=>{let i=t.WritingMode.horizontal;if(r.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,i=t,this.markUsedOrientation(r,i,e))}return i},i=(n,i)=>{if(r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&w.verticalTextBox){for(const e of r.writingModes)if(e===t.WritingMode.vertical?(I=i(),L=I):I=n(),I&&I.box&&I.box.length)break}else I=n()};if(o.get("text-variable-anchor")){let s=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];s.indexOf(t.anchor)>0&&(s=s.filter((e=>e!==t.anchor)),s.unshift(t.anchor))}const l=(t,n,i)=>{const o=r.getSymbolInstanceTextSize(d,e,this.transform.zoom,h),l=(t.x2-t.x1)*o+2*t.padding,u=(t.y2-t.y1)*o+2*t.padding,m=x&&!y?n:null;m&&O(m);let g={box:[],offscreen:!1};const w=_?2*s.length:s.length;for(let n=0;n<w;++n){const _=this.attemptAnchorPlacement(s[n%s.length],t,l,u,o,v,b,c,a,f,n>=s.length,e,h,r,i,m,d,p);if(_&&(g=_.placedGlyphBoxes,g&&g.box&&g.box.length)){T=!0,C=_.shift;break}}return g};i((()=>l(F,w.iconBox,t.WritingMode.horizontal)),(()=>{const n=w.verticalTextBox;return n&&O(n),r.allowVerticalPlacement&&!(I&&I.box&&I.box.length)&&e.numVerticalGlyphVertices>0&&n?l(n,w.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),I&&(T=I.box,k=I.offscreen);const u=n(I&&I.box);if(!T&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(r,t.anchor,e,u))}}else{const o=(n,i)=>{const o=r.getSymbolInstanceTextSize(d,e,this.transform.zoom,h),s=this.collisionIndex.placeCollisionBox(o,n,new t.pointGeometry(0,0),_,c,a,f.predicate);return s&&s.box&&s.box.length&&(this.markUsedOrientation(r,i,e),this.placedOrientations[e.crossTileID]=i),s};i((()=>o(F,t.WritingMode.horizontal)),(()=>{const n=w.verticalTextBox;return r.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?(O(n),o(n,t.WritingMode.vertical)):{box:null,offscreen:null}})),n(I&&I.box&&I.box.length)}}if(D=I,T=D&&D.box&&D.box.length>0,k=D&&D.offscreen,e.useRuntimeCollisionCircles){const n=r.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex>=0?e.centerJustifiedTextSymbolIndex:e.verticalPlacedTextSymbolIndex),c=t.evaluateSizeForFeature(r.textSizeData,d,n),u=o.get("text-padding");A=this.collisionIndex.placeCollisionCircles(_,n,r.lineVertexArray,r.glyphOffsetArray,c,a,s,l,i,b,f.predicate,e.collisionCircleDiameter,u,this.retainedQueryData[r.bucketInstanceId].tileID),T=_||A.circles.length>0&&!A.collisionDetected,k=k&&A.offscreen}if(w.iconFeatureIndex&&(R=w.iconFeatureIndex),w.iconBox){const e=e=>{O(e);const n=x&&C?ye(C.x,C.y,v,b,this.transform.angle):new t.pointGeometry(0,0),i=r.getSymbolInstanceIconSize(p,this.transform.zoom,h);return this.collisionIndex.placeCollisionBox(i,e,n,y,c,a,f.predicate)};L&&L.box&&L.box.length&&w.verticalIconBox?(P=e(w.verticalIconBox),S=P.box.length>0):(P=e(w.iconBox),S=P.box.length>0),k=k&&P.offscreen}const B=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,U=g||0===e.numIconVertices;if(B||U?U?B||(S=S&&T):T=S&&T:S=T=S&&T,T&&D&&D.box&&this.collisionIndex.insertCollisionBox(D.box,o.get("text-ignore-placement"),r.bucketInstanceId,L&&L.box&&N?N:z,f.ID),S&&P&&this.collisionIndex.insertCollisionBox(P.box,o.get("icon-ignore-placement"),r.bucketInstanceId,R,f.ID),A&&(T&&this.collisionIndex.insertCollisionCircles(A.circles,o.get("text-ignore-placement"),r.bucketInstanceId,z,f.ID),i)){const t=r.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new fe);for(let t=0;t<A.circles.length;t+=4)e.circles.push(A.circles[t+0]),e.circles.push(A.circles[t+1]),e.circles.push(A.circles[t+2]),e.circles.push(A.collisionDetected?1:0)}this.placements[e.crossTileID]=new pe(T||E,S||M,k||r.justReloaded),n[e.crossTileID]=!0};if(w){const t=r.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];T(r.symbolInstances.get(n),n,r.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)T(r.symbolInstances.get(t),t,r.collisionArrays[t]);if(i&&r.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[r.bucketInstanceId];t.invert(e.invProjMatrix,a),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}r.justReloaded=!1}markUsedJustification(e,n,i,r){let o;o=r===t.WritingMode.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];const a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:i.crossTileID)}markUsedOrientation(e,n,i){const r=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=r;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const i=e?e.symbolFadeChange(t):1,r=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(const t in this.placements){const e=this.placements[t],o=r[t];o?(this.opacities[t]=new de(o,i,e.text,e.icon),n=n||e.text!==o.text.placed||e.icon!==o.icon.placed):(this.opacities[t]=new de(null,i,e.text,e.icon,e.skipFade),n=n||e.text||e.icon)}for(const t in r){const e=r[t];if(!this.opacities[t]){const r=new de(e,i,!1,!1);r.isHidden()||(this.opacities[t]=r,n=n||e.text.placed||e.icon.placed)}}for(const t in o)this.variableOffsets[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.variableOffsets[t]=o[t]);for(const t in a)this.placedOrientations[t]||!this.opacities[t]||this.opacities[t].isHidden()||(this.placedOrientations[t]=a[t]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n={};for(const i of e){const e=i.getBucket(t);e&&i.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,i.collisionBoxArray)}}updateBucketOpacities(e,n,i){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const r=e.layers[0].layout,o=new de(null,0,!1,!1,!0),a=r.get("text-allow-overlap"),s=r.get("icon-allow-overlap"),l=r.get("text-variable-anchor"),c="map"===r.get("text-rotation-alignment"),u="map"===r.get("text-pitch-alignment"),h="none"!==r.get("icon-text-fit"),d=new de(null,0,a&&(s||!e.hasIconData()||r.get("icon-optional")),s&&(a||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);const p=(t,e,n)=>{for(let i=0;i<e/4;i++)t.opacityVertexArray.emplaceBack(n)};for(let i=0;i<e.symbolInstances.length;i++){const r=e.symbolInstances.get(i),{numHorizontalGlyphVertices:a,numVerticalGlyphVertices:s,crossTileID:f}=r;let m=this.opacities[f];n[f]?m=o:m||(m=d,this.opacities[f]=m),n[f]=!0;const g=r.numIconVertices>0,_=this.placedOrientations[r.crossTileID],y=_===t.WritingMode.vertical,v=_===t.WritingMode.horizontal||_===t.WritingMode.horizontalOnly;if(a>0||s>0){const t=Ce(m.text);p(e.text,a,y?Ie:t),p(e.text,s,v?Ie:t);const n=m.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=n||y?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=n||v?1:0);const i=this.variableOffsets[r.crossTileID];i&&this.markUsedJustification(e,i.anchor,r,_);const o=this.placedOrientations[r.crossTileID];o&&(this.markUsedJustification(e,"left",r,o),this.markUsedOrientation(e,o,r))}if(g){const t=Ce(m.icon);r.placedIconSymbolIndex>=0&&(p(e.icon,r.numIconVertices,y?Ie:t),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=m.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,r.numVerticalIconVertices,v?Ie:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[i];if(n){let i=new t.pointGeometry(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[f];e?(i=_e(e.anchor,e.width,e.height,e.textOffset,e.textScale),c&&i._rotate(u?this.transform.angle:-this.transform.angle)):t=!1}n.textBox&&be(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||y,i.x,i.y),n.verticalTextBox&&be(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||v,i.x,i.y)}const r=Boolean(!v&&n.verticalIconBox);n.iconBox&&be(e.iconCollisionBox.collisionVertexArray,m.icon.placed,r,h?i.x:0,h?i.y:0),n.verticalIconBox&&be(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!r,h?i.x:0,h?i.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function be(t,e,n,i,r){t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0),t.emplaceBack(e?1:0,n?1:0,i||0,r||0)}const xe=Math.pow(2,25),we=Math.pow(2,24),Ee=Math.pow(2,17),Me=Math.pow(2,16),Te=Math.pow(2,9),Se=Math.pow(2,8),ke=Math.pow(2,1);function Ce(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*xe+e*we+n*Ee+e*Me+n*Te+e*Se+n*ke+e}const Ie=0;class Le{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,i,r){const o=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(o,i,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,r())return!0;return!1}}class De{constructor(t,e,n,i,r,o,a,s){this.placement=new ve(t,r,o,a,s),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,n,i){const r=t.exported.now(),o=()=>{const e=t.exported.now()-r;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=r)&&(!t.maxzoom||t.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new Le(t)),this._inProgressLayer.continuePlacement(i[t.source],this.placement,this._showCollisionBoxes,t,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Ae=512/t.EXTENT/2;class Pe{constructor(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let n=0;n<e.length;n++){const i=e.get(n),r=i.key;this.indexedSymbolInstances[r]||(this.indexedSymbolInstances[r]=[]),this.indexedSymbolInstances[r].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}}getScaledCoordinates(e,n){const i=Ae/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*i),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*i)}}findMatches(t,e,n){const i=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let r=0;r<t.length;r++){const o=t.get(r);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,e);for(const t of a)if(Math.abs(t.coord.x-s.x)<=i&&Math.abs(t.coord.y-s.y)<=i&&!n[t.crossTileID]){n[t.crossTileID]=!0,o.crossTileID=t.crossTileID;break}}}}class ze{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ne{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const t in this.indexes){const n=this.indexes[t],i={};for(const t in n){const r=n[t];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),i[r.tileID.key]=r}this.indexes[t]=i}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let t=0;t<e.symbolInstances.length;t++)e.symbolInstances.get(t).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const i=this.usedCrossTileIDs[t.overscaledZ];for(const n in this.indexes){const r=this.indexes[n];if(Number(n)>t.overscaledZ)for(const n in r){const o=r[n];o.tileID.isChildOf(t)&&o.findMatches(e.symbolInstances,t,i)}else{const o=r[t.scaledTo(Number(n)).key];o&&o.findMatches(e.symbolInstances,t,i)}}for(let t=0;t<e.symbolInstances.length;t++){const r=e.symbolInstances.get(t);r.crossTileID||(r.crossTileID=n.generate(),i[r.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Pe(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n in e.indexedSymbolInstances)for(const i of e.indexedSymbolInstances[n])delete this.usedCrossTileIDs[t][i.crossTileID]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)t[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],e=!0)}return e}}class Re{constructor(){this.layerIndexes={},this.crossTileIDs=new ze,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n){let i=this.layerIndexes[t.id];void 0===i&&(i=this.layerIndexes[t.id]=new Ne);let r=!1;const o={};i.handleWrapJump(n);for(const n of e){const e=n.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(n.tileID,e,this.crossTileIDs)&&(r=!0),o[e.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(r=!0),r}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const t in this.layerIndexes)e[t]||delete this.layerIndexes[t]}}const Oe=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Fe=t.pick(Ft,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog"]),Be=t.pick(Ft,["setCenter","setZoom","setBearing","setPitch"]),Ue=function(){const e={},n=t.spec.$version;for(const i in t.spec.$root){const r=t.spec.$root[i];if(r.required){let t=null;t="version"===i?n:"array"===r.type?[]:{},null!=t&&(e[i]=t)}}return e}(),Ye={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class je extends t.Evented{constructor(e,n={}){super(),this.map=e,this.dispatcher=new C(Nt(),this),this.imageManager=new g,this.imageManager.setEventedParent(this),this.glyphManager=new t.GlyphManager(e._requestManager,n.localFontFamily?t.LocalGlyphMode.all:n.localIdeographFontFamily?t.LocalGlyphMode.ideographs:t.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.lineAtlas=new t.LineAtlas(256,512),this.crossTileSymbolIndex=new Re,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const i=this;this._rtlTextPluginCallback=je.registerForPluginStateChange((e=>{i.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in i._sourceCaches){const e=i._sourceCaches[t],n=e.getSource().type;"vector"!==n&&"geojson"!==n||e.reload()}}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.getSource(t.sourceId);if(e&&e.vectorLayerIds)for(const t in this._layers){const n=this._layers[t];n.source===e.id&&this._validateLayer(n)}}))}loadURL(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);const r=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(r,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,i)}))}loadJSON(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Ue,!1)}_updateLayerCount(t,e){const n=e?1:-1;t.is3D()&&(this._num3DLayers+=n),"circle"===t.type&&(this._numCircleLayers+=n),"symbol"===t.type&&(this._numSymbolLayers+=n)}_load(e,n){if(n&&Oe(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});this._changed=!1,e.sprite?this._loadSprite(e.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(e.glyphs);const i=Ot(this.stylesheet.layers);this._order=i.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let e of i)e=t.createStyleLayer(e),e.setEventedParent(this,{layer:{id:e.id}}),this._layers[e.id]=e,this._serializedLayers[e.id]=e.serialize(),this._updateLayerCount(e,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new v(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,n,i){let r,o,a;const s=t.exported.devicePixelRatio>1?"@2x":"";let l=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),((t,e)=>{l=null,a||(a=t,r=e,u())})),c=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),((t,e)=>{c=null,a||(a=t,o=e,u())}));function u(){if(a)i(a);else if(r&&o){const e=t.exported.getImageData(o),n={};for(const i in r){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=r[i],f=new t.RGBAImage({width:o,height:a});t.RGBAImage.copy(e,f,{x:s,y:l},{x:0,y:0},{width:o,height:a}),n[i]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p}}i(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(e,this.map._requestManager,((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.getSource(e.source);if(!n)return;const i=e.sourceLayer;i&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${i}" does not exist on source "${n.id}" as specified by style layer "${e.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this._sourceCaches)if(!this._sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const t in this._sourceCaches)if(this._sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(t){return!!this.terrain&&Ye[t.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this.fog&&this.fog.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this._sourceCaches){const e=this._sourceCaches[t];i[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];if(n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)){const t=this._getLayerSourceCache(n);t&&(t.used=!0)}const i=this.map.painter;if(i){const t=n.getProgramIds();if(!t)continue;const r=n.getProgramConfiguration(e.zoom);for(const e of t)i.useProgram(e,r)}}for(const e in i){const n=this._sourceCaches[e];i[e]!==n.used&&n.getSource().fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(e),this.terrain&&this.terrain.recalculate(e),this.fog&&this.fog.recalculate(e),this.z=e.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this._sourceCaches)this._sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(e){if(this._checkLoaded(),Oe(this,t.validateStyle(e)))return!1;(e=t.clone$2(e)).layers=Ot(e.layers);const n=function(t,e){if(!t)return[{command:Ft.setStyle,args:[e]}];let n=[];try{if(!r(t.version,e.version))return[{command:Ft.setStyle,args:[e]}];r(t.center,e.center)||n.push({command:Ft.setCenter,args:[e.center]}),r(t.zoom,e.zoom)||n.push({command:Ft.setZoom,args:[e.zoom]}),r(t.bearing,e.bearing)||n.push({command:Ft.setBearing,args:[e.bearing]}),r(t.pitch,e.pitch)||n.push({command:Ft.setPitch,args:[e.pitch]}),r(t.sprite,e.sprite)||n.push({command:Ft.setSprite,args:[e.sprite]}),r(t.glyphs,e.glyphs)||n.push({command:Ft.setGlyphs,args:[e.glyphs]}),r(t.transition,e.transition)||n.push({command:Ft.setTransition,args:[e.transition]}),r(t.light,e.light)||n.push({command:Ft.setLight,args:[e.light]}),r(t.fog,e.fog)||n.push({command:Ft.setFog,args:[e.fog]});const i={},o=[];!function(t,e,n,i){let o;for(o in e=e||{},t=t||{})t.hasOwnProperty(o)&&(e.hasOwnProperty(o)||Ut(o,n,i));for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)?r(t[o],e[o])||("geojson"===t[o].type&&"geojson"===e[o].type&&jt(t,e,o)?n.push({command:Ft.setGeoJSONSourceData,args:[o,e[o].data]}):Yt(o,e,n,i)):Bt(o,e,n))}(t.sources,e.sources,o,i);const a=[];t.layers&&t.layers.forEach((t=>{i[t.source]?n.push({command:Ft.removeLayer,args:[t.id]}):a.push(t)}));let s=t.terrain;s&&i[s.source]&&(n.push({command:Ft.setTerrain,args:[void 0]}),s=void 0),n=n.concat(o),r(s,e.terrain)||n.push({command:Ft.setTerrain,args:[e.terrain]}),function(t,e,n){e=e||[];const i=(t=t||[]).map(Gt),o=e.map(Gt),a=t.reduce(qt,{}),s=e.reduce(qt,{}),l=i.slice(),c=Object.create(null);let u,h,d,p,f,m,g;for(u=0,h=0;u<i.length;u++)d=i[u],s.hasOwnProperty(d)?h++:(n.push({command:Ft.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(n.push({command:Ft.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],n.push({command:Ft.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],p=a[d],f=s[d],!c[d]&&!r(p,f))if(r(p.source,f.source)&&r(p["source-layer"],f["source-layer"])&&r(p.type,f.type)){for(g in Vt(p.layout,f.layout,n,d,null,Ft.setLayoutProperty),Vt(p.paint,f.paint,n,d,null,Ft.setPaintProperty),r(p.filter,f.filter)||n.push({command:Ft.setFilter,args:[d,f.filter]}),r(p.minzoom,f.minzoom)&&r(p.maxzoom,f.maxzoom)||n.push({command:Ft.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Vt(p[g],f[g],n,d,g.slice(6),Ft.setPaintProperty):r(p[g],f[g])||n.push({command:Ft.setLayerProperty,args:[d,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Vt(p[g],f[g],n,d,g.slice(6),Ft.setPaintProperty):r(p[g],f[g])||n.push({command:Ft.setLayerProperty,args:[d,g,f[g]]}))}else n.push({command:Ft.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],n.push({command:Ft.addLayer,args:[f,m]})}(a,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:Ft.setStyle,args:[e]}]}return n}(this.serialize(),e).filter((t=>!(t.command in Be)));if(0===n.length)return!1;const i=n.filter((t=>!(t.command in Fe)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((t=>t.command)).join(", ")}.`);return n.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,i={}){if(this._checkLoaded(),void 0!==this.getSource(e))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=St(e,n,this.dispatcher,this);r.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:r.serialize(),sourceId:e})));const o=n=>{const i=(n?"symbol:":"other:")+e,o=this._sourceCaches[i]=new t.SourceCache(i,r,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[e]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}removeSource(e){this._checkLoaded();const n=this.getSource(e);if(void 0===n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while terrain is using it.`)));const i=this._getSourceCaches(e);for(const e of i)delete this._sourceCaches[e.id],delete this._updatedSources[e.id],e.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e.getSource().id})),e.setEventedParent(null),e.clearTiles();delete this._otherSourceCaches[e],delete this._symbolSourceCaches[e],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){this._checkLoaded(),this.getSource(t).setData(e),this._changed=!0}getSource(t){const e=this._getSourceCache(t);return e&&e.getSource()}addLayer(e,n,i={}){this._checkLoaded();const r=e.id;if(this.getLayer(r))return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${r}" already exists on this map`)));let o;if("custom"===e.type){if(Oe(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$2(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,`layers.${r}`,e,{arrayIndex:-1},i))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[r]&&o.source&&s&&"custom"!==o.type){const t=this._removedLayers[r];delete this._removedLayers[r],t.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const i=this._order.indexOf(e);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new t.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(r,0,e),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}hasLayerType(t){for(const e in this._layers)if(this._layers[e].type===t)return!0;return!1}setLayerZoomRange(e,n,i){this._checkLoaded();const r=this.getLayer(e);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(e,n,i={}){this._checkLoaded();const o=this.getLayer(e);if(o){if(!r(o.filter,n))return null==n?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(t.validateStyle.filter,`layers.${o.id}.filter`,n,null,i)||(o.filter=t.clone$2(n),this._updateLayer(o)))}else this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be filtered.`)))}getFilter(e){return t.clone$2(this.getLayer(e).filter)}setLayoutProperty(e,n,i,o={}){this._checkLoaded();const a=this.getLayer(e);a?r(a.getLayoutProperty(n),i)||(a.setLayoutProperty(n,i,o),this._updateLayer(a)):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(e,n){const i=this.getLayer(e);if(i)return i.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style.`)))}setPaintProperty(e,n,i,o={}){this._checkLoaded();const a=this.getLayer(e);a?r(a.getPaintProperty(n),i)||(a.setPaintProperty(n,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const i=e.source,r=e.sourceLayer,o=this.getSource(i);if(void 0===o)return void this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&r)return void this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!r)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(i);for(const t of s)t.setFeatureState(r,e.id,n)}removeFeatureState(e,n){this._checkLoaded();const i=e.source,r=this.getSource(i);if(void 0===r)return void this.fire(new t.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const o=r.type,a="vector"===o?e.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof e.id&&"number"!=typeof e.id)return void this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(i);for(const t of s)t.removeFeatureState(a,e.id,n)}getFeatureState(e){this._checkLoaded();const n=e.source,i=e.sourceLayer,r=this.getSource(n);if(void 0!==r){if("vector"!==r.type||i)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(i,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const e={};for(const t in this._sourceCaches){const n=this._sourceCaches[t].getSource();e[n.id]||(e[n.id]=n.serialize())}return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e,layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0;const e=this._getLayerSourceCache(t);t.source&&!this._updatedSources[t.source]&&e&&"raster"!==e.getSource().type&&(this._updatedSources[t.source]="reload",e.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},i=[];for(let r=this._order.length-1;r>=0;r--){const o=this._order[r];if(e(o)){n[o]=r;for(const e of t){const t=e[o];if(t)for(const e of t)i.push(e)}}}i.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const r=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(e(a))for(let t=i.length-1;t>=0;t--){const e=i[t].feature;if(n[e.layer.id]<o)break;r.push(e),i.pop()}else for(const e of t){const t=e[a];if(t)for(const e of t)r.push(e.feature)}}return r}queryRenderedFeatures(e,n,i){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];r[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((t=>{const e=this.getLayer(t);return e&&e.is3D()})):this.has3DLayers(),s=L.createFromScreenPoints(e,i);for(const t in this._sourceCaches){const e=this._sourceCaches[t].getSource().id;n.layers&&!r[e]||o.push(Ct(this._sourceCaches[t],this._layers,this._serializedLayers,s,n,i,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(t,e,n,i,r,o,a){const s={},l=o.queryRenderedSymbols(i),c=[];for(const t of Object.keys(l).map(Number))c.push(a[t]);c.sort(Lt);for(const n of c){const i=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,r.filter,r.layers,r.availableImages,t);for(const t in i){const e=s[t]=s[t]||[],r=i[t];r.sort(((t,e)=>{const i=n.featureSortOrder;if(i){const n=i.indexOf(t.featureIndex);return i.indexOf(e.featureIndex)-n}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const e in s)s[e].forEach((i=>{const r=i.feature,o=n(t[e]).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const i=this._getSourceCaches(e);let r=[];for(const t of i)r=r.concat(It(t,n));return r}addSourceType(t,e,n){return je.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(je.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const i=this.light.getLight();let o=!1;for(const t in e)if(!r(e[t],i[t])){o=!0;break}if(!o)return;const a={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}getTerrain(){return this.terrain?this.terrain.get():null}setTerrain(e){if(this._checkLoaded(),!e)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if("object"==typeof e.source){const n="terrain-dem-src";this.addSource(n,e.source),e=t.clone$2(e),e=t.extend(e,{source:n})}if(!this._validate(t.validateStyle.terrain,"terrain",e)){if(this.terrain){const n=this.terrain,i=n.get();for(const o in e)if(!r(e[o],i[o])){n.set(e),this.stylesheet.terrain=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i);break}}else this._createTerrain(e);this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}}_createFog(e){const n=this.fog=new k(e);this.stylesheet.fog=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const t of this.map._markers)t._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,i=n.get();for(const o in e)if(!r(e[o],i[o])){n.set(e),this.stylesheet.fog=e;const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i);break}}else this._createFog(e);this._markersNeedUpdate=!0}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const t=this._order.filter((t=>this.isLayerDraped(this._layers[t]))),e=this._order.filter((t=>!this.isLayerDraped(this._layers[t])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...t),this._drapedFirstOrder.push(...e)}_createTerrain(e){const n=this.terrain=new w(e);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const i={now:t.exported.now(),transition:t.extend({duration:0},this.stylesheet.transition)};n.updateTransitions(i)}_force3DLayerUpdate(){for(const t in this._layers){const e=this._layers[t];"fill-extrusion"===e.type&&this._updateLayer(e)}}_validate(e,n,i,r,o={}){return(!o||!1!==o.validate)&&Oe(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:i,styleSpec:t.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this._sourceCaches)this._sourceCaches[t].clearTiles(),this._sourceCaches[t].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){const e=this._getSourceCaches(t);for(const t of e)t.clearTiles()}_reloadSource(t){const e=this._getSourceCaches(t);for(const t of e)t.resume(),t.reload()}_updateSources(t){for(const e in this._sourceCaches)this._sourceCaches[e].update(t)}_generateCollisionBoxes(){for(const t in this._sourceCaches){const e=this._sourceCaches[t];e.resume(),e.reload()}}_updatePlacement(e,n,i,r,o=!1){let a=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this._getLayerSourceCache(n);if(!t)continue;l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const i=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng);a=a||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===i,this._layerOrderChanged&&this.fire(new t.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new De(e,this._order,o,n,i,r,this.placement,this.fog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this._sourceCaches)this._sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const i=t=>{t&&t.setDependencies(e.tileID.key,e.type,e.icons)};i(this._otherSourceCaches[e.source]),i(this._symbolSourceCaches[e.source])}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,i){return t.makeRequest(n,i)}_getSourceCache(t){return this._otherSourceCaches[t]}_getLayerSourceCache(t){return"symbol"===t.type?this._symbolSourceCaches[t.source]:this._otherSourceCaches[t.source]}_getSourceCaches(t){const e=[];return this._otherSourceCaches[t]&&e.push(this._otherSourceCaches[t]),this._symbolSourceCaches[t]&&e.push(this._symbolSourceCaches[t]),e}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}}je.getSourceType=function(t){return Tt[t]},je.setSourceType=function(t,e){Tt[t]=e},je.registerForPluginStateChange=t.registerForPluginStateChange;var Ve="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}\n#endif",Ge="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let qe={},He={};qe=Xe("","\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0),He=Xe("#ifdef FOG\nuniform float u_fog_temporal_offset;float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif","#ifdef FOG\nuniform mat4 u_fog_matrix;vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",!0);const $e=Xe("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ze=Ve;var We={background:Xe("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Xe("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Xe("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Xe("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Xe("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\ngl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec3 pos=vec3(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)));gl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Xe("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Xe("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Xe("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Xe("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),fill:Xe("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Xe("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Xe("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Xe("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Xe("varying vec4 v_color;void main() {vec4 color=v_color;\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#else\nvec3 pos=vec3(pos_nx.xy,t > 0.0 ? height : base);gl_Position=u_matrix*vec4(pos,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Xe("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);\n#else\nvec3 p=vec3(pos_nx.xy,z);gl_Position=u_matrix*vec4(p,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Xe("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Xe("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Xe("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineGradient:Xe("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Xe("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),lineSDF:Xe("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);vec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 dash_from\n#pragma mapbox: initialize mediump vec4 dash_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);v_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Xe("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Xe("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),symbolSDF:Xe("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:Xe("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrainRaster:Xe("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n}"),terrainDepth:Xe("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Xe("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ge),skyboxGradient:Xe("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Ge),skyboxCapture:Xe("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}")};function Xe(t,e,n){const i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g,o=e.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=t.match(r),s=e.match(r),l=Ve.match(r);let c=s?s.concat(a):a;n||(qe.staticUniforms&&(c=qe.staticUniforms.concat(c)),He.staticUniforms&&(c=He.staticUniforms.concat(c))),c&&(c=c.concat(l));const u={};return{fragmentSource:t=t.replace(i,((t,e,n,i,r)=>(u[r]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nvarying ${n} ${i} ${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = u_${r};\n#endif\n`))),vertexSource:e=e.replace(i,((t,e,n,i,r)=>{const o="float"===i?"vec2":"vec4",a=r.match(/color/)?"color":o;return u[r]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${n} ${o} a_${r};\nvarying ${n} ${i} ${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = a_${r};\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${r} = unpack_mix_${a}(a_${r}, u_${r}_t);\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${r}\nuniform lowp float u_${r}_t;\nattribute ${n} ${o} a_${r};\n#else\nuniform ${n} ${i} u_${r};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = a_${r};\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${r}\n    ${n} ${i} ${r} = unpack_mix_${a}(a_${r}, u_${r}_t);\n#else\n    ${n} ${i} ${r} = u_${r};\n#endif\n`})),staticAttributes:o,staticUniforms:c}}class Ke{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,n,i,r,o,a,s){this.context=t;let l=this.boundPaintVertexBuffers.length!==i.length;for(let t=0;!l&&t<i.length;t++)this.boundPaintVertexBuffers[t]!==i[t]&&(l=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!l&&this.boundIndexBuffer===r&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind()):this.freshBind(e,n,i,r,o,a,s)}freshBind(t,e,n,i,r,o,a){let s;const l=t.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(let t=l;t<s;t++)u.disableVertexAttribArray(t)}e.enableAttributes(u,t);for(const e of n)e.enableAttributes(u,t);o&&o.enableAttributes(u,t),a&&a.enableAttributes(u,t),e.bind(),e.setVertexAttribPointers(u,t,r);for(const e of n)e.bind(),e.setVertexAttribPointers(u,t,r);o&&(o.bind(),o.setVertexAttribPointers(u,t,r)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,t,r)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Je(e,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new t.MercatorCoordinate(0,r/i).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/i).toLngLat().lat]}function Qe(e,n,i,r,o,a,s){const l=e.context,c=l.gl,u=i.fbo;if(!u)return;e.prepareDrawTile(n);const h=e.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const d=((t,e,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:i||t.transform.calculateProjMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:Je(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:o,u_accent:a}})(e,i,r,e.terrain?n.projMatrix:null);e.prepareDrawProgram(l,h,n.toUnwrapped()),h.draw(l,c.TRIANGLES,o,a,s,t.CullFaceMode.disabled,d,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function tn(e,n,i){if(!n.needsDEMTextureUpload)return;const r=e.context,o=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(i.stride);const a=i.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new t.Texture(r,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function en(e,n,i,r,o,a){const s=e.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),tn(e,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let h=n.fbo;if(!h){const e=new t.Texture(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=n.fbo=s.createFramebuffer(u,u,!0),h.colorAttachment.set(e.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,o,a,t.CullFaceMode.disabled,((e,n)=>{const i=n.stride,r=t.create$1();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}const nn=(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image0:new t.Uniform1i(e,n.u_image0),u_skirt_height:new t.Uniform1f(e,n.u_skirt_height)}),rn=(t,e)=>({u_matrix:t,u_image0:0,u_skirt_height:e}),on=new class{constructor(){this.operations={}}newMorphing(t,e,n,i,r){if(t in this.operations){const e=this.operations[t];e.to.tileID.key!==n.tileID.key&&(e.queued=n)}else this.operations[t]={startTime:i,phase:0,duration:r,from:e,to:n,queued:null}}getMorphValuesForProxy(t){if(!(t in this.operations))return null;const e=this.operations[t];return{from:e.from,to:e.to,phase:e.phase}}update(t){for(const e in this.operations){const n=this.operations[e];for(n.phase=(t-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,t)){delete this.operations[e];break}}}_nextOp(t,e){return!!t.queued&&(t.from=t.to,t.to=t.queued,t.queued=null,t.phase=0,t.startTime=e,!0)}_validOp(t){return t.from.hasData()&&t.to.hasData()}},an={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function sn(t,e){const n=1<<t.z;return!e&&(0===t.x||t.x===n-1)||0===t.y||t.y===n-1}const ln=t=>({u_matrix:t});function cn(e,n,i,r,o){if(o>0){const a=t.exported.now(),s=(a-e.timeAdded)/o,l=n?(a-n.timeAdded)/o:-1,c=i.getSource(),u=r.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=h&&e.refreshedUponExpiration?1:t.clamp(h?s:1-l,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class un extends t.SourceCache{constructor(t){const e=St("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new C(Nt(),null),t.style);super("proxy",e,!1),e.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,n,i){if(e.freezeTileCoverage)return;this.transform=e;const r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,i)=>{if(n[i.key]="",!this._tiles[i.key]){const n=new t.Tile(i,this._source.tileSize*i.overscaleFactor(),e.tileZoom);n.state="loaded",this._tiles[i.key]=n}return n}),{});for(const t in this._tiles)t in r||(this.freeFBO(t),this._tiles[t].state="unloaded",delete this._tiles[t])}freeFBO(t){const e=this.proxyCachedFBO[t];if(void 0!==e){const n=Object.values(e);this.renderCachePool.push(...n),delete this.proxyCachedFBO[t]}}deallocRenderCache(){this.renderCache.forEach((t=>t.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class hn extends t.OverscaledTileID{constructor(t,e,n){super(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y),this.proxyTileKey=e,this.projMatrix=n}}class dn extends t.Elevation{constructor(e,n){super(),this.painter=e,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[i,r,o]=function(e){const n=new t.StructArrayLayout4i8,i=new t.StructArrayLayout3ui6,r=131;n.reserve(17161),i.reserve(33800);const o=t.EXTENT/128,a=t.EXTENT+o/2,s=a+o;for(let e=-o;e<s;e+=o)for(let i=-o;i<s;i+=o){const r=i<0||i>a||e<0||e>a?24575:0,o=t.clamp(Math.round(i),0,t.EXTENT),s=t.clamp(Math.round(e),0,t.EXTENT);n.emplaceBack(o+r,s,o,s)}const l=(t,e)=>{const n=e*r+t;i.emplaceBack(n+1,n,n+r),i.emplaceBack(n+r,n+r+1,n+1)};for(let t=1;t<129;t++)for(let e=1;e<129;e++)l(e,t);return[0,129].forEach((t=>{for(let e=0;e<130;e++)l(e,t),l(t,e)})),[n,i,32768]}(),a=e.context;this.gridBuffer=a.createVertexBuffer(i,Et.members),this.gridIndexBuffer=a.createIndexBuffer(r),this.gridSegments=t.SegmentVector.simpleSegment(0,0,i.length,r.length),this.gridNoSkirtSegments=t.SegmentVector.simpleSegment(0,0,i.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new un(n.map),this.orthoMatrix=t.create$1(),t.ortho(this.orthoMatrix,0,t.EXTENT,0,t.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new t.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=e.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1}set style(t){t.on("data",this._onStyleDataEvent.bind(this)),t.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=t,this._checkRenderCacheEfficiency()}update(e,n,i){if(e&&e.terrain){this._style!==e&&(this.style=e),this.enabled=!0;const r=e.terrain.properties;this.sourceCache=e._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const o=()=>{this.sourceCache.used&&t.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const e=this.sourceCache.getSource().tileSize/128,i=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(n,e*i,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!i),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}_checkRenderCacheEfficiency(){const e=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==e.efficiency&&t.warnOnce(`Terrain render cache efficiency is not optimal (${e.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${e.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(t){t.coord&&"source"===t.dataType?this._clearRenderCacheForTile(t.sourceCacheId,t.coord):"style"===t.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const t in this._style._sourceCaches)this._style._sourceCaches[t].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach((t=>t.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const t=2*this.proxySourceCache.getSource().tileSize;return[t,t]}set useVertexMorphing(t){this._useVertexMorphing=t}updateTileBinding(e){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=n.getIds().map((t=>{const e=n.getTileByID(t).tileID;return e.projMatrix=i.calculateProjMatrix(e.toUnwrapped()),e}));!function(e,n){const i=n.transform.pointCoordinate(n.transform.getCameraPoint()),r=new t.pointGeometry(i.x,i.y);e.sort(((e,n)=>{if(n.overscaledZ-e.overscaledZ)return n.overscaledZ-e.overscaledZ;const i=new t.pointGeometry(e.canonical.x+(1<<e.canonical.z)*e.wrap,e.canonical.y),o=new t.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=r.mult(1<<e.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(i)-a.distSqr(o)}))}(r,this.painter),this._previousZoom=i.zoom;const o=this.proxyToSource||{};this.proxyToSource={},r.forEach((t=>{this.proxyToSource[t.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const t in a){const n=a[t];if(!n.used)continue;if(n!==this.sourceCache&&(this._findCoveringTileCache[n.id]={}),this._setupProxiedCoordsForOrtho(n,e[t],o),n.usedForTerrain)continue;const i=e[t];n.getSource().reparseOverscaled&&this._assignTerrainTiles(i)}this.proxiedCoords[n.id]=r.map((t=>new hn(t,t.key,this.orthoMatrix))),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=t.exported.now();const s={};this._visibleDemTiles=[];for(const t of this.proxyCoords){const e=this.terrainTileForTile[t.key];if(!e)continue;const n=e.tileID.key;n in s||(this._visibleDemTiles.push(e),s[n]=n)}}_assignTerrainTiles(t){this._initializing||t.forEach((t=>{if(this.terrainTileForTile[t.key])return;const e=this._findTileCoveringTileID(t,this.sourceCache);e&&(this.terrainTileForTile[t.key]=e)}))}_prepareDEMTextures(){const t=this.painter.context,e=t.gl;for(const n in this.terrainTileForTile){const i=this.terrainTileForTile[n],r=i.dem;!r||i.demTexture&&!i.needsDEMTextureUpload||(t.activeTexture.set(e.TEXTURE1),tn(this.painter,i,r))}}_prepareDemTileUniforms(t,e,n,i){if(!e||null==e.demTexture)return!1;const r=t.tileID.canonical,o=Math.pow(2,e.tileID.canonical.z-r.z),a=i||"";return n[`u_dem_tl${a}`]=[r.x*o%1,r.y*o%1],n[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let t=0;const e=this._visibleDemTiles.reduce(((e,n)=>{if(!n.dem)return e;const i=n.dem.tree.minimums[0];return i>0&&t++,e+i}),0);return t?e/t:0}_updateEmptyDEMTexture(){const e=this.painter.context,n=e.gl;e.activeTexture.set(n.TEXTURE2);const i=this._getLoadedAreaMinimum(),r={width:1,height:1,data:new Uint8Array(t.DEMData.pack(i,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(r,{premultiply:!1}):o=this._emptyDEMTexture=new t.Texture(e,r,n.RGBA,{premultiply:!1}),o}setupElevationDraw(e,n,i){const r=this.painter.context,o=r.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:t.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(i&&i.morphing&&this._useVertexMorphing){const t=i.morphing.srcDemTile,n=i.morphing.dstDemTile;u=i.morphing.phase,t&&n&&(this._prepareDemTileUniforms(e,t,a,"_prev")&&(c=t),this._prepareDemTileUniforms(e,n,a)&&(l=n))}if(c&&l?(r.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),r.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=u):(l=this.terrainTileForTile[e.tileID.key],r.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(e,l,a)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST)),i&&i.useDepthForOcclusion&&(r.activeTexture.set(o.TEXTURE3),this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),i&&i.useMeterToDem&&l){const e=(1<<l.tileID.canonical.z)*t.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=e}i&&i.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=i.labelPlaneMatrixInv),n.setTerrainUniformValues(r,a)}renderToBackBuffer(e){const n=this.painter,i=this.painter.context;0!==e.length&&(i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),this.renderingToTexture=!1,function(e,n,i,r,o){const a=e.context,s=a.gl;let l,c;const u=e.options.showTerrainWireframe?2:0,h=(t,n)=>{if(c===t)return;const i=[an[t]];n&&i.push(an[u]),l=e.useProgram("terrainRaster",null,i),c=t},d=e.colorModeForRenderPass(),p=new t.DepthMode(s.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);on.update(o);const f=e.transform,m=6*Math.pow(1.5,22-f.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach((u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[_,y]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of r){const r=i.getTile(c),x=t.StencilMode.disabled,w=n.prevTerrainTileForTile[c.key],E=n.terrainTileForTile[c.key];b=E,null!=(v=w)&&null!=b&&v.hasData()&&b.hasData()&&null!=v.demTexture&&null!=b.demTexture&&v.tileID.key!==b.tileID.key&&on.newMorphing(c.key,w,E,o,250),a.activeTexture.set(s.TEXTURE0),r.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const M=on.getMorphValuesForProxy(c.key),T=M?1:0;let S;M&&(S={morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:t.easeCubicInOut(M.phase)}});const k=rn(c.projMatrix,sn(c.canonical,f.renderWorldCopies)?m/10:m);h(T,u),n.setupElevationDraw(r,l,S),e.prepareDrawProgram(a,l,c.toUnwrapped()),l.draw(a,g,p,x,d,t.CullFaceMode.backCCW,k,"terrain_raster",n.gridBuffer,_,y)}var v,b}))}(n,this,this.proxySourceCache,e,this._updateTimestamp),this.renderingToTexture=!0,e.splice(0,e.length))}renderBatch(e){if(0===this._drapedRenderBatches.length)return e+1;this.renderingToTexture=!0;const n=this.painter,i=this.painter.context,r=this.proxySourceCache,o=this.proxiedCoords[r.id],a=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of o){const o=r.getTileByID(u.proxyTileKey),h=r.proxyCachedFBO[u.key]?r.proxyCachedFBO[u.key][e]:void 0,d=void 0!==h?r.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=d.tex,p&&!d.dirty){s.push(o.tileID);continue}let f;i.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(i.clear({color:t.Color.transparent}),d.dirty=!1);for(let t=a.start;t<=a.end;++t){const e=n.style._layers[l[t]];if(e.isHidden(n.transform.zoom))continue;const r=n.style._getLayerSourceCache(e),o=r?this.proxyToSource[u.key][r.id]:[u];if(!o)continue;const a=o;i.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(r?r.id:null)&&(this._setupStencil(d,o,e,r),f=r?r.id:null),n.renderLayer(n,r,e,a)}this.renderedToTile?(d.dirty=!0,s.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(t){const e=t.order.length;if(0===e)return{efficiency:100};let n,i=0,r=0,o=!1;for(let a=0;a<e;++a){const e=t._layers[t.order[a]];this._style.isLayerDraped(e)?(o&&++i,++r):o||(o=!0,n=e.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-i/r),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let t=0;return this._visibleDemTiles.filter((t=>t.dem)).forEach((e=>{t=Math.min(t,e.dem.tree.minimums[0])})),0===t?t:(t-30)*this._exaggeration}raycast(t,e,n){if(!this._visibleDemTiles)return null;const i=this._visibleDemTiles.filter((t=>t.dem)).map((i=>{const r=i.tileID,o=Math.pow(2,r.overscaledZ),{x:a,y:s}=r.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:i.dem.tree.raycastRoot(l,u,c,h,t,e,n),tile:i}}));i.sort(((t,e)=>(null!==t.t?t.t:Number.MAX_VALUE)-(null!==e.t?e.t:Number.MAX_VALUE)));for(const r of i){if(null==r.t)return null;const i=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,t,e,n);if(null!=i)return i}return null}_createFBO(){const e=this.painter.context,n=e.gl,i=this.drapeBufferSize;e.activeTexture.set(n.TEXTURE0);const r=new t.Texture(e,{width:i[0],height:i[1],data:null},n.RGBA);r.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=e.createFramebuffer(i[0],i[1],!1);return o.colorAttachment.set(r.texture),o.depthAttachment=new yt(e,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=e.createRenderbuffer(e.gl.DEPTH_STENCIL,i[0],i[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),e.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),e.extTextureFilterAnisotropic&&!e.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,e.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,e.extTextureFilterAnisotropicMax),{fb:o,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((t=>{const e=this._style._layers[t],n=e.isHidden(this.painter.transform.zoom),i=e.getCrossfadeParameters(),r=!!i&&1!==i.t,o=e.hasTransition();return"custom"!==e.type&&!n&&(r||o)}))}_clearRasterFadeFromRenderCache(){let t=!1;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e]._source instanceof xt){t=!0;break}if(t)for(let t=0;t<this._style.order.length;++t){const e=this._style._layers[this._style.order[t]],n=e.isHidden(this.painter.transform.zoom),i=this._style._getLayerSourceCache(e);if("raster"!==e.type||n||!i)continue;const r=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][i.id];if(e)for(const t of e){const e=cn(i.getTile(t),i.findLoadedParent(t,0),i,this.painter.transform,r);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(i.id,t)}}}}_setupDrapedRenderBatches(){const t=this._style.order,e=t.length;if(0===e)return;const n=[];let i,r=0,o=this._style._layers[t[r]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++r<e;)o=this._style._layers[t[r]];for(;r<e;++r){const e=this._style._layers[t[r]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===i&&(i=r):void 0!==i&&(n.push({start:i,end:r-1}),i=void 0))}void 0!==i&&n.push({start:i,end:r-1}),this._drapedRenderBatches=n}_setupRenderCache(t){const e=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,e.renderCache.length>e.renderCachePool.length){const t=Object.values(e.proxyCachedFBO);e.proxyCachedFBO={};for(let n=0;n<t.length;++n){const i=Object.values(t[n]);e.renderCachePool.push(...i)}}return}this._clearRasterFadeFromRenderCache();const n=this.proxyCoords,i=this._tilesDirty;for(let r=n.length-1;r>=0;r--){const o=n[r];if(e.getTileByID(o.key),void 0!==e.proxyCachedFBO[o.key]){const n=t[o.key],r=this.proxyToSource[o.key];let a=0;for(const t in r){const e=r[t],o=n[t];if(!o||o.length!==e.length||e.some(((e,n)=>e!==o[n]||i[t]&&i[t].hasOwnProperty(e.key)))){a=-1;break}++a}for(const t in e.proxyCachedFBO[o.key])e.renderCache[e.proxyCachedFBO[o.key][t]].dirty=a<0||a!==Object.values(n).length}}const r=[...this._drapedRenderBatches];r.sort(((t,e)=>e.end-e.start-(t.end-t.start)));for(const t of r)for(const i of n){if(e.proxyCachedFBO[i.key])continue;let n=e.renderCachePool.pop();void 0===n&&e.renderCache.length<50&&(n=e.renderCache.length,e.renderCache.push(this._createFBO())),void 0!==n&&(e.proxyCachedFBO[i.key]={},e.proxyCachedFBO[i.key][t.start]=n,e.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(t,e,n,i){if(!i||!this._sourceTilesOverlap[i.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,o=r.gl;if(e.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=e.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(e[0].overscaledZ>e[e.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(e,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):t.StencilMode.disabled}_renderTileClippingMasks(e,n){const i=this.painter,r=this.painter.context,o=r.gl;i._tileClippingMaskIDs={},r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const a=i.useProgram("clippingMask");for(const s of e){const e=i._tileClippingMaskIDs[s.key]=--n;a.draw(r,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},e,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,ln(s.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}pointCoordinate(e){const n=this.painter.transform;if(e.x<0||e.x>n.width||e.y<0||e.y>n.height)return null;const i=[e.x,e.y,1,1];t.transformMat4(i,i,n.pixelMatrixInverse),t.scale$2(i,i,1/i[3]),i[0]/=n.worldSize,i[1]/=n.worldSize;const r=n._camera.position,o=t.mercatorZfromAltitude(1,n.center.lat),a=[r[0],r[1],r[2]/o,0],s=t.subtract([],i.slice(0,3),a);t.normalize(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(t.scaleAndAdd(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const e=this.painter,n=e.context,i=this.proxySourceCache,r=Math.ceil(e.width),o=Math.ceil(e.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const e=n.gl,i=n.createFramebuffer(r,o,!0);n.activeTexture.set(e.TEXTURE0);const a=new t.Texture(n,{width:r,height:o,data:null},e.RGBA);a.bind(e.NEAREST,e.CLAMP_TO_EDGE),i.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,r,o);i.depthAttachment.set(s),this._depthFBO=i,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,r,o]),function(e,n,i,r){const o=e.context,a=o.gl;o.clear({depth:1});const s=e.useProgram("terrainDepth"),l=new t.DepthMode(a.LESS,t.DepthMode.ReadWrite,e.depthRangeFor3D);for(const e of r){const r=i.getTile(e),c=rn(e.projMatrix,0);n.setupElevationDraw(r,s),s.draw(o,a.TRIANGLES,l,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.backCCW,c,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(e,this,i,this.proxyCoords)}_setupProxiedCoordsForOrtho(t,e,n){if(t.getSource()instanceof Mt)return this._setupProxiedCoordsForImageSource(t,e,n);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const i=this.proxiedCoords[t.id]=[],r=this.proxyCoords;for(let e=0;e<r.length;e++){const o=r[e],a=this._findTileCoveringTileID(o,t);if(a){const e=this._createProxiedId(o,a,n[o.key]&&n[o.key][t.id]);i.push(e),this.proxyToSource[o.key][t.id]=[e]}}let o=!1;for(let r=0;r<e.length;r++){const a=t.getTile(e[r]);if(!a||!a.hasData())continue;const s=this._findTileCoveringTileID(a.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==a.tileID.canonical.z){const e=this.proxyToSource[s.tileID.key][t.id],r=this._createProxiedId(s.tileID,a,n[s.tileID.key]&&n[s.tileID.key][t.id]);e?e.splice(e.length-1,0,r):this.proxyToSource[s.tileID.key][t.id]=[r],i.push(r),o=!0}}this._sourceTilesOverlap[t.id]=o}_setupProxiedCoordsForImageSource(e,n,i){if(!e.getSource().loaded())return;const r=this.proxiedCoords[e.id]=[],o=this.proxyCoords,a=e.getSource(),s=new t.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),l=a.coordinates.map(t.MercatorCoordinate.fromLngLat).reduce(((t,e)=>(t.min.x=Math.min(t.min.x,e.x-s.x),t.min.y=Math.min(t.min.y,e.y-s.y),t.max.x=Math.max(t.max.x,e.x-s.x),t.max.y=Math.max(t.max.y,e.y-s.y),t)),{min:new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new t.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(e,n)=>{const i=e.wrap+e.canonical.x/(1<<e.canonical.z),r=e.canonical.y/(1<<e.canonical.z),o=t.EXTENT/(1<<e.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return i+o<a+l.min.x||i>a+l.max.x||r+o<s+l.min.y||r>s+l.max.y};for(let t=0;t<o.length;t++){const a=o[t];for(let t=0;t<n.length;t++){const o=e.getTile(n[t]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,i[a.key]&&i[a.key][e.id]),l=this.proxyToSource[a.key][e.id];l?l.push(s):this.proxyToSource[a.key][e.id]=[s],r.push(s)}}}_createProxiedId(e,n,i){let r=this.orthoMatrix;if(i){const t=i.find((t=>t.key===n.tileID.key));if(t)return t}if(n.tileID.key!==e.key){const i=e.canonical.z-n.tileID.canonical.z;let o,a,s;r=t.create$1();const l=n.tileID.wrap-e.wrap<<e.overscaledZ;i>0?(o=t.EXTENT>>i,a=o*((n.tileID.canonical.x<<i)-e.canonical.x+l),s=o*((n.tileID.canonical.y<<i)-e.canonical.y)):(o=t.EXTENT<<-i,a=t.EXTENT*(n.tileID.canonical.x-(e.canonical.x+l<<-i)),s=t.EXTENT*(n.tileID.canonical.y-(e.canonical.y<<-i))),t.ortho(r,0,o,0,o,0,1),t.translate(r,r,[a,s,0])}return new hn(n.tileID,e.key,r)}_findTileCoveringTileID(e,n){let i=n.getTile(e);if(i&&i.hasData())return i;const r=this._findCoveringTileCache[n.id],o=r[e.key];if(i=o?n.getTileByID(o):null,i&&i.hasData()||null===o)return i;let a=i?i.tileID:e,s=a.overscaledZ;const l=n.getSource().minzoom,c=[];if(!o){const r=n.getSource().maxzoom;if(e.canonical.z>=r){const i=e.canonical.z-r;n.getSource().reparseOverscaled?(s=Math.max(e.canonical.z+2,n.transform.tileZoom),a=new t.OverscaledTileID(s,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i)):0!==i&&(s=r,a=new t.OverscaledTileID(s,e.wrap,r,e.canonical.x>>i,e.canonical.y>>i))}a.key!==e.key&&(c.push(a.key),i=n.getTile(a))}const u=t=>{c.forEach((e=>{r[e]=t})),c.length=0};for(s-=1;s>=l&&(!i||!i.hasData());s--){i&&u(i.tileID.key);const t=a.calculateScaledKey(s);if(i=n.getTileByID(t),i&&i.hasData())break;const e=r[t];if(null===e)break;void 0===e?c.push(t):i=n.getTileByID(e)}return u(i?i.tileID.key:null),i&&i.hasData()?i:null}findDEMTileFor(t){return this.enabled?this._findTileCoveringTileID(t,this.sourceCache):null}prepareDrawTile(t){this.renderedToTile=!0}_clearRenderCacheForTile(t,e){let n=this._tilesDirty[t];n||(n=this._tilesDirty[t]={}),n[e.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const e=function(e){let n,i,r;const o=new t.StructArrayLayout2ui4,a=131;for(i=1;i<129;i++){for(n=1;n<129;n++)r=i*a+n,o.emplaceBack(r,r+1),o.emplaceBack(r,r+a),o.emplaceBack(r+1,r+a),128===i&&o.emplaceBack(r+a,r+a+1);o.emplaceBack(r+1,r+1+a)}return o}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(e),this.wireframeSegments=t.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,e.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}function pn(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const i=t[n].split(" ");e.push(i.pop())}return e}class fn{static cacheKey(t,e,n){let i=`${t}${n?n.cacheKey:""}`;for(const t of e)i+=`/${t}`;return i}constructor(e,n,i,r,o,a){const s=e.gl;this.program=s.createProgram();const l=pn(i.staticAttributes),c=r?r.getBinderAttributes():[],u=l.concat(c),h=i.staticUniforms?pn(i.staticUniforms):[],d=r?r.getBinderUniforms():[],p=h.concat(d),f=[];for(const t of p)f.indexOf(t)<0&&f.push(t);let m=r?r.defines():[];m=m.concat(a.map((t=>`#define ${t}`)));const g=m.concat($e.fragmentSource,Ze,He.fragmentSource,i.fragmentSource).join("\n"),_=m.concat($e.vertexSource,Ze,He.vertexSource,qe.vertexSource,i.vertexSource).join("\n"),y=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(y,g),s.compileShader(y),s.attachShader(this.program,y);const v=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(v,_),s.compileShader(v),s.attachShader(this.program,v),this.attributes={};const b={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);s.linkProgram(this.program),s.deleteShader(v),s.deleteShader(y);for(let t=0;t<f.length;t++){const e=f[t];if(e&&!b[e]){const t=s.getUniformLocation(this.program,e);t&&(b[e]=t)}}this.fixedUniforms=o(e,b),this.binderUniforms=r?r.getUniforms(e,b):[],-1!==a.indexOf("TERRAIN")&&(this.terrainUniforms=((e,n)=>({u_dem:new t.Uniform1i(e,n.u_dem),u_dem_prev:new t.Uniform1i(e,n.u_dem_prev),u_dem_unpack:new t.Uniform4f(e,n.u_dem_unpack),u_dem_tl:new t.Uniform2f(e,n.u_dem_tl),u_dem_scale:new t.Uniform1f(e,n.u_dem_scale),u_dem_tl_prev:new t.Uniform2f(e,n.u_dem_tl_prev),u_dem_scale_prev:new t.Uniform1f(e,n.u_dem_scale_prev),u_dem_size:new t.Uniform1f(e,n.u_dem_size),u_dem_lerp:new t.Uniform1f(e,n.u_dem_lerp),u_exaggeration:new t.Uniform1f(e,n.u_exaggeration),u_depth:new t.Uniform1i(e,n.u_depth),u_depth_size_inv:new t.Uniform2f(e,n.u_depth_size_inv),u_meter_to_dem:new t.Uniform1f(e,n.u_meter_to_dem),u_label_plane_matrix_inv:new t.UniformMatrix4f(e,n.u_label_plane_matrix_inv)}))(e,b)),-1!==a.indexOf("FOG")&&(this.fogUniforms=((e,n)=>({u_fog_matrix:new t.UniformMatrix4f(e,n.u_fog_matrix),u_fog_range:new t.Uniform2f(e,n.u_fog_range),u_fog_color:new t.Uniform4f(e,n.u_fog_color),u_fog_horizon_blend:new t.Uniform1f(e,n.u_fog_horizon_blend),u_fog_temporal_offset:new t.Uniform1f(e,n.u_fog_temporal_offset)}))(e,b))}setTerrainUniformValues(t,e){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].set(e[t])}}setFogUniformValues(t,e){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){t.program.set(this.program);for(const t in e)n[t].location&&n[t].set(e[t])}}draw(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const g=t.gl;if(this.failedToCreate)return;t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(i),t.setColorMode(r),t.setCullFace(o);for(const t in this.fixedUniforms)this.fixedUniforms[t].set(a[t]);p&&p.setUniforms(t,this.binderUniforms,h,{zoom:d});const _={[g.LINES]:2,[g.TRIANGLES]:3,[g.LINE_STRIP]:1}[e];for(const n of u.get()){const i=n.vaos||(n.vaos={});(i[s]||(i[s]=new Ke)).bind(t,this,l,p?p.getPaintVertexBuffers():[],c,n.vertexOffset,f,m),g.drawElements(e,n.primitiveLength*_,g.UNSIGNED_SHORT,n.primitiveOffset*_*2)}}}function mn(t,e,n){const i=1/I(n,1,e.transform.tileZoom),r=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/r,a=o*(n.tileID.canonical.x+n.tileID.wrap*r),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const gn=(e,n,i,r)=>{const o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$2();"viewport"===o.properties.get("anchor")&&(t.fromRotation(l,-n.transform.angle),t.transformMat3(s,s,l));const c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+i,u_opacity:r}},_n=(e,n,i,r,o,a,s)=>t.extend(gn(e,n,i,r),mn(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),yn=t=>({u_matrix:t}),vn=(e,n,i,r)=>t.extend(yn(e),mn(i,n,r)),bn=(t,e)=>({u_matrix:t,u_world:e}),xn=(e,n,i,r,o)=>t.extend(vn(e,n,i,r),{u_world:o}),wn=(e,n,i,r)=>{const o=e.transform;let a;if("map"===r.paint.get("circle-pitch-alignment")){const t=I(i,1,o.zoom);a=[t,t]}else a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:e.translatePosMatrix(n.projMatrix,i,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_device_pixel_ratio:t.exported.devicePixelRatio,u_extrude_scale:a}},En=t=>{const e=[];return"map"===t.paint.get("circle-pitch-alignment")&&e.push("PITCH_WITH_MAP"),"map"===t.paint.get("circle-pitch-scale")&&e.push("SCALE_WITH_MAP"),e},Mn=(e,n,i)=>{const r=t.EXTENT/i.tileSize;return{u_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_extrude_scale:[n.pixelsToGLUnits[0]/r,n.pixelsToGLUnits[1]/r]}},Tn=(t,e,n=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}),Sn=(t,e,n,i)=>({u_matrix:t,u_extrude_scale:I(e,1,n),u_intensity:i}),kn=(e,n,i,r)=>{const o=e.transform;return{u_matrix:An(e,n,i,r),u_ratio:1/I(n,1,o.zoom),u_device_pixel_ratio:t.exported.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Cn=(e,n,i,r,o)=>t.extend(kn(e,n,i,r),{u_image:0,u_image_height:o}),In=(e,n,i,r,o)=>{const a=e.transform,s=Dn(n,a);return{u_matrix:An(e,n,i,o),u_texsize:n.imageAtlasTexture.size,u_ratio:1/I(n,1,a.zoom),u_device_pixel_ratio:t.exported.devicePixelRatio,u_image:0,u_scale:[s,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Ln=(e,n,i,r,o)=>{const a=Dn(n,e.transform);return t.extend(kn(e,n,i,o),{u_texsize:n.lineAtlasTexture.size,u_scale:[a,r.fromScale,r.toScale],u_image:0,u_mix:r.t})};function Dn(t,e){return 1/I(t,1,e.tileZoom)}function An(t,e,n,i){return t.translatePosMatrix(i||e.tileID.projMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Pn=(t,e,n,i,r)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:zn(r.paint.get("raster-hue-rotate"))};var o,a};function zn(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const Nn=(t,e,n,i,r,o,a,s,l,c)=>{const u=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:u.width/u.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+i,u_texsize:c,u_texture:0}},Rn=(e,n,i,r,o,a,s,l,c,u,h)=>{const{cameraToCenterDistance:d,_pitch:p}=o.transform;return t.extend(Nn(e,n,i,r,o,a,s,l,c,u),{u_gamma_scale:r?d*Math.cos(o.terrain?0:p):1,u_device_pixel_ratio:t.exported.devicePixelRatio,u_is_halo:+h})},On=(e,n,i,r,o,a,s,l,c,u)=>t.extend(Rn(e,n,i,r,o,a,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),Fn=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),Bn=(e,n,i,r,o,a)=>t.extend(function(t,e,n,i){const r=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),{width:a,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(i.tileID.canonical.x+i.tileID.wrap*l),h=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/I(i,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(r,a,i,o),{u_matrix:e,u_opacity:n}),Un={fillExtrusion:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale)}),collisionCircle:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_scale:new t.Uniform3f(e,n.u_scale),u_mix:new t.Uniform1f(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),background:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}),terrainRaster:nn,terrainDepth:nn,skybox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_sun_direction:new t.Uniform3f(e,n.u_sun_direction),u_cubemap:new t.Uniform1i(e,n.u_cubemap),u_opacity:new t.Uniform1f(e,n.u_opacity),u_temporal_offset:new t.Uniform1f(e,n.u_temporal_offset)}),skyboxGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_center_direction:new t.Uniform3f(e,n.u_center_direction),u_radius:new t.Uniform1f(e,n.u_radius),u_opacity:new t.Uniform1f(e,n.u_opacity),u_temporal_offset:new t.Uniform1f(e,n.u_temporal_offset)}),skyboxCapture:(e,n)=>({u_matrix_3f:new t.UniformMatrix3f(e,n.u_matrix_3f),u_sun_direction:new t.Uniform3f(e,n.u_sun_direction),u_sun_intensity:new t.Uniform1f(e,n.u_sun_intensity),u_color_tint_r:new t.Uniform4f(e,n.u_color_tint_r),u_color_tint_m:new t.Uniform4f(e,n.u_color_tint_m),u_luminance:new t.Uniform1f(e,n.u_luminance)})};let Yn;function jn(e,n,i,r,o,a,s){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[];let d=0,p=0;for(let f=0;f<r.length;f++){const m=r[f],g=n.getTile(m),_=g.getBucket(i);if(!_)continue;let y=m.projMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(m.projMatrix,g,o,a));const v=s?_.textCollisionBox:_.iconCollisionBox,b=_.collisionCircleArray;if(b.length>0){const n=t.create$1(),i=y;t.mul$1(n,_.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul$1(n,n,_.placementViewportMatrix),h.push({circleArray:b,circleOffset:p,transform:i,invTransform:n}),d+=b.length/4,p=d}v&&(e.terrain&&e.terrain.setupElevationDraw(g,u),u.draw(l,c.LINES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,Mn(y,e.transform,g),i.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,v.collisionVertexBuffer,v.collisionVertexBufferExt))}if(!s||!h.length)return;const f=e.useProgram("collisionCircle"),m=new t.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let g=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,i=t.circleArray[n+0],r=t.circleArray[n+1],o=t.circleArray[n+2],a=t.circleArray[n+3];m.emplace(g++,i,r,o,a,0),m.emplace(g++,i,r,o,a,1),m.emplace(g++,i,r,o,a,2),m.emplace(g++,i,r,o,a,3)}(!Yn||Yn.length<2*d)&&(Yn=function(e){const n=2*e,i=new t.StructArrayLayout3ui6;i.resize(n),i._trim();for(let t=0;t<n;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(d));const _=l.createIndexBuffer(Yn,!0),y=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const n of h){const r={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(v=e.transform).cameraToCenterDistance,u_viewport_size:[v.width,v.height]};f.draw(l,c.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,r,i.id,y,_,t.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,e.transform.zoom,null,null,null)}var v;y.destroy(),_.destroy()}const Vn=t.identity(new Float32Array(16));function Gn(e,n,i,r,o,a){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),c=-(s-.5)*n,u=-(l-.5)*i,h=t.evaluateVariableOffset(e,r);return new t.pointGeometry((c/o+h[0])*a,(u/o+h[1])*a)}function qn(e,n,i,r,o,a,s,l,c,u,h,d){const p=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,g={};f.clear();for(let m=0;m<p.length;m++){const _=p.get(m),y=e.allowVerticalPlacement&&!_.placedOrientation,v=_.hidden||!_.crossTileID||y?null:r[_.crossTileID];if(v){const r=new t.pointGeometry(_.anchorX,_.anchorY),p=d(r),m=Kt(r,i?l:s,p),y=Jt(a.cameraToCenterDistance,m.signedDistanceFromCamera);let b=o.evaluateSizeForFeature(e.textSizeData,u,_)*y/t.ONE_EM;i&&(b*=e.tilePixelRatio/c);const{width:x,height:w,anchor:E,textOffset:M,textScale:T}=v,S=Gn(E,x,w,M,T,b),k=i?Kt(r.add(S),s,p).point:m.point.add(n?S.rotate(-a.angle):S),C=e.allowVerticalPlacement&&_.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<_.numGlyphs;e++)t.addDynamicAttributes(f,k,C);h&&_.associatedIconIndex>=0&&(g[_.associatedIconIndex]={shiftedAnchor:k,angle:C})}else se(_.numGlyphs,f)}if(h){m.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const i=n.get(e);if(i.hidden)se(i.numGlyphs,m);else{const n=g[e];if(n)for(let e=0;e<i.numGlyphs;e++)t.addDynamicAttributes(m,n.shiftedAnchor,n.angle);else se(i.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function Hn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function $n(e,n,i,r,o,a,s,l,c,u,h,d){const p=e.context,f=p.gl,m=e.transform,g="map"===l,_="map"===c,y=g&&"point"!==i.layout.get("symbol-placement"),v=g&&!_&&!y,b=void 0!==i.layout.get("symbol-sort-key").constantOr(1);let x=!1;const w=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),E=i.layout.get("text-variable-anchor"),M=[],T=e.terrain&&_?["PITCH_WITH_MAP_TERRAIN"]:null;for(const l of r){const r=n.getTile(l),c=r.getBucket(i);if(!c)continue;const h=o?c.text:c.icon;if(!h||!h.segments.get().length)continue;const d=h.programConfigurations.get(i.id),p=o||c.sdfIcons,w=o?c.textSizeData:c.iconSizeData,S=_||0!==m.pitch,k=e.useProgram(Hn(p,o,c),d,T),C=t.evaluateSizeForZoom(w,m.zoom);let L,D,A,P,z=[0,0],N=null;if(o){if(D=r.glyphAtlasTexture,A=f.LINEAR,L=r.glyphAtlasTexture.size,c.iconsInText){z=r.imageAtlasTexture.size,N=r.imageAtlasTexture;const t="composite"===w.kind||"camera"===w.kind;P=S||e.options.rotating||e.options.zooming||t?f.LINEAR:f.NEAREST}}else{const t=1!==i.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;D=r.imageAtlasTexture,A=p||e.options.rotating||e.options.zooming||t||S?f.LINEAR:f.NEAREST,L=r.imageAtlasTexture.size}const R=I(r,1,e.transform.zoom),O=Wt(l.projMatrix,_,g,e.transform,R),F=e.terrain&&_&&y?t.invert(new Float32Array(16),O):Vn,B=Xt(l.projMatrix,_,g,e.transform,R),U=E&&c.hasTextData(),Y="none"!==i.layout.get("icon-text-fit")&&U&&c.hasIconData();if(y){const t=m.elevation;te(c,l.projMatrix,e,o,O,B,_,u,t?e=>t.getAtTileOffset(l,e.x,e.y):null)}const j=e.translatePosMatrix(l.projMatrix,r,a,s),V=y||o&&E||Y?Vn:O,G=e.translatePosMatrix(B,r,a,s,!0),q=p&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let H;H=p?c.iconsInText?On(w.kind,C,v,_,e,j,V,G,L,z):Rn(w.kind,C,v,_,e,j,V,G,o,L,!0):Nn(w.kind,C,v,_,e,j,V,G,o,L);const $={program:k,buffers:h,uniformValues:H,atlasTexture:D,atlasTextureIcon:N,atlasInterpolation:A,atlasInterpolationIcon:P,isSDF:p,hasHalo:q,tile:r,labelPlaneMatrixInv:F};if(b&&c.canOverlap){x=!0;const e=h.segments.get();for(const n of e)M.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:$})}else M.push({segments:h.segments,sortKey:0,state:$})}x&&M.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of M){const n=t.state;if(e.terrain&&e.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,Zn(n.buffers,t.segments,i,e,n.program,w,h,d,r)),r.u_is_halo=0}Zn(n.buffers,t.segments,i,e,n.program,w,h,d,n.uniformValues)}}function Zn(e,n,i,r,o,a,s,l,c){const u=r.context;o.draw(u,u.gl.TRIANGLES,a,s,l,t.CullFaceMode.disabled,c,i.id,e.layoutVertexBuffer,e.indexBuffer,n,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Wn(e,n,i,r,o,a,s){const l=e.context.gl,c=i.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=i.getCrossfadeParameters();let d,p,f,m,g;s?(p=u&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=u?"fillPattern":"fill",d=l.TRIANGLES);for(const _ of r){const r=n.getTile(_);if(u&&!r.patternsLoaded())continue;const y=r.getBucket(i);if(!y)continue;e.prepareDrawTile(_);const v=y.programConfigurations.get(i.id),b=e.useProgram(p,v);u&&(e.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers(h));const x=c.constantOr(null);if(x&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[x.to.toString()],n=t.patternPositions[x.from.toString()];e&&n&&v.setConstantPatternPositions(e,n)}const w=e.translatePosMatrix(_.projMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(s){m=y.indexBuffer2,g=y.segments2;const t=e.terrain&&e.terrain.renderingToTexture?e.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===p&&u?xn(w,e,h,r,t):bn(w,t)}else m=y.indexBuffer,g=y.segments,f=u?vn(w,e,h,r):yn(w);e.prepareDrawProgram(e.context,b,_.toUnwrapped()),b.draw(e.context,d,o,e.stencilModeForClipping(_),a,t.CullFaceMode.disabled,f,i.id,y.layoutVertexBuffer,m,g,i.paint,e.transform.zoom,v)}}function Xn(e,n,i,r,o,a,s){const l=e.context,c=l.gl,u=i.paint.get("fill-extrusion-pattern"),h=u.constantOr(1),d=i.getCrossfadeParameters(),p=i.paint.get("fill-extrusion-opacity");for(const f of r){const r=n.getTile(f),m=r.getBucket(i);if(!m)continue;const g=m.programConfigurations.get(i.id),_=e.useProgram(h?"fillExtrusionPattern":"fillExtrusion",g);if(e.terrain){const t=e.terrain;if(!m.enableTerrain)continue;if(t.setupElevationDraw(r,_,{useMeterToDem:!0}),Kn(l,n,f,m,i,t),!m.centroidVertexBuffer){const t=_.attributes.a_centroid_pos;void 0!==t&&c.vertexAttrib2f(t,0,0)}}h&&(e.context.activeTexture.set(c.TEXTURE0),r.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),g.updatePaintBuffers(d));const y=u.constantOr(null);if(y&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[y.to.toString()],n=t.patternPositions[y.from.toString()];e&&n&&g.setConstantPatternPositions(e,n)}const v=e.translatePosMatrix(f.projMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),b=i.paint.get("fill-extrusion-vertical-gradient"),x=h?_n(v,e,b,p,f,d,r):gn(v,e,b,p);e.prepareDrawProgram(l,_,f.toUnwrapped()),_.draw(l,l.gl.TRIANGLES,o,a,s,t.CullFaceMode.backCCW,x,i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,i.paint,e.transform.zoom,g,e.terrain?m.centroidVertexBuffer:null)}}function Kn(e,n,i,r,o,a){const s=[e=>{let n=e.canonical.x-1,i=e.wrap;return n<0&&(n=(1<<e.canonical.z)-1,i--),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>{let n=e.canonical.x+1,i=e.wrap;return n===1<<e.canonical.z&&(n=0,i++),new t.OverscaledTileID(e.overscaledZ,i,e.canonical.z,n,e.canonical.y)},e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new t.OverscaledTileID(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)],l=t=>{const e=n.getSource().maxzoom,i=t=>{const e=n.getTileByID(t);if(e&&e.hasData())return e.getBucket(o)};let r,a,s;return(t.overscaledZ===t.canonical.z||t.overscaledZ>=e)&&(r=i(t.key)),t.overscaledZ>=e&&(a=i(t.calculateScaledKey(t.overscaledZ+1))),t.overscaledZ>e&&(s=i(t.calculateScaledKey(t.overscaledZ-1))),r||a||s},c=[0,0,0],u=(e,n)=>(c[0]=Math.min(e.min.y,n.min.y),c[1]=Math.max(e.max.y,n.max.y),c[2]=t.EXTENT-n.min.x>e.max.x?n.min.x-t.EXTENT:e.max.x,c),h=(e,n)=>(c[0]=Math.min(e.min.x,n.min.x),c[1]=Math.max(e.max.x,n.max.x),c[2]=t.EXTENT-n.min.y>e.max.y?n.min.y-t.EXTENT:e.max.y,c),d=[(t,e)=>u(t,e),(t,e)=>u(e,t),(t,e)=>h(t,e),(t,e)=>h(e,t)],p=new t.pointGeometry(0,0);let f,m,g;const _=(e,n,r,o,s)=>{const l=[[o?r:e,o?e:r,0],[o?r:n,o?n:r,0]],c=s<0?t.EXTENT+s:s,u=[o?c:(e+n)/2,o?(e+n)/2:c,0];return 0===r&&s<0||0!==r&&s>0?a.getForTilePoints(g,[u],!0,m):l.push(u),a.getForTilePoints(i,l,!0,f),Math.max(l[0][2],l[1][2],u[2])/a.exaggeration()};for(let e=0;e<4;e++){const n=r.borders[e];if(0===n.length&&(r.borderDone[e]=!0),r.borderDone[e])continue;const o=g=s[e](i),c=l(o);if(!c||!c.enableTerrain)continue;if(m=a.findDEMTileFor(o),!m||!m.dem)continue;if(!f){const t=a.findDEMTileFor(i);if(!t||!t.dem)return;f=t}const u=(e<2?1:5)-e,h=c.borders[u];let y=0;for(let i=0;i<n.length;i++){const o=r.featuresOnBorder[n[i]],a=o.borders[e];let s;for(;y<h.length&&(s=c.featuresOnBorder[h[y]],!(s.borders[u][1]>a[0]+3));)c.borderDone[u]||c.encodeCentroid(void 0,s,!1),y++;if(s&&y<h.length){const n=y;let i=0;for(;!(s.borders[u][0]>a[1]-3)&&(i++,++y!==h.length);)s=c.featuresOnBorder[h[y]];if(s=c.featuresOnBorder[h[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==i){1!==i&&(y=n),r.encodeCentroid(void 0,o,!1),c.borderDone[u]||c.encodeCentroid(void 0,s,!1);continue}const l=d[e](o,s),f=e%2?t.EXTENT-1:0;p.x=_(l[0],Math.min(t.EXTENT-1,l[1]),f,e<2,l[2]),p.y=0,r.encodeCentroid(p,o,!1),c.borderDone[u]||c.encodeCentroid(p,s,!1)}else r.encodeCentroid(void 0,o,!1)}r.borderDone[e]=r.needsCentroidUpdate=!0,c.borderDone[u]||(c.borderDone[u]=c.needsCentroidUpdate=!0)}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(e)}const Jn=new t.Color(1,0,0,1),Qn=new t.Color(0,1,0,1),ti=new t.Color(0,0,1,1),ei=new t.Color(1,0,1,1),ni=new t.Color(0,1,1,1);function ii(t,e,n,i){oi(t,0,e+n/2,t.transform.width,n,i)}function ri(t,e,n,i){oi(t,e-n/2,0,n,t.transform.height,i)}function oi(e,n,i,r,o,a){const s=e.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*t.exported.devicePixelRatio,i*t.exported.devicePixelRatio,r*t.exported.devicePixelRatio,o*t.exported.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}function ai(e,n,i){const r=e.context,o=r.gl,a=i.projMatrix,s=e.useProgram("debug"),l=n.getTileByID(i.key);e.terrain&&e.terrain.setupElevationDraw(l,s);const c=t.DepthMode.disabled,u=t.StencilMode.disabled,h=e.colorModeForRenderPass(),d="$debug";r.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(r,o.LINE_STRIP,c,u,h,t.CullFaceMode.disabled,Tn(a,t.Color.red),d,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);const p=l.latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=n.getTile(i).tileSize,g=512/Math.min(m,512)*(i.overscaledZ/e.transform.zoom)*.5;let _=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(_+=` => ${i.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,i=t.context.gl,r=t.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(e,5,5),r.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,`${_} ${f}kb`),s.draw(r,o.TRIANGLES,c,u,t.ColorMode.alphaBlended,t.CullFaceMode.disabled,Tn(a,t.Color.transparent,g),d,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}const si=t.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:li}=si;function ci(t,e,n,i){t.emplaceBack(e,n,i)}class ui{constructor(e){this.vertexArray=new t.StructArrayLayout3f12,this.indices=new t.StructArrayLayout3ui6,ci(this.vertexArray,-1,-1,1),ci(this.vertexArray,1,-1,1),ci(this.vertexArray,-1,1,1),ci(this.vertexArray,1,1,1),ci(this.vertexArray,-1,-1,-1),ci(this.vertexArray,1,-1,-1),ci(this.vertexArray,-1,1,-1),ci(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=e.createVertexBuffer(this.vertexArray,li),this.indexBuffer=e.createIndexBuffer(this.indices),this.segment=t.SegmentVector.simpleSegment(0,0,36,12)}}function hi(e,n,i,r,o,a){const s=e.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),h=((t,e,n,i,r)=>({u_matrix_3f:t,u_sun_direction:e,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(t.fromMat4([],r),o,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),i.draw(e,s.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,t.ColorMode.unblended,t.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const di={symbol:function(e,n,i,r,o){if("translucent"!==e.renderPass)return;const a=t.StencilMode.disabled,s=e.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(e,n,i,r,o,a,s){const l=n.transform,c="map"===o,u="map"===a;for(const o of e){const e=r.getTile(o),a=e.getBucket(i);if(!a||!a.text||!a.text.segments.get().length)continue;const h=t.evaluateSizeForZoom(a.textSizeData,l.zoom),d=I(e,1,n.transform.zoom),p=Wt(o.projMatrix,u,c,n.transform,d),f="none"!==i.layout.get("icon-text-fit")&&a.hasIconData();if(h){const n=Math.pow(2,l.zoom-e.tileID.overscaledZ),i=l.elevation;qn(a,c,u,s,t.symbolSize,l,p,o.projMatrix,n,h,f,i?t=>i.getAtTileOffset(o,t.x,t.y):t=>0)}}}(r,e,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&$n(e,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&$n(e,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(jn(e,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),jn(e,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),d=t.StencilMode.disabled,p=e.colorModeForRenderPass(),f=[];for(let o=0;o<r.length;o++){const a=r[o],s=n.getTile(a),c=s.getBucket(i);if(!c)continue;const u=c.programConfigurations.get(i.id),h=En(i),d={programConfiguration:u,program:e.useProgram("circle",u,h),layoutVertexBuffer:c.layoutVertexBuffer,indexBuffer:c.indexBuffer,uniformValues:wn(e,a,s,i),tile:s};if(l){const e=c.segments.get();for(const n of e)f.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:d})}else f.push({segments:c.segments,sortKey:0,state:d})}l&&f.sort(((t,e)=>t.sortKey-e.sortKey));for(const n of f){const{programConfiguration:r,program:o,layoutVertexBuffer:a,indexBuffer:s,uniformValues:l,tile:f}=n.state,m=n.segments;e.terrain&&e.terrain.setupElevationDraw(f,o,{useDepthForOcclusion:!0}),e.prepareDrawProgram(c,o,f.tileID.toUnwrapped()),o.draw(c,u.TRIANGLES,h,d,p,t.CullFaceMode.disabled,l,i.id,a,s,m,i.paint,e.transform.zoom,r)}},heatmap:function(e,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=t.StencilMode.disabled,l=new t.ColorMode([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){const i=t.gl;t.activeTexture.set(i.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let r=n.heatmapFbo;if(r)i.bindTexture(i.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{const o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),r=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,i){const r=t.gl;r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.width/4,e.height/4,0,r.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:r.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(t,e,o,r)}}(o,e,i),o.clear({color:t.Color.transparent});for(let c=0;c<r.length;c++){const u=r[c];if(n.hasRenderableParent(u))continue;const h=n.getTile(u),d=h.getBucket(i);if(!d)continue;const p=d.programConfigurations.get(i.id),f=e.useProgram("heatmap",p),{zoom:m}=e.transform;e.terrain&&e.terrain.setupElevationDraw(h,f),e.prepareDrawProgram(o,f,u.toUnwrapped()),f.draw(o,a.TRIANGLES,t.DepthMode.disabled,s,l,t.CullFaceMode.disabled,Sn(u.projMatrix,h,m,i.paint.get("heatmap-intensity")),i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,p)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const i=e.context,r=i.gl,o=n.heatmapFbo;if(!o)return;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(i,n.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,r.TRIANGLES,t.DepthMode.disabled,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.disabled,((t,e,n,i)=>({u_image:0,u_color_ramp:1,u_opacity:e.paint.get("heatmap-opacity")}))(0,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,i))},line:function(e,n,i,r){if("translucent"!==e.renderPass)return;const o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),l=e.colorModeForRenderPass(),c=i.paint.get("line-dasharray"),u=c.constantOr(1),h=i.layout.get("line-cap"),d=i.paint.get("line-pattern"),p=d.constantOr(1),f=i.paint.get("line-gradient"),m=i.getCrossfadeParameters(),g=p?"linePattern":u?"lineSDF":f?"lineGradient":"line",_=e.context,y=_.gl;for(const o of r){const r=n.getTile(o);if(p&&!r.patternsLoaded())continue;const a=r.getBucket(i);if(!a)continue;e.prepareDrawTile(o);const v=a.programConfigurations.get(i.id),b=e.useProgram(g,v),x=d.constantOr(null);if(x&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[x.to.toString()],n=t.patternPositions[x.from.toString()];e&&n&&v.setConstantPatternPositions(e,n)}const w=c.constantOr(null),E=h.constantOr(null);if(!p&&w&&E&&r.lineAtlas){const t=r.lineAtlas,e=t.getDash(w.to,E),n=t.getDash(w.from,E);e&&n&&v.setConstantPatternPositions(e,n)}const M=e.terrain?o.projMatrix:null,T=p?In(e,r,i,m,M):u?Ln(e,r,i,m,M):f?Cn(e,r,i,M,a.lineClipsArray.length):kn(e,r,i,M);if(p)_.activeTexture.set(y.TEXTURE0),r.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),v.updatePaintBuffers(m);else if(u)_.activeTexture.set(y.TEXTURE0),r.lineAtlasTexture.bind(y.LINEAR,y.REPEAT),v.updatePaintBuffers(m);else if(f){const r=a.gradients[i.id];let s=r.texture;if(i.gradientVersion!==r.version){let l=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=o.canonical.z===i?Math.ceil(1<<e.transform.maxZoom-o.canonical.z):1;l=t.clamp(t.nextPowerOfTwo(a.maxLineLength/t.EXTENT*1024*r),256,_.maxTextureSize)}r.gradient=t.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:r.gradient||void 0,clips:a.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new t.Texture(_,r.gradient,y.RGBA),r.version=i.gradientVersion,s=r.texture}_.activeTexture.set(y.TEXTURE0),s.bind(i.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}e.prepareDrawProgram(_,b,o.toUnwrapped()),b.draw(_,y.TRIANGLES,s,e.stencilModeForClipping(o),l,t.CullFaceMode.disabled,T,i.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,i.paint,e.transform.zoom,v,a.layoutVertexBuffer2)}},fill:function(e,n,i,r){const o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const o=e.depthModeForSublayer(1,"opaque"===e.renderPass?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly);Wn(e,n,i,r,o,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const o=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,t.DepthMode.ReadOnly);Wn(e,n,i,r,o,s,!0)}},"fill-extrusion":function(e,n,i,r){const o=i.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===e.renderPass){const a=new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D);if(1!==o||i.paint.get("fill-extrusion-pattern").constantOr(1))Xn(e,n,i,r,a,t.StencilMode.disabled,t.ColorMode.disabled),Xn(e,n,i,r,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const o=e.colorModeForRenderPass();Xn(e,n,i,r,a,t.StencilMode.disabled,o)}}},hillshade:function(e,n,i,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const o=e.context,a=e.depthModeForSublayer(0,t.DepthMode.ReadOnly),s=e.colorModeForRenderPass(),l=e.terrain&&e.terrain.renderingToTexture,[c,u]="translucent"!==e.renderPass||l?[{},r]:e.stencilConfigForOverlap(r);for(const r of u){const o=n.getTile(r);if(o.needsHillshadePrepare&&"offscreen"===e.renderPass)en(e,o,i,a,t.StencilMode.disabled,s);else if("translucent"===e.renderPass){const t=l&&e.terrain?e.terrain.stencilModeForRTTOverlap(r):c[r.overscaledZ];Qe(e,r,o,i,a,t,s)}}o.viewport.set([0,0,e.width,e.height])},raster:function(e,n,i,r,o,a){if("translucent"!==e.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const s=e.context,l=s.gl,c=n.getSource(),u=e.useProgram("raster"),h=e.colorModeForRenderPass(),d=e.terrain&&e.terrain.renderingToTexture,[p,f]=c instanceof Mt||d?[{},r]:e.stencilConfigForOverlap(r),m=f[f.length-1].overscaledZ,g=!e.options.moving;for(const r of f){const o=d?t.DepthMode.disabled:e.depthModeForSublayer(r.overscaledZ-m,1===i.paint.get("raster-opacity")?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly,l.LESS),f=r.toUnwrapped(),_=n.getTile(r);if(d&&(!_||!_.hasData()))continue;const y=d?r.projMatrix:e.transform.calculateProjMatrix(f,g),v=e.terrain&&d?e.terrain.stencilModeForRTTOverlap(r):p[r.overscaledZ],b=a?0:i.paint.get("raster-fade-duration");_.registerFadeDuration(b);const x=n.findLoadedParent(r,0),w=cn(_,x,n,e.transform,b);let E,M;e.terrain&&e.terrain.prepareDrawTile(r);const T="nearest"===i.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),_.texture.bind(T,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),s.activeTexture.set(l.TEXTURE1),x?(x.texture.bind(T,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),E=Math.pow(2,x.tileID.overscaledZ-_.tileID.overscaledZ),M=[_.tileID.canonical.x*E%1,_.tileID.canonical.y*E%1]):_.texture.bind(T,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const S=Pn(y,M||[0,0],E||1,w,i);e.prepareDrawProgram(s,u,f),c instanceof Mt?u.draw(s,l.TRIANGLES,o,t.StencilMode.disabled,h,t.CullFaceMode.disabled,S,i.id,c.boundsBuffer,e.quadTriangleIndexBuffer,c.boundsSegments):u.draw(s,l.TRIANGLES,o,v,h,t.CullFaceMode.disabled,S,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,n,i,r){const o=i.paint.get("background-color"),a=i.paint.get("background-opacity");if(0===a)return;const s=e.context,l=s.gl,c=e.transform,u=c.tileSize,h=i.paint.get("background-pattern");if(e.isPatternMissing(h))return;const d=!h&&1===o.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const p=t.StencilMode.disabled,f=e.depthModeForSublayer(0,"opaque"===d?t.DepthMode.ReadWrite:t.DepthMode.ReadOnly),m=e.colorModeForRenderPass(),g=e.useProgram(h?"backgroundPattern":"background"),_=r||c.coveringTiles({tileSize:u});h&&(s.activeTexture.set(l.TEXTURE0),e.imageManager.bind(e.context));const y=i.getCrossfadeParameters();for(const n of _){const c=n.toUnwrapped(),d=r?n.projMatrix:e.transform.calculateProjMatrix(c);e.prepareDrawTile(n);const _=h?Bn(d,a,e,h,{tileID:n,tileSize:u},y):Fn(d,a,o);e.prepareDrawProgram(s,g,c),g.draw(s,l.TRIANGLES,f,p,m,t.CullFaceMode.disabled,_,i.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}},sky:function(e,n,i){const r=i.paint.get("sky-opacity");if(0===r)return;const o=e.context,a=i.paint.get("sky-type"),s=new t.DepthMode(o.gl.LEQUAL,t.DepthMode.ReadOnly,[0,1]),l=e.frameCounter/1e3%1;"atmosphere"===a?"offscreen"===e.renderPass?i.needsSkyboxCapture(e)&&(function(e,n,i,r){const o=e.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new ui(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let t=0;t<6;++t)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const l=n.getCenter(e,!0),c=e.useProgram("skyboxCapture"),u=new Float64Array(16);t.identity(u),t.rotateY(u,u,.5*-Math.PI),hi(o,n,c,u,l,0),t.identity(u),t.rotateY(u,u,.5*Math.PI),hi(o,n,c,u,l,1),t.identity(u),t.rotateX(u,u,.5*-Math.PI),hi(o,n,c,u,l,2),t.identity(u),t.rotateX(u,u,.5*Math.PI),hi(o,n,c,u,l,3),t.identity(u),hi(o,n,c,u,l,4),t.identity(u),t.rotateY(u,u,Math.PI),hi(o,n,c,u,l,5),o.viewport.set([0,0,e.width,e.height])}(e,i),i.markSkyboxValid(e)):"sky"===e.renderPass&&function(e,n,i,r,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((t,e,n,i,r)=>({u_matrix:t,u_sun_direction:e,u_cubemap:0,u_opacity:i,u_temporal_offset:r}))(l.skyboxMatrix,n.getCenter(e,!1),0,r,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,s,r,l):"gradient"===a&&"sky"===e.renderPass&&function(e,n,i,r,o){const a=e.context,s=a.gl,l=e.transform,c=e.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new ui(a)),a.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new t.Texture(a,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((e,n,i,r,o)=>({u_matrix:e,u_color_ramp:0,u_center_direction:n,u_radius:t.degToRad(i),u_opacity:r,u_temporal_offset:o}))(l.skyboxMatrix,n.getCenter(e,!1),n.paint.get("sky-gradient-radius"),r,o);e.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,i,t.StencilMode.disabled,e.colorModeForRenderPass(),t.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(e,i,s,r,l)},debug:function(t,e,n){for(let i=0;i<n.length;i++)ai(t,e,n[i])},custom:function(e,n,i){const r=e.context,o=i.implementation;if("offscreen"===e.renderPass){const t=o.prerender;t&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),t.call(o,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(t.StencilMode.disabled);const n="3d"===o.renderingMode?new t.DepthMode(e.context.gl.LEQUAL,t.DepthMode.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,t.DepthMode.ReadOnly);r.setDepthMode(n),o.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}};class pi{constructor(e,n){this.context=new bt(e),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=t.SourceCache.maxUnderzooming+t.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Re,this.gpuTimers={},this.frameCounter=0}updateTerrain(t,e){const n=!!t&&!!t.terrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new dn(this,t));const i=this._terrain;this.transform.elevation=n?i:null,i.update(t,this.transform,e)}_updateFog(t){const e=t.fog;if(!e||e.getOpacity(this.transform.pitch)<1||e.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,i]=e.getFovAdjustedRange(this.transform._fov);if(n>i)return void(this.transform.fogCullDistSq=null);const r=n+.78*(i-n);this.transform.fogCullDistSq=r*r}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(e,n){if(this.width=e*t.exported.devicePixelRatio,this.height=n*t.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const t of this.style.order)this.style._layers[t].resize()}setup(){const e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,t.posAttributes.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(t.EXTENT,0),i.emplaceBack(0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(i,t.posAttributes.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,Et.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.StructArrayLayout2i4;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(-1,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,t.posAttributes.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA),this.identityMat=t.create$1();const l=this.context.gl;this.stencilClearMode=new t.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(t.window.performance.now())}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this.useProgram("clippingMask").draw(e,n.TRIANGLES,t.DepthMode.disabled,this.stencilClearMode,t.ColorMode.disabled,t.CullFaceMode.disabled,ln(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,n,i){if(!(n&&this.currentStencilSource!==n.id&&e.isTileClipped()&&i&&i.length))return;this.currentStencilSource=n.id;const r=this.context,o=r.gl;this.nextStencilID+i.length>256&&this.clearStencil(),r.setColorMode(t.ColorMode.disabled),r.setDepthMode(t.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of i){const n=this._tileClippingMaskIDs[e.key]=this.nextStencilID++;a.draw(r,o.TRIANGLES,t.DepthMode.disabled,new t.StencilMode({func:o.ALWAYS,mask:0},n,255,o.KEEP,o.KEEP,o.REPLACE),t.ColorMode.disabled,t.CullFaceMode.disabled,ln(e.projMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,n=this.context.gl;return new t.StencilMode({func:n.NOTEQUAL,mask:255},e,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const n=this.context.gl;return new t.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(e){const n=this.context.gl,i=e.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=i[i.length-1].overscaledZ,o=i[0].overscaledZ-r+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const e={};for(let i=0;i<o;i++)e[i+r]=new t.StencilMode({func:n.GEQUAL,mask:255},i+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[e,i]}return[{[r]:t.StencilMode.disabled},i]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new t.ColorMode([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?t.ColorMode.unblended:t.ColorMode.alphaBlended}depthModeForSublayer(e,n,i){if(!this.opaquePassEnabledForLayer())return t.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new t.DepthMode(i||this.context.gl.LEQUAL,n,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const i=this.style.order,r=this.style._sourceCaches;for(const t in r){const e=r[t];e.used&&e.prepare(this.context)}const o={},a={},s={};for(const t in r){const e=r[t];o[t]=e.getVisibleCoordinates(),a[t]=o[t].slice().reverse(),s[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++)if(this.style._layers[i[t]].is3D()){this.opaquePassCutoff=t;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),!t.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const t of i){const n=this.style._layers[t],i=e._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const r=i?a[i.id]:void 0;("custom"===n.type||n.isSky()||r&&r.length)&&this.renderLayer(this,i,n,r)}this.depthRangeFor3D=[0,1-(e.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);let l=t.Color.transparent;if(this.style.fog&&(l=this.style.fog.properties.get("color")),this.context.clear({color:n.showOverdrawInspector?t.Color.black:l,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky())continue;const r=n?a[n.id]:void 0;this._renderTileClippingMasks(t,n,r),this.renderLayer(this,n,t,r)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);t.isSky()&&this.renderLayer(this,n,t,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){const t=this.style._layers[i[this.currentLayer]],n=e._getLayerSourceCache(t);if(t.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(t)){if(t.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const r=n?("symbol"===t.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(t,n,n?o[n.id]:void 0),this.renderLayer(this,n,t,r),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let n=null;t.values(this.style._layers).forEach((t=>{const i=e._getLayerSourceCache(t);i&&!t.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<i.getSource().maxzoom)&&(n=i)})),n&&this.options.showTileBoundaries&&di.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;ii(t,t.transform.height-(e.top||0),3,Jn),ii(t,e.bottom||0,3,Qn),ri(t,e.left||0,3,ti),ri(t,t.transform.width-(e.right||0),3,ei);const n=t.transform.centerPoint;!function(t,e,n,i){oi(t,e-1,n-10,2,20,i),oi(t,e-10,n-1,20,2,i)}(t,n.x,t.transform.height-n.y,ni)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%t.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(t.window.performance.now()),this.saveCanvasCopy())}renderLayer(t,e,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),di[n.type](t,e,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const n in t){const i=t[n],r=this.context.extTimerQuery,o=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),e[n]=o}return e}translatePosMatrix(e,n,i,r,o){if(!i[0]&&!i[1])return e;const a=o?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){const t=Math.sin(a),e=Math.cos(a);i=[i[0]*e-i[1]*t,i[0]*t+i[1]*e]}const s=[o?i[0]:I(n,i[0],this.transform.zoom),o?i[1]:I(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}currentGlobalDefines(){const t=this.terrain&&this.terrain.renderingToTexture,e=this.style&&this.style.fog,n=[];return this.terrain&&!this.terrain.renderingToTexture&&n.push("TERRAIN"),e&&!t&&0!==e.getOpacity(this.transform.pitch)&&n.push("FOG"),t&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}useProgram(t,e,n){this.cache=this.cache||{};const i=n||[],r=this.currentGlobalDefines().concat(i),o=fn.cacheKey(t,r,e);return this.cache[o]||(this.cache[o]=new fn(this.context,t,We[t],e,Un[t],r)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(t){this.terrain&&this.terrain.prepareDrawTile(t)}prepareDrawProgram(t,e,n){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const r=i.getOpacity(this.transform.pitch);0!==r&&e.setFogUniformValues(t,((t,e,n,i)=>{const r=e.properties.get("color"),o=t.frameCounter/1e3%1,a=[r.r/r.a,r.g/r.a,r.b/r.a,i];return{u_fog_matrix:n?t.transform.calculateFogTileMatrix(n):t.identityMat,u_fog_range:e.getFovAdjustedRange(t.transform._fov),u_fog_color:a,u_fog_horizon_blend:e.properties.get("horizon-blend"),u_fog_temporal_offset:o}})(this,i,n,r))}}setTileLoadedFlag(t){this.tileLoaded=t}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const t=this.context.gl,e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,t.drawingBufferWidth,t.drawingBufferHeight,0),e}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const t=this.style&&this.style.fog;return!!t&&0!==t.getOpacity(this.transform.pitch)}}class fi{constructor(t=0,e=0,n=0,i=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=i}interpolate(e,n,i){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,i)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,i)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,i)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,i)),this}getCenter(e,n){const i=t.clamp((this.left+e-this.right)/2,0,e),r=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(i,r)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new fi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function mi(t,e){return[t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]]}function gi(t,e,n){t[4*e+0]=n[0],t[4*e+1]=n[1],t[4*e+2]=n[2],t[4*e+3]=n[3]}function _i(e,n){const i=mi(e,3);t.fromQuat(e,n),gi(e,3,i)}function yi(t,e){gi(t,3,[e[0],e[1],e[2],1])}function vi(e,n){const i=t.identity$1([]);return t.rotateZ$1(i,i,-n),t.rotateX$1(i,i,-e),i}function bi(e,n){const i=[e[0],e[1],0],r=[n[0],n[1],0];if(t.length(i)>=1e-15){const e=t.normalize([],i);t.scale(r,e,t.dot(r,e)),n[0]=r[0],n[1]=r[1]}const o=t.cross([],n,e);if(t.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return vi(Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2]),a)}class xi{constructor(t,e){this.position=t,this.orientation=e}get position(){return this._position}set position(e){this._position=this._renderWorldCopies?function(e){if(!e)return;const n=Array.isArray(e)?new t.MercatorCoordinate(e[0],e[1],e[2]):e;return n.x=t.wrap(n.x,0,1),n}(e):e}lookAtPoint(e,n){if(this.orientation=null,!this.position)return;const i=this._elevation?this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(e)):0,r=this.position,o=t.MercatorCoordinate.fromLngLat(e,i),a=[o.x-r.x,o.y-r.y,o.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=bi(a,n)}setPitchBearing(e,n){this.orientation=vi(t.degToRad(e),t.degToRad(-n))}}class wi{constructor(e,n){this._transform=t.identity([]),this._orientation=t.identity$1([]),n&&(this._orientation=n,_i(this._transform,this._orientation)),e&&yi(this._transform,e)}get mercatorPosition(){const e=this.position;return new t.MercatorCoordinate(e[0],e[1],e[2])}get position(){const t=mi(this._transform,3);return[t[0],t[1],t[2]]}set position(t){yi(this._transform,t)}get orientation(){return this._orientation}set orientation(t){this._orientation=t,_i(this._transform,this._orientation)}getPitchBearing(){const t=this.forward(),e=this.right();return{bearing:Math.atan2(-e[1],e[0]),pitch:Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2])}}setPitchBearing(t,e){this._orientation=vi(t,e),_i(this._transform,this._orientation)}forward(){const t=mi(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=mi(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=mi(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(e,n){const i=new Float64Array(16);return t.invert(i,this.getWorldToCamera(e,n)),i}getWorldToCameraPosition(e,n,i){const r=this.position;t.scale(r,r,-e);const o=new Float64Array(16);return t.fromScaling(o,[i,i,i]),t.translate(o,o,r),o[10]*=n,o}getWorldToCamera(e,n){const i=new Float64Array(16),r=new Float64Array(4),o=this.position;return t.conjugate(r,this._orientation),t.scale(o,o,-e),t.fromQuat(i,r),t.translate(i,i,o),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=n,i[9]*=n,i[10]*=n,i[11]*=n,i}getCameraToClipPerspective(e,n,i,r){const o=new Float64Array(16);return t.perspective(o,e,n,i,r),o}getDistanceToElevation(e){const n=0===e?0:t.mercatorZfromAltitude(e,this.position[1]),i=this.forward();return(n-this.position[2])/i[2]}clone(){return new wi([...this.position],[...this.orientation])}}class Ei{constructor(e,n,i,r,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fi,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._camera=new wi,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._horizonShift=.1}clone(){const t=new Ei(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t._elevation=this._elevation,t._centerAltitude=this._centerAltitude,t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t.cameraElevationReference=this.cameraElevationReference,t._center=this._center,t._setZoom(this.zoom),t._cameraZoom=this._cameraZoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._averageElevation=this._averageElevation,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._camera=this._camera.clone(),t._calcMatrices(),t.freezeTileCoverage=this.freezeTileCoverage,t}get elevation(){return this._elevation}set elevation(t){this._elevation!==t&&(this._elevation=t,t?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(t){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),t&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const t=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(t))}get pixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize}get cameraPixelsPerMeter(){return t.mercatorZfromAltitude(1,this.center.lat)*this.cameraWorldSize}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.wrap(e,-180,180)*Math.PI/180;var i;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(i=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i),function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=i*l+o*s,t[1]=r*l+a*s,t[2]=i*-s+o*l,t[3]=r*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(t){this._averageElevation=t,this._calcFogMatrices()}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._setZoom(e),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(t){this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const e=this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(this.center),-1);return-1===e?(this._cameraZoom=null,!1):(this._centerAltitude=e,!0)}_updateCameraOnTerrain(){const e=this.cameraToCenterDistance/this.worldSize,n=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(n+e)}sampleAverageElevation(){if(!this._elevation)return 0;const e=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],i=this.horizonLineFromTop();let r=0,o=0;for(let a=0;a<n.length;a++){const s=new t.pointGeometry(n[a][0]*this.width,i+n[a][1]*(this.height-i)),l=e.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*c,o+=c}return 0===o?NaN:r/o}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const e=this._cameraZoom,n=this._elevation.getAtPointOrZero(t.MercatorCoordinate.fromLngLat(this.center)),i=t.mercatorZfromAltitude(n,this.center.lat),r=this._mercatorZfromZoom(e),o=this._mercatorZfromZoom(this._maxZoom),a=Math.max(r-i,o);this._setZoom(this._zoomFromMercatorZ(a))}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}computeZoomRelativeTo(e){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,e.toAltitude()));let i;i=e.z<this._camera.position[2]?[n.x,n.y,n.z]:[e.x,e.y,e.z];const r=t.length(t.sub([],this._camera.position,i));return t.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(e){if(!this.height)return;if(!e.position&&!e.orientation)return;this._updateCameraState();let n=!1;if(e.orientation&&!t.exactEquals(e.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(e.orientation)),e.position){const i=[e.position.x,e.position.y,e.position.z];t.exactEquals$1(i,this._camera.position)||(this._setCameraPosition(i),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const e=this._camera.position,n=new xi;return n.position=new t.MercatorCoordinate(e[0],e[1],e[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this._renderWorldCopies,n}_setCameraOrientation(e){if(!t.length$1(e))return!1;t.normalize$1(e,e);const n=t.transformQuat([],[0,0,-1],e),i=t.transformQuat([],[0,-1,0],e);if(i[2]<0)return!1;const r=bi(n,i);return!!r&&(this._camera.orientation=r,!0)}_setCameraPosition(e){const n=this.zoomScale(this.minZoom)*this.tileSize,i=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;e[2]=t.clamp(e[2],r/i,r/n),this._camera.position=e}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const i=this.pointCoordinate(new t.pointGeometry(0,0)),r=this.pointCoordinate(new t.pointGeometry(this.width,0)),o=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(i.x,r.x,o.x,a.x)),l=Math.floor(Math.max(i.x,r.x,o.x,a.x)),c=1;for(let i=s-c;i<=l+c;i++)0!==i&&n.push(new t.UnwrappedTileID(i,e))}return n}coveringTiles(e){let n=this.coveringZoomLevel(e);const i=n,r=this.elevation&&!e.isTerrainDEM;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const o=t.MercatorCoordinate.fromLngLat(this.center),a=1<<n,s=[a*o.x,a*o.y,0],l=p.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),c=this.pointCoordinate(this.getCameraPoint()),u=a*t.mercatorZfromAltitude(1,this.center.lat),h=this._camera.position[2]/t.mercatorZfromAltitude(1,this.center.lat),d=[a*c.x,a*c.y,h],m=this.cameraToCenterDistance/e.tileSize*(e.roundZoom?1:.502),g=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?n:0,_=e.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,y=e.isTerrainDEM?-_:this._elevation?this._elevation.getMinElevationBelowMSL():0,v=t=>({aabb:new f([t*a,0,y],[(t+1)*a,a,_]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),b=[],x=[],w=n,E=e.reparseOverscaled?i:n,M=t=>{if(!this._elevation||!t.tileID)return;const e=this._elevation.getMinMaxForTile(t.tileID),n=t.aabb;e?(n.min[2]=e.min,n.max[2]=e.max,n.center[2]=(n.min[2]+n.max[2])/2):(t.shouldSplit=k(t),t.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},T=t=>t*t,S=T((h-this._centerAltitude)*u),k=t=>{if(t.zoom<g)return!0;if(t.zoom===w)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const e=t.aabb.distanceX(d),n=t.aabb.distanceY(d);let i=S;r&&(i=T(t.aabb.distanceZ(d)*u));const o=e*e+n*n+i;return o<T((1<<w-t.zoom)*m*((t,e)=>{if(e*T(.707)<t)return 1;const n=Math.sqrt(e/t);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(i,S),o))};if(this._renderWorldCopies)for(let t=1;t<=3;t++)b.push(v(-t)),b.push(v(t));for(b.push(v(0));b.length>0;){const i=b.pop(),o=i.x,a=i.y;let c=i.fullyVisible;if(!c){const t=i.aabb.intersects(l);if(0===t)continue;c=2===t}if(i.zoom!==w&&k(i))for(let e=0;e<4;e++){const n=(o<<1)+e%2,s=(a<<1)+(e>>1),l={aabb:i.aabb.quadrant(e),zoom:i.zoom+1,x:n,y:s,wrap:i.wrap,fullyVisible:c,tileID:void 0,shouldSplit:void 0};r&&(l.tileID=new t.OverscaledTileID(i.zoom+1===w?E:i.zoom+1,i.wrap,i.zoom+1,n,s),M(l)),b.push(l)}else{const r=i.zoom===w?E:i.zoom;if(e.minzoom&&e.minzoom>r)continue;const l=s[0]-(.5+o+(i.wrap<<i.zoom))*(1<<n-i.zoom),c=s[1]-.5-a,u=i.tileID?i.tileID:new t.OverscaledTileID(r,i.wrap,i.zoom,o,a);x.push({tileID:u,distanceSq:l*l+c*c})}}if(this.fogCullDistSq){const e=this.fogCullDistSq;x.splice(0,x.length,...x.filter((n=>{const i=[0,0,0,1],o=[t.EXTENT,t.EXTENT,0,1],a=this.calculateFogTileMatrix(n.tileID.toUnwrapped());t.transformMat4(i,i,a),t.transformMat4(o,o,a);const s=t.getAABBPointSquareDist(i,o);if(0===s)return!0;let l=!1;const c=this.horizonLineFromTop();if(s>e&&0!==c){const e=this.calculateProjMatrix(n.tileID.toUnwrapped());let i;r&&this._elevation&&(i=this._elevation.getMinMaxForTile(n.tileID)),i||(i={min:y,max:_});const o=t.furthestTileCorner(this.bearing),a=[o[0]*t.EXTENT,o[1]*t.EXTENT,i.max];t.transformMat4$1(a,a,e),l=(1-a[1])*this.height*.5<c}return s<e||l})))}return x.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(e,n){const i=this.pointCoordinate(n),r=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(i.x-r.x),o.y-(i.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(t){this.center=this.coordinateLocation(t),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t){return this._coordinatePoint(this.locationCoordinate(t),!1)}locationPoint3D(t){return this._coordinatePoint(this.locationCoordinate(t),!0)}pointLocation(t){return this.coordinateLocation(this.pointCoordinate(t))}pointLocation3D(t){return this.coordinateLocation(this.pointCoordinate3D(t))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t.toLngLat()}pointRayIntersection(e,n){const i=null!=n?n:this._centerAltitude,r=[e.x,e.y,0,1],o=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(o,o,this.pixelMatrixInverse);const a=o[3];t.scale$2(r,r,1/r[3]),t.scale$2(o,o,1/a);const s=r[2],l=o[2];return{p0:r,p1:o,t:s===l?0:(i-s)/(l-s)}}screenPointToMercatorRay(e){const n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];return t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse),t.scale$2(n,n,1/n[3]),t.scale$2(i,i,1/i[3]),n[2]=t.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,i[2]=t.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,t.scale$2(n,n,1/this.worldSize),t.scale$2(i,i,1/this.worldSize),new d([n[0],n[1],n[2]],t.normalize([],t.sub([],i,n)))}rayIntersectionCoordinate(e){const{p0:n,p1:i,t:r}=e,o=t.mercatorZfromAltitude(n[2],this._center.lat),a=t.mercatorZfromAltitude(i[2],this._center.lat);return new t.MercatorCoordinate(t.number(n[0],i[0],r)/this.worldSize,t.number(n[1],i[1],r)/this.worldSize,t.number(o,a,r))}pointCoordinate(e){const n=this.horizonLineFromTop(!1),i=new t.pointGeometry(e.x,Math.max(n,e.y));return this.rayIntersectionCoordinate(this.pointRayIntersection(i))}pointCoordinate3D(e){if(!this.elevation)return this.pointCoordinate(e);const n=this.elevation;let i=this.elevation.pointCoordinate(e);if(i)return new t.MercatorCoordinate(i[0],i[1],i[2]);let r=0,o=this.horizonLineFromTop();if(e.y>o)return this.pointCoordinate(e);const a=.02*o,s=e.clone();for(let e=0;e<10&&o-r>a;e++){s.y=t.number(r,o,.66);const e=n.pointCoordinate(s);e?(o=s.y,i=e):r=s.y}return i?new t.MercatorCoordinate(i[0],i[1],i[2]):this.pointCoordinate(e)}isPointAboveHorizon(t){if(this.elevation)return!this.elevation.pointCoordinate(t);{const e=this.horizonLineFromTop();return t.y<e}}_coordinatePoint(e,n){const i=n&&this.elevation?this.elevation.getAtPointOrZero(e,this._centerAltitude):this._centerAltitude,r=[e.x*this.worldSize,e.y*this.worldSize,i+e.toAltitude(),1];return t.transformMat4(r,r,this.pixelMatrix),r[3]>0?new t.pointGeometry(r[0]/r[3],r[1]/r[3]):new t.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(this._edgeInsets.left,this._edgeInsets.top))).extend(this.pointLocation(new t.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top))).extend(this.pointLocation(new t.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom))).extend(this.pointLocation(new t.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom)))}_getBounds3D(){const e=this.elevation,n=e.visibleDemTiles.reduce(((t,e)=>{if(e.dem){const n=e.dem.tree;t.min=Math.min(t.min,n.minimums[0]),t.max=Math.max(t.max,n.maximums[0])}return t}),{min:Number.MAX_VALUE,max:0});n.min*=e.exaggeration(),n.max*=e.exaggeration();const i=this.horizonLineFromTop();return[new t.pointGeometry(0,i),new t.pointGeometry(this.width,i),new t.pointGeometry(this.width,this.height),new t.pointGeometry(0,this.height)].reduce(((t,e)=>t.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,n.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(e,n.max))))),new t.LngLatBounds)}horizonLineFromTop(t=!0){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-.97*e;return t?Math.max(0,n):n}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,n){const i=e.canonical,r=n/this.zoomScale(i.z),o=i.x+Math.pow(2,i.z)*e.wrap,a=t.identity(new Float64Array(16));return t.translate(a,a,[o*r,i.y*r,0]),t.scale$1(a,a,[r/t.EXTENT,r/t.EXTENT,1]),a}calculateFogTileMatrix(e){const n=e.key,i=this._fogTileMatrixCache;if(i[n])return i[n];const r=this.calculatePosMatrix(e,this.cameraWorldSize);return t.multiply(r,this.worldToFogMatrix,r),i[n]=new Float32Array(r),i[n]}calculateProjMatrix(e,n=!1){const i=e.key,r=n?this._alignedProjMatrixCache:this._projMatrixCache;if(r[i])return r[i];const o=this.calculatePosMatrix(e,this.worldSize);return t.multiply(o,n?this.alignedProjMatrix:this.projMatrix,o),r[i]=new Float32Array(o),r[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const n=this._camera.position,i=this._camera.forward();if(n[2]<=0||i[2]>=0)return;const r=t.mercatorZfromAltitude(1,this._center.lat);n[2]/=r,i[2]/=r,t.normalize(i,i);const o=e.raycast(n,i,e.exaggeration());if(o){const e=t.scaleAndAdd([],n,i,o),r=new t.MercatorCoordinate(e[0],e[1],t.mercatorZfromAltitude(e[2],t.latFromMercatorY(e[1]))),a=this._camera.position,s=r.z+t.length([r.x-a[0],r.y-a[1],r.z-a[2]]);this._cameraZoom=this._zoomFromMercatorZ(s),this._centerAltitude=r.toAltitude(),this._center=r.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const e=this._elevation;this._updateCameraState();const n=e.getAtPointOrZero(this._camera.mercatorPosition),i=this._minimumHeightOverTerrain()*Math.cos(t.degToRad(this._maxPitch)),r=t.mercatorZfromAltitude(n,this._center.lat),o=this._camera.position[2]-r;if(o<i){const e=t.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),n=this._camera.mercatorPosition,r=[e.x-n.x,e.y-n.y,e.z-n.z],a=t.length(r);r[2]-=i-o;const s=t.length(r);if(0===s)return;t.scale(r,r,a/s),this._camera.position=[e.x-r[0],e.y-r[1],e.z-r[2]],this._camera.orientation=bi(r,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,n,i,r,o=-90,a=90,s=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const n=this.latRange;o=t.mercatorYfromLat(n[1])*this.worldSize,a=t.mercatorYfromLat(n[0])*this.worldSize,e=a-o<c.y?c.y/(a-o):0}if(this.lngRange){const e=this.lngRange;s=t.mercatorXfromLng(e[0])*this.worldSize,l=t.mercatorXfromLng(e[1])*this.worldSize,n=l-s<c.x?c.x/(l-s):0}const h=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.pointGeometry(n?(l+s)/2:h.x,e?(a+o)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const t=h.y,e=c.y/2;t-e<o&&(r=o+e),t+e>a&&(r=a-e)}if(this.lngRange){const t=h.x,e=c.x/2;t-e<s&&(i=s+e),t+e>l&&(i=l-e)}void 0===i&&void 0===r||(this.center=this.unproject(new t.pointGeometry(void 0!==i?i:h.x,void 0!==r?r:h.y))),this._constrainCameraAltitude(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){const e=(t,e)=>Math.log2(t/(this.tileSize*Math.abs(e[1]-e[0])));let n=0;if(this.latRange){const i=this.latRange;n=e(this.height,[t.mercatorYfromLat(i[0]),t.mercatorYfromLat(i[1])])}let i=0;if(this.lngRange){const n=this.lngRange;i=e(this.width,[t.mercatorXfromLng(n[0]),t.mercatorXfromLng(n[1])])}return Math.max(n,i)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const n=this.pixelsPerMeter;this._updateCameraState();const i=Math.PI/2+this._pitch,r=this.fovAboveCenter,o=this.elevation?this.elevation.getMinElevationBelowMSL()*n:0,a=(this._camera.position[2]*this.worldSize-o)/Math.cos(this._pitch),s=Math.sin(r)*a/Math.sin(t.clamp(Math.PI-i-r,.01,Math.PI-.01)),l=this.point,c=l.x,u=l.y,h=Math.cos(Math.PI/2-this._pitch)*s+a,d=Math.min(1.01*h,a*(1/this._horizonShift)),p=this.height/50,f=this._camera.getWorldToCamera(this.worldSize,n),m=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,p,d);m[8]=2*-e.x/this.width,m[9]=2*e.y/this.height;let g=t.mul$1([],m,f);this.mercatorMatrix=t.scale$1([],g,[this.worldSize,this.worldSize,this.worldSize/n]),this.projMatrix=g,this.invProjMatrix=t.invert(new Float64Array(16),this.projMatrix);const _=new Float32Array(16);t.identity(_),t.scale$1(_,_,[1,-1,1]),t.rotateX(_,_,this._pitch),t.rotateZ(_,_,this.angle);const y=t.perspective(new Float32Array(16),this._fov,this.width/this.height,p,d),v=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;y[8]=2*-e.x/this.width,y[9]=2*(e.y+v)/this.height,this.skyboxMatrix=t.multiply(_,y,_);const b=this.width%2/2,x=this.height%2/2,w=Math.cos(this.angle),E=Math.sin(this.angle),M=c-Math.round(c)+w*b+E*x,T=u-Math.round(u)+w*x+E*b,S=new Float64Array(g);if(t.translate(S,S,[M>.5?M-1:M,T>.5?T-1:T,0]),this.alignedProjMatrix=S,g=t.create$1(),t.scale$1(g,g,[this.width/2,-this.height/2,1]),t.translate(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=t.create$1(),t.scale$1(g,g,[1,-1,1]),t.translate(g,g,[-1,-1,0]),t.scale$1(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),g=t.invert(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._projMatrixCache={},this._alignedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const e=this.cameraWorldSize,n=this.cameraPixelsPerMeter,i=this._camera.position,r=1/this.height,o=[e,e,n];t.scale(o,o,r),t.scale(i,i,-1),t.multiply$1(i,i,o);const a=t.create$1();t.translate(a,a,i),t.scale$1(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(e,n,r)}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const e=this._camera.forward(),n=this.cameraToCenterDistance,i=this.point,r=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),o=this.cameraToCenterDistance/r;this._camera.position=[i.x/this.worldSize-e[0]*n/o,i.y/this.worldSize-e[1]*n/o,t.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-e[2]*n/o]}_translateCameraConstrained(e){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),i=e[2];let r=1;i>0&&(r=Math.min((n-this._camera.position[2])/i,1)),this._camera.position=t.scaleAndAdd([],this._camera.position,e,r),this._updateStateFromCamera()}_updateStateFromCamera(){const e=this._camera.position,n=this._camera.forward(),{pitch:i,bearing:r}=this._camera.getPitchBearing(),o=t.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(t.degToRad(this._maxPitch)),s=Math.max((e[2]-o)/Math.cos(i),a),l=this._zoomFromMercatorZ(s);t.scaleAndAdd(e,e,n,s),this._pitch=t.clamp(i,t.degToRad(this.minPitch),t.degToRad(this.maxPitch)),this.angle=t.wrap(r,-Math.PI,Math.PI),this._setZoom(t.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new t.MercatorCoordinate(e[0],e[1],e[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(t){return Math.pow(2,t)*this.tileSize}_mercatorZfromZoom(t){return this.cameraToCenterDistance/this._worldSizeFromZoom(t)}_minimumHeightOverTerrain(){const t=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(t)}_zoomFromMercatorZ(t){return this.scaleZoom(this.cameraToCenterDistance/(t*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(e,n){const i=Math.min(e.x,n.x),r=Math.max(e.x,n.x),o=Math.min(e.y,n.y),a=Math.max(e.y,n.y),s=[new t.pointGeometry(i,o),new t.pointGeometry(r,a),new t.pointGeometry(i,a),new t.pointGeometry(r,o)],l=this._renderWorldCopies?-3:0,c=this._renderWorldCopies?4:1;for(const t of s){const e=this.pointRayIntersection(t);if(e.t<0)return!0;const n=this.rayIntersectionCoordinate(e);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+t.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new t.pointGeometry(0,0),new t.pointGeometry(this.width,this.height))}zoomDeltaToMovement(e,n){const i=t.length(t.sub([],this._camera.position,e)),r=this._zoomFromMercatorZ(i)+n;return i-this._mercatorZfromZoom(r)}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}}function Mi(t,e){let n=!1,i=null;const r=()=>{i=null,n&&(t(),i=setTimeout(r,e),n=!1)};return()=>(n=!0,i||r(),i)}class Ti{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Mi(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const n=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=e?`/${a}/${s}/${i}`:`${i}/${s}/${a}`,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+=`/${Math.round(c)}`),this._hashName){const e=this._hashName;let n=!1;const i=t.window.location.hash.slice(1).split("&").map((t=>{const i=t.split("=")[0];return i===e?(n=!0,`${i}=${u}`):t})).filter((t=>t));return n||i.push(`${e}=${u}`),`#${i.join("&")}`}return`#${u}`}_getCurrentHash(){const e=t.window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((t=>t.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());t.window.history.replaceState(t.window.history.state,null,e)}}const Si={linearity:.3,easing:t.bezier(0,0,.3,1)},ki=t.extend({deceleration:2500,maxSpeed:1400},Si),Ci=t.extend({deceleration:20,maxSpeed:1400},Si),Ii=t.extend({deceleration:1e3,maxSpeed:360},Si),Li=t.extend({deceleration:1e3,maxSpeed:90},Si);class Di{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const o=Pi(n.pan.mag(),i,t.extend({},ki,e||{}));r.offset=n.pan.mult(o.amount/n.pan.mag()),r.center=this._map.transform.center,Ai(r,o)}if(n.zoom){const t=Pi(n.zoom,i,Ci);r.zoom=this._map.transform.zoom+t.amount,Ai(r,t)}if(n.bearing){const e=Pi(n.bearing,i,Ii);r.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),Ai(r,e)}if(n.pitch){const t=Pi(n.pitch,i,Li);r.pitch=this._map.transform.pitch+t.amount,Ai(r,t)}if(r.zoom||r.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;r.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(r,{noMoveStart:!0})}}function Ai(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function Pi(e,n,i){const{maxSpeed:r,linearity:o,deceleration:a}=i,s=t.clamp(e*o/(n/1e3),-r,r),l=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}class zi extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i,r={}){const a=o.mousePos(n.getCanvasContainer(),i),s=n.unproject(a);super(e,t.extend({point:a,lngLat:s,originalEvent:i},r)),this._defaultPrevented=!1,this.target=n}}class Ni extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,i){const r="touchend"===e?i.changedTouches:i.touches,a=o.touchPos(n.getCanvasContainer(),r),s=a.map((t=>n.unproject(t))),l=a.reduce(((t,e,n,i)=>t.add(e.div(i.length))),new t.pointGeometry(0,0));super(e,{points:a,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:i}),this._defaultPrevented=!1}}class Ri extends t.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}}class Oi{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Ri(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new zi(t.type,this._map,t))}mouseup(t){this._map.fire(new zi(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new zi(t.type,this._map,t))}dblclick(t){return this._firePreventable(new zi(t.type,this._map,t))}mouseover(t){this._map.fire(new zi(t.type,this._map,t))}mouseout(t){this._map.fire(new zi(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Ni(t.type,this._map,t))}touchmove(t){this._map.fire(new Ni(t.type,this._map,t))}touchend(t){this._map.fire(new Ni(t.type,this._map,t))}touchcancel(t){this._map.fire(new Ni(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fi{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(t){this._map.fire(new zi(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new zi(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Bi{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(o.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=n,this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const r=Math.min(i.x,n.x),a=Math.max(i.x,n.x),s=Math.min(i.y,n.y),l=Math.max(i.y,n.y);this._map._requestDomTask((()=>{this._box&&(o.setTransform(this._box,`translate(${r}px,${s}px)`),this._box.style.width=a-r+"px",this._box.style.height=l-s+"px")}))}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const i=this._startPos,r=n;if(this.reset(),o.suppressClick(),i.x!==r.x||i.y!==r.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(i,r,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function Ui(t,e){const n={};for(let i=0;i<t.length;i++)n[t[i].identifier]=e[i];return n}class Yi{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const n=new t.pointGeometry(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=Ui(i,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const i=Ui(n,e);for(const t in this.touches){const e=this.touches[t],n=i[t];(!n||n.dist(e)>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class ji{constructor(t){this.singleTap=new Yi(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const i=this.singleTap.touchend(t,e,n);if(i){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class Vi{constructor(){this._zoomIn=new ji({numTouches:1,numTaps:2}),this._zoomOut=new ji({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const i=this._zoomIn.touchend(t,e,n),r=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}):r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(r)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Gi={0:1,2:2};class qi{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=o.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){const n=Gi[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&o.mouseButton(t)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hi extends qi{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class $i extends qi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class Zi extends qi{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class Wi{constructor(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,i){i.length>0&&(this._active=!0);const r=Ui(i,n),o=new t.pointGeometry(0,0),a=new t.pointGeometry(0,0);let s=0;for(const t in r){const e=r[t],n=this._touches[t];n&&(o._add(e),a._add(e.sub(n)),s++,r[t]=e)}if(this._touches=r,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){if(!this._firstTwoTouches)return;t.preventDefault();const[i,r]=this._firstTwoTouches,o=Ki(n,e,i),a=Ki(n,e,r);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[i,r]=this._firstTwoTouches,a=Ki(n,e,i),s=Ki(n,e,r);a&&s||(this._active&&o.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ki(t,e,n){for(let i=0;i<t.length;i++)if(t[i].identifier===n)return e[i]}function Ji(t,e){return Math.log(t/e)/Math.LN2}class Qi extends Xi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ji(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ji(this._distance,n),pinchAround:e}}}function tr(t,e){return 180*t.angleWith(e)/Math.PI}class er extends Xi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tr(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=tr(t,this._startVector);return Math.abs(n)<e}}function nr(t){return Math.abs(t.y)>Math.abs(t.x)}class ir extends Xi{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(t){this._lastPoints=t,nr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,n){const i=t[0].sub(this._lastPoints[0]),r=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(i,r,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(i.y+r.y)/2*-.5}}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const i=t.mag()>=2,r=e.mag()>=2;if(!i&&!r)return;if(!i||!r)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=t.y>0==e.y>0;return nr(t)&&nr(e)&&o}}const rr={panStep:100,bearingStep:15,pitchStep:10};class or{constructor(){const t=rr;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,i=0,r=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:ar,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+i*this._pitchStep,offset:[-r*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ar(t){return t*(2-t)}const sr=4.000244140625;class lr{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;let n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const i=t.exported.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%sr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const e=o.mousePos(this._el,t);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:e,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform,n=()=>e._terrainEnabled()?e.computeZoomRelativeTo(this._aroundCoord):e.zoom;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>sr?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==i&&(i=1/i);const r=n(),o=Math.pow(2,r),a="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(a*i))),"wheel"===this._type&&(this._startZoom=n(),this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:n(),r=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&r&&o){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),n=o(e);a=t.number(r,i,n),e<1?this._frameId||(this._frameId=!0):s=!0}else a=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,i=(t.exported.now()-e.start)/e.duration,r=e.easing(i+.01)-e.easing(i),o=.27/Math.sqrt(r*r+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=t.bezier(o,a,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}reset(){this._active=!1}}class cr{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ur{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hr{constructor(){this._tap=new ji({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=e[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,t.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dr{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class pr{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class fr{constructor(t,e,n,i){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const mr=t=>t.zoom||t.drag||t.pitch||t.rotate;class gr extends t.Event{}class _r{constructor(){this.constants=[1,1,.01],this.radius=0}setup(e,n){const i=t.sub([],n,e);this.radius=t.length(i[2]<0?t.div([],i,this.constants):[i[0],i[1],0])}projectRay(e){t.div(e,e,this.constants),t.normalize(e,e),t.mul$2(e,e,this.constants);const n=t.scale([],e,this.radius);if(n[2]>0){const e=t.scale([],[0,0,1],t.dot(n,[0,0,1])),i=t.scale([],t.normalize([],[n[0],n[1],0]),this.radius),r=t.add([],n,t.scale([],t.sub([],t.add([],i,e),n),2));n[0]=r[0],n[1]=r[1]}return n}}function yr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class vr{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Di(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new _r,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[t.window,"blur",void 0]];for(const[e,n,i]of this._listeners)o.addEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[e,n,i]of this._listeners)o.removeEventListener(e,n,e===t.window.document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new Oi(e,t));const i=e.boxZoom=new Bi(e,t);this._add("boxZoom",i);const r=new Vi,o=new ur;e.doubleClickZoom=new cr(o,r),this._add("tapZoom",r),this._add("clickZoom",o);const a=new hr;this._add("tapDragZoom",a);const s=e.touchPitch=new ir;this._add("touchPitch",s);const l=new $i(t),c=new Zi(t);e.dragRotate=new pr(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Hi(t),h=new Wi(t);e.dragPan=new dr(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new er,p=new Qi;e.touchZoomRotate=new fr(n,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Fi(e));const f=e.scrollZoom=new lr(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new or;this._add("keyboard",m);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[n]&&e[n].enable(t[n])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(mr(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,n){for(const i in t)if(i!==n&&(!e||e.indexOf(i)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===t.type,i=n?void 0:t,r={needsRenderFrame:!1},a={},s={},l=t.touches?this._getMapTouches(t.touches):void 0,c=l?o.touchPos(this._el,l):n?void 0:o.mousePos(this._el,t);for(const{handlerName:n,handler:o,allowed:u}of this._handlers){if(!o.isEnabled())continue;let h;this._blockedByActive(s,u,n)?o.reset():o[e||t.type]&&(h=o[e||t.type](t,c,l),this.mergeHandlerResult(r,a,h,n,i),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||o.isActive())&&(s[n]=o)}const u={};for(const t in this._previousActiveHandlers)s[t]||(u[t]=i);this._previousActiveHandlers=s,(Object.keys(u).length||yr(r))&&(this._changes.push([r,a,u]),this._triggerRenderFrame()),(Object.keys(s).length||yr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,n,i,r,o){if(!i)return;t.extend(e,i);const a={handlerName:r,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(n.zoom=a),void 0!==i.panDelta&&(n.drag=a),void 0!==i.pitchDelta&&(n.pitch=a),void 0!==i.bearingDelta&&(n.rotate=a)}_applyChanges(){const e={},n={},i={};for(const[r,o,a]of this._changes)r.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(r.panDelta)),r.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(e.around=r.around),void 0!==r.aroundCoord&&(e.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(e.pinchAround=r.pinchAround),r.noInertia&&(e.noInertia=r.noInertia),t.extend(n,o),t.extend(i,a);this._updateMapTransform(e,n,i),this._changes=[]}_updateMapTransform(e,n,i){const r=this._map,o=r.transform,a=t=>[t.x,t.y,t.z];if((t=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!yr(e)){const t=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",t!==o.zoom&&this._map._update(!0)}if(!yr(e))return this._fireEvents(n,i,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:p}=e;void 0!==p&&(h=p),(t=>n.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",r._stop(!0),h=h||r.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s){const t=o.screenPointToMercatorRay(h),e=o.screenPointToMercatorRay(h.sub(s)),n=this._trackingEllipsoid.projectRay(t.dir),i=this._trackingEllipsoid.projectRay(e.dir);f[0]=i[0]-n[0],f[1]=i[1]-n[1]}const m=o.zoom,g=[0,0,0];if(l){const e=a(d||o.pointCoordinate3D(h)),n={dir:t.normalize([],t.sub([],e,o._camera.position))},i=o.screenPointToMercatorRay(o.centerPoint);if(n.dir[2]<0){const r=t.altitudeFromMercatorZ(e[2],e[1]),s=o.rayIntersectionCoordinate(o.pointRayIntersection(o.centerPoint,r)),c=o.zoomDeltaToMovement(a(s),l)*(i.dir[2]/n.dir[2]);t.scale(g,n.dir,c)}else if(o._terrainEnabled()){const i=o.zoomDeltaToMovement(e,l);t.scale(g,n.dir,i)}}const _=t.add(f,f,g);o._translateCameraConstrained(_),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,i,!0)}_fireEvents(e,n,i){const r=mr(this._eventsInProgress),o=mr(e),a={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(a[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!r&&o&&this._fireEvent("movestart",o.originalEvent);for(const t in a)this._fireEvent(t,a[t]);o&&this._fireEvent("move",o.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||i,s[`${t}end`]=l)}for(const t in s)this._fireEvent(t,s[t]);const c=mr(this._eventsInProgress);if(i&&(r||o)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new gr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class br extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,i){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),i)}panTo(e,n,i){return this.easeTo(t.extend({center:e},n),i)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,i){return this.easeTo(t.extend({zoom:e},n),i)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,i){return this.easeTo(t.extend({bearing:e},n),i)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const i=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),i,n)}_extendCameraOptions(e){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(e=t.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},e)).padding){const t=e.padding;e.padding={top:t,bottom:t,right:t,left:t}}return e.padding=t.extend(n,e.padding),e}_cameraForBoxAndBearing(e,n,i,r){const o=this._extendCameraOptions(r),a=this.transform,s=a.padding,l=a.project(t.LngLat.convert(e)),c=a.project(t.LngLat.convert(n)),u=l.rotate(-t.degToRad(i)),h=c.rotate(-t.degToRad(i)),d=new t.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),p=new t.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),f=d.sub(p),m=(a.width-(s.left+s.right+o.padding.left+o.padding.right))/f.x,g=(a.height-(s.top+s.bottom+o.padding.top+o.padding.bottom))/f.y;if(g<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const _=Math.min(a.scaleZoom(a.scale*Math.min(m,g)),o.maxZoom),y="number"==typeof o.offset.x?new t.pointGeometry(o.offset.x,o.offset.y):t.pointGeometry.convert(o.offset),v=new t.pointGeometry((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(i*Math.PI/180),b=y.add(v).mult(a.scale/a.zoomScale(_));return{center:a.unproject(l.add(c).div(2).sub(b)),zoom:_,bearing:i}}_cameraForBox(e,n,i,r,o){const a=this._extendCameraOptions(o);i=i||0,r=r||0,e=t.LngLat.convert(e),n=t.LngLat.convert(n);const s=this.transform.clone();s.padding=a.padding;const l=this.getFreeCameraOptions(),c=new t.LngLat(.5*(e.lng+n.lng),.5*(e.lat+n.lat)),u=.5*(i+r);if(s._camera.position[2]<t.mercatorZfromAltitude(u,c.lat))return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),s.setFreeCameraOptions(l);const h=t.MercatorCoordinate.fromLngLat(e),d=t.MercatorCoordinate.fromLngLat(n),m=s.pointRayIntersection(s.centerPoint,u),g=[(_=s.rayIntersectionCoordinate(m)).x,_.y,_.z];var _;const y=s.screenPointToMercatorRay(s.centerPoint);let v,b=0;do{const n=Math.floor(s.zoom),o=1<<n,a=Math.min(o*h.x,o*d.x),l=Math.min(o*h.y,o*d.y),c=Math.max(o*h.x,o*d.x),u=Math.max(o*h.y,o*d.y),m=new f([a,l,i],[c,u,r]),_=p.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,n);if(2!==m.intersects(_)){v&&(s._camera.position=t.scaleAndAdd([],s._camera.position,y.dir,-v),s._updateStateFromCamera());break}const b=t.sub([],s._camera.position,g);v=.5*t.length(b),s._camera.position=t.scaleAndAdd([],s._camera.position,y.dir,v);try{s._updateStateFromCamera()}catch(e){return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++b<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}fitBounds(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}_raycastElevationBox(e,n){const i=this.transform.elevation;if(!i)return;const r=new t.pointGeometry(e.x,n.y),o=new t.pointGeometry(n.x,e.y),a=i.pointCoordinate(e);if(!a)return;const s=i.pointCoordinate(n);if(!s)return;const l=i.pointCoordinate(r);if(!l)return;const c=i.pointCoordinate(o);if(!c)return;const u=new t.MercatorCoordinate(a[0],a[1]).toLngLat(),h=new t.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new t.MercatorCoordinate(l[0],l[1]).toLngLat(),p=new t.MercatorCoordinate(c[0],c[1]).toLngLat(),f=Math.min(u.lng,Math.min(h.lng,Math.min(d.lng,p.lng))),m=Math.min(u.lat,Math.min(h.lat,Math.min(d.lat,p.lat))),g=Math.max(u.lng,Math.max(h.lng,Math.max(d.lng,p.lng))),_=Math.max(u.lat,Math.max(h.lat,Math.max(d.lat,p.lat))),y=Math.min(a[3],Math.min(s[3],Math.min(l[3],c[3]))),v=Math.max(a[3],Math.max(s[3],Math.max(l[3],c[3])));return{minLngLat:new t.LngLat(f,m),maxLngLat:new t.LngLat(g,_),minAltitude:y,maxAltitude:v}}fitScreenCoordinates(e,n,i,r,o){let a,s,l,c;const u=t.pointGeometry.convert(e),h=t.pointGeometry.convert(n),d=this._raycastElevationBox(u,h);if(d)a=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,c=d.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(u,h))return this;a=this.transform.pointLocation(u),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(n)),i,r):this._cameraForBox(a,s,l,c,r),r,o)}_fitInternal(e,n,i){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(e,n){this.stop();const i=this.transform;let r=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(r=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.LngLat.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),r&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(e,n){this.stop();const i=this.transform,r=i.zoom,o=i.pitch,a=i.bearing;i.setFreeCameraOptions(e);const s=r!==i.zoom,l=o!==i.pitch,c=a!==i.bearing;return this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),s&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),c&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),l&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n)),this}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const i=this.transform,r=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:r,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:i.padding,d=t.pointGeometry.convert(e.offset);let p=i.centerPoint.add(d);const f=i.pointLocation(p),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);const g=i.project(f),_=i.project(m).sub(g),y=i.zoomScale(l-r);let v,b;e.around&&(v=t.LngLat.convert(e.around),b=i.locationPoint(v));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==r,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==a,this._padding=!i.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,x),this._ease((e=>{if(this._zooming&&(i.zoom=t.number(r,l,e)),this._rotating&&(i.bearing=t.number(o,c,e)),this._pitching&&(i.pitch=t.number(a,u,e)),this._padding&&(i.interpolatePadding(s,h,e),p=i.centerPoint.add(d)),v)i.setLocationAtPoint(v,b);else{const t=i.zoomScale(i.zoom-r),n=l>r?Math.min(2,y):Math.max(.5,y),o=Math.pow(n,1-e),a=i.unproject(g.add(_.mult(e*o)).mult(t));i.setLocationAtPoint(i.renderWorldCopies?a.wrap():a,p)}this._fireMoveEvents(n)}),(t=>{i.recenterOnTerrain(),this._afterEase(n,t)}),e),this}_prepareEase(e,n,i={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||i.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.transform.cameraElevationReference="ground";const i=this._zooming,r=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(!e.essential&&t.exported.prefersReducedMotion){const i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const i=this.transform,r=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,i.minZoom,i.maxZoom):r,c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:a,h="padding"in e?e.padding:i.padding,d=i.zoomScale(l-r),p=t.pointGeometry.convert(e.offset);let f=i.centerPoint.add(p);const m=i.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const _=i.project(m),y=i.project(g).sub(_);let v=e.curve;const b=Math.max(i.width,i.height),x=b/d,w=y.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,r,l),i.minZoom,i.maxZoom),o=b/i.zoomScale(n-r);v=Math.sqrt(o/w*2)}const E=v*v;function M(t){const e=(x*x-b*b+(t?-1:1)*E*E*w*w)/(2*(t?x:b)*E*w);return Math.log(Math.sqrt(e*e+1)-e)}function T(t){return(Math.exp(t)-Math.exp(-t))/2}function S(t){return(Math.exp(t)+Math.exp(-t))/2}const k=M(0);let C=function(t){return S(k)/S(k+v*t)},I=function(t){return b*((S(k)*(T(e=k+v*t)/S(e))-T(k))/E)/w;var e},L=(M(1)-k)/v;if(Math.abs(w)<1e-6||!isFinite(L)){if(Math.abs(b-x)<1e-6)return this.easeTo(e,n);const t=x<b?-1:1;L=Math.abs(Math.log(x/b))/v,I=function(){return 0},C=function(e){return Math.exp(t*v*e)}}return e.duration="duration"in e?+e.duration:1e3*L/("screenSpeed"in e?+e.screenSpeed/v:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==a,this._padding=!i.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((e=>{const d=e*L,m=1/C(d);i.zoom=1===e?l:r+i.scaleZoom(m),this._rotating&&(i.bearing=t.number(o,c,e)),this._pitching&&(i.pitch=t.number(a,u,e)),this._padding&&(i.interpolatePadding(s,h,e),f=i.centerPoint.add(p));const v=1===e?g:i.unproject(_.add(y.mult(I(d))).mult(m));i.setLocationAtPoint(i.renderWorldCopies?v.wrap():v,f),i._updateCenterElevation(),this._fireMoveEvents(n)}),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,i){!1===i.animate||0===i.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=i,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const i=Math.abs(e-n);return Math.abs(e-360-n)<i&&(e-=360),Math.abs(e+360-n)<i&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}class xr{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){const e=this.options&&this.options.compact;return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){const i=n.reduce(((t,e,i)=>(e.value&&(t+=`${e.key}=${e.value}${i<n.length-1?"&":""}`),t)),"?");e.href=`${t.config.FEEDBACK_URL}/${i}${this._map._hash?this._map._hash.getHashString(!0):""}`,e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style._sourceCaches;for(const n in e){const i=e[n];if(i.used){const e=i.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let i=n+1;i<t.length;i++)if(t[i].indexOf(e)>=0)return!1;return!0}));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class wr{constructor(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)}onAdd(t){this._map=t,this._container=o.create("div","mapboxgl-ctrl");const e=o.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){o.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const t=this._map.style._sourceCaches;if(0===Object.entries(t).length)return!0;for(const e in t){const n=t[e].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}}}class Er{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const e of n)if(e.id===t)return void(e.cancelled=!0)}run(t=0){const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Mr(e,n,i){if(e=new t.LngLat(e.lng,e.lat),n){const r=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=360*Math.ceil(Math.abs(e.lng-i.center.lng)/360),s=i.locationPoint(e).distSqr(n),l=n.x<0||n.y<0||n.x>i.width||n.y>i.height;i.locationPoint(r).distSqr(n)<s&&(l||Math.abs(r.lng-i.center.lng)<a)?e=r:i.locationPoint(o).distSqr(n)<s&&(l||Math.abs(o.lng-i.center.lng)<a)&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}const Tr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Sr(t,e,n){const i=t.classList;for(const t in Tr)i.remove(`mapboxgl-${n}-anchor-${t}`);i.add(`mapboxgl-${n}-anchor-${e}`)}class kr extends t.Evented{constructor(e,n){if(super(),(e instanceof t.window.HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");const n=o.createNS("http://www.w3.org/2000/svg","svg"),i=41,r=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${i}px`),n.setAttributeNS(null,"width",`${r}px`),n.setAttributeNS(null,"viewBox",`0 0 ${r} ${i}`);const a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");const s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=o.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=o.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=o.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=o.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=o.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=o.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=o.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const _=o.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(_),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",i*this._scale+"px"),n.setAttributeNS(null,"width",r*this._scale+"px"),this._element.appendChild(n),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),Sr(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("remove",this._clearFadeTimer),t._addMarker(this),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._map.off("remove",this._clearFadeTimer),this._map._removeMarker(this),delete this._map),this._clearFadeTimer(),o.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[i,-1*(e-n+i)],"bottom-right":[-i,-1*(e-n+i)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_evaluateOpacity(){const t=this._pos?this._pos.sub(this._transformedOffset()):null;if(!this._withinScreenBounds(t))return void this._clearFadeTimer();const e=this._map.unproject(t);let n=!1;if(this._map.getTerrain()){const t=this._map.getFreeCameraOptions();if(t.position){const i=t.position.toLngLat();n=i.distanceTo(e)<.9*i.distanceTo(this._lngLat)}}const i=(1-this._map._queryFogOpacity(e))*(n?.2:1);this._element.style.opacity=`${i}`,this._popup&&this._popup._setOpacity(`${i}`),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_withinScreenBounds(t){const e=this._map.transform;return!!t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Mr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset());let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),this._map._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&o.setTransform(this._element,`${Tr[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${e}`),!this._map.getTerrain()&&!this._map.getFog()||this._fadeTimer||(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}_transformedOffset(){if(!this._defaultMarker)return this._offset;const t=this._map.transform,e=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&e._rotate(t.angle),"map"===this._pitchAlignment&&(e.y*=Math.cos(t._pitch)),e}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}class Cr{constructor(t){this.jumpTo(t)}getValue(e){if(e<=this._startTime)return this._start;if(e>=this._endTime)return this._end;const n=t.easeCubicInOut((e-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(t){return t>=this._startTime&&t<=this._endTime}jumpTo(t){this._startTime=-1/0,this._endTime=-1/0,this._start=t,this._end=t}easeTo(t,e,n){this._start=this.getValue(e),this._end=t,this._startTime=e,this._endTime=e+n}}const Ir={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:Lr,HTMLElement:Dr,ImageBitmap:Ar}=t.window,Pr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function zr(t){t.parentNode&&t.parentNode.removeChild(t)}const Nr={showCompass:!0,showZoom:!0,visualizePitch:!1};class Rr{constructor(e,n,i=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new $i({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,i&&(this.mousePitch=new Zi({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(n,"mousedown",this.mousedown),o.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(n,"touchmove",this.touchmove),o.addEventListener(n,"touchend",this.touchend),o.addEventListener(n,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),o.disableDrag()}move(t,e){const n=this.map,i=this.mouseRotate.mousemoveWindow(t,e);if(i&&i.bearingDelta&&n.setBearing(n.getBearing()+i.bearingDelta),this.mousePitch){const i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}}off(){const t=this.element;o.removeEventListener(t,"mousedown",this.mousedown),o.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(t,"touchmove",this.touchmove),o.removeEventListener(t,"touchend",this.touchend),o.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){o.enableDrag(),o.removeEventListener(t.window,"mousemove",this.mousemove),o.removeEventListener(t.window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),o.mousePos(this.element,e)),o.addEventListener(t.window,"mousemove",this.mousemove),o.addEventListener(t.window,"mouseup",this.mouseup)}mousemove(t){this.move(t,o.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=o.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Or={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1};let Fr,Br=0,Ur=!1;const Yr={maxWidth:100,unit:"metric"};function jr(t,e,n){const i=n&&n.maxWidth||100,r=t._container.clientHeight/2,o=t.unproject([0,r]),a=t.unproject([i,r]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?Vr(e,i,n/5280,t._getUIString("ScaleControl.Miles"),t):Vr(e,i,n,t._getUIString("ScaleControl.Feet"),t)}else n&&"nautical"===n.unit?Vr(e,i,s/1852,t._getUIString("ScaleControl.NauticalMiles"),t):s>=1e3?Vr(e,i,s/1e3,t._getUIString("ScaleControl.Kilometers"),t):Vr(e,i,s,t._getUIString("ScaleControl.Meters"),t)}function Vr(t,e,n,i,r){const o=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n),a=o/n;r._requestDomTask((()=>{t.style.width=e*a+"px",t.innerHTML=`${o}&nbsp;${i}`}))}const Gr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},qr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Hr(e){if(e){if("number"==typeof e){const n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(n,n),"top-right":new t.pointGeometry(-n,n),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(n,-n),"bottom-right":new t.pointGeometry(-n,-n),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const n=t.pointGeometry.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return Hr(new t.pointGeometry(0,0))}const $r={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends br{constructor(e){if(null!=(e=t.extend({},Pr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ei(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._optimizeForTerrain=e.optimizeForTerrain,this._renderTaskQueue=new Er,this._domRenderTaskQueue=new Er,this._controls=[],this._markers=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Ir,e.locale),this._clickTolerance=e.clickTolerance,this._averageElevationLastSampledAt=-1/0,this._averageElevation=new Cr(0),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken,e.testMode),this._silenceAuthErrors=!!e.testMode,"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof Dr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new vr(this,e),this._hash=e.hash&&new Ti("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localFontFamily=e.localFontFamily,this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),e.attributionControl&&this.addControl(new xr({customAttribution:e.customAttribution})),this._logoControl=new wr,this.addControl(this._logoControl,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(e){const n=this._containerDimensions(),i=n[0],r=n[1];this._resizeCanvas(i,r),this.transform.resize(i,r),this.painter.resize(i,r);const o=!this._moving;return o&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint3D(t.LngLat.convert(e))}unproject(e){return this.transform.pointLocation3D(t.pointGeometry.convert(e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let i=!1;const r=r=>{const o=this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[];o.length?i||(i=!0,n.call(this,new zi(t,this,r.originalEvent,{features:o}))):i=!1};return{layer:e,listener:n,delegates:{mousemove:r,mouseout:()=>{i=!1}}}}if("mouseleave"===t||"mouseout"===t){let i=!1;const r=r=>{(this.getLayer(e)?this.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?i=!0:i&&(i=!1,n.call(this,new zi(t,this,r.originalEvent)))},o=e=>{i&&(i=!1,n.call(this,new zi(t,this,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:r,mouseout:o}}}{const i=t=>{const i=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];i.length&&(t.features=i,n.call(this,t),delete t.features)};return{layer:e,listener:n,delegates:{[t]:i}}}}on(t,e,n){if(void 0===n)return super.on(t,e);const i=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i);for(const t in i.delegates)this.on(t,i.delegates[t]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);const i=this._createDelegatedListener(t,e,n);for(const t in i.delegates)this.once(t,i.delegates[t]);return this}off(t,e,n){return void 0===n?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(i=>{const r=this._delegatedListeners[t];for(let t=0;t<r.length;t++){const i=r[t];if(i.layer===e&&i.listener===n){for(const t in i.delegates)this.off(t,i.delegates[t]);return r.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,n){return this.style?(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),this.style.queryRenderedFeatures(e=e||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}queryTerrainElevation(e,n){const i=this.transform.elevation;return i?(n=t.extend({},{exaggerated:!0},n),i.getAtPoint(t.MercatorCoordinate.fromLngLat(e),null,n.exaggerated)):null}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(e,n))}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),t&&(this.style=new je(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new je(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const i=this._requestManager.normalizeStyleURL(e),r=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(r,((e,i)=>{e?this.fire(new t.ErrorEvent(e)):i&&this._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(i){t.warnOnce(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style._getSourceCaches(e);if(0!==n.length)return n.every((t=>t.loaded()));this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}areTilesLoaded(){const t=this.style&&this.style._sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._updateTerrain(),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n,{pixelRatio:i=1,sdf:r=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof Lr||Ar&&n instanceof Ar){const{width:l,height:c,data:u}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:i,stretchX:o,stretchY:a,content:s,sdf:r,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=n,h=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:i,stretchX:o,stretchY:a,content:s,sdf:r,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,n){const i=this.style.getImage(e);if(!i)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof Lr||Ar&&n instanceof Ar?t.exported.getImageData(n):n,{width:o,height:a,data:s}=r;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==i.data.width||a!==i.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(i.data.replace(s,!(n instanceof Lr||Ar&&n instanceof Ar)),void this.style.updateImage(e,i))}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),((e,i)=>{n(e,i instanceof Lr?t.exported.getImageData(i):i)}))}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e,n={}){return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n,i={}){return this.style.setPaintProperty(t,e,n,i),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n,i={}){return this.style.setLayoutProperty(t,e,n,i),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(t){return this._lazyInitEmptyStyle(),this.style.setTerrain(t),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(t){return this._lazyInitEmptyStyle(),this.style.setFog(t),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(t.LngLat.convert(e),this.transform):0}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_detectMissingCSS(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=o.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();const e=this._canvasContainer=o.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=o.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);const i=this._controlContainer=o.create("div","mapboxgl-control-container",t),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{r[t]=o.create("div",`mapboxgl-ctrl-${t}`,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,n){const i=t.exported.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*n,this._canvas.style.width=`${e}px`,this._canvas.style.height=`${n}px`}_addMarker(t){this._markers.push(t)}_removeMarker(t){const e=this._markers.indexOf(t);-1!==e&&this._markers.splice(e,1)}_setupPainter(){const n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);i?(t.storeAuthState(i,!0),this.painter=new pi(i,this.transform),this.on("data",(t=>{"source"===t.dataType&&this.painter.setTileLoadedFlag(!0)})),t.exported$1.testSupport(i)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_requestDomTask(t){!this.isMoving()&&this.loaded()?t():this._domRenderTaskQueue.add(t)}_render(e){let n;const i=this.painter.context.extTimerQuery,r=t.exported.now();this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n));let o=this._updateAverageElevation(r);if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._domRenderTaskQueue.run(e),this._removed)return;let a=!1;const s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=t.exported.now();this.style.zoomHistory.update(e,n);const i=new t.EvaluationParameters(e,{now:n,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),r=i.crossFadingFactor();1===r&&r===this._crossFadingFactor||(a=!0,this._crossFadingFactor=r),this.style.update(i)}if(this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const r=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const l=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(l||this._repaint)this.triggerRepaint();else{const e=!this.isMoving()&&this.loaded();if(e&&(o=this._updateAverageElevation(r,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),e&&(this.fire(new t.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const e=this._calculateSpeedIndex();this.fire(new t.Event("speedindexcompleted",{speedIndex:e})),this.speedIndexTiming=!1}}return!this._loaded||this._fullyLoaded||l||(this._fullyLoaded=!0,this._authenticate()),this}_updateAverageElevation(t,e=!1){const n=t=>(this.transform.averageElevation=t,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((e||t-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(t)){const e=this.transform.averageElevation;let i=this.transform.sampleAverageElevation();isNaN(i)?i=0:this._averageElevationLastSampledAt=t;const r=Math.abs(e-i);if(r>1){if(this._isInitialLoad)return this._averageElevation.jumpTo(i),n(i);this._averageElevation.easeTo(i,t,300)}else if(r>1e-4)return this._averageElevation.jumpTo(i),n(i)}return!!this._averageElevation.isEasing(t)&&n(this._averageElevation.getValue(t))}_authenticate(){t.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(e=>{if(e&&(e.message===t.AUTH_ERR_MSG||401===e.status)){const e=this.painter.context.gl;t.storeAuthState(e,!1),this._logoControl instanceof wr&&this._logoControl._updateLogo(),e&&e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT|e.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new t.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),t.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const t=this.painter.canvasCopy(),e=this.painter.getCanvasCopiesAndTimestamps();e.timeStamps.push(performance.now());const n=this.painter.context.gl,i=n.createFramebuffer();function r(t){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);const e=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,e),e}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(r(t),e.canvasCopies.map(r),e.timeStamps)}_canvasPixelComparison(t,e,n){let i=n[1]-n[0];const r=t.length/4;for(let o=0;o<e.length;o++){const a=e[o];let s=0;for(let e=0;e<a.length;e+=4)a[e]===t[e]&&a[e+1]===t[e+1]&&a[e+2]===t[e+2]&&a[e+3]===t[e+3]&&(s+=1);i+=(n[o+2]-n[o+1])*(1-s/r)}return i}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),zr(this._canvasContainer),zr(this._controlContainer),zr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),t.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(e){this._renderNextFrame=this._renderNextFrame||e,this.style&&!this._frame&&(this._frame=t.exported.frame((t=>{const e=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,e&&this._render(t)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(t){this._showTerrainWireframe!==t&&(this._showTerrainWireframe=t,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(t){this._speedIndexTiming!==t&&(this._speedIndexTiming=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return t.version}},NavigationControl:class{constructor(e){this.options=t.extend({},Nr,e),this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),o.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),o.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=o.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._map._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=o.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){const n=this._map._getUIString(`NavigationControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},Or,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation"],this),this._onDeviceOrientationListener=this._onDeviceOrientation.bind(this),this._updateMarkerRotationThrottled=Mi(this._updateMarkerRotation,20)}onAdd(e){var n;return this._map=e,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Fr?n(Fr):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((t=>{Fr="denied"!==t.state,n(Fr)})):(Fr=!!t.window.navigator.geolocation,n(Fr)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Br=0,Ur=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,r=this._map.getBearing(),o=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),o,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([100,t]),i=e.distanceTo(n)/100,r=Math.ceil(2*this._accuracy/i);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Ur)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=o.create("button","mapboxgl-ctrl-geolocate",this._container),o.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location"),this._dotElement.appendChild(o.create("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o.create("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new kr({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kr({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}_onDeviceOrientation(t){this._userLocationDotMarker&&(t.webkitCompassHeading?this._heading=t.webkitCompassHeading:!0===t.absolute&&(this._heading=-1*t.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Br--,Ur=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Br++,Br>1?(e={maximumAge:6e5,timeout:0},Ur=!0):(e=this.options.positionOptions,Ur=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{t.window.addEventListener("ondeviceorientationabsolute"in t.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientationListener)};void 0!==t.window.DeviceMotionEvent&&"function"==typeof t.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((t=>{"granted"===t&&e()})).catch(console.error):e()}_clearWatch(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),t.window.removeEventListener("deviceorientation",this._onDeviceOrientationListener),t.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientationListener),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:xr,ScaleControl:class{constructor(e){this.options=t.extend({},Yr,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){jr(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,jr(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in t.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){o.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!t.window.document.fullscreenEnabled&&!t.window.document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=o.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(t.window.document.fullscreenElement||t.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(Gr),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(t.window.document.createTextNode(e))}setHTML(e){const n=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");let r;for(i.innerHTML=e;r=i.firstChild,r;)n.appendChild(r);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Mr(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const e=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let n=this.options.anchor;const i=Hr(this.options.offset);if(!n){const t=this._container.offsetWidth,r=this._container.offsetHeight;let o;o=e.y+i.bottom.y<r?["top"]:e.y>this._map.transform.height-r?["bottom"]:[],e.x<t/2?o.push("left"):e.x>this._map.transform.width-t/2&&o.push("right"),n=0===o.length?"bottom":o.join("-")}const r=e.add(i[n]).round();this._map._requestDomTask((()=>{this._container&&n&&(o.setTransform(this._container,`${Tr[n]} translate(${r.x}px,${r.y}px)`),Sr(this._container,n,"popup"))}))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(qr);t&&t.focus()}_onClose(){this.remove()}_setOpacity(t){this._content&&(this._content.style.opacity=t),this._tip&&(this._tip.style.opacity=t)}},Marker:kr,Style:je,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,FreeCameraOptions:xi,Evented:t.Evented,config:t.config,prewarm:function(){Nt().acquire(At)},clearPrewarmedResources:function(){const t=zt;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(At),zt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Pt.workerCount},set workerCount(t){Pt.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",workerClass:null,setNow:t.exported.setNow,restoreNow:t.exported.restoreNow};return $r})),n}()},2786:function(t,e,n){!function(t){"use strict";t.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(t){return/^nm$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},6440:function(t,e,n){!function(t){"use strict";var e={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},r=function(t){return function(e,r,o,a){var s=n(e),l=i[t][n(e)];return 2===s&&(l=l[r?0:1]),l.replace(/%d/i,e)}},o=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];t.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},preparse:function(t){return t.replace(/\u200f/g,"").replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(381))},7702:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}(n(381))},6040:function(t,e,n){!function(t){"use strict";var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};t.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(t){return t.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(381))},5671:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(381))},867:function(t,e,n){!function(t){"use strict";var e={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},i=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},r={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},o=function(t){return function(e,n,o,a){var s=i(e),l=r[t][i(e)];return 2===s&&(l=l[n?0:1]),l.replace(/%d/i,e)}},a=["كانون الثاني يناير","شباط فبراير","آذار مارس","نيسان أبريل","أيار مايو","حزيران يونيو","تموز يوليو","آب أغسطس","أيلول سبتمبر","تشرين الأول أكتوبر","تشرين الثاني نوفمبر","كانون الأول ديسمبر"];t.defineLocale("ar",{months:a,monthsShort:a,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(t){return"م"===t},meridiem:function(t,e,n){return t<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(t){return t.replace(/\u200f/g,"").replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(381))},1083:function(t,e,n){!function(t){"use strict";var e={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};t.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(t){return/^(gündüz|axşam)$/.test(t)},meridiem:function(t,e,n){return t<4?"gecə":t<12?"səhər":t<17?"gündüz":"axşam"},ordinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(t){if(0===t)return t+"-ıncı";var n=t%10;return t+(e[n]||e[t%100-n]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},9808:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"хвіліна":"хвіліну":"h"===n?e?"гадзіна":"гадзіну":t+" "+(i=+t,r={mm:e?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:e?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}t.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:e,mm:e,h:e,hh:e,d:"дзень",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(t){return/^(дня|вечара)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночы":t<12?"раніцы":t<17?"дня":"вечара"},ordinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t%10!=2&&t%10!=3||t%100==12||t%100==13?t+"-ы":t+"-і";case"D":return t+"-га";default:return t}},week:{dow:1,doy:7}})}(n(381))},8338:function(t,e,n){!function(t){"use strict";t.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-ев":0===n?t+"-ен":n>10&&n<20?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}(n(381))},8905:function(t,e,n){!function(t){"use strict";var e={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};t.defineLocale("bn",{months:"জানুয়ারী_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপ্র_মে_জুন_জুল_আগ_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গ_বুধ_বৃহঃ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(t){return t.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(t,e){return 12===t&&(t=0),"রাত"===e&&t>=4||"দুপুর"===e&&t<5||"বিকাল"===e?t+12:t},meridiem:function(t,e,n){return t<4?"রাত":t<10?"সকাল":t<17?"দুপুর":t<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(381))},1560:function(t,e,n){!function(t){"use strict";var e={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};t.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(t){return t.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(t,e){return 12===t&&(t=0),"མཚན་མོ"===e&&t>=4||"ཉིན་གུང"===e&&t<5||"དགོང་དག"===e?t+12:t},meridiem:function(t,e,n){return t<4?"མཚན་མོ":t<10?"ཞོགས་ཀས":t<17?"ཉིན་གུང":t<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(381))},1278:function(t,e,n){!function(t){"use strict";function e(t,e,n){return t+" "+function(t,e){return 2===e?function(t){var e={m:"v",b:"v",d:"z"};return void 0===e[t.charAt(0)]?t:e[t.charAt(0)]+t.substring(1)}(t):t}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],t)}function n(t){return t>9?n(t%10):t}t.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:e,h:"un eur",hh:"%d eur",d:"un devezh",dd:e,M:"ur miz",MM:e,y:"ur bloaz",yy:function(t){switch(n(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}},ordinalParse:/\d{1,2}(añ|vet)/,ordinal:function(t){return t+(1===t?"añ":"vet")},week:{dow:1,doy:4}})}(n(381))},622:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=t+" ";switch(n){case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+(1===t?"minuta":2===t||3===t||4===t?"minute":"minuta");case"h":return e?"jedan sat":"jednog sata";case"hh":return i+(1===t?"sat":2===t||3===t||4===t?"sata":"sati");case"dd":return i+(1===t?"dan":"dana");case"MM":return i+(1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci");case"yy":return i+(1===t?"godina":2===t||3===t||4===t?"godine":"godina")}}t.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},2468:function(t,e,n){!function(t){"use strict";t.defineLocale("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd D MMMM YYYY H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(t,e){var n=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"è";return"w"!==e&&"W"!==e||(n="a"),t+n},week:{dow:1,doy:4}})}(n(381))},5822:function(t,e,n){!function(t){"use strict";var e="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");function i(t){return t>1&&t<5&&1!=~~(t/10)}function r(t,e,n,r){var o=t+" ";switch(n){case"s":return e||r?"pár sekund":"pár sekundami";case"m":return e?"minuta":r?"minutu":"minutou";case"mm":return e||r?o+(i(t)?"minuty":"minut"):o+"minutami";case"h":return e?"hodina":r?"hodinu":"hodinou";case"hh":return e||r?o+(i(t)?"hodiny":"hodin"):o+"hodinami";case"d":return e||r?"den":"dnem";case"dd":return e||r?o+(i(t)?"dny":"dní"):o+"dny";case"M":return e||r?"měsíc":"měsícem";case"MM":return e||r?o+(i(t)?"měsíce":"měsíců"):o+"měsíci";case"y":return e||r?"rok":"rokem";case"yy":return e||r?o+(i(t)?"roky":"let"):o+"lety"}}t.defineLocale("cs",{months:e,monthsShort:n,monthsParse:function(t,e){var n,i=[];for(n=0;n<12;n++)i[n]=new RegExp("^"+t[n]+"$|^"+e[n]+"$","i");return i}(e,n),shortMonthsParse:function(t){var e,n=[];for(e=0;e<12;e++)n[e]=new RegExp("^"+t[e]+"$","i");return n}(n),longMonthsParse:function(t){var e,n=[];for(e=0;e<12;e++)n[e]=new RegExp("^"+t[e]+"$","i");return n}(e),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},877:function(t,e,n){!function(t){"use strict";t.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(t){return t+(/сехет$/i.exec(t)?"рен":/ҫул$/i.exec(t)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},ordinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(381))},7373:function(t,e,n){!function(t){"use strict";t.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(t){var e="";return t>20?e=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(e=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][t]),t+e},week:{dow:1,doy:4}})}(n(381))},4780:function(t,e,n){!function(t){"use strict";t.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY HH:mm"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},217:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9740:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?r[n][0]:r[n][1]}t.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5300:function(t,e,n){!function(t){"use strict";var e=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];t.defineLocale("dv",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(t){return"މފ"===t},meridiem:function(t,e,n){return t<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(t){return t.replace(/،/g,",")},postformat:function(t){return t.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(381))},837:function(t,e,n){!function(t){"use strict";t.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(t,e){return/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(t,e,n){return t>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(t){return"μ"===(t+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){return 6===this.day()?"[το προηγούμενο] dddd [{}] LT":"[την προηγούμενη] dddd [{}] LT"},sameElse:"L"},calendar:function(t,e){var n,i=this._calendarEl[t],r=e&&e.hours();return((n=i)instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(i=i.apply(e)),i.replace("{}",r%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(381))},8348:function(t,e,n){!function(t){"use strict";t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},7925:function(t,e,n){!function(t){"use strict";t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(381))},2243:function(t,e,n){!function(t){"use strict";t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},6436:function(t,e,n){!function(t){"use strict";t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},9245:function(t,e,n){!function(t){"use strict";t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},2915:function(t,e,n){!function(t){"use strict";t.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-an de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(t){return"p"===t.charAt(0).toLowerCase()},meridiem:function(t,e,n){return t>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(381))},5251:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},7093:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},monthsParseExact:!0,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},5603:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[t+" minuti",t+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[t+" tunni",t+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[t+" kuu",t+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[t+" aasta",t+" aastat"]};return e?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}t.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d päeva",M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},7763:function(t,e,n){!function(t){"use strict";t.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},6959:function(t,e,n){!function(t){"use strict";var e={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};t.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(t){return/بعد از ظهر/.test(t)},meridiem:function(t,e,n){return t<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(t){return t.replace(/[۰-۹]/g,(function(t){return n[t]})).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"،")},ordinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(381))},1897:function(t,e,n){!function(t){"use strict";var e="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",e[7],e[8],e[9]];function i(t,i,r,o){var a="";switch(r){case"s":return o?"muutaman sekunnin":"muutama sekunti";case"m":return o?"minuutin":"minuutti";case"mm":a=o?"minuutin":"minuuttia";break;case"h":return o?"tunnin":"tunti";case"hh":a=o?"tunnin":"tuntia";break;case"d":return o?"päivän":"päivä";case"dd":a=o?"päivän":"päivää";break;case"M":return o?"kuukauden":"kuukausi";case"MM":a=o?"kuukauden":"kuukautta";break;case"y":return o?"vuoden":"vuosi";case"yy":a=o?"vuoden":"vuotta"}return function(t,i){return t<10?i?n[t]:e[t]:t}(t,o)+" "+a}t.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},4694:function(t,e,n){!function(t){"use strict";t.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},3049:function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(t){return t+(1===t?"er":"e")}})}(n(381))},2330:function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|e)/,ordinal:function(t){return t+(1===t?"er":"e")},week:{dow:1,doy:4}})}(n(381))},4470:function(t,e,n){!function(t){"use strict";t.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(t){return t+(1===t?"er":"")},week:{dow:1,doy:4}})}(n(381))},5044:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");t.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},2101:function(t,e,n){!function(t){"use strict";t.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],monthsShort:["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],monthsParseExact:!0,weekdays:["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["Dò","Lu","Mà","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},ordinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(381))},8794:function(t,e,n){!function(t){"use strict";t.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return 0===t.indexOf("un")?"n"+t:"en "+t},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},4206:function(t,e,n){!function(t){"use strict";t.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(t){return 2===t?"שעתיים":t+" שעות"},d:"יום",dd:function(t){return 2===t?"יומיים":t+" ימים"},M:"חודש",MM:function(t){return 2===t?"חודשיים":t+" חודשים"},y:"שנה",yy:function(t){return 2===t?"שנתיים":t%10==0&&10!==t?t+" שנה":t+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(t){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(t)},meridiem:function(t,e,n){return t<5?"לפנות בוקר":t<10?"בבוקר":t<12?n?'לפנה"צ':"לפני הצהריים":t<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(381))},94:function(t,e,n){!function(t){"use strict";var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};t.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(t,e){return 12===t&&(t=0),"रात"===e?t<4?t:t+12:"सुबह"===e?t:"दोपहर"===e?t>=10?t:t+12:"शाम"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"रात":t<10?"सुबह":t<17?"दोपहर":t<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(381))},316:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=t+" ";switch(n){case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+(1===t?"minuta":2===t||3===t||4===t?"minute":"minuta");case"h":return e?"jedan sat":"jednog sata";case"hh":return i+(1===t?"sat":2===t||3===t||4===t?"sata":"sati");case"dd":return i+(1===t?"dan":"dana");case"MM":return i+(1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci");case"yy":return i+(1===t?"godina":2===t||3===t||4===t?"godine":"godina")}}t.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},2138:function(t,e,n){!function(t){"use strict";var e="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(t,e,n,i){var r=t;switch(n){case"s":return i||e?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(i||e?" perc":" perce");case"mm":return r+(i||e?" perc":" perce");case"h":return"egy"+(i||e?" óra":" órája");case"hh":return r+(i||e?" óra":" órája");case"d":return"egy"+(i||e?" nap":" napja");case"dd":return r+(i||e?" nap":" napja");case"M":return"egy"+(i||e?" hónap":" hónapja");case"MM":return r+(i||e?" hónap":" hónapja");case"y":return"egy"+(i||e?" év":" éve");case"yy":return r+(i||e?" év":" éve")}return""}function i(t){return(t?"":"[múlt] ")+"["+e[this.day()]+"] LT[-kor]"}t.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(t){return"u"===t.charAt(1).toLowerCase()},meridiem:function(t,e,n){return t<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},1423:function(t,e,n){!function(t){"use strict";t.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(t){return/^(ցերեկվա|երեկոյան)$/.test(t)},meridiem:function(t){return t<4?"գիշերվա":t<12?"առավոտվա":t<17?"ցերեկվա":"երեկոյան"},ordinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-ին":t+"-րդ";default:return t}},week:{dow:1,doy:7}})}(n(381))},9218:function(t,e,n){!function(t){"use strict";t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"siang"===e?t>=11?t:t+12:"sore"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"siang":t<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},135:function(t,e,n){!function(t){"use strict";function e(t){return t%100==11||t%10!=1}function n(t,n,i,r){var o=t+" ";switch(i){case"s":return n||r?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return n?"mínúta":"mínútu";case"mm":return e(t)?o+(n||r?"mínútur":"mínútum"):n?o+"mínúta":o+"mínútu";case"hh":return e(t)?o+(n||r?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":r?"dag":"degi";case"dd":return e(t)?n?o+"dagar":o+(r?"daga":"dögum"):n?o+"dagur":o+(r?"dag":"degi");case"M":return n?"mánuður":r?"mánuð":"mánuði";case"MM":return e(t)?n?o+"mánuðir":o+(r?"mánuði":"mánuðum"):n?o+"mánuður":o+(r?"mánuð":"mánuði");case"y":return n||r?"ár":"ári";case"yy":return e(t)?o+(n||r?"ár":"árum"):o+(n||r?"ár":"ári")}}t.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},626:function(t,e,n){!function(t){"use strict";t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"Do_Lu_Ma_Me_Gi_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){return 0===this.day()?"[la scorsa] dddd [alle] LT":"[lo scorso] dddd [alle] LT"},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},9183:function(t,e,n){!function(t){"use strict";t.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",LTS:"Ah時m分s秒",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah時m分",LLLL:"YYYY年M月D日Ah時m分 dddd"},meridiemParse:/午前|午後/i,isPM:function(t){return"午後"===t},meridiem:function(t,e,n){return t<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},ordinalParse:/\d{1,2}日/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";default:return t}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(381))},4286:function(t,e,n){!function(t){"use strict";t.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(t,e){return 12===t&&(t=0),"enjing"===e?t:"siyang"===e?t>=11?t:t+12:"sonten"===e||"ndalu"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"enjing":t<15?"siyang":t<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(381))},2105:function(t,e,n){!function(t){"use strict";t.defineLocale("ka",{months:{standalone:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),format:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(t){return/(წამი|წუთი|საათი|წელი)/.test(t)?t.replace(/ი$/,"ში"):t+"ში"},past:function(t){return/(წამი|წუთი|საათი|დღე|თვე)/.test(t)?t.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(t)?t.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(t){return 0===t?t:1===t?t+"-ლი":t<20||t<=100&&t%20==0||t%100==0?"მე-"+t:t+"-ე"},week:{dow:1,doy:7}})}(n(381))},7772:function(t,e,n){!function(t){"use strict";var e={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};t.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},ordinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},8758:function(t,e,n){!function(t){"use strict";t.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}})}(n(381))},3730:function(t,e,n){!function(t){"use strict";t.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h시 m분",LLLL:"YYYY년 MMMM D일 dddd A h시 m분"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"일분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(t){return"오후"===t},meridiem:function(t,e,n){return t<12?"오전":"오후"}})}(n(381))},3291:function(t,e,n){!function(t){"use strict";var e={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};t.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кече саат] LT",lastWeek:"[Өткен аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},ordinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},6841:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return e?r[n][0]:r[n][1]}function n(t){if(t=parseInt(t,10),isNaN(t))return!1;if(t<0)return!0;if(t<10)return 4<=t&&t<=7;if(t<100){var e=t%10;return n(0===e?t/10:e)}if(t<1e4){for(;t>=10;)t/=10;return n(t)}return n(t/=1e3)}t.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(t){return n(t.substr(0,t.indexOf(" ")))?"a "+t:"an "+t},past:function(t){return n(t.substr(0,t.indexOf(" ")))?"viru "+t:"virun "+t},s:"e puer Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:"%d Deeg",M:e,MM:"%d Méint",y:e,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5466:function(t,e,n){!function(t){"use strict";t.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(t){return"ຕອນແລງ"===t},meridiem:function(t,e,n){return t<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},ordinalParse:/(ທີ່)\d{1,2}/,ordinal:function(t){return"ທີ່"+t}})}(n(381))},7010:function(t,e,n){!function(t){"use strict";var e={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(t,e,n,i){return e?r(n)[0]:i?r(n)[1]:r(n)[2]}function i(t){return t%10==0||t>10&&t<20}function r(t){return e[t].split("_")}function o(t,e,o,a){var s=t+" ";return 1===t?s+n(0,e,o[0],a):e?s+(i(t)?r(o)[1]:r(o)[0]):a?s+r(o)[1]:s+(i(t)?r(o)[1]:r(o)[2])}t.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?|MMMM?(\[[^\[\]]*\]|\s+)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:function(t,e,n,i){return e?"kelios sekundės":i?"kelių sekundžių":"kelias sekundes"},m:n,mm:o,h:n,hh:o,d:n,dd:o,M:n,MM:o,y:n,yy:o},ordinalParse:/\d{1,2}-oji/,ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}(n(381))},7595:function(t,e,n){!function(t){"use strict";var e={m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(t,e,n){return n?e%10==1&&e%100!=11?t[2]:t[3]:e%10==1&&e%100!=11?t[0]:t[1]}function i(t,i,r){return t+" "+n(e[r],t,i)}function r(t,i,r){return n(e[r],t,i)}t.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:function(t,e){return e?"dažas sekundes":"dažām sekundēm"},m:r,mm:i,h:r,hh:i,d:r,dd:i,M:r,MM:i,y:r,yy:i},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9861:function(t,e,n){!function(t){"use strict";var e={words:{m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mjesec",MM:e.translate,y:"godinu",yy:e.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},5493:function(t,e,n){!function(t){"use strict";t.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},5966:function(t,e,n){!function(t){"use strict";t.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-ев":0===n?t+"-ен":n>10&&n<20?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}(n(381))},7341:function(t,e,n){!function(t){"use strict";t.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(t,e){return 12===t&&(t=0),"രാത്രി"===e&&t>=4||"ഉച്ച കഴിഞ്ഞ്"===e||"വൈകുന്നേരം"===e?t+12:t},meridiem:function(t,e,n){return t<4?"രാത്രി":t<12?"രാവിലെ":t<17?"ഉച്ച കഴിഞ്ഞ്":t<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(381))},370:function(t,e,n){!function(t){"use strict";var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function i(t,e,n,i){var r="";if(e)switch(n){case"s":r="काही सेकंद";break;case"m":r="एक मिनिट";break;case"mm":r="%d मिनिटे";break;case"h":r="एक तास";break;case"hh":r="%d तास";break;case"d":r="एक दिवस";break;case"dd":r="%d दिवस";break;case"M":r="एक महिना";break;case"MM":r="%d महिने";break;case"y":r="एक वर्ष";break;case"yy":r="%d वर्षे"}else switch(n){case"s":r="काही सेकंदां";break;case"m":r="एका मिनिटा";break;case"mm":r="%d मिनिटां";break;case"h":r="एका तासा";break;case"hh":r="%d तासां";break;case"d":r="एका दिवसा";break;case"dd":r="%d दिवसां";break;case"M":r="एका महिन्या";break;case"MM":r="%d महिन्यां";break;case"y":r="एका वर्षा";break;case"yy":r="%d वर्षां"}return r.replace(/%d/i,t)}t.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(t,e){return 12===t&&(t=0),"रात्री"===e?t<4?t:t+12:"सकाळी"===e?t:"दुपारी"===e?t>=10?t:t+12:"सायंकाळी"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"रात्री":t<10?"सकाळी":t<17?"दुपारी":t<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(381))},1237:function(t,e,n){!function(t){"use strict";t.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},9847:function(t,e,n){!function(t){"use strict";t.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},6165:function(t,e,n){!function(t){"use strict";var e={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};t.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(t){return t.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},week:{dow:1,doy:4}})}(n(381))},4924:function(t,e,n){!function(t){"use strict";t.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},6744:function(t,e,n){!function(t){"use strict";var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};t.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(t,e){return 12===t&&(t=0),"राति"===e?t<4?t:t+12:"बिहान"===e?t:"दिउँसो"===e?t>=10?t:t+12:"साँझ"===e?t+12:void 0},meridiem:function(t,e,n){return t<3?"राति":t<12?"बिहान":t<16?"दिउँसो":t<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(381))},3901:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),i=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],r=/^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:i,longMonthsParse:i,shortMonthsParse:i,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},3877:function(t,e,n){!function(t){"use strict";t.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5858:function(t,e,n){!function(t){"use strict";var e={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};t.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(t){return t.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(t,e){return 12===t&&(t=0),"ਰਾਤ"===e?t<4?t:t+12:"ਸਵੇਰ"===e?t:"ਦੁਪਹਿਰ"===e?t>=10?t:t+12:"ਸ਼ਾਮ"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"ਰਾਤ":t<10?"ਸਵੇਰ":t<17?"ਦੁਪਹਿਰ":t<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(381))},4495:function(t,e,n){!function(t){"use strict";var e="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");function i(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function r(t,e,n){var r=t+" ";switch(n){case"m":return e?"minuta":"minutę";case"mm":return r+(i(t)?"minuty":"minut");case"h":return e?"godzina":"godzinę";case"hh":return r+(i(t)?"godziny":"godzin");case"MM":return r+(i(t)?"miesiące":"miesięcy");case"yy":return r+(i(t)?"lata":"lat")}}t.defineLocale("pl",{months:function(t,i){return""===i?"("+n[t.month()]+"|"+e[t.month()]+")":/D MMMM/.test(i)?n[t.month()]:e[t.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:r,mm:r,h:r,hh:r,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:r,y:"rok",yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},7971:function(t,e,n){!function(t){"use strict";t.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"})}(n(381))},9520:function(t,e,n){!function(t){"use strict";t.defineLocale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Dom_2ª_3ª_4ª_5ª_6ª_Sáb".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(381))},6459:function(t,e,n){!function(t){"use strict";function e(t,e,n){var i=" ";return(t%100>=20||t>=100&&t%100==0)&&(i=" de "),t+i+{mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}t.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:e,h:"o oră",hh:e,d:"o zi",dd:e,M:"o lună",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})}(n(381))},238:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"минута":"минуту":t+" "+(i=+t,r={mm:e?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}var n=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];t.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:e,mm:e,h:"час",hh:e,d:"день",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночи":t<12?"утра":t<17?"дня":"вечера"},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:7}})}(n(381))},490:function(t,e,n){!function(t){"use strict";t.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},124:function(t,e,n){!function(t){"use strict";t.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},ordinalParse:/\d{1,2} වැනි/,ordinal:function(t){return t+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(t){return"ප.ව."===t||"පස් වරු"===t},meridiem:function(t,e,n){return t>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(381))},4249:function(t,e,n){!function(t){"use strict";var e="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function i(t){return t>1&&t<5}function r(t,e,n,r){var o=t+" ";switch(n){case"s":return e||r?"pár sekúnd":"pár sekundami";case"m":return e?"minúta":r?"minútu":"minútou";case"mm":return e||r?o+(i(t)?"minúty":"minút"):o+"minútami";case"h":return e?"hodina":r?"hodinu":"hodinou";case"hh":return e||r?o+(i(t)?"hodiny":"hodín"):o+"hodinami";case"d":return e||r?"deň":"dňom";case"dd":return e||r?o+(i(t)?"dni":"dní"):o+"dňami";case"M":return e||r?"mesiac":"mesiacom";case"MM":return e||r?o+(i(t)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return e||r?"rok":"rokom";case"yy":return e||r?o+(i(t)?"roky":"rokov"):o+"rokmi"}}t.defineLocale("sk",{months:e,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:case 4:case 5:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},4985:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r=t+" ";switch(n){case"s":return e||i?"nekaj sekund":"nekaj sekundami";case"m":return e?"ena minuta":"eno minuto";case"mm":return r+(1===t?e?"minuta":"minuto":2===t?e||i?"minuti":"minutama":t<5?e||i?"minute":"minutami":e||i?"minut":"minutami");case"h":return e?"ena ura":"eno uro";case"hh":return r+(1===t?e?"ura":"uro":2===t?e||i?"uri":"urama":t<5?e||i?"ure":"urami":e||i?"ur":"urami");case"d":return e||i?"en dan":"enim dnem";case"dd":return r+(1===t?e||i?"dan":"dnem":2===t?e||i?"dni":"dnevoma":e||i?"dni":"dnevi");case"M":return e||i?"en mesec":"enim mesecem";case"MM":return r+(1===t?e||i?"mesec":"mesecem":2===t?e||i?"meseca":"mesecema":t<5?e||i?"mesece":"meseci":e||i?"mesecev":"meseci");case"y":return e||i?"eno leto":"enim letom";case"yy":return r+(1===t?e||i?"leto":"letom":2===t?e||i?"leti":"letoma":t<5?e||i?"leta":"leti":e||i?"let":"leti")}}t.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},1104:function(t,e,n){!function(t){"use strict";t.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(t){return"M"===t.charAt(0)},meridiem:function(t,e,n){return t<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9915:function(t,e,n){!function(t){"use strict";var e={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"дан",dd:e.translate,M:"месец",MM:e.translate,y:"годину",yy:e.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},9131:function(t,e,n){!function(t){"use strict";var e={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};t.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},5893:function(t,e,n){!function(t){"use strict";t.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(t,e,n){return t<11?"ekuseni":t<15?"emini":t<19?"entsambama":"ebusuku"},meridiemHour:function(t,e){return 12===t&&(t=0),"ekuseni"===e?t:"emini"===e?t>=11?t:t+12:"entsambama"===e||"ebusuku"===e?0===t?0:t+12:void 0},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},8760:function(t,e,n){!function(t){"use strict";t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"e":1===e||2===e?"a":"e")},week:{dow:1,doy:4}})}(n(381))},1172:function(t,e,n){!function(t){"use strict";t.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(381))},7333:function(t,e,n){!function(t){"use strict";var e={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};t.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinalParse:/\d{1,2}வது/,ordinal:function(t){return t+"வது"},preparse:function(t){return t.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(t,e,n){return t<2?" யாமம்":t<6?" வைகறை":t<10?" காலை":t<14?" நண்பகல்":t<18?" எற்பாடு":t<22?" மாலை":" யாமம்"},meridiemHour:function(t,e){return 12===t&&(t=0),"யாமம்"===e?t<2?t:t+12:"வைகறை"===e||"காலை"===e||"நண்பகல்"===e&&t>=10?t:t+12},week:{dow:0,doy:6}})}(n(381))},3110:function(t,e,n){!function(t){"use strict";t.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జూలై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జూలై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},ordinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(t,e){return 12===t&&(t=0),"రాత్రి"===e?t<4?t:t+12:"ఉదయం"===e?t:"మధ్యాహ్నం"===e?t>=10?t:t+12:"సాయంత్రం"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"రాత్రి":t<10?"ఉదయం":t<17?"మధ్యాహ్నం":t<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(381))},9041:function(t,e,n){!function(t){"use strict";t.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(t){return"หลังเที่ยง"===t},meridiem:function(t,e,n){return t<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(381))},5768:function(t,e,n){!function(t){"use strict";t.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(381))},9444:function(t,e,n){!function(t){"use strict";var e="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(t,n,i,r){var o=function(t){var n=Math.floor(t%1e3/100),i=Math.floor(t%100/10),r=t%10,o="";return n>0&&(o+=e[n]+"vatlh"),i>0&&(o+=(""!==o?" ":"")+e[i]+"maH"),r>0&&(o+=(""!==o?" ":"")+e[r]),""===o?"pagh":o}(t);switch(i){case"mm":return o+" tup";case"hh":return o+" rep";case"dd":return o+" jaj";case"MM":return o+" jar";case"yy":return o+" DIS"}}t.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(t){var e=t;return-1!==t.indexOf("jaj")?e.slice(0,-3)+"leS":-1!==t.indexOf("jar")?e.slice(0,-3)+"waQ":-1!==t.indexOf("DIS")?e.slice(0,-3)+"nem":e+" pIq"},past:function(t){var e=t;return-1!==t.indexOf("jaj")?e.slice(0,-3)+"Hu’":-1!==t.indexOf("jar")?e.slice(0,-3)+"wen":-1!==t.indexOf("DIS")?e.slice(0,-3)+"ben":e+" ret"},s:"puS lup",m:"wa’ tup",mm:n,h:"wa’ rep",hh:n,d:"wa’ jaj",dd:n,M:"wa’ jar",MM:n,y:"wa’ DIS",yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},2397:function(t,e,n){!function(t){"use strict";var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};t.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(t){if(0===t)return t+"'ıncı";var n=t%10;return t+(e[n]||e[t%100-n]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},8254:function(t,e,n){!function(t){"use strict";function e(t,e,n,i){var r={s:["viensas secunds","'iensas secunds"],m:["'n míut","'iens míut"],mm:[t+" míuts",t+" míuts"],h:["'n þora","'iensa þora"],hh:[t+" þoras",t+" þoras"],d:["'n ziua","'iensa ziua"],dd:[t+" ziuas",t+" ziuas"],M:["'n mes","'iens mes"],MM:[t+" mesen",t+" mesen"],y:["'n ar","'iens ar"],yy:[t+" ars",t+" ars"]};return i||e?r[n][0]:r[n][1]}t.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(t){return"d'o"===t.toLowerCase()},meridiem:function(t,e,n){return t>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},699:function(t,e,n){!function(t){"use strict";t.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(381))},1106:function(t,e,n){!function(t){"use strict";t.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(381))},7691:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"хвилина":"хвилину":"h"===n?e?"година":"годину":t+" "+(i=+t,r={mm:e?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:e?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[n].split("_"),i%10==1&&i%100!=11?r[0]:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?r[1]:r[2]);var i,r}function n(t){return function(){return t+"о"+(11===this.hours()?"б":"")+"] LT"}}t.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:function(t,e){return{nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")}[/(\[[ВвУу]\]) ?dddd/.test(e)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(e)?"genitive":"nominative"][t.day()]},weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:n("[Сьогодні "),nextDay:n("[Завтра "),lastDay:n("[Вчора "),nextWeek:n("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[Минулої] dddd [").call(this);case 1:case 2:case 4:return n("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:e,mm:e,h:"годину",hh:e,d:"день",dd:e,M:"місяць",MM:e,y:"рік",yy:e},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(t){return/^(дня|вечора)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночі":t<12?"ранку":t<17?"дня":"вечора"},ordinalParse:/\d{1,2}-(й|го)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-й";case"D":return t+"-го";default:return t}},week:{dow:1,doy:7}})}(n(381))},6791:function(t,e,n){!function(t){"use strict";t.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(381))},5666:function(t,e,n){!function(t){"use strict";t.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(t){return/^ch$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(381))},4378:function(t,e,n){!function(t){"use strict";t.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},3839:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var e,n;return e=t().startOf("week"),n=this.diff(e,"days")>=7?"[下]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},lastWeek:function(){var e,n;return e=t().startOf("week"),n=this.unix()<e.unix()?"[上]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(381))},5726:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm分",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah點mm分",LLLL:"YYYY年MMMD日ddddAh點mm分",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah點mm分",llll:"YYYY年MMMD日ddddAh點mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(381))},4152:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm分",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah點mm分",LLLL:"YYYY年MMMD日ddddAh點mm分",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah點mm分",llll:"YYYY年MMMD日ddddAh點mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"中午"===e?t>=11?t:t+12:"下午"===e||"晚上"===e?t+12:void 0},meridiem:function(t,e,n){var i=100*t+e;return i<600?"凌晨":i<900?"早上":i<1130?"上午":i<1230?"中午":i<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(381))},6700:(t,e,n)=>{var i={"./af":2786,"./af.js":2786,"./ar":867,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":5671,"./ar-tn.js":5671,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bn":8905,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-nz":9245,"./en-nz.js":9245,"./eo":2915,"./eo.js":2915,"./es":7093,"./es-do":5251,"./es-do.js":5251,"./es.js":7093,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./ko":3730,"./ko.js":3730,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":238,"./ru.js":238,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./th":9041,"./th.js":9041,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./uk":7691,"./uk.js":7691,"./uz":6791,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-tw":4152,"./zh-tw.js":4152};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=6700},381:function(t,e,n){(t=n.nmd(t)).exports=function(){"use strict";var e,i;function r(){return e.apply(null,arguments)}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function c(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function u(t,e){for(var n in e)c(e,n)&&(t[n]=e[n]);return c(e,"toString")&&(t.toString=e.toString),c(e,"valueOf")&&(t.valueOf=e.valueOf),t}function h(t,e,n,i){return _e(t,e,n,i,!0).utc()}function d(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}),t._pf}function p(t){if(null==t._isValid){var e=d(t),n=i.call(e.parsedDateParts,(function(t){return null!=t})),r=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(r=r&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return r;t._isValid=r}return t._isValid}function f(t){var e=h(NaN);return null!=t?u(d(e),t):d(e).userInvalidated=!0,e}function m(t){return void 0===t}i=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var g=r.momentProperties=[];function _(t,e){var n,i,r;if(m(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),m(e._i)||(t._i=e._i),m(e._f)||(t._f=e._f),m(e._l)||(t._l=e._l),m(e._strict)||(t._strict=e._strict),m(e._tzm)||(t._tzm=e._tzm),m(e._isUTC)||(t._isUTC=e._isUTC),m(e._offset)||(t._offset=e._offset),m(e._pf)||(t._pf=d(e)),m(e._locale)||(t._locale=e._locale),g.length>0)for(n in g)m(r=e[i=g[n]])||(t[i]=r);return t}var y=!1;function v(t){_(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),!1===y&&(y=!0,r.updateOffset(this),y=!1)}function b(t){return t instanceof v||null!=t&&null!=t._isAMomentObject}function x(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=x(e)),n}function E(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&w(t[i])!==w(e[i]))&&a++;return a+o}function M(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,e){var n=!0;return u((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}M(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var S,k={};function C(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),k[t]||(M(e),k[t]=!0)}function I(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function L(t,e){var n,i=u({},t);for(n in e)c(e,n)&&(a(t[n])&&a(e[n])?(i[n]={},u(i[n],t[n]),u(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)c(t,n)&&!c(e,n)&&a(t[n])&&(i[n]=u({},i[n]));return i}function D(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,S=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)c(t,e)&&n.push(e);return n};var A={};function P(t,e){var n=t.toLowerCase();A[n]=A[n+"s"]=A[e]=t}function z(t){return"string"==typeof t?A[t]||A[t.toLowerCase()]:void 0}function N(t){var e,n,i={};for(n in t)c(t,n)&&(e=z(n))&&(i[e]=t[n]);return i}var R={};function O(t,e){R[t]=e}function F(t,e){return function(n){return null!=n?(U(this,t,n),r.updateOffset(this,e),this):B(this,t)}}function B(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function U(t,e,n){t.isValid()&&t._d["set"+(t._isUTC?"UTC":"")+e](n)}function Y(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,V=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,G={},q={};function H(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(q[t]=r),e&&(q[e[0]]=function(){return Y(r.apply(this,arguments),e[1],e[2])}),n&&(q[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function $(t,e){return t.isValid()?(e=Z(e,t.localeData()),G[e]=G[e]||function(t){var e,n,i,r=t.match(j);for(e=0,n=r.length;e<n;e++)q[r[e]]?r[e]=q[r[e]]:r[e]=(i=r[e]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(e){var i,o="";for(i=0;i<n;i++)o+=r[i]instanceof Function?r[i].call(e,t):r[i];return o}}(e),G[e](t)):t.localeData().invalidDate()}function Z(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(V.lastIndex=0;n>=0&&V.test(t);)t=t.replace(V,i),V.lastIndex=0,n-=1;return t}var W=/\d/,X=/\d\d/,K=/\d{3}/,J=/\d{4}/,Q=/[+-]?\d{6}/,tt=/\d\d?/,et=/\d\d\d\d?/,nt=/\d\d\d\d\d\d?/,it=/\d{1,3}/,rt=/\d{1,4}/,ot=/[+-]?\d{1,6}/,at=/\d+/,st=/[+-]?\d+/,lt=/Z|[+-]\d\d:?\d\d/gi,ct=/Z|[+-]\d\d(?::?\d\d)?/gi,ut=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ht={};function dt(t,e,n){ht[t]=I(e)?e:function(t,i){return t&&n?n:e}}function pt(t,e){return c(ht,t)?ht[t](e._strict,e._locale):new RegExp(ft(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,i,r){return e||n||i||r}))))}function ft(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var mt={};function gt(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=w(t)}),n=0;n<t.length;n++)mt[t[n]]=i}function _t(t,e){gt(t,(function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)}))}function yt(t,e,n){null!=e&&c(mt,t)&&mt[t](e,n._a,n,t)}var vt;function bt(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}vt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},H("M",["MM",2],"Mo",(function(){return this.month()+1})),H("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),H("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),P("month","M"),O("month",8),dt("M",tt),dt("MM",tt,X),dt("MMM",(function(t,e){return e.monthsShortRegex(t)})),dt("MMMM",(function(t,e){return e.monthsRegex(t)})),gt(["M","MM"],(function(t,e){e[1]=w(t)-1})),gt(["MMM","MMMM"],(function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[1]=r:d(n).invalidMonth=t}));var xt=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Et="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Mt(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=h([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=vt.call(this._shortMonthsParse,a))?r:null:-1!==(r=vt.call(this._longMonthsParse,a))?r:null:"MMM"===e?-1!==(r=vt.call(this._shortMonthsParse,a))||-1!==(r=vt.call(this._longMonthsParse,a))?r:null:-1!==(r=vt.call(this._longMonthsParse,a))||-1!==(r=vt.call(this._shortMonthsParse,a))?r:null}function Tt(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if("number"!=typeof(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),bt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function St(t){return null!=t?(Tt(this,t),r.updateOffset(this,!0),this):B(this,"Month")}var kt=ut;var Ct=ut;function It(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],o=[];for(e=0;e<12;e++)n=h([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)i[e]=ft(i[e]),r[e]=ft(r[e]);for(e=0;e<24;e++)o[e]=ft(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Lt(t){return Dt(t)?366:365}function Dt(t){return t%4==0&&t%100!=0||t%400==0}H("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),H(0,["YY",2],0,(function(){return this.year()%100})),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),P("year","y"),O("year",1),dt("Y",st),dt("YY",tt,X),dt("YYYY",rt,J),dt("YYYYY",ot,Q),dt("YYYYYY",ot,Q),gt(["YYYYY","YYYYYY"],0),gt("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):w(t)})),gt("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),gt("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var At=F("FullYear",!0);function Pt(t,e,n,i,r,o,a){var s=new Date(t,e,n,i,r,o,a);return t<100&&t>=0&&isFinite(s.getFullYear())&&s.setFullYear(t),s}function zt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function Nt(t,e,n){var i=7+e-n;return-(7+zt(t,0,i).getUTCDay()-e)%7+i-1}function Rt(t,e,n,i,r){var o,a,s=1+7*(e-1)+(7+n-i)%7+Nt(t,i,r);return s<=0?a=Lt(o=t-1)+s:s>Lt(t)?(o=t+1,a=s-Lt(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Ot(t,e,n){var i,r,o=Nt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?i=a+Ft(r=t.year()-1,e,n):a>Ft(t.year(),e,n)?(i=a-Ft(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Ft(t,e,n){var i=Nt(t,e,n),r=Nt(t+1,e,n);return(Lt(t)-i+r)/7}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),O("week",5),O("isoWeek",5),dt("w",tt),dt("ww",tt,X),dt("W",tt),dt("WW",tt,X),_t(["w","ww","W","WW"],(function(t,e,n,i){e[i.substr(0,1)]=w(t)}));H("d",0,"do","day"),H("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),H("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),H("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),O("day",11),O("weekday",11),O("isoWeekday",11),dt("d",tt),dt("e",tt),dt("E",tt),dt("dd",(function(t,e){return e.weekdaysMinRegex(t)})),dt("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),dt("dddd",(function(t,e){return e.weekdaysRegex(t)})),_t(["dd","ddd","dddd"],(function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:d(n).invalidWeekday=t})),_t(["d","e","E"],(function(t,e,n,i){e[i]=w(t)}));var Bt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ut="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Yt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function jt(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=h([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=vt.call(this._weekdaysParse,a))?r:null:"ddd"===e?-1!==(r=vt.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=vt.call(this._minWeekdaysParse,a))?r:null:"dddd"===e?-1!==(r=vt.call(this._weekdaysParse,a))||-1!==(r=vt.call(this._shortWeekdaysParse,a))||-1!==(r=vt.call(this._minWeekdaysParse,a))?r:null:"ddd"===e?-1!==(r=vt.call(this._shortWeekdaysParse,a))||-1!==(r=vt.call(this._weekdaysParse,a))||-1!==(r=vt.call(this._minWeekdaysParse,a))?r:null:-1!==(r=vt.call(this._minWeekdaysParse,a))||-1!==(r=vt.call(this._weekdaysParse,a))||-1!==(r=vt.call(this._shortWeekdaysParse,a))?r:null}var Vt=ut;var Gt=ut;var qt=ut;function Ht(){function t(t,e){return e.length-t.length}var e,n,i,r,o,a=[],s=[],l=[],c=[];for(e=0;e<7;e++)n=h([2e3,1]).day(e),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(i),s.push(r),l.push(o),c.push(i),c.push(r),c.push(o);for(a.sort(t),s.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)s[e]=ft(s[e]),l[e]=ft(l[e]),c[e]=ft(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function $t(){return this.hours()%12||12}function Zt(t,e){H(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Wt(t,e){return e._meridiemParse}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,$t),H("k",["kk",2],0,(function(){return this.hours()||24})),H("hmm",0,0,(function(){return""+$t.apply(this)+Y(this.minutes(),2)})),H("hmmss",0,0,(function(){return""+$t.apply(this)+Y(this.minutes(),2)+Y(this.seconds(),2)})),H("Hmm",0,0,(function(){return""+this.hours()+Y(this.minutes(),2)})),H("Hmmss",0,0,(function(){return""+this.hours()+Y(this.minutes(),2)+Y(this.seconds(),2)})),Zt("a",!0),Zt("A",!1),P("hour","h"),O("hour",13),dt("a",Wt),dt("A",Wt),dt("H",tt),dt("h",tt),dt("HH",tt,X),dt("hh",tt,X),dt("hmm",et),dt("hmmss",nt),dt("Hmm",et),dt("Hmmss",nt),gt(["H","HH"],3),gt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),gt(["h","hh"],(function(t,e,n){e[3]=w(t),d(n).bigHour=!0})),gt("hmm",(function(t,e,n){var i=t.length-2;e[3]=w(t.substr(0,i)),e[4]=w(t.substr(i)),d(n).bigHour=!0})),gt("hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[3]=w(t.substr(0,i)),e[4]=w(t.substr(i,2)),e[5]=w(t.substr(r)),d(n).bigHour=!0})),gt("Hmm",(function(t,e,n){var i=t.length-2;e[3]=w(t.substr(0,i)),e[4]=w(t.substr(i))})),gt("Hmmss",(function(t,e,n){var i=t.length-4,r=t.length-2;e[3]=w(t.substr(0,i)),e[4]=w(t.substr(i,2)),e[5]=w(t.substr(r))}));var Xt,Kt=F("Hours",!0),Jt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",ordinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:wt,monthsShort:Et,week:{dow:0,doy:6},weekdays:Bt,weekdaysMin:Yt,weekdaysShort:Ut,meridiemParse:/[ap]\.?m?\.?/i},Qt={};function te(t){return t?t.toLowerCase().replace("_","-"):t}function ee(e){var i=null;if(!Qt[e]&&t&&t.exports)try{i=Xt._abbr,n(6700)("./"+e),ne(i)}catch(t){}return Qt[e]}function ne(t,e){var n;return t&&(n=m(e)?re(t):ie(t,e))&&(Xt=n),Xt._abbr}function ie(t,e){if(null!==e){var n=Jt;return e.abbr=t,null!=Qt[t]?(C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Qt[t]._config):null!=e.parentLocale&&(null!=Qt[e.parentLocale]?n=Qt[e.parentLocale]._config:C("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")),Qt[t]=new D(L(n,e)),ne(t),Qt[t]}return delete Qt[t],null}function re(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Xt;if(!o(t)){if(e=ee(t))return e;t=[t]}return function(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=te(t[o]).split("-")).length,n=(n=te(t[o+1]))?n.split("-"):null;e>0;){if(i=ee(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&E(r,n,!0)>=e-1)break;e--}o++}return null}(t)}function oe(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>bt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,d(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),d(t)._overflowWeeks&&-1===e&&(e=7),d(t)._overflowWeekday&&-1===e&&(e=8),d(t).overflow=e),t}var ae=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,se=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,le=/Z|[+-]\d\d(?::?\d\d)?/,ce=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ue=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],he=/^\/?Date\((\-?\d+)/i;function de(t){var e,n,i,r,o,a,s=t._i,l=ae.exec(s)||se.exec(s);if(l){for(d(t).iso=!0,e=0,n=ce.length;e<n;e++)if(ce[e][1].exec(l[1])){r=ce[e][0],i=!1!==ce[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=ue.length;e<n;e++)if(ue[e][1].exec(l[3])){o=(l[2]||" ")+ue[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(l[4]){if(!le.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=r+(o||"")+(a||""),me(t)}else t._isValid=!1}function pe(t,e,n){return null!=t?t:null!=e?e:n}function fe(t){var e,n,i,o,a=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,i,r,o,a,s,l;null!=(e=t._w).GG||null!=e.W||null!=e.E?(o=1,a=4,n=pe(e.GG,t._a[0],Ot(ye(),1,4).year),i=pe(e.W,1),((r=pe(e.E,1))<1||r>7)&&(l=!0)):(o=t._locale._week.dow,a=t._locale._week.doy,n=pe(e.gg,t._a[0],Ot(ye(),o,a).year),i=pe(e.w,1),null!=e.d?((r=e.d)<0||r>6)&&(l=!0):null!=e.e?(r=e.e+o,(e.e<0||e.e>6)&&(l=!0)):r=o),i<1||i>Ft(n,o,a)?d(t)._overflowWeeks=!0:null!=l?d(t)._overflowWeekday=!0:(s=Rt(n,i,r,o,a),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),t._dayOfYear&&(o=pe(t._a[0],i[0]),t._dayOfYear>Lt(o)&&(d(t)._overflowDayOfYear=!0),n=zt(o,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=a[e]=i[e];for(;e<7;e++)t._a[e]=a[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?zt:Pt).apply(null,a),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24)}}function me(t){if(t._f!==r.ISO_8601){t._a=[],d(t).empty=!0;var e,n,i,o,a,s=""+t._i,l=s.length,c=0;for(i=Z(t._f,t._locale).match(j)||[],e=0;e<i.length;e++)o=i[e],(n=(s.match(pt(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(n))).length>0&&d(t).unusedInput.push(a),s=s.slice(s.indexOf(n)+n.length),c+=n.length),q[o]?(n?d(t).empty=!1:d(t).unusedTokens.push(o),yt(o,n,t)):t._strict&&!n&&d(t).unusedTokens.push(o);d(t).charsLeftOver=l-c,s.length>0&&d(t).unusedInput.push(s),t._a[3]<=12&&!0===d(t).bigHour&&t._a[3]>0&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((i=t.isPM(n))&&e<12&&(e+=12),i||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),fe(t),oe(t)}else de(t)}function ge(t){var e=t._i,n=t._f;return t._locale=t._locale||re(t._l),null===e||void 0===n&&""===e?f({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),b(e)?new v(oe(e)):(o(n)?function(t){var e,n,i,r,o;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)o=0,e=_({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],me(e),p(e)&&(o+=d(e).charsLeftOver,o+=10*d(e).unusedTokens.length,d(e).score=o,(null==i||o<i)&&(i=o,n=e));u(t,n||e)}(t):s(e)?t._d=e:n?me(t):function(t){var e=t._i;void 0===e?t._d=new Date(r.now()):s(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=he.exec(t._i);null===e?(de(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t))):t._d=new Date(+e[1])}(t):o(e)?(t._a=l(e.slice(0),(function(t){return parseInt(t,10)})),fe(t)):"object"==typeof e?function(t){if(!t._d){var e=N(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),fe(t)}}(t):"number"==typeof e?t._d=new Date(e):r.createFromInputFallback(t)}(t),p(t)||(t._d=null),t))}function _e(t,e,n,i,r){var s,l={};return"boolean"==typeof n&&(i=n,n=void 0),(a(t)&&function(t){var e;for(e in t)return!1;return!0}(t)||o(t)&&0===t.length)&&(t=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=r,l._l=n,l._i=t,l._f=e,l._strict=i,(s=new v(oe(ge(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function ye(t,e,n,i){return _e(t,e,n,i,!1)}r.createFromInputFallback=T("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){};var ve=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ye.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:f()})),be=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ye.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:f()}));function xe(t,e){var n,i;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return ye();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}function we(t){var e=N(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=re(),this._bubble()}function Ee(t){return t instanceof we}function Me(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Te(t,e){H(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+Y(~~(t/60),2)+e+Y(~~t%60,2)}))}Te("Z",":"),Te("ZZ",""),dt("Z",ct),dt("ZZ",ct),gt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=ke(ct,t)}));var Se=/([\+\-]|\d\d)/gi;function ke(t,e){var n=(e||"").match(t)||[],i=((n[n.length-1]||[])+"").match(Se)||["-",0,0],r=60*i[1]+w(i[2]);return"+"===i[0]?r:-r}function Ce(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(b(t)||s(t)?t.valueOf():ye(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):ye(t).local()}function Ie(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Le(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var De=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ae=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function Pe(t,e){var n,i,r,o,a,s,l=t,u=null;return Ee(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(l={},e?l[e]=t:l.milliseconds=t):(u=De.exec(t))?(n="-"===u[1]?-1:1,l={y:0,d:w(u[2])*n,h:w(u[3])*n,m:w(u[4])*n,s:w(u[5])*n,ms:w(Me(1e3*u[6]))*n}):(u=Ae.exec(t))?(n="-"===u[1]?-1:1,l={y:ze(u[2],n),M:ze(u[3],n),w:ze(u[4],n),d:ze(u[5],n),h:ze(u[6],n),m:ze(u[7],n),s:ze(u[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=ye(l.from),a=ye(l.to),r=o.isValid()&&a.isValid()?(a=Ce(a,o),o.isBefore(a)?s=Ne(o,a):((s=Ne(a,o)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(l={}).ms=r.milliseconds,l.M=r.months),i=new we(l),Ee(t)&&c(t,"_locale")&&(i._locale=t._locale),i}function ze(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ne(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Re(t,e){return function(n,i){var r;return null===i||isNaN(+i)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Oe(this,Pe(n="string"==typeof n?+n:n,i),t),this}}function Oe(t,e,n,i){var o=e._milliseconds,a=Me(e._days),s=Me(e._months);t.isValid()&&(i=null==i||i,o&&t._d.setTime(t._d.valueOf()+o*n),a&&U(t,"Date",B(t,"Date")+a*n),s&&Tt(t,B(t,"Month")+s*n),i&&r.updateOffset(t,a||s))}Pe.fn=we.prototype;var Fe=Re(1,"add"),Be=Re(-1,"subtract");function Ue(t){var e;return void 0===t?this._locale._abbr:(null!=(e=re(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ye=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function je(){return this._locale}function Ve(t,e){H(0,[t,t.length],0,e)}function Ge(t,e,n,i,r){var o;return null==t?Ot(this,i,r).year:(e>(o=Ft(t,i,r))&&(e=o),qe.call(this,t,e,n,i,r))}function qe(t,e,n,i,r){var o=Rt(t,e,n,i,r),a=zt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}H(0,["gg",2],0,(function(){return this.weekYear()%100})),H(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Ve("gggg","weekYear"),Ve("ggggg","weekYear"),Ve("GGGG","isoWeekYear"),Ve("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),O("weekYear",1),O("isoWeekYear",1),dt("G",st),dt("g",st),dt("GG",tt,X),dt("gg",tt,X),dt("GGGG",rt,J),dt("gggg",rt,J),dt("GGGGG",ot,Q),dt("ggggg",ot,Q),_t(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,i){e[i.substr(0,2)]=w(t)})),_t(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),H("Q",0,"Qo","quarter"),P("quarter","Q"),O("quarter",7),dt("Q",W),gt("Q",(function(t,e){e[1]=3*(w(t)-1)})),H("D",["DD",2],"Do","date"),P("date","D"),O("date",9),dt("D",tt),dt("DD",tt,X),dt("Do",(function(t,e){return t?e._ordinalParse:e._ordinalParseLenient})),gt(["D","DD"],2),gt("Do",(function(t,e){e[2]=w(t.match(tt)[0])}));var He=F("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),O("dayOfYear",4),dt("DDD",it),dt("DDDD",K),gt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=w(t)})),H("m",["mm",2],0,"minute"),P("minute","m"),O("minute",14),dt("m",tt),dt("mm",tt,X),gt(["m","mm"],4);var $e=F("Minutes",!1);H("s",["ss",2],0,"second"),P("second","s"),O("second",15),dt("s",tt),dt("ss",tt,X),gt(["s","ss"],5);var Ze,We=F("Seconds",!1);for(H("S",0,0,(function(){return~~(this.millisecond()/100)})),H(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),H(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),H(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),H(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),H(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),H(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),P("millisecond","ms"),O("millisecond",16),dt("S",it,W),dt("SS",it,X),dt("SSS",it,K),Ze="SSSS";Ze.length<=9;Ze+="S")dt(Ze,at);function Xe(t,e){e[6]=w(1e3*("0."+t))}for(Ze="S";Ze.length<=9;Ze+="S")gt(Ze,Xe);var Ke=F("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Je=v.prototype;Je.add=Fe,Je.calendar=function(t,e){var n=t||ye(),i=Ce(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=e&&(I(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,ye(n)))},Je.clone=function(){return new v(this)},Je.diff=function(t,e,n){var i,r,o,a,s,l,c,u;return this.isValid()&&(i=Ce(t,this)).isValid()?(r=6e4*(i.utcOffset()-this.utcOffset()),"year"===(e=z(e))||"month"===e||"quarter"===e?(s=this,c=12*((l=i).year()-s.year())+(l.month()-s.month()),u=s.clone().add(c,"months"),a=-(c+(l-u<0?(l-u)/(u-s.clone().add(c-1,"months")):(l-u)/(s.clone().add(c+1,"months")-u)))||0,"quarter"===e?a/=3:"year"===e&&(a/=12)):(o=this-i,a="second"===e?o/1e3:"minute"===e?o/6e4:"hour"===e?o/36e5:"day"===e?(o-r)/864e5:"week"===e?(o-r)/6048e5:o),n?a:x(a)):NaN},Je.endOf=function(t){return void 0===(t=z(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))},Je.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=$(this,t);return this.localeData().postformat(e)},Je.from=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||ye(t).isValid())?Pe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Je.fromNow=function(t){return this.from(ye(),t)},Je.to=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||ye(t).isValid())?Pe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},Je.toNow=function(t){return this.to(ye(),t)},Je.get=function(t){return I(this[t=z(t)])?this[t]():this},Je.invalidAt=function(){return d(this).overflow},Je.isAfter=function(t,e){var n=b(t)?t:ye(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=z(m(e)?"millisecond":e))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},Je.isBefore=function(t,e){var n=b(t)?t:ye(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=z(m(e)?"millisecond":e))?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},Je.isBetween=function(t,e,n,i){return("("===(i=i||"()")[0]?this.isAfter(t,n):!this.isBefore(t,n))&&(")"===i[1]?this.isBefore(e,n):!this.isAfter(e,n))},Je.isSame=function(t,e){var n,i=b(t)?t:ye(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=z(e||"millisecond"))?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},Je.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},Je.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},Je.isValid=function(){return p(this)},Je.lang=Ye,Je.locale=Ue,Je.localeData=je,Je.max=be,Je.min=ve,Je.parsingFlags=function(){return u({},d(this))},Je.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:R[n]});return e.sort((function(t,e){return t.priority-e.priority})),e}(t=N(t)),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit]);else if(I(this[t=z(t)]))return this[t](e);return this},Je.startOf=function(t){switch(t=z(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},Je.subtract=Be,Je.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},Je.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},Je.toDate=function(){return new Date(this.valueOf())},Je.toISOString=function(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?I(Date.prototype.toISOString)?this.toDate().toISOString():$(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):$(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},Je.toJSON=function(){return this.isValid()?this.toISOString():null},Je.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Je.unix=function(){return Math.floor(this.valueOf()/1e3)},Je.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Je.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Je.year=At,Je.isLeapYear=function(){return Dt(this.year())},Je.weekYear=function(t){return Ge.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Je.isoWeekYear=function(t){return Ge.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},Je.quarter=Je.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},Je.month=St,Je.daysInMonth=function(){return bt(this.year(),this.month())},Je.week=Je.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},Je.isoWeek=Je.isoWeeks=function(t){var e=Ot(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},Je.weeksInYear=function(){var t=this.localeData()._week;return Ft(this.year(),t.dow,t.doy)},Je.isoWeeksInYear=function(){return Ft(this.year(),1,4)},Je.date=He,Je.day=Je.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},Je.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},Je.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},Je.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},Je.hour=Je.hours=Kt,Je.minute=Je.minutes=$e,Je.second=Je.seconds=We,Je.millisecond=Je.milliseconds=Ke,Je.utcOffset=function(t,e){var n,i=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=ke(ct,t):Math.abs(t)<16&&(t*=60),!this._isUTC&&e&&(n=Ie(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),i!==t&&(!e||this._changeInProgress?Oe(this,Pe(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Ie(this):null!=t?this:NaN},Je.utc=function(t){return this.utcOffset(0,t)},Je.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Ie(this),"m")),this},Je.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&(0===ke(lt,this._i)?this.utcOffset(0,!0):this.utcOffset(ke(lt,this._i))),this},Je.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?ye(t).utcOffset():0,(this.utcOffset()-t)%60==0)},Je.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Je.isLocal=function(){return!!this.isValid()&&!this._isUTC},Je.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Je.isUtc=Le,Je.isUTC=Le,Je.zoneAbbr=function(){return this._isUTC?"UTC":""},Je.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Je.dates=T("dates accessor is deprecated. Use date instead.",He),Je.months=T("months accessor is deprecated. Use month instead",St),Je.years=T("years accessor is deprecated. Use year instead",At),Je.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),Je.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!m(this._isDSTShifted))return this._isDSTShifted;var t={};if(_(t,this),(t=ge(t))._a){var e=t._isUTC?h(t._a):ye(t._a);this._isDSTShifted=this.isValid()&&E(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var Qe=Je;function tn(t){return t}var en=D.prototype;function nn(t,e,n,i){var r=re(),o=h().set(i,e);return r[n](o,t)}function rn(t,e,n){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return nn(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=nn(t,i,n,"month");return r}function on(t,e,n,i){"boolean"==typeof t?("number"==typeof e&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,"number"==typeof e&&(n=e,e=void 0),e=e||"");var r,o=re(),a=t?o._week.dow:0;if(null!=n)return nn(e,(n+a)%7,i,"day");var s=[];for(r=0;r<7;r++)s[r]=nn(e,(r+a)%7,i,"day");return s}en.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return I(i)?i.call(e,n):i},en.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])},en.invalidDate=function(){return this._invalidDate},en.ordinal=function(t){return this._ordinal.replace("%d",t)},en.preparse=tn,en.postformat=tn,en.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return I(r)?r(t,e,n,i):r.replace(/%d/i,t)},en.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return I(n)?n(e):n.replace(/%s/i,e)},en.set=function(t){var e,n;for(n in t)I(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},en.months=function(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||xt).test(e)?"format":"standalone"][t.month()]:this._months},en.monthsShort=function(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[xt.test(e)?"format":"standalone"][t.month()]:this._monthsShort},en.monthsParse=function(t,e,n){var i,r,o;if(this._monthsParseExact)return Mt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=h([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},en.monthsRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||It.call(this),t?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=Ct),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},en.monthsShortRegex=function(t){return this._monthsParseExact?(c(this,"_monthsRegex")||It.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=kt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},en.week=function(t){return Ot(t,this._week.dow,this._week.doy).week},en.firstDayOfYear=function(){return this._week.doy},en.firstDayOfWeek=function(){return this._week.dow},en.weekdays=function(t,e){return t?o(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:this._weekdays},en.weekdaysMin=function(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin},en.weekdaysShort=function(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort},en.weekdaysParse=function(t,e,n){var i,r,o;if(this._weekdaysParseExact)return jt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=h([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},en.weekdaysRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Vt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},en.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},en.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ht.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},en.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},en.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},ne("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===w(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=T("moment.lang is deprecated. Use moment.locale instead.",ne),r.langData=T("moment.langData is deprecated. Use moment.localeData instead.",re);var an=Math.abs;function sn(t,e,n,i){var r=Pe(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function ln(t){return t<0?Math.floor(t):Math.ceil(t)}function cn(t){return 4800*t/146097}function un(t){return 146097*t/4800}function hn(t){return function(){return this.as(t)}}var dn=hn("ms"),pn=hn("s"),fn=hn("m"),mn=hn("h"),gn=hn("d"),_n=hn("w"),yn=hn("M"),vn=hn("y");function bn(t){return function(){return this._data[t]}}var xn=bn("milliseconds"),wn=bn("seconds"),En=bn("minutes"),Mn=bn("hours"),Tn=bn("days"),Sn=bn("months"),kn=bn("years");var Cn=Math.round,In={s:45,m:45,h:22,d:26,M:11};function Ln(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}var Dn=Math.abs;function An(){var t,e,n=Dn(this._milliseconds)/1e3,i=Dn(this._days),r=Dn(this._months);t=x(n/60),e=x(t/60),n%=60,t%=60;var o=x(r/12),a=r%=12,s=i,l=e,c=t,u=n,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(s?s+"D":"")+(l||c||u?"T":"")+(l?l+"H":"")+(c?c+"M":"")+(u?u+"S":""):"P0D"}var Pn=we.prototype;return Pn.abs=function(){var t=this._data;return this._milliseconds=an(this._milliseconds),this._days=an(this._days),this._months=an(this._months),t.milliseconds=an(t.milliseconds),t.seconds=an(t.seconds),t.minutes=an(t.minutes),t.hours=an(t.hours),t.months=an(t.months),t.years=an(t.years),this},Pn.add=function(t,e){return sn(this,t,e,1)},Pn.subtract=function(t,e){return sn(this,t,e,-1)},Pn.as=function(t){var e,n,i=this._milliseconds;if("month"===(t=z(t))||"year"===t)return e=this._days+i/864e5,n=this._months+cn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(un(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},Pn.asMilliseconds=dn,Pn.asSeconds=pn,Pn.asMinutes=fn,Pn.asHours=mn,Pn.asDays=gn,Pn.asWeeks=_n,Pn.asMonths=yn,Pn.asYears=vn,Pn.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12)},Pn._bubble=function(){var t,e,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*ln(un(s)+a),a=0,s=0),l.milliseconds=o%1e3,t=x(o/1e3),l.seconds=t%60,e=x(t/60),l.minutes=e%60,n=x(e/60),l.hours=n%24,a+=x(n/24),s+=r=x(cn(a)),a-=ln(un(r)),i=x(s/12),s%=12,l.days=a,l.months=s,l.years=i,this},Pn.get=function(t){return this[(t=z(t))+"s"]()},Pn.milliseconds=xn,Pn.seconds=wn,Pn.minutes=En,Pn.hours=Mn,Pn.days=Tn,Pn.weeks=function(){return x(this.days()/7)},Pn.months=Sn,Pn.years=kn,Pn.humanize=function(t){var e=this.localeData(),n=function(t,e,n){var i=Pe(t).abs(),r=Cn(i.as("s")),o=Cn(i.as("m")),a=Cn(i.as("h")),s=Cn(i.as("d")),l=Cn(i.as("M")),c=Cn(i.as("y")),u=r<In.s&&["s",r]||o<=1&&["m"]||o<In.m&&["mm",o]||a<=1&&["h"]||a<In.h&&["hh",a]||s<=1&&["d"]||s<In.d&&["dd",s]||l<=1&&["M"]||l<In.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,Ln.apply(null,u)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},Pn.toISOString=An,Pn.toString=An,Pn.toJSON=An,Pn.locale=Ue,Pn.localeData=je,Pn.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",An),Pn.lang=Ye,H("X",0,0,"unix"),H("x",0,0,"valueOf"),dt("x",st),dt("X",/[+-]?\d+(\.\d{1,3})?/),gt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))})),gt("x",(function(t,e,n){n._d=new Date(w(t))})),r.version="2.15.1",e=ye,r.fn=Qe,r.min=function(){return xe("isBefore",[].slice.call(arguments,0))},r.max=function(){return xe("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=h,r.unix=function(t){return ye(1e3*t)},r.months=function(t,e){return rn(t,e,"months")},r.isDate=s,r.locale=ne,r.invalid=f,r.duration=Pe,r.isMoment=b,r.weekdays=function(t,e,n){return on(t,e,n,"weekdays")},r.parseZone=function(){return ye.apply(null,arguments).parseZone()},r.localeData=re,r.isDuration=Ee,r.monthsShort=function(t,e){return rn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return on(t,e,n,"weekdaysMin")},r.defineLocale=ie,r.updateLocale=function(t,e){if(null!=e){var n,i=Jt;null!=Qt[t]&&(i=Qt[t]._config),(n=new D(e=L(i,e))).parentLocale=Qt[t],Qt[t]=n,ne(t)}else null!=Qt[t]&&(null!=Qt[t].parentLocale?Qt[t]=Qt[t].parentLocale:null!=Qt[t]&&delete Qt[t]);return Qt[t]},r.locales=function(){return S(Qt)},r.weekdaysShort=function(t,e,n){return on(t,e,n,"weekdaysShort")},r.normalizeUnits=z,r.relativeTimeRounding=function(t){return void 0===t?Cn:"function"==typeof t&&(Cn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==In[t]&&(void 0===e?In[t]:(In[t]=e,!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=Qe,r}()},2077:function(t,e,n){var i,r;i=function(){var t,e,n,i,r={},o={},a={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0"},s={currentLocale:a.currentLocale,zeroFormat:a.zeroFormat,nullFormat:a.nullFormat,defaultFormat:a.defaultFormat};function l(t,e){this._input=t,this._value=e}return(t=function(n){var i,o,a,c;if(t.isNumeral(n))i=n.value();else if(0===n||void 0===n)i=0;else if(null===n||e.isNaN(n))i=null;else if("string"==typeof n)if(s.zeroFormat&&n===s.zeroFormat)i=0;else if(s.nullFormat&&n===s.nullFormat||!n.replace(/[^0-9]+/g,"").length)i=null;else{for(o in r)if((c="function"==typeof r[o].regexps.unformat?r[o].regexps.unformat():r[o].regexps.unformat)&&n.match(c)){a=r[o].unformat;break}i=(a=a||t._.stringToNumber)(n)}else i=Number(n)||null;return new l(n,i)}).version="2.0.4",t.isNumeral=function(t){return t instanceof l},t._=e={numberToFormat:function(e,n,i){var r,a,s,l,c,u,h,d=o[t.options.currentLocale],p=!1,f=!1,m="",g=1e12,_=1e9,y=1e6,v="",b=!1;if(e=e||0,a=Math.abs(e),t._.includes(n,"(")?(p=!0,n=n.replace(/[\(|\)]/g,"")):(t._.includes(n,"+")||t._.includes(n,"-"))&&(c=t._.includes(n,"+")?n.indexOf("+"):e<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),t._.includes(n,"a")&&(r=!!(r=n.match(/a(k|m|b|t)?/))&&r[1],t._.includes(n," a")&&(m=" "),n=n.replace(new RegExp(m+"a[kmbt]?"),""),a>=g&&!r||"t"===r?(m+=d.abbreviations.trillion,e/=g):a<g&&a>=_&&!r||"b"===r?(m+=d.abbreviations.billion,e/=_):a<_&&a>=y&&!r||"m"===r?(m+=d.abbreviations.million,e/=y):(a<y&&a>=1e3&&!r||"k"===r)&&(m+=d.abbreviations.thousand,e/=1e3)),t._.includes(n,"[.]")&&(f=!0,n=n.replace("[.]",".")),s=e.toString().split(".")[0],l=n.split(".")[1],u=n.indexOf(","),l?(t._.includes(l,"[")?(l=(l=l.replace("]","")).split("["),v=t._.toFixed(e,l[0].length+l[1].length,i,l[1].length)):v=t._.toFixed(e,l.length,i),s=v.split(".")[0],v=t._.includes(v,".")?d.delimiters.decimal+v.split(".")[1]:"",f&&0===Number(v.slice(1))&&(v="")):s=t._.toFixed(e,null,i),m&&!r&&Number(s)>=1e3&&m!==d.abbreviations.trillion)switch(s=String(Number(s)/1e3),m){case d.abbreviations.thousand:m=d.abbreviations.million;break;case d.abbreviations.million:m=d.abbreviations.billion;break;case d.abbreviations.billion:m=d.abbreviations.trillion}return t._.includes(s,"-")&&(s=s.slice(1),b=!0),u>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d.delimiters.thousands)),0===n.indexOf(".")&&(s=""),h=s+v+(m||""),p?h=(p&&b?"(":"")+h+(p&&b?")":""):c>=0?h=0===c?(b?"-":"+")+h:h+(b?"-":"+"):b&&(h="-"+h),h},stringToNumber:function(t){var e,n,i,r=o[s.currentLocale],a=t,l={thousand:3,million:6,billion:9,trillion:12};if(s.zeroFormat&&t===s.zeroFormat)n=0;else if(s.nullFormat&&t===s.nullFormat||!t.replace(/[^0-9]+/g,"").length)n=null;else{for(e in n=1,"."!==r.delimiters.decimal&&(t=t.replace(/\./g,"").replace(r.delimiters.decimal,".")),l)if(i=new RegExp("[^a-zA-Z]"+r.abbreviations[e]+"(?:\\)|(\\"+r.currency.symbol+")?(?:\\))?)?$"),a.match(i)){n*=Math.pow(10,l[e]);break}n*=(t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1,t=t.replace(/[^0-9\.]+/g,""),n*=Number(t)}return n},isNaN:function(t){return"number"==typeof t&&isNaN(t)},includes:function(t,e){return-1!==t.indexOf(e)},insert:function(t,e,n){return t.slice(0,n)+e+t.slice(n)},reduce:function(t,e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,i=Object(t),r=i.length>>>0,o=0;if(3===arguments.length)n=arguments[2];else{for(;o<r&&!(o in i);)o++;if(o>=r)throw new TypeError("Reduce of empty array with no initial value");n=i[o++]}for(;o<r;o++)o in i&&(n=e(n,i[o],o,i));return n},multiplier:function(t){var e=t.toString().split(".");return e.length<2?1:Math.pow(10,e[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce((function(t,n){var i=e.multiplier(n);return t>i?t:i}),1)},toFixed:function(t,e,n,i){var r,o,a,s,l=t.toString().split("."),c=e-(i||0);return r=2===l.length?Math.min(Math.max(l[1].length,c),e):c,s=(n(t*(a=Math.pow(10,r)))/a).toFixed(r),i>e-r&&(o=new RegExp("\\.?0{1,"+(i-(e-r))+"}$"),s=s.replace(o,"")),s}},t.options=s,t.formats=r,t.locales=o,t.locale=function(t){return t&&(s.currentLocale=t.toLowerCase()),s.currentLocale},t.localeData=function(t){if(!t)return o[s.currentLocale];if(t=t.toLowerCase(),!o[t])throw new Error("Unknown locale : "+t);return o[t]},t.reset=function(){for(var t in a)s[t]=a[t]},t.zeroFormat=function(t){s.zeroFormat="string"==typeof t?t:null},t.nullFormat=function(t){s.nullFormat="string"==typeof t?t:null},t.defaultFormat=function(t){s.defaultFormat="string"==typeof t?t:"0.0"},t.register=function(t,e,n){if(e=e.toLowerCase(),this[t+"s"][e])throw new TypeError(e+" "+t+" already registered.");return this[t+"s"][e]=n,n},t.validate=function(e,n){var i,r,o,a,s,l,c,u;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)),(e=e.trim()).match(/^\d+$/))return!0;if(""===e)return!1;try{c=t.localeData(n)}catch(e){c=t.localeData(t.locale())}return o=c.currency.symbol,s=c.abbreviations,i=c.delimiters.decimal,r="."===c.delimiters.thousands?"\\.":c.delimiters.thousands,!(null!==(u=e.match(/^[^\d]+/))&&(e=e.substr(1),u[0]!==o)||null!==(u=e.match(/[^\d]+$/))&&(e=e.slice(0,-1),u[0]!==s.thousand&&u[0]!==s.million&&u[0]!==s.billion&&u[0]!==s.trillion)||(l=new RegExp(r+"{2}"),e.match(/[^\d.,]/g)||(a=e.split(i)).length>2||(a.length<2?!a[0].match(/^\d+.*\d$/)||a[0].match(l):1===a[0].length?!a[0].match(/^\d+$/)||a[0].match(l)||!a[1].match(/^\d+$/):!a[0].match(/^\d+.*\d$/)||a[0].match(l)||!a[1].match(/^\d+$/))))},t.fn=l.prototype={clone:function(){return t(this)},format:function(e,n){var i,o,a,l=this._value,c=e||s.defaultFormat;if(n=n||Math.round,0===l&&null!==s.zeroFormat)o=s.zeroFormat;else if(null===l&&null!==s.nullFormat)o=s.nullFormat;else{for(i in r)if(c.match(r[i].regexps.format)){a=r[i].format;break}o=(a=a||t._.numberToFormat)(l,c,n)}return o},value:function(){return this._value},input:function(){return this._input},set:function(t){return this._value=Number(t),this},add:function(t){var n=e.correctionFactor.call(null,this._value,t);return this._value=e.reduce([this._value,t],(function(t,e,i,r){return t+Math.round(n*e)}),0)/n,this},subtract:function(t){var n=e.correctionFactor.call(null,this._value,t);return this._value=e.reduce([t],(function(t,e,i,r){return t-Math.round(n*e)}),Math.round(this._value*n))/n,this},multiply:function(t){return this._value=e.reduce([this._value,t],(function(t,n,i,r){var o=e.correctionFactor(t,n);return Math.round(t*o)*Math.round(n*o)/Math.round(o*o)}),1),this},divide:function(t){return this._value=e.reduce([this._value,t],(function(t,n,i,r){var o=e.correctionFactor(t,n);return Math.round(t*o)/Math.round(n*o)})),this},difference:function(e){return Math.abs(t(this._value).subtract(e).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$"}}),n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},i={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp("("+n.suffixes.concat(i.suffixes).join("|")+")")},format:function(e,r,o){var a,s,l,c=t._.includes(r,"ib")?i:n,u=t._.includes(r," b")||t._.includes(r," ib")?" ":"";for(r=r.replace(/\s?i?b/,""),a=0;a<=c.suffixes.length;a++)if(s=Math.pow(c.base,a),l=Math.pow(c.base,a+1),null===e||0===e||e>=s&&e<l){u+=c.suffixes[a],s>0&&(e/=s);break}return t._.numberToFormat(e,r,o)+u},unformat:function(e){var r,o,a=t._.stringToNumber(e);if(a){for(r=n.suffixes.length-1;r>=0;r--){if(t._.includes(e,n.suffixes[r])){o=Math.pow(n.base,r);break}if(t._.includes(e,i.suffixes[r])){o=Math.pow(i.base,r);break}}a*=o||1}return a}}),t.register("format","currency",{regexps:{format:/(\$)/},format:function(e,n,i){var r,o,a=t.locales[t.options.currentLocale],s={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),r=t._.numberToFormat(e,n,i),e>=0?(s.before=s.before.replace(/[\-\(]/,""),s.after=s.after.replace(/[\-\)]/,"")):e<0&&!t._.includes(s.before,"-")&&!t._.includes(s.before,"(")&&(s.before="-"+s.before),o=0;o<s.before.length;o++)switch(s.before[o]){case"$":r=t._.insert(r,a.currency.symbol,o);break;case" ":r=t._.insert(r," ",o)}for(o=s.after.length-1;o>=0;o--)switch(s.after[o]){case"$":r=o===s.after.length-1?r+a.currency.symbol:t._.insert(r,a.currency.symbol,-(s.after.length-(1+o)));break;case" ":r=o===s.after.length-1?r+" ":t._.insert(r," ",-(s.after.length-(1+o)))}return r}}),t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(e,n,i){var r=("number"!=typeof e||t._.isNaN(e)?"0e+0":e.toExponential()).split("e");return n=n.replace(/e[\+|\-]{1}0/,""),t._.numberToFormat(Number(r[0]),n,i)+"e"+r[1]},unformat:function(e){var n=t._.includes(e,"e+")?e.split("e+"):e.split("e-"),i=Number(n[0]),r=Number(n[1]);return r=t._.includes(e,"e-")?r*=-1:r,t._.reduce([i,Math.pow(10,r)],(function(e,n,i,r){var o=t._.correctionFactor(e,n);return e*o*(n*o)/(o*o)}),1)}}),t.register("format","ordinal",{regexps:{format:/(o)/},format:function(e,n,i){var r=t.locales[t.options.currentLocale],o=t._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),o+=r.ordinal(e),t._.numberToFormat(e,n,i)+o}}),t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(e,n,i){var r,o=t._.includes(n," %")?" ":"";return e*=100,n=n.replace(/\s?\%/,""),r=t._.numberToFormat(e,n,i),t._.includes(r,")")?((r=r.split("")).splice(-1,0,o+"%"),r=r.join("")):r=r+o+"%",r},unformat:function(e){return.01*t._.stringToNumber(e)}}),t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(t,e,n){var i=Math.floor(t/60/60),r=Math.floor((t-60*i*60)/60),o=Math.round(t-60*i*60-60*r);return i+":"+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)},unformat:function(t){var e=t.split(":"),n=0;return 3===e.length?(n+=60*Number(e[0])*60,n+=60*Number(e[1]),n+=Number(e[2])):2===e.length&&(n+=60*Number(e[0]),n+=Number(e[1])),Number(n)}}),t},void 0===(r=i.call(e,n,e,t))||(t.exports=r)},7418:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function r(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var a,s,l=r(t),c=1;c<arguments.length;c++){for(var u in a=Object(arguments[c]))n.call(a,u)&&(l[u]=a[u]);if(e){s=e(a);for(var h=0;h<s.length;h++)i.call(a,s[h])&&(l[s[h]]=a[s[h]])}}return l}},4244:t=>{"use strict";var e=function(t){return t!=t};t.exports=function(t,n){return 0===t&&0===n?1/t==1/n:t===n||!(!e(t)||!e(n))}},609:(t,e,n)=>{"use strict";var i=n(4289),r=n(5559),o=n(4244),a=n(5624),s=n(2281),l=r(a(),Object);i(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},5624:(t,e,n)=>{"use strict";var i=n(4244);t.exports=function(){return"function"==typeof Object.is?Object.is:i}},2281:(t,e,n)=>{"use strict";var i=n(5624),r=n(4289);t.exports=function(){var t=i();return r(Object,{is:t},{is:function(){return Object.is!==t}}),t}},8987:(t,e,n)=>{"use strict";var i;if(!Object.keys){var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(1414),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&r.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();i=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),i=a(t),s=e&&"[object String]"===o.call(t),d=[];if(!e&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var f=c&&n;if(s&&t.length>0&&!r.call(t,0))for(var m=0;m<t.length;++m)d.push(String(m));if(i&&t.length>0)for(var g=0;g<t.length;++g)d.push(String(g));else for(var _ in t)f&&"prototype"===_||!r.call(t,_)||d.push(String(_));if(l)for(var y=function(t){if("undefined"==typeof window||!p)return h(t);try{return h(t)}catch(t){return!1}}(t),v=0;v<u.length;++v)y&&"constructor"===u[v]||!r.call(t,u[v])||d.push(u[v]);return d}}t.exports=i},2215:(t,e,n)=>{"use strict";var i=Array.prototype.slice,r=n(1414),o=Object.keys,a=o?function(t){return o(t)}:n(8987),s=Object.keys;a.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return r(t)?s(i.call(t)):s(t)})}else Object.keys=a;return Object.keys||a},t.exports=a},1414:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),i="[object Arguments]"===n;return i||(i="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),i}},1895:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=(i-n)/2,l=0,c=s-1;l<s;c=l++){var u=e[n+2*l+0],h=e[n+2*l+1],d=e[n+2*c+0],p=e[n+2*c+1];h>o!=p>o&&r<(d-u)*(o-h)/(p-h)+u&&(a=!a)}return a}},6960:(t,e,n)=>{var i=n(1895),r=n(8139);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?r(t,e,n,o):i(t,e,n,o)},t.exports.nested=r,t.exports.flat=i},8139:t=>{t.exports=function(t,e,n,i){var r=t[0],o=t[1],a=!1;void 0===n&&(n=0),void 0===i&&(i=e.length);for(var s=i-n,l=0,c=s-1;l<s;c=l++){var u=e[l+n][0],h=e[l+n][1],d=e[c+n][0],p=e[c+n][1];h>o!=p>o&&r<(d-u)*(o-h)/(p-h)+u&&(a=!a)}return a}},2676:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}var i=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function r(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var r=new i(null,null),o=r,a=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,a.left=e.right,e.left=r.right,e.right=r.left,e}function a(t,e,n,r){var a=new i(t,e);if(null===n)return a.left=a.right=null,a;var s=r(t,(n=o(t,n,r)).key);return s<0?(a.left=n.left,a.right=n,n.left=null):s>=0&&(a.right=n.right,a.left=n,n.right=null),a}function s(t,e,n){var i=null,r=null;if(e){var a=n((e=o(t,e,n)).key,t);0===a?(i=e.left,r=e.right):a<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function l(t,e,n,i,r){if(t){i(e+(n?"└── ":"├── ")+r(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&l(t.left,o,!1,i,r),t.right&&l(t.right,o,!0,i,r)}}var c=function(){function t(t){void 0===t&&(t=r),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,a=o(t,this._root,r),s=r(t,a.key);return 0===s?this._root=a:(s<0?(n.left=a.left,n.right=a,a.left=null):s>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var i;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?i=e.right:(i=o(t,e.left,n)).right=e.right,this._size--,i):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return e;e=i<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var i=n(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,i=[],r=!1;!r;)null!==n?(i.push(n),n=n.left):0!==i.length?(n=i.pop(),t.call(e,n),n=n.right):r=!0;return this},t.prototype.range=function(t,e,n,i){for(var r=[],o=this._comparator,a=this._root;0!==r.length||a;)if(a)r.push(a),a=a.left;else{if(o((a=r.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(i,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,i=0,r=[];!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var i=this._comparator;e;){var r=i(t.key,e.key);if(0===r)break;r<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,o=new i(null,null),a=o;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=a=a.next=n.pop()).right:r=!0;return a.next=null,o.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,o=this._comparator;if(n&&d(t,e,0,r-1,o),null===this._root)this._root=u(t,e,0,r),this._size=r;else{var a=function(t,e,n){for(var r=new i(null,null),o=r,a=t,s=e;null!==a&&null!==s;)n(a.key,s.key)<0?(o.next=a,a=a.next):(o.next=s,s=s.next),o=o.next;return null!==a?o.next=a:null!==s&&(o.next=s),r.next}(this.toList(),function(t,e){for(var n=new i(null,null),r=n,o=0;o<t.length;o++)r=r.next=new i(t[o],e[o]);return r.next=null,n.next}(t,e),o);r=this._size+r,this._root=h({head:a},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return l(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var i=this._comparator,r=s(t,this._root,i),l=r.left,c=r.right;i(t,e)<0?c=a(e,n,c,i):l=a(e,n,l,i),this._root=function(t,e,n){return null===e?t:(null===t||((e=o(t.key,e,n)).left=t),e)}(l,c,i)},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}();function u(t,e,n,r){var o=r-n;if(o>0){var a=n+Math.floor(o/2),s=t[a],l=e[a],c=new i(s,l);return c.left=u(t,e,n,a),c.right=u(t,e,a+1,r),c}return null}function h(t,e,n){var i=n-e;if(i>0){var r=e+Math.floor(i/2),o=h(t,e,r),a=t.head;return a.left=o,t.head=t.head.next,a.right=h(t,r+1,n),a}return null}function d(t,e,n,i,r){if(!(n>=i)){for(var o=t[n+i>>1],a=n-1,s=i+1;;){do{a++}while(r(t[a],o)<0);do{s--}while(r(t[s],o)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}d(t,e,n,s,r),d(t,e,s+1,i,r)}}var p=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},f=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,i=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:i,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},m=Number.EPSILON;void 0===m&&(m=Math.pow(2,-52));var g=m*m,_=function(t,e){if(-m<t&&t<m&&-m<e&&e<m)return 0;var n=t-e;return n*n<g*t*e?0:t<e?-1:1},y=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new v,this.yRounder=new v}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),v=function(){function e(){t(this,e),this.tree=new c,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===_(e.key,n.key))return this.tree.remove(t),n.key;var i=this.tree.next(e);return null!==i&&0===_(e.key,i.key)?(this.tree.remove(t),i.key):t}}]),e}(),b=new y,x=function(t,e){return t.x*e.y-t.y*e.x},w=function(t,e){return t.x*e.x+t.y*e.y},E=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y},o=x(i,r);return _(o,0)},M=function(t){return Math.sqrt(w(t,t))},T=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return w(r,i)/M(r)/M(i)},S=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},k=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},C=function(){function e(n,i){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=i}return n(e,null,[{key:"compare",value:function(t,n){var i=e.comparePoints(t.point,n.point);return 0!==i?i:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:L.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,i=e.length;n<i;n++){var r=e[n];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var i=e+1;i<t;i++){var r=this.point.events[i];void 0===r.consumedBy&&n.otherSE.point.events===r.otherSE.point.events&&n.segment.consume(r.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var i=this.point.events[e];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,i=function(i){var r,o,a,s,l,c=i.otherSE;n.set(i,{sine:(r=e.point,o=t.point,a=c.point,s={x:o.x-r.x,y:o.y-r.y},l={x:a.x-r.x,y:a.y-r.y},x(l,s)/M(l)/M(s)),cosine:T(e.point,t.point,c.point)})};return function(t,e){n.has(t)||i(t),n.has(e)||i(e);var r=n.get(t),o=r.sine,a=r.cosine,s=n.get(e),l=s.sine,c=s.cosine;return o>=0&&l>=0?a<c?1:a>c?-1:0:o<0&&l<0?a<c?-1:a>c?1:0:l<o?-1:l>o?1:0}}}]),e}(),I=0,L=function(){function e(n,i,r,o){t(this,e),this.id=++I,this.leftSE=n,n.segment=this,n.otherSE=i,this.rightSE=i,i.segment=this,i.otherSE=n,this.rings=r,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,i=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(r<i)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,c=e.rightSE.point.y;if(n<i){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var u=t.comparePoint(e.leftSE.point);if(u<0)return 1;if(u>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>i){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var d=e.comparePoint(t.leftSE.point);if(0!==d)return d;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(r<o){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(r>o){var m=t.comparePoint(e.rightSE.point);if(m<0)return 1;if(m>0)return-1}if(r!==o){var g=l-a,_=r-n,y=c-s,v=o-i;if(g>_&&y<v)return 1;if(g<_&&y>v)return-1}return r>o?1:r<o||l<c?-1:l>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,i=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/i.y,o=e.x+r*i.x;if(t.x===o)return 0;var a=(t.x-e.x)/i.x,s=e.y+a*i.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),i=f(e,n);if(null===i)return null;var r=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=p(e,a)&&0===this.comparePoint(a),c=p(n,r)&&0===t.comparePoint(r),u=p(e,s)&&0===this.comparePoint(s),h=p(n,o)&&0===t.comparePoint(o);if(c&&l)return h&&!u?o:!h&&u?s:null;if(c)return u&&r.x===s.x&&r.y===s.y?null:r;if(l)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&u)return null;if(h)return o;if(u)return s;var d=function(t,e,n,i){if(0===e.x)return k(n,i,t.x);if(0===i.x)return k(t,e,n.x);if(0===e.y)return S(n,i,t.y);if(0===i.y)return S(t,e,n.y);var r=x(e,i);if(0==r)return null;var o={x:n.x-t.x,y:n.y-t.y},a=x(o,e)/r,s=x(o,i)/r;return{x:(t.x+s*e.x+(n.x+a*i.x))/2,y:(t.y+s*e.y+(n.y+a*i.y))/2}}(r,this.vector(),a,t.vector());return null===d?null:p(i,d)?b.round(d.x,d.y):null}},{key:"split",value:function(t){var n=[],i=void 0!==t.events,r=new C(t,!0),o=new C(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var s=new e(r,a,this.rings.slice(),this.windings.slice());return C.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),C.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,i=t;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=e.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var a=n;n=i,i=a}for(var s=0,l=i.rings.length;s<l;s++){var c=i.rings[s],u=i.windings[s],h=n.rings.indexOf(c);-1===h?(n.rings.push(c),n.windings.push(u)):n.windings[h]+=u}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,i=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var a=this.rings[r],s=this.windings[r],l=e.indexOf(a);-1===l?(e.push(a),n.push(s)):n[l]+=s}for(var c=[],u=[],h=0,d=e.length;h<d;h++)if(0!==n[h]){var p=e[h],f=p.poly;if(-1===u.indexOf(f))if(p.isExterior)c.push(f);else{-1===u.indexOf(f)&&u.push(f);var m=c.indexOf(p.poly);-1!==m&&c.splice(m,1)}}for(var g=0,_=c.length;g<_;g++){var y=c[g].multiPoly;-1===i.indexOf(y)&&i.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(U.type){case"union":var n=0===t.length,i=0===e.length;this._isInResult=n!==i;break;case"intersection":var r,o;t.length<e.length?(r=t.length,o=e.length):(r=e.length,o=t.length),this._isInResult=o===U.numMultiPolys&&r<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(U.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,i){var r,o,a,s=C.comparePoints(t,n);if(s<0)r=t,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));r=n,o=t,a=-1}return new e(new C(r,!0),new C(o,!1),[i],[a])}}]),e}(),D=function(){function e(n,i,r){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=i,this.isExterior=r,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=b.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,l=n.length;s<l;s++){if("number"!=typeof n[s][0]||"number"!=typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=b.round(n[s][0],n[s][1]);c.x===a.x&&c.y===a.y||(this.segments.push(L.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}o.x===a.x&&o.y===a.y||this.segments.push(L.fromRing(a,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var i=this.segments[e];t.push(i.leftSE),t.push(i.rightSE)}return t}}]),e}(),A=function(){function e(n,i){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new D(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=n.length;r<o;r++){var a=new D(n[r],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=i}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var i=this.interiorRings[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),e}(),P=function(){function e(n,i){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=n.length;r<o;r++){var a=new A(n[r],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=i}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var i=this.polys[e].getSweepEvents(),r=0,o=i.length;r<o;r++)t.push(i[r]);return t}}]),e}(),z=function(){function e(n){t(this,e),this.events=n;for(var i=0,r=n.length;i<r;i++)n[i].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],i=0,r=t.length;i<r;i++){var o=t[i];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,l=o.rightSE,c=[s],u=s.point,h=[];a=s,s=l,c.push(s),s.point!==u;)for(;;){var d=s.getAvailableLinkedEvents();if(0===d.length){var p=c[0].point,f=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===d.length){l=d[0].otherSE;break}for(var m=null,g=0,_=h.length;g<_;g++)if(h[g].point===s.point){m=g;break}if(null===m){h.push({index:c.length,point:s.point});var y=s.getLeftmostComparator(a);l=d.sort(y)[0].otherSE;break}var v=h.splice(m)[0],b=c.splice(v.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()))}n.push(new e(c))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,i=this.events.length-1;n<i;n++){var r=this.events[n].point,o=this.events[n+1].point;0!==E(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var a=e[0],s=e[1];0===E(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,u=this.isExteriorRing()?e.length:-1,h=[],d=c;d!=u;d+=l)h.push([e[d].x,e[d].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var i=this.events[e];C.compare(t,i)>0&&(t=i)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}}]),e}(),N=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var i=this.interiorRings[e].getGeom();null!==i&&t.push(i)}return t}}]),e}(),R=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var i=this.polys[e].getGeom();null!==i&&t.push(i)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];if(!r.poly)if(r.isExteriorRing())e.push(new N(r));else{var o=r.enclosingRing();o.poly||e.push(new N(o)),o.poly.addInterior(r)}}return e}}]),e}(),O=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.compare;t(this,e),this.queue=n,this.tree=new c(i),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var i=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!i)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=i,o=i,a=void 0,s=void 0;void 0===a;)null===(r=this.tree.prev(r))?a=null:void 0===r.key.consumedBy&&(a=r.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var l=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var u=this._splitSafely(a,c),h=0,d=u.length;h<d;h++)n.push(u[h])}var p=null;if(s){var f=s.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(p=f),!s.isAnEndpoint(f)))for(var m=this._splitSafely(s,f),g=0,_=m.length;g<_;g++)n.push(m[g])}if(null!==l||null!==p){var y;y=null===l?p:null===p||C.comparePoints(l,p)<=0?l:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var v=e.split(y),b=0,x=v.length;b<x;b++)n.push(v[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var w=a.getIntersection(s);if(null!==w){if(!a.isAnEndpoint(w))for(var E=this._splitSafely(a,w),M=0,T=E.length;M<T;M++)n.push(E[M]);if(!s.isAnEndpoint(w))for(var S=this._splitSafely(s,w),k=0,I=S.length;k<I;k++)n.push(S[k])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var i=t.split(e);return i.push(n),void 0===t.consumedBy&&this.tree.insert(t),i}}]),e}(),F="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,B="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,U=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){U.type=t,b.reset();for(var i=[new P(e,!0)],r=0,o=n.length;r<o;r++)i.push(new P(n[r],!1));if(U.numMultiPolys=i.length,"difference"===U.type)for(var a=i[0],s=1;s<i.length;)null!==f(i[s].bbox,a.bbox)?s++:i.splice(s,1);if("intersection"===U.type)for(var l=0,u=i.length;l<u;l++)for(var h=i[l],d=l+1,p=i.length;d<p;d++)if(null===f(h.bbox,i[d].bbox))return[];for(var m=new c(C.compare),g=0,_=i.length;g<_;g++)for(var y=i[g].getSweepEvents(),v=0,x=y.length;v<x;v++)if(m.insert(y[v]),m.size>F)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var w=new O(m),E=m.size,M=m.pop();M;){var T=M.key;if(m.size===E){var S=T.segment;throw new Error("Unable to pop() ".concat(T.isLeft?"left":"right"," SweepEvent ")+"[".concat(T.point.x,", ").concat(T.point.y,"] from segment #").concat(S.id," ")+"[".concat(S.leftSE.point.x,", ").concat(S.leftSE.point.y,"] -> ")+"[".concat(S.rightSE.point.x,", ").concat(S.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(m.size>F)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>B)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var k=w.process(T),I=0,L=k.length;I<L;I++){var D=k[I];void 0===D.consumedBy&&m.insert(D)}E=m.size,M=m.pop()}b.reset();var A=z.factory(w.segments);return new R(A).getGeom()}}]),e}());return{union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return U.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return U.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return U.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return U.run("difference",t,n)}}}()},3360:function(t,e,n){var i,r,o;o=this,i=[n(6486)],r=function(t){return function(t,e,i){var r=e&&e.postal,o=e&&e._;o&&o!==t&&(t=t.noConflict());var a={configuration:t.extend({},{DEFAULT_CHANNEL:"/",SYSTEM_CHANNEL:"postal",enableSystemMessages:!0,cacheKeyDelimiter:"|",autoCompactResolver:!1})},s=a.configuration,l=function(t,e){this.bus=e,this.channel=t||s.DEFAULT_CHANNEL};l.prototype.subscribe=function(){return this.bus.subscribe({channel:this.channel,topic:1===arguments.length?arguments[0].topic:arguments[0],callback:1===arguments.length?arguments[0].callback:arguments[1]})},l.prototype.publish=function(){var e,n={};if("string"==typeof arguments[0]?(n.topic=arguments[0],n.data=arguments[1],e=arguments[2]):(n=arguments[0],e=arguments[1]),"object"!=typeof n)throw new Error("The first argument to ChannelDefinition.publish should be either an envelope object or a string topic.");n.headers=t.extend(n.headers||{resolverNoCache:s.resolverNoCache}),n.channel=this.channel,this.bus.publish(n,e)};var c=function(t,e,n){if(3!==arguments.length)throw new Error("You must provide a channel, topic and callback when creating a SubscriptionDefinition instance.");if(0===e.length)throw new Error("Topics cannot be empty");this.channel=t,this.topic=e,this.callback=n,this.pipeline=[],this.cacheKeys=[],this._context=i},u=function(){var e;return function(n){var i=!1;return"string"==typeof n?(i=n===e,e=n):(i=t.isEqual(n,e),e=t.extend({},n)),!i}},h=function(){var e=[];return function(n){var i=!t.some(e,(function(e){return t.isEqual(n,e)}));return i&&e.push(n),i}};c.prototype={catch:function(t){var e=this.callback;return this.callback=function(){try{e.apply(this,arguments)}catch(e){t(e,arguments[0])}},this},defer:function(){return this.delay(0)},disposeAfter:function(e){if("number"!=typeof e||e<=0)throw new Error("The value provided to disposeAfter (maxCalls) must be a number greater than zero.");var n=t.after(e,this.unsubscribe.bind(this));return this.pipeline.push((function(t,e,i){i(t,e),n()})),this},distinct:function(){return this.constraint(new h)},distinctUntilChanged:function(){return this.constraint(new u)},invokeSubscriber:function(t,e){if(!this.inactive){var n=this,i=n.pipeline,r=i.length,o=n._context,a=-1,s=!1;return r?(i=i.concat([n.callback]),function t(e,l){(a+=1)<r?i[a].call(o,e,l,t):(n.callback.call(o,e,l),s=!0)}(t,e)):(n.callback.call(o,t,e),s=!0),s}},logError:function(){var t;return console&&(t=console.warn?console.warn:console.log,this.catch(t)),this},once:function(){return this.disposeAfter(1)},subscribe:function(t){return this.callback=t,this},unsubscribe:function(){this.inactive||a.unsubscribe(this)},constraint:function(t){if("function"!=typeof t)throw new Error("Predicate constraint must be a function");return this.pipeline.push((function(e,n,i){t.call(this,e,n)&&i(e,n)})),this},constraints:function(e){var n=this;return t.each(e,(function(t){n.constraint(t)})),n},context:function(t){return this._context=t,this},debounce:function(e,n){if("number"!=typeof e)throw new Error("Milliseconds must be a number");var i={};return 1==!!n&&(i.leading=!0,i.trailing=!1),this.pipeline.push(t.debounce((function(t,e,n){n(t,e)}),e,i)),this},delay:function(t){if("number"!=typeof t)throw new Error("Milliseconds must be a number");return this.pipeline.push((function(e,n,i){setTimeout((function(){i(e,n)}),t)})),this},throttle:function(e){if("number"!=typeof e)throw new Error("Milliseconds must be a number");return this.pipeline.push(t.throttle((function(t,e,n){n(t,e)}),e)),this}},s.resolver={cache:{},regex:{},enableCache:!0,compare:function(e,n,i){var r,o,a,l=n+s.cacheKeyDelimiter+e,c=this.cache[l],u=i||{},h=this.enableCache&&!u.resolverNoCache;return!0===c?c:-1===e.indexOf("#")&&-1===e.indexOf("*")?(c=n===e,h&&(this.cache[l]=c),c):((o=this.regex[e])||(r="^"+t.map(e.split("."),(function(t){var e="";return a&&(e="#"!==a?"\\.\\b":"\\b"),a=t,e+("#"===t?"[\\s\\S]*":"*"===t?"[^.]+":t)})).join("")+"$",o=this.regex[e]=new RegExp(r)),c=o.test(n),h&&(this.cache[l]=c),c)},reset:function(){this.cache={},this.regex={}},purge:function(e){var n=this,i=s.cacheKeyDelimiter;if(void 0===e)this.reset();else{var r=!0===e.compact?function(t,e){var r=e.split(i);0===a.getSubscribersFor({topic:r[0]}).length&&delete n.cache[e]}:function(t,r){var o=r.split(i),a=o[0],s=o[1];void 0!==e.topic&&e.topic!==a||void 0!==e.binding&&e.binding!==s||delete n.cache[r]};t.each(this.cache,r)}}};var d=0,p=[],f=0;function m(t,e,n){return function(i,r,o){i===t&&o.splice(r,1),0===o.length&&delete n[e]}}function g(t,e,n,i,r){var o=r&&r.headers||{};return function(r){s.resolver.compare(r.topic,t,o)&&(o.resolverNoCache||((e[n]=e[n]||[]).push(r),r.cacheKeys.push(n)),i&&i(r))}}function _(t,e){return{channel:s.SYSTEM_CHANNEL,topic:"subscription."+t,data:{event:"subscription."+t,channel:e.channel,topic:e.topic}}}var y=_.bind(i,"created"),v=_.bind(i,"removed");if(t.extend(a,{cache:{},subscriptions:{},wireTaps:[],ChannelDefinition:l,SubscriptionDefinition:c,channel:function(t){return new l(t,this)},addWireTap:function(t){var e=this;return e.wireTaps.push(t),function(){var n=e.wireTaps.indexOf(t);-1!==n&&e.wireTaps.splice(n,1)}},noConflict:function(){if("undefined"==typeof window||"undefined"!=typeof window&&n.amdO)throw new Error("noConflict can only be used in browser clients which aren't using AMD modules");return e.postal=r,this},getSubscribersFor:function(e){var n=[];return t.each(this.subscriptions,(function(i){t.each(i,(function(i){n=n.concat(t.filter(i,function(e,n){return"function"==typeof e?e:e?function(i){var r=0,o=0;return t.each(e,(function(t,a){r+=1,("topic"===a&&n.compare(i.topic,e.topic,{resolverNoCache:!0})||"context"===a&&e.context===i._context||i[a]===e[a])&&(o+=1)})),r===o}:function(){return!0}}(e,s.resolver)))}))})),n},publish:function(e,n){++d;var i=e.channel=e.channel||s.DEFAULT_CHANNEL,r=e.topic;e.timeStamp=new Date,this.wireTaps.length&&t.each(this.wireTaps,(function(t){t(e.data,e,d)}));var o=i+s.cacheKeyDelimiter+r,l=this.cache[o],c=0,u=0;if(l)t.each(l,(function(t){t.invokeSubscriber(e.data,e)?u++:c++}));else{var h=g(r,this.cache,o,(function(t){t.invokeSubscriber(e.data,e)?u++:c++}),e);t.each(this.subscriptions[i],(function(e){t.each(e,h)}))}0==--d&&function(){for(;p.length;)a.unsubscribe(p.shift())}(),n&&n({activated:u,skipped:c})},reset:function(){this.unsubscribeFor(),s.resolver.reset(),this.subscriptions={},this.cache={}},subscribe:function(e){var n,i=this.subscriptions,r=new c(e.channel||s.DEFAULT_CHANNEL,e.topic,e.callback),o=i[r.channel],a=r.channel.length;o||(o=i[r.channel]={}),(n=i[r.channel][r.topic])||(n=i[r.channel][r.topic]=[]),n.push(r);var l=this.cache;return t.each(t.keys(l),(function(t){t.substr(0,a)===r.channel&&g(t.split(s.cacheKeyDelimiter)[1],l,t)(r)})),s.enableSystemMessages&&this.publish(y(r)),r},unsubscribe:function(){for(var e,n,i,r,o=arguments.length,a=0;a<o;a++){if((e=arguments[a]).inactive=!0,d)return void p.push(e);if(i=(n=this.subscriptions[e.channel])&&n[e.topic]){var l=i.length;for(r=0;r<l;){if(i[r]===e){i.splice(r,1);break}r+=1}if(0===i.length&&(delete n[e.topic],t.keys(n).length||delete this.subscriptions[e.channel]),e.cacheKeys&&e.cacheKeys.length)for(var c;c=e.cacheKeys.pop();)t.each(this.cache[c],m(e,c,this.cache));if("function"==typeof s.resolver.purge){var u=!0===s.autoCompactResolver?0:"number"==typeof s.autoCompactResolver&&s.autoCompactResolver-1;u>=0&&f===u?(s.resolver.purge({compact:!0}),f=0):u>=0&&f<u&&(f+=1)}}s.enableSystemMessages&&this.publish(v(e))}},unsubscribeFor:function(t){var e=[];this.subscriptions&&(e=this.getSubscribersFor(t),this.unsubscribe.apply(this,e))}}),e&&Object.prototype.hasOwnProperty.call(e,"__postalReady__")&&t.isArray(e.__postalReady__))for(;e.__postalReady__.length;)e.__postalReady__.shift().onReady(a);return a}(t,o)}.apply(e,i),void 0===r||(t.exports=r)},2703:(t,e,n)=>{"use strict";var i=n(414);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},1581:(t,e,n)=>{t.exports=n(2703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2582:function(t){t.exports=function(){"use strict";function t(t,i,r,o,a){!function t(n,i,r,o,a){for(;o>r;){if(o-r>600){var s=o-r+1,l=i-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);t(n,i,Math.max(r,Math.floor(i-l*u/s+h)),Math.min(o,Math.floor(i+(s-l)*u/s+h)),a)}var d=n[i],p=r,f=o;for(e(n,r,i),a(n[o],d)>0&&e(n,r,o);p<f;){for(e(n,p,f),p++,f--;a(n[p],d)<0;)p++;for(;a(n[f],d)>0;)f--}0===a(n[r],d)?e(n,r,f):e(n,++f,o),f<=i&&(r=f+1),i<=f&&(o=f-1)}}(t,i,r||0,o||t.length-1,a||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,i,r){r||(r=f(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(r,t.leaf?i(a):a)}return r}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,n,i,r,o){for(var a=[n,i];a.length;)if(!((i=a.pop())-(n=a.pop())<=r)){var s=n+Math.ceil((i-n)/r/2)*r;t(e,s,n,i,o),a.push(n,s,s,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!p(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?i(a):a;p(t,s)&&(e.leaf?n.push(a):d(t,s)?this._all(a,n):r.push(a))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],o=e.leaf?this.toBBox(r):r;if(p(t,o)){if(e.leaf||d(t,o))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=f([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,o,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],n=c.pop(),o=!0),a.leaf){var u=r(t,a.children,e);if(-1!==u)return a.children.splice(u,1),l.push(a),this._condense(l),this}o||a.leaf||!d(a,s)?i?(n++,a=i.children[n],o=!1):a=null:(l.push(a),c.push(n),n=0,i=a,a=a.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,a=n-e+1,s=this._maxEntries;if(a<=s)return o(r=f(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),(r=f([])).leaf=!1,r.height=i;var l=Math.ceil(a/s),c=l*Math.ceil(Math.sqrt(s));m(t,e,n,c,this.compareMinX);for(var u=e;u<=n;u+=c){var h=Math.min(u+c-1,n);m(t,u,h,l,this.compareMinY);for(var d=u;d<=h;d+=l){var p=Math.min(d+l-1,h);r.children.push(this._build(t,d,p,i-1))}}return o(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var l=e.children[s],c=u(l),h=(d=t,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-c);h<o?(o=h,r=c<r?c:r,a=l):h===o&&c<r&&(r=c,a=l)}e=a||e.children[0]}var d,p;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],o=this._chooseSubtree(i,this.data,e,r);for(o.children.push(t),s(o,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var a=this._chooseSplitIndex(n,r,i),s=f(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},i.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,o,s,l,c,h,d=1/0,p=1/0,f=e;f<=n-e;f++){var m=a(t,0,f,this.toBBox),g=a(t,f,n,this.toBBox),_=(r=m,o=g,void 0,void 0,void 0,void 0,s=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),c=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,h-l)),y=u(m)+u(g);_<d?(d=_,i=f,p=y<p?y:p):_===d&&y<p&&(p=y,i=f)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,o=a(t,0,e,r),l=a(t,n-e,n,r),c=h(o)+h(l),u=e;u<n-e;u++){var d=t.children[u];s(o,t.leaf?r(d):d),c+=h(o)}for(var p=n-e-1;p>=e;p--){var f=t.children[p];s(l,t.leaf?r(f):f),c+=h(l)}return c},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)s(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},i}()},3935:(t,e,n)=>{"use strict";t.exports=n(8951)},1152:(t,e,n)=>{"use strict";t.exports=n(6257)},1570:(t,e)=>{e.w=function(t){return t}},456:function(t,e,n){t.exports=function(t,e,n){"use strict";var i={changeOptions:"add remove reset sort",updateScheduler:function(t){return n.debounce(t,0)}},r={changeOptions:"change",updateScheduler:n.identity},o=function(t,n,o){if(n){var a=e.BackboneMixin.ConsiderAsCollection(n)?i:r,s=a.updateScheduler((function(){t.isMounted()&&(t.onModelChange||t.forceUpdate).call(t)})),l=o||t.changeOptions||a.changeOptions;n.on(l,s,t)}},a=function(t,e){e&&e.off(null,null,t)};return e.BackboneMixin=function(t,e){var n,i;return"object"==typeof t?(e=t.renderOn,n=t.propName,i=t.modelOrCollection):n=t,i||(i=function(t){return t[n]}),{componentDidMount:function(){o(this,i(this.props),e)},componentWillReceiveProps:function(t){i(this.props)!==i(t)&&(a(this,i(this.props)),o(this,i(t),e),"function"==typeof this.componentWillChangeModel&&this.componentWillChangeModel())},componentDidUpdate:function(t,e){i(this.props)!==i(t)&&"function"==typeof this.componentDidChangeModel&&this.componentDidChangeModel()},componentWillUnmount:function(){a(this,i(this.props))}}},e.BackboneMixin.ConsiderAsCollection=function(e){return e instanceof t.Collection},e.BackboneViewMixin={getModel:function(){return this.props.model},model:function(){return this.getModel()},getCollection:function(){return this.props.collection},collection:function(){return this.getCollection()}},e.createBackboneClass=function(t){var n=t.mixins||[];return t.mixins=n.concat([e.BackboneMixin("model"),e.BackboneMixin("collection"),e.BackboneViewMixin]),e.createClass(t)},e}(n(2316),n(7588),n(1311))},686:(t,e,n)=>{"use strict";var i=n(3990),r=n(8387),o={focusDOMComponent:function(){r(i.getNodeFromInstance(this))}};t.exports=o},2289:(t,e,n)=>{"use strict";var i=n(5338),r=n(7614),o=n(6508),a=n(9160),s=n(4900),l=n(6259),c=n(5721),u=[9,13,27,32],h=o.canUseDOM&&"CompositionEvent"in window,d=null;o.canUseDOM&&"documentMode"in document&&(d=document.documentMode);var p,f=o.canUseDOM&&"TextEvent"in window&&!d&&!("object"==typeof(p=window.opera)&&"function"==typeof p.version&&parseInt(p.version(),10)<=12),m=o.canUseDOM&&(!h||d&&d>8&&d<=11),g=String.fromCharCode(32),_=i.topLevelTypes,y={beforeInput:{phasedRegistrationNames:{bubbled:c({onBeforeInput:null}),captured:c({onBeforeInputCapture:null})},dependencies:[_.topCompositionEnd,_.topKeyPress,_.topTextInput,_.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:c({onCompositionEnd:null}),captured:c({onCompositionEndCapture:null})},dependencies:[_.topBlur,_.topCompositionEnd,_.topKeyDown,_.topKeyPress,_.topKeyUp,_.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:c({onCompositionStart:null}),captured:c({onCompositionStartCapture:null})},dependencies:[_.topBlur,_.topCompositionStart,_.topKeyDown,_.topKeyPress,_.topKeyUp,_.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:c({onCompositionUpdate:null}),captured:c({onCompositionUpdateCapture:null})},dependencies:[_.topBlur,_.topCompositionUpdate,_.topKeyDown,_.topKeyPress,_.topKeyUp,_.topMouseDown]}},v=!1;function b(t,e){switch(t){case _.topKeyUp:return-1!==u.indexOf(e.keyCode);case _.topKeyDown:return 229!==e.keyCode;case _.topKeyPress:case _.topMouseDown:case _.topBlur:return!0;default:return!1}}function x(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}var w=null;function E(t,e,n,i){var o,l;if(h?o=function(t){switch(t){case _.topCompositionStart:return y.compositionStart;case _.topCompositionEnd:return y.compositionEnd;case _.topCompositionUpdate:return y.compositionUpdate}}(t):w?b(t,n)&&(o=y.compositionEnd):function(t,e){return t===_.topKeyDown&&229===e.keyCode}(t,n)&&(o=y.compositionStart),!o)return null;m&&(w||o!==y.compositionStart?o===y.compositionEnd&&w&&(l=w.getData()):w=a.getPooled(i));var c=s.getPooled(o,e,n,i);if(l)c.data=l;else{var u=x(n);null!==u&&(c.data=u)}return r.accumulateTwoPhaseDispatches(c),c}function M(t,e,n,i){var o;if(o=f?function(t,e){switch(t){case _.topCompositionEnd:return x(e);case _.topKeyPress:return 32!==e.which?null:(v=!0,g);case _.topTextInput:var n=e.data;return n===g&&v?null:n;default:return null}}(t,n):function(t,e){if(w){if(t===_.topCompositionEnd||b(t,e)){var n=w.getData();return a.release(w),w=null,n}return null}switch(t){case _.topPaste:return null;case _.topKeyPress:return e.which&&!function(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}(e)?String.fromCharCode(e.which):null;case _.topCompositionEnd:return m?null:e.data;default:return null}}(t,n),!o)return null;var s=l.getPooled(y.beforeInput,e,n,i);return s.data=o,r.accumulateTwoPhaseDispatches(s),s}var T={eventTypes:y,extractEvents:function(t,e,n,i){return[E(t,e,n,i),M(t,e,n,i)]}};t.exports=T},5373:t=>{"use strict";var e={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n=["Webkit","ms","Moz","O"];Object.keys(e).forEach((function(t){n.forEach((function(n){e[function(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}(n,t)]=e[t]}))}));var i={isUnitlessNumber:e,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}};t.exports=i},5786:(t,e,n)=>{"use strict";var i=n(5373),r=n(6508),o=(n(8744),n(250),n(571)),a=n(7100),s=n(1767),l=(n(3620),s((function(t){return a(t)}))),c=!1,u="cssFloat";if(r.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(t){c=!0}void 0===document.documentElement.style.cssFloat&&(u="styleFloat")}var d={createMarkupForStyles:function(t,e){var n="";for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];null!=r&&(n+=l(i)+":",n+=o(i,r,e)+";")}return n||null},setValueForStyles:function(t,e,n){var r=t.style;for(var a in e)if(e.hasOwnProperty(a)){var s=o(a,e[a],n);if("float"!==a&&"cssFloat"!==a||(a=u),s)r[a]=s;else{var l=c&&i.shorthandPropertyExpansions[a];if(l)for(var h in l)r[h]="";else r[a]=""}}}};t.exports=d},955:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(3303);function a(){this._callbacks=null,this._contexts=null}n(3759),r(a.prototype,{enqueue:function(t,e){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(e)},notifyAll:function(){var t=this._callbacks,e=this._contexts;if(t){t.length!==e.length&&i("24"),this._callbacks=null,this._contexts=null;for(var n=0;n<t.length;n++)t[n].call(e[n]);t.length=0,e.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(t){this._callbacks&&(this._callbacks.length=t,this._contexts.length=t)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),o.addPoolingTo(a),t.exports=a},2029:(t,e,n)=>{"use strict";var i=n(5338),r=n(7538),o=n(7614),a=n(6508),s=n(3990),l=n(8638),c=n(674),u=n(3749),h=n(1708),d=n(3980),p=n(5721),f=i.topLevelTypes,m={change:{phasedRegistrationNames:{bubbled:p({onChange:null}),captured:p({onChangeCapture:null})},dependencies:[f.topBlur,f.topChange,f.topClick,f.topFocus,f.topInput,f.topKeyDown,f.topKeyUp,f.topSelectionChange]}},g=null,_=null,y=null,v=null,b=!1;function x(t){var e=c.getPooled(m.change,_,t,u(t));o.accumulateTwoPhaseDispatches(e),l.batchedUpdates(w,e)}function w(t){r.enqueueEvents(t),r.processEventQueue(!1)}function E(){g&&(g.detachEvent("onchange",x),g=null,_=null)}function M(t,e){if(t===f.topChange)return e}function T(t,e,n){t===f.topFocus?(E(),function(t,e){_=e,(g=t).attachEvent("onchange",x)}(e,n)):t===f.topBlur&&E()}a.canUseDOM&&(b=h("change")&&(!("documentMode"in document)||document.documentMode>8));var S=!1;a.canUseDOM&&(S=h("input")&&(!("documentMode"in document)||document.documentMode>11));var k={get:function(){return v.get.call(this)},set:function(t){y=""+t,v.set.call(this,t)}};function C(){g&&(delete g.value,g.detachEvent?g.detachEvent("onpropertychange",I):g.removeEventListener("propertychange",I,!1),g=null,_=null,y=null,v=null)}function I(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==y&&(y=e,x(t))}}function L(t,e){if(t===f.topInput)return e}function D(t,e,n){t===f.topFocus?(C(),function(t,e){g=t,_=e,y=t.value,v=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(g,"value",k),g.attachEvent?g.attachEvent("onpropertychange",I):g.addEventListener("propertychange",I,!1)}(e,n)):t===f.topBlur&&C()}function A(t,e){if((t===f.topSelectionChange||t===f.topKeyUp||t===f.topKeyDown)&&g&&g.value!==y)return y=g.value,_}function P(t,e){if(t===f.topClick)return e}var z={eventTypes:m,extractEvents:function(t,e,n,i){var r,a,l,u,h=e?s.getNodeFromInstance(e):window;if("select"===(u=(l=h).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type?b?r=M:a=T:d(h)?S?r=L:(r=A,a=D):function(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}(h)&&(r=P),r){var p=r(t,e);if(p){var f=c.getPooled(m.change,p,n,i);return f.type="change",o.accumulateTwoPhaseDispatches(f),f}}a&&a(t,h,e)}};t.exports=z},5392:(t,e,n)=>{"use strict";var i=n(1051),r=n(3342),o=n(1873),a=(n(3990),n(8744),n(398)),s=n(2100),l=n(9712);function c(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}var u=a((function(t,e,n){t.insertBefore(e,n)}));function h(t,e,n){i.insertTreeBefore(t,e,n)}function d(t,e,n){Array.isArray(e)?function(t,e,n,i){for(var r=e;;){var o=r.nextSibling;if(u(t,r,i),r===n)break;r=o}}(t,e[0],e[1],n):u(t,e,n)}function p(t,e){if(Array.isArray(e)){var n=e[1];f(t,e=e[0],n),t.removeChild(n)}t.removeChild(e)}function f(t,e,n){for(;;){var i=e.nextSibling;if(i===n)break;t.removeChild(i)}}var m={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:function(t,e,n){var i=t.parentNode,r=t.nextSibling;r===e?n&&u(i,document.createTextNode(n),r):n?(l(r,n),f(i,r,e)):f(i,t,e)},processUpdates:function(t,e){for(var n=0;n<e.length;n++){var i=e[n];switch(i.type){case o.INSERT_MARKUP:h(t,i.content,c(t,i.afterNode));break;case o.MOVE_EXISTING:d(t,i.fromNode,c(t,i.afterNode));break;case o.SET_MARKUP:s(t,i.content);break;case o.TEXT_CONTENT:l(t,i.content);break;case o.REMOVE_NODE:p(t,i.fromNode)}}}};t.exports=m},1051:(t,e,n)=>{"use strict";var i=n(6722),r=n(2100),o=n(398),a=n(9712),s="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent);function l(t){if(s){var e=t.node,n=t.children;if(n.length)for(var i=0;i<n.length;i++)c(e,n[i],null);else null!=t.html?r(e,t.html):null!=t.text&&a(e,t.text)}}var c=o((function(t,e,n){11===e.node.nodeType||1===e.node.nodeType&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===i.html)?(l(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),l(e))}));function u(){return this.node.nodeName}function h(t){return{node:t,children:[],html:null,text:null,toString:u}}h.insertTreeBefore=c,h.replaceChildWithTree=function(t,e){t.parentNode.replaceChild(e.node,t),l(e)},h.queueChild=function(t,e){s?t.children.push(e):t.node.appendChild(e.node)},h.queueHTML=function(t,e){s?t.html=e:r(t.node,e)},h.queueText=function(t,e){s?t.text=e:a(t.node,e)},t.exports=h},6722:t=>{"use strict";t.exports={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"}},6937:(t,e,n)=>{"use strict";var i=n(2317);function r(t,e){return(t&e)===e}n(3759);var o={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=o,n=t.Properties||{},a=t.DOMAttributeNamespaces||{},l=t.DOMAttributeNames||{},c=t.DOMPropertyNames||{},u=t.DOMMutationMethods||{};for(var h in t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute),n){s.properties.hasOwnProperty(h)&&i("48",h);var d=h.toLowerCase(),p=n[h],f={attributeName:d,attributeNamespace:null,propertyName:h,mutationMethod:null,mustUseProperty:r(p,e.MUST_USE_PROPERTY),hasBooleanValue:r(p,e.HAS_BOOLEAN_VALUE),hasNumericValue:r(p,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(p,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(p,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(f.hasBooleanValue+f.hasNumericValue+f.hasOverloadedBooleanValue<=1||i("50",h),l.hasOwnProperty(h)){var m=l[h];f.attributeName=m}a.hasOwnProperty(h)&&(f.attributeNamespace=a[h]),c.hasOwnProperty(h)&&(f.propertyName=c[h]),u.hasOwnProperty(h)&&(f.mutationMethod=u[h]),s.properties[h]=f}}},a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++)if((0,s._isCustomAttributeFunctions[e])(t))return!0;return!1},injection:o};t.exports=s},8376:(t,e,n)=>{"use strict";var i=n(6937),r=(n(3990),n(8744),n(5431)),o=(n(3620),new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$")),a={},s={};function l(t){return!!s.hasOwnProperty(t)||!a.hasOwnProperty(t)&&(o.test(t)?(s[t]=!0,!0):(a[t]=!0,!1))}function c(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&!1===e}var u={createMarkupForID:function(t){return i.ID_ATTRIBUTE_NAME+"="+r(t)},setAttributeForID:function(t,e){t.setAttribute(i.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(n){if(c(n,e))return"";var o=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===e?o+'=""':o+"="+r(e)}return i.isCustomAttribute(t)?null==e?"":t+"="+r(e):null},createMarkupForCustomAttribute:function(t,e){return l(t)&&null!=e?t+"="+r(e):""},setValueForProperty:function(t,e,n){var r=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(r){var o=r.mutationMethod;if(o)o(t,n);else{if(c(r,n))return void this.deleteValueForProperty(t,e);if(r.mustUseProperty)t[r.propertyName]=n;else{var a=r.attributeName,s=r.attributeNamespace;s?t.setAttributeNS(s,a,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?t.setAttribute(a,""):t.setAttribute(a,""+n)}}}else if(i.isCustomAttribute(e))return void u.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){l(e)&&(null==n?t.removeAttribute(e):t.setAttribute(e,""+n))},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){var r=n.mutationMethod;if(r)r(t,void 0);else if(n.mustUseProperty){var o=n.propertyName;n.hasBooleanValue?t[o]=!1:t[o]=""}else t.removeAttribute(n.attributeName)}else i.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=u},3342:(t,e,n)=>{"use strict";var i=n(2317),r=n(1051),o=n(6508),a=n(188),s=n(139),l=(n(3759),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(o.canUseDOM||i("56"),e||i("57"),"HTML"===t.nodeName&&i("58"),"string"==typeof e){var n=a(e,s)[0];t.parentNode.replaceChild(n,t)}else r.replaceChildWithTree(t,e)}});t.exports=l},8084:(t,e,n)=>{"use strict";var i=n(5721),r=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({BeforeInputEventPlugin:null})];t.exports=r},1790:t=>{"use strict";var e={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},n={getHostProps:function(t,n){if(!n.disabled)return n;var i={};for(var r in n)!e[r]&&n.hasOwnProperty(r)&&(i[r]=n[r]);return i}};t.exports=n},5267:(t,e,n)=>{"use strict";var i=n(5338),r=n(7614),o=n(3990),a=n(3590),s=n(5721),l=i.topLevelTypes,c={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},u={eventTypes:c,extractEvents:function(t,e,n,i){if(t===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(t!==l.topMouseOut&&t!==l.topMouseOver)return null;var s,u,h;if(i.window===i)s=i;else{var d=i.ownerDocument;s=d?d.defaultView||d.parentWindow:window}if(t===l.topMouseOut){u=e;var p=n.relatedTarget||n.toElement;h=p?o.getClosestInstanceFromNode(p):null}else u=null,h=e;if(u===h)return null;var f=null==u?s:o.getNodeFromInstance(u),m=null==h?s:o.getNodeFromInstance(h),g=a.getPooled(c.mouseLeave,u,n,i);g.type="mouseleave",g.target=f,g.relatedTarget=m;var _=a.getPooled(c.mouseEnter,h,n,i);return _.type="mouseenter",_.target=m,_.relatedTarget=f,r.accumulateEnterLeaveDispatches(g,_,u,h),[g,_]}};t.exports=u},5338:(t,e,n)=>{"use strict";var i=n(8918),r=i({bubbled:null,captured:null}),o={topLevelTypes:i({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),PropagationPhases:r};t.exports=o},7538:(t,e,n)=>{"use strict";var i=n(2317),r=n(1831),o=n(3904),a=n(5429),s=n(1317),l=n(6810),c=(n(3759),{}),u=null,h=function(t,e){t&&(o.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},d=function(t){return h(t,!0)},p=function(t){return h(t,!1)},f=function(t){return"."+t._rootNodeID},m={injection:{injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},putListener:function(t,e,n){"function"!=typeof n&&i("94",e,typeof n);var o=f(t);(c[e]||(c[e]={}))[o]=n;var a=r.registrationNameModules[e];a&&a.didPutListener&&a.didPutListener(t,e,n)},getListener:function(t,e){var n=c[e],i=f(t);return n&&n[i]},deleteListener:function(t,e){var n=r.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var i=c[e];i&&delete i[f(t)]},deleteAllListeners:function(t){var e=f(t);for(var n in c)if(c.hasOwnProperty(n)&&c[n][e]){var i=r.registrationNameModules[n];i&&i.willDeleteListener&&i.willDeleteListener(t,n),delete c[n][e]}},extractEvents:function(t,e,n,i){for(var o,a=r.plugins,l=0;l<a.length;l++){var c=a[l];if(c){var u=c.extractEvents(t,e,n,i);u&&(o=s(o,u))}}return o},enqueueEvents:function(t){t&&(u=s(u,t))},processEventQueue:function(t){var e=u;u=null,l(e,t?d:p),u&&i("95"),a.rethrowCaughtError()},__purge:function(){c={}},__getListenerBank:function(){return c}};t.exports=m},1831:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),null),o={};function a(){if(r)for(var t in o){var e=o[t],n=r.indexOf(t);if(n>-1||i("96",t),!c.plugins[n]){e.extractEvents||i("97",t),c.plugins[n]=e;var a=e.eventTypes;for(var l in a)s(a[l],e,l)||i("98",l,t)}}}function s(t,e,n){c.eventNameDispatchConfigs.hasOwnProperty(n)&&i("99",n),c.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var o in r)r.hasOwnProperty(o)&&l(r[o],e,n);return!0}return!!t.registrationName&&(l(t.registrationName,e,n),!0)}function l(t,e,n){c.registrationNameModules[t]&&i("100",t),c.registrationNameModules[t]=e,c.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){r&&i("101"),r=Array.prototype.slice.call(t),a()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];o.hasOwnProperty(n)&&o[n]===r||(o[n]&&i("102",n),o[n]=r,e=!0)}e&&a()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return c.registrationNameModules[e.registrationName]||null;for(var n in e.phasedRegistrationNames)if(e.phasedRegistrationNames.hasOwnProperty(n)){var i=c.registrationNameModules[e.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){for(var t in r=null,o)o.hasOwnProperty(t)&&delete o[t];c.plugins.length=0;var e=c.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var i=c.registrationNameModules;for(var a in i)i.hasOwnProperty(a)&&delete i[a]}};t.exports=c},3904:(t,e,n)=>{"use strict";var i,r,o=n(2317),a=n(5338),s=n(5429),l=(n(3759),n(3620),{injectComponentTree:function(t){i=t},injectTreeTraversal:function(t){r=t}}),c=a.topLevelTypes;function u(t,e,n,i){var r=t.type||"unknown-event";t.currentTarget=h.getNodeFromInstance(i),e?s.invokeGuardedCallbackWithCatch(r,n,t):s.invokeGuardedCallback(r,n,t),t.currentTarget=null}var h={isEndish:function(t){return t===c.topMouseUp||t===c.topTouchEnd||t===c.topTouchCancel},isMoveish:function(t){return t===c.topMouseMove||t===c.topTouchMove},isStartish:function(t){return t===c.topMouseDown||t===c.topTouchStart},executeDirectDispatch:function(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)&&o("103"),t.currentTarget=e?h.getNodeFromInstance(n):null;var i=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,i},executeDispatchesInOrder:function(t,e){var n=t._dispatchListeners,i=t._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!t.isPropagationStopped();r++)u(t,e,n[r],i[r]);else n&&u(t,e,n,i);t._dispatchListeners=null,t._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(t){var e=function(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var i=0;i<e.length&&!t.isPropagationStopped();i++)if(e[i](t,n[i]))return n[i]}else if(e&&e(t,n))return n;return null}(t);return t._dispatchInstances=null,t._dispatchListeners=null,e},hasDispatches:function(t){return!!t._dispatchListeners},getInstanceFromNode:function(t){return i.getInstanceFromNode(t)},getNodeFromInstance:function(t){return i.getNodeFromInstance(t)},isAncestor:function(t,e){return r.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return r.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return r.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return r.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,i,o){return r.traverseEnterLeave(t,e,n,i,o)},injection:l};t.exports=h},7614:(t,e,n)=>{"use strict";var i=n(5338),r=n(7538),o=n(3904),a=n(1317),s=n(6810),l=(n(3620),i.PropagationPhases),c=r.getListener;function u(t,e,n){var i=function(t,e,n){var i=e.dispatchConfig.phasedRegistrationNames[n];return c(t,i)}(t,n,e?l.bubbled:l.captured);i&&(n._dispatchListeners=a(n._dispatchListeners,i),n._dispatchInstances=a(n._dispatchInstances,t))}function h(t){t&&t.dispatchConfig.phasedRegistrationNames&&o.traverseTwoPhase(t._targetInst,u,t)}function d(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?o.getParentInstance(e):null;o.traverseTwoPhase(n,u,t)}}function p(t,e,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=c(t,i);r&&(n._dispatchListeners=a(n._dispatchListeners,r),n._dispatchInstances=a(n._dispatchInstances,t))}}function f(t){t&&t.dispatchConfig.registrationName&&p(t._targetInst,0,t)}var m={accumulateTwoPhaseDispatches:function(t){s(t,h)},accumulateTwoPhaseDispatchesSkipTarget:function(t){s(t,d)},accumulateDirectDispatches:function(t){s(t,f)},accumulateEnterLeaveDispatches:function(t,e,n,i){o.traverseEnterLeave(n,i,p,t,e)}};t.exports=m},9160:(t,e,n)=>{"use strict";var i=n(7418),r=n(3303),o=n(2706);function a(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}i(a.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,i=n.length,r=this.getText(),o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=r.slice(t,s),this._fallbackText}}),r.addPoolingTo(a),t.exports=a},8926:(t,e,n)=>{"use strict";var i=n(6937),r=i.injection.MUST_USE_PROPERTY,o=i.injection.HAS_BOOLEAN_VALUE,a=i.injection.HAS_NUMERIC_VALUE,s=i.injection.HAS_POSITIVE_NUMERIC_VALUE,l=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE,c={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+i.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:r|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:r|o,muted:r|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:r|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=c},6037:t=>{"use strict";t.exports={escape:function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))},unescape:function(t){var e={"=0":"=","=2":":"};return(""+("."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1))).replace(/(=0|=2)/g,(function(t){return e[t]}))}}},3240:(t,e,n)=>{"use strict";var i=n(2317),r=n(5339),o=n(9321),a=n(1399),s=(n(3759),n(3620),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0});function l(t){null!=t.checkedLink&&null!=t.valueLink&&i("87")}function c(t){l(t),(null!=t.value||null!=t.onChange)&&i("88")}function u(t){l(t),(null!=t.checked||null!=t.onChange)&&i("89")}var h={value:function(t,e,n){return!t[e]||s[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:r.func},d={};function p(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var f={checkPropTypes:function(t,e,n){for(var i in h){if(h.hasOwnProperty(i))var r=h[i](e,i,t,o.prop,null,a);r instanceof Error&&!(r.message in d)&&(d[r.message]=!0,p(n))}},getValue:function(t){return t.valueLink?(c(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(u(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(c(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(u(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=f},3303:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),o=function(t){var e=this;t instanceof e||i("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},a=r,s={addPoolingTo:function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||a,n.poolSize||(n.poolSize=10),n.release=o,n},oneArgumentPooler:r,twoArgumentPooler:function(t,e){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,t,e),i}return new n(t,e)},threeArgumentPooler:function(t,e,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,t,e,n),r}return new i(t,e,n)},fourArgumentPooler:function(t,e,n,i){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,t,e,n,i),o}return new r(t,e,n,i)},fiveArgumentPooler:function(t,e,n,i,r){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,t,e,n,i,r),a}return new o(t,e,n,i,r)}};t.exports=s},8954:(t,e,n)=>{"use strict";var i=n(7418),r=n(7196),o=n(6047),a=n(9637),s=n(8540),l=n(8861),c=n(1506),u=n(5339),h=n(7268),d=n(661),p=(n(3620),c.createElement),f=c.createFactory,m=c.cloneElement,g=i,_={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:d},Component:o,PureComponent:a,createElement:p,cloneElement:m,isValidElement:c.isValidElement,PropTypes:u,createClass:s.createClass,createFactory:f,createMixin:function(t){return t},DOM:l,version:h,__spread:g};t.exports=_},2134:(t,e,n)=>{"use strict";var i,r=n(7418),o=n(5338),a=n(1831),s=n(2666),l=n(7987),c=n(3705),u=n(1708),h={},d=!1,p=0,f={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),g=r({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=t}},setEnabled:function(t){g.ReactEventListener&&g.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,i=function(t){return Object.prototype.hasOwnProperty.call(t,m)||(t[m]=p++,h[t[m]]={}),h[t[m]]}(n),r=a.registrationNameDependencies[t],s=o.topLevelTypes,l=0;l<r.length;l++){var c=r[l];i.hasOwnProperty(c)&&i[c]||(c===s.topWheel?u("wheel")?g.ReactEventListener.trapBubbledEvent(s.topWheel,"wheel",n):u("mousewheel")?g.ReactEventListener.trapBubbledEvent(s.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(s.topWheel,"DOMMouseScroll",n):c===s.topScroll?u("scroll",!0)?g.ReactEventListener.trapCapturedEvent(s.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(s.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):c===s.topFocus||c===s.topBlur?(u("focus",!0)?(g.ReactEventListener.trapCapturedEvent(s.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(s.topBlur,"blur",n)):u("focusin")&&(g.ReactEventListener.trapBubbledEvent(s.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(s.topBlur,"focusout",n)),i[s.topBlur]=!0,i[s.topFocus]=!0):f.hasOwnProperty(c)&&g.ReactEventListener.trapBubbledEvent(c,f[c],n),i[c]=!0)}},trapBubbledEvent:function(t,e,n){return g.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return g.ReactEventListener.trapCapturedEvent(t,e,n)},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=document.createEvent&&"pageX"in document.createEvent("MouseEvent")),!i&&!d){var t=l.refreshScrollValues;g.ReactEventListener.monitorScrollValue(t),d=!0}}});t.exports=g},5169:(t,e,n)=>{"use strict";var i=n(974),r=n(4301),o=(n(6037),n(588)),a=n(9898);function s(t,e,n,i){var o=void 0===t[n];null!=e&&o&&(t[n]=r(e,!0))}n(3620),"undefined"!=typeof process&&process.env;var l={instantiateChildren:function(t,e,n,i){if(null==t)return null;var r={};return a(t,s,r),r},updateChildren:function(t,e,n,a,s,l,c,u,h){if(e||t){var d,p;for(d in e)if(e.hasOwnProperty(d)){var f=(p=t&&t[d])&&p._currentElement,m=e[d];if(null!=p&&o(f,m))i.receiveComponent(p,m,s,u),e[d]=p;else{p&&(a[d]=i.getHostNode(p),i.unmountComponent(p,!1));var g=r(m,!0);e[d]=g;var _=i.mountComponent(g,s,l,c,u,h);n.push(_)}}for(d in t)!t.hasOwnProperty(d)||e&&e.hasOwnProperty(d)||(p=t[d],a[d]=i.getHostNode(p),i.unmountComponent(p,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];i.unmountComponent(r,e)}}};t.exports=l},7196:(t,e,n)=>{"use strict";var i=n(3303),r=n(1506),o=n(139),a=n(9898),s=i.twoArgumentPooler,l=i.fourArgumentPooler,c=/\/+/g;function u(t){return(""+t).replace(c,"$&/")}function h(t,e){this.func=t,this.context=e,this.count=0}function d(t,e,n){var i=t.func,r=t.context;i.call(r,e,t.count++)}function p(t,e,n,i){this.result=t,this.keyPrefix=e,this.func=n,this.context=i,this.count=0}function f(t,e,n){var i=t.result,a=t.keyPrefix,s=t.func,l=t.context,c=s.call(l,e,t.count++);Array.isArray(c)?m(c,i,n,o.thatReturnsArgument):null!=c&&(r.isValidElement(c)&&(c=r.cloneAndReplaceKey(c,a+(!c.key||e&&e.key===c.key?"":u(c.key)+"/")+n)),i.push(c))}function m(t,e,n,i,r){var o="";null!=n&&(o=u(n)+"/");var s=p.getPooled(e,o,i,r);a(t,f,s),p.release(s)}function g(t,e,n){return null}h.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},i.addPoolingTo(h,s),p.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},i.addPoolingTo(p,l);var _={forEach:function(t,e,n){if(null==t)return t;var i=h.getPooled(e,n);a(t,d,i),h.release(i)},map:function(t,e,n){if(null==t)return t;var i=[];return m(t,i,null,e,n),i},mapIntoWithKeyPrefixInternal:m,count:function(t,e){return a(t,g,null)},toArray:function(t){var e=[];return m(t,e,null,o.thatReturnsArgument),e}};t.exports=_},8540:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(6047),a=n(1506),s=(n(9321),n(727),n(3662)),l=n(3677),c=(n(3759),n(8918)),u=n(5721),h=(n(3620),u({mixins:null})),d=c({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),p=[],f={mixins:d.DEFINE_MANY,statics:d.DEFINE_MANY,propTypes:d.DEFINE_MANY,contextTypes:d.DEFINE_MANY,childContextTypes:d.DEFINE_MANY,getDefaultProps:d.DEFINE_MANY_MERGED,getInitialState:d.DEFINE_MANY_MERGED,getChildContext:d.DEFINE_MANY_MERGED,render:d.DEFINE_ONCE,componentWillMount:d.DEFINE_MANY,componentDidMount:d.DEFINE_MANY,componentWillReceiveProps:d.DEFINE_MANY,shouldComponentUpdate:d.DEFINE_ONCE,componentWillUpdate:d.DEFINE_MANY,componentDidUpdate:d.DEFINE_MANY,componentWillUnmount:d.DEFINE_MANY,updateComponent:d.OVERRIDE_BASE},m={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)_(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=r({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=r({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=v(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=r({},t.propTypes,e)},statics:function(t,e){!function(t,e){if(e)for(var n in e){var r=e[n];e.hasOwnProperty(n)&&(n in m&&i("78",n),n in t&&i("79",n),t[n]=r)}}(t,e)},autobind:function(){}};function g(t,e){var n=f.hasOwnProperty(e)?f[e]:null;w.hasOwnProperty(e)&&n!==d.OVERRIDE_BASE&&i("73",e),t&&n!==d.DEFINE_MANY&&n!==d.DEFINE_MANY_MERGED&&i("74",e)}function _(t,e){if(e){"function"==typeof e&&i("75"),a.isValidElement(e)&&i("76");var n=t.prototype,r=n.__reactAutoBindPairs;for(var o in e.hasOwnProperty(h)&&m.mixins(t,e.mixins),e)if(e.hasOwnProperty(o)&&o!==h){var s=e[o],l=n.hasOwnProperty(o);if(g(l,o),m.hasOwnProperty(o))m[o](t,s);else{var c=f.hasOwnProperty(o);if("function"!=typeof s||c||l||!1===e.autobind)if(l){var u=f[o];(!c||u!==d.DEFINE_MANY_MERGED&&u!==d.DEFINE_MANY)&&i("77",u,o),u===d.DEFINE_MANY_MERGED?n[o]=v(n[o],s):u===d.DEFINE_MANY&&(n[o]=b(n[o],s))}else n[o]=s;else r.push(o,s),n[o]=s}}}}function y(t,e){for(var n in t&&e&&"object"==typeof t&&"object"==typeof e||i("80"),e)e.hasOwnProperty(n)&&(void 0!==t[n]&&i("81",n),t[n]=e[n]);return t}function v(t,e){return function(){var n=t.apply(this,arguments),i=e.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return y(r,n),y(r,i),r}}function b(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function x(t,e){return e.bind(t)}var w={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},E=function(){};r(E.prototype,o.prototype,w);var M={createClass:function(t){var e=function(t,n,r){this.__reactAutoBindPairs.length&&function(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var i=e[n],r=e[n+1];t[i]=x(t,r)}}(this),this.props=t,this.context=n,this.refs=l,this.updater=r||s,this.state=null;var o=this.getInitialState?this.getInitialState():null;("object"!=typeof o||Array.isArray(o))&&i("82",e.displayName||"ReactCompositeComponent"),this.state=o};for(var n in e.prototype=new E,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],p.forEach(_.bind(null,e)),_(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),e.prototype.render||i("83"),f)e.prototype[n]||(e.prototype[n]=null);return e},injection:{injectMixin:function(t){p.push(t)}}};t.exports=M},6047:(t,e,n)=>{"use strict";var i=n(2317),r=n(3662),o=(n(3545),n(3677));function a(t,e,n){this.props=t,this.context=e,this.refs=o,this.updater=n||r}n(3759),n(3620),a.prototype.isReactComponent={},a.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&i("85"),this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")},t.exports=a},6299:(t,e,n)=>{"use strict";var i=n(5392),r={processChildrenUpdates:n(63).dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup};t.exports=r},5782:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){r&&i("104"),o.replaceNodeWithMarkup=t.replaceNodeWithMarkup,o.processChildrenUpdates=t.processChildrenUpdates,r=!0}}};t.exports=o},2795:(t,e,n)=>{"use strict";var i=n(2317),r=n(4066);function o(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,i=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var r=e.call(t);return i.test(r)}catch(t){return!1}}n(3759),n(3620);var a,s,l,c,u="function"==typeof Array.from&&"function"==typeof Map&&o(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&o(Map.prototype.keys)&&"function"==typeof Set&&o(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&o(Set.prototype.keys);u?(a=new Map,s=new Set):(l={},c={});var h=[];function d(t){return"."+t}function p(t){return parseInt(t.substr(1),10)}function f(t){if(u)return a.get(t);var e=d(t);return l[e]}function m(t){var e=f(t);if(e){var n=e.childIDs;!function(t){if(u)a.delete(t);else{var e=d(t);delete l[e]}}(t),n.forEach(m)}}function g(t,e,n){return"\n    in "+t+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function _(t){var e,n=y.getDisplayName(t),i=y.getElement(t),r=y.getOwnerID(t);return r&&(e=y.getDisplayName(r)),g(n,i&&i._source,e)}var y={onSetChildren:function(t,e){f(t).childIDs=e;for(var n=0;n<e.length;n++){var r=e[n],o=f(r);o||i("140"),null==o.childIDs&&"object"==typeof o.element&&null!=o.element&&i("141"),o.isMounted||i("71"),null==o.parentID&&(o.parentID=t),o.parentID!==t&&i("142",r,o.parentID,t)}},onBeforeMountComponent:function(t,e,n){!function(t,e,n){var i={element:e,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};if(u)a.set(t,i);else{var r=d(t);l[r]=i}}(t,e,n)},onBeforeUpdateComponent:function(t,e){var n=f(t);n&&n.isMounted&&(n.element=e)},onMountComponent:function(t){var e=f(t);e.isMounted=!0,0===e.parentID&&function(t){if(u)s.add(t);else{var e=d(t);c[e]=!0}}(t)},onUpdateComponent:function(t){var e=f(t);e&&e.isMounted&&e.updateCount++},onUnmountComponent:function(t){var e=f(t);e&&(e.isMounted=!1,0===e.parentID&&function(t){if(u)s.delete(t);else{var e=d(t);delete c[e]}}(t)),h.push(t)},purgeUnmountedComponents:function(){if(!y._preventPurging){for(var t=0;t<h.length;t++)m(h[t]);h.length=0}},isMounted:function(t){var e=f(t);return!!e&&e.isMounted},getCurrentStackAddendum:function(t){var e="";if(t){var n=t.type,i="function"==typeof n?n.displayName||n.name:n,o=t._owner;e+=g(i||"Unknown",t._source,o&&o.getName())}var a=r.current,s=a&&a._debugID;return e+y.getStackAddendumByID(s)},getStackAddendumByID:function(t){for(var e="";t;)e+=_(t),t=y.getParentID(t);return e},getChildIDs:function(t){var e=f(t);return e?e.childIDs:[]},getDisplayName:function(t){var e=y.getElement(t);return e?function(t){return null==t?"#empty":"string"==typeof t||"number"==typeof t?"#text":"string"==typeof t.type?t.type:t.type.displayName||t.type.name||"Unknown"}(e):null},getElement:function(t){var e=f(t);return e?e.element:null},getOwnerID:function(t){var e=y.getElement(t);return e&&e._owner?e._owner._debugID:null},getParentID:function(t){var e=f(t);return e?e.parentID:null},getSource:function(t){var e=f(t),n=e?e.element:null;return null!=n?n._source:null},getText:function(t){var e=y.getElement(t);return"string"==typeof e?e:"number"==typeof e?""+e:null},getUpdateCount:function(t){var e=f(t);return e?e.updateCount:0},getRegisteredIDs:function(){return u?Array.from(a.keys()):Object.keys(l).map(p)},getRootIDs:function(){return u?Array.from(s.keys()):Object.keys(c).map(p)}};t.exports=y},5238:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(5782),a=n(4066),s=n(1506),l=n(5429),c=n(2715),u=(n(8744),n(7807)),h=(n(9321),n(974)),d=n(5118),p=n(3677),f=(n(3759),n(9303)),m=n(588),g=(n(3620),0);function _(t){}_.prototype.render=function(){var t=c.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return e};var y=1,v={Mixin:{construct:function(t){this._currentElement=t,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,r){this._context=r,this._mountOrder=y++,this._hostParent=e,this._hostContainerInfo=n;var o,a=this._currentElement.props,l=this._processContext(r),u=this._currentElement.type,h=t.getUpdateQueue(),d=function(t){return!(!t.prototype||!t.prototype.isReactComponent)}(u),f=this._constructComponent(d,a,l,h);d||null!=f&&null!=f.render?function(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}(u)?this._compositeType=1:this._compositeType=g:(o=f,null===f||!1===f||s.isValidElement(f)||i("105",u.displayName||u.name||"Component"),f=new _(u),this._compositeType=2),f.props=a,f.context=l,f.refs=p,f.updater=h,this._instance=f,c.set(f,this);var m,v=f.state;return void 0===v&&(f.state=v=null),("object"!=typeof v||Array.isArray(v))&&i("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,m=f.unstable_handleError?this.performInitialMountWithErrorHandling(o,e,n,t,r):this.performInitialMount(o,e,n,t,r),f.componentDidMount&&t.getReactMountReady().enqueue(f.componentDidMount,f),m},_constructComponent:function(t,e,n,i){return this._constructComponentWithoutOwner(t,e,n,i)},_constructComponentWithoutOwner:function(t,e,n,i){var r=this._currentElement.type;return t?new r(e,n,i):r(e,n,i)},performInitialMountWithErrorHandling:function(t,e,n,i,r){var o,a=i.checkpoint();try{o=this.performInitialMount(t,e,n,i,r)}catch(s){i.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=i.checkpoint(),this._renderedComponent.unmountComponent(!0),i.rollback(a),o=this.performInitialMount(t,e,n,i,r)}return o},performInitialMount:function(t,e,n,i,r){var o=this._instance;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===t&&(t=this._renderValidatedComponent());var a=u.getType(t);this._renderedNodeType=a;var s=this._instantiateReactComponent(t,a!==u.EMPTY);return this._renderedComponent=s,h.mountComponent(s,i,e,n,this._processChildContext(r),0)},getHostNode:function(){return h.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";l.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(h.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,c.remove(e)}},_maskContext:function(t){var e=this._currentElement.type.contextTypes;if(!e)return p;var n={};for(var i in e)n[i]=t[i];return n},_processContext:function(t){return this._maskContext(t)},_processChildContext:function(t){var e=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){for(var a in"object"!=typeof e.childContextTypes&&i("107",this.getName()||"ReactCompositeComponent"),o)a in e.childContextTypes||i("108",this.getName()||"ReactCompositeComponent",a);return r({},t,o)}return t},_checkContextTypes:function(t,e,n){d(t,e,n,this.getName(),null,this._debugID)},receiveComponent:function(t,e,n){var i=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(e,i,t,r,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?h.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,r,o){var a=this._instance;null==a&&i("136",this.getName()||"ReactCompositeComponent");var s,l=!1;this._context===o?s=a.context:(s=this._processContext(o),l=!0);var c=e.props,u=n.props;e!==n&&(l=!0),l&&a.componentWillReceiveProps&&a.componentWillReceiveProps(u,s);var h=this._processPendingState(u,s),d=!0;this._pendingForceUpdate||(a.shouldComponentUpdate?d=a.shouldComponentUpdate(u,h,s):1===this._compositeType&&(d=!f(c,u)||!f(a.state,h))),this._updateBatchNumber=null,d?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,u,h,s,t,o)):(this._currentElement=n,this._context=o,a.props=u,a.state=h,a.context=s)},_processPendingState:function(t,e){var n=this._instance,i=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(o&&1===i.length)return i[0];for(var a=r({},o?i[0]:n.state),s=o?1:0;s<i.length;s++){var l=i[s];r(a,"function"==typeof l?l.call(n,a,t,e):l)}return a},_performComponentUpdate:function(t,e,n,i,r,o){var a,s,l,c=this._instance,u=Boolean(c.componentDidUpdate);u&&(a=c.props,s=c.state,l=c.context),c.componentWillUpdate&&c.componentWillUpdate(e,n,i),this._currentElement=t,this._context=o,c.props=e,c.state=n,c.context=i,this._updateRenderedComponent(r,o),u&&r.getReactMountReady().enqueue(c.componentDidUpdate.bind(c,a,s,l),c)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,i=n._currentElement,r=this._renderValidatedComponent();if(m(i,r))h.receiveComponent(n,r,t,this._processChildContext(e));else{var o=h.getHostNode(n);h.unmountComponent(n,!1);var a=u.getType(r);this._renderedNodeType=a;var s=this._instantiateReactComponent(r,a!==u.EMPTY);this._renderedComponent=s;var l=h.mountComponent(s,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e),0);this._replaceNodeWithMarkup(o,l,n)}},_replaceNodeWithMarkup:function(t,e,n){o.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},_renderValidatedComponent:function(){var t;if(2!==this._compositeType){a.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{a.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||!1===t||s.isValidElement(t)||i("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n&&i("110");var r=e.getPublicInstance();(n.refs===p?n.refs={}:n.refs)[t]=r},detachRef:function(t){delete this.getPublicInstance().refs[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return 2===this._compositeType?null:t},_instantiateReactComponent:null}};t.exports=v},4066:t=>{"use strict";t.exports={current:null}},8951:(t,e,n)=>{"use strict";var i=n(3990),r=n(3583),o=n(728),a=n(974),s=n(8638),l=n(7268),c=n(2116),u=n(3333),h=n(5172);n(3620),r.inject();var d={findDOMNode:c,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:h};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:i.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=u(t)),t?i.getNodeFromInstance(t):null}},Mount:o,Reconciler:a}),t.exports=d},3883:(t,e,n)=>{"use strict";var i={getHostProps:n(1790).getHostProps};t.exports=i},3647:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(686),a=n(5786),s=n(1051),l=n(6722),c=n(6937),u=n(8376),h=n(5338),d=n(7538),p=n(1831),f=n(2134),m=n(3883),g=n(9115),_=n(3990),y=n(5764),v=n(4360),b=n(2444),x=n(1388),w=(n(8744),n(4393)),E=n(1853),M=(n(139),n(6570)),T=(n(3759),n(1708),n(5721)),S=(n(9303),n(6577),n(3620),g),k=d.deleteListener,C=_.getNodeFromInstance,I=f.listenTo,L=p.registrationNameModules,D={string:!0,number:!0},A=T({style:null}),P=T({__html:null}),z={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null};function N(t,e){e&&(H[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&i("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&i("60"),"object"==typeof e.dangerouslySetInnerHTML&&P in e.dangerouslySetInnerHTML||i("61")),null!=e.style&&"object"!=typeof e.style&&i("62",function(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}(t)))}function R(t,e,n,i){if(!(i instanceof E)){var r=t._hostContainerInfo,o=r._node&&11===r._node.nodeType?r._node:r._ownerDocument;I(e,o),i.getReactMountReady().enqueue(O,{inst:t,registrationName:e,listener:n})}}function O(){var t=this;d.putListener(t.inst,t.registrationName,t.listener)}function F(){y.postMountWrapper(this)}function B(){x.postMountWrapper(this)}function U(){v.postMountWrapper(this)}var Y={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function j(){var t=this;t._rootNodeID||i("63");var e=C(t);switch(e||i("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[f.trapBubbledEvent(h.topLevelTypes.topLoad,"load",e)];break;case"video":case"audio":for(var n in t._wrapperState.listeners=[],Y)Y.hasOwnProperty(n)&&t._wrapperState.listeners.push(f.trapBubbledEvent(h.topLevelTypes[n],Y[n],e));break;case"source":t._wrapperState.listeners=[f.trapBubbledEvent(h.topLevelTypes.topError,"error",e)];break;case"img":t._wrapperState.listeners=[f.trapBubbledEvent(h.topLevelTypes.topError,"error",e),f.trapBubbledEvent(h.topLevelTypes.topLoad,"load",e)];break;case"form":t._wrapperState.listeners=[f.trapBubbledEvent(h.topLevelTypes.topReset,"reset",e),f.trapBubbledEvent(h.topLevelTypes.topSubmit,"submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[f.trapBubbledEvent(h.topLevelTypes.topInvalid,"invalid",e)]}}function V(){b.postUpdateWrapper(this)}var G={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},q={listing:!0,pre:!0,textarea:!0},H=r({menuitem:!0},G),$=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Z={},W={}.hasOwnProperty;function X(t,e){return t.indexOf("-")>=0||null!=e.is}var K=1;function J(t){var e=t.type;!function(t){W.call(Z,t)||($.test(t)||i("65",t),Z[t]=!0)}(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}J.displayName="ReactDOMComponent",J.Mixin={mountComponent:function(t,e,n,i){this._rootNodeID=K++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var r,a,c,h=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(j,this);break;case"button":h=m.getHostProps(this,h,e);break;case"input":y.mountWrapper(this,h,e),h=y.getHostProps(this,h),t.getReactMountReady().enqueue(j,this);break;case"option":v.mountWrapper(this,h,e),h=v.getHostProps(this,h);break;case"select":b.mountWrapper(this,h,e),h=b.getHostProps(this,h),t.getReactMountReady().enqueue(j,this);break;case"textarea":x.mountWrapper(this,h,e),h=x.getHostProps(this,h),t.getReactMountReady().enqueue(j,this)}if(N(this,h),null!=e?(r=e._namespaceURI,a=e._tag):n._tag&&(r=n._namespaceURI,a=n._tag),(null==r||r===l.svg&&"foreignobject"===a)&&(r=l.html),r===l.html&&("svg"===this._tag?r=l.svg:"math"===this._tag&&(r=l.mathml)),this._namespaceURI=r,t.useCreateElement){var d,p=n._ownerDocument;if(r===l.html)if("script"===this._tag){var f=p.createElement("div"),g=this._currentElement.type;f.innerHTML="<"+g+"></"+g+">",d=f.removeChild(f.firstChild)}else d=h.is?p.createElement(this._currentElement.type,h.is):p.createElement(this._currentElement.type);else d=p.createElementNS(r,this._currentElement.type);_.precacheNode(this,d),this._flags|=S.hasCachedChildNodes,this._hostParent||u.setAttributeForRoot(d),this._updateDOMProperties(null,h,t);var w=s(d);this._createInitialChildren(t,h,i,w),c=w}else{var E=this._createOpenTagMarkupAndPutListeners(t,h),M=this._createContentMarkup(t,h,i);c=!M&&G[this._tag]?E+"/>":E+">"+M+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(F,this),h.autoFocus&&t.getReactMountReady().enqueue(o.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(B,this),h.autoFocus&&t.getReactMountReady().enqueue(o.focusDOMComponent,this);break;case"select":case"button":h.autoFocus&&t.getReactMountReady().enqueue(o.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(U,this)}return c},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(null!=o)if(L.hasOwnProperty(i))o&&R(this,i,o,t);else{i===A&&(o&&(o=this._previousStyleCopy=r({},e.style)),o=a.createMarkupForStyles(o,this));var s=null;null!=this._tag&&X(this._tag,e)?z.hasOwnProperty(i)||(s=u.createMarkupForCustomAttribute(i,o)):s=u.createMarkupForProperty(i,o),s&&(n+=" "+s)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+u.createMarkupForRoot()),n+=" "+u.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var i="",r=e.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(i=r.__html);else{var o=D[typeof e.children]?e.children:null,a=null!=o?null:e.children;null!=o?i=M(o):null!=a&&(i=this.mountChildren(a,t,n).join(""))}return q[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(t,e,n,i){var r=e.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&s.queueHTML(i,r.__html);else{var o=D[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)s.queueText(i,o);else if(null!=a)for(var l=this.mountChildren(a,t,n),c=0;c<l.length;c++)s.queueChild(i,l[c])}},receiveComponent:function(t,e,n){var i=this._currentElement;this._currentElement=t,this.updateComponent(e,i,t,n)},updateComponent:function(t,e,n,i){var r=e.props,o=this._currentElement.props;switch(this._tag){case"button":r=m.getHostProps(this,r),o=m.getHostProps(this,o);break;case"input":r=y.getHostProps(this,r),o=y.getHostProps(this,o);break;case"option":r=v.getHostProps(this,r),o=v.getHostProps(this,o);break;case"select":r=b.getHostProps(this,r),o=b.getHostProps(this,o);break;case"textarea":r=x.getHostProps(this,r),o=x.getHostProps(this,o)}switch(N(this,o),this._updateDOMProperties(r,o,t),this._updateDOMChildren(r,o,t,i),this._tag){case"input":y.updateWrapper(this);break;case"textarea":x.updateWrapper(this);break;case"select":t.getReactMountReady().enqueue(V,this)}},_updateDOMProperties:function(t,e,n){var i,o,s;for(i in t)if(!e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&null!=t[i])if(i===A){var l=this._previousStyleCopy;for(o in l)l.hasOwnProperty(o)&&((s=s||{})[o]="");this._previousStyleCopy=null}else L.hasOwnProperty(i)?t[i]&&k(this,i):X(this._tag,t)?z.hasOwnProperty(i)||u.deleteValueForAttribute(C(this),i):(c.properties[i]||c.isCustomAttribute(i))&&u.deleteValueForProperty(C(this),i);for(i in e){var h=e[i],d=i===A?this._previousStyleCopy:null!=t?t[i]:void 0;if(e.hasOwnProperty(i)&&h!==d&&(null!=h||null!=d))if(i===A)if(h?h=this._previousStyleCopy=r({},h):this._previousStyleCopy=null,d){for(o in d)!d.hasOwnProperty(o)||h&&h.hasOwnProperty(o)||((s=s||{})[o]="");for(o in h)h.hasOwnProperty(o)&&d[o]!==h[o]&&((s=s||{})[o]=h[o])}else s=h;else if(L.hasOwnProperty(i))h?R(this,i,h,n):d&&k(this,i);else if(X(this._tag,e))z.hasOwnProperty(i)||u.setValueForAttribute(C(this),i,h);else if(c.properties[i]||c.isCustomAttribute(i)){var p=C(this);null!=h?u.setValueForProperty(p,i,h):u.deleteValueForProperty(p,i)}}s&&a.setValueForStyles(C(this),s,this)},_updateDOMChildren:function(t,e,n,i){var r=D[typeof t.children]?t.children:null,o=D[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,l=null!=r?null:t.children,c=null!=o?null:e.children,u=null!=r||null!=a,h=null!=o||null!=s;null!=l&&null==c?this.updateChildren(null,n,i):u&&!h&&this.updateTextContent(""),null!=o?r!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=c&&this.updateChildren(c,n,i)},getHostNode:function(){return C(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"html":case"head":case"body":i("66",this._tag)}this.unmountChildren(t),_.uncacheNode(this),d.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return C(this)}},r(J.prototype,J.Mixin,w.Mixin),t.exports=J},9115:t=>{"use strict";t.exports={hasCachedChildNodes:1}},3990:(t,e,n)=>{"use strict";var i=n(2317),r=n(6937),o=n(9115),a=(n(3759),r.ID_ATTRIBUTE_NAME),s=o,l="__reactInternalInstance$"+Math.random().toString(36).slice(2);function c(t){for(var e;e=t._renderedComponent;)t=e;return t}function u(t,e){var n=c(t);n._hostNode=e,e[l]=n}function h(t,e){if(!(t._flags&s.hasCachedChildNodes)){var n=t._renderedChildren,r=e.firstChild;t:for(var o in n)if(n.hasOwnProperty(o)){var l=n[o],h=c(l)._domID;if(0!==h){for(;null!==r;r=r.nextSibling)if(1===r.nodeType&&r.getAttribute(a)===String(h)||8===r.nodeType&&r.nodeValue===" react-text: "+h+" "||8===r.nodeType&&r.nodeValue===" react-empty: "+h+" "){u(l,r);continue t}i("32",h)}}t._flags|=s.hasCachedChildNodes}}function d(t){if(t[l])return t[l];for(var e,n,i=[];!t[l];){if(i.push(t),!t.parentNode)return null;t=t.parentNode}for(;t&&(n=t[l]);t=i.pop())e=n,i.length&&h(n,t);return e}var p={getClosestInstanceFromNode:d,getInstanceFromNode:function(t){var e=d(t);return null!=e&&e._hostNode===t?e:null},getNodeFromInstance:function(t){if(void 0===t._hostNode&&i("33"),t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent||i("34"),t=t._hostParent;for(;e.length;t=e.pop())h(t,t._hostNode);return t._hostNode},precacheChildNodes:h,precacheNode:u,uncacheNode:function(t){var e=t._hostNode;e&&(delete e[l],t._hostNode=null)}};t.exports=p},2799:(t,e,n)=>{"use strict";n(6577),t.exports=function(t,e){return{_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?9===e.nodeType?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null}}},778:(t,e,n)=>{"use strict";var i=n(7418),r=n(1051),o=n(3990),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};i(a.prototype,{mountComponent:function(t,e,n,i){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var l=n._ownerDocument.createComment(s);return o.precacheNode(this,l),r(l)}return t.renderToStaticMarkup?"":"\x3c!--"+s+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),t.exports=a},8861:(t,e,n)=>{"use strict";var i=n(1506).createFactory,r={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};t.exports=r},3152:t=>{"use strict";t.exports={useCreateElement:!0}},63:(t,e,n)=>{"use strict";var i=n(5392),r=n(3990),o={dangerouslyProcessChildrenUpdates:function(t,e){var n=r.getNodeFromInstance(t);i.processUpdates(n,e)}};t.exports=o},5764:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(1790),a=n(8376),s=n(3240),l=n(3990),c=n(8638);function u(){this._rootNodeID&&h.updateWrapper(this)}n(3759),n(3620);var h={getHostProps:function(t,e){var n=s.getValue(e),i=s.getChecked(e);return r({type:void 0,step:void 0,min:void 0,max:void 0},o.getHostProps(t,e),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=i?i:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange})},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:d.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&a.setValueForProperty(l.getNodeFromInstance(t),"checked",n||!1);var i=l.getNodeFromInstance(t),r=s.getValue(e);if(null!=r){var o=""+r;o!==i.value&&(i.value=o)}else null==e.value&&null!=e.defaultValue&&(i.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(i.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=l.getNodeFromInstance(t);switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var i=n.name;""!==i&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==i&&(n.name=i)}};function d(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);c.asap(u,this);var r=e.name;if("radio"===e.type&&null!=r){for(var o=l.getNodeFromInstance(this),a=o;a.parentNode;)a=a.parentNode;for(var h=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),d=0;d<h.length;d++){var p=h[d];if(p!==o&&p.form===o.form){var f=l.getInstanceFromNode(p);f||i("90"),c.asap(u,f)}}}return n}t.exports=h},4360:(t,e,n)=>{"use strict";var i=n(7418),r=n(7196),o=n(3990),a=n(2444),s=(n(3620),!1);function l(t){var e="";return r.forEach(t,(function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:s||(s=!0))})),e}var c={mountWrapper:function(t,e,n){var i=null;if(null!=n){var r=n;"optgroup"===r._tag&&(r=r._hostParent),null!=r&&"select"===r._tag&&(i=a.getSelectValueContext(r))}var o,s=null;if(null!=i)if(o=null!=e.value?e.value+"":l(e.children),s=!1,Array.isArray(i)){for(var c=0;c<i.length;c++)if(""+i[c]===o){s=!0;break}}else s=""+i===o;t._wrapperState={selected:s}},postMountWrapper:function(t){var e=t._currentElement.props;null!=e.value&&o.getNodeFromInstance(t).setAttribute("value",e.value)},getHostProps:function(t,e){var n=i({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var r=l(e.children);return r&&(n.children=r),n}};t.exports=c},2444:(t,e,n)=>{"use strict";var i=n(7418),r=n(1790),o=n(3240),a=n(3990),s=n(8638),l=(n(3620),!1);function c(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=o.getValue(t);null!=e&&u(this,Boolean(t.multiple),e)}}function u(t,e,n){var i,r,o=a.getNodeFromInstance(t).options;if(e){for(i={},r=0;r<n.length;r++)i[""+n[r]]=!0;for(r=0;r<o.length;r++){var s=i.hasOwnProperty(o[r].value);o[r].selected!==s&&(o[r].selected=s)}}else{for(i=""+n,r=0;r<o.length;r++)if(o[r].value===i)return void(o[r].selected=!0);o.length&&(o[0].selected=!0)}}var h={getHostProps:function(t,e){return i({},r.getHostProps(t,e),{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=o.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:d.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||l||(l=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var i=o.getValue(e);null!=i?(t._wrapperState.pendingUpdate=!1,u(t,Boolean(e.multiple),i)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?u(t,Boolean(e.multiple),e.defaultValue):u(t,Boolean(e.multiple),e.multiple?[]:""))}};function d(t){var e=this._currentElement.props,n=o.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),s.asap(c,this),n}t.exports=h},3016:(t,e,n)=>{"use strict";var i=n(6508),r=n(2271),o=n(2706);function a(t,e,n,i){return t===n&&e===i}var s=i.canUseDOM&&"selection"in document&&!("getSelection"in window),l={getOffsets:s?function(t){var e=document.selection.createRange(),n=e.text.length,i=e.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",e);var r=i.text.length;return{start:r,end:r+n}}:function(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,r=e.focusNode,o=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(t){return null}var l=a(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)?0:s.toString().length,c=s.cloneRange();c.selectNodeContents(t),c.setEnd(s.startContainer,s.startOffset);var u=a(c.startContainer,c.startOffset,c.endContainer,c.endOffset)?0:c.toString().length,h=u+l,d=document.createRange();d.setStart(n,i),d.setEnd(r,o);var p=d.collapsed;return{start:p?h:u,end:p?u:h}},setOffsets:s?function(t,e){var n,i,r=document.selection.createRange().duplicate();void 0===e.end?i=n=e.start:e.start>e.end?(n=e.end,i=e.start):(n=e.start,i=e.end),r.moveToElementText(t),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}:function(t,e){if(window.getSelection){var n=window.getSelection(),i=t[o()].length,a=Math.min(e.start,i),s=void 0===e.end?a:Math.min(e.end,i);if(!n.extend&&a>s){var l=s;s=a,a=l}var c=r(t,a),u=r(t,s);if(c&&u){var h=document.createRange();h.setStart(c.node,c.offset),n.removeAllRanges(),a>s?(n.addRange(h),n.extend(u.node,u.offset)):(h.setEnd(u.node,u.offset),n.addRange(h))}}}};t.exports=l},6257:(t,e,n)=>{"use strict";var i=n(3583),r=n(1865),o=n(7268);i.inject();var a={renderToString:r.renderToString,renderToStaticMarkup:r.renderToStaticMarkup,version:o};t.exports=a},7461:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(5392),a=n(1051),s=n(3990),l=n(6570),c=(n(3759),n(6577),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});r(c.prototype,{mountComponent:function(t,e,n,i){var r=n._idCounter++,o=" react-text: "+r+" ";if(this._domID=r,this._hostParent=e,t.useCreateElement){var c=n._ownerDocument,u=c.createComment(o),h=c.createComment(" /react-text "),d=a(c.createDocumentFragment());return a.queueChild(d,a(u)),this._stringText&&a.queueChild(d,a(c.createTextNode(this._stringText))),a.queueChild(d,a(h)),s.precacheNode(this,u),this._closingComment=h,d}var p=l(this._stringText);return t.renderToStaticMarkup?p:"\x3c!--"+o+"--\x3e"+p+"\x3c!-- /react-text --\x3e"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var i=this.getHostNode();o.replaceDelimitedText(i[0],i[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this).nextSibling;;){if(null==e&&i("67",this._domID),8===e.nodeType&&" /react-text "===e.nodeValue){this._closingComment=e;break}e=e.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=c},1388:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(1790),a=n(3240),s=n(3990),l=n(8638);function c(){this._rootNodeID&&u.updateWrapper(this)}n(3759),n(3620);var u={getHostProps:function(t,e){return null!=e.dangerouslySetInnerHTML&&i("91"),r({},o.getHostProps(t,e),{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange})},mountWrapper:function(t,e){var n=a.getValue(e),r=n;if(null==n){var o=e.defaultValue,s=e.children;null!=s&&(null!=o&&i("92"),Array.isArray(s)&&(s.length<=1||i("93"),s=s[0]),o=""+s),null==o&&(o=""),r=o}t._wrapperState={initialValue:""+r,listeners:null,onChange:h.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=s.getNodeFromInstance(t),i=a.getValue(e);if(null!=i){var r=""+i;r!==n.value&&(n.value=r),null==e.defaultValue&&(n.defaultValue=r)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=s.getNodeFromInstance(t);e.value=e.textContent}};function h(t){var e=this._currentElement.props,n=a.executeOnChange(e,t);return l.asap(c,this),n}t.exports=u},8566:(t,e,n)=>{"use strict";var i=n(2317);function r(t,e){"_hostNode"in t||i("33"),"_hostNode"in e||i("33");for(var n=0,r=t;r;r=r._hostParent)n++;for(var o=0,a=e;a;a=a._hostParent)o++;for(;n-o>0;)t=t._hostParent,n--;for(;o-n>0;)e=e._hostParent,o--;for(var s=n;s--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}n(3759),t.exports={isAncestor:function(t,e){"_hostNode"in t||i("35"),"_hostNode"in e||i("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1},getLowestCommonAncestor:r,getParentInstance:function(t){return"_hostNode"in t||i("36"),t._hostParent},traverseTwoPhase:function(t,e,n){for(var i,r=[];t;)r.push(t),t=t._hostParent;for(i=r.length;i-- >0;)e(r[i],!1,n);for(i=0;i<r.length;i++)e(r[i],!0,n)},traverseEnterLeave:function(t,e,n,i,o){for(var a=t&&e?r(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var l,c=[];e&&e!==a;)c.push(e),e=e._hostParent;for(l=0;l<s.length;l++)n(s[l],!0,i);for(l=c.length;l-- >0;)n(c[l],!1,o)}}},4377:(t,e,n)=>{"use strict";var i=n(7418),r=n(8638),o=n(5316),a=n(139),s={initialize:a,close:function(){h.isBatchingUpdates=!1}},l=[{initialize:a,close:r.flushBatchedUpdates.bind(r)},s];function c(){this.reinitializeTransaction()}i(c.prototype,o.Mixin,{getTransactionWrappers:function(){return l}});var u=new c,h={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,i,r,o){var a=h.isBatchingUpdates;h.isBatchingUpdates=!0,a?t(e,n,i,r,o):u.perform(t,null,e,n,i,r,o)}};t.exports=h},3583:(t,e,n)=>{"use strict";var i=n(2289),r=n(2029),o=n(8084),a=n(5267),s=n(8926),l=n(6299),c=n(3647),u=n(3990),h=n(778),d=n(8566),p=n(7461),f=n(4377),m=n(8017),g=n(6848),_=n(2944),y=n(6942),v=n(4049),b=n(2644),x=!1;t.exports={inject:function(){x||(x=!0,g.EventEmitter.injectReactEventListener(m),g.EventPluginHub.injectEventPluginOrder(o),g.EventPluginUtils.injectComponentTree(u),g.EventPluginUtils.injectTreeTraversal(d),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:b,EnterLeaveEventPlugin:a,ChangeEventPlugin:r,SelectEventPlugin:v,BeforeInputEventPlugin:i}),g.HostComponent.injectGenericComponentClass(c),g.HostComponent.injectTextComponentClass(p),g.DOMProperty.injectDOMPropertyConfig(s),g.DOMProperty.injectDOMPropertyConfig(y),g.EmptyComponent.injectEmptyComponentFactory((function(t){return new h(t)})),g.Updates.injectReconcileTransaction(_),g.Updates.injectBatchingStrategy(f),g.Component.injectEnvironment(l))}}},1506:(t,e,n)=>{"use strict";var i=n(7418),r=n(4066),o=(n(3620),n(3545),Object.prototype.hasOwnProperty),a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,s={key:!0,ref:!0,__self:!0,__source:!0};function l(t){return void 0!==t.ref}function c(t){return void 0!==t.key}var u=function(t,e,n,i,r,o,s){return{$$typeof:a,type:t,key:e,ref:n,props:s,_owner:o}};u.createElement=function(t,e,n){var i,a={},h=null,d=null;if(null!=e)for(i in l(e)&&(d=e.ref),c(e)&&(h=""+e.key),void 0===e.__self||e.__self,void 0===e.__source||e.__source,e)o.call(e,i)&&!s.hasOwnProperty(i)&&(a[i]=e[i]);var p=arguments.length-2;if(1===p)a.children=n;else if(p>1){for(var f=Array(p),m=0;m<p;m++)f[m]=arguments[m+2];a.children=f}if(t&&t.defaultProps){var g=t.defaultProps;for(i in g)void 0===a[i]&&(a[i]=g[i])}return u(t,h,d,0,0,r.current,a)},u.createFactory=function(t){var e=u.createElement.bind(null,t);return e.type=t,e},u.cloneAndReplaceKey=function(t,e){return u(t.type,e,t.ref,t._self,t._source,t._owner,t.props)},u.cloneElement=function(t,e,n){var a,h,d=i({},t.props),p=t.key,f=t.ref,m=(t._self,t._source,t._owner);if(null!=e)for(a in l(e)&&(f=e.ref,m=r.current),c(e)&&(p=""+e.key),t.type&&t.type.defaultProps&&(h=t.type.defaultProps),e)o.call(e,a)&&!s.hasOwnProperty(a)&&(void 0===e[a]&&void 0!==h?d[a]=h[a]:d[a]=e[a]);var g=arguments.length-2;if(1===g)d.children=n;else if(g>1){for(var _=Array(g),y=0;y<g;y++)_[y]=arguments[y+2];d.children=_}return u(t.type,p,f,0,0,m,d)},u.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===a},u.REACT_ELEMENT_TYPE=a,t.exports=u},1491:t=>{"use strict";var e,n={injectEmptyComponentFactory:function(t){e=t}},i={create:function(t){return e(t)}};i.injection=n,t.exports=i},5429:t=>{"use strict";var e=null;function n(t,n,i,r){try{return n(i,r)}catch(t){return void(null===e&&(e=t))}}var i={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(e){var t=e;throw e=null,t}}};t.exports=i},2666:(t,e,n)=>{"use strict";var i=n(7538),r={handleTopLevel:function(t,e,n,r){var o;o=i.extractEvents(t,e,n,r),i.enqueueEvents(o),i.processEventQueue(!1)}};t.exports=r},8017:(t,e,n)=>{"use strict";var i=n(7418),r=n(8628),o=n(6508),a=n(3303),s=n(3990),l=n(8638),c=n(3749),u=n(787);function h(t){for(;t._hostParent;)t=t._hostParent;var e=s.getNodeFromInstance(t).parentNode;return s.getClosestInstanceFromNode(e)}function d(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function p(t){var e=c(t.nativeEvent),n=s.getClosestInstanceFromNode(e),i=n;do{t.ancestors.push(i),i=i&&h(i)}while(i);for(var r=0;r<t.ancestors.length;r++)n=t.ancestors[r],m._handleTopLevel(t.topLevelType,n,t.nativeEvent,c(t.nativeEvent))}function f(t){t(u(window))}i(d.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),a.addPoolingTo(d,a.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:o.canUseDOM?window:null,setHandleTopLevel:function(t){m._handleTopLevel=t},setEnabled:function(t){m._enabled=!!t},isEnabled:function(){return m._enabled},trapBubbledEvent:function(t,e,n){var i=n;return i?r.listen(i,e,m.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){var i=n;return i?r.capture(i,e,m.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=f.bind(null,t);r.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(m._enabled){var n=d.getPooled(t,e);try{l.batchedUpdates(p,n)}finally{d.release(n)}}}};t.exports=m},4323:t=>{"use strict";t.exports={logTopLevelRenders:!1}},657:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=(n(3759),null),a={},s=null,l={createInternalComponent:function(t){return o||i("111",t.type),new o(t)},createInstanceForText:function(t){return new s(t)},isTextComponent:function(t){return t instanceof s},injection:{injectGenericComponentClass:function(t){o=t},injectTextComponentClass:function(t){s=t},injectComponentClasses:function(t){r(a,t)}}};t.exports=l},6848:(t,e,n)=>{"use strict";var i=n(6937),r=n(7538),o=n(3904),a=n(5782),s=n(8540),l=n(1491),c=n(2134),u=n(657),h=n(8638),d={Component:a.injection,Class:s.injection,DOMProperty:i.injection,EmptyComponent:l.injection,EventPluginHub:r.injection,EventPluginUtils:o.injection,EventEmitter:c.injection,HostComponent:u.injection,Updates:h.injection};t.exports=d},7927:(t,e,n)=>{"use strict";var i=n(3016),r=n(7476),o=n(8387),a=n(1003),s={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=a();return{focusedElem:t,selectionRange:s.hasSelectionCapabilities(t)?s.getSelection(t):null}},restoreSelection:function(t){var e,n=a(),i=t.focusedElem,l=t.selectionRange;n!==i&&(e=i,r(document.documentElement,e))&&(s.hasSelectionCapabilities(i)&&s.setSelection(i,l),o(i))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if(void 0===r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};t.exports=s},2715:t=>{"use strict";t.exports={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}}},8744:t=>{"use strict";t.exports={debugTool:null}},9683:(t,e,n)=>{"use strict";var i=n(6319),r=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=i(t);return o.test(t)?t:t.replace(r," "+a.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(a.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),i(t)===n}};t.exports=a},728:(t,e,n)=>{"use strict";var i=n(2317),r=n(1051),o=n(6937),a=n(2134),s=(n(4066),n(3990)),l=n(2799),c=n(3152),u=n(1506),h=n(4323),d=n(2715),p=(n(8744),n(9683)),f=n(974),m=n(1699),g=n(8638),_=n(3677),y=n(4301),v=(n(3759),n(2100)),b=n(588),x=(n(3620),o.ID_ATTRIBUTE_NAME),w=o.ROOT_ATTRIBUTE_NAME,E={};function M(t){return t?9===t.nodeType?t.documentElement:t.firstChild:null}function T(t,e,n,i,r){var o;if(h.logTopLevelRenders){var a=t._currentElement.props.type;o="React mount: "+("string"==typeof a?a:a.displayName||a.name),console.time(o)}var s=f.mountComponent(t,n,null,l(t,e),r,0);o&&console.timeEnd(o),t._renderedComponent._topLevelWrapper=t,P._mountImageIntoNode(s,e,t,i,n)}function S(t,e,n,i){var r=g.ReactReconcileTransaction.getPooled(!n&&c.useCreateElement);r.perform(T,null,t,e,r,n,i),g.ReactReconcileTransaction.release(r)}function k(t,e,n){for(f.unmountComponent(t,n),9===e.nodeType&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function C(t){var e=M(t);if(e){var n=s.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function I(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function L(t){var e=function(t){var e=M(t),n=e&&s.getInstanceFromNode(e);return n&&!n._hostParent?n:null}(t);return e?e._hostContainerInfo._topLevelWrapper:null}var D=1,A=function(){this.rootID=D++};A.prototype.isReactComponent={},A.prototype.render=function(){return this.props};var P={TopLevelWrapper:A,_instancesByReactRootID:E,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,i,r){return P.scrollMonitor(i,(function(){m.enqueueElementInternal(t,e,n),r&&m.enqueueCallbackInternal(t,r)})),t},_renderNewRootComponent:function(t,e,n,r){I(e)||i("37"),a.ensureScrollValueMonitoring();var o=y(t,!1);g.batchedUpdates(S,o,e,n,r);var s=o._instance.rootID;return E[s]=o,o},renderSubtreeIntoContainer:function(t,e,n,r){return null!=t&&d.has(t)||i("38"),P._renderSubtreeIntoContainer(t,e,n,r)},_renderSubtreeIntoContainer:function(t,e,n,r){m.validateCallback(r,"ReactDOM.render"),u.isValidElement(e)||i("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var o,a=u(A,null,null,null,null,null,e);if(t){var s=d.get(t);o=s._processChildContext(s._context)}else o=_;var l=L(n);if(l){var c=l._currentElement.props;if(b(c,e)){var h=l._renderedComponent.getPublicInstance(),p=r&&function(){r.call(h)};return P._updateRootComponent(l,a,o,n,p),h}P.unmountComponentAtNode(n)}var f,g=M(n),y=g&&!(!(f=g).getAttribute||!f.getAttribute(x)),v=C(n),w=y&&!l&&!v,E=P._renderNewRootComponent(a,n,w,o)._renderedComponent.getPublicInstance();return r&&r.call(E),E},render:function(t,e,n){return P._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){I(t)||i("40");var e=L(t);return e?(delete E[e._instance.rootID],g.batchedUpdates(k,e,t,!1),!0):(C(t),1===t.nodeType&&t.hasAttribute(w),!1)},_mountImageIntoNode:function(t,e,n,o,a){if(I(e)||i("41"),o){var l=M(e);if(p.canReuseMarkup(t,l))return void s.precacheNode(n,l);var c=l.getAttribute(p.CHECKSUM_ATTR_NAME);l.removeAttribute(p.CHECKSUM_ATTR_NAME);var u=l.outerHTML;l.setAttribute(p.CHECKSUM_ATTR_NAME,c);var h=t,d=function(t,e){for(var n=Math.min(t.length,e.length),i=0;i<n;i++)if(t.charAt(i)!==e.charAt(i))return i;return t.length===e.length?-1:n}(h,u),f=" (client) "+h.substring(d-20,d+20)+"\n (server) "+u.substring(d-20,d+20);9===e.nodeType&&i("42",f)}if(9===e.nodeType&&i("43"),a.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);r.insertTreeBefore(e,t,null)}else v(e,t),s.precacheNode(n,e.firstChild)}};t.exports=P},4393:(t,e,n)=>{"use strict";var i=n(2317),r=n(5782),o=(n(2715),n(8744),n(1873)),a=(n(4066),n(974)),s=n(5169),l=(n(139),n(5489));function c(t,e){return e&&(t=t||[]).push(e),t}function u(t,e){r.processChildrenUpdates(t,e)}n(3759);var h={Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return s.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,i,r,o){var a;return a=l(e,0),s.updateChildren(t,a,n,i,r,this,this._hostContainerInfo,o,0),a},mountChildren:function(t,e,n){var i=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=i;var r=[],o=0;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s],c=a.mountComponent(l,e,this,this._hostContainerInfo,n,0);l._mountIndex=o++,r.push(c)}return r},updateTextContent:function(t){var e,n=this._renderedChildren;for(var r in s.unmountChildren(n,!1),n)n.hasOwnProperty(r)&&i("118");u(this,[(e=t,{type:o.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null})])},updateMarkup:function(t){var e,n=this._renderedChildren;for(var r in s.unmountChildren(n,!1),n)n.hasOwnProperty(r)&&i("118");u(this,[(e=t,{type:o.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null})])},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var i=this._renderedChildren,r={},o=[],s=this._reconcilerUpdateChildren(i,t,o,r,e,n);if(s||i){var l,h=null,d=0,p=0,f=0,m=null;for(l in s)if(s.hasOwnProperty(l)){var g=i&&i[l],_=s[l];g===_?(h=c(h,this.moveChild(g,m,d,p)),p=Math.max(g._mountIndex,p),g._mountIndex=d):(g&&(p=Math.max(g._mountIndex,p)),h=c(h,this._mountChildAtIndex(_,o[f],m,d,e,n)),f++),d++,m=a.getHostNode(_)}for(l in r)r.hasOwnProperty(l)&&(h=c(h,this._unmountChild(i[l],r[l])));h&&u(this,h),this._renderedChildren=s}},unmountChildren:function(t){var e=this._renderedChildren;s.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,i){if(t._mountIndex<i)return function(t,e,n){return{type:o.MOVE_EXISTING,content:null,fromIndex:t._mountIndex,fromNode:a.getHostNode(t),toIndex:n,afterNode:e}}(t,e,n)},createChild:function(t,e,n){return function(t,e,n){return{type:o.INSERT_MARKUP,content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}(n,e,t._mountIndex)},removeChild:function(t,e){return function(t,e){return{type:o.REMOVE_NODE,content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}(t,e)},_mountChildAtIndex:function(t,e,n,i,r,o){return t._mountIndex=i,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}};t.exports=h},1873:(t,e,n)=>{"use strict";var i=n(8918)({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=i},7807:(t,e,n)=>{"use strict";var i=n(2317),r=n(1506),o=(n(3759),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||!1===t?o.EMPTY:r.isValidElement(t)?"function"==typeof t.type?o.COMPOSITE:o.HOST:void i("26",t)}});t.exports=o},3662:(t,e,n)=>{"use strict";n(3620);t.exports={isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){},enqueueReplaceState:function(t,e){},enqueueSetState:function(t,e){}}},2663:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),{isValidOwner:function(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)},addComponentAsRefTo:function(t,e,n){r.isValidOwner(n)||i("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){r.isValidOwner(n)||i("120");var o=n.getPublicInstance();o&&o.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=r},727:t=>{"use strict";t.exports={}},9321:(t,e,n)=>{"use strict";var i=n(8918)({prop:null,context:null,childContext:null});t.exports=i},5339:(t,e,n)=>{"use strict";var i=n(1506),r=n(727),o=n(1399),a=n(139),s=n(2183),l=(n(3620),"<<anonymous>>"),c={array:d("array"),bool:d("boolean"),func:d("function"),number:d("number"),object:d("object"),string:d("string"),symbol:d("symbol"),any:h(a.thatReturns(null)),arrayOf:function(t){return h((function(e,n,i,a,s){if("function"!=typeof t)return new u("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var l=e[n];if(!Array.isArray(l))return new u("Invalid "+r[a]+" `"+s+"` of type `"+f(l)+"` supplied to `"+i+"`, expected an array.");for(var c=0;c<l.length;c++){var h=t(l,c,i,a,s+"["+c+"]",o);if(h instanceof Error)return h}return null}))},element:h((function(t,e,n,o,a){var s=t[e];return i.isValidElement(s)?null:new u("Invalid "+r[o]+" `"+a+"` of type `"+f(s)+"` supplied to `"+n+"`, expected a single ReactElement.")})),instanceOf:function(t){return h((function(e,n,i,o,a){if(!(e[n]instanceof t)){var s=r[o],c=t.name||l;return new u("Invalid "+s+" `"+a+"` of type `"+((h=e[n]).constructor&&h.constructor.name?h.constructor.name:l)+"` supplied to `"+i+"`, expected instance of `"+c+"`.")}var h;return null}))},node:h((function(t,e,n,i,o){return p(t[e])?null:new u("Invalid "+r[i]+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(t){return h((function(e,n,i,a,s){if("function"!=typeof t)return new u("Property `"+s+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var l=e[n],c=f(l);if("object"!==c)return new u("Invalid "+r[a]+" `"+s+"` of type `"+c+"` supplied to `"+i+"`, expected an object.");for(var h in l)if(l.hasOwnProperty(h)){var d=t(l,h,i,a,s+"."+h,o);if(d instanceof Error)return d}return null}))},oneOf:function(t){return Array.isArray(t)?h((function(e,n,i,o,a){for(var s=e[n],l=0;l<t.length;l++)if(c=s,h=t[l],c===h?0!==c||1/c==1/h:c!=c&&h!=h)return null;var c,h;return new u("Invalid "+r[o]+" `"+a+"` of value `"+s+"` supplied to `"+i+"`, expected one of "+JSON.stringify(t)+".")})):a.thatReturnsNull},oneOfType:function(t){return Array.isArray(t)?h((function(e,n,i,a,s){for(var l=0;l<t.length;l++)if(null==(0,t[l])(e,n,i,a,s,o))return null;return new u("Invalid "+r[a]+" `"+s+"` supplied to `"+i+"`.")})):a.thatReturnsNull},shape:function(t){return h((function(e,n,i,a,s){var l=e[n],c=f(l);if("object"!==c)return new u("Invalid "+r[a]+" `"+s+"` of type `"+c+"` supplied to `"+i+"`, expected `object`.");for(var h in t){var d=t[h];if(d){var p=d(l,h,i,a,s+"."+h,o);if(p)return p}}return null}))}};function u(t){this.message=t,this.stack=""}function h(t){function e(e,n,i,o,a,s,c){if(o=o||l,s=s||i,null==n[i]){var h=r[a];return e?new u("Required "+h+" `"+s+"` was not specified in `"+o+"`."):null}return t(n,i,o,a,s)}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function d(t){return h((function(e,n,i,o,a,s){var l=e[n];if(f(l)!==t){var c=r[o],h=function(t){var e=f(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}(l);return new u("Invalid "+c+" `"+a+"` of type `"+h+"` supplied to `"+i+"`, expected `"+t+"`.")}return null}))}function p(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(p);if(null===t||i.isValidElement(t))return!0;var e=s(t);if(!e)return!1;var n,r=e.call(t);if(e!==t.entries){for(;!(n=r.next()).done;)if(!p(n.value))return!1}else for(;!(n=r.next()).done;){var o=n.value;if(o&&!p(o[1]))return!1}return!0;default:return!1}}function f(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||"Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol}(e,t)?"symbol":e}u.prototype=Error.prototype,t.exports=c},1399:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9637:(t,e,n)=>{"use strict";var i=n(7418),r=n(6047),o=n(3662),a=n(3677);function s(t,e,n){this.props=t,this.context=e,this.refs=a,this.updater=n||o}function l(){}l.prototype=r.prototype,s.prototype=new l,s.prototype.constructor=s,i(s.prototype,r.prototype),s.prototype.isPureReactComponent=!0,t.exports=s},2944:(t,e,n)=>{"use strict";var i=n(7418),r=n(955),o=n(3303),a=n(2134),s=n(7927),l=(n(8744),n(5316)),c=n(1699),u=[{initialize:s.getSelectionInformation,close:s.restoreSelection},{initialize:function(){var t=a.isEnabled();return a.setEnabled(!1),t},close:function(t){a.setEnabled(t)}},{initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}}];function h(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.useCreateElement=t}var d={getTransactionWrappers:function(){return u},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null}};i(h.prototype,l.Mixin,d),o.addPoolingTo(h),t.exports=h},974:(t,e,n)=>{"use strict";var i=n(6233);function r(){i.attachRefs(this,this._currentElement)}n(8744),n(3620);var o={mountComponent:function(t,e,n,i,o,a){var s=t.mountComponent(e,n,i,o,a);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(r,t),s},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){i.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,o){var a=t._currentElement;if(e!==a||o!==t._context){var s=i.shouldUpdateRefs(a,e);s&&i.detachRefs(t,a),t.receiveComponent(e,n,o),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e,n){t._updateBatchNumber===n&&t.performUpdateIfNecessary(e)}};t.exports=o},6233:(t,e,n)=>{"use strict";var i=n(2663),r={attachRefs:function(t,e){if(null!==e&&!1!==e){var n=e.ref;null!=n&&function(t,e,n){"function"==typeof t?t(e.getPublicInstance()):i.addComponentAsRefTo(e,t,n)}(n,t,e._owner)}},shouldUpdateRefs:function(t,e){return null===t||!1===t||null===e||!1===e||e.ref!==t.ref||"string"==typeof e.ref&&e._owner!==t._owner},detachRefs:function(t,e){if(null!==e&&!1!==e){var n=e.ref;null!=n&&function(t,e,n){"function"==typeof t?t(null):i.removeComponentAsRefFrom(e,t,n)}(n,t,e._owner)}}};t.exports=r},6672:t=>{"use strict";t.exports={isBatchingUpdates:!1,batchedUpdates:function(t){}}},1865:(t,e,n)=>{"use strict";var i=n(2317),r=n(2799),o=n(4377),a=n(1506),s=(n(8744),n(9683)),l=n(974),c=n(6672),u=n(1853),h=n(8638),d=n(3677),p=n(4301),f=(n(3759),0);function m(t,e){var n;try{return h.injection.injectBatchingStrategy(c),n=u.getPooled(e),f++,n.perform((function(){var i=p(t,!0),o=l.mountComponent(i,n,null,r(),d,0);return e||(o=s.addChecksumToMarkup(o)),o}),null)}finally{f--,u.release(n),f||h.injection.injectBatchingStrategy(o)}}t.exports={renderToString:function(t){return a.isValidElement(t)||i("46"),m(t,!1)},renderToStaticMarkup:function(t){return a.isValidElement(t)||i("47"),m(t,!0)}}},1853:(t,e,n)=>{"use strict";var i=n(7418),r=n(3303),o=n(5316),a=(n(8744),n(7236)),s=[],l={enqueue:function(){}};function c(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new a(this)}var u={getTransactionWrappers:function(){return s},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(c.prototype,o.Mixin,u),r.addPoolingTo(c),t.exports=c},7236:(t,e,n)=>{"use strict";var i=n(1699);n(5316),n(3620);var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&i.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()&&i.enqueueForceUpdate(t)},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()&&i.enqueueReplaceState(t,e)},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()&&i.enqueueSetState(t,e)},t}();t.exports=r},1699:(t,e,n)=>{"use strict";var i=n(2317),r=(n(4066),n(2715)),o=(n(8744),n(8638));function a(t){o.enqueueUpdate(t)}function s(t,e){return r.get(t)||null}n(3759),n(3620);var l={isMounted:function(t){var e=r.get(t);return!!e&&!!e._renderedComponent},enqueueCallback:function(t,e,n){l.validateCallback(e,n);var i=s(t);if(!i)return null;i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],a(i)},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],a(t)},enqueueForceUpdate:function(t){var e=s(t);e&&(e._pendingForceUpdate=!0,a(e))},enqueueReplaceState:function(t,e){var n=s(t);n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,a(n))},enqueueSetState:function(t,e){var n=s(t);n&&((n._pendingStateQueue||(n._pendingStateQueue=[])).push(e),a(n))},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,a(t)},validateCallback:function(t,e){t&&"function"!=typeof t&&i("122",e,function(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,i=Object.keys(t);return i.length>0&&i.length<20?n+" (keys: "+i.join(", ")+")":n}(t))}};t.exports=l},8638:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(955),a=n(3303),s=n(4323),l=n(974),c=n(5316),u=(n(3759),[]),h=0,d=o.getPooled(),p=!1,f=null;function m(){x.ReactReconcileTransaction&&f||i("123")}var g=[{initialize:function(){this.dirtyComponentsLength=u.length},close:function(){this.dirtyComponentsLength!==u.length?(u.splice(0,this.dirtyComponentsLength),b()):u.length=0}},{initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}}];function _(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=o.getPooled(),this.reconcileTransaction=x.ReactReconcileTransaction.getPooled(!0)}function y(t,e){return t._mountOrder-e._mountOrder}function v(t){var e=t.dirtyComponentsLength;e!==u.length&&i("124",e,u.length),u.sort(y),h++;for(var n=0;n<e;n++){var r,o=u[n],a=o._pendingCallbacks;if(o._pendingCallbacks=null,s.logTopLevelRenders){var c=o;o._currentElement.props===o._renderedComponent._currentElement&&(c=o._renderedComponent),r="React update: "+c.getName(),console.time(r)}if(l.performUpdateIfNecessary(o,t.reconcileTransaction,h),r&&console.timeEnd(r),a)for(var d=0;d<a.length;d++)t.callbackQueue.enqueue(a[d],o.getPublicInstance())}}r(_.prototype,c.Mixin,{getTransactionWrappers:function(){return g},destructor:function(){this.dirtyComponentsLength=null,o.release(this.callbackQueue),this.callbackQueue=null,x.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return c.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),a.addPoolingTo(_);var b=function(){for(;u.length||p;){if(u.length){var t=_.getPooled();t.perform(v,null,t),_.release(t)}if(p){p=!1;var e=d;d=o.getPooled(),e.notifyAll(),o.release(e)}}},x={ReactReconcileTransaction:null,batchedUpdates:function(t,e,n,i,r,o){m(),f.batchedUpdates(t,e,n,i,r,o)},enqueueUpdate:function t(e){m(),f.isBatchingUpdates?(u.push(e),null==e._updateBatchNumber&&(e._updateBatchNumber=h+1)):f.batchedUpdates(t,e)},flushBatchedUpdates:b,injection:{injectReconcileTransaction:function(t){t||i("126"),x.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t||i("127"),"function"!=typeof t.batchedUpdates&&i("128"),"boolean"!=typeof t.isBatchingUpdates&&i("129"),f=t}},asap:function(t,e){f.isBatchingUpdates||i("125"),d.enqueue(t,e),p=!0}};t.exports=x},7268:t=>{"use strict";t.exports="15.3.1"},6942:t=>{"use strict";var e="http://www.w3.org/1999/xlink",n="http://www.w3.org/XML/1998/namespace",i={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},r={Properties:{},DOMAttributeNamespaces:{xlinkActuate:e,xlinkArcrole:e,xlinkHref:e,xlinkRole:e,xlinkShow:e,xlinkTitle:e,xlinkType:e,xmlBase:n,xmlLang:n,xmlSpace:n},DOMAttributeNames:{}};Object.keys(i).forEach((function(t){r.Properties[t]=0,i[t]&&(r.DOMAttributeNames[t]=i[t])})),t.exports=r},4049:(t,e,n)=>{"use strict";var i=n(5338),r=n(7614),o=n(6508),a=n(3990),s=n(7927),l=n(674),c=n(1003),u=n(3980),h=n(5721),d=n(9303),p=i.topLevelTypes,f=o.canUseDOM&&"documentMode"in document&&document.documentMode<=11,m={select:{phasedRegistrationNames:{bubbled:h({onSelect:null}),captured:h({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]}},g=null,_=null,y=null,v=!1,b=!1,x=h({onSelect:null});function w(t,e){if(v||null==g||g!==c())return null;var n=function(t){if("selectionStart"in t&&s.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}(g);if(!y||!d(y,n)){y=n;var i=l.getPooled(m.select,_,t,e);return i.type="select",i.target=g,r.accumulateTwoPhaseDispatches(i),i}return null}var E={eventTypes:m,extractEvents:function(t,e,n,i){if(!b)return null;var r=e?a.getNodeFromInstance(e):window;switch(t){case p.topFocus:(u(r)||"true"===r.contentEditable)&&(g=r,_=e,y=null);break;case p.topBlur:g=null,_=null,y=null;break;case p.topMouseDown:v=!0;break;case p.topContextMenu:case p.topMouseUp:return v=!1,w(n,i);case p.topSelectionChange:if(f)break;case p.topKeyDown:case p.topKeyUp:return w(n,i)}return null},didPutListener:function(t,e,n){e===x&&(b=!0)}};t.exports=E},2644:(t,e,n)=>{"use strict";var i=n(2317),r=n(5338),o=n(8628),a=n(7614),s=n(3990),l=n(1500),c=n(888),u=n(674),h=n(270),d=n(7873),p=n(3590),f=n(7980),m=n(4846),g=n(1693),_=n(6062),y=n(5181),v=n(139),b=n(8362),x=(n(3759),n(5721)),w=r.topLevelTypes,E={abort:{phasedRegistrationNames:{bubbled:x({onAbort:!0}),captured:x({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:x({onAnimationEnd:!0}),captured:x({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:x({onAnimationIteration:!0}),captured:x({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:x({onAnimationStart:!0}),captured:x({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:x({onBlur:!0}),captured:x({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:x({onCanPlay:!0}),captured:x({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:x({onCanPlayThrough:!0}),captured:x({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:x({onClick:!0}),captured:x({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:x({onContextMenu:!0}),captured:x({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:x({onCopy:!0}),captured:x({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:x({onCut:!0}),captured:x({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:x({onDoubleClick:!0}),captured:x({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:x({onDrag:!0}),captured:x({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:x({onDragEnd:!0}),captured:x({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:x({onDragEnter:!0}),captured:x({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:x({onDragExit:!0}),captured:x({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:x({onDragLeave:!0}),captured:x({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:x({onDragOver:!0}),captured:x({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:x({onDragStart:!0}),captured:x({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:x({onDrop:!0}),captured:x({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:x({onDurationChange:!0}),captured:x({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:x({onEmptied:!0}),captured:x({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:x({onEncrypted:!0}),captured:x({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:x({onEnded:!0}),captured:x({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:x({onError:!0}),captured:x({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:x({onFocus:!0}),captured:x({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:x({onInput:!0}),captured:x({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:x({onInvalid:!0}),captured:x({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:x({onKeyDown:!0}),captured:x({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:x({onKeyPress:!0}),captured:x({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:x({onKeyUp:!0}),captured:x({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:x({onLoad:!0}),captured:x({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:x({onLoadedData:!0}),captured:x({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:x({onLoadedMetadata:!0}),captured:x({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:x({onLoadStart:!0}),captured:x({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:x({onMouseDown:!0}),captured:x({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:x({onMouseMove:!0}),captured:x({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:x({onMouseOut:!0}),captured:x({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:x({onMouseOver:!0}),captured:x({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:x({onMouseUp:!0}),captured:x({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:x({onPaste:!0}),captured:x({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:x({onPause:!0}),captured:x({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:x({onPlay:!0}),captured:x({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:x({onPlaying:!0}),captured:x({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:x({onProgress:!0}),captured:x({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:x({onRateChange:!0}),captured:x({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:x({onReset:!0}),captured:x({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:x({onScroll:!0}),captured:x({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:x({onSeeked:!0}),captured:x({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:x({onSeeking:!0}),captured:x({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:x({onStalled:!0}),captured:x({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:x({onSubmit:!0}),captured:x({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:x({onSuspend:!0}),captured:x({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:x({onTimeUpdate:!0}),captured:x({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:x({onTouchCancel:!0}),captured:x({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:x({onTouchEnd:!0}),captured:x({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:x({onTouchMove:!0}),captured:x({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:x({onTouchStart:!0}),captured:x({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:x({onTransitionEnd:!0}),captured:x({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:x({onVolumeChange:!0}),captured:x({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:x({onWaiting:!0}),captured:x({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:x({onWheel:!0}),captured:x({onWheelCapture:!0})}}},M={topAbort:E.abort,topAnimationEnd:E.animationEnd,topAnimationIteration:E.animationIteration,topAnimationStart:E.animationStart,topBlur:E.blur,topCanPlay:E.canPlay,topCanPlayThrough:E.canPlayThrough,topClick:E.click,topContextMenu:E.contextMenu,topCopy:E.copy,topCut:E.cut,topDoubleClick:E.doubleClick,topDrag:E.drag,topDragEnd:E.dragEnd,topDragEnter:E.dragEnter,topDragExit:E.dragExit,topDragLeave:E.dragLeave,topDragOver:E.dragOver,topDragStart:E.dragStart,topDrop:E.drop,topDurationChange:E.durationChange,topEmptied:E.emptied,topEncrypted:E.encrypted,topEnded:E.ended,topError:E.error,topFocus:E.focus,topInput:E.input,topInvalid:E.invalid,topKeyDown:E.keyDown,topKeyPress:E.keyPress,topKeyUp:E.keyUp,topLoad:E.load,topLoadedData:E.loadedData,topLoadedMetadata:E.loadedMetadata,topLoadStart:E.loadStart,topMouseDown:E.mouseDown,topMouseMove:E.mouseMove,topMouseOut:E.mouseOut,topMouseOver:E.mouseOver,topMouseUp:E.mouseUp,topPaste:E.paste,topPause:E.pause,topPlay:E.play,topPlaying:E.playing,topProgress:E.progress,topRateChange:E.rateChange,topReset:E.reset,topScroll:E.scroll,topSeeked:E.seeked,topSeeking:E.seeking,topStalled:E.stalled,topSubmit:E.submit,topSuspend:E.suspend,topTimeUpdate:E.timeUpdate,topTouchCancel:E.touchCancel,topTouchEnd:E.touchEnd,topTouchMove:E.touchMove,topTouchStart:E.touchStart,topTransitionEnd:E.transitionEnd,topVolumeChange:E.volumeChange,topWaiting:E.waiting,topWheel:E.wheel};for(var T in M)M[T].dependencies=[T];var S=x({onClick:null}),k={};function C(t){return"."+t._rootNodeID}var I={eventTypes:E,extractEvents:function(t,e,n,r){var o,s=M[t];if(!s)return null;switch(t){case w.topAbort:case w.topCanPlay:case w.topCanPlayThrough:case w.topDurationChange:case w.topEmptied:case w.topEncrypted:case w.topEnded:case w.topError:case w.topInput:case w.topInvalid:case w.topLoad:case w.topLoadedData:case w.topLoadedMetadata:case w.topLoadStart:case w.topPause:case w.topPlay:case w.topPlaying:case w.topProgress:case w.topRateChange:case w.topReset:case w.topSeeked:case w.topSeeking:case w.topStalled:case w.topSubmit:case w.topSuspend:case w.topTimeUpdate:case w.topVolumeChange:case w.topWaiting:o=u;break;case w.topKeyPress:if(0===b(n))return null;case w.topKeyDown:case w.topKeyUp:o=d;break;case w.topBlur:case w.topFocus:o=h;break;case w.topClick:if(2===n.button)return null;case w.topContextMenu:case w.topDoubleClick:case w.topMouseDown:case w.topMouseMove:case w.topMouseOut:case w.topMouseOver:case w.topMouseUp:o=p;break;case w.topDrag:case w.topDragEnd:case w.topDragEnter:case w.topDragExit:case w.topDragLeave:case w.topDragOver:case w.topDragStart:case w.topDrop:o=f;break;case w.topTouchCancel:case w.topTouchEnd:case w.topTouchMove:case w.topTouchStart:o=m;break;case w.topAnimationEnd:case w.topAnimationIteration:case w.topAnimationStart:o=l;break;case w.topTransitionEnd:o=g;break;case w.topScroll:o=_;break;case w.topWheel:o=y;break;case w.topCopy:case w.topCut:case w.topPaste:o=c}o||i("86",t);var v=o.getPooled(s,e,n,r);return a.accumulateTwoPhaseDispatches(v),v},didPutListener:function(t,e,n){if(e===S){var i=C(t),r=s.getNodeFromInstance(t);k[i]||(k[i]=o.listen(r,"click",v))}},willDeleteListener:function(t,e){if(e===S){var n=C(t);k[n].remove(),delete k[n]}}};t.exports=I},1500:(t,e,n)=>{"use strict";var i=n(674);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{animationName:null,elapsedTime:null,pseudoElement:null}),t.exports=r},888:(t,e,n)=>{"use strict";var i=n(674),r={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};function o(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(o,r),t.exports=o},4900:(t,e,n)=>{"use strict";var i=n(674);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{data:null}),t.exports=r},7980:(t,e,n)=>{"use strict";var i=n(3590);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{dataTransfer:null}),t.exports=r},674:(t,e,n)=>{"use strict";var i=n(7418),r=n(3303),o=n(139),a=(n(3620),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),s={type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function l(t,e,n,i){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var r=this.constructor.Interface;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];s?this[a]=s(n):"target"===a?this.target=i:this[a]=n[a]}var l=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=l?o.thatReturnsTrue:o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse,this}i(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<a.length;n++)this[a[n]]=null}}),l.Interface=s,l.augmentClass=function(t,e){var n=this,o=function(){};o.prototype=n.prototype;var a=new o;i(a,t.prototype),t.prototype=a,t.prototype.constructor=t,t.Interface=i({},n.Interface,e),t.augmentClass=n.augmentClass,r.addPoolingTo(t,r.fourArgumentPooler)},r.addPoolingTo(l,r.fourArgumentPooler),t.exports=l},270:(t,e,n)=>{"use strict";var i=n(6062);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{relatedTarget:null}),t.exports=r},6259:(t,e,n)=>{"use strict";var i=n(674);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{data:null}),t.exports=r},7873:(t,e,n)=>{"use strict";var i=n(6062),r=n(8362),o={key:n(2726),location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:n(9827),charCode:function(t){return"keypress"===t.type?r(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?r(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};function a(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(a,o),t.exports=a},3590:(t,e,n)=>{"use strict";var i=n(6062),r=n(7987),o={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:n(9827),button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+r.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+r.currentScrollTop}};function a(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(a,o),t.exports=a},4846:(t,e,n)=>{"use strict";var i=n(6062),r={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:n(9827)};function o(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(o,r),t.exports=o},1693:(t,e,n)=>{"use strict";var i=n(674);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{propertyName:null,elapsedTime:null,pseudoElement:null}),t.exports=r},6062:(t,e,n)=>{"use strict";var i=n(674),r=n(3749),o={view:function(t){if(t.view)return t.view;var e=r(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};function a(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(a,o),t.exports=a},5181:(t,e,n)=>{"use strict";var i=n(3590);function r(t,e,n,r){return i.call(this,t,e,n,r)}i.augmentClass(r,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),t.exports=r},5316:(t,e,n)=>{"use strict";var i=n(2317),r=(n(3759),{Mixin:{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,r,o,a,s,l){var c,u;this.isInTransaction()&&i("27");try{this._isInTransaction=!0,c=!0,this.initializeAll(0),u=t.call(e,n,r,o,a,s,l),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(t){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return u},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var i=e[n];try{this.wrapperInitData[n]=r.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===r.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(t){}}}},closeAll:function(t){this.isInTransaction()||i("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o,a=e[n],s=this.wrapperInitData[n];try{o=!0,s!==r.OBSERVED_ERROR&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(t){}}}this.wrapperInitData.length=0}},OBSERVED_ERROR:{}});t.exports=r},7987:t=>{"use strict";var e={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){e.currentScrollLeft=t.x,e.currentScrollTop=t.y}};t.exports=e},1317:(t,e,n)=>{"use strict";var i=n(2317);n(3759),t.exports=function(t,e){return null==e&&i("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}},6319:t=>{"use strict";var e=65521;t.exports=function(t){for(var n=1,i=0,r=0,o=t.length,a=-4&o;r<a;){for(var s=Math.min(r+4096,a);r<s;r+=4)i+=(n+=t.charCodeAt(r))+(n+=t.charCodeAt(r+1))+(n+=t.charCodeAt(r+2))+(n+=t.charCodeAt(r+3));n%=e,i%=e}for(;r<o;r++)i+=n+=t.charCodeAt(r);return(n%=e)|(i%=e)<<16}},3545:t=>{"use strict";t.exports=!1},5118:(t,e,n)=>{"use strict";var i=n(2317),r=n(727),o=n(1399);n(3759),n(3620),"undefined"!=typeof process&&process.env;var a={};t.exports=function(t,e,n,s,l,c){for(var u in t)if(t.hasOwnProperty(u)){var h;try{"function"!=typeof t[u]&&i("84",s||"React class",r[n],u),h=t[u](e,u,s,n,null,o)}catch(t){h=t}h instanceof Error&&!(h.message in a)&&(a[h.message]=!0)}}},398:t=>{"use strict";t.exports=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction((function(){return t(e,n,i,r)}))}:t}},571:(t,e,n)=>{"use strict";var i=n(5373),r=(n(3620),i.isUnitlessNumber);t.exports=function(t,e,n){return null==e||"boolean"==typeof e||""===e?"":isNaN(e)||0===e||r.hasOwnProperty(t)&&r[t]?""+e:("string"==typeof e&&(e=e.trim()),e+"px")}},6570:t=>{"use strict";var e=/["'&<>]/;t.exports=function(t){return"boolean"==typeof t||"number"==typeof t?""+t:function(t){var n,i=""+t,r=e.exec(i);if(!r)return i;var o="",a=0,s=0;for(a=r.index;a<i.length;a++){switch(i.charCodeAt(a)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#x27;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}s!==a&&(o+=i.substring(s,a)),s=a+1,o+=n}return s!==a?o+i.substring(s,a):o}(t)}},2116:(t,e,n)=>{"use strict";var i=n(2317),r=(n(4066),n(3990)),o=n(2715),a=n(3333);n(3759),n(3620),t.exports=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=o.get(t);if(e)return(e=a(e))?r.getNodeFromInstance(e):null;"function"==typeof t.render?i("44"):i("45",Object.keys(t))}},5489:(t,e,n)=>{"use strict";n(6037);var i=n(9898);function r(t,e,n,i){if(t&&"object"==typeof t){var r=t;void 0===r[n]&&null!=e&&(r[n]=e)}}n(3620),"undefined"!=typeof process&&process.env,t.exports=function(t,e){if(null==t)return t;var n={};return i(t,r,n),n}},6810:t=>{"use strict";t.exports=function(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}},8362:t=>{"use strict";t.exports=function(t){var e,n=t.keyCode;return"charCode"in t?0===(e=t.charCode)&&13===n&&(e=13):e=n,e>=32||13===e?e:0}},2726:(t,e,n)=>{"use strict";var i=n(8362),r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=function(t){if(t.key){var e=r[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?o[t.keyCode]||"Unidentified":""}},9827:t=>{"use strict";var e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n(t){var n=this.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var i=e[t];return!!i&&!!n[i]}t.exports=function(t){return n}},3749:t=>{"use strict";t.exports=function(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}},3333:(t,e,n)=>{"use strict";var i=n(7807);t.exports=function(t){for(var e;(e=t._renderedNodeType)===i.COMPOSITE;)t=t._renderedComponent;return e===i.HOST?t._renderedComponent:e===i.EMPTY?null:void 0}},2183:t=>{"use strict";var e="function"==typeof Symbol&&Symbol.iterator;t.exports=function(t){var n=t&&(e&&t[e]||t["@@iterator"]);if("function"==typeof n)return n}},2271:t=>{"use strict";function e(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function n(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}t.exports=function(t,i){for(var r=e(t),o=0,a=0;r;){if(3===r.nodeType){if(a=o+r.textContent.length,o<=i&&a>=i)return{node:r,offset:i-o};o=a}r=e(n(r))}}},2706:(t,e,n)=>{"use strict";var i=n(6508),r=null;t.exports=function(){return!r&&i.canUseDOM&&(r="textContent"in document.documentElement?"textContent":"innerText"),r}},3705:(t,e,n)=>{"use strict";var i=n(6508);function r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}var o={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},a={},s={};i.canUseDOM&&(s=document.createElement("div").style,"AnimationEvent"in window||(delete o.animationend.animation,delete o.animationiteration.animation,delete o.animationstart.animation),"TransitionEvent"in window||delete o.transitionend.transition),t.exports=function(t){if(a[t])return a[t];if(!o[t])return t;var e=o[t];for(var n in e)if(e.hasOwnProperty(n)&&n in s)return a[t]=e[n];return""}},4301:(t,e,n)=>{"use strict";var i=n(2317),r=n(7418),o=n(5238),a=n(1491),s=n(657),l=(n(3759),n(3620),function(t){this.construct(t)});function c(t,e){var n,r;if(null===t||!1===t)n=a.create(c);else if("object"==typeof t){var o=t;(!o||"function"!=typeof o.type&&"string"!=typeof o.type)&&i("130",null==o.type?o.type:typeof o.type,function(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}(o._owner)),"string"==typeof o.type?n=s.createInternalComponent(o):"function"==typeof(r=o.type)&&void 0!==r.prototype&&"function"==typeof r.prototype.mountComponent&&"function"==typeof r.prototype.receiveComponent?(n=new o.type(o)).getHostNode||(n.getHostNode=n.getNativeNode):n=new l(o)}else"string"==typeof t||"number"==typeof t?n=s.createInstanceForText(t):i("131",typeof t);return n._mountIndex=0,n._mountImage=null,n}r(l.prototype,o.Mixin,{_instantiateReactComponent:c}),t.exports=c},1708:(t,e,n)=>{"use strict";var i,r=n(6508);r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(t,e){if(!r.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"==typeof a[n]}return!o&&i&&"wheel"===t&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}},3980:t=>{"use strict";var e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=function(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===n?!!e[t.type]:"textarea"===n}},661:(t,e,n)=>{"use strict";var i=n(2317),r=n(1506);n(3759),t.exports=function(t){return r.isValidElement(t)||i("143"),t}},5431:(t,e,n)=>{"use strict";var i=n(6570);t.exports=function(t){return'"'+i(t)+'"'}},2317:t=>{"use strict";t.exports=function(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,i=0;i<e;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var r=new Error(n);throw r.name="Invariant Violation",r.framesToPop=1,r}},5172:(t,e,n)=>{"use strict";var i=n(728);t.exports=i.renderSubtreeIntoContainer},2100:(t,e,n)=>{"use strict";var i,r=n(6508),o=n(6722),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=n(398)((function(t,e){if(t.namespaceURI!==o.svg||"innerHTML"in t)t.innerHTML=e;else{(i=i||document.createElement("div")).innerHTML="<svg>"+e+"</svg>";for(var n=i.firstChild.childNodes,r=0;r<n.length;r++)t.appendChild(n[r])}}));if(r.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(l=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),c=null}t.exports=l},9712:(t,e,n)=>{"use strict";var i=n(6508),r=n(6570),o=n(2100),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};i.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){o(t,r(e))})),t.exports=a},588:t=>{"use strict";t.exports=function(t,e){var n=null===t||!1===t,i=null===e||!1===e;if(n||i)return n===i;var r=typeof t,o=typeof e;return"string"===r||"number"===r?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}},9898:(t,e,n)=>{"use strict";var i=n(2317),r=(n(4066),n(1506)),o=n(2183),a=(n(3759),n(6037));function s(t,e){return t&&"object"==typeof t&&null!=t.key?a.escape(t.key):e.toString(36)}function l(t,e,n,c){var u,h=typeof t;if("undefined"!==h&&"boolean"!==h||(t=null),null===t||"string"===h||"number"===h||r.isValidElement(t))return n(c,t,""===e?"."+s(t,0):e),1;var d=0,p=""===e?".":e+":";if(Array.isArray(t))for(var f=0;f<t.length;f++)d+=l(u=t[f],p+s(u,f),n,c);else{var m=o(t);if(m){var g,_=m.call(t);if(m!==t.entries)for(var y=0;!(g=_.next()).done;)d+=l(u=g.value,p+s(u,y++),n,c);else for(;!(g=_.next()).done;){var v=g.value;v&&(d+=l(u=v[1],p+a.escape(v[0])+":"+s(u,0),n,c))}}else if("object"===h){var b=String(t);i("31","[object Object]"===b?"object with keys {"+Object.keys(t).join(", ")+"}":b,"")}}return d}n(3620),t.exports=function(t,e,n){return null==t?0:l(t,"",e,n)}},6577:(t,e,n)=>{"use strict";n(7418);var i=n(139),r=(n(3620),i);t.exports=r},7588:(t,e,n)=>{"use strict";t.exports=n(8954)},3697:t=>{"use strict";var e=Object,n=TypeError;t.exports=function(){if(null!=this&&this!==e(this))throw new n("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t}},2847:(t,e,n)=>{"use strict";var i=n(4289),r=n(5559),o=n(3697),a=n(1721),s=n(2753),l=r(o);i(l,{getPolyfill:a,implementation:o,shim:s}),t.exports=l},1721:(t,e,n)=>{"use strict";var i=n(3697),r=n(4289).supportsDescriptors,o=Object.getOwnPropertyDescriptor,a=TypeError;t.exports=function(){if(!r)throw new a("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=o(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return i}},2753:(t,e,n)=>{"use strict";var i=n(4289).supportsDescriptors,r=n(1721),o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,s=TypeError,l=Object.getPrototypeOf,c=/a/;t.exports=function(){if(!i||!l)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=r(),e=l(c),n=o(e,"flags");return n&&n.get===t||a(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}},8639:function(t,e){!function(t){"use strict";const e=134217729;function n(t,e,n,i,r){let o,a,s,l,c=e[0],u=i[0],h=0,d=0;u>c==u>-c?(o=c,c=e[++h]):(o=u,u=i[++d]);let p=0;if(h<t&&d<n)for(u>c==u>-c?(s=o-((a=c+o)-c),c=e[++h]):(s=o-((a=u+o)-u),u=i[++d]),o=a,0!==s&&(r[p++]=s);h<t&&d<n;)u>c==u>-c?(s=o-((a=o+c)-(l=a-o))+(c-l),c=e[++h]):(s=o-((a=o+u)-(l=a-o))+(u-l),u=i[++d]),o=a,0!==s&&(r[p++]=s);for(;h<t;)s=o-((a=o+c)-(l=a-o))+(c-l),c=e[++h],o=a,0!==s&&(r[p++]=s);for(;d<n;)s=o-((a=o+u)-(l=a-o))+(u-l),u=i[++d],o=a,0!==s&&(r[p++]=s);return 0===o&&0!==p||(r[p++]=o),p}function i(t){return new Float64Array(t)}const r=i(4),o=i(8),a=i(12),s=i(16),l=i(4);t.orient2d=function(t,i,c,u,h,d){const p=(i-d)*(c-h),f=(t-h)*(u-d),m=p-f;if(0===p||0===f||p>0!=f>0)return m;const g=Math.abs(p+f);return Math.abs(m)>=33306690738754716e-32*g?m:-function(t,i,c,u,h,d,p){let f,m,g,_,y,v,b,x,w,E,M,T,S,k,C,I,L,D;const A=t-h,P=c-h,z=i-d,N=u-d;y=(C=(x=A-(b=(v=e*A)-(v-A)))*(E=N-(w=(v=e*N)-(v-N)))-((k=A*N)-b*w-x*w-b*E))-(M=C-(L=(x=z-(b=(v=e*z)-(v-z)))*(E=P-(w=(v=e*P)-(v-P)))-((I=z*P)-b*w-x*w-b*E))),r[0]=C-(M+y)+(y-L),y=(S=k-((T=k+M)-(y=T-k))+(M-y))-(M=S-I),r[1]=S-(M+y)+(y-I),y=(D=T+M)-T,r[2]=T-(D-y)+(M-y),r[3]=D;let R=function(t,e){let n=e[0];for(let t=1;t<4;t++)n+=e[t];return n}(0,r),O=22204460492503146e-32*p;if(R>=O||-R>=O)return R;if(f=t-(A+(y=t-A))+(y-h),g=c-(P+(y=c-P))+(y-h),m=i-(z+(y=i-z))+(y-d),_=u-(N+(y=u-N))+(y-d),0===f&&0===m&&0===g&&0===_)return R;if(O=11093356479670487e-47*p+33306690738754706e-32*Math.abs(R),(R+=A*_+N*f-(z*g+P*m))>=O||-R>=O)return R;y=(C=(x=f-(b=(v=e*f)-(v-f)))*(E=N-(w=(v=e*N)-(v-N)))-((k=f*N)-b*w-x*w-b*E))-(M=C-(L=(x=m-(b=(v=e*m)-(v-m)))*(E=P-(w=(v=e*P)-(v-P)))-((I=m*P)-b*w-x*w-b*E))),l[0]=C-(M+y)+(y-L),y=(S=k-((T=k+M)-(y=T-k))+(M-y))-(M=S-I),l[1]=S-(M+y)+(y-I),y=(D=T+M)-T,l[2]=T-(D-y)+(M-y),l[3]=D;const F=n(4,r,4,l,o);y=(C=(x=A-(b=(v=e*A)-(v-A)))*(E=_-(w=(v=e*_)-(v-_)))-((k=A*_)-b*w-x*w-b*E))-(M=C-(L=(x=z-(b=(v=e*z)-(v-z)))*(E=g-(w=(v=e*g)-(v-g)))-((I=z*g)-b*w-x*w-b*E))),l[0]=C-(M+y)+(y-L),y=(S=k-((T=k+M)-(y=T-k))+(M-y))-(M=S-I),l[1]=S-(M+y)+(y-I),y=(D=T+M)-T,l[2]=T-(D-y)+(M-y),l[3]=D;const B=n(F,o,4,l,a);y=(C=(x=f-(b=(v=e*f)-(v-f)))*(E=_-(w=(v=e*_)-(v-_)))-((k=f*_)-b*w-x*w-b*E))-(M=C-(L=(x=m-(b=(v=e*m)-(v-m)))*(E=g-(w=(v=e*g)-(v-g)))-((I=m*g)-b*w-x*w-b*E))),l[0]=C-(M+y)+(y-L),y=(S=k-((T=k+M)-(y=T-k))+(M-y))-(M=S-I),l[1]=S-(M+y)+(y-I),y=(D=T+M)-T,l[2]=T-(D-y)+(M-y),l[3]=D;const U=n(B,a,4,l,s);return s[U-1]}(t,i,c,u,h,d,g)},t.orient2dfast=function(t,e,n,i,r,o){return(e-o)*(n-r)-(t-r)*(i-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},2345:(t,e,n)=>{var i,r;i=[n(3609)],void 0===(r=function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;return e&&e.requirejs||(e?i=e:e={},function(t){var e,o,a,s,l={},c={},u={},h={},d=Object.prototype.hasOwnProperty,p=[].slice,f=/\.js$/;function m(t,e){return d.call(t,e)}function g(t,e){var n,i,r,o,a,s,l,c,h,d,p,m=e&&e.split("/"),g=u.map,_=g&&g["*"]||{};if(t&&"."===t.charAt(0))if(e){for(a=(t=t.split("/")).length-1,u.nodeIdCompat&&f.test(t[a])&&(t[a]=t[a].replace(f,"")),t=m.slice(0,m.length-1).concat(t),h=0;h<t.length;h+=1)if("."===(p=t[h]))t.splice(h,1),h-=1;else if(".."===p){if(1===h&&(".."===t[2]||".."===t[0]))break;h>0&&(t.splice(h-1,2),h-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((m||_)&&g){for(h=(n=t.split("/")).length;h>0;h-=1){if(i=n.slice(0,h).join("/"),m)for(d=m.length;d>0;d-=1)if((r=g[m.slice(0,d).join("/")])&&(r=r[i])){o=r,s=h;break}if(o)break;!l&&_&&_[i]&&(l=_[i],c=h)}!o&&l&&(o=l,s=c),o&&(n.splice(0,s,o),t=n.join("/"))}return t}function _(e,n){return function(){var i=p.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),o.apply(t,i.concat([e,n]))}}function y(t){return function(e){l[t]=e}}function v(n){if(m(c,n)){var i=c[n];delete c[n],h[n]=!0,e.apply(t,i)}if(!m(l,n)&&!m(h,n))throw new Error("No "+n);return l[n]}function b(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function x(t){return function(){return u&&u.config&&u.config[t]||{}}}a=function(t,e){var n,i=b(t),r=i[0];return t=i[1],r&&(n=v(r=g(r,e))),r?t=n&&n.normalize?n.normalize(t,function(t){return function(e){return g(e,t)}}(e)):g(t,e):(r=(i=b(t=g(t,e)))[0],t=i[1],r&&(n=v(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},s={require:function(t){return _(t)},exports:function(t){var e=l[t];return void 0!==e?e:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:x(t)}}},e=function(e,n,i,r){var o,u,d,p,f,g,b=[],x=typeof i;if(r=r||e,"undefined"===x||"function"===x){for(n=!n.length&&i.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if("require"===(u=(p=a(n[f],r)).f))b[f]=s.require(e);else if("exports"===u)b[f]=s.exports(e),g=!0;else if("module"===u)o=b[f]=s.module(e);else if(m(l,u)||m(c,u)||m(h,u))b[f]=v(u);else{if(!p.p)throw new Error(e+" missing "+u);p.p.load(p.n,_(r,!0),y(u),{}),b[f]=l[u]}d=i?i.apply(l[e],b):void 0,e&&(o&&o.exports!==t&&o.exports!==l[e]?l[e]=o.exports:d===t&&g||(l[e]=d))}else e&&(l[e]=i)},n=i=o=function(n,i,r,l,c){if("string"==typeof n)return s[n]?s[n](i):v(a(n,i).f);if(!n.splice){if((u=n).deps&&o(u.deps,u.callback),!i)return;i.splice?(n=i,i=r,r=null):n=t}return i=i||function(){},"function"==typeof r&&(r=l,l=c),l?e(t,n,i,r):setTimeout((function(){e(t,n,i,r)}),4),o},o.config=function(t){return o(t)},n._defined=l,(r=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),m(l,t)||m(c,t)||(c[t]=[t,e,n])}).amd={jQuery:!0}}(),e.requirejs=n,e.require=i,e.define=r),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function n(t){var e=t.prototype,n=[];for(var i in e)"function"==typeof e[i]&&"constructor"!==i&&n.push(i);return n}e.Extend=function(t,e){var n={}.hasOwnProperty;function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},e.Decorate=function(t,e){var i=n(e),r=n(t);function o(){var n=Array.prototype.unshift,i=e.prototype.constructor.length,r=t.prototype.constructor;i>0&&(n.call(arguments,t.prototype.constructor),r=e.prototype.constructor),r.apply(this,arguments)}e.displayName=t.displayName,o.prototype=new function(){this.constructor=o};for(var a=0;a<r.length;a++){var s=r[a];o.prototype[s]=t.prototype[s]}for(var l=function(t){var n=function(){};t in o.prototype&&(n=o.prototype[t]);var i=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,n),i.apply(this,arguments)}},c=0;c<i.length;c++){var u=i[c];o.prototype[u]=l(u)}return o};var i=function(){this.listeners={}};return i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice,n=e.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].apply(this,e)},e.Observable=i,e.generateChars=function(t){for(var e="",n=0;n<t;n++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var r=0;r<n.length;r++){var o=n[r];(o=o.substring(0,1).toLowerCase()+o.substring(1))in i||(i[o]={}),r==n.length-1&&(i[o]=t[e]),i=i[o]}delete t[e]}}return t},e.hasScroll=function(e,n){var i=t(n),r=n.style.overflowX,o=n.style.overflowY;return(r!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===r||"scroll"===o||i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.appendMany=function(e,n){if("1.7"===t.fn.jquery.substr(0,3)){var i=t();t.map(n,(function(t){i=i.add(t)})),n=i}e.append(n)},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(e.message);i.append(n(r(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],r=this.option(i);e.push(r)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var e=this;this.data.current((function(n){var i=t.map(n,(function(t){return t.id.toString()}));e.$results.find(".select2-results__option[aria-selected]").each((function(){var e=t(this),n=t.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(r,i)>-1?e.attr("aria-selected","true"):e.attr("aria-selected","false")}))}))},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},n=this.option(e);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(e){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};for(var r in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(n.id=e._resultId),e.title&&(n.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var o=i[r];n.setAttribute(r,o)}if(e.children){var a=t(n),s=document.createElement("strong");s.className="select2-results__group",t(s),this.template(e,s);for(var l=[],c=0;c<e.children.length;c++){var u=e.children[c],h=this.option(u);l.push(h)}var d=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(l),a.append(s),a.append(d)}else this.template(e,n);return t.data(n,"data",e),n},n.prototype.bind=function(e,n){var i=this,r=e.id+"-results";this.$results.attr("id",r),e.on("results:all",(function(t){i.clear(),i.append(t.data),e.isOpen()&&(i.setClasses(),i.highlightFirstItem())})),e.on("results:append",(function(t){i.append(t.data),e.isOpen()&&i.setClasses()})),e.on("query",(function(t){i.hideMessages(),i.showLoading(t)})),e.on("select",(function(){e.isOpen()&&(i.setClasses(),i.highlightFirstItem())})),e.on("unselect",(function(){e.isOpen()&&(i.setClasses(),i.highlightFirstItem())})),e.on("open",(function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()})),e.on("close",(function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")})),e.on("results:toggle",(function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),e.on("results:select",(function(){var t=i.getHighlightedResults();if(0!==t.length){var e=t.data("data");"true"==t.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:e})}})),e.on("results:previous",(function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t);if(0!==n){var r=n-1;0===t.length&&(r=0);var o=e.eq(r);o.trigger("mouseenter");var a=i.$results.offset().top,s=o.offset().top,l=i.$results.scrollTop()+(s-a);0===r?i.$results.scrollTop(0):s-a<0&&i.$results.scrollTop(l)}})),e.on("results:next",(function(){var t=i.getHighlightedResults(),e=i.$results.find("[aria-selected]"),n=e.index(t)+1;if(!(n>=e.length)){var r=e.eq(n);r.trigger("mouseenter");var o=i.$results.offset().top+i.$results.outerHeight(!1),a=r.offset().top+r.outerHeight(!1),s=i.$results.scrollTop()+a-o;0===n?i.$results.scrollTop(0):a>o&&i.$results.scrollTop(s)}})),e.on("results:focus",(function(t){t.element.addClass("select2-results__option--highlighted")})),e.on("results:message",(function(t){i.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-e+t.deltaY,r=t.deltaY>0&&e-t.deltaY<=0,o=t.deltaY<0&&n<=i.$results.height();r?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):o&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(e){var n=t(this),r=n.data("data");"true"!==n.attr("aria-selected")?i.trigger("select",{originalEvent:e,data:r}):i.options.get("multiple")?i.trigger("unselect",{originalEvent:e,data:r}):i.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(e){var n=t(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:t(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),n=this.$results.offset().top,i=t.offset().top,r=this.$results.scrollTop()+(i-n),o=i-n;r-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(r)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),o=i(e,n);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=r(o):t(n).append(o)},n})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e,e},i.prototype.bind=function(t,e){var i=this,r=(t.id,t.id+"-results");this.container=t,this.$selection.on("focus",(function(t){i.trigger("focus",t)})),this.$selection.on("blur",(function(t){i._handleBlur(t)})),this.$selection.on("keydown",(function(t){i.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){i.update(t.data)})),t.on("open",(function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",r),i._attachCloseHandler(t)})),t.on("close",(function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(t)})),t.on("enable",(function(){i.$selection.attr("tabindex",i._tabindex)})),t.on("disable",(function(){i.$selection.attr("tabindex","-1")}))},i.prototype._handleBlur=function(e){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)}),1)},i.prototype._attachCloseHandler=function(e){t(document.body).on("mousedown.select2."+e.id,(function(e){var n=t(e.target).closest(".select2");t(".select2.select2-container--open").each((function(){var e=t(this);this!=n[0]&&e.data("element").select2("close")}))}))},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){e.find(".selection").append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},i})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,n,i){function r(){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,e),r.prototype.render=function(){var t=r.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},r.prototype.bind=function(t,e){var n=this;r.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",(function(t){1===t.which&&n.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||n.$selection.focus()})),t.on("selection:update",(function(t){n.update(t.data)}))},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},r.prototype.selectionContainer=function(){return t("<span></span>")},r.prototype.update=function(t){if(0!==t.length){var e=t[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(e,n);n.empty().append(i),n.prop("title",e.title||e.text)}else this.clear()},r})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,n){function i(t,e){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(e,n){var r=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(t){r.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!r.options.get("disabled")){var n=t(this).parent().data("data");r.trigger("unselect",{originalEvent:e,data:n})}}))},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},i.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var r=t[i],o=this.selectionContainer(),a=this.display(r,o);o.append(a),o.prop("title",r.title||r.text),o.data("data",r),e.push(o)}var s=this.$selection.find(".select2-selection__rendered");n.appendMany(s,e)}},i})),e.define("select2/selection/placeholder",["../utils"],(function(t){function e(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();return n.html(this.display(e)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},e.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||n)return t.call(this,e);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},e})),e.define("select2/selection/allowClear",["jquery","../keys"],(function(t,e){function n(){}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){i._handleClear(t)})),e.on("keypress",(function(t){i._handleKeyboardClear(t,e)}))},n.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var o={data:i[r]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||n.which!=e.DELETE&&n.which!=e.BACKSPACE||this._handleClear(n)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=t('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e,n){t.call(this,e,n)}return i.prototype.render=function(e){var n=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=e.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(t,e,i){var r=this;t.call(this,e,i),e.on("open",(function(){r.$search.trigger("focus")})),e.on("close",(function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")})),e.on("enable",(function(){r.$search.prop("disabled",!1),r._transferTabIndex()})),e.on("disable",(function(){r.$search.prop("disabled",!0)})),e.on("focus",(function(t){r.$search.trigger("focus")})),e.on("results:focus",(function(t){r.$search.attr("aria-activedescendant",t.id)})),this.$selection.on("focusin",".select2-search--inline",(function(t){r.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){r._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===r.$search.val()){var e=r.$searchContainer.prev(".select2-selection__choice");if(e.length>0){var i=e.data("data");r.searchRemoveChoice(i),t.preventDefault()}}}));var o=document.documentMode,a=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){a?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(a&&"input"===t.type)r.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=n.SHIFT&&e!=n.CTRL&&e!=n.ALT&&e!=n.TAB&&r.handleSearch(t)}}))},i.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},i.prototype.update=function(t,e){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var t;t=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em",this.$search.css("width",t)},i})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,n,i){var r=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],a=["opening","closing","selecting","unselecting"];e.call(this,n,i),n.on("*",(function(e,n){if(-1!==t.inArray(e,o)){n=n||{};var i=t.Event("select2:"+e,{params:n});r.$element.trigger(i),-1!==t.inArray(e,a)&&(n.prevented=i.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n})),e.define("select2/diacritics",[],(function(){return{"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,n){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+t.generateChars(4),i},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=[],i=this;this.$element.find(":selected").each((function(){var t=n(this),r=i.item(t);e.push(r)})),t(e)},i.prototype.select=function(t){var e=this;if(t.selected=!0,n(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current((function(i){var r=[];(t=[t]).push.apply(t,i);for(var o=0;o<t.length;o++){var a=t[o].id;-1===n.inArray(a,r)&&r.push(a)}e.$element.val(r),e.$element.trigger("change")}));else{var i=t.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,n(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("change");this.current((function(i){for(var r=[],o=0;o<i.length;o++){var a=i[o].id;a!==t.id&&-1===n.inArray(a,r)&&r.push(a)}e.$element.val(r),e.$element.trigger("change")}))}},i.prototype.bind=function(t,e){var n=this;this.container=t,t.on("select",(function(t){n.select(t.data)})),t.on("unselect",(function(t){n.unselect(t.data)}))},i.prototype.destroy=function(){this.$element.find("*").each((function(){n.removeData(this,"data")}))},i.prototype.query=function(t,e){var i=[],r=this;this.$element.children().each((function(){var e=n(this);if(e.is("option")||e.is("optgroup")){var o=r.item(e),a=r.matches(t,o);null!==a&&i.push(a)}})),e({results:i})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var e;t.children?(e=document.createElement("optgroup")).label=t.text:void 0!==(e=document.createElement("option")).textContent?e.textContent=t.text:e.innerText=t.text,t.id&&(e.value=t.id),t.disabled&&(e.disabled=!0),t.selected&&(e.selected=!0),t.title&&(e.title=t.title);var i=n(e),r=this._normalizeItem(t);return r.element=e,n.data(e,"data",r),i},i.prototype.item=function(t){var e={};if(null!=(e=n.data(t[0],"data")))return e;if(t.is("option"))e={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){e={text:t.prop("label"),children:[],title:t.prop("title")};for(var i=t.children("option"),r=[],o=0;o<i.length;o++){var a=n(i[o]),s=this.item(a);r.push(s)}e.children=r}return(e=this._normalizeItem(e)).element=t[0],n.data(t[0],"data",e),e},i.prototype._normalizeItem=function(t){n.isPlainObject(t)||(t={id:t,text:t});return null!=(t=n.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},{selected:!1,disabled:!1},t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,n){function i(t,e){var n=e.get("data")||[];i.__super__.constructor.call(this,t,e),this.addOptions(this.convertToOptions(n))}return e.Extend(i,t),i.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,n){return n.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){var i=this,r=this.$element.find("option"),o=r.map((function(){return i.item(n(this)).id})).get(),a=[];function s(t){return function(){return n(this).val()==t.id}}for(var l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(n.inArray(c.id,o)>=0){var u=r.filter(s(c)),h=this.item(u),d=n.extend(!0,{},c,h),p=this.option(d);u.replaceWith(p)}else{var f=this.option(c);if(c.children){var m=this.convertToOptions(c.children);e.appendMany(f,m)}a.push(f)}}return a},i})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,n){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return n.extend({},t,{q:t.term})},transport:function(t,e,i){var r=n.ajax(t);return r.then(e),r.fail(i),r}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){var i=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var r=n.extend({type:"GET"},this.ajaxOptions);function o(){var o=r.transport(r,(function(r){var o=i.processResults(r,t);i.options.get("debug")&&window.console&&console.error&&(o&&o.results&&n.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(o)}),(function(){o.status&&"0"===o.status||i.trigger("results:message",{message:"errorLoading"})}));i._request=o}"function"==typeof r.url&&(r.url=r.url.call(this.$element,t)),"function"==typeof r.data&&(r.data=r.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(o,this.ajaxOptions.delay)):o()},i})),e.define("select2/data/tags",["jquery"],(function(t){function e(e,n,i){var r=i.get("tags"),o=i.get("createTag");void 0!==o&&(this.createTag=o);var a=i.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,n,i),t.isArray(r))for(var s=0;s<r.length;s++){var l=r[s],c=this._normalizeItem(l),u=this.option(c);this.$element.append(u)}}return e.prototype.query=function(t,e,n){var i=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(r,o){for(var a=r.results,s=0;s<a.length;s++){var l=a[s],c=null!=l.children&&!t({results:l.children},!0);if(l.text===e.term||c)return!o&&(r.data=a,void n(r))}if(o)return!0;var u=i.createTag(e);if(null!=u){var h=i.option(u);h.attr("data-select2-tag",!0),i.addOptions([h]),i.insertTag(a,u)}r.results=a,n(r)})):t.call(this,e,n)},e.prototype.createTag=function(e,n){var i=t.trim(n.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(e){this._lastTag,this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,n,i){var r=this;n.term=n.term||"";var o=this.tokenizer(n,this.options,(function(e){var n=r._normalizeItem(e);if(!r.$element.find("option").filter((function(){return t(this).val()===n.id})).length){var i=r.option(n);i.attr("data-select2-tag",!0),r._removeOldTags(),r.addOptions([i])}!function(t){r.trigger("select",{data:t})}(n)}));o.term!==n.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),n.term=o.term),e.call(this,n,i)},e.prototype.tokenizer=function(e,n,i,r){for(var o=i.get("tokenSeparators")||[],a=n.term,s=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};s<a.length;){var c=a[s];if(-1!==t.inArray(c,o)){var u=a.substr(0,s),h=l(t.extend({},n,{term:u}));null!=h?(r(h),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){var i=this;this.current((function(r){var o=null!=r?r.length:0;i.maximumSelectionLength>0&&o>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):t.call(i,e,n)}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.bind=function(){},n.prototype.position=function(t,e){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery","../utils"],(function(t,e){function n(){}return n.prototype.render=function(e){var n=e.call(this),i=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(e,n,i){var r=this;e.call(this,n,i),this.$search.on("keydown",(function(t){r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){r.handleSearch(t)})),n.on("open",(function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout((function(){r.$search.focus()}),0)})),n.on("close",(function(){r.$search.attr("tabindex",-1),r.$search.val("")})),n.on("focus",(function(){n.isOpen()&&r.$search.focus()})),n.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(r.showSearch(t)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide"))}))},n.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},n.prototype.showSearch=function(t,e){return!0},n})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;i>=0;i--){var r=e[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,n,i){var r=this;e.call(this,n,i),n.on("query",(function(t){r.lastParams=t,r.loading=!0})),n.on("query:append",(function(t){r.lastParams=t,r.loading=!0})),this.$results.on("scroll",(function(){var e=t.contains(document.documentElement,r.$loadingMore[0]);!r.loading&&e&&r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore()}))},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function n(e,n,i){this.$dropdownParent=i.get("dropdownParent")||t(document.body),e.call(this,n,i)}return n.prototype.bind=function(t,e,n){var i=this,r=!1;t.call(this,e,n),e.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(e),r||(r=!0,e.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})))})),e.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},n.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var r=this,o="scroll.select2."+i.id,a="resize.select2."+i.id,s="orientationchange.select2."+i.id,l=this.$container.parents().filter(e.hasScroll);l.each((function(){t(this).data("select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),l.on(o,(function(e){var n=t(this).data("select2-scroll-position");t(this).scrollTop(n.y)})),t(window).on(o+" "+a+" "+s,(function(t){r._positionDropdown(),r._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,i){var r="scroll.select2."+i.id,o="resize.select2."+i.id,a="orientationchange.select2."+i.id;this.$container.parents().filter(e.hasScroll).off(r),t(window).off(r+" "+o+" "+a)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=o.top,a.bottom=o.top+a.height;var s=this.$dropdown.outerHeight(!1),l=e.scrollTop(),c=e.scrollTop()+e.height(),u=l<o.top-s,h=c>o.bottom+s,d={left:o.left,top:a.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var f=p.offset();d.top-=f.top,d.left-=f.left,n||i||(r="below"),h||!u||n?!u&&h&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(d.top=a.top-f.top-s),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},n.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var n=0,i=0;i<e.length;i++){var r=e[i];r.children?n+=t(r.children):n++}return n}function e(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,i)}return e.prototype.showSearch=function(e,n){return!(t(n.data.results)<this.minimumResultsForSearch)&&e.call(this,n)},e})),e.define("select2/dropdown/selectOnClose",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",(function(t){i._handleSelectOnClose(t)}))},t.prototype._handleSelectOnClose=function(t,e){if(e&&null!=e.originalSelect2Event){var n=e.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var r=i.data("data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},t})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(t){i._selectTriggered(t)})),e.on("unselect",(function(t){i._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:e})},t})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,_,y,v,b,x,w,E,M,T,S,k,C){function I(){this.reset()}return I.prototype.apply=function(h){if(null==(h=t.extend(!0,{},this.defaults,h)).dataAdapter){if(null!=h.ajax?h.dataAdapter=f:null!=h.data?h.dataAdapter=p:h.dataAdapter=d,h.minimumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,_)),h.maximumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,y)),h.maximumSelectionLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,v)),h.tags&&(h.dataAdapter=c.Decorate(h.dataAdapter,m)),null==h.tokenSeparators&&null==h.tokenizer||(h.dataAdapter=c.Decorate(h.dataAdapter,g)),null!=h.query){var C=e(h.amdBase+"compat/query");h.dataAdapter=c.Decorate(h.dataAdapter,C)}if(null!=h.initSelection){var I=e(h.amdBase+"compat/initSelection");h.dataAdapter=c.Decorate(h.dataAdapter,I)}}if(null==h.resultsAdapter&&(h.resultsAdapter=n,null!=h.ajax&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,E)),null!=h.placeholder&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,w)),h.selectOnClose&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,S))),null==h.dropdownAdapter){if(h.multiple)h.dropdownAdapter=b;else{var L=c.Decorate(b,x);h.dropdownAdapter=L}if(0!==h.minimumResultsForSearch&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,T)),h.closeOnSelect&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,k)),null!=h.dropdownCssClass||null!=h.dropdownCss||null!=h.adaptDropdownCssClass){var D=e(h.amdBase+"compat/dropdownCss");h.dropdownAdapter=c.Decorate(h.dropdownAdapter,D)}h.dropdownAdapter=c.Decorate(h.dropdownAdapter,M)}if(null==h.selectionAdapter){if(h.multiple?h.selectionAdapter=r:h.selectionAdapter=i,null!=h.placeholder&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,o)),h.allowClear&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,a)),h.multiple&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,s)),null!=h.containerCssClass||null!=h.containerCss||null!=h.adaptContainerCssClass){var A=e(h.amdBase+"compat/containerCss");h.selectionAdapter=c.Decorate(h.selectionAdapter,A)}h.selectionAdapter=c.Decorate(h.selectionAdapter,l)}if("string"==typeof h.language)if(h.language.indexOf("-")>0){var P=h.language.split("-")[0];h.language=[h.language,P]}else h.language=[h.language];if(t.isArray(h.language)){var z=new u;h.language.push("en");for(var N=h.language,R=0;R<N.length;R++){var O=N[R],F={};try{F=u.loadPath(O)}catch(t){try{O=this.defaults.amdLanguageBase+O,F=u.loadPath(O)}catch(t){h.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+O+'" could not be automatically loaded. A fallback will be used instead.');continue}}z.extend(F)}h.translations=z}else{var B=u.loadPath(this.defaults.amdLanguageBase+"en"),U=new u(h.language);U.extend(B),h.translations=U}return h},I.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return h[t]||t}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:C,matcher:function n(i,r){if(""===t.trim(i.term))return r;if(r.children&&r.children.length>0){for(var o=t.extend(!0,{},r),a=r.children.length-1;a>=0;a--)null==n(i,r.children[a])&&o.children.splice(a,1);return o.children.length>0?o:n(i,o)}var s=e(r.text).toUpperCase(),l=e(i.term).toUpperCase();return s.indexOf(l)>-1?r:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},I.prototype.set=function(e,n){var i={};i[t.camelCase(e)]=n;var r=c._convertData(i);t.extend(this.defaults,r)},new I})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(t,e,n,i){function r(e,r){if(this.options=e,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var o=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,o)}}return r.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.language&&(t.prop("lang")?this.options.language=t.prop("lang").toLowerCase():t.closest("[lang]").prop("lang")&&(this.options.language=t.closest("[lang]").prop("lang"))),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),t.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),t.data("data",t.data("select2Tags")),t.data("tags",!0)),t.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",t.data("ajaxUrl")),t.data("ajax--url",t.data("ajaxUrl")));var r;r=e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset?e.extend(!0,{},t[0].dataset,t.data()):t.data();var o=e.extend(!0,{},r);for(var a in o=i._convertData(o))e.inArray(a,n)>-1||(e.isPlainObject(this.options[a])?e.extend(this.options[a],o[a]):this.options[a]=o[a]);return this},r.prototype.get=function(t){return this.options[t]},r.prototype.set=function(t,e){this.options[t]=e},r})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,n,i){var r=function(t,n){null!=t.data("select2")&&t.data("select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),r.__super__.constructor.call(this);var i=t.attr("tabindex")||0;t.data("old-tabindex",i),t.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(t,this.options);var a=this.render();this._placeContainer(a);var s=this.options.get("selectionAdapter");this.selection=new s(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var c=this.options.get("resultsAdapter");this.results=new c(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){u.trigger("selection:update",{data:t})})),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),t.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},r.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},r.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var r=t.outerWidth(!1);return r<=0?"auto":r+"px"}if("style"==e){var o=t.attr("style");if("string"!=typeof o)return null;for(var a=o.split(";"),s=0,l=a.length;s<l;s+=1){var c=a[s].replace(/\s/g,"").match(n);if(null!==c&&c.length>=1)return c[1]}return null}return e},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this.$element.on("focus.select2",(function(t){e.trigger("focus",t)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i((function(n){t.each(n,e._syncA),t.each(n,e._syncS)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",e._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",e._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,!1))},r.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerSelectionEvents=function(){var e=this,n=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(i,r){-1===t.inArray(i,n)&&e.trigger(i,r)}))},r.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,n){t.trigger(e,n)}))},r.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container.addClass("select2-container--open")})),this.on("close",(function(){t.$container.removeClass("select2-container--open")})),this.on("enable",(function(){t.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){t.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){t.$container.removeClass("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(n){t.trigger("results:all",{data:n,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(n){t.trigger("results:append",{data:n,query:e})}))})),this.on("keypress",(function(e){var n=e.which;t.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&e.altKey?(t.close(),e.preventDefault()):n===i.ENTER?(t.trigger("results:select",{}),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):n===i.UP?(t.trigger("results:previous",{}),e.preventDefault()):n===i.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(t,e){var n=!1,i=this;if(!t||!t.target||"OPTION"===t.target.nodeName||"OPTGROUP"===t.target.nodeName){if(e)if(e.addedNodes&&e.addedNodes.length>0)for(var r=0;r<e.addedNodes.length;r++)e.addedNodes[r].selected&&(n=!0);else e.removedNodes&&e.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current((function(t){i.trigger("selection:update",{data:t})}))}},r.prototype.trigger=function(t,e){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===e&&(e={}),t in i){var o=i[t],a={prevented:!1,name:t,args:e};if(n.call(this,o,a),a.prevented)return void(e.prevented=!0)}n.call(this,t,e)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},r.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var n=e[0];t.isArray(n)&&(n=t.map(n,(function(t){return t.toString()}))),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},r})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],(function(t,e,n,i){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var i=t.extend(!0,{},e);new n(t(this),i)})),this;if("string"==typeof e){var i,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=t(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),i=n[e].apply(n,o)})),t.inArray(e,r)>-1?this:i}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n})),{define:e.define,require:e.require};var n,i,r}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n}.apply(e,i))||(t.exports=r)},5697:t=>{"use strict";t.exports={eudist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var a=(t[o]||0)-(e[o]||0);r+=a*a}return n?Math.sqrt(r):r},mandist:function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++)r+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(r):r},dist:function(t,e,n){var i=Math.abs(t-e);return n?i:i*i}}},7035:(t,e,n)=>{"use strict";var i=n(5697),r=i.eudist,o=i.dist;t.exports={kmrand:function(t,e){for(var n={},i=[],r=e<<2,o=t.length,a=t[0].length>0;i.length<e&&r-- >0;){var s=t[Math.floor(Math.random()*o)],l=a?s.join("_"):""+s;n[l]||(n[l]=!0,i.push(s))}if(i.length<e)throw new Error("Error initializating clusters");return i},kmpp:function(t,e){var n=t[0].length?r:o,i=[],a=t.length,s=t[0].length>0,l=t[Math.floor(Math.random()*a)];for(s&&l.join("_"),i.push(l);i.length<e;){for(var c=[],u=i.length,h=0,d=[],p=0;p<a;p++){for(var f=1/0,m=0;m<u;m++){var g=n(t[p],i[m]);g<=f&&(f=g)}c[p]=f}for(var _=0;_<a;_++)h+=c[_];for(var y=0;y<a;y++)d[y]={i:y,v:t[y],pr:c[y]/h,cs:0};d.sort((function(t,e){return t.pr-e.pr})),d[0].cs=d[0].pr;for(var v=1;v<a;v++)d[v].cs=d[v-1].cs+d[v].pr;for(var b=Math.random(),x=0;x<a-1&&d[x++].cs<b;);i.push(d[x-1].v)}return i}}},1160:(t,e,n)=>{"use strict";var i=n(5697),r=n(7035),o=i.eudist,a=(i.mandist,i.dist,r.kmrand),s=r.kmpp;function l(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}t.exports=function(t,e,n,i){var r=[],c=[],u=[],h=[],d=!1,p=i||1e4,f=t.length,m=t[0].length,g=m>0,_=[];if(n)r="kmrand"==n?a(t,e):"kmpp"==n?s(t,e):n;else for(var y={};r.length<e;){var v=Math.floor(Math.random()*f);y[v]||(y[v]=!0,r.push(t[v]))}do{l(e,0,_);for(var b=0;b<f;b++){for(var x=1/0,w=0,E=0;E<e;E++)(h=g?o(t[b],r[E]):Math.abs(t[b]-r[E]))<=x&&(x=h,w=E);u[b]=w,_[w]++}for(var M=[],T=(c=[],0);T<e;T++)M[T]=g?l(m,0,M[T]):0,c[T]=r[T];if(g){for(var S=0;S<e;S++)r[S]=[];for(var k=0;k<f;k++)for(var C=M[u[k]],I=t[k],L=0;L<m;L++)C[L]+=I[L];d=!0;for(var D=0;D<e;D++){for(var A=r[D],P=M[D],z=c[D],N=_[D],R=0;R<m;R++)A[R]=P[R]/N||0;if(d)for(var O=0;O<m;O++)if(z[O]!=A[O]){d=!1;break}}}else{for(var F=0;F<f;F++)M[u[F]]+=t[F];for(var B=0;B<e;B++)r[B]=M[B]/_[B]||0;d=!0;for(var U=0;U<e;U++)if(c[U]!=r[U]){d=!1;break}}d=d||--p<=0}while(!d);return{it:1e4-p,k:e,idxs:u,centroids:r}}},5911:(t,e,n)=>{var i,r,o;!function(a){"use strict";r=[n(3609)],i=function(t,e){var n={beforeShow:u,move:u,change:u,show:u,hide:u,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},i=[],r=!!/msie/i.exec(window.navigator.userAgent),o=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),s=function(){var t="";if(r)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(e,n,i,r){for(var a=[],s=0;s<e.length;s++){var l=e[s];if(l){var c=tinycolor(l),u=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=tinycolor.equals(n,l)?" sp-thumb-active":"";var h=c.toString(r.preferredFormat||"rgb"),d=o?"background-color:"+c.toRgbString():"filter:"+c.toFilter();a.push('<span title="'+h+'" data-color="'+c.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{a.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+a.join("")+"</div>"}function c(c,u){var m,g,_,y,v=function(e,i){var r=t.extend({},n,e);return r.callbacks={move:d(r.move,i),change:d(r.change,i),show:d(r.show,i),hide:d(r.hide,i),beforeShow:d(r.beforeShow,i)},r}(u,c),b=v.flat,x=v.showSelectionPalette,w=v.localStorageKey,E=v.theme,M=v.callbacks,T=(m=Vt,g=10,function(){var t=this,e=arguments,n=function(){y=null,m.apply(t,e)};_&&clearTimeout(y),!_&&y||(y=setTimeout(n,g))}),S=!1,k=!1,C=0,I=0,L=0,D=0,A=0,P=0,z=0,N=0,R=0,O=0,F=1,B=[],U=[],Y={},j=v.selectionPalette.slice(0),V=v.maxSelectionSize,G="sp-dragging",q=null,H=c.ownerDocument,$=(H.body,t(c)),Z=!1,W=t(s,H).addClass(E),X=W.find(".sp-picker-container"),K=W.find(".sp-color"),J=W.find(".sp-dragger"),Q=W.find(".sp-hue"),tt=W.find(".sp-slider"),et=W.find(".sp-alpha-inner"),nt=W.find(".sp-alpha"),it=W.find(".sp-alpha-handle"),rt=W.find(".sp-input"),ot=W.find(".sp-palette"),at=W.find(".sp-initial"),st=W.find(".sp-cancel"),lt=W.find(".sp-clear"),ct=W.find(".sp-choose"),ut=W.find(".sp-palette-toggle"),ht=$.is("input"),dt=ht&&"color"===$.attr("type")&&f(),pt=ht&&!b,ft=pt?t(a).addClass(E).addClass(v.className).addClass(v.replacerClassName):t([]),mt=pt?ft:$,gt=ft.find(".sp-preview-inner"),_t=v.color||ht&&$.val(),yt=!1,vt=v.preferredFormat,bt=!v.showButtons||v.clickoutFiresChange,xt=!_t,wt=v.allowEmpty&&!dt;function Et(){if(v.showPaletteOnly&&(v.showPalette=!0),ut.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),v.palette){B=v.palette.slice(0),U=t.isArray(B[0])?B:[B],Y={};for(var e=0;e<U.length;e++)for(var n=0;n<U[e].length;n++){var i=tinycolor(U[e][n]).toRgbString();Y[i]=!0}}W.toggleClass("sp-flat",b),W.toggleClass("sp-input-disabled",!v.showInput),W.toggleClass("sp-alpha-enabled",v.showAlpha),W.toggleClass("sp-clear-enabled",wt),W.toggleClass("sp-buttons-disabled",!v.showButtons),W.toggleClass("sp-palette-buttons-disabled",!v.togglePaletteOnly),W.toggleClass("sp-palette-disabled",!v.showPalette),W.toggleClass("sp-palette-only",v.showPaletteOnly),W.toggleClass("sp-initial-disabled",!v.showInitial),W.addClass(v.className).addClass(v.containerClassName),Vt()}function Mt(){if(w&&window.localStorage){try{var e=window.localStorage[w].split(",#");e.length>1&&(delete window.localStorage[w],t.each(e,(function(t,e){Tt(e)})))}catch(t){}try{j=window.localStorage[w].split(";")}catch(t){}}}function Tt(e){if(x){var n=tinycolor(e).toRgbString();if(!Y[n]&&-1===t.inArray(n,j))for(j.push(n);j.length>V;)j.shift();if(w&&window.localStorage)try{window.localStorage[w]=j.join(";")}catch(t){}}}function St(){var e=Ft(),n=t.map(U,(function(t,n){return l(t,e,"sp-palette-row sp-palette-row-"+n,v)}));Mt(),j&&n.push(l(function(){var t=[];if(v.showPalette)for(var e=0;e<j.length;e++){var n=tinycolor(j[e]).toRgbString();Y[n]||t.push(j[e])}return t.reverse().slice(0,v.maxSelectionSize)}(),e,"sp-palette-row sp-palette-row-selection",v)),ot.html(n.join(""))}function kt(){if(v.showInitial){var t=yt,e=Ft();at.html(l([t,e],e,"sp-palette-row-initial",v))}}function Ct(){(I<=0||C<=0||D<=0)&&Vt(),k=!0,W.addClass(G),q=null,$.trigger("dragstart.spectrum",[Ft()])}function It(){k=!1,W.removeClass(G),$.trigger("dragstop.spectrum",[Ft()])}function Lt(){var t=rt.val();if(null!==t&&""!==t||!wt){var e=tinycolor(t);e.isValid()?(Ot(e),jt(!0)):rt.addClass("sp-validation-error")}else Ot(null),jt(!0)}function Dt(){S?Nt():At()}function At(){var e=t.Event("beforeShow.spectrum");S?Vt():($.trigger(e,[Ft()]),!1===M.beforeShow(Ft())||e.isDefaultPrevented()||(function(){for(var t=0;t<i.length;t++)i[t]&&i[t].hide()}(),S=!0,t(H).bind("keydown.spectrum",Pt),t(H).bind("click.spectrum",zt),t(window).bind("resize.spectrum",T),ft.addClass("sp-active"),W.removeClass("sp-hidden"),Vt(),Ut(),yt=Ft(),kt(),M.show(yt),$.trigger("show.spectrum",[yt])))}function Pt(t){27===t.keyCode&&Nt()}function zt(t){2!=t.button&&(k||(bt?jt(!0):Rt(),Nt()))}function Nt(){S&&!b&&(S=!1,t(H).unbind("keydown.spectrum",Pt),t(H).unbind("click.spectrum",zt),t(window).unbind("resize.spectrum",T),ft.removeClass("sp-active"),W.addClass("sp-hidden"),M.hide(Ft()),$.trigger("hide.spectrum",[Ft()]))}function Rt(){Ot(yt,!0)}function Ot(t,e){var n,i;tinycolor.equals(t,Ft())?Ut():(!t&&wt?xt=!0:(xt=!1,i=(n=tinycolor(t)).toHsv(),N=i.h%360/360,R=i.s,O=i.v,F=i.a),Ut(),n&&n.isValid()&&!e&&(vt=v.preferredFormat||n.getFormat()))}function Ft(t){return t=t||{},wt&&xt?null:tinycolor.fromRatio({h:N,s:R,v:O,a:Math.round(100*F)/100},{format:t.format||vt})}function Bt(){Ut(),M.move(Ft()),$.trigger("move.spectrum",[Ft()])}function Ut(){rt.removeClass("sp-validation-error"),Yt();var t=tinycolor.fromRatio({h:N,s:1,v:1});K.css("background-color",t.toHexString());var e=vt;F<1&&(0!==F||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var n=Ft({format:e}),i="";if(gt.removeClass("sp-clear-display"),gt.css("background-color","transparent"),!n&&wt)gt.addClass("sp-clear-display");else{var a=n.toHexString(),s=n.toRgbString();if(o||1===n.alpha?gt.css("background-color",s):(gt.css("background-color","transparent"),gt.css("filter",n.toFilter())),v.showAlpha){var l=n.toRgb();l.a=0;var c=tinycolor(l).toRgbString(),u="linear-gradient(left, "+c+", "+a+")";r?et.css("filter",tinycolor(c).toFilter({gradientType:1},a)):(et.css("background","-webkit-"+u),et.css("background","-moz-"+u),et.css("background","-ms-"+u),et.css("background","linear-gradient(to right, "+c+", "+a+")"))}i=n.toString(e)}v.showInput&&rt.val(i),v.showPalette&&St(),kt()}function Yt(){var t=R,e=O;if(wt&&xt)it.hide(),tt.hide(),J.hide();else{it.show(),tt.show(),J.show();var n=t*C,i=I-e*I;n=Math.max(-L,Math.min(C-L,n-L)),i=Math.max(-L,Math.min(I-L,i-L)),J.css({top:i+"px",left:n+"px"});var r=F*A;it.css({left:r-P/2+"px"});var o=N*D;tt.css({top:o-z+"px"})}}function jt(t){var e=Ft(),n="",i=!tinycolor.equals(e,yt);e&&(n=e.toString(vt),Tt(e)),ht&&$.val(n),t&&i&&(M.change(e),$.trigger("change",[e]))}function Vt(){S&&(C=K.width(),I=K.height(),L=J.height(),Q.width(),D=Q.height(),z=tt.height(),A=nt.width(),P=it.width(),b||(W.css("position","absolute"),v.offset?W.offset(v.offset):W.offset(function(e,n){var i=0,r=e.outerWidth(),o=e.outerHeight(),a=n.outerHeight(),s=e[0].ownerDocument,l=s.documentElement,c=l.clientWidth+t(s).scrollLeft(),u=l.clientHeight+t(s).scrollTop(),h=n.offset();return h.top+=a,h.left-=Math.min(h.left,h.left+r>c&&c>r?Math.abs(h.left+r-c):0),h.top-=Math.min(h.top,h.top+o>u&&u>o?Math.abs(o+a-i):i),h}(W,mt))),Yt(),v.showPalette&&St(),$.trigger("reflow.spectrum"))}function Gt(){Nt(),Z=!0,$.attr("disabled",!0),mt.addClass("sp-disabled")}!function(){if(r&&W.find("*:not(input)").attr("unselectable","on"),Et(),pt&&$.after(ft).hide(),wt||lt.hide(),b)$.after(W).hide();else{var e="parent"===v.appendTo?$.parent():t(v.appendTo);1!==e.length&&(e=t("body")),e.append(W)}function n(e){return e.data&&e.data.ignore?(Ot(t(e.target).closest(".sp-thumb-el").data("color")),Bt()):(Ot(t(e.target).closest(".sp-thumb-el").data("color")),Bt(),jt(!0),v.hideAfterPaletteSelect&&Nt()),!1}Mt(),mt.bind("click.spectrum touchstart.spectrum",(function(e){Z||Dt(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()})),($.is(":disabled")||!0===v.disabled)&&Gt(),W.click(h),rt.change(Lt),rt.bind("paste",(function(){setTimeout(Lt,1)})),rt.keydown((function(t){13==t.keyCode&&Lt()})),st.text(v.cancelText),st.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),Rt(),Nt()})),lt.attr("title",v.clearText),lt.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),xt=!0,Bt(),b&&jt(!0)})),ct.text(v.chooseText),ct.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),r&&rt.is(":focus")&&rt.trigger("change"),!rt.hasClass("sp-validation-error")&&(jt(!0),Nt())})),ut.text(v.showPaletteOnly?v.togglePaletteMoreText:v.togglePaletteLessText),ut.bind("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),v.showPaletteOnly=!v.showPaletteOnly,v.showPaletteOnly||b||W.css("left","-="+(X.outerWidth(!0)+5)),Et()})),p(nt,(function(t,e,n){F=t/A,xt=!1,n.shiftKey&&(F=Math.round(10*F)/10),Bt()}),Ct,It),p(Q,(function(t,e){N=parseFloat(e/D),xt=!1,v.showAlpha||(F=1),Bt()}),Ct,It),p(K,(function(t,e,n){if(n.shiftKey){if(!q){var i=R*C,r=I-O*I,o=Math.abs(t-i)>Math.abs(e-r);q=o?"x":"y"}}else q=null;var a=!q||"y"===q;(!q||"x"===q)&&(R=parseFloat(t/C)),a&&(O=parseFloat((I-e)/I)),xt=!1,v.showAlpha||(F=1),Bt()}),Ct,It),_t?(Ot(_t),Ut(),vt=v.preferredFormat||tinycolor(_t).format,Tt(_t)):Ut(),b&&At();var i=r?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ot.delegate(".sp-thumb-el",i,n),at.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},n)}();var qt={show:At,hide:Nt,toggle:Dt,reflow:Vt,option:function(n,i){return n===e?t.extend({},v):i===e?v[n]:(v[n]=i,"preferredFormat"===n&&(vt=v.preferredFormat),void Et())},enable:function(){Z=!1,$.attr("disabled",!1),mt.removeClass("sp-disabled")},disable:Gt,offset:function(t){v.offset=t,Vt()},set:function(t){Ot(t),jt()},get:Ft,destroy:function(){$.show(),mt.unbind("click.spectrum touchstart.spectrum"),W.remove(),ft.remove(),i[qt.id]=null},container:W};return qt.id=i.push(qt)-1,qt}function u(){}function h(t){t.stopPropagation()}function d(t,e){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function p(e,n,i,o){n=n||function(){},i=i||function(){},o=o||function(){};var a=document,s=!1,l={},c=0,u=0,h="ontouchstart"in window,d={};function p(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function f(t){if(s){if(r&&a.documentMode<9&&!t.button)return m();var i=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],o=i&&i.pageX||t.pageX,d=i&&i.pageY||t.pageY,f=Math.max(0,Math.min(o-l.left,u)),g=Math.max(0,Math.min(d-l.top,c));h&&p(t),n.apply(e,[f,g,t])}}function m(){s&&(t(a).unbind(d),t(a.body).removeClass("sp-dragging"),setTimeout((function(){o.apply(e,arguments)}),0)),s=!1}d.selectstart=p,d.dragstart=p,d["touchmove mousemove"]=f,d["touchend mouseup"]=m,t(e).bind("touchstart mousedown",(function(n){(n.which?3==n.which:2==n.button)||s||!1!==i.apply(e,arguments)&&(s=!0,c=t(e).height(),u=t(e).width(),l=t(e).offset(),t(a).bind(d),t(a.body).addClass("sp-dragging"),f(n),p(n))}))}function f(){return t.fn.spectrum.inputTypeColorSupport()}var m="spectrum.id";t.fn.spectrum=function(e,n){if("string"==typeof e){var r=this,o=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=i[t(this).data(m)];if(n){var a=n[e];if(!a)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?r=n.get():"container"==e?r=n.container:"option"==e?r=n.option.apply(n,o):"destroy"==e?(n.destroy(),t(this).removeData(m)):a.apply(n,o)}})),r}return this.spectrum("destroy").each((function(){var n=c(this,t.extend({},e,t(this).data()));t(this).data(m,n.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=p,t.fn.spectrum.defaults=n,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var n=t("<input type='color'/>")[0];e._cachedResult="color"===n.type&&""!==n.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!f()&&e.spectrum({preferredFormat:"hex6"})},function(){var t=/^[\s,#]+/,e=/\s+$/,n=0,i=Math,r=i.round,o=i.min,a=i.max,s=i.random,l=function(s,c){if(c=c||{},(s=s||"")instanceof l)return s;if(!(this instanceof l))return new l(s,c);var u=function(n){var r={r:0,g:0,b:0},s=1,l=!1,c=!1;return"string"==typeof n&&(n=function(n){n=n.replace(t,"").replace(e,"").toLowerCase();var i,r=!1;if(S[n])n=S[n],r=!0;else if("transparent"==n)return{r:0,g:0,b:0,a:0,format:"name"};return(i=F.rgb.exec(n))?{r:i[1],g:i[2],b:i[3]}:(i=F.rgba.exec(n))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=F.hsl.exec(n))?{h:i[1],s:i[2],l:i[3]}:(i=F.hsla.exec(n))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=F.hsv.exec(n))?{h:i[1],s:i[2],v:i[3]}:(i=F.hsva.exec(n))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=F.hex8.exec(n))?{a:z(i[1]),r:D(i[2]),g:D(i[3]),b:D(i[4]),format:r?"name":"hex8"}:(i=F.hex6.exec(n))?{r:D(i[1]),g:D(i[2]),b:D(i[3]),format:r?"name":"hex"}:!!(i=F.hex3.exec(n))&&{r:D(i[1]+""+i[1]),g:D(i[2]+""+i[2]),b:D(i[3]+""+i[3]),format:r?"name":"hex"}}(n)),"object"==typeof n&&(n.hasOwnProperty("r")&&n.hasOwnProperty("g")&&n.hasOwnProperty("b")?(u=n.r,h=n.g,d=n.b,r={r:255*I(u,255),g:255*I(h,255),b:255*I(d,255)},l=!0,c="%"===String(n.r).substr(-1)?"prgb":"rgb"):n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("v")?(n.s=P(n.s),n.v=P(n.v),r=function(t,e,n){t=6*I(t,360),e=I(e,100),n=I(n,100);var r=i.floor(t),o=t-r,a=n*(1-e),s=n*(1-o*e),l=n*(1-(1-o)*e),c=r%6;return{r:255*[n,s,a,a,l,n][c],g:255*[l,n,n,s,a,a][c],b:255*[a,a,l,n,n,s][c]}}(n.h,n.s,n.v),l=!0,c="hsv"):n.hasOwnProperty("h")&&n.hasOwnProperty("s")&&n.hasOwnProperty("l")&&(n.s=P(n.s),n.l=P(n.l),r=function(t,e,n){var i,r,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=I(t,360),e=I(e,100),n=I(n,100),0===e)i=r=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,l=2*n-s;i=a(l,s,t+1/3),r=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*i,g:255*r,b:255*o}}(n.h,n.s,n.l),l=!0,c="hsl"),n.hasOwnProperty("a")&&(s=n.a)),s=C(s),{ok:l,format:n.format||c,r:o(255,a(r.r,0)),g:o(255,a(r.g,0)),b:o(255,a(r.b,0)),a:s};var u,h,d}(s);this._originalInput=s,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=r(100*this._a)/100,this._format=c.format||u.format,this._gradientType=c.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=u.ok,this._tc_id=n++};function c(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var i,r,s=a(t,e,n),l=o(t,e,n),c=(s+l)/2;if(s==l)i=r=0;else{var u=s-l;switch(r=c>.5?u/(2-s-l):u/(s+l),s){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,l:c}}function u(t,e,n){t=I(t,255),e=I(e,255),n=I(n,255);var i,r,s=a(t,e,n),l=o(t,e,n),c=s,u=s-l;if(r=0===s?0:u/s,s==l)i=0;else{switch(s){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,v:c}}function h(t,e,n,i){var o=[A(r(t).toString(16)),A(r(e).toString(16)),A(r(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function d(t,e,n,i){return[A((o=i,Math.round(255*parseFloat(o)).toString(16))),A(r(t).toString(16)),A(r(e).toString(16)),A(r(n).toString(16))].join("");var o}function p(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s-=e/100,n.s=L(n.s),l(n)}function f(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.s+=e/100,n.s=L(n.s),l(n)}function m(t){return l(t).desaturate(100)}function g(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l+=e/100,n.l=L(n.l),l(n)}function _(t,e){e=0===e?0:e||10;var n=l(t).toRgb();return n.r=a(0,o(255,n.r-r(-e/100*255))),n.g=a(0,o(255,n.g-r(-e/100*255))),n.b=a(0,o(255,n.b-r(-e/100*255))),l(n)}function y(t,e){e=0===e?0:e||10;var n=l(t).toHsl();return n.l-=e/100,n.l=L(n.l),l(n)}function v(t,e){var n=l(t).toHsl(),i=(r(n.h)+e)%360;return n.h=i<0?360+i:i,l(n)}function b(t){var e=l(t).toHsl();return e.h=(e.h+180)%360,l(e)}function x(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+120)%360,s:e.s,l:e.l}),l({h:(n+240)%360,s:e.s,l:e.l})]}function w(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+90)%360,s:e.s,l:e.l}),l({h:(n+180)%360,s:e.s,l:e.l}),l({h:(n+270)%360,s:e.s,l:e.l})]}function E(t){var e=l(t).toHsl(),n=e.h;return[l(t),l({h:(n+72)%360,s:e.s,l:e.l}),l({h:(n+216)%360,s:e.s,l:e.l})]}function M(t,e,n){e=e||6,n=n||30;var i=l(t).toHsl(),r=360/n,o=[l(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(l(i));return o}function T(t,e){e=e||6;for(var n=l(t).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(l({h:i,s:r,v:o})),o=(o+s)%1;return a}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=C(t),this._roundA=r(100*this._a)/100,this},toHsv:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=u(this._r,this._g,this._b),e=r(360*t.h),n=r(100*t.s),i=r(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=c(this._r,this._g,this._b),e=r(360*t.h),n=r(100*t.s),i=r(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return d(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*I(this._r,255))+"%",g:r(100*I(this._g,255))+"%",b:r(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*I(this._r,255))+"%, "+r(100*I(this._g,255))+"%, "+r(100*I(this._b,255))+"%)":"rgba("+r(100*I(this._r,255))+"%, "+r(100*I(this._g,255))+"%, "+r(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";return t&&(n=l(t).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0;return e||!i||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(M,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},l.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:P(t[i]));t=n}return l(t,e)},l.equals=function(t,e){return!(!t||!e)&&l(t).toRgbString()==l(e).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})},l.mix=function(t,e,n){n=0===n?0:n||50;var i,r=l(t).toRgb(),o=l(e).toRgb(),a=n/100,s=2*a-1,c=o.a-r.a,u=1-(i=((i=s*c==-1?s:(s+c)/(1+s*c))+1)/2),h={r:o.r*i+r.r*u,g:o.g*i+r.g*u,b:o.b*i+r.b*u,a:o.a*a+r.a*(1-a)};return l(h)},l.readability=function(t,e){var n=l(t),i=l(e),r=n.toRgb(),o=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),c=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:c}},l.isReadable=function(t,e){var n=l.readability(t,e);return n.brightness>125&&n.color>500},l.mostReadable=function(t,e){for(var n=null,i=0,r=!1,o=0;o<e.length;o++){var a=l.readability(t,e[o]),s=a.brightness>125&&a.color>500,c=a.brightness/125*3+a.color/500;(s&&!r||s&&r&&c>i||!s&&!r&&c>i)&&(r=s,i=c,n=l(e[o]))}return n};var S=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=l.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(S);function C(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function I(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=o(e,a(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function L(t){return o(1,a(0,t))}function D(t){return parseInt(t,16)}function A(t){return 1==t.length?"0"+t:""+t}function P(t){return t<=1&&(t=100*t+"%"),t}function z(t){return D(t)/255}var N,R,O,F=(R="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",O="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{rgb:new RegExp("rgb"+R),rgba:new RegExp("rgba"+O),hsl:new RegExp("hsl"+R),hsla:new RegExp("hsla"+O),hsv:new RegExp("hsv"+R),hsva:new RegExp("hsva"+O),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=l}(),t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))},void 0===(o=i.apply(e,r))||(t.exports=o)}()},3379:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},a=[],s=0;s<t.length;s++){var l=t[s],c=i.base?l[0]+i.base:l[0],u=o[c]||0,h="".concat(c," ").concat(u);o[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(e[d].references++,e[d].updater(p)):e.push({identifier:h,updater:r(p,i),references:1}),a.push(h)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var l=i(t,r),c=0;c<o.length;c++){var u=n(o[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}o=l}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},3565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i=n.css,r=n.media,o=n.sourceMap;r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},3842:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});class i{constructor(t=[],e=r){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1),o=e[i];const a=i+1;if(a<this.length&&n(e[a],o)<0&&(i=a,o=e[a]),n(o,r)>=0)break;e[t]=o,t=i}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},675:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function i(t){this.message=t||""}function r(t){this.message=t||""}function o(){}function a(t){return null===t?zt:t.color}function s(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function u(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function d(){}function p(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function f(){}function m(t){this.message=t||""}function g(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var _=function(){};_.prototype.interfaces_=function(){return[]},_.prototype.getClass=function(){return _},_.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var y=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),v=function(){},b={MAX_VALUE:{configurable:!0}};v.isNaN=function(t){return Number.isNaN(t)},v.doubleToLongBits=function(t){return t},v.longBitsToDouble=function(t){return t},v.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(v,b);var x=function(){},w=function(){},E=function(){},M=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},T={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};M.prototype.setOrdinate=function(t,e){switch(t){case M.X:this.x=e;break;case M.Y:this.y=e;break;case M.Z:this.z=e;break;default:throw new y("Invalid ordinate index: "+t)}},M.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!_.equalsWithTolerance(this.x,e.x,n)&&!!_.equalsWithTolerance(this.y,e.y,n)}},M.prototype.getOrdinate=function(t){switch(t){case M.X:return this.x;case M.Y:return this.y;case M.Z:return this.z}throw new y("Invalid ordinate index: "+t)},M.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||v.isNaN(this.z))&&v.isNaN(t.z)},M.prototype.equals=function(t){return t instanceof M&&this.equals2D(t)},M.prototype.equalInZ=function(t,e){return _.equalsWithTolerance(this.z,t.z,e)},M.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},M.prototype.clone=function(){},M.prototype.copy=function(){return new M(this)},M.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},M.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},M.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},M.prototype.hashCode=function(){var t=17;return 37*(t=37*t+M.hashCode(this.x))+M.hashCode(this.y)},M.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},M.prototype.interfaces_=function(){return[x,w,e]},M.prototype.getClass=function(){return M},M.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=v.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},T.DimensionalComparator.get=function(){return S},T.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},T.NULL_ORDINATE.get=function(){return v.NaN},T.X.get=function(){return 0},T.Y.get=function(){return 1},T.Z.get=function(){return 2},Object.defineProperties(M,T);var S=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new y("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};S.prototype.compare=function(t,e){var n=t,i=e,r=S.compare(n.x,i.x);if(0!==r)return r;var o=S.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:S.compare(n.z,i.z)},S.prototype.interfaces_=function(){return[E]},S.prototype.getClass=function(){return S},S.compare=function(t,e){return t<e?-1:t>e?1:v.isNaN(t)?v.isNaN(e)?0:-1:v.isNaN(e)?1:0};var k=function(){};k.prototype.create=function(){},k.prototype.interfaces_=function(){return[]},k.prototype.getClass=function(){return k};var C=function(){},I={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.toLocationSymbol=function(t){switch(t){case C.EXTERIOR:return"e";case C.BOUNDARY:return"b";case C.INTERIOR:return"i";case C.NONE:return"-"}throw new y("Unknown location value: "+t)},I.INTERIOR.get=function(){return 0},I.BOUNDARY.get=function(){return 1},I.EXTERIOR.get=function(){return 2},I.NONE.get=function(){return-1},Object.defineProperties(C,I);var L=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},D=function(){},A={LOG_10:{configurable:!0}};D.prototype.interfaces_=function(){return[]},D.prototype.getClass=function(){return D},D.log10=function(t){var e=Math.log(t);return v.isInfinite(e)||v.isNaN(e)?e:e/D.LOG_10},D.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},D.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},D.wrap=function(t,e){return t<0?e- -t%e:t%e},D.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3],a=arguments[0];return i>a&&(a=i),r>a&&(a=r),o>a&&(a=o),a}},D.average=function(t,e){return(t+e)/2},A.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(D,A);var P=function(t){this.str=t};P.prototype.append=function(t){this.str+=t},P.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},P.prototype.toString=function(t){return this.str};var z=function(t){this.value=t};z.prototype.intValue=function(){return this.value},z.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},z.isNaN=function(t){return Number.isNaN(t)};var N=function(){};N.isWhitespace=function(t){return t<=32&&t>=0||127===t},N.toUpperCase=function(t){return t.toUpperCase()};var R=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}},O={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};R.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},R.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=R.magnitude(n._hi),r=R.TEN.pow(i);(n=n.divide(r)).gt(R.TEN)?(n=n.divide(R.TEN),i+=1):n.lt(R.ONE)&&(n=n.multiply(R.TEN),i-=1);for(var o=i+1,a=new P,s=R.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var u=!1,h=0;c>9?(u=!0,h="9"):h="0"+c,a.append(h),n=n.subtract(R.valueOf(c)).multiply(R.TEN),u&&n.selfAdd(R.TEN);var d=!0,p=R.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-l&&(d=!1),!d)break}return e[0]=i,a.toString()},R.prototype.sqr=function(){return this.multiply(this)},R.prototype.doubleValue=function(){return this._hi+this._lo},R.prototype.subtract=function(){if(arguments[0]instanceof R){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},R.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},R.prototype.isZero=function(){return 0===this._hi&&0===this._lo},R.prototype.selfSubtract=function(){if(arguments[0]instanceof R){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},R.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},R.prototype.min=function(t){return this.le(t)?this:t},R.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,l=null,c=null,u=null,h=null;return l=this._hi/n,h=(r=(c=R.SPLIT*l)-(r=c-l))*(a=(h=R.SPLIT*n)-(a=h-n))-(u=l*n)+r*(s=n-a)+(o=l-r)*a+o*s,h=l+(c=(this._hi-u-h+this._lo-l*i)/n),this._hi=h,this._lo=l-h+c,this}},R.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},R.prototype.divide=function(){if(arguments[0]instanceof R){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,a=null,s=null,l=null;return n=(o=this._hi/t._hi)-(e=(a=R.SPLIT*o)-(e=a-o)),l=e*(i=(l=R.SPLIT*t._hi)-(i=l-t._hi))-(s=o*t._hi)+e*(r=t._hi-i)+n*i+n*r,a=(this._hi-s-l+this._lo-o*t._lo)/t._hi,new R(l=o+a,o-l+a)}if("number"==typeof arguments[0]){var c=arguments[0];return v.isNaN(c)?R.createNaN():R.copy(this).selfDivide(c,0)}},R.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},R.prototype.pow=function(t){if(0===t)return R.valueOf(1);var e=new R(this),n=R.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},R.prototype.ceil=function(){if(this.isNaN())return R.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new R(t,e)},R.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},R.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},R.prototype.setValue=function(){if(arguments[0]instanceof R){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},R.prototype.max=function(t){return this.ge(t)?this:t},R.prototype.sqrt=function(){if(this.isZero())return R.valueOf(0);if(this.isNegative())return R.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=R.valueOf(e),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},R.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,a=null,s=null;return o=(r=this._hi+e)-(a=r-this._hi),i=(s=(o=e-a+(this._hi-o))+this._lo)+(r-(n=r+s)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var l=arguments[0],c=arguments[1],u=null,h=null,d=null,p=null,f=null,m=null,g=null;p=this._hi+l,h=this._lo+c,f=p-(m=p-this._hi),d=h-(g=h-this._lo);var _=(u=p+(m=(f=l-m+(this._hi-f))+h))+(m=(d=c-g+(this._lo-d))+(m+(p-u))),y=m+(u-_);return this._hi=_,this._lo=y,this}},R.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,a=null,s=null,l=null,c=null;r=(l=R.SPLIT*this._hi)-this._hi,c=R.SPLIT*n,r=l-r,o=this._hi-r,a=c-n;var u=(l=this._hi*n)+(c=r*(a=c-a)-l+r*(s=n-a)+o*a+o*s+(this._hi*i+this._lo*n)),h=c+(r=l-u);return this._hi=u,this._lo=h,this}},R.prototype.selfSqr=function(){return this.selfMultiply(this)},R.prototype.floor=function(){if(this.isNaN())return R.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new R(t,e)},R.prototype.negate=function(){return this.isNaN()?this:new R(-this._hi,-this._lo)},R.prototype.clone=function(){},R.prototype.multiply=function(){if(arguments[0]instanceof R){var t=arguments[0];return t.isNaN()?R.createNaN():R.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return v.isNaN(e)?R.createNaN():R.copy(this).selfMultiply(e,0)}},R.prototype.isNaN=function(){return v.isNaN(this._hi)},R.prototype.intValue=function(){return Math.trunc(this._hi)},R.prototype.toString=function(){var t=R.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},R.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+R.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+R.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},R.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,a=null,s=null;t=(n=1/this._hi)-(r=(a=R.SPLIT*n)-(r=a-n)),o=(s=R.SPLIT*this._hi)-this._hi;var l=n+(a=(1-(i=n*this._hi)-(s=r*(o=s-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new R(l,n-l+a)},R.prototype.toSciNotation=function(){if(this.isZero())return R.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=R.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},R.prototype.abs=function(){return this.isNaN()?R.NaN:this.isNegative()?this.negate():new R(this)},R.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},R.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},R.prototype.add=function(){if(arguments[0]instanceof R){var t=arguments[0];return R.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return R.copy(this).selfAdd(e)}},R.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof R){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._hi=n,this._lo=i}},R.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},R.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},R.prototype.trunc=function(){return this.isNaN()?R.NaN:this.isPositive()?this.floor():this.ceil()},R.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},R.prototype.interfaces_=function(){return[e,x,w]},R.prototype.getClass=function(){return R},R.sqr=function(t){return R.valueOf(t).selfMultiply(t)},R.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return R.parse(t)}if("number"==typeof arguments[0])return new R(arguments[0])},R.sqrt=function(t){return R.valueOf(t).sqrt()},R.parse=function(t){for(var e=0,n=t.length;N.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new R,a=0,s=0,l=0;!(e>=n);){var c=t.charAt(e);if(e++,N.isDigit(c)){var u=c-"0";o.selfMultiply(R.TEN),o.selfAdd(u),a++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{l=z.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var d=o,p=a-s-l;if(0===p)d=o;else if(p>0){var f=R.TEN.pow(p);d=o.divide(f)}else if(p<0){var m=R.TEN.pow(-p);d=o.multiply(m)}return i?d.negate():d},R.createNaN=function(){return new R(v.NaN,v.NaN)},R.copy=function(t){return new R(t)},R.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},R.stringOfChar=function(t,e){for(var n=new P,i=0;i<e;i++)n.append(t);return n.toString()},O.PI.get=function(){return new R(3.141592653589793,12246467991473532e-32)},O.TWO_PI.get=function(){return new R(6.283185307179586,24492935982947064e-32)},O.PI_2.get=function(){return new R(1.5707963267948966,6123233995736766e-32)},O.E.get=function(){return new R(2.718281828459045,14456468917292502e-32)},O.NaN.get=function(){return new R(v.NaN,v.NaN)},O.EPS.get=function(){return 123259516440783e-46},O.SPLIT.get=function(){return 134217729},O.MAX_PRINT_DIGITS.get=function(){return 32},O.TEN.get=function(){return R.valueOf(10)},O.ONE.get=function(){return R.valueOf(1)},O.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},O.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(R,O);var F=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,n){var i=F.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=R.valueOf(e.x).selfAdd(-t.x),o=R.valueOf(e.y).selfAdd(-t.y),a=R.valueOf(n.x).selfAdd(-e.x),s=R.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},F.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},F.intersection=function(t,e,n,i){var r=R.valueOf(i.y).selfSubtract(n.y).selfMultiply(R.valueOf(e.x).selfSubtract(t.x)),o=R.valueOf(i.x).selfSubtract(n.x).selfMultiply(R.valueOf(e.y).selfSubtract(t.y)),a=r.subtract(o),s=R.valueOf(i.x).selfSubtract(n.x).selfMultiply(R.valueOf(t.y).selfSubtract(n.y)),l=R.valueOf(i.y).selfSubtract(n.y).selfMultiply(R.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(l).selfDivide(a).doubleValue(),u=R.valueOf(t.x).selfAdd(R.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=R.valueOf(e.x).selfSubtract(t.x).selfMultiply(R.valueOf(t.y).selfSubtract(n.y)),d=R.valueOf(e.y).selfSubtract(t.y).selfMultiply(R.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(d).selfDivide(a).doubleValue(),f=R.valueOf(n.y).selfAdd(R.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new M(u,f)},F.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=r-o;if(r>0){if(o<=0)return F.signum(a);i=r+o}else{if(!(r<0))return F.signum(a);if(o>=0)return F.signum(a);i=-r-o}var s=F.DP_SAFE_EPSILON*i;return a>=s||-a>=s?F.signum(a):2},F.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,B);var U=function(){},Y={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Y.X.get=function(){return 0},Y.Y.get=function(){return 1},Y.Z.get=function(){return 2},Y.M.get=function(){return 3},U.prototype.setOrdinate=function(t,e,n){},U.prototype.size=function(){},U.prototype.getOrdinate=function(t,e){},U.prototype.getCoordinate=function(){},U.prototype.getCoordinateCopy=function(t){},U.prototype.getDimension=function(){},U.prototype.getX=function(t){},U.prototype.clone=function(){},U.prototype.expandEnvelope=function(t){},U.prototype.copy=function(){},U.prototype.getY=function(t){},U.prototype.toCoordinateArray=function(){},U.prototype.interfaces_=function(){return[w]},U.prototype.getClass=function(){return U},Object.defineProperties(U,Y);var j=function(){},V=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(j),G=function(){};G.arraycopy=function(t,e,n,i,r){for(var o=0,a=e;a<e+r;a++)n[i+o]=t[a],o++},G.getProperty=function(t){return{"line.separator":"\n"}[t]};var q=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof M&&arguments[1]instanceof M){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var l=arguments[0],c=arguments[1],u=arguments[2];this.x=l,this.y=c,this.w=u}else if(4===arguments.length){var h=arguments[0],d=arguments[1],p=arguments[2],f=arguments[3],m=h.y-d.y,g=d.x-h.x,_=h.x*d.y-d.x*h.y,y=p.y-f.y,v=f.x-p.x,b=p.x*f.y-f.x*p.y;this.x=g*b-v*_,this.y=y*_-m*b,this.w=m*v-y*g}};q.prototype.getY=function(){var t=this.y/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new V;return t},q.prototype.getX=function(){var t=this.x/this.w;if(v.isNaN(t)||v.isInfinite(t))throw new V;return t},q.prototype.getCoordinate=function(){var t=new M;return t.x=this.getX(),t.y=this.getY(),t},q.prototype.interfaces_=function(){return[]},q.prototype.getClass=function(){return q},q.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-i.y,l=i.x-n.x,c=n.x*i.y-i.x*n.y,u=r*l-s*o,h=(o*c-l*a)/u,d=(s*a-r*c)/u;if(v.isNaN(h)||v.isInfinite(h)||v.isNaN(d)||v.isInfinite(d))throw new V;return new M(h,d)};var H=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof M){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],l=arguments[3];this.init(o,a,s,l)}},$={serialVersionUID:{configurable:!0}};H.prototype.getArea=function(){return this.getWidth()*this.getHeight()},H.prototype.equals=function(t){if(!(t instanceof H))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},H.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new H;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,i=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new H(e,i,n,r)},H.prototype.isNull=function(){return this._maxx<this._minx},H.prototype.getMaxX=function(){return this._maxx},H.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof M){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof H){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},H.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof H){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof M){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},H.prototype.getMinY=function(){return this._miny},H.prototype.getMinX=function(){return this._minx},H.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof M){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof H){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},H.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},H.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},H.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},H.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},H.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},H.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},H.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},H.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},H.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},H.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof H){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof M){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},H.prototype.centre=function(){return this.isNull()?null:new M((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},H.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof M){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof H){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},H.prototype.getMaxY=function(){return this._maxy},H.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},H.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+M.hashCode(this._minx))+M.hashCode(this._maxx))+M.hashCode(this._miny))+M.hashCode(this._maxy)},H.prototype.interfaces_=function(){return[x,e]},H.prototype.getClass=function(){return H},H.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),c=Math.min(i.x,r.x),u=Math.max(i.x,r.x);return!(c>l||u<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),c=Math.min(i.y,r.y),u=Math.max(i.y,r.y),c>l||u<s))}},$.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(H,$);var Z={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},W=function(t){this.geometryFactory=t||new _e};W.prototype.read=function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=Z.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=Z.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],K[n]&&(e=K[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},W.prototype.write=function(t){return this.extractGeometry(t)},W.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!X[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+X[e].apply(this,[t])+")"};var X={coordinate:function(t){return t.x+" "+t.y},point:function(t){return X.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+X.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(X.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(X.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+X.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+X.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+X.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+X.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},K={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Z.spaces);return this.geometryFactory.createPoint(new M(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Z.trimParens,"$1"),i.push(K.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Z.spaces),i.push(new M(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Z.spaces),i.push(new M(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Z.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Z.trimParens,"$1"),i.push(K.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(Z.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(Z.trimParens,"$1"),n=K.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===s?r=i:a.push(i);return this.geometryFactory.createPolygon(r,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Z.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Z.trimParens,"$1"),i.push(K.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new W(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t;if(1===arguments.length)et.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,n;if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new M,this._intPt[1]=new M,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},it={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new P;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=i>r?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},it.DONT_INTERSECT.get=function(){return 0},it.DO_INTERSECT.get=function(){return 1},it.COLLINEAR.get=function(){return 2},it.NO_INTERSECTION.get=function(){return 0},it.POINT_INTERSECTION.get=function(){return 1},it.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,it);var rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new H(this._inputLines[0][0],this._inputLines[0][1]),n=new H(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],i=arguments[2];if(this._isProper=!1,H.intersects(n,i,e)&&0===st.orientationIndex(n,i,e)&&0===st.orientationIndex(i,n,e))return this._isProper=!0,(e.equals(n)||e.equals(i))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,n,i,r){var o=null;try{o=q.intersection(t,n,i,r)}catch(a){if(!(a instanceof V))throw a;o=e.nearestEndpoint(t,n,i,r)}return o},e.prototype.intersection=function(t,n,i,r){var o=this.intersectionWithNormalization(t,n,i,r);return this.isInSegmentEnvelopes(o)||(o=new M(e.nearestEndpoint(t,n,i,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},e.prototype.checkDD=function(t,e,n,i,r){var o=F.intersection(t,e,n,i),a=this.isInSegmentEnvelopes(o);G.out.println("DD in env = "+a+"  --------------------- "+o),r.distance(o)>1e-4&&G.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,i){var r=new M(t),o=new M(e),a=new M(n),s=new M(i),l=new M;this.normalizeToEnvCentre(r,o,a,s,l);var c=this.safeHCoordinateIntersection(r,o,a,s);return c.x+=l.x,c.y+=l.y,c},e.prototype.computeCollinearIntersection=function(e,n,i,r){var o=H.intersects(e,n,i),a=H.intersects(e,n,r),s=H.intersects(i,r,e),l=H.intersects(i,r,n);return o&&a?(this._intPt[0]=i,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):s&&l?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||a||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&l?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,c=n.x<i.x?n.x:i.x,u=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,d=n.y>i.y?n.y:i.y,p=((o>c?o:c)+(s<h?s:h))/2,f=((a>u?a:u)+(l<d?l:d))/2;r.x=p,r.y=f,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},e.prototype.computeIntersect=function(e,n,i,r){if(this._isProper=!1,!H.intersects(e,n,i,r))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,i),a=st.orientationIndex(e,n,r);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(i,r,e),l=st.orientationIndex(i,r,n);return s>0&&l>0||s<0&&l<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===l?this.computeCollinearIntersection(e,n,i,r):(0===o||0===a||0===s||0===l?(this._isProper=!1,e.equals2D(i)||e.equals2D(r)?this._intPt[0]=e:n.equals2D(i)||n.equals2D(r)?this._intPt[0]=n:0===o?this._intPt[0]=new M(i):0===a?this._intPt[0]=new M(r):0===s?this._intPt[0]=new M(e):0===l&&(this._intPt[0]=new M(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,i,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,i){var r=t,o=st.distancePointLine(t,n,i),a=st.distancePointLine(e,n,i);return a<o&&(o=a,r=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,r=n),(a=st.distancePointLine(i,t,e))<o&&(o=a,r=i),r},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(i,r,o,a)},ot.signOfDet2x2=function(t,e,n,i){var r=null,o=null,a=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(t<=n))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(a=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=a*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if((e-=(a=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=a*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=ot.signOfDet2x2(r,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),l>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==C.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?C.BOUNDARY:this._crossingCount%2==1?C.INTERIOR:C.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof M&&L(arguments[1],U)){for(var t=arguments[1],e=new at(arguments[0]),n=new M,i=new M,r=1;r<t.size();r++)if(t.getCoordinate(r,n),t.getCoordinate(r-1,i),e.countSegment(n,i),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof M&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var l=o[s],c=o[s-1];if(a.countSegment(l,c),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},lt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return F.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(L(arguments[0],U)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new M,c=new M,u=new M;a.getCoordinate(0,c),a.getCoordinate(1,u);var h=c.x;u.x-=h;for(var d=0,p=1;p<s-1;p++)l.y=c.y,c.x=u.x,c.y=u.y,a.getCoordinate(p+1,u),u.x-=h,d+=c.x*(l.y-u.y);return d/2}},st.distanceLineLine=function(t,e,n,i){if(t.equals(e))return st.distancePointLine(t,n,i);if(n.equals(i))return st.distancePointLine(i,t,e);var r=!1;if(H.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var a=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(r=!0)}}else r=!0;return r?D.min(st.distancePointLine(t,n,i),st.distancePointLine(e,n,i),st.distancePointLine(n,t,e),st.distancePointLine(i,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==C.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new M;t.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<e;a++){t.getCoordinate(a,i);var s=i.x,l=i.y,c=s-r,u=l-o;n+=Math.sqrt(c*c+u*u),r=s,o=l}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new y("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var a=i;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==i);var s=i;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==i);var l=t[a],c=t[s];if(l.equals2D(n)||c.equals2D(n)||l.equals2D(c))return!1;var u=st.computeOrientation(l,n,c);return 0===u?l.x>c.x:u>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new y("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=st.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var u=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(u)*Math.sqrt(l)}},st.isOnLine=function(t,e){for(var n=new rt,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},lt.CLOCKWISE.get=function(){return-1},lt.RIGHT.get=function(){return st.CLOCKWISE},lt.COUNTERCLOCKWISE.get=function(){return 1},lt.LEFT.get=function(){return st.COUNTERCLOCKWISE},lt.COLLINEAR.get=function(){return 0},lt.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,lt);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var ut=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ut.prototype.isGeometryCollection=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION},ut.prototype.getFactory=function(){return this._factory},ut.prototype.getGeometryN=function(t){return this},ut.prototype.getArea=function(){return 0},ut.prototype.isRectangle=function(){return!1},ut.prototype.equals=function(){if(arguments[0]instanceof ut){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ut))return!1;var n=e;return this.equalsExact(n)}},ut.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ut.prototype.geometryChanged=function(){this.apply(ut.geometryChangedFilter)},ut.prototype.geometryChangedAction=function(){this._envelope=null},ut.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ut.prototype.getLength=function(){return 0},ut.prototype.getNumGeometries=function(){return 1},ut.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},ut.prototype.getUserData=function(){return this._userData},ut.prototype.getSRID=function(){return this._SRID},ut.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ut.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION)throw new y("This method does not support GeometryCollection arguments")},ut.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ut.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ut.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ut.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new H(this._envelope)},ut.prototype.setSRID=function(t){this._SRID=t},ut.prototype.setUserData=function(t){this._userData=t},ut.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0},ut.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ut.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ut.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ut.SORTINDEX_MULTIPOINT||this.getSortIndex()===ut.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ut.SORTINDEX_MULTIPOLYGON},ut.prototype.interfaces_=function(){return[w,x,e]},ut.prototype.getClass=function(){return ut},ut.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ut.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return dt},Object.defineProperties(ut,ht);var dt=function(){};dt.interfaces_=function(){return[ct]},dt.filter=function(t){t.geometryChangedAction()};var pt=function(){};pt.prototype.filter=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt};var ft=function(){},mt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};ft.prototype.isInBoundary=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft},mt.Mod2BoundaryNodeRule.get=function(){return gt},mt.EndPointBoundaryNodeRule.get=function(){return _t},mt.MultiValentEndPointBoundaryNodeRule.get=function(){return yt},mt.MonoValentEndPointBoundaryNodeRule.get=function(){return vt},mt.MOD2_BOUNDARY_RULE.get=function(){return new gt},mt.ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},mt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},mt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},mt.OGC_SFS_BOUNDARY_RULE.get=function(){return ft.MOD2_BOUNDARY_RULE},Object.defineProperties(ft,mt);var gt=function(){};gt.prototype.isInBoundary=function(t){return t%2==1},gt.prototype.interfaces_=function(){return[ft]},gt.prototype.getClass=function(){return gt};var _t=function(){};_t.prototype.isInBoundary=function(t){return t>0},_t.prototype.interfaces_=function(){return[ft]},_t.prototype.getClass=function(){return _t};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>1},yt.prototype.interfaces_=function(){return[ft]},yt.prototype.getClass=function(){return yt};var vt=function(){};vt.prototype.isInBoundary=function(t){return 1===t},vt.prototype.interfaces_=function(){return[ft]},vt.prototype.getClass=function(){return vt};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(i.prototype=new Error).name="NoSuchElementException";var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Mt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),Mt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new i;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),Tt=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.ensureCapacity(n.length),this.add(n,i)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,i=arguments[0].iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return this.add(n,i,!0),!0}if(arguments[0]instanceof M&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],l=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],l);else for(var u=s.length-1;u>=0;u--)this.add(s[u],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof M){var h=arguments[0],d=arguments[1];if(!arguments[2]){var p=this.size();if(p>0){if(h>0&&this.get(h-1).equals2D(d))return null;if(h<p&&this.get(h).equals2D(d))return null}}t.prototype.add.call(this,h,d)}}else if(4===arguments.length){var f=arguments[0],m=arguments[1],g=arguments[2],_=arguments[3],y=1;g>_&&(y=-1);for(var v=g;v!==_;v+=y)this.add(f[v],m);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new M(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Et),St=function(){},kt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};kt.ForwardComparator.get=function(){return Ct},kt.BidirectionalComparator.get=function(){return It},kt.coordArrayType.get=function(){return new Array(0).fill(null)},St.prototype.interfaces_=function(){return[]},St.prototype.getClass=function(){return St},St.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},St.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(St.indexOf(i,e)<0)return i}return null},St.scroll=function(t,e){var n=St.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);G.arraycopy(t,n,i,0,t.length-n),G.arraycopy(t,0,i,t.length-n,n),G.arraycopy(i,0,t,0,t.length)},St.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(0!==o.compare(i[a],r[a]))return!1;return!0}},St.intersection=function(t,e){for(var n=new Tt,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},St.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},St.removeRepeatedPoints=function(t){return St.hasRepeatedPoints(t)?new Tt(t,!1).toCoordinateArray():t},St.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},St.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},St.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new M(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new M(i[r+l])},St.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},St.envelope=function(t){for(var e=new H,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},St.toCoordinateArray=function(t){return t.toArray(St.coordArrayType)},St.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},St.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},St.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},St.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},St.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},St.extract=function(t,e,n){e=D.clamp(e,0,t.length);var i=(n=D.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=e;a<=n;a++)r[o++]=t[a];return r},Object.defineProperties(St,kt);var Ct=function(){};Ct.prototype.compare=function(t,e){return St.compare(t,e)},Ct.prototype.interfaces_=function(){return[E]},Ct.prototype.getClass=function(){return Ct};var It=function(){};It.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=St.compare(n,i);return St.isEqualReversed(n,i)?0:r},It.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=St.increasingDirection(n),o=St.increasingDirection(i),a=r>0?0:n.length-1,s=o>0?0:n.length-1,l=0;l<n.length;l++){var c=n[a].compareTo(i[s]);if(0!==c)return c;a+=r,s+=o}return 0},It.prototype.interfaces_=function(){return[E]},It.prototype.getClass=function(){return It};var Lt=function(){};Lt.prototype.get=function(){},Lt.prototype.put=function(){},Lt.prototype.size=function(){},Lt.prototype.values=function(){},Lt.prototype.entrySet=function(){};var Dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Lt);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var At=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Pt(this)},e}(o),Pt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new i;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(xt),zt=0;(h.prototype=new Dt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:zt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:n,color:zt,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===c(s(s(t)))){var e=u(s(s(t)));1===a(e)?(l(s(t),zt),l(e,zt),l(s(s(t)),1),t=s(s(t))):(t===u(s(t))&&(t=s(t),this.rotateLeft(t)),l(s(t),zt),l(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=c(s(s(t)));1===a(n)?(l(s(t),zt),l(n,zt),l(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateRight(t)),l(s(t),zt),l(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=zt},h.prototype.values=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new At,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Nt=function(){};Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},d.prototype=new o,(p.prototype=new d).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},p.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},p.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},p.prototype.remove=function(t){throw new r},p.prototype.size=function(){return this.array_.length},p.prototype.isEmpty=function(){return 0===this.array_.length},p.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},p.prototype.iterator=function(){return new Rt(this)};var Rt=function(t){this.treeSet_=t,this.position_=0};Rt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new i;return this.treeSet_.array_[this.position_++]},Rt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Rt.prototype.remove=function(){throw new r};var Ot=function(){};Ot.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)i=function(t,e){return t.compareTo(e)},r.sort(i);else if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},Ot.asList=function(t){for(var e=new Et,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var Ft=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new y("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(N.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new y("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Bt);var Ut=function(){};Ut.prototype.filter=function(t){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var Yt=function(){};Yt.prototype.filter=function(t,e){},Yt.prototype.isDone=function(){},Yt.prototype.isGeometryChanged=function(){},Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var jt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new y("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new H,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._geometries.length!==i._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(i._geometries[r],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ot.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new p(Ot.asList(this._geometries)),n=new p(Ot.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],o=this.getNumGeometries(),a=r.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),c=r.getGeometryN(s),u=l.compareToSameClass(c,i);if(0!==u)return u;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(L(arguments[0],pt))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(L(arguments[0],Yt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(L(arguments[0],Ut)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(L(arguments[0],ct)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ut),Vt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Gt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(jt),Gt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=ft.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};Gt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Gt.prototype.getBoundary=function(){return this._geom instanceof Wt?this.boundaryLineString(this._geom):this._geom instanceof Vt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Gt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Gt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Gt.prototype.computeBoundaryCoordinates=function(t){var e=new Et;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return St.toCoordinateArray(e)},Gt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new qt,this._endpointMap.put(t,e)),e.count++},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt},Gt.getBoundary=function(){return 1===arguments.length?new Gt(arguments[0]).getBoundary():2===arguments.length?new Gt(arguments[0],arguments[1]).getBoundary():void 0};var qt=function(){this.count=null};qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt};var Ht=function(){},$t={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht},Ht.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},Ht.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",a=new function(){}(new function(){}(Ht.getStackTrace(i))),s=0;s<r;s++)try{o+=a.readLine()+Ht.NEWLINE}catch(t){if(!(t instanceof f))throw t;et.shouldNeverReachHere()}return o}},Ht.split=function(t,e){for(var n=e.length,i=new Et,r=""+t,o=r.indexOf(e);o>=0;){var a=r.substring(0,o);i.add(a),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var s=new Array(i.size()).fill(null),l=0;l<s.length;l++)s[l]=i.get(l);return s},Ht.toString=function(){if(1===arguments.length){var t=arguments[0];return Ht.SIMPLE_ORDINATE_FORMAT.format(t)}},Ht.spaces=function(t){return Ht.chars(" ",t)},$t.NEWLINE.get=function(){return G.getProperty("line.separator")},$t.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Ht,$t);var Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt},Zt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},Zt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,U.X)===t.getOrdinate(e-1,U.X)&&t.getOrdinate(0,U.Y)===t.getOrdinate(e-1,U.Y)},Zt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var a=t.getOrdinate(r,o),s=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||v.isNaN(a)&&v.isNaN(s)))return!1}return!0},Zt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(Zt.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)Zt.copy(e,r-1,i,o,1);return i},Zt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)Zt.swap(t,i,e-i)},Zt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},Zt.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)Zt.copyCoord(t,e+o,n,i+o)},Zt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new P;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(Ht.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},Zt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Zt.createClosedRing(t,e,4):e.getOrdinate(0,U.X)===e.getOrdinate(n-1,U.X)&&e.getOrdinate(0,U.Y)===e.getOrdinate(n-1,U.Y)?e:Zt.createClosedRing(t,e,n+1)},Zt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();Zt.copy(e,0,i,0,r);for(var o=r;o<n;o++)Zt.copy(e,0,i,o,1);return i};var Wt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new H:this._points.expandEnvelope(new H)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e;if(this._points.size()!==i._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),i._points.getCoordinate(r),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Zt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Zt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(L(arguments[0],pt))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(L(arguments[0],Yt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],Ut)||L(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Gt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new y("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ut),Xt=function(){};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt};var Kt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new H;var t=new H;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(L(arguments[0],pt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(L(arguments[0],Yt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],Ut)||L(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Xt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ut),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n,i){if(t.call(this,i),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new y("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new y("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),c=t.getY(s);if(l!==o==(c!==a))return!1;o=l,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var i=e,r=this._shell,o=i._shell;if(!r.equalsExact(o,n))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(i._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ot.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);G.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=St.minCoordinate(e.getCoordinates());St.scroll(i,r),G.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],st.isCCW(e.getCoordinates())===n&&St.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],o=this._shell,a=r._shell,s=o.compareToSameClass(a,i);if(0!==s)return s;for(var l=this.getNumInteriorRing(),c=r.getNumInteriorRing(),u=0;u<l&&u<c;){var h=this.getInteriorRingN(u),d=r.getInteriorRingN(u),p=h.compareToSameClass(d,i);if(0!==p)return p;u++}return u<l?1:u<c?-1:0}},e.prototype.apply=function(t){if(L(t,pt)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(L(t,Yt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(L(t,Ut))t.filter(this);else if(L(t,ct)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)this._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),i=0;i<n.length;i++)n[i]=this._holes[i].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ut),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Xt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(jt),ee=function(t){function e(e,n){e instanceof M&&n instanceof _e&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Zt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new y("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new y("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Wt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ut.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Et,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(jt),ie=function(t){this._factory=t||null,this._isUserDataCopied=!1},re={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ie.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ie.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ie.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Kt||t instanceof Wt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ie.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new Et,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===te?this._factory.createMultiPoint(i.toArray([])):n.getClass()===Vt?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},ie.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new Et,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||r.add(a)}return this._factory.createPolygon(i,r.toArray([]))},ie.prototype.interfaces_=function(){return[]},ie.prototype.getClass=function(){return ie},ie.GeometryEditorOperation=function(){},re.NoOpGeometryOperation.get=function(){return oe},re.CoordinateOperation.get=function(){return ae},re.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(ie,re);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Wt?e.createLineString(n):t instanceof Kt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Wt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[ie.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var le=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new M}else if(L(arguments[0],U)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=n.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var l=0;l<a;l++)this._coordinates[l]=new M}},ce={serialVersionUID:{configurable:!0}};le.prototype.setOrdinate=function(t,e,n){switch(e){case U.X:this._coordinates[t].x=n;break;case U.Y:this._coordinates[t].y=n;break;case U.Z:this._coordinates[t].z=n;break;default:throw new y("invalid ordinateIndex")}},le.prototype.size=function(){return this._coordinates.length},le.prototype.getOrdinate=function(t,e){switch(e){case U.X:return this._coordinates[t].x;case U.Y:return this._coordinates[t].y;case U.Z:return this._coordinates[t].z}return v.NaN},le.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},le.prototype.getCoordinateCopy=function(t){return new M(this._coordinates[t])},le.prototype.getDimension=function(){return this._dimension},le.prototype.getX=function(t){return this._coordinates[t].x},le.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new le(t,this._dimension)},le.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},le.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new le(t,this._dimension)},le.prototype.toString=function(){if(this._coordinates.length>0){var t=new P(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},le.prototype.getY=function(t){return this._coordinates[t].y},le.prototype.toCoordinateArray=function(){return this._coordinates},le.prototype.interfaces_=function(){return[U,e]},le.prototype.getClass=function(){return le},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(le,ce);var ue=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ue.prototype.readResolve=function(){return ue.instance()},ue.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new le(arguments[0]);if(L(arguments[0],U))return new le(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new le(t):new le(t,e)}},ue.prototype.interfaces_=function(){return[k,e]},ue.prototype.getClass=function(){return ue},ue.instance=function(){return ue.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new ue},Object.defineProperties(ue,he);var de=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new At;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Lt),pe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof me){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},fe={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};pe.prototype.equals=function(t){if(!(t instanceof pe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},pe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new z(n).compareTo(new z(i))},pe.prototype.getScale=function(){return this._scale},pe.prototype.isFloating=function(){return this._modelType===pe.FLOATING||this._modelType===pe.FLOATING_SINGLE},pe.prototype.getType=function(){return this._modelType},pe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===pe.FLOATING?t="Floating":this._modelType===pe.FLOATING_SINGLE?t="Floating-Single":this._modelType===pe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},pe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return v.isNaN(t)||this._modelType===pe.FLOATING_SINGLE?t:this._modelType===pe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof M){var e=arguments[0];if(this._modelType===pe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},pe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===pe.FLOATING?t=16:this._modelType===pe.FLOATING_SINGLE?t=6:this._modelType===pe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},pe.prototype.setScale=function(t){this._scale=Math.abs(t)},pe.prototype.interfaces_=function(){return[e,x]},pe.prototype.getClass=function(){return pe},pe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},fe.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},fe.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(pe,fe);var me=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ge={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};me.prototype.readResolve=function(){return me.nameToTypeMap.get(this._name)},me.prototype.toString=function(){return this._name},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},ge.serialVersionUID.get=function(){return-552860263173159e4},ge.nameToTypeMap.get=function(){return new de},Object.defineProperties(me,ge),pe.Type=me,pe.FIXED=new me("FIXED"),pe.FLOATING=new me("FLOATING"),pe.FLOATING_SINGLE=new me("FLOATING SINGLE");var _e=function t(){this._precisionModel=new pe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?L(arguments[0],k)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof pe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ye={serialVersionUID:{configurable:!0}};_e.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new M(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new M(t.getMinX(),t.getMinY()),new M(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new M(t.getMinX(),t.getMinY()),new M(t.getMinX(),t.getMaxY()),new M(t.getMaxX(),t.getMaxY()),new M(t.getMaxX(),t.getMinY()),new M(t.getMinX(),t.getMinY())]),null)},_e.prototype.createLineString=function(t){return t?t instanceof Array?new Wt(this.getCoordinateSequenceFactory().create(t),this):L(t,U)?new Wt(t,this):void 0:new Wt(this.getCoordinateSequenceFactory().create([]),this)},_e.prototype.createMultiLineString=function(){return 0===arguments.length?new Vt(null,this):1===arguments.length?new Vt(arguments[0],this):void 0},_e.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(_e.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qt)return this.createMultiPolygon(_e.toPolygonArray(t));if(s instanceof Wt)return this.createMultiLineString(_e.toLineStringArray(t));if(s instanceof Kt)return this.createMultiPoint(_e.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},_e.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},_e.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof M){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(L(arguments[0],U))return new Kt(arguments[0],this)}},_e.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},_e.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(L(arguments[0],U)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},_e.prototype.getSRID=function(){return this._SRID},_e.prototype.createGeometryCollection=function(){return 0===arguments.length?new jt(null,this):1===arguments.length?new jt(arguments[0],this):void 0},_e.prototype.createGeometry=function(t){return new ie(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},_e.prototype.getPrecisionModel=function(){return this._precisionModel},_e.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(L(arguments[0],U))return new ee(arguments[0],this)}},_e.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},_e.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(L(arguments[0],U)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());Zt.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},_e.prototype.interfaces_=function(){return[e]},_e.prototype.getClass=function(){return _e},_e.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.getDefaultCoordinateSequenceFactory=function(){return ue.instance()},_e.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},_e.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ye.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(_e,ye);var ve=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new _e};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==ve.indexOf(n)?xe[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xe[n].apply(this,[e.geometries]):xe[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!xe[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new M(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new M(t[0],t[1]),new M(t[2],t[1]),new M(t[2],t[3]),new M(t[0],t[3]),new M(t[0],t[1])])},Point:function(t){var e=new M(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],a=xe.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);i.push(s)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(xe.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=we.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(we.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=we.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],o=we.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=we.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(we[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new _e,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Ee.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===pe.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Me=function(){this.parser=new be(this.geometryFactory)};Me.prototype.write=function(t){return this.parser.write(t)};var Te=function(){},Se={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Te.prototype.interfaces_=function(){return[]},Te.prototype.getClass=function(){return Te},Te.opposite=function(t){return t===Te.LEFT?Te.RIGHT:t===Te.RIGHT?Te.LEFT:t},Se.ON.get=function(){return 0},Se.LEFT.get=function(){return 1},Se.RIGHT.get=function(){return 2},Object.defineProperties(Te,Se),(m.prototype=new Error).name="EmptyStackException",(g.prototype=new wt).add=function(t){return this.array_.push(t),!0},g.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},g.prototype.push=function(t){return this.array_.push(t),t},g.prototype.pop=function(t){if(0===this.array_.length)throw new m;return this.array_.pop()},g.prototype.peek=function(){if(0===this.array_.length)throw new m;return this.array_[this.array_.length-1]},g.prototype.empty=function(){return 0===this.array_.length},g.prototype.isEmpty=function(){return this.empty()},g.prototype.search=function(t){return this.array_.indexOf(t)},g.prototype.size=function(){return this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var ke=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};ke.prototype.getCoordinate=function(){return this._minCoord},ke.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},ke.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=st.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===st.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},ke.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=Te.LEFT;return n[e].y<n[e+1].y&&(i=Te.RIGHT),i},ke.prototype.getEdge=function(){return this._orientedDe},ke.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},ke.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},ke.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Te.LEFT&&(this._orientedDe=this._minDe.getSym())},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var Ce=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new M(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Ie=function(){this.array_=[]};Ie.prototype.addLast=function(t){this.array_.push(t)},Ie.prototype.removeFirst=function(){return this.array_.shift()},Ie.prototype.isEmpty=function(){return 0===this.array_.length};var Le=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new ke};Le.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Le.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Le.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new Ce("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Le.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Te.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Le.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Le.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Te.RIGHT)>=1&&e.getDepth(Te.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Le.prototype.computeDepths=function(t){var e=new At,n=new Ie,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Le.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Le.prototype.getEnvelope=function(){if(null===this._env){for(var t=new H,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},Le.prototype.addReachable=function(t){var e=new g;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Le.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Te.LEFT,t.getDepth(Te.RIGHT)),e.setDepth(Te.RIGHT,t.getDepth(Te.LEFT))},Le.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},Le.prototype.getNodes=function(){return this._nodes},Le.prototype.getDirectedEdges=function(){return this._dirEdgeList},Le.prototype.interfaces_=function(){return[x]},Le.prototype.getClass=function(){return Le};var De=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Te.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Te.ON]=o,this.location[Te.LEFT]=a,this.location[Te.RIGHT]=s}};De.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},De.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==C.NONE)return!1;return!0},De.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===C.NONE&&(this.location[e]=t)},De.prototype.isLine=function(){return 1===this.location.length},De.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Te.ON]=this.location[Te.ON],e[Te.LEFT]=C.NONE,e[Te.RIGHT]=C.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===C.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},De.prototype.getLocations=function(){return this.location},De.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Te.LEFT];this.location[Te.LEFT]=this.location[Te.RIGHT],this.location[Te.RIGHT]=t},De.prototype.toString=function(){var t=new P;return this.location.length>1&&t.append(C.toLocationSymbol(this.location[Te.LEFT])),t.append(C.toLocationSymbol(this.location[Te.ON])),this.location.length>1&&t.append(C.toLocationSymbol(this.location[Te.RIGHT])),t.toString()},De.prototype.setLocations=function(t,e,n){this.location[Te.ON]=t,this.location[Te.LEFT]=e,this.location[Te.RIGHT]=n},De.prototype.get=function(t){return t<this.location.length?this.location[t]:C.NONE},De.prototype.isArea=function(){return this.location.length>1},De.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===C.NONE)return!0;return!1},De.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Te.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},De.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(C.NONE)},De.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},De.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Ae=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new De(e),this.elt[1]=new De(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new De(n.elt[0]),this.elt[1]=new De(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new De(C.NONE),this.elt[1]=new De(C.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new De(o,a,s),this.elt[1]=new De(o,a,s)}else if(4===arguments.length){var l=arguments[0],c=arguments[1],u=arguments[2],h=arguments[3];this.elt[0]=new De(C.NONE,C.NONE,C.NONE),this.elt[1]=new De(C.NONE,C.NONE,C.NONE),this.elt[l].setLocations(c,u,h)}};Ae.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ae.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ae.prototype.isNull=function(t){return this.elt[t].isNull()},Ae.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Ae.prototype.isLine=function(t){return this.elt[t].isLine()},Ae.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new De(t.elt[e]):this.elt[e].merge(t.elt[e])},Ae.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ae.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Te.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Ae.prototype.toString=function(){var t=new P;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ae.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ae.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ae.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Te.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},Ae.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ae.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ae.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new De(this.elt[t].location[0]))},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae},Ae.toLineLabel=function(t){for(var e=new Ae(C.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Pe=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Ae(C.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Pe.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Pe.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Pe.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ce("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ce("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var i=e.getLabel();et.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Pe.prototype.getLinearRing=function(){return this._ring},Pe.prototype.getCoordinate=function(t){return this._pts.get(t)},Pe.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Pe.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var a=i.length-2;n&&(a=i.length-1);for(var s=a;s>=0;s--)this._pts.add(i[s])}},Pe.prototype.isHole=function(){return this._isHole},Pe.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Pe.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Pe.prototype.addHole=function(t){this._holes.add(t)},Pe.prototype.isShell=function(){return null===this._shell},Pe.prototype.getLabel=function(){return this._label},Pe.prototype.getEdges=function(){return this._edges},Pe.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Pe.prototype.getShell=function(){return this._shell},Pe.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Te.RIGHT);if(n===C.NONE)return null;if(this._label.getLocation(e)===C.NONE)return this._label.setLocation(e,n),null}},Pe.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Pe.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Pe.prototype.interfaces_=function(){return[]},Pe.prototype.getClass=function(){return Pe};var ze=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Pe),Ne=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ze(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Pe),Re=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Re.prototype.setVisited=function(t){this._isVisited=t},Re.prototype.setInResult=function(t){this._isInResult=t},Re.prototype.isCovered=function(){return this._isCovered},Re.prototype.isCoveredSet=function(){return this._isCoveredSet},Re.prototype.setLabel=function(t){this._label=t},Re.prototype.getLabel=function(){return this._label},Re.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Re.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Re.prototype.isInResult=function(){return this._isInResult},Re.prototype.isVisited=function(){return this._isVisited},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re};var Oe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Ae(0,C.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=C.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==C.BOUNDARY&&(n=i)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Ae(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ae)for(var n=arguments[0],i=0;i<2;i++){var r=this.computeMergedLocation(n,i);this._label.getLocation(i)===C.NONE&&this._label.setLocation(i,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=C.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;if(e===C.BOUNDARY)n=C.INTERIOR;else n=C.BOUNDARY;this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Re),Fe=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof M){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Oe){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new Et,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===C.BOUNDARY&&e.add(i)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Be=function(){},Ue={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new y("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof M&&arguments[1]instanceof M){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new y("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Be.NE:Be.SE:i.y>=n.y?Be.NW:Be.SW}},Ue.NE.get=function(){return 0},Ue.NW.get=function(){return 1},Ue.SW.get=function(){return 2},Ue.SE.get=function(){return 3},Object.defineProperties(Be,Ue);var Ye=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._edge=e,this.init(n,i),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=r,this.init(o,a),this._label=s}};Ye.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ye.prototype.getDy=function(){return this._dy},Ye.prototype.getCoordinate=function(){return this._p0},Ye.prototype.setNode=function(t){this._node=t},Ye.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ye.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ye.prototype.getDirectedCoordinate=function(){return this._p1},Ye.prototype.getDx=function(){return this._dx},Ye.prototype.getLabel=function(){return this._label},Ye.prototype.getEdge=function(){return this._edge},Ye.prototype.getQuadrant=function(){return this._quadrant},Ye.prototype.getNode=function(){return this._node},Ye.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ye.prototype.computeLabel=function(t){},Ye.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ye.prototype.interfaces_=function(){return[x]},Ye.prototype.getClass=function(){return Ye};var je=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var i=e.getNumPoints()-1;this.init(e.getCoordinate(i),e.getCoordinate(i-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ae(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ce("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Te.LEFT)===C.INTERIOR&&this._label.getLocation(e,Te.RIGHT)===C.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Te.LEFT]+"/"+this._depth[Te.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,C.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,C.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Te.LEFT&&(i=-1);var r=Te.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===C.EXTERIOR&&e===C.INTERIOR?1:t===C.INTERIOR&&e===C.EXTERIOR?-1:0},e}(Ye),Ve=function(){};Ve.prototype.createNode=function(t){return new Oe(t,null)},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var Ge=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new Fe(new Ve);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}};Ge.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Ge.prototype.find=function(t){return this._nodes.find(t)},Ge.prototype.addNode=function(){if(arguments[0]instanceof Oe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof M){var e=arguments[0];return this._nodes.addNode(e)}},Ge.prototype.getNodeIterator=function(){return this._nodes.iterator()},Ge.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Ge.prototype.debugPrintln=function(t){G.out.println(t)},Ge.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===C.BOUNDARY},Ge.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Ge.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&st.computeOrientation(t,e,i)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,i)},Ge.prototype.getEdgeEnds=function(){return this._edgeEndList},Ge.prototype.debugPrint=function(t){G.out.print(t)},Ge.prototype.getEdgeIterator=function(){return this._edges.iterator()},Ge.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},Ge.prototype.insertEdge=function(t){this._edges.add(t)},Ge.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Ge.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new je(n,!0),r=new je(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},Ge.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Ge.prototype.getNodes=function(){return this._nodes.values()},Ge.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge},Ge.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var qe=function(){this._geometryFactory=null,this._shellList=new Et;var t=arguments[0];this._geometryFactory=t};qe.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},qe.prototype.computePolygons=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},qe.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new Ce("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},qe.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new Et,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else i.add(o)}return i},qe.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},qe.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Ne(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},qe.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},qe.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},qe.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),c=l.getLinearRing(),u=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;u.contains(i)&&st.isPointInRing(r,c.getCoordinates())&&(h=!0),h&&(null===o||a.contains(u))&&(o=l)}return o},qe.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},qe.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Ge.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new Et,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var He=function(){};He.prototype.getBounds=function(){},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var $e=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};$e.prototype.getItem=function(){return this._item},$e.prototype.getBounds=function(){return this._bounds},$e.prototype.interfaces_=function(){return[He,e]},$e.prototype.getClass=function(){return $e};var Ze=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)};Ze.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Ze.prototype.size=function(){return this._size},Ze.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Ze.prototype.clear=function(){this._size=0,this._items.clear()},Ze.prototype.isEmpty=function(){return 0===this._size},Ze.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var We=function(){};We.prototype.visitItem=function(t){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Xe=function(){};Xe.prototype.insert=function(t,e){},Xe.prototype.remove=function(t,e){},Xe.prototype.query=function(){},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var Ke=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Ke.prototype.getLevel=function(){return this._level},Ke.prototype.size=function(){return this._childBoundables.size()},Ke.prototype.getChildBoundables=function(){return this._childBoundables},Ke.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ke.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ke.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ke.prototype.interfaces_=function(){return[He,e]},Ke.prototype.getClass=function(){return Ke},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ke,Je);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?Ot.sort(n,e):Ot.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},Qe.singletonList=function(t){var e=new Et;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),i=tn.isComposite(this._boundable2);if(n&&i)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new y("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<i&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ke};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ke?t+=this.size(n):n instanceof $e&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof $e&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],n=new Et,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Ke){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof $e?n.add(r.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new $e(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(et.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ke?this.boundablesAtLevel(n,a,r):(et.isTrue(a instanceof $e),-1===n&&r.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,i)}else if(3===arguments.length)if(L(arguments[2],We)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var r=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var l=a.get(s);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Ke?this.query(r,l,o):l instanceof $e?o.visitItem(l.getItem()):et.shouldNeverReachHere())}else if(L(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke)for(var c=arguments[0],u=arguments[2],h=arguments[1].getChildBoundables(),d=0;d<h.size();d++){var p=h.get(d);this.getIntersectsOp().intersects(p.getBounds(),c)&&(p instanceof Ke?this.query(c,p,u):p instanceof $e?u.add(p.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var a=null,s=i.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Ke&&(o=this.remove(n,l,r))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ke){var i=this.depth(n);i>t&&(t=i)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Et;n.add(this.createNode(e));var i=new Et(t);Qe.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var i={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Et,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new Et;for(var a=0;r.hasNext()&&a<n;){var s=r.next();i[o].add(s),a++}}return i},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];t.prototype.query.call(this,n,i)}else if(3===arguments.length)if(L(arguments[2],We)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var r=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,r,o,a)}else if(L(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ke){var s=arguments[0],l=arguments[1],c=arguments[2];t.prototype.query.call(this,s,l,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var i=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Et(t);Qe.sort(r,n.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(i))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(L(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var i=arguments[0];return this.nearestNeighbour(i,v.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&L(arguments[1],on)){var r=arguments[0],o=arguments[1],a=new tn(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],l=arguments[1],c=null,u=new Ze;for(u.add(s);!u.isEmpty()&&l>0;){var h=u.poll(),d=h.getDistance();if(d>=l)break;h.isLeaves()?(l=d,c=h):h.expandToQueue(u,l)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],f=new $e(arguments[0],arguments[1]),m=new tn(this.getRoot(),f,p);return this.nearestNeighbour(m)[0]}},n.prototype.interfaces_=function(){return[Xe,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},i.STRtreeNode.get=function(){return sn},i.serialVersionUID.get=function(){return 0x39920f7d5f261e0},i.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,i){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(i.getBounds()))}}},i.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,i){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(i.getBounds()))}}},i.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},i.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,i),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new H(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ke),ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.relativeSign=function(t,e){return t<e?-1:t>e?1:0},ln.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=ln.relativeSign(e.x,n.x),r=ln.relativeSign(e.y,n.y);switch(t){case 0:return ln.compareValue(i,r);case 1:return ln.compareValue(r,i);case 2:return ln.compareValue(r,-i);case 3:return ln.compareValue(-i,r);case 4:return ln.compareValue(-i,-r);case 5:return ln.compareValue(-r,-i);case 6:return ln.compareValue(-r,i);case 7:return ln.compareValue(i,-r)}return et.shouldNeverReachHere("invalid octant value"),0},ln.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new M(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ln.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[x]},cn.prototype.getClass=function(){return cn};var un=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};un.prototype.getSplitCoordinates=function(){var t=new Tt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},un.prototype.addCollapsedNodes=function(){var t=new Et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},un.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},un.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new z(e+1))}},un.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new M(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new M(e.coord))},un.prototype.iterator=function(){return this._nodeMap.values().iterator()},un.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},un.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},un.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new z(e[0])),i=r}},un.prototype.getEdge=function(){return this._edge},un.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},un.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new M(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return r&&(o[a]=new M(e.coord)),new fn(o,this._edge.getData())},un.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(et.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},un.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+r)},un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new y("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof M&&arguments[1]instanceof M){var r=arguments[0],o=arguments[1],a=o.x-r.x,s=o.y-r.y;if(0===a&&0===s)throw new y("Cannot compute the octant for two identical points "+r);return hn.octant(a,s)}};var dn=function(){};dn.prototype.getCoordinates=function(){},dn.prototype.size=function(){},dn.prototype.getCoordinate=function(t){},dn.prototype.isClosed=function(){},dn.prototype.setData=function(t){},dn.prototype.getData=function(){},dn.prototype.interfaces_=function(){return[]},dn.prototype.getClass=function(){return dn};var pn=function(){};pn.prototype.addIntersection=function(t,e){},pn.prototype.interfaces_=function(){return[dn]},pn.prototype.getClass=function(){return pn};var fn=function(){this._nodeList=new un(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};fn.prototype.getCoordinates=function(){return this._pts},fn.prototype.size=function(){return this._pts.length},fn.prototype.getCoordinate=function(t){return this._pts[t]},fn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},fn.prototype.setData=function(t){this._data=t},fn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},fn.prototype.getData=function(){return this._data},fn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new M(arguments[0].getIntersection(i));this.addIntersection(r,n)}},fn.prototype.toString=function(){return J.toLineString(new le(this._pts))},fn.prototype.getNodeList=function(){return this._nodeList},fn.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)},fn.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn},fn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return fn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();)i.next().getNodeList().addSplitEdges(n)};var mn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new M,this.p1=new M;else if(1===arguments.length){var t=arguments[0];this.p0=new M(t.p0),this.p1=new M(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];this.p0=new M(e,n),this.p1=new M(i,r)}},gn={serialVersionUID:{configurable:!0}};mn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},mn.prototype.orientationIndex=function(){if(arguments[0]instanceof mn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof M){var i=arguments[0];return st.orientationIndex(this.p0,this.p1,i)}},mn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},mn.prototype.isVertical=function(){return this.p0.x===this.p1.x},mn.prototype.equals=function(t){if(!(t instanceof mn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},mn.prototype.intersection=function(t){var e=new rt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},mn.prototype.project=function(){if(arguments[0]instanceof M){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new M(t);var e=this.projectionFactor(t),n=new M;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof mn){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(r<=0&&o<=0)return null;var a=this.project(i.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var s=this.project(i.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new mn(a,s)}},mn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},mn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},mn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},mn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},mn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},mn.prototype.midPoint=function(){return mn.midPoint(this.p0,this.p1)},mn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?v.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},mn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=v.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<i&&(i=r,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(r=s.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=l),n},mn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},mn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},mn.prototype.getLength=function(){return this.p0.distance(this.p1)},mn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},mn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},mn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},mn.prototype.lineIntersection=function(t){try{return q.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof V))throw t}return null},mn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},mn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*r/a,l=e*o/a}return new M(n-l,i+s)},mn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},mn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||v.isNaN(e))&&(e=1),e},mn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},mn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},mn.prototype.distance=function(){if(arguments[0]instanceof mn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof M){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},mn.prototype.pointAlong=function(t){var e=new M;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},mn.prototype.hashCode=function(){var t=v.doubleToLongBits(this.p0.x);t^=31*v.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=v.doubleToLongBits(this.p1.x);return n^=31*v.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},mn.prototype.interfaces_=function(){return[x,e]},mn.prototype.getClass=function(){return mn},mn.midPoint=function(t,e){return new M((t.x+e.x)/2,(t.y+e.y)/2)},gn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(mn,gn);var _n=function(){this.tempEnv1=new H,this.tempEnv2=new H,this._overlapSeg1=new mn,this._overlapSeg2=new mn};_n.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var yn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i};yn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},yn.prototype.computeSelect=function(t,e,n,i){var r=this._pts[e],o=this._pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,i),a<n&&this.computeSelect(t,a,n,i)},yn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},yn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},yn.prototype.setId=function(t){this._id=t},yn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},yn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new H(t,e)}return this._env},yn.prototype.getEndIndex=function(){return this._end},yn.prototype.getStartIndex=function(){return this._start},yn.prototype.getContext=function(){return this._context},yn.prototype.getId=function(){return this._id},yn.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var a=this._pts[t],s=this._pts[e],l=n._pts[i],c=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var u=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);t<u&&(i<h&&this.computeOverlapsInternal(t,u,n,i,h,o),h<r&&this.computeOverlapsInternal(t,u,n,h,r,o)),u<e&&(i<h&&this.computeOverlapsInternal(u,e,n,i,h,o),h<r&&this.computeOverlapsInternal(u,e,n,h,r,o))},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var vn=function(){};vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn},vn.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new z(e));do{var i=vn.findChainEnd(t,e);n.add(new z(i)),e=i}while(e<t.length-1);return vn.toIntArray(n)},vn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Be.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Be.quadrant(t[r-1],t[r])===i);)r++;return r-1},vn.getChains=function(){if(1===arguments.length){var t=arguments[0];return vn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new Et,r=vn.getChainStartIndices(e),o=0;o<r.length-1;o++){var a=new yn(e,r[o],r[o+1],n);i.add(a)}return i}},vn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return fn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=vn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new En(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(e,n),e}(xn),En=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],i=arguments[3],r=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(r,e,o,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(_n),Mn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Tn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Mn.prototype.getEndCapStyle=function(){return this._endCapStyle},Mn.prototype.isSingleSided=function(){return this._isSingleSided},Mn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Mn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Mn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Mn.JOIN_ROUND&&(this._quadrantSegments=Mn.DEFAULT_QUADRANT_SEGMENTS)},Mn.prototype.getJoinStyle=function(){return this._joinStyle},Mn.prototype.setJoinStyle=function(t){this._joinStyle=t},Mn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Mn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Mn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Mn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Mn.prototype.getMitreLimit=function(){return this._mitreLimit},Mn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Mn.prototype.setSingleSided=function(t){this._isSingleSided=t},Mn.prototype.interfaces_=function(){return[]},Mn.prototype.getClass=function(){return Mn},Mn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Tn.CAP_ROUND.get=function(){return 1},Tn.CAP_FLAT.get=function(){return 2},Tn.CAP_SQUARE.get=function(){return 3},Tn.JOIN_ROUND.get=function(){return 1},Tn.JOIN_MITRE.get=function(){return 2},Tn.JOIN_BEVEL.get=function(){return 3},Tn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Tn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Tn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Mn,Tn);var Sn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},kn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Sn.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,t,n,i)},Sn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),i=!1;n<this._inputLine.length;){var r=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Sn.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},Sn.prototype.isShallowConcavity=function(t,e,n,i){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<i},Sn.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/Sn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<i;a+=o)if(!this.isShallow(t,e,this._inputLine[a],r))return!1;return!0},Sn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Sn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Sn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Sn.DELETE;)e++;return e},Sn.prototype.isShallow=function(t,e,n,i){return st.distancePointLine(e,t,n)<i},Sn.prototype.collapseLine=function(){for(var t=new Tt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Sn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.simplify=function(t,e){return new Sn(t).simplify(e)},kn.INIT.get=function(){return 0},kn.DELETE.get=function(){return 1},kn.KEEP.get=function(){return 1},kn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Sn,kn);var Cn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},In={COORDINATE_ARRAY_TYPE:{configurable:!0}};Cn.prototype.getCoordinates=function(){return this._ptList.toArray(Cn.COORDINATE_ARRAY_TYPE)},Cn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Cn.prototype.addPt=function(t){var e=new M(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Cn.prototype.revere=function(){},Cn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},Cn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Cn.prototype.toString=function(){return(new _e).createLineString(this.getCoordinates()).toString()},Cn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new M(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Cn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},In.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Cn,In);var Ln=function(){},Dn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.toDegrees=function(t){return 180*t/Math.PI},Ln.normalize=function(t){for(;t>Math.PI;)t-=Ln.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ln.PI_TIMES_2;return t},Ln.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},Ln.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},Ln.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0},Ln.interiorAngle=function(t,e,n){var i=Ln.angle(e,t),r=Ln.angle(e,n);return Math.abs(r-i)},Ln.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ln.PI_TIMES_2;t>=Ln.PI_TIMES_2&&(t=0)}else{for(;t>=Ln.PI_TIMES_2;)t-=Ln.PI_TIMES_2;t<0&&(t=0)}return t},Ln.angleBetween=function(t,e,n){var i=Ln.angle(e,t),r=Ln.angle(e,n);return Ln.diff(i,r)},Ln.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Ln.toRadians=function(t){return t*Math.PI/180},Ln.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ln.COUNTERCLOCKWISE:n<0?Ln.CLOCKWISE:Ln.NONE},Ln.angleBetweenOriented=function(t,e,n){var i=Ln.angle(e,t),r=Ln.angle(e,n)-i;return r<=-Math.PI?r+Ln.PI_TIMES_2:r>Math.PI?r-Ln.PI_TIMES_2:r},Dn.PI_TIMES_2.get=function(){return 2*Math.PI},Dn.PI_OVER_2.get=function(){return Math.PI/2},Dn.PI_OVER_4.get=function(){return Math.PI/4},Dn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Dn.CLOCKWISE.get=function(){return st.CLOCKWISE},Dn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Ln,Dn);var An=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new mn,this._seg1=new mn,this._offset0=new mn,this._offset1=new mn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new rt,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Mn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Pn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};An.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),i=n===st.CLOCKWISE&&this._side===Te.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Te.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},An.prototype.addLineEndCap=function(t,e){var n=new mn(t,e),i=new mn;this.computeOffsetSegment(n,Te.LEFT,this._distance,i);var r=new mn;this.computeOffsetSegment(n,Te.RIGHT,this._distance,r);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Mn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Mn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Mn.CAP_SQUARE:var l=new M;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var c=new M(i.p1.x+l.x,i.p1.y+l.y),u=new M(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(c),this._segList.addPt(u)}},An.prototype.getCoordinates=function(){return this._segList.getCoordinates()},An.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=q.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof V))throw t;o=new M(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},An.prototype.addFilletCorner=function(t,e,n,i,r){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,c=n.y-t.y,u=Math.atan2(c,l);i===st.CLOCKWISE?s<=u&&(s+=2*Math.PI):s>=u&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,u,i,r),this._segList.addPt(n)},An.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*An.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Mn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Mn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},An.prototype.createSquare=function(t){this._segList.addPt(new M(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new M(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new M(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new M(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},An.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},An.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},An.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},An.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},An.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Ln.angle(r,this._seg0.p0),a=Ln.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,s=Ln.normalize(o+a),l=Ln.normalize(s+Math.PI),c=i*n,u=n-c*Math.abs(Math.sin(a)),h=r.x+c*Math.cos(l),d=r.y+c*Math.sin(l),p=new M(h,d),f=new mn(r,p),m=f.pointAlongOffset(1,u),g=f.pointAlongOffset(1,-u);this._side===Te.LEFT?(this._segList.addPt(m),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(m))},An.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===Te.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=r*n*o/s,c=r*n*a/s;i.p0.x=t.p0.x-c,i.p0.y=t.p0.y+l,i.p1.x=t.p1.x-c,i.p1.y=t.p1.y+l},An.prototype.addFilletArc=function(t,e,n,i,r){var o=i===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,c=0,u=new M;c<a;){var h=e+o*c;u.x=t.x+r*Math.cos(h),u.y=t.y+r*Math.sin(h),this._segList.addPt(u),c+=l}},An.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*An.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new M((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new M((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},An.prototype.createCircle=function(t){var e=new M(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},An.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},An.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Cn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*An.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},An.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Mn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Mn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},An.prototype.closeRing=function(){this._segList.closeRing()},An.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An},Pn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Pn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Pn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Pn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(An,Pn);var zn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};zn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&St.reverse(o),o},zn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=Sn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Te.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(t,!1);var s=Sn.simplify(t,i),l=s.length-1;n.initSideSegments(s[0],s[1],Te.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},zn.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===Te.RIGHT&&(i=-i);var r=Sn.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(r[a],s)}n.closeRing()},zn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=Sn.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Te.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var a=Sn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Te.LEFT);for(var l=s-2;l>=0;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},zn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Mn.CAP_ROUND:e.createCircle(t);break;case Mn.CAP_SQUARE:e.createSquare(t)}},zn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},zn.prototype.getBufferParameters=function(){return this._bufParams},zn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},zn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return zn.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},zn.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=Sn.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Te.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var s=Sn.simplify(t,i),l=s.length-1;n.initSideSegments(s[0],s[1],Te.LEFT),n.addFirstSegment();for(var c=2;c<=l;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},zn.prototype.getSegGen=function(t){return new An(this._precisionModel,this._bufParams,t)},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn},zn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new M(t[n]);return e};var Nn=function(){this._subgraphs=null,this._seg=new mn,this._cga=new st;var t=arguments[0];this._subgraphs=t},Rn={DepthSegment:{configurable:!0}};Nn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(L(arguments[2],wt)&&arguments[0]instanceof M&&arguments[1]instanceof je){for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++)if(this._seg.p0=l[c],this._seg.p1=l[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var u=a.getDepth(Te.LEFT);this._seg.p0.equals(l[c])||(u=a.getDepth(Te.RIGHT));var h=new On(this._seg,u);s.add(h)}}else if(L(arguments[2],wt)&&arguments[0]instanceof M&&L(arguments[1],wt))for(var d=arguments[0],p=arguments[2],f=arguments[1].iterator();f.hasNext();){var m=f.next();m.isForward()&&this.findStabbedSegments(d,m,p)}},Nn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Rn.DepthSegment.get=function(){return On},Object.defineProperties(Nn,Rn);var On=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new mn(t),this._leftDepth=e};On.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},On.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},On.prototype.toString=function(){return this._upwardSeg.toString()},On.prototype.interfaces_=function(){return[x]},On.prototype.getClass=function(){return On};var Fn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Fn.prototype.area=function(){return Fn.area(this.p0,this.p1,this.p2)},Fn.prototype.signedArea=function(){return Fn.signedArea(this.p0,this.p1,this.p2)},Fn.prototype.interpolateZ=function(t){if(null===t)throw new y("Supplied point is null.");return Fn.interpolateZ(t,this.p0,this.p1,this.p2)},Fn.prototype.longestSideLength=function(){return Fn.longestSideLength(this.p0,this.p1,this.p2)},Fn.prototype.isAcute=function(){return Fn.isAcute(this.p0,this.p1,this.p2)},Fn.prototype.circumcentre=function(){return Fn.circumcentre(this.p0,this.p1,this.p2)},Fn.prototype.area3D=function(){return Fn.area3D(this.p0,this.p1,this.p2)},Fn.prototype.centroid=function(){return Fn.centroid(this.p0,this.p1,this.p2)},Fn.prototype.inCentre=function(){return Fn.inCentre(this.p0,this.p1,this.p2)},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn},Fn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Fn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Fn.det=function(t,e,n,i){return t*i-e*n},Fn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,a=n.x-r,s=i.x-r,l=n.y-o,c=i.y-o,u=a*c-s*l,h=t.x-r,d=t.y-o,p=(c*h-s*d)/u,f=(-l*h+a*d)/u;return e.z+p*(n.z-e.z)+f*(i.z-e.z)},Fn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),a=i;return r>a&&(a=r),o>a&&(a=o),a},Fn.isAcute=function(t,e,n){return!!Ln.isAcute(t,e,n)&&!!Ln.isAcute(e,n,t)&&!!Ln.isAcute(n,t,e)},Fn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,a=t.y-r,s=e.x-i,l=e.y-r,c=2*Fn.det(o,a,s,l),u=Fn.det(a,o*o+a*a,l,s*s+l*l),h=Fn.det(o,o*o+a*a,s,s*s+l*l);return new M(i-u/c,r+h/c)},Fn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new q(t.x+n/2,t.y+i/2,1),o=new q(t.x-i+n/2,t.y+n+i/2,1);return new q(r,o)},Fn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new M(t.x+r*o,t.y+r*a)},Fn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,c=r*l-o*s,u=o*a-i*l,h=i*s-r*a,d=c*c+u*u+h*h;return Math.sqrt(d)/2},Fn.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new M(i,r)},Fn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),a=i+r+o,s=(i*t.x+r*e.x+o*n.x)/a,l=(i*t.y+r*e.y+o*n.y)/a;return new M(s,l)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Te.LEFT;this._distance<0&&(e=-this._distance,n=Te.RIGHT);var i=t.getExteriorRing(),r=St.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,C.EXTERIOR,C.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=St.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Te.opposite(n),C.INTERIOR,C.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new Fn(t[0],t[1],t[2]),i=n.inCentre();return st.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=St.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new fn(t,new Ae(0,C.BOUNDARY,e,n));this._curveList.add(i)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=i,a=r;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=r,a=i,n=Te.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Wt?this.addLineString(t):t instanceof Kt?this.addPoint(t):(t instanceof te||t instanceof Vt||t instanceof ne||t instanceof jt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Un=function(){};Un.prototype.locate=function(t){},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var Yn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Yn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Yn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new i;var t=this._parent.getGeometryN(this._index++);return t instanceof jt?(this._subcollectionIterator=new Yn(t),this._subcollectionIterator.next()):t},Yn.prototype.remove=function(){throw new Error(this.getClass().getName())},Yn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Yn.prototype.interfaces_=function(){return[xt]},Yn.prototype.getClass=function(){return Yn},Yn.isAtomic=function(t){return!(t instanceof jt)};var jn=function(){this._geom=null;var t=arguments[0];this._geom=t};jn.prototype.locate=function(t){return jn.locate(t,this._geom)},jn.prototype.interfaces_=function(){return[Un]},jn.prototype.getClass=function(){return jn},jn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},jn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!jn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(jn.isPointInRing(t,r))return!1}return!0},jn.containsPoint=function(t,e){if(e instanceof Qt)return jn.containsPointInPolygon(t,e);if(e instanceof jt)for(var n=new Yn(e);n.hasNext();){var i=n.next();if(i!==e&&jn.containsPoint(t,i))return!0}return!1},jn.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:jn.containsPoint(t,e)?C.INTERIOR:C.EXTERIOR};var Vn=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[C.NONE,C.NONE]};Vn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Vn.prototype.propagateSideLabels=function(t){for(var e=C.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,Te.LEFT)!==C.NONE&&(e=i.getLocation(t,Te.LEFT))}if(e===C.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Te.ON)===C.NONE&&s.setLocation(t,Te.ON,r),s.isArea(t)){var l=s.getLocation(t,Te.LEFT),c=s.getLocation(t,Te.RIGHT);if(c!==C.NONE){if(c!==r)throw new Ce("side location conflict",a.getCoordinate());l===C.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=l}else et.isTrue(s.getLocation(t,Te.LEFT)===C.NONE,"found single null side"),s.setLocation(t,Te.RIGHT,r),s.setLocation(t,Te.LEFT,r)}}},Vn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Vn.prototype.print=function(t){G.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Vn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Vn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,Te.LEFT);et.isTrue(i!==C.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Te.LEFT),l=a.getLocation(t,Te.RIGHT);if(s===l)return!1;if(l!==r)return!1;r=s}return!0},Vn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Vn.prototype.iterator=function(){return this.getEdges().iterator()},Vn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},Vn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===C.NONE&&(this._ptInAreaLocation[t]=jn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Vn.prototype.toString=function(){var t=new P;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Vn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Vn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===C.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),l=0;l<2;l++)if(s.isAnyNull(l)){var c=C.NONE;if(e[l])c=C.EXTERIOR;else{var u=a.getCoordinate();c=this.getLocation(l,u,t)}s.setAllLocationsIfNull(l,c)}},Vn.prototype.getDegree=function(){return this._edgeMap.size()},Vn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn};var Gn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ce("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Be.isNorthern(r)&&Be.isNorthern(o)?n:Be.isNorthern(r)||Be.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},e.prototype.print=function(t){G.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Et;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Te.LEFT),i=t.getDepth(Te.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new Ce("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(Te.RIGHT,a),a=l.getDepth(Te.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===n&&i++;return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=C.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=C.INTERIOR;break}if(i.isInResult()){t=C.EXTERIOR;break}}}if(t===C.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(r===C.INTERIOR):(a.isInResult()&&(r=C.EXTERIOR),s.isInResult()&&(r=C.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ae(C.NONE);for(var n=this.iterator();n.hasNext();)for(var i=n.next().getEdge().getLabel(),r=0;r<2;r++){var o=i.getLocation(r);o!==C.INTERIOR&&o!==C.BOUNDARY||this._label.setLocation(r,C.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vn),qn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Oe(t,new Gn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ve),Hn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Hn.prototype.compareTo=function(t){var e=t;return Hn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Hn.prototype.interfaces_=function(){return[x]},Hn.prototype.getClass=function(){return Hn},Hn.orientation=function(t){return 1===St.increasingDirection(t)},Hn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,a=e?t.length:-1,s=i?n.length:-1,l=e?0:t.length-1,c=i?0:n.length-1;;){var u=t[l].compareTo(n[c]);if(0!==u)return u;var h=(l+=r)===a,d=(c+=o)===s;if(h&&!d)return-1;if(!h&&d)return 1;if(h&&d)return 0}};var $n=function(){this._edges=new Et,this._ocaMap=new h};$n.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},$n.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},$n.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},$n.prototype.iterator=function(){return this._edges.iterator()},$n.prototype.getEdges=function(){return this._edges},$n.prototype.get=function(t){return this._edges.get(t)},$n.prototype.findEqualEdge=function(t){var e=new Hn(t.getCoordinates());return this._ocaMap.get(e)},$n.prototype.add=function(t){this._edges.add(t);var e=new Hn(t.getCoordinates());this._ocaMap.put(e,t)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var Zn=function(){};Zn.prototype.processIntersections=function(t,e,n,i){},Zn.prototype.isDone=function(){},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Wn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Wn.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Wn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Wn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Wn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Wn.prototype.getLineIntersector=function(){return this._li},Wn.prototype.hasProperIntersection=function(){return this._hasProper},Wn.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Wn.prototype.hasIntersection=function(){return this._hasIntersection},Wn.prototype.isDone=function(){return!1},Wn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Wn.prototype.interfaces_=function(){return[Zn]},Wn.prototype.getClass=function(){return Wn},Wn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Xn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new M(t),this.segmentIndex=e,this.dist=n};Xn.prototype.getSegmentIndex=function(){return this.segmentIndex},Xn.prototype.getCoordinate=function(){return this.coord},Xn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Xn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Xn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Xn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Xn.prototype.getDistance=function(){return this.dist},Xn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Xn.prototype.interfaces_=function(){return[x]},Xn.prototype.getClass=function(){return Xn};var Kn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Kn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Kn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Kn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},Kn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Kn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new M(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return r&&(o[a]=e.coord),new ni(o,new Ae(this.edge._label))},Kn.prototype.add=function(t,e,n){var i=new Xn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},Kn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new z(e));do{var i=this.findChainEnd(t,e);n.add(new z(i)),e=i}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Be.quadrant(t[i-1],t[i])===n;)i++;return i-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new H,this.env2=new H;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],c=arguments[5],u=this.pts[r],h=this.pts[o],d=a.pts[s],p=a.pts[l];if(o-r==1&&l-s==1)return c.addIntersections(this.e,r,a.e,s),null;if(this.env1.init(u,h),this.env2.init(d,p),!this.env1.intersects(this.env2))return null;var f=Math.trunc((r+o)/2),m=Math.trunc((s+l)/2);r<f&&(s<m&&this.computeIntersectsForChain(r,f,a,s,m,c),m<l&&this.computeIntersectsForChain(r,f,a,m,l,c)),f<o&&(s<m&&this.computeIntersectsForChain(f,o,a,s,m,c),m<l&&this.computeIntersectsForChain(f,o,a,m,l,c))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var ti=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ei={NULL_VALUE:{configurable:!0}};ti.prototype.getDepth=function(t,e){return this._depth[t][e]},ti.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},ti.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==ti.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===ti.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._depth[i][r]===ti.NULL_VALUE}},ti.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}},ti.prototype.getDelta=function(t){return this._depth[t][Te.RIGHT]-this._depth[t][Te.LEFT]},ti.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?C.EXTERIOR:C.INTERIOR},ti.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},ti.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==C.EXTERIOR&&i!==C.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=ti.depthAtLocation(i):this._depth[e][n]+=ti.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===C.INTERIOR&&this._depth[r][o]++}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ti.depthAtLocation=function(t){return t===C.EXTERIOR?0:t===C.INTERIOR?1:ti.NULL_VALUE},ei.NULL_VALUE.get=function(){return-1},Object.defineProperties(ti,ei);var ni=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Kn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ti,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.pts=i,this._label=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ae.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var i=!0,r=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(i=!1),this.pts[a].equals2D(n.pts[--o])||(r=!1),!i&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new H;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,i){var r=new M(t.getIntersection(i)),o=e,a=t.getEdgeDistance(n,i),s=o+1;if(s<this.pts.length){var l=this.pts[s];r.equals2D(l)&&(o=s,a=0)}this.eiList.add(r,o,a)},e.prototype.toString=function(){var t=new P;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Te.ON),e.getLocation(1,Te.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Te.LEFT),e.getLocation(1,Te.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Te.RIGHT),e.getLocation(1,Te.RIGHT),2))},e}(Re),ii=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new $n,this._bufParams=t||null};ii.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ii.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Ae(t.getLabel())).flip(),n.merge(i);var r=ii.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ii.depthDelta(t.getLabel()))},ii.prototype.buildSubgraphs=function(t,e){for(var n=new Et,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new Nn(n).getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ii.prototype.createSubgraphs=function(t){for(var e=new Et,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Le;r.create(i),e.add(r)}}return Qe.sort(e,Qe.reverseOrder()),e},ii.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ii.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new rt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Wn(n)),e},ii.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new zn(n,this._bufParams),r=new Bn(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Ge(new qn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new qe(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},ii.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=r.getData(),s=new ni(r.getCoordinates(),new Ae(a));this.insertUniqueEdge(s)}}},ii.prototype.setNoder=function(t){this._workingNoder=t},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.depthDelta=function(t){var e=t.getLocation(0,Te.LEFT),n=t.getLocation(0,Te.RIGHT);return e===C.INTERIOR&&n===C.EXTERIOR?1:e===C.EXTERIOR&&n===C.INTERIOR?-1:0},ii.convertSegStrings=function(t){for(var e=new _e,n=new Et;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ri=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ri.prototype.rescale=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&G.out.println(n)}},ri.prototype.scale=function(){if(L(arguments[0],bt)){for(var t=arguments[0],e=new Et,n=t.iterator();n.hasNext();){var i=n.next();e.add(new fn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),a=0;a<r.length;a++)o[a]=new M(Math.round((r[a].x-this._offsetX)*this._scaleFactor),Math.round((r[a].y-this._offsetY)*this._scaleFactor),r[a].z);return St.removeRepeatedPoints(o)}},ri.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ri.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ri.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ri.prototype.interfaces_=function(){return[bn]},ri.prototype.getClass=function(){return ri};var oi=function(){this._li=new rt,this._segStrings=null;var t=arguments[0];this._segStrings=t},ai={fact:{configurable:!0}};oi.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},oi.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],a=r.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(r,l,o,c);else if(4===arguments.length){var u=arguments[0],h=arguments[1],d=arguments[2],p=arguments[3];if(u===d&&h===p)return null;var f=u.getCoordinates()[h],m=u.getCoordinates()[h+1],g=d.getCoordinates()[p],_=d.getCoordinates()[p+1];if(this._li.computeIntersection(f,m,g,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,f,m)||this.hasInteriorIntersection(this._li,g,_)))throw new Q("found non-noded intersection at "+f+"-"+m+" and "+g+"-"+_)}},oi.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},oi.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])},oi.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},oi.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+oi.fact.createLineString([t,e,n]))},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},ai.fact.get=function(){return new _e},Object.defineProperties(oi,ai);var si=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new y("Scale factor must be non-zero");1!==e&&(this._pt=new M(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new M,this._p1Scaled=new M),this.initCorners(this._pt)},li={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};si.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},si.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new M(this._maxx,this._maxy),this._corner[1]=new M(this._minx,this._maxy),this._corner[2]=new M(this._minx,this._miny),this._corner[3]=new M(this._maxx,this._miny)},si.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},si.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},si.prototype.getCoordinate=function(){return this._originalPt},si.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},si.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=si.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new H(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},si.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},si.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},si.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si},li.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(si,li);var ci=function(){this.tempEnv1=new H,this.selectedSegment=new mn};ci.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var ui=function(){this._index=null;var t=arguments[0];this._index=t},hi={HotPixelSnapAction:{configurable:!0}};ui.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new di(e,n,i);return this._index.query(r,{interfaces_:function(){return[We]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},hi.HotPixelSnapAction.get=function(){return di},Object.defineProperties(ui,hi);var di=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),pi=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Et};pi.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},pi.prototype.isDone=function(){return!1},pi.prototype.getInteriorIntersections=function(){return this._interiorIntersections},pi.prototype.interfaces_=function(){return[Zn]},pi.prototype.getClass=function(){return pi};var fi=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new rt,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};fi.prototype.checkCorrectness=function(t){var e=fn.getNodedSubstrings(t),n=new oi(e);try{n.checkValid()}catch(t){if(!(t instanceof j))throw t;t.printStackTrace()}},fi.prototype.getNodedSubstrings=function(){return fn.getNodedSubstrings(this._nodedSegStrings)},fi.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},fi.prototype.findInteriorIntersections=function(t,e){var n=new pi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},fi.prototype.computeVertexSnaps=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof fn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new si(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},fi.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new ui(this._noder.getIndex()),this.snapRound(t,this._li)},fi.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new si(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}},fi.prototype.interfaces_=function(){return[bn]},fi.prototype.getClass=function(){return fi};var mi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Mn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},gi={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mi.prototype.bufferFixedPrecision=function(t){var e=new ri(new fi(new pe(1)),t.getScale()),n=new ii(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},mi.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=mi.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ce))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=mi.precisionScaleFactor(this._argGeom,this._distance,n),r=new pe(i);this.bufferFixedPrecision(r)}},mi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===pe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mi.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mi.prototype.bufferOriginalPrecision=function(){try{var t=new ii(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},mi.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mi.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},mi.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new mi(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],i=new mi(arguments[0]);return i.setQuadrantSegments(n),i.getResultGeometry(e)}if(arguments[2]instanceof Mn&&arguments[0]instanceof ut&&"number"==typeof arguments[1]){var r=arguments[1];return new mi(arguments[0],arguments[2]).getResultGeometry(r)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],l=new mi(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(s),l.getResultGeometry(o)}},mi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=D.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},gi.CAP_ROUND.get=function(){return Mn.CAP_ROUND},gi.CAP_BUTT.get=function(){return Mn.CAP_FLAT},gi.CAP_FLAT.get=function(){return Mn.CAP_FLAT},gi.CAP_SQUARE.get=function(){return Mn.CAP_SQUARE},gi.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mi,gi);var _i=function(){this._pt=[new M,new M],this._distance=v.NaN,this._isNull=!0};_i.prototype.getCoordinates=function(){return this._pt},_i.prototype.getCoordinate=function(t){return this._pt[t]},_i.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},_i.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},_i.prototype.getDistance=function(){return this._distance},_i.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var yi=function(){};yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi},yi.computeDistance=function(){if(arguments[2]instanceof _i&&arguments[0]instanceof Wt&&arguments[1]instanceof M)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),i=new mn,r=0;r<n.length-1;r++){i.setCoordinates(n[r],n[r+1]);var o=i.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof _i&&arguments[0]instanceof Qt&&arguments[1]instanceof M){var a=arguments[0],s=arguments[1],l=arguments[2];yi.computeDistance(a.getExteriorRing(),s,l);for(var c=0;c<a.getNumInteriorRing();c++)yi.computeDistance(a.getInteriorRingN(c),s,l)}else if(arguments[2]instanceof _i&&arguments[0]instanceof ut&&arguments[1]instanceof M){var u=arguments[0],h=arguments[1],d=arguments[2];if(u instanceof Wt)yi.computeDistance(u,h,d);else if(u instanceof Qt)yi.computeDistance(u,h,d);else if(u instanceof jt)for(var p=u,f=0;f<p.getNumGeometries();f++){var m=p.getGeometryN(f);yi.computeDistance(m,h,d)}else d.setMinimum(u.getCoordinate(),h)}else if(arguments[2]instanceof _i&&arguments[0]instanceof mn&&arguments[1]instanceof M){var g=arguments[1],_=arguments[2],y=arguments[0].closestPoint(g);_.setMinimum(y,g)}};var vi=function(t){this._maxPtDist=new _i,this._inputGeom=t||null},bi={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};vi.prototype.computeMaxMidpointDistance=function(t){var e=new wi(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vi.prototype.computeMaxVertexDistance=function(t){var e=new xi(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},vi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},vi.prototype.getDistancePoints=function(){return this._maxPtDist},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi},bi.MaxPointDistanceFilter.get=function(){return xi},bi.MaxMidpointDistanceFilter.get=function(){return wi},Object.defineProperties(vi,bi);var xi=function(t){this._maxPtDist=new _i,this._minPtDist=new _i,this._geom=t||null};xi.prototype.filter=function(t){this._minPtDist.initialize(),yi.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xi.prototype.getMaxPointDistance=function(){return this._maxPtDist},xi.prototype.interfaces_=function(){return[pt]},xi.prototype.getClass=function(){return xi};var wi=function(t){this._maxPtDist=new _i,this._minPtDist=new _i,this._geom=t||null};wi.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new M((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),yi.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wi.prototype.isDone=function(){return!1},wi.prototype.isGeometryChanged=function(){return!1},wi.prototype.getMaxPointDistance=function(){return this._maxPtDist},wi.prototype.interfaces_=function(){return[Yt]},wi.prototype.getClass=function(){return wi};var Ei=function(t){this._comps=t||null};Ei.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Ei.prototype.interfaces_=function(){return[Ut]},Ei.prototype.getClass=function(){return Ei},Ei.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ei.getPolygons(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof jt&&e.apply(new Ei(n)),n}};var Mi=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Mi.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Wt&&this._lines.add(t)},Mi.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Mi.prototype.interfaces_=function(){return[ct]},Mi.prototype.getClass=function(){return Mi},Mi.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Mi.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Mi.getLines(e,n))}},Mi.getLines=function(){if(1===arguments.length){var t=arguments[0];return Mi.getLines(t,!1)}if(2===arguments.length){if(L(arguments[0],bt)&&L(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var i=n.next();Mi.getLines(i,e)}return e}if(arguments[0]instanceof ut&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1],a=new Et;return r.apply(new Mi(a,o)),a}if(arguments[0]instanceof ut&&L(arguments[1],bt)){var s=arguments[0],l=arguments[1];return s instanceof Wt?l.add(s):s.apply(new Mi(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&L(arguments[0],bt)&&L(arguments[1],bt)){for(var c=arguments[1],u=arguments[2],h=arguments[0].iterator();h.hasNext();){var d=h.next();Mi.getLines(d,c,u)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ut&&L(arguments[1],bt)){var p=arguments[1],f=arguments[2];return arguments[0].apply(new Mi(p,f)),p}}};var Ti=function(){if(this._boundaryRule=ft.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new y("Rule must be non-null");this._boundaryRule=t}};Ti.prototype.locateInternal=function(){if(arguments[0]instanceof M&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return C.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===C.EXTERIOR)return C.EXTERIOR;if(i===C.BOUNDARY)return C.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),a=this.locateInPolygonRing(t,o);if(a===C.INTERIOR)return C.EXTERIOR;if(a===C.BOUNDARY)return C.BOUNDARY}return C.INTERIOR}if(arguments[0]instanceof M&&arguments[1]instanceof Wt){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return C.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?st.isOnLine(s,c)?C.INTERIOR:C.EXTERIOR:C.BOUNDARY}if(arguments[0]instanceof M&&arguments[1]instanceof Kt){var u=arguments[0];return arguments[1].getCoordinate().equals2D(u)?C.INTERIOR:C.EXTERIOR}},Ti.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):C.EXTERIOR},Ti.prototype.intersects=function(t,e){return this.locate(t,e)!==C.EXTERIOR},Ti.prototype.updateLocationInfo=function(t){t===C.INTERIOR&&(this._isIn=!0),t===C.BOUNDARY&&this._numBoundaries++},Ti.prototype.computeLocation=function(t,e){if(e instanceof Kt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Wt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Vt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof jt)for(var l=new Yn(e);l.hasNext();){var c=l.next();c!==e&&this.computeLocation(t,c)}},Ti.prototype.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:e instanceof Wt||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?C.BOUNDARY:this._numBoundaries>0||this._isIn?C.INTERIOR:C.EXTERIOR)},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti};var Si=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];this._component=e,this._segIndex=n,this._pt=i}},ki={INSIDE_AREA:{configurable:!0}};Si.prototype.isInsideArea=function(){return this._segIndex===Si.INSIDE_AREA},Si.prototype.getCoordinate=function(){return this._pt},Si.prototype.getGeometryComponent=function(){return this._component},Si.prototype.getSegmentIndex=function(){return this._segIndex},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},ki.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Si,ki);var Ci=function(t){this._pts=t||null};Ci.prototype.filter=function(t){t instanceof Kt&&this._pts.add(t)},Ci.prototype.interfaces_=function(){return[Ut]},Ci.prototype.getClass=function(){return Ci},Ci.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Kt?Qe.singletonList(t):Ci.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Kt?n.add(e):e instanceof jt&&e.apply(new Ci(n)),n}};var Ii=function(){this._locations=null;var t=arguments[0];this._locations=t};Ii.prototype.filter=function(t){(t instanceof Kt||t instanceof Wt||t instanceof Qt)&&this._locations.add(new Si(t,0,t.getCoordinate()))},Ii.prototype.interfaces_=function(){return[Ut]},Ii.prototype.getClass=function(){return Ii},Ii.getLocations=function(t){var e=new Et;return t.apply(new Ii(e)),e};var Li=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ti,this._minDistanceLocation=null,this._minDistance=v.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};Li.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Ei.getPolygons(this._geom[e]);if(r.size()>0){var o=Ii.getLocations(this._geom[i]);if(this.computeContainmentDistance(o,r,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&L(arguments[0],wt)&&L(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var u=a.get(c),h=0;h<s.size();h++)if(this.computeContainmentDistance(u,s.get(h),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Si&&arguments[1]instanceof Qt){var d=arguments[0],p=arguments[1],f=arguments[2],m=d.getCoordinate();if(C.EXTERIOR!==this._ptLocator.locate(m,p))return this._minDistance=0,f[0]=d,f[1]=new Si(p,m),null}},Li.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},Li.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Mi.getLines(this._geom[0]),n=Mi.getLines(this._geom[1]),i=Ci.getPoints(this._geom[0]),r=Ci.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},Li.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Li.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Li.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Li.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Wt&&arguments[1]instanceof Kt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var a=st.distancePointLine(r,i[o],i[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new mn(i[o],i[o+1]).closestPoint(r);n[0]=new Si(t,o,s),n[1]=new Si(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Wt&&arguments[1]instanceof Wt){var l=arguments[0],c=arguments[1],u=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var h=l.getCoordinates(),d=c.getCoordinates(),p=0;p<h.length-1;p++)for(var f=0;f<d.length-1;f++){var m=st.distanceLineLine(h[p],h[p+1],d[f],d[f+1]);if(m<this._minDistance){this._minDistance=m;var g=new mn(h[p],h[p+1]),_=new mn(d[f],d[f+1]),y=g.closestPoints(_);u[0]=new Si(l,p,y[0]),u[1]=new Si(c,f,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},Li.prototype.computeMinDistancePoints=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o),s=r.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Si(r,0,r.getCoordinate()),n[1]=new Si(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Li.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new y("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Li.prototype.computeMinDistanceLines=function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(r,a,n),this._minDistance<=this._terminateDistance)return null}},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.distance=function(t,e){return new Li(t,e).distance()},Li.isWithinDistance=function(t,e,n){return new Li(t,e,n).distance()<=n},Li.nearestPoints=function(t,e){return new Li(t,e).nearestPoints()};var Di=function(){this._pt=[new M,new M],this._distance=v.NaN,this._isNull=!0};Di.prototype.getCoordinates=function(){return this._pt},Di.prototype.getCoordinate=function(t){return this._pt[t]},Di.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Di.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Di.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Di.prototype.getDistance=function(){return this._distance},Di.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di};var Ai=function(){};Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.computeDistance=function(){if(arguments[2]instanceof Di&&arguments[0]instanceof Wt&&arguments[1]instanceof M)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new mn,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Di&&arguments[0]instanceof Qt&&arguments[1]instanceof M){var s=arguments[0],l=arguments[1],c=arguments[2];Ai.computeDistance(s.getExteriorRing(),l,c);for(var u=0;u<s.getNumInteriorRing();u++)Ai.computeDistance(s.getInteriorRingN(u),l,c)}else if(arguments[2]instanceof Di&&arguments[0]instanceof ut&&arguments[1]instanceof M){var h=arguments[0],d=arguments[1],p=arguments[2];if(h instanceof Wt)Ai.computeDistance(h,d,p);else if(h instanceof Qt)Ai.computeDistance(h,d,p);else if(h instanceof jt)for(var f=h,m=0;m<f.getNumGeometries();m++){var g=f.getGeometryN(m);Ai.computeDistance(g,d,p)}else p.setMinimum(h.getCoordinate(),d)}else if(arguments[2]instanceof Di&&arguments[0]instanceof mn&&arguments[1]instanceof M){var _=arguments[1],y=arguments[2],v=arguments[0].closestPoint(_);y.setMinimum(v,_)}};var Pi=function(){this._g0=null,this._g1=null,this._ptDist=new Di,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},zi={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Pi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Pi.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new y("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Pi.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Pi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Pi.prototype.computeOrientedDistance=function(t,e,n){var i=new Ni(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new Ri(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},Pi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.distance=function(){if(2===arguments.length)return new Pi(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Pi(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},zi.MaxPointDistanceFilter.get=function(){return Ni},zi.MaxDensifiedByFractionDistanceFilter.get=function(){return Ri},Object.defineProperties(Pi,zi);var Ni=function(){this._maxPtDist=new Di,this._minPtDist=new Di,this._euclideanDist=new Ai,this._geom=null;var t=arguments[0];this._geom=t};Ni.prototype.filter=function(t){this._minPtDist.initialize(),Ai.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ni.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ni.prototype.interfaces_=function(){return[pt]},Ni.prototype.getClass=function(){return Ni};var Ri=function(){this._maxPtDist=new Di,this._minPtDist=new Di,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Ri.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=(i.x-n.x)/this._numSubSegs,o=(i.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*r,l=n.y+a*o,c=new M(s,l);this._minPtDist.initialize(),Ai.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Ri.prototype.isDone=function(){return!1},Ri.prototype.isGeometryChanged=function(){return!1},Ri.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ri.prototype.interfaces_=function(){return[Yt]},Ri.prototype.getClass=function(){return Ri};var Oi=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Fi={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Oi.prototype.checkMaximumDistance=function(t,e,n){var i=new Pi(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(r[0],r[1])+")"}},Oi.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Oi.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Oi.VERBOSE&&G.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Oi.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof jt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Oi.prototype.getErrorIndicator=function(){return this._errorIndicator},Oi.prototype.checkMinimumDistance=function(t,e,n){var i=new Li(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(r[0],r[1])+" )"}},Oi.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Oi.prototype.getErrorLocation=function(){return this._errorLocation},Oi.prototype.getPolygonLines=function(t){for(var e=new Et,n=new Mi(e),i=Ei.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},Oi.prototype.getErrorMessage=function(){return this._errMsg},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Fi.VERBOSE.get=function(){return!1},Fi.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Oi,Fi);var Bi=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Ui={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Bi.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Bi.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Bi.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new H(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new H(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Bi.prototype.checkDistance=function(){var t=new Oi(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Bi.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Bi.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Bi.prototype.getErrorIndicator=function(){return this._errorIndicator},Bi.prototype.getErrorLocation=function(){return this._errorLocation},Bi.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Bi.prototype.report=function(t){if(!Bi.VERBOSE)return null;G.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Bi.prototype.getErrorMessage=function(){return this._errorMsg},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi},Bi.isValidMsg=function(t,e,n){var i=new Bi(t,e,n);return i.isValid()?null:i.getErrorMessage()},Bi.isValid=function(t,e,n){return!!new Bi(t,e,n).isValid()},Ui.VERBOSE.get=function(){return!1},Ui.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bi,Ui);var Yi=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Yi.prototype.getCoordinates=function(){return this._pts},Yi.prototype.size=function(){return this._pts.length},Yi.prototype.getCoordinate=function(t){return this._pts[t]},Yi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Yi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Yi.prototype.setData=function(t){this._data=t},Yi.prototype.getData=function(){return this._data},Yi.prototype.toString=function(){return J.toLineString(new le(this._pts))},Yi.prototype.interfaces_=function(){return[dn]},Yi.prototype.getClass=function(){return Yi};var ji=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};ji.prototype.getInteriorIntersection=function(){return this._interiorIntersection},ji.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},ji.prototype.getIntersectionSegments=function(){return this._intSegments},ji.prototype.count=function(){return this._intersectionCount},ji.prototype.getIntersections=function(){return this._intersections},ji.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},ji.prototype.setKeepIntersections=function(t){this._keepIntersections=t},ji.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},ji.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},ji.prototype.hasIntersection=function(){return null!==this._interiorIntersection},ji.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},ji.prototype.interfaces_=function(){return[Zn]},ji.prototype.getClass=function(){return ji},ji.createAllIntersectionsFinder=function(t){var e=new ji(t);return e.setFindAllIntersections(!0),e},ji.createAnyIntersectionFinder=function(t){return new ji(t)},ji.createIntersectionCounter=function(t){var e=new ji(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Vi=function(){this._li=new rt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Vi.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Vi.prototype.getIntersections=function(){return this._segInt.getIntersections()},Vi.prototype.isValid=function(){return this.execute(),this._isValid},Vi.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Vi.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new ji(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Vi.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ce(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Vi.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Vi.prototype.interfaces_=function(){return[]},Vi.prototype.getClass=function(){return Vi},Vi.computeIntersections=function(t){var e=new Vi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Gi=function t(){this._nv=null;var e=arguments[0];this._nv=new Vi(t.toSegmentStrings(e))};Gi.prototype.checkValid=function(){this._nv.checkValid()},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi},Gi.toSegmentStrings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Yi(i.getCoordinates(),i))}return e},Gi.checkValid=function(t){new Gi(t).checkValid()};var qi=function(t){this._mapOp=t};qi.prototype.map=function(t){for(var e=new Et,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(_e.toGeometryArray(e))},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},qi.map=function(t,e){return new qi(e).map(t)};var Hi=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Hi.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Hi.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Hi.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Hi.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Sr.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},Hi.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},Hi.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Hi.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},Hi.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Sr.isResultOfOp(i,e)&&e===Sr.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi};var $i=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};$i.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},$i.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Sr.INTERSECTION)){var i=n.getLabel();Sr.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},$i.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i};var Zi=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Zi.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Zi.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof ee&&!i.isEmpty()||(n=!1);for(var r=new Et,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),r.add(a))}if(n)return this._factory.createPolygon(i,r.toArray([]));var s=new Et;return null!==i&&s.add(i),s.addAll(r),this._factory.buildGeometry(s)},Zi.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Zi.prototype.getInputGeometry=function(){return this._inputGeom},Zi.prototype.transformMultiLineString=function(t,e){for(var n=new Et,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Zi.prototype.transformCoordinates=function(t,e){return this.copy(t)},Zi.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Zi.prototype.transformMultiPoint=function(t,e){for(var n=new Et,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Zi.prototype.transformMultiPolygon=function(t,e){for(var n=new Et,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},Zi.prototype.copy=function(t){return t.copy()},Zi.prototype.transformGeometryCollection=function(t,e){for(var n=new Et,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(_e.toGeometryArray(n)):this._factory.buildGeometry(n)},Zi.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Kt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Wt)return this.transformLineString(t,null);if(t instanceof Vt)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof jt)return this.transformGeometryCollection(t,null);throw new y("Unknown Geometry subtype: "+t.getClass().getName())},Zi.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Zi.prototype.interfaces_=function(){return[]},Zi.prototype.getClass=function(){return Zi};var Wi=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new mn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Wt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=i}};Wi.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new M(o)),0===i&&this._isClosed&&t.set(t.size()-1,new M(o)))}},Wi.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Wi.prototype.snapTo=function(t){var e=new Tt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Wi.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new M(r),!1)}},Wi.prototype.findSegmentIndexToSnap=function(t,e){for(var n=v.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,i=r)}return i},Wi.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi},Wi.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Xi=function(t){this._srcGeom=t||null},Ki={SNAP_PRECISION_FACTOR:{configurable:!0}};Xi.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Ji(e,n).transform(this._srcGeom)},Xi.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new Ji(t,n,!0).transform(this._srcGeom),r=i;return e&&L(r,Jt)&&(r=i.buffer(0)),r},Xi.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Xi.prototype.extractTargetCoordinates=function(t){for(var e=new p,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},Xi.prototype.computeMinimumSegmentLength=function(t){for(var e=v.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi},Xi.snap=function(t,e,n){var i=new Array(2).fill(null),r=new Xi(t);i[0]=r.snapTo(e,n);var o=new Xi(e);return i[1]=o.snapTo(i[0],n),i},Xi.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Xi.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===pe.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Xi.computeOverlaySnapTolerance(r),Xi.computeOverlaySnapTolerance(o))}},Xi.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Xi.SNAP_PRECISION_FACTOR},Xi.snapToSelf=function(t,e,n){return new Xi(t).snapToSelf(e,n)},Ki.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Xi,Ki);var Ji=function(t){function e(e,n,i){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==i&&i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Wi(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Zi),Qi=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qi.prototype.getCommon=function(){return v.longBitsToDouble(this._commonBits)},Qi.prototype.add=function(t){var e=v.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qi.signExpBits(this._commonBits),this._isFirst=!1,null):Qi.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qi.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qi.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qi.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=v.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+v.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qi.signExpBits=function(t){return t>>52},Qi.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qi.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(Qi.getBit(t,i)!==Qi.getBit(e,i))return n;n++}return 52};var tr=function(){this._commonCoord=null,this._ccFilter=new nr},er={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};tr.prototype.addCommonBits=function(t){var e=new ir(this._commonCoord);t.apply(e),t.geometryChanged()},tr.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new M(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ir(e);return t.apply(n),t.geometryChanged(),t},tr.prototype.getCommonCoordinate=function(){return this._commonCoord},tr.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},er.CommonCoordinateFilter.get=function(){return nr},er.Translater.get=function(){return ir},Object.defineProperties(tr,er);var nr=function(){this._commonBitsX=new Qi,this._commonBitsY=new Qi};nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new M(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[pt]},nr.prototype.getClass=function(){return nr};var ir=function(){this.trans=null;var t=arguments[0];this.trans=t};ir.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},ir.prototype.isDone=function(){return!1},ir.prototype.isGeometryChanged=function(){return!0},ir.prototype.interfaces_=function(){return[Yt]},ir.prototype.getClass=function(){return ir};var rr=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};rr.prototype.selfSnap=function(t){return new Xi(t).snapTo(t,this._snapTolerance)},rr.prototype.removeCommonBits=function(t){this._cbr=new tr,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},rr.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},rr.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Sr.overlayOp(e[0],e[1],t);return this.prepareResult(n)},rr.prototype.checkValid=function(t){t.isValid()||G.out.println("Snapped geometry is invalid")},rr.prototype.computeSnapTolerance=function(){this._snapTolerance=Xi.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},rr.prototype.snap=function(t){var e=this.removeCommonBits(t);return Xi.snap(e[0],e[1],this._snapTolerance)},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.overlayOp=function(t,e,n){return new rr(t,e).getResultGeometry(n)},rr.union=function(t,e){return rr.overlayOp(t,e,Sr.UNION)},rr.intersection=function(t,e){return rr.overlayOp(t,e,Sr.INTERSECTION)},rr.symDifference=function(t,e){return rr.overlayOp(t,e,Sr.SYMDIFFERENCE)},rr.difference=function(t,e){return rr.overlayOp(t,e,Sr.DIFFERENCE)};var or=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};or.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Sr.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;i=t}if(!n)try{e=rr.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?i:t}return e},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,n){return new or(t,e).getResultGeometry(n)},or.union=function(t,e){return or.overlayOp(t,e,Sr.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Sr.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Sr.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Sr.DIFFERENCE)};var ar=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ar.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar};var sr=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},lr={INSERT:{configurable:!0},DELETE:{configurable:!0}};sr.prototype.isDelete=function(){return this._eventType===sr.DELETE},sr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},sr.prototype.getObject=function(){return this._obj},sr.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},sr.prototype.getInsertEvent=function(){return this._insertEvent},sr.prototype.isInsert=function(){return this._eventType===sr.INSERT},sr.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},sr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},sr.prototype.interfaces_=function(){return[x]},sr.prototype.getClass=function(){return sr},lr.INSERT.get=function(){return 1},lr.DELETE.get=function(){return 2},Object.defineProperties(sr,lr);var cr=function(){};cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var ur=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ur.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(ur.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},ur.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ur.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ur.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ur.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},ur.prototype.hasProperIntersection=function(){return this._hasProper},ur.prototype.hasIntersection=function(){return this._hasIntersection},ur.prototype.isDone=function(){return this._isDone},ur.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ur.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ur.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],s=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},ur.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hr=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ur&&L(arguments[0],wt)&&L(arguments[1],wt)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&L(arguments[0],wt)&&arguments[1]instanceof ur){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new ar(n,r),a=new sr(e,n.getMinX(r),o);this.events.add(a),this.events.add(new sr(n.getMaxX(r),a))}},e.prototype.processOverlaps=function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(r.computeIntersections(s,i),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next();this.addEdge(r,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),dr=function(){this._min=v.POSITIVE_INFINITY,this._max=v.NEGATIVE_INFINITY},pr={NodeComparator:{configurable:!0}};dr.prototype.getMin=function(){return this._min},dr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},dr.prototype.getMax=function(){return this._max},dr.prototype.toString=function(){return J.toLineString(new M(this._min,0),new M(this._max,0))},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},pr.NodeComparator.get=function(){return fr},Object.defineProperties(dr,pr);var fr=function(){};fr.prototype.compare=function(t,e){var n=t,i=e,r=(n._min+n._max)/2,o=(i._min+i._max)/2;return r<o?-1:r>o?1:0},fr.prototype.interfaces_=function(){return[E]},fr.prototype.getClass=function(){return fr};var mr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],i=arguments[2];this._min=e,this._max=n,this._item=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dr),gr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dr),_r=function(){this._leaves=new Et,this._root=null,this._level=0};_r.prototype.buildTree=function(){Qe.sort(this._leaves,new dr.NodeComparator);for(var t=this._leaves,e=null,n=new Et;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},_r.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new mr(t,e,n))},_r.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},_r.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},_r.prototype.printNode=function(t){G.out.println(J.toLineString(new M(t._min,this._level),new M(t._max,this._level)))},_r.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},_r.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new gr(t.get(n),t.get(n+1));e.add(r)}}},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r};var yr=function(){this._items=new Et};yr.prototype.visitItem=function(t){this._items.add(t)},yr.prototype.getItems=function(){return this._items},yr.prototype.interfaces_=function(){return[We]},yr.prototype.getClass=function(){return yr};var vr=function(){this._index=null;var t=arguments[0];if(!L(t,Jt))throw new y("Argument must be Polygonal");this._index=new wr(t)},br={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};vr.prototype.locate=function(t){var e=new at(t),n=new xr(e);return this._index.query(t.y,t.y,n),e.getLocation()},vr.prototype.interfaces_=function(){return[Un]},vr.prototype.getClass=function(){return vr},br.SegmentVisitor.get=function(){return xr},br.IntervalIndexedGeometry.get=function(){return wr},Object.defineProperties(vr,br);var xr=function(){this._counter=null;var t=arguments[0];this._counter=t};xr.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xr.prototype.interfaces_=function(){return[We]},xr.prototype.getClass=function(){return xr};var wr=function(){this._index=new _r;var t=arguments[0];this.init(t)};wr.prototype.init=function(t){for(var e=Mi.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wr.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new mn(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},wr.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new yr;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._index.query(i,r,o)}},wr.prototype.interfaces_=function(){return[]},wr.prototype.getClass=function(){return wr};var Er=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new de,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ti,2===arguments.length){var e=arguments[0],n=arguments[1],i=ft.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=i,null!==n&&this.add(n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var i=this._nodes.addNode(n).getLabel(),r=1;i.getLocation(t,Te.ON)===C.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);i.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],i=arguments[2],r=new ur(arguments[0],!0,!1);r.setIsDoneIfProperInt(i);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,r,s),this.addSelfIntersectionNodes(this._argIndex),r}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var i=new ur(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,i),i},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Kt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,C.INTERIOR)}else if(arguments[0]instanceof M){var e=arguments[0];this.insertPoint(this._argIndex,e,C.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),C.EXTERIOR,C.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,C.INTERIOR,C.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],C.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],C.BOUNDARY)},e.prototype.addLineString=function(t){var e=St.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new ni(e,new Ae(this._argIndex,C.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===C.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var i=St.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=e,o=n;st.isCCW(i)&&(r=n,o=e);var a=new ni(i,new Ae(this._argIndex,C.BOUNDARY,r,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,i[0],C.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var i=this._nodes.addNode(e),r=i.getLabel();null===r?i._label=new Ae(t,n):r.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Wt)this.addLineString(e);else if(e instanceof Kt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Vt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof jt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return L(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new vr(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?C.BOUNDARY:C.INTERIOR},e}(Ge),Mr=function(){if(this._li=new rt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Er(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=ft.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Er(0,e,i),this._arg[1]=new Er(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Er(0,r,a),this._arg[1]=new Er(1,o,a)}};Mr.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Mr.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr};var Tr=function(){};Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Tr.map=function(){if(arguments[0]instanceof ut&&L(arguments[1],Tr.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Et,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(L(arguments[0],bt)&&L(arguments[1],Tr.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Et,l=o.iterator();l.hasNext();){var c=l.next(),u=a.map(c);null!==u&&s.add(u)}return s}},Tr.MapOp=function(){};var Sr=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ti,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new $n,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new Ge(new qn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Ae(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,i,r){var o=new Et;return o.addAll(t),o.addAll(n),o.addAll(i),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this._ptLocator.locate(t,i)!==C.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Et;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Gi.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new qe(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var i=new Hi(this,this._geomFact,this._ptLocator);this._resultLineList=i.build(t);var r=new $i(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea()&&!i.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Te.RIGHT),r.getLocation(1,Te.RIGHT),t)&&i.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(et.isTrue(!i.isNull(r,Te.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Te.LEFT,i.getLocation(r,Te.LEFT)),et.isTrue(!i.isNull(r,Te.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Te.RIGHT,i.getLocation(r,Te.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Mr);Sr.overlayOp=function(t,e,n){return new Sr(t,e).getResultGeometry(n)},Sr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Sr.createEmptyResult(Sr.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return qi.map(t,{interfaces_:function(){return[Tr.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Sr.INTERSECTION)},Sr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Sr.createEmptyResult(Sr.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Sr.SYMDIFFERENCE)},Sr.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Sr.INTERSECTION:o=Math.min(i,r);break;case Sr.UNION:o=Math.max(i,r);break;case Sr.DIFFERENCE:o=i;break;case Sr.SYMDIFFERENCE:o=Math.max(i,r)}return o},Sr.createEmptyResult=function(t,e,n,i){var r=null;switch(Sr.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Sr.difference=function(t,e){return t.isEmpty()?Sr.createEmptyResult(Sr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Sr.DIFFERENCE))},Sr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Sr.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];switch(r===C.BOUNDARY&&(r=C.INTERIOR),o===C.BOUNDARY&&(o=C.INTERIOR),a){case Sr.INTERSECTION:return r===C.INTERIOR&&o===C.INTERIOR;case Sr.UNION:return r===C.INTERIOR||o===C.INTERIOR;case Sr.DIFFERENCE:return r===C.INTERIOR&&o!==C.INTERIOR;case Sr.SYMDIFFERENCE:return r===C.INTERIOR&&o!==C.INTERIOR||r!==C.INTERIOR&&o===C.INTERIOR}return!1}},Sr.INTERSECTION=1,Sr.UNION=2,Sr.DIFFERENCE=3,Sr.SYMDIFFERENCE=4;var kr=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ti,this._seg=new mn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};kr.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),i=0;i<n.size()-1;i++)if(n.getCoordinate(i,this._seg.p0),n.getCoordinate(i+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},kr.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?C.BOUNDARY:this._ptLocator.locate(t,this._g)},kr.prototype.extractLinework=function(t){var e=new Cr;t.apply(e);var n=e.getLinework(),i=_e.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},kr.prototype.interfaces_=function(){return[]},kr.prototype.getClass=function(){return kr};var Cr=function(){this._linework=null,this._linework=new Et};Cr.prototype.getLinework=function(){return this._linework},Cr.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Cr.prototype.interfaces_=function(){return[Ut]},Cr.prototype.getClass=function(){return Cr};var Ir=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Ir.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Ir.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ir.prototype.getPoints=function(t){for(var e=new Et,n=Mi.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Ir.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(r*r+o*o),s=n*r/a,l=n*o/a,c=(e.x+t.x)/2,u=(e.y+t.y)/2;if(this._doLeft){var h=new M(c-l,u+s);i.add(h)}if(this._doRight){var d=new M(c+l,u-s);i.add(d)}},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Lr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new kr(this._geom[0],this._boundaryDistanceTolerance),new kr(this._geom[1],this._boundaryDistanceTolerance),new kr(this._geom[2],this._boundaryDistanceTolerance)]},Dr={TOLERANCE:{configurable:!0}};Lr.prototype.reportResult=function(t,e,n){G.out.println("Overlay result invalid - A:"+C.toLocationSymbol(e[0])+" B:"+C.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+C.toLocationSymbol(e[2]))},Lr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Lr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Lr.hasLocation(this._location,C.BOUNDARY)||this.isValidResult(i,this._location)}},Lr.prototype.addTestPts=function(t){var e=new Ir(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Lr.prototype.isValidResult=function(t,e){var n=Sr.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===C.INTERIOR);return i||this.reportResult(t,e,n),i},Lr.prototype.getInvalidLocation=function(){return this._invalidLocation},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Lr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Xi.computeSizeBasedSnapTolerance(t),Xi.computeSizeBasedSnapTolerance(e))},Lr.isValid=function(t,e,n,i){return new Lr(t,e,i).isValid(n)},Dr.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Lr,Dr);var Ar=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ar.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Ar.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.combine=function(){if(1===arguments.length)return new Ar(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ar(Ar.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return new Ar(Ar.createList(n,i,r)).combine()}},Ar.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ar.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Et;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=new Et;return a.add(i),a.add(r),a.add(o),a}};var Pr=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},zr={STRTREE_NODE_CAPACITY:{configurable:!0}};Pr.prototype.reduceToGeometries=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var i=n.next(),r=null;L(i,wt)?r=this.unionTree(i):i instanceof ut&&(r=i),e.add(r)}return e},Pr.prototype.extractByEnvelope=function(t,e,n){for(var i=new Et,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},Pr.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Ar.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},Pr.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Pr.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},Pr.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Pr.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Pr.getGeometry(e,n),Pr.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,i);return this.unionSafe(a,s)}},Pr.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},Pr.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Pr.prototype.unionActual=function(t,e){return Pr.restrictToPolygons(t.union(e))},Pr.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Pr.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new Et,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),a=this.unionActual(r,o);return i.add(a),Ar.combine(i)},Pr.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.restrictToPolygons=function(t){if(L(t,Jt))return t;var e=Ei.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(_e.toPolygonArray(e))},Pr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Pr.union=function(t){return new Pr(t).union()},zr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Pr,zr);var Nr=function(){};Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Sr.createEmptyResult(Sr.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),or.overlayOp(t,e,Sr.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=Me,t.OverlayOp=Sr,t.UnionOp=Nr,t.BufferOp=mi,Object.defineProperty(t,"__esModule",{value:!0})}(e)},1311:function(t,e,n){t.exports=function(){var t="1.13.1",e="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||Function("return this")()||{},i=Array.prototype,r=Object.prototype,o="undefined"!=typeof Symbol?Symbol.prototype:null,a=i.push,s=i.slice,l=r.toString,c=r.hasOwnProperty,u="undefined"!=typeof ArrayBuffer,h="undefined"!=typeof DataView,d=Array.isArray,p=Object.keys,f=Object.create,m=u&&ArrayBuffer.isView,g=isNaN,_=isFinite,y=!{toString:null}.propertyIsEnumerable("toString"),v=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=Math.pow(2,53)-1;function x(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var o=Array(e+1);for(r=0;r<e;r++)o[r]=arguments[r];return o[e]=i,t.apply(this,o)}}function w(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function E(t){return void 0===t}function M(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)}function T(t){var e="[object "+t+"]";return function(t){return l.call(t)===e}}var S=T("String"),k=T("Number"),C=T("Date"),I=T("RegExp"),L=T("Error"),D=T("Symbol"),A=T("ArrayBuffer"),P=T("Function"),z=e.document&&e.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof z&&(P=function(t){return"function"==typeof t||!1});var N=P,R=T("Object"),O=h&&R(new DataView(new ArrayBuffer(8))),F="undefined"!=typeof Map&&R(new Map),B=T("DataView"),U=O?function(t){return null!=t&&N(t.getInt8)&&A(t.buffer)}:B,Y=d||T("Array");function j(t,e){return null!=t&&c.call(t,e)}var V=T("Arguments");!function(){V(arguments)||(V=function(t){return j(t,"callee")})}();var G=V;function q(t){return k(t)&&g(t)}function H(t){return function(){return t}}function $(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=b}}function Z(t){return function(e){return null==e?void 0:e[t]}}var W=Z("byteLength"),X=$(W),K=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,J=u?function(t){return m?m(t)&&!U(t):X(t)&&K.test(l.call(t))}:H(!1),Q=Z("length");function tt(t,e){e=function(t){for(var e={},n=t.length,i=0;i<n;++i)e[t[i]]=!0;return{contains:function(t){return e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=v.length,i=t.constructor,o=N(i)&&i.prototype||r,a="constructor";for(j(t,a)&&!e.contains(a)&&e.push(a);n--;)(a=v[n])in t&&t[a]!==o[a]&&!e.contains(a)&&e.push(a)}function et(t){if(!w(t))return[];if(p)return p(t);var e=[];for(var n in t)j(t,n)&&e.push(n);return y&&tt(t,e),e}function nt(t,e){var n=et(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var a=n[o];if(e[a]!==r[a]||!(a in r))return!1}return!0}function it(t){return t instanceof it?t:this instanceof it?void(this._wrapped=t):new it(t)}function rt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,W(t))}it.VERSION=t,it.prototype.value=function(){return this._wrapped},it.prototype.valueOf=it.prototype.toJSON=it.prototype.value,it.prototype.toString=function(){return String(this._wrapped)};var ot="[object DataView]";function at(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&function t(e,n,i,r){e instanceof it&&(e=e._wrapped),n instanceof it&&(n=n._wrapped);var a=l.call(e);if(a!==l.call(n))return!1;if(O&&"[object Object]"==a&&U(e)){if(!U(n))return!1;a=ot}switch(a){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return o.valueOf.call(e)===o.valueOf.call(n);case"[object ArrayBuffer]":case ot:return t(rt(e),rt(n),i,r)}var s="[object Array]"===a;if(!s&&J(e)){if(W(e)!==W(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;s=!0}if(!s){if("object"!=typeof e||"object"!=typeof n)return!1;var c=e.constructor,u=n.constructor;if(c!==u&&!(N(c)&&c instanceof c&&N(u)&&u instanceof u)&&"constructor"in e&&"constructor"in n)return!1}r=r||[];for(var h=(i=i||[]).length;h--;)if(i[h]===e)return r[h]===n;if(i.push(e),r.push(n),s){if((h=e.length)!==n.length)return!1;for(;h--;)if(!at(e[h],n[h],i,r))return!1}else{var d,p=et(e);if(h=p.length,et(n).length!==h)return!1;for(;h--;)if(!j(n,d=p[h])||!at(e[d],n[d],i,r))return!1}return i.pop(),r.pop(),!0}(t,e,n,i)}function st(t){if(!w(t))return[];var e=[];for(var n in t)e.push(n);return y&&tt(t,e),e}function lt(t){var e=Q(t);return function(n){if(null==n)return!1;var i=st(n);if(Q(i))return!1;for(var r=0;r<e;r++)if(!N(n[t[r]]))return!1;return t!==pt||!N(n[ct])}}var ct="forEach",ut=["clear","delete"],ht=["get","has","set"],dt=ut.concat(ct,ht),pt=ut.concat(ht),ft=["add"].concat(ut,ct,"has"),mt=F?lt(dt):T("Map"),gt=F?lt(pt):T("WeakMap"),_t=F?lt(ft):T("Set"),yt=T("WeakSet");function vt(t){for(var e=et(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}function bt(t){for(var e={},n=et(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e}function xt(t){var e=[];for(var n in t)N(t[n])&&e.push(n);return e.sort()}function wt(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=t(o),s=a.length,l=0;l<s;l++){var c=a[l];e&&void 0!==n[c]||(n[c]=o[c])}return n}}var Et=wt(st),Mt=wt(et),Tt=wt(st,!0);function St(t){if(!w(t))return{};if(f)return f(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function kt(t){return w(t)?Y(t)?t.slice():Et({},t):t}function Ct(t){return Y(t)?t:[t]}function It(t){return it.toPath(t)}function Lt(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0}function Dt(t,e,n){var i=Lt(t,It(e));return E(i)?n:i}function At(t){return t}function Pt(t){return t=Mt({},t),function(e){return nt(e,t)}}function zt(t){return t=It(t),function(e){return Lt(e,t)}}function Nt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}}function Rt(t,e,n){return null==t?At:N(t)?Nt(t,e,n):w(t)&&!Y(t)?Pt(t):zt(t)}function Ot(t,e){return Rt(t,e,1/0)}function Ft(t,e,n){return it.iteratee!==Ot?it.iteratee(t,e):Rt(t,e,n)}function Bt(){}function Ut(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}it.toPath=Ct,it.iteratee=Ot;var Yt=Date.now||function(){return(new Date).getTime()};function jt(t){var e=function(e){return t[e]},n="(?:"+et(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}}var Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Gt=jt(Vt),qt=jt(bt(Vt)),Ht=it.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},$t=/(.)^/,Zt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Wt=/\\|'|\r|\n|\u2028|\u2029/g;function Xt(t){return"\\"+Zt[t]}var Kt=/^\s*(\w|\$)+\s*$/,Jt=0;function Qt(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=St(t.prototype),a=t.apply(o,r);return w(a)?a:o}var te=x((function(t,e){var n=te.placeholder,i=function(){for(var r=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===n?arguments[r++]:e[s];for(;r<arguments.length;)a.push(arguments[r++]);return Qt(t,i,this,this,a)};return i}));te.placeholder=it;var ee=x((function(t,e,n){if(!N(t))throw new TypeError("Bind must be called on a function");var i=x((function(r){return Qt(t,i,e,this,n.concat(r))}));return i})),ne=$(Q);function ie(t,e,n,i){if(i=i||[],e||0===e){if(e<=0)return i.concat(t)}else e=1/0;for(var r=i.length,o=0,a=Q(t);o<a;o++){var s=t[o];if(ne(s)&&(Y(s)||G(s)))if(e>1)ie(s,e-1,n,i),r=i.length;else for(var l=0,c=s.length;l<c;)i[r++]=s[l++];else n||(i[r++]=s)}return i}var re=x((function(t,e){var n=(e=ie(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=ee(t[i],t)}return t})),oe=x((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),ae=te(oe,it,1);function se(t){return function(){return!t.apply(this,arguments)}}function le(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var ce=te(le,2);function ue(t,e,n){e=Ft(e,n);for(var i,r=et(t),o=0,a=r.length;o<a;o++)if(e(t[i=r[o]],i,t))return i}function he(t){return function(e,n,i){n=Ft(n,i);for(var r=Q(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(n(e[o],o,e))return o;return-1}}var de=he(1),pe=he(-1);function fe(t,e,n,i){for(var r=(n=Ft(n,i,1))(e),o=0,a=Q(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<r?o=s+1:a=s}return o}function me(t,e,n){return function(i,r,o){var a=0,l=Q(i);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+l,a):l=o>=0?Math.min(o+1,l):o+l+1;else if(n&&o&&l)return i[o=n(i,r)]===r?o:-1;if(r!=r)return(o=e(s.call(i,a,l),q))>=0?o+a:-1;for(o=t>0?a:l-1;o>=0&&o<l;o+=t)if(i[o]===r)return o;return-1}}var ge=me(1,de,fe),_e=me(-1,pe);function ye(t,e,n){var i=(ne(t)?de:ue)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}function ve(t,e,n){var i,r;if(e=Nt(e,n),ne(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=et(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t}function be(t,e,n){e=Ft(e,n);for(var i=!ne(t)&&et(t),r=(i||t).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=e(t[s],s,t)}return o}function xe(t){var e=function(e,n,i,r){var o=!ne(e)&&et(e),a=(o||e).length,s=t>0?0:a-1;for(r||(i=e[o?o[s]:s],s+=t);s>=0&&s<a;s+=t){var l=o?o[s]:s;i=n(i,e[l],l,e)}return i};return function(t,n,i,r){var o=arguments.length>=3;return e(t,Nt(n,r,4),i,o)}}var we=xe(1),Ee=xe(-1);function Me(t,e,n){var i=[];return e=Ft(e,n),ve(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function Te(t,e,n){e=Ft(e,n);for(var i=!ne(t)&&et(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(!e(t[a],a,t))return!1}return!0}function Se(t,e,n){e=Ft(e,n);for(var i=!ne(t)&&et(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(e(t[a],a,t))return!0}return!1}function ke(t,e,n,i){return ne(t)||(t=vt(t)),("number"!=typeof n||i)&&(n=0),ge(t,e,n)>=0}var Ce=x((function(t,e,n){var i,r;return N(e)?r=e:(e=It(e),i=e.slice(0,-1),e=e[e.length-1]),be(t,(function(t){var o=r;if(!o){if(i&&i.length&&(t=Lt(t,i)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function Ie(t,e){return be(t,zt(e))}function Le(t,e,n){var i,r,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=ne(t)?t:vt(t)).length;s<l;s++)null!=(i=t[s])&&i>o&&(o=i);else e=Ft(e,n),ve(t,(function(t,n,i){((r=e(t,n,i))>a||r===-1/0&&o===-1/0)&&(o=t,a=r)}));return o}function De(t,e,n){if(null==e||n)return ne(t)||(t=vt(t)),t[Ut(t.length-1)];var i=ne(t)?kt(t):vt(t),r=Q(i);e=Math.max(Math.min(e,r),0);for(var o=r-1,a=0;a<e;a++){var s=Ut(a,o),l=i[a];i[a]=i[s],i[s]=l}return i.slice(0,e)}function Ae(t,e){return function(n,i,r){var o=e?[[],[]]:{};return i=Ft(i,r),ve(n,(function(e,r){var a=i(e,r,n);t(o,e,a)})),o}}var Pe=Ae((function(t,e,n){j(t,n)?t[n].push(e):t[n]=[e]})),ze=Ae((function(t,e,n){t[n]=e})),Ne=Ae((function(t,e,n){j(t,n)?t[n]++:t[n]=1})),Re=Ae((function(t,e,n){t[n?0:1].push(e)}),!0),Oe=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Fe(t,e,n){return e in n}var Be=x((function(t,e){var n={},i=e[0];if(null==t)return n;N(i)?(e.length>1&&(i=Nt(i,e[1])),e=st(t)):(i=Fe,e=ie(e,!1,!1),t=Object(t));for(var r=0,o=e.length;r<o;r++){var a=e[r],s=t[a];i(s,a,t)&&(n[a]=s)}return n})),Ue=x((function(t,e){var n,i=e[0];return N(i)?(i=se(i),e.length>1&&(n=e[1])):(e=be(ie(e,!1,!1),String),i=function(t,n){return!ke(e,n)}),Be(t,i,n)}));function Ye(t,e,n){return s.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function je(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:Ye(t,t.length-e)}function Ve(t,e,n){return s.call(t,null==e||n?1:e)}var Ge=x((function(t,e){return e=ie(e,!0,!0),Me(t,(function(t){return!ke(e,t)}))})),qe=x((function(t,e){return Ge(t,e)}));function He(t,e,n,i){M(e)||(i=n,n=e,e=!1),null!=n&&(n=Ft(n,i));for(var r=[],o=[],a=0,s=Q(t);a<s;a++){var l=t[a],c=n?n(l,a,t):l;e&&!n?(a&&o===c||r.push(l),o=c):n?ke(o,c)||(o.push(c),r.push(l)):ke(r,l)||r.push(l)}return r}var $e=x((function(t){return He(ie(t,!0,!0))}));function Ze(t){for(var e=t&&Le(t,Q).length||0,n=Array(e),i=0;i<e;i++)n[i]=Ie(t,i);return n}var We=x(Ze);function Xe(t,e){return t._chain?it(e).chain():e}function Ke(t){return ve(xt(t),(function(e){var n=it[e]=t[e];it.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),Xe(this,n.apply(it,t))}})),it}ve(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=i[t];it.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),Xe(this,n)}})),ve(["concat","join","slice"],(function(t){var e=i[t];it.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Xe(this,t)}}));var Je=Ke({__proto__:null,VERSION:t,restArguments:x,isObject:w,isNull:function(t){return null===t},isUndefined:E,isBoolean:M,isElement:function(t){return!(!t||1!==t.nodeType)},isString:S,isNumber:k,isDate:C,isRegExp:I,isError:L,isSymbol:D,isArrayBuffer:A,isDataView:U,isArray:Y,isFunction:N,isArguments:G,isFinite:function(t){return!D(t)&&_(t)&&!isNaN(parseFloat(t))},isNaN:q,isTypedArray:J,isEmpty:function(t){if(null==t)return!0;var e=Q(t);return"number"==typeof e&&(Y(t)||S(t)||G(t))?0===e:0===Q(et(t))},isMatch:nt,isEqual:function(t,e){return at(t,e)},isMap:mt,isWeakMap:gt,isSet:_t,isWeakSet:yt,keys:et,allKeys:st,values:vt,pairs:function(t){for(var e=et(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i},invert:bt,functions:xt,methods:xt,extend:Et,extendOwn:Mt,assign:Mt,defaults:Tt,create:function(t,e){var n=St(t);return e&&Mt(n,e),n},clone:kt,tap:function(t,e){return e(t),t},get:Dt,has:function(t,e){for(var n=(e=It(e)).length,i=0;i<n;i++){var r=e[i];if(!j(t,r))return!1;t=t[r]}return!!n},mapObject:function(t,e,n){e=Ft(e,n);for(var i=et(t),r=i.length,o={},a=0;a<r;a++){var s=i[a];o[s]=e(t[s],s,t)}return o},identity:At,constant:H,noop:Bt,toPath:Ct,property:zt,propertyOf:function(t){return null==t?Bt:function(e){return Dt(t,e)}},matcher:Pt,matches:Pt,times:function(t,e,n){var i=Array(Math.max(0,t));e=Nt(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i},random:Ut,now:Yt,escape:Gt,unescape:qt,templateSettings:Ht,template:function(t,e,n){!e&&n&&(e=n),e=Tt({},e,it.templateSettings);var i=RegExp([(e.escape||$t).source,(e.interpolate||$t).source,(e.evaluate||$t).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,(function(e,n,i,a,s){return o+=t.slice(r,s).replace(Wt,Xt),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e})),o+="';\n";var a,s=e.variable;if(s){if(!Kt.test(s))throw new Error("variable is not a bare identifier: "+s)}else o="with(obj||{}){\n"+o+"}\n",s="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(s,"_",o)}catch(t){throw t.source=o,t}var l=function(t){return a.call(this,t,it)};return l.source="function("+s+"){\n"+o+"}",l},result:function(t,e,n){var i=(e=It(e)).length;if(!i)return N(n)?n.call(t):n;for(var r=0;r<i;r++){var o=null==t?void 0:t[e[r]];void 0===o&&(o=n,r=i),t=N(o)?o.call(t):o}return t},uniqueId:function(t){var e=++Jt+"";return t?t+e:e},chain:function(t){var e=it(t);return e._chain=!0,e},iteratee:Ot,partial:te,bind:ee,bindAll:re,memoize:function(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return j(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},delay:oe,defer:ae,throttle:function(t,e,n){var i,r,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Yt(),i=null,a=t.apply(r,o),i||(r=o=null)},c=function(){var c=Yt();s||!1!==n.leading||(s=c);var u=e-(c-s);return r=this,o=arguments,u<=0||u>e?(i&&(clearTimeout(i),i=null),s=c,a=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(i),s=0,i=r=o=null},c},debounce:function(t,e,n){var i,r,o,a,s,l=function(){var c=Yt()-r;e>c?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(s,o)),i||(o=s=null))},c=x((function(c){return s=this,o=c,r=Yt(),i||(i=setTimeout(l,e),n&&(a=t.apply(s,o))),a}));return c.cancel=function(){clearTimeout(i),i=o=s=null},c},wrap:function(t,e){return te(e,t)},negate:se,compose:function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},before:le,once:ce,findKey:ue,findIndex:de,findLastIndex:pe,sortedIndex:fe,indexOf:ge,lastIndexOf:_e,find:ye,detect:ye,findWhere:function(t,e){return ye(t,Pt(e))},each:ve,forEach:ve,map:be,collect:be,reduce:we,foldl:we,inject:we,reduceRight:Ee,foldr:Ee,filter:Me,select:Me,reject:function(t,e,n){return Me(t,se(Ft(e)),n)},every:Te,all:Te,some:Se,any:Se,contains:ke,includes:ke,include:ke,invoke:Ce,pluck:Ie,where:function(t,e){return Me(t,Pt(e))},max:Le,min:function(t,e,n){var i,r,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=ne(t)?t:vt(t)).length;s<l;s++)null!=(i=t[s])&&i<o&&(o=i);else e=Ft(e,n),ve(t,(function(t,n,i){((r=e(t,n,i))<a||r===1/0&&o===1/0)&&(o=t,a=r)}));return o},shuffle:function(t){return De(t,1/0)},sample:De,sortBy:function(t,e,n){var i=0;return e=Ft(e,n),Ie(be(t,(function(t,n,r){return{value:t,index:i++,criteria:e(t,n,r)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")},groupBy:Pe,indexBy:ze,countBy:Ne,partition:Re,toArray:function(t){return t?Y(t)?s.call(t):S(t)?t.match(Oe):ne(t)?be(t,At):vt(t):[]},size:function(t){return null==t?0:ne(t)?t.length:et(t).length},pick:Be,omit:Ue,first:je,head:je,take:je,initial:Ye,last:function(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Ve(t,Math.max(0,t.length-e))},rest:Ve,tail:Ve,drop:Ve,compact:function(t){return Me(t,Boolean)},flatten:function(t,e){return ie(t,e,!1)},without:qe,uniq:He,unique:He,union:$e,intersection:function(t){for(var e=[],n=arguments.length,i=0,r=Q(t);i<r;i++){var o=t[i];if(!ke(e,o)){var a;for(a=1;a<n&&ke(arguments[a],o);a++);a===n&&e.push(o)}}return e},difference:Ge,unzip:Ze,transpose:Ze,zip:We,object:function(t,e){for(var n={},i=0,r=Q(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},range:function(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r},chunk:function(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(s.call(t,i,i+=e));return n},mixin:Ke,default:it});return Je._=Je,Je}()},2300:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(2316),r=n.n(i),o=n(1149),a=(n(6624),n(6486));const s=r().Collection.extend({model:o.Z,urlRoot:"campaign",fetchForDistribution:function(t){var e={url:this.urlRoot+"/distribution"};return e=(0,a.extend)(t,e),this.fetch(e)},fetchForTask:function(t){var e={url:this.urlRoot+"/monitor"};return e=(0,a.extend)(t,e),this.fetch(e)},fetchForReport:function(t){var e={url:this.urlRoot+"/report"};return e=(0,a.extend)(t,e),this.fetch(e)}})},5724:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(2316),r=n.n(i),o=n(6624),a=n.n(o),s=n(6486);const l=r().Model.extend({idAttribute:"id"}),c=r().Collection.extend({model:l,fetchByZipcode:function(t){var e=this;return new(a())(((n,i)=>{$.ajax({url:`//api.mapbox.com/geocoding/v5/mapbox.places/${t}.json`,method:"GET",data:{country:"us",types:"postcode",access_token:"pk.eyJ1IjoiZ2hvc3R1eiIsImEiOiJjaXczc2tmc3cwMDEyMm9tb29pdDRwOXUzIn0.KPSiOO6DWTY59x1zHdvYSA"}}).then((t=>{var i=[],r={type:"FeatureCollection",features:[]};(0,s.each)(t.features,((t,e)=>{i.push({id:t.id,place:t.place_name,text:t.text,latlng:t.geometry.coordinates}),r.features.push({type:"Feature",geometry:t.geometry,properties:{id:t.id,text:t.text,serial:e+1}})})),e.set(i),n(r)}))}))},fetchByAddress:function(t){var e=this;return new(a())(((n,i)=>{$.ajax({url:`//api.mapbox.com/geocoding/v5/mapbox.places/${t}.json`,method:"GET",data:{country:"us",access_token:"pk.eyJ1IjoiZ2hvc3R1eiIsImEiOiJjaXczc2tmc3cwMDEyMm9tb29pdDRwOXUzIn0.KPSiOO6DWTY59x1zHdvYSA"}}).then((t=>{var i=[],r={type:"FeatureCollection",features:[]};(0,s.each)(t.features,((t,e)=>{i.push({id:t.id,place:t.place_name,text:t.text,latlng:t.geometry.coordinates}),r.features.push({type:"Feature",geometry:t.geometry,properties:{id:t.id,text:t.text,serial:e+1}})})),e.set(i),n(r)}))}))}})},8552:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(2316),r=n.n(i),o=(n(6624),n(6486));const a=r().Model.extend({urlRoot:"gtu",idAttribute:"Id",defaults:{Id:null,ShortUniqueID:null,UserColor:null},assignGTUToTask:function(t,e){var n=this,i={url:n.urlRoot+"/task/assign/",method:"PUT",data:t,processData:!0,success:function(t){t&&t.success&&n.set(t.data)}};return i=(0,o.extend)(e,i),(this.sync||r().sync).call(this,"update",this,i)},unassignGTUFromTask:function(t,e){var n=this,i={url:n.urlRoot+"/task/"+t+"/unassign/"+n.get("Id"),method:"DELETE",success:function(t){t&&t.success&&n.set({IsAssign:!1,UserColor:null,Company:null,Auditor:null,Role:null,TaskId:null,AuditorId:null})}};return i=(0,o.extend)(e,i),(this.sync||r().sync).call(this,"update",this,i)},getTrack:function(t,e){var n=this,i=n.get("lastUpdateTime"),a=n.urlRoot+"/task/"+t+"/track/"+n.get("Id");i&&(a+="/"+i);var s={url:a,method:"GET",success:t=>{if(t){n.set("lastUpdateTime",t.lastUpdateTime);var e=n.get("track")||[];n.set("track",(0,o.concat)(e,(0,o.map)(t.data,(t=>({lat:parseFloat(t.lat),lng:parseFloat(t.lng)})))))}}};return s=(0,o.extend)(e,s),(this.sync||r().sync).call(this,"",this,s)}}),s=r().Collection.extend({model:a,urlRoot:"gtu",fetchByTask:function(t,e){var n={url:"task/"+t+"/gtu"};return n=(0,o.extend)(e,n),this.fetch(n)},fetchGtuWithStatusByTask:function(t,e){var n={url:this.urlRoot+"/task/"+t};return n=(0,o.extend)(e,n),this.fetch(n)},fetchGtuLocation:function(t,e){var n=this,i={url:n.urlRoot+"/task/"+t+"/online/",method:"GET",success:t=>{t&&(0,o.each)(t,(t=>{var e=n.get(t.Id);if(e){var i=null;t.Location&&t.Location.lat&&t.Location.lng&&(i={lat:parseFloat(t.Location.lat),lng:parseFloat(t.Location.lng)}),e.set({IsOnline:t.IsOnline,Location:i,OutOfBoundary:t.OutOfBoundary})}}))}};return(0,o.extend)(i,e),(this.sync||r().sync).call(this,"",this,i)}})},1474:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var i=n(2316),r=n.n(i),o=n(3609),a=n.n(o),s=(n(6624),n(6486)),l=n(7315);const c=l.Z.extend({defaults:{DisplayName:null,Date:null,ContactName:null,CreatorName:null}}),u=l.Z.extend({idAttribute:"key",defaults:{Id:null,ClientName:null,ContactName:null,DisplayName:null,CreatorName:null,Date:null,Logo:null}}),h=l.Z.extend({urlRoot:"map",idAttribute:"key",defaults:{Id:null,Name:null,Total:null,DisplayName:null,MapImage:null,PolygonImage:null,ImageStatus:"waiting"},fetchMapImage:function(t){var e=this,n=a().extend({mapType:"ROADMAP"},t,{campaignId:e.get("CampaignId")}),i={quite:!0,url:e.urlRoot+"/campaign/",method:"POST",processData:!0,data:a().param(n),success:function(t){var n=null,i=null;t&&t.success&&(n=t.tiles,i=t.geometry),e.set("MapImage",n,{silent:!0}),e.set("PolygonImage",i,{silent:!0})}};return(this.sync||r().sync).call(this,"update",this,i)}}),d=l.Z.extend({urlRoot:"map",idAttribute:"key",defaults:{Id:null,Name:null,Total:null,DisplayName:null,MapImage:null,PolygonImage:null,ImageStatus:"waiting"},fetchMapImage:function(t){var e=this,n=a().extend({mapType:"HYBRID"},t,{campaignId:e.get("CampaignId"),submapId:e.get("SubMapId")}),i={quite:!0,url:e.urlRoot+"/submap/",method:"POST",processData:!0,data:a().param(n),success:t=>{var n=null,i=null;t&&t.success&&(n=t.tiles,i=t.geometry),e.set("MapImage",n,{silent:!0}),e.set("PolygonImage",i,{silent:!0})}};return(this.sync||r().sync).call(this,"update",this,i)}}),p=l.Z.extend({urlRoot:"print",defaults:{Name:null,TotalHouseHold:null,TargetHouseHold:null,Penetration:null},fetchBySubMap:function(t){var e=this,n=e.get("CampaignId"),i=e.get("SubMapId"),o={url:e.urlRoot+"/campaign/"+n+"/submap/"+i+"/record",success:function(t){e.set("CRoutes",t.record)}};return(0,s.extend)(o,t),(this.sync||r().sync).call(this,"read",this,o)}});var f=n(1859);const m=l.Z.extend({urlRoot:"map",idAttribute:"key",defaults:{Id:null,Name:null,Total:null,DisplayName:null,MapImage:null,PolygonImage:null,ImageStatus:"waiting"},fetchMapImage:function(t){var e=this,n=a().extend({mapType:"HYBRID"},t,{campaignId:e.get("CampaignId"),submapId:e.get("SubMapId"),dmapId:e.get("DMapId")}),i={quite:!0,url:e.urlRoot+"/distribution/",method:"POST",processData:!0,data:a().param(n),success:t=>{var n=null,i=null;t&&t.success&&(n=t.tiles,i=t.geometry),e.set("MapImage",n,{silent:!0}),e.set("PolygonImage",i,{silent:!0})}};return e.get("TopRight")&&e.get("BottomLeft")&&(i.data=a().param(a().extend(n,{topRightLat:e.get("TopRight").lat,topRightLng:e.get("TopRight").lng,bottomLeftLat:e.get("BottomLeft").lat,bottomLeftLng:e.get("BottomLeft").lng}))),(this.sync||r().sync).call(this,"update",this,i)},fetchBoundary:function(t){var e=this,n={url:"print/campaign/"+e.get("CampaignId")+"/submap/"+e.get("SubMapId")+"/dmap/"+e.get("DMapId")+"/boundary/",method:"GET",success:t=>{e.set({Boundary:t.boundary,Color:t.color})}};return(0,s.extend)(n,t),(this.sync||r().sync).call(this,"update",this,n)}});r().Collection.extend({model:d});var g=r().Collection.extend({model:f.Z});const _=r().Collection.extend({model:l.Z,urlRoot:"print",dmaps:[],campaignId:null,fetchForCampaignMap:function(t,e){var n=this,i={url:n.urlRoot+"/campaign/"+t,success:e=>{e.DisplayName;var i=new c({DisplayName:e.DisplayName,Date:e.Date,ContactName:e.ContactName,CreatorName:e.CreatorName});n.campaignId=t,n.submaps=[],n.dmaps=[],n.add(new u({type:"Cover",key:"cover",ClientName:e.ClientName,ContactName:e.ContactName,DisplayName:e.DisplayName,CreatorName:e.CreatorName,Date:e.Date,Logo:e.Logo,Footer:i})),n.add(new h({type:"Campaign",key:"campaign",CampaignId:t,ClientName:e.ClientName,ContactName:e.ContactName,DisplayName:e.DisplayName,CreatorName:e.CreatorName,TotalHouseHold:e.TotalHouseHold,TargetHouseHold:e.TargetHouseHold,Penetration:e.Penetration,Date:e.Date,Logo:e.Logo,Footer:i})),n.add(new h({type:"CampaignSummary",key:"campaign-summary",CampaignId:t,SubMaps:n.submaps,Footer:i})),(0,s.each)(e.SubMaps,(e=>{n.submaps.push({Name:e.Name,OrderId:e.OrderId,TotalHouseHold:e.TotalHouseHold,TargetHouseHold:e.TargetHouseHold,Penetration:e.Penetration}),n.add(new d({type:"SubMap",key:t+"-"+e.Id,CampaignId:t,SubMapId:e.Id,Name:e.Name,OrderId:e.OrderId,TotalHouseHold:e.TotalHouseHold,TargetHouseHold:e.TargetHouseHold,Penetration:e.Penetration,Footer:i})),n.add(new p({type:"SubMapDetail",key:"detail-"+t+"-"+e.Id,CampaignId:t,SubMapId:e.Id,Name:e.Name,OrderId:e.OrderId,Footer:i}))}))}};return i=(0,s.extend)(e,i),(this.sync||r().sync).call(this,"read",this,i)},fetchForDistributionMap:function(t,e){var n=this,i={url:n.urlRoot+"/campaign/"+t,success:e=>{n.campaignId=t,n.dmaps=[];var i=e.DisplayName;(0,s.each)(e.SubMaps,(function(e){(0,s.each)(e.DMaps,(function(r){n.dmaps.push({Selected:!1,Id:r.Id,Name:r.Name}),n.add(new m({key:t+"-"+e.Id+"-"+r.Id,CampaignId:t,SubMapId:e.Id,DMapId:r.Id,Name:r.Name,Total:r.Total,DisplayName:i,ImageStatus:"waiting"}))}))}))}};return i=(0,s.extend)(e,i),(this.sync||r().sync).call(this,"read",this,i)},fetchForReportMap:function(t,e){var n=this,i={url:n.urlRoot+"/campaign/"+t,success:e=>{var i=e.DisplayName,r=new c({DisplayName:e.DisplayName,Date:e.Date,ContactName:e.ContactName,CreatorName:e.CreatorName});n.campaignId=t,n.submaps=[],n.dmaps=[],n.add(new u({type:"Cover",key:"cover",ClientName:e.ClientName,ContactName:e.ContactName,DisplayName:e.DisplayName,CreatorName:e.CreatorName,Date:e.Date,Logo:e.Logo,Footer:r})),n.add(new h({type:"Campaign",key:"campaign",CampaignId:t,ClientName:e.ClientName,ContactName:e.ContactName,DisplayName:e.DisplayName,CreatorName:e.CreatorName,TotalHouseHold:e.TotalHouseHold,TargetHouseHold:e.TargetHouseHold,Penetration:e.Penetration,Date:e.Date,Logo:e.Logo,Footer:r})),n.add(new h({type:"CampaignSummary",key:"campaign-summary",CampaignId:t,SubMaps:n.submaps,Footer:r})),(0,s.each)(e.SubMaps,(function(e){n.submaps.push({Name:e.Name,OrderId:e.OrderId,TotalHouseHold:e.TotalHouseHold,TargetHouseHold:e.TargetHouseHold,Penetration:e.Penetration}),n.add(new d({type:"SubMap",key:t+"-"+e.Id,CampaignId:t,SubMapId:e.Id,Name:e.Name,OrderId:e.OrderId,TotalHouseHold:e.TotalHouseHold,TargetHouseHold:e.TargetHouseHold,Penetration:e.Penetration,Footer:r})),n.add(new p({type:"SubMapDetail",key:"detail-"+t+"-"+e.Id,CampaignId:t,SubMapId:e.Id,Name:e.Name,OrderId:e.OrderId,Footer:r}))})),(0,s.each)(e.SubMaps,(function(e){(0,s.each)(e.DMaps,(function(o){n.dmaps.push({Selected:!1,Id:o.Id,Name:o.Name}),n.add(new f.Z({type:"DMap",key:t+"-"+e.Id+"-"+o.Id,CampaignId:t,SubMapId:e.Id,DMapId:o.Id,Name:o.Name,Total:o.Total,DisplayName:i,Footer:r}))}))}))}};return i=(0,s.extend)(e,i),(this.sync||r().sync).call(this,"read",this,i)},getCampaignId:function(){return this.campaignId},getDMaps:function(){return new g(this.dmaps)},exportPdf:function(t,e){var n={url:"pdf/build/",method:"POST",processData:!0,data:a().param({options:JSON.stringify(t)}),success:function(t){return t}};return n=(0,s.extend)(e,n),(this.sync||r().sync).call(this,"read",this,n)}})},6079:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(2316),r=n.n(i),o=n(189),a=(n(6624),n(6486));const s=r().Collection.extend({model:o.Z,url:"user",fetchInGroup:function(t,e){var n={url:this.url+"/group/"+t,type:"GET"};return(0,a.extend)(n,e),this.fetch(n)},fetchForGtu:function(t){var e={url:this.url+"/gtu/",type:"GET"};return(0,a.extend)(e,t),this.fetch(e)},fetchCompany:function(t){var e={url:this.url+"/company/",type:"GET"};return(0,a.extend)(e,t),this.fetch(e)}})},8573:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(4566),r=n.n(i),o=n(3609),a=n.n(o);l.prototype=new google.maps.OverlayView,l.prototype.addMarker=function(t){this._markers.push(t),this.draw()},l.prototype.removeMarker=function(t){var e=this._markers.indexOf(t);e>-1&&(1==this._markers.length?(this._markers=[],console.log("FastMarker remove last one")):this._markers=this._markers.slice(e,e+1)),this.draw()},l.prototype.onAdd=function(){var t=this.getMap(),e=this.getPanes(),n=this.getProjection(),i=e.overlayLayer,o=a()(".fastMarkerLayer",i);if(t.overlayMapTypes.insertAt(0,this),n&&e&&i&&o&&o.size&&0==o.size()){var s=n.fromLatLngToDivPixel(t.getCenter());this.width=2*s.x,this.height=2*s.y,o=r().select(i).append("svg").attr("style","position:absolute; top: 0; left: 0;").attr("class","fastMarkerLayer"),this.markerLayer=o}},l.prototype.onRemove=function(){this.getMap();var t=this.getPanes().overlayLayer;a()(".fastMarkerLayer",t).remove()},l.prototype.drawTimeout=null,l.prototype.draw=function(){window.clearTimeout(this.drawTimeout),this.drawTimeout=window.setTimeout(a().proxy(this._draw,this),500)},l.prototype._draw=function(){console.log("FastMarker _draw");var t=this.getProjection(),e=this.markerLayer,n={x:null,y:null},i={x:null,y:null};if(e&&t)e.selectAll("*").remove(),console.log("FastMarker draw",this._markers.length),a().each(this._markers,(function(){var e=t.fromLatLngToDivPixel(this.options.position);n.x=null==n.x||n.x>e.x?e.x:n.x,n.y=null==n.y||n.y>e.y?e.y:n.y,i.x=null==i.x||i.x<e.x?e.x:i.x,i.y=null==i.y||i.y<e.y?e.y:i.y})),n.x-=50,n.y-=50,i.x+=50,i.y+=50,e.attr("width",Math.abs(i.x-n.x)).attr("height",Math.abs(i.y-n.y)).attr("style","position:absolute; left: "+n.x+"px; top: "+n.y+"px;"),a().each(this._markers,(function(){var i=t.fromLatLngToDivPixel(this.options.position);e.append("path").attr("d",this.options.icon.path).attr("fill",this.options.icon.fillColor).style("opacity",this.options.icon.fillOpacity).attr("stroke",this.options.icon.strokeColor).style("stroke-opacity",this.options.icon.strokeOpacity).attr("transform",(function(t){return"translate("+(i.x-n.x)+", "+(i.y-n.y)+")"}))}));else{console.log("FastMarker not ready need redraw.");var r=this;window.setTimeout((function(){r._draw.call(r)}),5e3)}},c.prototype.setMap=function(t){var e;null!=t?(s.has(t)?e=s.get(t):(e=new l(t),s.set(t,e)),this.Layer=e,this.Map=t,e.addMarker.call(this.Layer,this)):this.Layer&&this.Map&&(this.Layer.removeMarker.call(this.Layer,this),this.Map=null)};var s={keys:[],values:{},set:function(t,e){var n=this.keys.indexOf(t);n>-1?this.values[n+""]=e:(this.keys.push(t),this.values[this.keys.length-1+""]=e)},get:function(t){var e=this.keys.indexOf(t);return e>-1?this.values[e+""]:null},has:function(t){return this.keys.indexOf(t)>-1},delete:function(t){var e=this.keys.indexOf(t);e>-1&&(this.keys=this.keys.splice(e,1),delete this.values[e+""])}};function l(t){this.setMap(t),this._markers=[]}function c(t){if(this.options=t,this.options&&this.options.position&&(this.options.position=new google.maps.LatLng(this.options.position.lat,this.options.position.lng)),t&&t.map){var e=t.map;this.setMap(e)}}const u=c},9113:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(1227);class r{constructor(t){this._info=i(`${t}:info`),this._info.log=console.info.bind(console),this._error=i(`${t}:error`),this._error.log=console.error.bind(console)}info(...t){let e=t.reduce(((t,e)=>t+("string"!=typeof e?JSON.stringify(e,null,4):e)),"");this._info.call(null,e)}error(...t){let e=t.reduce(((t,e)=>t+("string"!=typeof e?e.toString():e)),""),n=new Error(e);this._error.call(null,n)}}},1149:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(2316),r=n.n(i),o=n(3609),a=n.n(o),s=(n(6624),n(6486)),l=n(594);const c=r().Collection.extend({model:l.Z}),u=r().Model.extend({urlRoot:"campaign",idAttribute:"Id",defaults:{AreaDescription:null,ClientCode:null,ClientName:null,ContactName:null,CreatorName:null,CustemerName:null,Date:null,Description:null,Id:null,Name:null,Sequence:0,UserName:null},getDisplayName:function(){return this.get("ClientCode")+"-"+this.get("CreatorName")+"-"+this.get("AreaDescription")},getWithSubmap:function(){let t=this,e=`${this.urlRoot}/${this.get("Id")}/submap`;return(this.sync||r().sync).call(this,"read",this,{method:"GET",url:e,processData:!0,success:function(e){e&&e.success&&t.set(e.data)}})},copy:function(t){var e={method:"POST",url:this.urlRoot+"/copy/"+this.get("Id")};return(0,s.extend)(e,t),(this.sync||r().sync).call(this,"create",this,e)},publishToDMap:function(t,e){var n={url:this.urlRoot+"/"+this.get("Id")+"/publish/",method:"PUT",processData:!0,data:a().param({"":t.get("Id")})};return n=(0,s.extend)(e,n),(this.sync||r().sync).call(this,"update",this,n)},dismissToCampaign:function(t,e){var n={url:this.urlRoot+"/"+this.get("Id")+"/dismiss/",method:"PUT",processData:!0,data:a().param({"":t.get("Id")})};return n=(0,s.extend)(e,n),(this.sync||r().sync).call(this,"update",this,n)},publishToMonitor:function(t,e){var n={url:this.urlRoot+"/"+this.get("Id")+"/monitor/",method:"PUT",processData:!0,data:a().param({"":t.get("Id")})};return n=(0,s.extend)(e,n),(this.sync||r().sync).call(this,"update",this,n)},dismissToDMap:function(t,e){var n={url:this.urlRoot+"/"+this.get("Id")+"/dismiss/",method:"PUT",processData:!0,data:a().param({"":t.get("Id")})};return n=(0,s.extend)(e,n),(this.sync||r().sync).call(this,"update",this,n)},loadWithAllTask:function(t){var e=this;return(this.sync||r().sync).call(this,"read",this,{url:`campaign/${t}/tasks/all`}).then((t=>{var n=new c;n.set(t.Tasks),t.Tasks=n,e.set(t)}))}})},7315:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(2316);const r=n.n(i)().Model.extend({})},1859:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(2316),r=n.n(i),o=n(7315),a=n(3609),s=n.n(a),l=(n(6624),n(6486));const c=o.Z.extend({urlRoot:"map",idAttribute:"key",defaults:{Id:null,Name:null,Total:null,DisplayName:null,MapImage:null,PolygonImage:null,ImageStatus:"waiting"},fetchMapImage:function(t){var e=this,n=s().extend({mapType:"HYBRID"},t,{campaignId:e.get("CampaignId"),submapId:e.get("SubMapId"),dmapId:e.get("DMapId")}),i={quite:!0,url:e.urlRoot+"/dmap/",method:"POST",processData:!0,data:s().param(n),success:function(t){var n=null,i=null;t&&t.success&&(n=t.tiles,i=t.geometry),e.set("MapImage",n,{silent:!0}),e.set("PolygonImage",i,{silent:!0})}};return e.get("TopRight")&&e.get("BottomLeft")&&(i.data=s().param(s().extend(n,{topRightLat:e.get("TopRight").lat,topRightLng:e.get("TopRight").lng,bottomLeftLat:e.get("BottomLeft").lat,bottomLeftLng:e.get("BottomLeft").lng}))),(this.sync||r().sync).call(this,"update",this,i)},fetchBoundary:function(t){var e=this,n={url:"print/campaign/"+e.get("CampaignId")+"/submap/"+e.get("SubMapId")+"/dmap/"+e.get("DMapId")+"/boundary/",method:"GET",success:t=>{e.set({Boundary:t.boundary,Color:t.color})}};return(0,l.extend)(n,t),(this.sync||r().sync).call(this,"read",this,n)},fetchGtu:function(t){var e=this,n={url:"print/campaign/"+e.get("CampaignId")+"/submap/"+e.get("SubMapId")+"/dmap/"+e.get("DMapId")+"/gtu/",method:"GET",success:function(t){for(var n=[],i=0;i<t.pointsColors.length;i++)t.points[i]&&t.points[i].length>0&&n.push({gtuId:t.points[i][0].Id,color:t.pointsColors[i],points:t.points[i]});e.set({Gtu:n,lastUpdateTime:t.lastUpdateTime})}};return(0,l.extend)(n,t),(this.sync||r().sync).call(this,"read",this,n)},fetchGtuForEdit:function(t){var e=this,n={url:"print/campaign/"+e.get("CampaignId")+"/submap/"+e.get("SubMapId")+"/dmap/"+e.get("DMapId")+"/gtu/foredit",method:"GET",success:function(t){for(var n=[],i=0;i<t.pointsColors.length;i++)t.points[i]&&t.points[i].length>0&&n.push({gtuId:t.points[i][0].Id,color:t.pointsColors[i],points:t.points[i]});e.set({Gtu:n,lastUpdateTime:t.lastUpdateTime})}};return(0,l.extend)(n,t),(this.sync||r().sync).call(this,"read",this,n)},fetchAllGtu:function(t){var e=this,n={url:"print/campaign/"+e.get("CampaignId")+"/submap/"+e.get("SubMapId")+"/dmap/"+e.get("DMapId")+"/gtu/all/",method:"GET",success:function(t){for(var n=[],i=0;i<t.pointsColors.length;i++)t.points[i]&&t.points[i].length>0&&n.push({gtuId:t.points[i][0].Id,color:t.pointsColors[i],points:t.points[i]});e.set({Gtu:n,lastUpdateTime:t.lastUpdateTime})}};return(0,l.extend)(n,t),(this.sync||r().sync).call(this,"read",this,n)},updateGtuAfterTime:function(t,e){var n=this,i=t?t.utc().format("YYYYMMDDTHHmmss[Z]"):n.get("lastUpdateTime"),o={url:"print/campaign/"+n.get("CampaignId")+"/submap/"+n.get("SubMapId")+"/dmap/"+n.get("DMapId")+"/gtu/all/"+i,method:"GET",success:function(t){for(var e=n.get("Gtu")||[],i=0;i<t.pointsColors.length;i++){var r=(0,l.find)(e,{color:t.pointsColors[i]});r?r.points=(0,l.concat)(r.points,t.points[i]):e.push({color:t.pointsColors[i],points:t.points[i]})}n.set({lastUpdateTime:t.lastUpdateTime})}};return(0,l.extend)(o,e),(this.sync||r().sync).call(this,"read",this,o)}})},4247:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i}),n(2316);const i=n(7315).Z.extend({urlRoot:"map",defaults:{suppressCover:!0,suppressCampaign:!0,suppressCampaignSummary:!0,suppressNDAInCampaign:!0,suppressSubMap:!0,suppressSubMapCountDetail:!0,suppressNDAInSubMap:!0,suppressDMap:!1,suppressGTU:!0,suppressNDAInDMap:!0,customSubMapPenetrationColors:!1,suppressLocations:!0,suppressRadii:!0}})},594:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var i=n(2316),r=n.n(i),o=n(3609),a=n.n(o),s=n(6624),l=n.n(s),c=n(6486);const u=r().Model.extend({urlRoot:"task",idAttribute:"Id",defaults:{Id:null,Name:null,Date:null,Status:null,Telephone:null,Email:null,DistributionMapId:null,AuditorId:null,AuditorName:null},markFinished:function(t){var e={url:this.urlRoot+"/"+this.get("Id")+"/finish/",method:"PUT"};return e=(0,c.extend)(t,e),(this.sync||r().sync).call(this,"update",this,e)},reOpen:function(t){var e={url:this.urlRoot+"/"+this.get("Id")+"/reopen/",method:"PUT"};return e=(0,c.extend)(t,e),(this.sync||r().sync).call(this,"update",this,e)},importGtu:function(t,e){var n=this,i={url:"../api/"+n.urlRoot+"/"+n.get("Id")+"/import/",method:"PUT"};i=(0,c.extend)(e,i);var r=new XMLHttpRequest,o=new FormData;r.open(i.method,i.url,!0),r.onreadystatechange=()=>{4==r.readyState&&200==r.status&&i.success&&i.success.call(n,JSON.parse(r.responseText))},o.append("gtuFile",t),r.send(o)},addGtuDots:function(t,e){var n={url:this.urlRoot+"/"+this.get("Id")+"/dots/",method:"POST",data:a().param({"":t})};return n=(0,c.extend)(e,n),(this.sync||r().sync).call(this,"",this,n).then((t=>t&&t.success?l().resolve():l().reject()))},removeGtuDots:function(t,e){var n={url:this.urlRoot+"/"+this.get("Id")+"/dots/",method:"PUT",data:a().param({"":t})};return n=(0,c.extend)(e,n),(this.sync||r().sync).call(this,"",this,n).then((t=>t&&t.success?l().resolve():l().reject()))},setStart:function(t){var e=this,n={url:e.urlRoot+"/"+e.get("Id")+"/start/",method:"PUT",success:function(t){t&&t.success&&e.set({Status:t.status})}};return n=(0,c.extend)(t,n),(this.sync||r().sync).call(this,"update",this,n)},setPause:function(t){var e=this,n={url:e.urlRoot+"/"+e.get("Id")+"/pause/",method:"PUT",success:t=>{t&&t.success&&e.set({Status:t.status})}};return n=(0,c.extend)(t,n),(this.sync||r().sync).call(this,"update",this,n)},setStop:function(t){var e=this,n={url:e.urlRoot+"/"+e.get("Id")+"/stop/",method:"PUT",success:function(t){t&&t.success&&e.set({Status:t.status})}};return n=(0,c.extend)(t,n),(this.sync||r().sync).call(this,"update",this,n)},mergeFrom:function(t){var e={url:`${this.urlRoot}/merge/${t}/to/${this.get("Id")}`,method:"GET"};return(this.sync||r().sync).call(this,"",this,e).then((t=>t&&t.success?l().resolve():l().reject()))}})},189:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(2316),r=n.n(i),o=n(6624),a=n.n(o),s=n(6486);const l=r().Model.extend({urlRoot:"user",idAttribute:"Id",defaults:{Id:null,UserCode:null,UserName:null,FullName:null,Emai:null,Token:null},fetchCurrentUser:function(t){var e=this,n={url:e.urlRoot+"/info",type:"GET"};return(0,s.extend)(n,t),new(a())((t=>(this.sync||r().sync).call(this,"read",this,n).then((n=>n&&n.success?(e.set(n.data),t(!0)):t(!1)))))},addEmployee:function(t,e){var n=this,i={url:"../api/"+n.urlRoot+"/employee/",method:"POST"};return i=(0,s.extend)(e,i),new(a())(((e,r)=>{var o=new XMLHttpRequest,a=new FormData;o.open(i.method,i.url,!0),o.onreadystatechange=()=>{if(4==o.readyState){if(200==o.status){var t=JSON.parse(o.responseText);return n.set(t),i.success&&i.success.call(n,t),e()}return r(new Error("xhr states not OK"))}},a.append("Picture",t),a.append("CompanyId",n.get("CompanyId")),a.append("Role",n.get("Role")),a.append("FullName",n.get("FullName")),a.append("CellPhone",n.get("CellPhone")),a.append("DateOfBirth",n.get("DateOfBirth")),a.append("Notes",n.get("Notes")),o.send(a)}))},logout:function(t){var e={url:this.urlRoot+"/logout",type:"POST"};return(0,s.extend)(e,t),(this.sync||r().sync).call(this,null,this,e)}})},3592:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNrEkckNgDAMBBfRkEt0ObRBBdsGXUDgmQfK4XhH2m8czQAAy27R3tsw4Qfe2x8uOO6oYLb6GlOor3GF+swURAOmUJ+RwtEJs9WvTGEYxBXqI1MQAZhCfUQKRzDMVj+TwrAIV6jvSUEkYAr1LSkcyTBb/V+KYfX7xAeusq3sLDtGH3kEGACPWIflNZfhRQAAAABJRU5ErkJggg=="},3943:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGalJREFUeNqsW2lzG1d2vb1gJ7hTJEVSlGTHsacq5WQ+eJy/m+SPuJJMPqY8TuyyPbZ27itAAAR6yznnvoYojWTLrmDMIQh093vvLueeuyiazaavfnrxol9WkT3a2bLIzGL8X1aUVpSVpUlsJd5neY7vIkvSxBJ+Vpk1G02bZVOL+Tk+i3DfZDqzKE6s3WxZUWRW8S5+UVX4DzfxvfHPwv/Gf0mS4OPYcqxRaf0I9+ZYv7SF3gI+iez2duLPwet2OsUaMa6LLcVmE7wvcWdeFNZpd+3l8bFdDYfYe2JvvYZpWRb3+cDpbBY2YlZwc/gsjioreTKs00xTbaYMG2/gUElYlBsrslyHzvIClxc2u731g+C6FEIqCz8grykKbq+yVqPhf+Pzoiy0Dg+Q4xmzLLNOp4P1S30X41mxVVqLguZeRuOxdTttKSiJEginZy+OTuz08tI6rZa949XHc5LhvdUVG0GCV4OhNbA5ajbh4pQQhRq91qxLGQKCNijRmAeShiJpvdvt6rrT4xMbXA1sMhrZs6fPbITfk/HETo5P7ez0zEY3Y98CHsf1KFhqNoEAecgWNpymDctwcKMwKHcJOLJms0HVQOCRDUdjXd/E9ZfXAzu5uJAg3/Maplys0Uhtpd+3nNKUdl2TSRSF8+Iw1DgWaOPgeVFJABWuz8tcB07xDF7NuymEre1ta2BjI2yo1+tijaYsQlpMUn3m6xUQUAqtF7KuGQTJa2N8VuYZroXGC+61wO8YCmnoOixuvW7HKh4Yf+e49gSa5eFTCqR694mj0WQ8gFb71OhtVkhyfCIfEvMCHOZmeAON3EDiqa2trcJsM7s4v8TiEBT+nsEdeOjrwcD6EFyz2ZRV8PNZNrNFCjN3k26ksTSqNbA5vpUl4QAULK+J5wIoJfDSDUFKoDBjYUKJ97Gup9tcYe0XsKra2t6rYfrWZJYJSwqBCMwJGy4JGlimg/d88AT+gidrafi93UAAS0tLNoZpZvkM16Q2HNxYf3ERGyv5GBcers/wfAEUXllWaq2y9B3Qanhxos2X2jwFUX9Gn3U7qxwvYAExTVYgV/ihcc01XEaHf/9hXcPffffdoNft9XsLPbuESUwmt7Zxb8Oa7abMhwul3AQeJn8SisbuT/iZTm+t3W4JYQtsoIn3VVnJuAuaKLTcwWcCvzsvaRIWElWubT6LyEzt5vLZao6yVQBKXhrXn8GVHOFTKGxmTw8O8Le73S+8hukCfIkOT5DgoZeXl4GO2HQAD0paLoS/W62GmyM1DwTlwXJsktcl2Hwbz8iBwDiFKxc/Q1gG0brZaEhbxAUqjGGQ9uLo7FZDoRKl0yiFoKY2w7NS3MeQRRRJdFiaRsyTQgCR3GcAPyby08V+7RVf3U5tisXaOOTyyjJMsg/QaMikuWf5BPWFg5e17+G7W4ad4EMSDL5jaJM4KCyZl+k7+ZxVQQaVBGXhM0d3fy4ROlN4AzDOciD6CcJdJjPmErQWfj9FrC8KR3ZaFoVau8yvvVIuRmjnwyIF/Mw3G8JNFeJjA5uZFR4eeFCCUafVhrl2bIKQ1kAoqghMEAbsTnGc2lrodGVmqYRTSAB8dqK1XLuxn13X0QoIig1oroN7z87OHXmhPWLBKkCSGHF1ObH1e+sy/zGET5f4oAP/4dG+2BEDPc2H/pmQcFSRoF5ajj3+Cjwi1w7/N54w8HcNHAjXkhC0ZKL0q4imDfOTfxfUcjH/jj85BOaRwDXjoTByQQMAm+2G4i0tiRIn46MWm2Bw9GPG+lgW5P5Nzb+DWf2tSRchLJBwJAEg6mAwp2146Cxoo6aGSQglORCanx2cnkrSZyAbtwKqtjRBc+MmIxyy1WyDFLTdfPF3qo2DwQUyQ4HzM2qYlJXA1Gw14W5t/HQUInP5OmLwwoIshPu+D5BlTP6QV0xzqczRLo4dqKS/KJ4jZKDCIU56TKy1QuRewuIrCFHfg1Hd4IC0lrPLCzCfIcx9KvIQVb6O+HXp8b72/zjwbT7rFqgPv9Dzi8pXmoI7H56c2l+fv5DPgpGIqtIayPlJmh5s3pMAyl/x5XSAeKrwg2eT8NNXKFnFQ+g80uLcUCWKJ+pXWS0Bxe7R6MZWCXYPH1oX4WwMF/mfH/8K1G7bZ4/3wbsRvoo88GmgKbGBj4gctDxZqTfKvxMlA550mD0/Orbzqyv7uwcPrA/qmsEdgjoU+ojwTTA9nmMG64h/wbRjxsgU7EfEHNIvAvthMJe2g6a5MH1MaQXJunzKz01hMR4vwKwYR9sAnH/4+LE2QX5O9Ka2ZE30N4JbsJ4xLIIEgoIGH4DZtyRs/u7AhyfQLrOjvc1NW0cUIVjWbiVLVHwuFSa31ld/Fa1TMimr+TI3UzgFKufpXCJTZ7wl2SjIgALVI9JW85ATyRyZnjGstRGz93D7Ty9eig4yQaG/J7FTvzEOcQl/X4Y5TiZTy8DSeB9/ihDbGWMzWMsK+MHD3ftC6YwJC+6nldAKzq6vkTVN7MH2JrTfEbbcTmdCfK7zdmyOC/HmcLh5vC09DVMM9vhJDdQxtaosxNkokMfI8QyHmRJ9CXLYXLuZ2jKoZktoO9GVzLCoteubkfVBeghSPaR1tKjz8/MgbLOLC2d9N8OBdZQO0kJy7YnPmRW+R/pvFwB5gPDFaLMBK+jCalfgYmvAlZqfzzV8fHYh5FuCFBlWCP9ZWUibZTgYAqxMlZrWEd215L/8mzBXMfQkzoN5uCb8N4pK29++Z08Oju0Yh6Gfk6nRRLfX17UGxUmk7S0t2sLyUuDuka0sL+KeS0sQ57e2NuEyE+1BPl8Vek4cUtdIiUom9N4AU9zAc5giUqjDtzh2enR+oQT99PLKFiHpjx7sOYmPnAQo3pnHOxGDwn24TgWrUDXwzZgQWAyrIHmAP+K+NRyGm7tAvkpM6GOdY+StDFmPdnZk9hQs01Suw0MLI/DozfU18QES0ck009560CBd5gpZHAGNVrK9sW6LMOm8dAp6juzpyatDvb9LSsSlr4dDod8WWIySbdYsykAES+fSNNeaIJPDuusqK1dlJH4rdDF80He5IMFsEc9f7i8IoPibRAEOjU29kiA+frArKzuGAgbQCt/vbG4JO5i6TmHOzw8PAVo5vsNeIQgqZBXCXIdWuZ8pvuNvrpsHLHo7lUgfbm/ZM1zVgx/Q38ieeAiHIdycOojw4JRUC75chHzZU2dxwvmTydQculOFi0pxnhWSW1tcWJAgTuCf66ures+wuAYTpLnzIfehKeXNcC+aaAHt3uK6cwiFxQEe6OzqGungWMK9B58lVozg71RKnVnVefHbKWPahhl9sreD5B8PRobi0skFTvSxIcs+uIalG0/YPRYVoJKNRjIXBMkGf7PskgQamNMNFG9N6KwkAJ9TsNzQFL7uuGDKdkoRkUI1K0aDGVD/EuszsW9C8LyOAmG8pRVwzYV2Z878bm+BzkksZBZ/T+tCwh0f5kHrbMb91CXDMgsPy0rHOgDmHCg4GFwLmLhgGxbB99z4bDYCyT+1FYQe3keCsbzc9wRBJPm1oGQlraaA6pBpHUEMcZq+F4sfg3LiGYPhQNpkytlDjKW/E5HXl1ek9RGIyCKA6XYysSfI45dgJQxbN3DPFqgo99jFWbqwqiHY3njq2V1chTDANLOkBgg2aUMSI7cljyW3Jb1rAXmXl5ZVz+KLmybXpVaYT495ADyDuXEUpW7l1Bi+Y1bFHJvgNoLb/PzylV0CRen7DCtMFBqJsyWuJ9oJrfeRnDwAShN1eWBCJenrCPshB2CezXhNV1pZWRYBiWOP0S3srxEiwbzicTMaDtI46bPuTPU3m6lYzvXNWAdrhg3w+yWYIhnmBNIictJkoiCwJJSBeFjelyZeLaFpjYN/kXOfXpwDqA4EKkTcVTzzs48eS8tcvwi1aQqIeMLDRIGzyyQhFO7lGdCZAiehIeo3wRZPL67sBP7NNSm8XSQVzw+P7JoJjBOQYapKYeFknrUs0kwCyRUOTAQk3aQUaZKj8UhcWoAgRlQElhYLYLpAVhH4MqSGrY5MiQIiLW1TixDg/v1tHWAMU9sB6T8BMi/2OhLatPBQKM01lhBBBvJv0tUaJCUcWM50PJW2eWC6JRMVHvZ6OBYN5XPyeQEigFYVOg3AIKAh/LkgohbwlSX5XBYO1QJwZYWnZlleyjRpCdy4Cm1CxNd1JpZnf/75qU1x7yePH1kP7sC1eM/d1w/Pn4t5LfR2VJZdwMFJTMi/Web5t3/5V/v888/tT//8pc14IKxDhVDLNPNKBYyRsGCZJSpYEfdJekluofLT3ThMs6qiOg1nfE0ksSrUqFX1qLyNQXPydkip33UlwgL6Rqo8VfDJjn3z9df25z//l/3pyy9tAoJwdnQIIPOS7pMnT+zRo4cwwQsBSoY8+r8BPGv37tkSYvY5+DHdZ2djwz799FPbQuhU+QfRg6a5sbIiLk7BiH/jswYEMYXwX52d2QL8uAfsGYJjM5S9cWBKhg8iyyoCWDDuzuu7VSAdocoRi2Ulop815CulJEFgoT7ET9adloCoP/7wg00nTgsvL7+27e1tdSF+RPp4Bro5Yg+I5gsLSKD9Ea4lKel3cxviu8//8XNp7wL5NUGTB2gDKB/iOUwclrBvmu7h6RlM3a2Ne98F0H3/5JnXyFrN1wfuQho8VJ08lyHPjSJva4izBto4hYmx3KN6MOgPa88COph7C1rlZq9HVzYESHHxBTCqSm2QJsJYxxZgcnSBVQANn0/WdIXw8slnn0loA9zfhob7MEtq7D///T/E89fW1iG8Zdvf31fOPhVfiO0RsICcwYv3LCXPpG2GsCEiwMbqsuI1NU9lkU9EQ6A0fK6vWnLkhp0XTi+TkC2VoYF1CdOk+y+IsxbzPtBUCBrBRC/t5cmxiMUKJN+C5O/v7trh0ZHQtwfywhfzXm74xcGBwkuiooPH6gnMexcHifDMr//yjRiZ2jLY00ePPxIAHoITEOV3NzdkvvybvLruffFa/jCccR1S19CHcpTOs0xaYs+IMYwQTzOnNtLAXBhrmXZNwGbY5CI+8XsmAfS5x3sP7MHOfTwnsVUAXn+hL4Fw4W5vQSGECMoN0Oz5Woamt4DcLxA6JlmhzSpdhBaPYM739vZsY21NwuP+aK63My84UjUvT07l0/ys9lN1KMP7Z3guQ9Onj/YVhZ68PISGb0Rp+lFoRcYqucRiPUr+QuPKW52JQILmQZRUHbry+45B7FcBJpubm6FA4iBWhHsjHJZEgsBHKzkEM2PCQtJB8DkC2DAd3ANAMTx+//Spvp8FNGbFgwk+TZQZUv2qffZdrzxEGOYLa9gbUszhGwf2hnfqvlx4D8iF4L8dwJwXk9w7d47t+bNn9tVXX9kGUPaf/vhHlW3or4y5BzBbxsytrS3QxSE0tm7PEIqY/+7iMxIUav5WRYGhKiAs4zDBIMpaiBDUPk2Ur1fQbF2l+cU+UjBvWsT+9iZz8KHE7f2syg9L1GY8jqPQEAuJUOjPUppegqGfZCIXl1eXAi12Dr/99n8lEFrKIkz7CrGQpk8uTv79zdd/USnoiy++EC6MJyNv40Crm0hPmU+nMd6zfkVuDJ9OVdivpNlGmv7qQe/2rwiyJe6h9XRYpIzCiEHFg4QKYGj/KMuhIBinyXWV+8hETebcVaYChoaDEJE7bIZPfXNr8L0BUzpcx+Ycu420iF2AWLfXnRfQifK0yBs2zHE4aoQMjKFNPSkCWlXNCxBlIDkf+qJH8hm00CcHR+DS45sBTLmfxD5jQZ9rCDVhSnhPLq2UkYQjtErq/i1DCSkg08or8Nhu17XM9kgH75nedYTMAEGOVGDjS8uLEhhLrV6Qi6XVS6WhDR2a35M48Icxl7z4CDH75cnZnL//nhdcdRgNRjeDRhL3leOGbp2qlDBrb5F46kgJNWQFjuTq9pUOQoyBrTDEQo0qWwrbykMtmqSBpnk7nagTwbpXLhADf2Y9SgMsXQlFdavYEf5yMFDcX1lcVDXkAjjQ/IAu4XvbpUOY2hbyXfJZOjPTQC7KnhAPmIfuQEPVBDfnWC2YVL7H3JfdxNEo8yoXP1NjznvIXi0BLkTIeWMfaJmJ/FehN2RylyQQETE5HLhNZob8+6eXB7ICFuRoeekHNs3eW5fmFAxBRNplMe/4RCh9D1kMAUq1KfzmQAp9ipWPKXwsV1+nIX9Pw8iSGuVCRi8AxqGFA3hzNmTe7S9LJzUUlDqTdYmoqJwXKyX1sMeCHk2d4YmfJYHb/5ZXjdayyJbSvHLesqRWmAwwM5niwkv4zgrYDkMKNc48lSHrHNyVwtjd21V71EItO0miwLsD8M0roN52pf97EtDQfYzPM3YekjiMWhTGSuoZKCc7ko0AWneJxbvirc+P/K2pK5cm/8azycpALQFaiMPzGQochsDBxJt0jP7VVFIfA0m9wLe82IeWHVE5qcMMywdQnG4QWNT0ms9pVKrzqcAXeVjzvnAksDq+OBf49Zj047k3tCaGwDT5IA0S2ChiumV1p1KpBp0KG6U93tlmPB6mKtbpCjfHBBRuNsotyiOvDSE/ZftFI0uc3zD32xibYQGwCpXKIpADL/DlarUWZTQ/rA/deS1JZhlo4qvjYw0x0M9ZeeRBW83Gh6KuDre+tCSB/fzqYF6w4+cudLO/398TiWExMKZmWKMpAnfOEGJYN15krOTNHA+yuvSZauwoD0BU/7AFQmuoa8F3WVAVhmIoFFYfGI5kgqFrSPRVHl35ZN6vNbWzMBBXmzndiCVcCfxOwCpFeSt7tLuts3A6j4JMozAJJ3MLmog0z+gjEOor4kNmRN0WtZ3JHJUmaoAl9JrClI66+pGHsbrvNNNmvBREF6juNMT377dtETRUGZC6iMl7CQQ1toQ4z64iB1kIai6s0ntaQeMumALP7doqtP/84FAxnwKNNY9SekFt3pIIwysyD2yMRe/vnz7XQxUD5+Zpc3CyEE7i0M0vS5/kIxhZmO7T1EDkbCkLTTdqjOWkj/d2lBExNEXvOCwPx+YYuyNkYnVZiSkh7zk+v5oPyfgRWPHsKLqcwQIawXLmEwDUFiVc93Cj0KSq56gYKrxAUGqAhalkFaqSUSimJ4H61ZuszU6jDbGDlTr85j1dNq/V4Z95ofAT+BrdiSHoLh/mi52J+xsbdgZuPjfh+nAqR72mnF6OSmwT0YWloCwMsOnAWUiWLQCPJmI15+Ecm4kEWyR/+OiRCnkqr4YGWt1w84m6RP4sjYYeVBl8zuqRQtaykzSMJbAc1IDVFEDpSwmxBZdphYbaXe1yH5yOHYOdXYMotRUZojfwIp6PJbtZ74FHUHCcv0yS+DWe1HWppiqAfoCaMkaxoyz9lZM9eVHOp2ajO4OnrC6maXPeaWSLxUeLxSVCXu0jTxxz8PWaEg43/zM0Ro0zVp5eXb+B0lGY/+Da5NO5SkqNuearUJaq47RaOfBznuHbJ0/DWqlwpgUrTVkjqoXl3XlItBkSf+bHteSiRJOzjSRMC0Tu6lFVBXTOrIGsyQdWbD70mYRh77qq6SXfpjbO/LenIkBLWlaB4S2U9khX2U0o7tVEpD6cBXSvk30enLW1i8FA752ZvSYosepAcfQagHQIH1dKQkNKNSKYh5dZvFadhLAyVXmoKZNiEl9bI8nIfNZL/DsOObb3lziffQC2RqLB+2iyzffkuiq+k+Pbm1p1091UGaeaTzF4scIbavEbU8RKfKJQodTsMw6ShcNZGBapwgOIqirTxskb4BDdmZPkb17b0tyIx2efteYEfRQ6kpEqGmyS7d+/H+rcnu+yMpHl+Rubr2MvWyosJfN9XUKmaRO9aerVndj/vnw58tHDcm4KGscv/d86zMJkWxQQlU+kNlnAS2oEZyuuzOaU1EcWnYmRUSnXDWaXl6HfHHkRgQkDa1YTEJnLQVN8er2/JMRm2BHvDsKmqzEcifZOp2ES31u0B2dnev8hU3jKlmoDj4L6KUGN4pMdJT6k4j1gn99gdzEJ8x+NkE3Rvwg4kcDNiUBNJTXKkPiwaRkmQjRCEYZX2dZh6kftba6thbEmD1dPD4+kwce7OzoQNcrw9OLk1NcLWv4tr1jAwjQv9uFv+ZqSBe/SWZhRrpPyJBTi2YstA2LWkM8+rmu1DANmpnGF+p8VzGefeXDl0rn8nyVchhsm+MSJmtryWbsILxxUYTylwDlXlkSxVb8zH47dVwsnHaF/5ME8n9edSDCdPETB3DONCOkfWkAQpG/e2EJCwNJNXoZZiziMQt1JFcM4jKbv+O8bcNiV/qJwZMSpWDb2KFD87KnQ3hXqLqjvG9twNHFW93sLAPUwipuxx2FVFZTZm/6BRT1T6tO0kRLyNMxLieGUHj/yOWcOoCYwu0sgAlIHhGU4S9LIdoCyDE2HLOEMbrQXxmf6+NPDY2md97E8e4OM6kP99d0aDsGdWyJC135HCdN8qYGGwCs0vkMnIkr8nwXQvzWGWflzyJTUw6lLu2bzKqgoSKhA1qPDTCWZdtKEKQjNZoVxZXJ4tkkukDP/8PylN+mT5I1+728+MDbdr6fY3excy86yvOZU57NOAsr5FJ7KMyrcFyITsUZ/Pawwh1ZhP3E+HoV5D9d4Na+EMNXk0Zk6srnN/jCzJ2IK4zL7WDWQkoFFZr/bf/kPtaLbyegVHtDPQ5Jf/0szb5JXIWRFb5AATyrMyjuDaUmYkmPl0r30Nf0syzCCHDbroOOHZczmgRhuyKR6GkhJdA8rGayIPD04kln/P7yG/yfAANhn7ItGqSXYAAAAAElFTkSuQmCC"},4748:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAGsFJREFUeNqUm1lzHdd1hU933xEDAQIgBhIcJGp27FRJ5arI8kv84EiPiZKf4fghT/wL8f+J3+M4TpXtF5dkiSQ4EzNAzMMdO+tb5/QlJFGydCUQwL3dfc6e1l57n43so599uFqW5WSj2QxZloW/fnk3TE9PhcUrV0K/3w+88qIWdE0YDvk9C9Ur1/XcU9Tqod1qhYOD/ZDnua4b+v1SX/onnJ+f6eoyNBqN0NQ6/V4/dDqd4DX1Sbfb9WfcU6/XvVa31w2F1x2Gbqcb6vp8bm4u9Hq9sLu7o88Kr3V+fq7ntMJwMAhFHvfDvY1GM7TbY+He/fvhTGvVdL1eRzX9c5WL+lq00GJFrQinp2e+MSCQRStDKSHyvLAw2oU/07/afM/X1nQviwy0sK/Xv6cnp2FpaTEsLi6E4+Njb/L09NQbnZ2dDWdnZxKkHsYnxsPx0bGF61nHcd1yOLBAKP7SpSk/g+ejtJ7229dexsfHtVYW9g4P/JxM2xuToJOTl8IXd++GQ90z1m5biXpNFteXl/9DG24iSFsf8H1rZzdMT10KDQkx0O9oL0vW5D/fqgfUZNlMmy/9cxEV5J1GS3Efgv3ovR/p/TwsLMz7fYR4/4MPbLHzznkYH5uQ8Ke2XlPW4tkIz1e/PwiXZ2blZXk4OjoIAwnfbLW9l4Gub4+Nh5PTE6+FocbHxsKEhF3f2Agbm5tWzoXXUXHr1q07ErLJRnCb7nnHQo6NtUPLLqf/clzThgvDqKlQaoGhLIB7NuXOKOrF7m6IHw/lKTW7LK777NmzsLq6Glqtpty3Y2t29P1ca22ub4QXey9CtT4WP5floyJDuDQ1LWXWwsH+nhWMl1QuOybr9vs9P5OQGA6Gsuxk6Ojz51qPvRbRlatXt7h548YdadYWxjWIg+lLlxw/HWkfV+XnoTR7pt+Xl5fDm2+95fe3t7flrkvh6tWr4eDwUHFSs5e02q1w+fKMXPrEVuvqCwuur63r965hYGtr27FYr9WjK+sahECAgT0qWFCUdnJ8ZIsSCsYGCUIooaRkBe07t3ujNPa1v39gD/3aq1s71EYXFhf9gP6gH10qxWBD2u7KQh25VVPWKXqFrT4vVzxTLL719rsSdilsynUAnh//+McSYtebJG7WpGU0X0ur4S08E4Ece8PoJVih1oyb78rdsS7X8BwAjxjmGu9KwhpedA0Gacm9wRZfo4VQ3MFhVNCrXrWWNoaFiKf9/f2w+nw1zCvWiL3dFy/CXz//3C4zNj4hoYfhyZPH4fnz516wLgscHR16ETZ0X4h4fHRkYQYShFAYGORiPHa7PVkt92eFNklc639bDkWfnwvQ9Mws2s2fkxnIEggETjhiuIksoWcQMtyHOqeUXQ4ODiMYftO6UeAxBfnKykrY2d6ye7KZDQU8iLi1uRFq2nSuGEWblWZ7cju7Vb8mwDiV+16WplsCiY0wOTHhe4fylraUNOj3HHuDYTfsC0mJY1yfEBoM+g4XNtfRpm3VesOephv8eV2/h1JpSWFyJlAii6BAoLPXHaSUGcLU1JRDYP/gIGaSb3nVTk+PlUPb4fO/fhH+5w//F16/dStMCN53FAf1ei2lpcyu2ZHmiN2Qx1SFBVmMBaoci4D8rIDwBkhnpVE3flXpLsdFy+HIUuf9cysCSyJormfz3G73NLxx+w1b7y9/+Ys+G0bkTUiOtcfG5vzsQ1m3SnvfKnCr2Q6bW1vhFIDSBkHM2ZmZkE1mznVsblwKiZ6UOeacnvKaAYYX8Twua14SQpJyovt2hSWyWKPlkABU2gnNh7I27op74hk8x2iaRSGxen/QC8NeKTTvOpYBtPeU3sCIGefw07D/Yk8oPuU4vn/vrpxCVu/1v47MXxV4QpvcVqyOK1nfWL4ajkUWjojDiQnnvCip2JIWgFHhqlWOypJ1sMqeFEWyj3FaREESScCoWH0g8OvpWmLfwCVP4sUmsYoViMfohqYMwcYR6N69e8aJObE/9rSn/ZKXWRuLrq0+d5ihRELSoWEv++aruHb16h1ZtDklJoN7GDDkHr1+VxtvGOYR1hcTL9IiccNiiYHYPbEyi5zLIuvr6wEwPEBxwoiGBDw+PgkDPffKlUg+yN0oA0/gdwTGw4r01W7jDaWVBn5AMsjbEAz2RxpEkQBUR16Fi9cbNYPfmZC9DFl4BU53i+Xr1+/cvX+/ycWXlH9ZpFbE2OOWilTE3JinNFLzBpF3aMoZFcXCCwtL8pKTcH/lfgAQeZEXj/QeIdGScEZcfSe/kvbs5mWM9QhkhRVxenLssIr40LZVIR2beh7ASOhhDJRLPmd/U5cmbYw9gVeOAbPwdeJx/Y5ipInmomZKa2d8fNJCHyvtgJwI3pWmK3LgwsKUOkukoPCmia35ufkwodQ0K/Q+0sburTywi19XzmaDpb1FQCVhASdzMwqGTrRgrR4LiTKBoTdOipMyHj5+IpzZC2+8/roLAlycvSAsntbTM5DyUN5VGeMrAs/Nzt4R2DRrVaBrYSyVJZAa2IVCdLWiSELG+DEhv4C8heO5Z7KAt5CO6rpnXO55enbu2OY5Y+K/gFtFDthUjNdpexCf4UUomfX5HWHXFCov9vbDW2++GWYuT4cTCYWQkX0NkxFKexZbOzw6/ga1rPWSQLhvLY9IWTTzlHKykeZQAq7TE8JGHMvsYhF1SQ+lry1MHDLz5QXldT6bkaWx6nNRy9uvveayEpaF0nDtjc0tkx/EX75+w7EMGLEGVBTLI/ykcGZmVllketqVWJaEcRWqXLm9u21uvyxPmhgfswzQ2kqpGLV49+2370jgJgm90hbfieNur5MQOViDuA81ZiQdfbvayK0rHbpuVvGhBWFBbJ7voCwbnJLljxW7poq69lSgQ7WzpBKSoqGB61+/7hiGss4oTmeolrR5SkTWIouQLVyP50UkH/qvSnvHel5ToYeQ7Jl02aQw6ve7tWGqc9nUC1FLHjgjDZKC2GwUOlgJLsEEJJRngITujww5j4U+MVwTWQnJa87OTsyUsAwCs+GHT544rmFkJhla/9rSgku5K3NXwrY4wVNdE5yjm+bj7OOpKi7y8ZW5WRthLKVNykc3HGzFzGkPWS5LBpQ4r+sLeeKeignA1NWSUk9zXbRwbX3LMbMmaoldZ2cu20WIzZAYbgUEbIL3nJcrKCzjZbER0He5hkvi6liJ6/q9SGaOUkOAYmRze8fAyDMfS1jckML9TGFE/HIt/BxDoDiwgRKQvZLSwAZS4LPna6Gm4mRxfl7hmTvjUPRs6/mrG5u4dLQw8Tmjcu74+NQuNjc7E+bFZjoCGixUgVN5AWC4J/5es7xmSNpwT6wqz14iY56qGnIuP8/Nzjmm4bz8TlUFXcR6X4hgsJa4gRW2RyEga03JJa9du6Y0FrsXuOzKw0d248siJvPyDFS+tLBoMGMveA8eZ0bHV2o7ebcs0lbCvnXjeni2uuZNgXSHSkkxb/YSxx0kMh8SQVdcA2qmieXI9REQqol76ULHD7VxlY5gY6xB7CLUddXYO6qNsSal50Qq7CEthNuE4v5M91MVnckI+7KmaagUtSbLbcmCCHNTgOcSU15Q9dUsZEpNvFeLkB6c4OtyjdsqHngYoFFZ0jfJerPaJO/Dqnq9+DnlHkgL4ICmtFfyVmwV4e5lSnMNvzcYLUy+BnSwNsLxzBgmwYrF6nDwaXke31HO5tZO2HkRuyNNfb39xhv2FGr6yM6aVjbVDdT46JjSNWIQzzYYV7WsEW1AahnYWu76ScPnKsko1ybGJkfWeefdd00IQMs9EXhYWqt51ehLN2RfuXLlwX39/LYFWVm5Fxezd5RWUJ+2jFB1XDkZIDzROtDWM3c4I/KTl/Gora1NExdqdICHrwXxahD/ijzi9du3bQjY14ZyNc9/S/s4lZI25AGLi1dd45N5apenL7u9moGuxGmqhmBV52fDaLEEAFXOc6koa9IwgLQ3mqKJJ8eubHj/SIIDUmidGyYvTTu2sRoFAJ5wrvXIi9s720ZQWBfuOKVrUbRdUqjb6ZwZNPGUpYUFW4pu5OLiomtxFLklqukOp9z9FL6ga58+eewUCod3l1T7YW/Zr//914d/+MP/TkIiXL/SZk2oSxqieKDswrpuj0LipYwxuWjVpg2pt+w6N/WGUaSBSY8ijZVJmVgSdyM3wrefPV/1pnHjZYGVeIEtiGuiBNacGJtw2YpH3bx503sAhGjY4eJ/+vOf3YRAIePK/6yztb3rNItMYAFA+PT586NCAHFHJVUzT/SwEjZLAAMnPTvvyqUaBi53B93wiwqBsFQ1bKx26t7MweGBY43n7O5EQKoLGGFQfO7PtBbdUUCNWF6S1TY21r0G11A2tnTP+MSY09Lr4s9Pnz4N00pPWI1KCTfG0igsKqpjjzk1PS3keSdhXl7FGuubm91idnbmjlyryYfAeJ76zAO7VGGUnBb0Aywu16h04LnN2HIF7CYmLrm96oZBiLwbpoO0MebfCcs3boT//t3vnEshBVjLoKf15lUyorTPv/gyPHr8SBmjab6NMhBqVzjxyccfh1/96lfueiA0CkBhDx8/9p7I58PE3Dpak1QGuTmhS5MoqJTTLV679dod/dwEqPIsdgZzu287tkkbjZfVCMSB7kQttmN73ejOvX5sq1LDxuOZcuTmvP/P//wv4e9/8hNr2YW5FAviE4cfffSRa1suhG19/MuP7VVPJBThAQnCk0hVWPPPct9BqolJnTxvRx6EZYvUWGTf7AOLT+ga1j2KLeNu9tFHPzsUqk3ChmmOQxl50JE2EXtL+Qg1Y+ew5m4/3ykdy8SuQFiQvdFsmCB48WbsOnz66b96Q3DkFcXtlNCXDe+pzKNo+P3vfx9uyANA4QlZBRr5n7/5jT2ApuE//PSnFoxwoArjO6mIsOB6ft6W0CiQ+H7w8GFqYvTDglB8YX4u3F15yP6Pitu3b98Rx3V5WK9FC4CitEockxT7zsN1V0tu/VA70/LJo0e4E4JCBr3Q0v2kEBCbUk5AEd5UOdf1MUpDaWPDqYpWL8LyHfdGMLzmv377W7vgM73PM1D3v336afjkk09sYRSDIl4IrDAMMUrHcllMLKSiZk9ghXvbI7VXHywIaxTb3eznP//5oSqhydw1bm6KF2OxdMvH7ISSj1JNHsADsTAPpTrBXcrUFjKhUB6lqfbkydOwur7m+H/vnXfCayI0d0UdZ2Yjkchi6zN6jAQFbe8q3ZiCpo0CRjQR/umXvwyLS0thR4XFIDEorqWTsrUTWdZbIiHc90AxTdwXqfIzz5Bhbly/Buof2aW148mqvqs4J2gbTwli66VSAkrBlfruEPaMrrgrmiYfPlN1w0HcwpUFu/qCiHxFS3lBIUlJVDk8h144BAE3RoHPVp97TTcKpAjq58+/+MJxfVsofUOWrMpKYn5XYZGnY1a+ELZibFUo9hLVfO3WjaPi1s2bd5SDm8Sgi3e3XDK7RD9VJO4paTO4NZ+hZVCR9BA5bczdbPgNsZ5f/OMvJPS0YxzguthmwZqVBfh5XV5ATF6VBVHEeOqGcM3rEhZ3p41MzuWwzlZXrKMMBOFzBGWfsZKqfbNT6QxU8syuO+2ueoqq4UWrs2fBYVloBuv2LPzQjfaq3wRDm5gQ/CtGUApx9cEHH4QPP/wwPBRwwLhQyoEICJu5/fpthcJePPPV79MqP09OTsOf/vhHxzPPuCaMaKfYnBQydxUi81fm3LEEoED0z2TxN2XtQTphKL95SviVF583XASJNywvX7uTlWWTyiNWQfGAq5UKACxE7Lp9kw65fK7UbBpcfCxCM14gRoeCWG0rf2I9Sjo2ImC0wJxk0I+6puroLcX1j957Tzl5yorkeKdq8GE9jnhi07Dh1hP5tO+jmLqftSNro7jqRPH7vHRdt1bVuVk62nA+lYareMCty4hKFLcGLPJjUdRDd3geeh0sHstByAZWXRcSN9I0AQ29p0+fhHnFMtbk3Bb3RBGfffZZePBgJWKCTzFqRnBcN/Lyc5OIahSiOjOKTcQYWvn3FHZ08sDDyJ/xBKBnlMbCR4cHZllVD4ucRrpxvevm97FTEofS3bS5Jbnl/fsrZldra2tGY86JKSxIR4AXVqJPxc+bsirFBCeOrEPngtxMp2NSoXIii+MVWLydGvfsVxRRPPnAJOOHvihnUhc/1+ZiVUNbx8eN5taVRnNbC6WEMnYyoJNF6g13y5cFxiPFr4889P6WNocSIQfwYqorqixqZPIoOR+FuSXbjw0G1gbA6DyibN5DeduyPLRWdNiFBXH9XbH7SoGx3INHjyzc37XedY2JhhEMJPb5rx6OcFXL1lUSR5mhYXDBHdmw4d89rjjh05D799JBGg28rg/sopKYEqieh+ujnNzI3bJCez3q8qEZXLtds1XpxoDCpD2PYmT5D7cwQpEroZW0YolB0Azu+v7773s45MHKyqitSgxPqHohTlkcN8/Sqd9pEj5zGoppDevixnUOvQWE5FxCBqvtq+SDuZn7yqtK97fT1FCZudtYyKUBJ7yg5VPERpwycm8tSzMlP0BgLLI4f8V5ypMx/YFThksrAQgVx7I4cHW+y2Zu3LjpOOV3wAgLYukDuWorjQgN0phCPK2Pk0AeSxAudH3Ekqdzq8jBWRdL+3BNbttoNUat490X+zZGNcNVufGrhHXIhcyx/0qBy9RD4ubqHLamRYmRu19+aUaT+fiyMToa3d7a1vunboCfeHYqFhU0C/hOisJQ/F4mAkNFxSLcMxzEPte4gAlURomEDDG6u7snkGrZc2jPsn4xaguH78y1KJGhOlJste+LjAtPc9fy4kBZ1eWop8NxODP1a+wnx5wXz4hhVs045pQOwMdFVFw3D4ZOG6MCwy3c+qjrgSUhM6zpLgtUUQpYXVv3upR1ngpyXd34Xq469DFuCNeWFkNXe3jw4PEoR1f0klSZkz9DFgkHrobl2Gg1hkSvl0VNxrGENkuepgBPjWd/RsWEGw96fYM7lhwdtI38r0xn6dEtSUfVyEPNxzCTo9AC7b8NgavRJYSoamPivdPphg15X3UKUb0GabDuqsrHHNeixTpqVBe1dPwZxwnNvOJpmzfQi7OBdjPi2GCWHmjOnO6r5jiweJ64rFE5tYQAMHI44IOHtfRFYUBfmnurYuNVr4GH4sowNzerrxnnb36vMIi+WfV7bFD03aD32TFsBSHDy2MzC5CnooD4DGY0kYTsysU57x2mcSQfaqVSbJD60KSSLE0MVFM2Hl1Kk3u8z9GKJwaU2/kCP7jumqxwU9QzS0J/nTb6HFmKvnZ1wUJwWhKFCw4HYndzc+crBQs/0/Jxl9MxWQ7CME3lhPRFXLrdQ2CkPheHZ3hCtGDqfQ3isWc1h1m1VygynFvzlxN0Q1+bGclJT4eMGElJTBL5dJHDsEHPoMUpSDO1ly4CE89ZWpo3rtDxpA170ZqxwViOYrdrPtFw7qa5V7NVUh/Li7oJV/g00IOkeayRMX+nM3BnwedF52cmEZ637PdTpVVqk+0wqA8MSrgwFq1KTgwN3+66kdCz4gaDlG89Q9mXAIdut07WxmNH9Jz4vFDq5XGEav+QAbSOs8fX4zu74PoAFbHLCAQH5DXA4czHEzF3Vscq1Ql/1FY+KglxG1zQli3igXa/P0jx0xPanspC47ZmnKKLkz90ROlE8qzzk6gsD8j4QG3M65CKHjx8NEp/FBsX8ylhZsUInBgvvAhM/FSVi6M+nL44bOM5gBkKrHmcgXZLGV3NyBqyNFD28kAqtnBioc9Adl+phxnrYJeNQy7Bx5gd187Eu/Nx2lO7FccQOBBzSJTxkL3hCus4Hp4pY9BlWYXF+dzqq7m3TOnn6PhkNH95scGYp65lPwEeBtk/OPQgjIfsMGbsL8UOExuP9C7z2Y/jAkGrItoDLf0LA+N5HPPFrYn5LAqGwCin4cm8oQkG952fxaMRdm4wlLUpKDal/XhelI0o5CvTUWJSpqrk75TuBqmxf+vmshTaDU+fPR/l91h81C9WS2UEqf7AmmdWots9HxUJKTR1Y3R3OHdVFdGpBNF7/GmA3ShzNcRNseCng1l3Y6+fDrIdWylVcSGlIyf/tF+pqDxJy/lumqgjvisrDlNPGHJx4Bg+j8J4AK6h+48d2wbaCzF98ZVX7kuLxzw6sajqfDX+DPtq+XQdy+AVHi+ux7EI2jxRmHJ0OB7JfaSZ/XS0OkzInyXlRLLQMRBxGgg6k99B5ytXZl05VU3EKp9y5MPYw0w6bjGLK3LH6erahslHpaRv5dJxxvrl8BmbR3CsBTUEFXHP07OTSDB0DRasOpm2pK45POm4SwL48F7V1iUXc2yTGRh7aWrAo7m2ECmKEUNIDbmS3tX15auqvs6sEPb1TLSTfS7OL5i60msGuBh1aKRJvgqxy+8ooTzyEIfCY71f5HGap04/S5bhsyzNWpqvppybp/mOCERiasrlLc88n/uzWpb6X+BD9nIWhNZQ/HuGyDY5MwblUd705cuhePbMXQ+K/5nLUz5nQglYnkkBzps8QiWlkl/3D39YfWguHQ/DY+8YjfIFry6wpFyEEcHRLBb/lWH0Vy6Rz6ahMClkQRYo0yy0/+gj/VlPWb6cfjTNzNMwWSIcnPCDzC5UtA9GgUFL3Jh7byxfszu70e8/Bep52O2HdzxS+9U0ceQKEd0ccYN4kFbFeVUtxXKsMHIP05CZldaPs5h1vc/YUplG/1FqNSMd/0QHrQ0uDMzEHBsPvQvH5IGIAsoaH2uFdmNM6WrdvS0KlHUhO4YZofX3FphGeUJMu3St9vJvk5IVExLJVWMKKsswGjTl83o6M3Zvi2E0xRTppSIWEQBf/s1TlmipXYzm/7B0/xnLEcuEyO7evk8bLk9dcsyTT3d2dtN8dX+Ubn5gwwNZi8ky/X1CSFqup9o1L4rRmHCrPfay1Mqzl0NZMVXH/I2dityANUj96li61VKt3R8NmOfJFWNIxHACM+ipQTHBAp9EpIoKZfiv2hLh+La/afgbr0l2siahJp1rhxE8inR4ZtKRGBaWG6WUNG5o67li6lkxRS33X6VQCfHHV/xhVfWHXDGFxiiOQuepidAeTcJz39b2lgfHOVlA2H6qdxlb4BxrY2vrb3Y/vuN19P8CDACOjrQ4LZQpjQAAAABJRU5ErkJggg=="},5522:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAJp1JREFUeNqce1lwHOed36/v6ZnpuQcDgAAJEATvQyQlipKsw2vLOrJer3zJro2ctVNbcVIpbyr75MomD9mHvGTzkOMhVRu7UmuXVS7X2rKtyJKti6IpWQfvCzxxEPdg7pm+u/P7GvSutFZtbQIWCBKY6f7+1+/4vobUri8uxlFoZVMZzDsG/vtiH89UI9yfjnGrdxkSZBTTh6EhwsA+h6YeI5RkGPzOkLIdkTYMffVXMHsraE0/B9VehSr5COIYyx4wXh5DRvYRRhGcQOH1Yv48gKxqsG0biiIjDgN4Hl8sKZAVfj9oIww9pLQ8FF6nI+VgKQOUTn8Tg8mnsFD5FDz7OlKygpZXQ0nfjlBbhOltIG6baPkGKtkZWPkx/JfF/XDCAV8L8dFV+deozDfGoQNN1tCT8lj1fGjZHtJaDYZiQmXQYsGGsRMW1qBLBtzYhRv5SPH7WiwWPc/XrSFWsghjCZ0whKsHmL85g163w3RJ2DG9G2Hgot1swPddjI5swdp6C4amolLKIHBd+HyvE2yAb0AUbqAvDSGVriA//wqC0WehFNIY8xw01V1oeBcxkc6gFfq42VjHYGYGh3c/hm3ZCPPXHTxf24tGYKPCKKM4CdhSudIuJNnqBzLGzBD3pX281gU+mYtRM7bADvnKWLyESUEWJVlkPYIdDxAyiEBhzZQy1HQVmvsBZF8C1CLyag1bSxN478ZV/PK116HKEuZv30CpMoTbs7O4cOECnnjiMwiCEBvrK3jms09CN9KsfgamX+K1V5hQptooYXLtVwhTaTS3fQpmf54//zWGtPthmY/Dg4uGdAvtlUVsze3DpXNnuQYb44cfxbWlVSa1ikh0D+5WOIAJJexBNSz4IbBTHaDBtm1GISxZhp+0IFPEIEWAEttZMlRYzKqqp9HnayIGHVWehl4aY27uQNYMGIN3YG80MbnrPvyLyQncmF/E0tIStowOw0xpqFUrKBbLGBsdQrM1jr4rMWnZpLJsbLZ3EVImg+n6GcT+AN2JT0PuN+BgC0L1fqTck8gpNuYiXkduw84qcPvAffcdg9xaxNnVOXbGJJcd48MfUn1trpNNZy0wcFeKePFryOtTDFiHziq6vgaZ75FYuMCZxYm3LzPQHLaMlFEuV9Dv22i02lx8hYGkeIMAXTeNvHwRW0ckppRVQQ89OcXbyRwJBxFnNWVqcPp9eKECkwnu9Wx2Rg6ON4uut8yuMZH3PQy3VtHY9gTAmZY4z7H4FEVSQhj2S8SQImL9QUhaiBsz73DtRdwOi/jRiofy5A6ovMaHQu6qntvFzfUm8tkyRA1tT8dAb6Ef+4jcHoYr4+iwTQvKRaiahOW1HjKmQ1Dx8eprb2B4eAwHj30adxau4MLpd7D3wAGs19u49+AWKBoT6HXhMFu214PCtraVGAGrOBgMGICfdE5XJFVLs7JcQdBhH3kERgPZQRde9SCTHUOOXK5O488EGjBRcYVBHkBa3kA3NJKfHNpl4vKCgufbJZSmihyxvmiYj3yol2fqOPHW6zi4bw/Gxrbi8pXrWFm9g6ntU+z/MfTVGCVrGSoz21cfxOf/YApmNotuu4NDh46x3ZcxFJ9EbfoIdk7tRbWoYGl1BRlrCF4wCy2aJ/hOwGFgRmjDkHUCk3IXEzR+BmwfLUHnwO3ASo0jFVYQKgaR1UYnTkHnvyXVRUzA4z+S90Uxg1HbvNYo3FC03y1+rmKj8Ax0P2DL/26wScCVahFf/PwX2CQ+6mtreOD+o1hcG2fLbmFLlrHcDSGLDGvbklnK5/PwCQLlYp6zm4VpViCf+x5yxiLi3V9DvKFgcusEUZ21GAgEyEBTIiK/hHVPw9MlzqgsEJhMIDnwpSwES4RukwtUWc0075dld6SYqKswoxbWB2WYTHg+x0QQ3cEEsNnYDV2YskV2YVc0TiCU9+Fin0AXDTg9Ej7uQz20ewJgO/1wIcS5YAv+dKKI3fv2wSVHht6AHFxA3ZlHIIdQpDL6dp8z7fBurBBbshEVUSp9FfHCd3CpewK74iOw+kyGqiOjsCCRknA5iYvBSAlHx7GBmMDgM2gy4V0uDhmwgYABEQcZWADb2gGzeQE/e+EEzEweT3/mMQxcFoBvUog3Tj8LJ7XM0biNSvE4lqKdWHX6yCofH2wS8KDbww97OVzuOIgZ3NvrHXwuVuGSi/3AY8P1Map2OT+TSYB+/zxSpJw75NgQDYzbD6BdugfFlQpG7pxDd4uFWvgw2kxIKFUYYB2etFMQIHtI0IPDCvQ325IBKip52xftZzIxYVKZmG2rkOPt0jg5XUbKeQOr/TJefu00cpbOcaqzjVOYnqzh/cVZUmcFX/+j/ei1XQyYOFP+BwKW5l7nHOzDU+O78WjWwaVGgJbDFjZyBJQ+hQVRWR1GJ5oglza5noig0+HyqskCYwYRRETc7f8U+279GIv9VSj6y6hqU4A3h0H3Xah5HTvIsVcJThthFYIRJC7KNKna3HW2t+DyIu8nqqwwCS0oLgXJ8k0oq2fw7Je+gr4uo7F0FdWRnRyt7ej3NlDLfoCNik5KehLhoMU5SaMbsUu4puLfiY2P0tJgfb5j1i9b1GZAaRvczBb02FYSby7pJaSD9ygTs6xOLUHJiJwdRV3KvjEKkIAzaPP/zGh2COXubZyfu4oPRi3skZfR6Cp4OrMGFB7C8iBCk3QzZWT4nnwytypaCAYrpKkUZzaDmIIlVsnhrdOQ6z0E1jZ4eg1KeQ/n3uHnBhR/jUlaQ08fg+XOQta5bnUHGoMpKsMVvN6R8H63RBQX+uF3Iu5KN9e9zvPt2HoKv8Se/ixSI4d5gTxpKcv5m2fWSRLqQQ6VaDuiKq8hKIQai9QUctEOAqojiYkwzBwy82/hu/YoXs8fwjPSFexN21iNjuAaK7DP6uG43uHr24jkIhzij5xIUS4lsqEqFDNKAGNuBs3apxFkC5CDHkfAF83IAFLoBj5eamkoyHP4YmkNXfkI6eetBMiEbpBTO3GyXsXzLRlV/XcDZk67eMSg9qSYmMkVMB2soehdxygD0szD6MYTREtDxM0h5M1VVsJrsyV5DwoI0n/SijEXM/ApCkaP4eszP8ZTRpkcLeF7s2n8rwbw5aKGB9I0Bn4BjronaWlIK7xouKmuzAmkuMCB8BAa9Xq4xqSKpLvsMB05OcICdcFfLKZR0EP8p+Fr7JQDRGpij3ovu+0OBvJ2ZEMdeYoQVRasHkP+exEr3/jWc98+bGWNCi9uhmmiZ5HSbT+RzqJwL/EN/B6rB4U6V1GSCsfkTQgejQRyh4kDEoEnwkFVERa2o7T4KqJgBRMUDtsoAe+wSJOczZC0Y/A1vtPalG9C0ZsZ1FtN3Lh5HWVyf8bK0IFRmpYPIZdNs1VZ37SKF7tpLFMBfjP3DrakDBZjO+/ZFZXg/Ue4NpPGpovhlII1X8ctN6Yw+Ui8ntqKKecoBwtE1IpW4SJsjrzFuepDZftE5DkxDzGRVKOAj+g+YkmH0GuSzMrTNYlwVYlfiahUG3DSNQQjR1C49X1k8k/iyWEZA9rOv26U8Y0RE1mCniqLFhar0XG5rWDm/AXUMgYp6Mc4OD2KznKM9vwvMDE+ggElKPmKwiSPf75Vw/5SBw33MSbcETWDSfprsNI/b5CrifpfHmrjoKniZC9FJxUlI2OSBrP8VP7bn3/7290oa/SkeRL3Mt+eZZZEsHOYRQez4Qwq0jDrTOvGNyupHIP2k0qLthRWUE4qJeaFXwlkgns1q8lqF6HepnsZmiBaDLFb6tit19GmX1X4njiScc2JMOsvYhuTbhVqcNdv0Ux04Bi0hQKZWz3cuD6TtLq71sC+8k3khx+CYwtOZyIoUmIWrR3fQjE1i2ag4abdRkkjHqBAgeLiQDqk0YhRD2SPbknjnw7et2dwZbAV24w+dmlXMMXZsc08M7cIT94Lk+4lIrDIXguakUfg2QzMY7CbUk9KJCLHkfZRixah9jfQqT2JtHMS5o1TODr1CHaF7+PfLzzM7slhm+Zig22nKX0cq9YRTwxjz+JF7Hz8CdyR6YAIhgWVc0C/HcQP4CW28wG8hkmzhG6viqIuCmAQXANsMFhJ2qAq05OAM9IYaXEFXy43YRBsFCq6XzYzuOpwnW6jz+6Zsf5qKYUVbw8srYE28vhW6RwOZVJYD0RlpEQt6ZKQbJxRgawkuVgoJRHoXWiIqJdjpYJM/AG5me4L2yGxtbJLp2HoS3Dzozg5uB9nO01cd3QMG6wqk3QzzuNr4QmMGDpe0o+z5W1s0GEM6xJGFRoJvUAxcxa7tQUqq8/SSrZwh2MxQnaosWQd3MLLzQIu9SewO7uKT2YjlDluNrHG4sp/UI/xJlXZiB7SD5NucnIW9xabeH2jj16UwmO509ipNWFHR6lT2cJCDvJ1trNGjzmczE3sO3cNACUjAxWCQRJbNLFNlUR+ZbvK1NB+QHtABtDDWcrTFD6VDfBIysHZfsgKhijTiITdGcjrbfyZ91l2wQBfrAywTCx4r5/GdbLCJzhqO7s3EI0+zXldxdvONTy/thM1XcUDGQ33Z6dIUyl8uRpjN5PWpRDqUC3qsQaf5qfFoHVZuCyCn885lIMUHjUsbKvY+HnXwvFMnSpoJ5GuzDA6iDwXhqFBz+6gxnY3aShcgMyZ1jM7WG0qJGpfRTMJRsIZbKVA6LMTOMv0rfJgCYE2nLiGhr3GMUjjvnyEywMNF7syHhlcxevZI3B6MY7nXFRSwo4C+00PUYa2cf4shc1OojJwe8PBud4kqUkQaoAf2QZOhTlQcOGo0ea9GZxZSBCl12sgy2SLxPpCFwotH9KqRURdnbB0jznAzrTJsSG/OVe42CoNOm1ailnr97B8cw67d+2FptHkt1pUWxYBpo2slSPVRPDofW3aucgzMFpYRlrto+PQNWWrUDbmyN9pWr0V+NEeqq4Oqtkiti29SaAuo6GOwOr0E6qLuJaWmBSrjMry2/BtOrncDvzwjouLAQGUSZ2U+3hU7uGWH+L2QEKa4kTsh7mWiWa9QYHSQbc8h6I9jbJSSyosWEFNGTIXKvylhhaRUo678OUCb2rB9H7JtjxKS1jFb35zmgIkg1u3r+Pd35xEOpPF1NROtFuXcPHiBeyjn5Y533Nzc6jVRnFOamGjcRVHjzyAqb0H2doB0vPvwx4bQ5Q6wvY3UVk5QZHBpJQewdUFG0JPzcllSD7ZgpXJLZxC2LyJm2NfgtRsYIouaV4VdkbGNBHiYD4L+4PXsfTeO0iPbsXcocPoOT7OnTlLFTjAgfv34NXwGrLqHdy7voEuhZG6tHAbteFRci/1LHm048/TccwQh3Ik8MPIOy+D1geTQyNouYVkX6pnKzj+0DF64izmmCSRuZHhYfT6DizLStr/vQ+WMTw6iTS7RrPfRqt2jLrcROba96DvJKZ3h4SQx8zw4/j1moQ1VjTFJB6kkZdmTyCfIpd3TsMVW7DEFWEfj8FGk1WcU1OYCony7KbU2C6Etoo9tQx2T2xD3SVudOvsLh1lcxK9nIne6hKyG3ewTsksnXr7VGe4NmzVqmMkugE5chY9sU1KFsvQJQmBsG43MV104Tldtj/VTWYSmXQRNi/eaTWgaypShugSzgnnus8brje6mNq+E55LkUHaMKmfZXU35q7dQn7leRS3PYTvl57Dq3WiMKlF5qz+a/893BucRWfr5yGzVeeorWsb9MLEkuXyo8mGQjhoEIjkZAcmS/t6VivhTbOITxo+jpB7R1PEGM72z5t0Z65OAA3wYIbXsdfxP/vlrrp/3370Oz04fpsgUOdL6WJiKbF9TtDETdxPIz+D5eAicrRfeXWBM3UTrXaNrXkfMqaeUFSPixF4pWoacrk8ykNj6FMhiVGxKvdT/b2JO6uncHvsIYrALyTCYD+F3R7iwQwl7faVV7HLvoGZnV/GrkwGzZ4L3R9iV1Badv8ak9tT6KkVrEcUGnReCikrMAy0vAhyf4CXOzHeoZKaJnht0Ct3mBCPSmzNl/GVIpOTG0W8QHrtNpodXQqtJlF1lXxWlaY4S0MUTLMk9gEVCi+onMOVeAzD9MTZqIGSdINVMTHQn+A02UgRfMR+k5PYH42BS9hUyfzK9ps78zd4r0MFdvQZfKPGEZF+H1i/TNSmfCod4uC+muxg/hvj87iXdvkLwSqVXkyNncZim0J36YfIbiWYkqLmuw8SQOXkNGMjUvEShY7YVmDTU4RIpFUmgl//ieUkavDHbQNPkhEs+vjXenJX+dafffPbbuwxVynkJAE8WXLoNYqyBRSVHjIGZ1fajyGqF4OwLnGmDEpBiTd0NS6WWtpzxdGJztnVKXm9RGZ6gYQSZ/z25TP4j//5v7LFDTxeW0J9OUMhMY6VXohzJ17Dmz/9PqbGyviL1b2cd1b21Bu4RK87L+toEZ3f8jPYTpcU0GGFuXspNemuYpIMxyhPZBaq9jLX7glvxQqnpU3NvOIrNCwqDqV96kCKG/7fE+ahYyCRhyWZLRp2kLZPwCKJe+n7MKBbEluqBZpv0erCoCu9DpRBB7GlklYFH9PgUXg4gx7n2KLWLsDu3kGJwyBz0e3136BHRXRoexUX3j6H5UERrY1fYcfu3bi+UEfJj/CLxRL8Syew9dIrePe9D1BeuwPpj7+BX90McSC8hWG5hRvxcejtKAlW5Qwn++QUHp+gB1bYDT2KngM0Pmuk2NeiTCJzW6GEhy2XMlbGny/SI7Bb1cmeUEYetfEidLYrvB7dUZqKijxMnhVnTlJob+4+EgBSi2cw2D4F2QyhBQMMlBJnnu3MO7jeHYyzHdPUx+vuBi5sHMLP3IeYsSb1uIZsvkxQqSanDqVKAW+fOoVP/OHneF0faVo6qbQF9z4xgTVSUIaJ1A0F4wMGlC8iT7RtNFYSjyK2XyMvJN2AElPHoWhAbuYIkGJ18rgopRgpg3+92U3h6+UBjlk+3mgTpe2lKx1Zii1xskcXDi1TRECvqjME4X9Du4OwvULXQUHAlpN8G3ZrHpfHD2M6bTBYBi92RcJzsMM5tmGaAHEc/2N1CDMc6UczyzjaPIUptYny9B/gzZvXkBvZQG59B7bt2YeU20X/3e/jf0f3wdx+gMagD5/oXxctmLbwb9W3sKCRu6MK9isd9Cln+06YzOkMufw0KWuU3Pz7stholPFiaGFFbPzdNf/rgcwK63iqfAmnBm5XWlprsz9Dy6ShFkeWIV2QxhbwWNE0qUJi+wRhYlogRxQlNNiljWtYXVlBMGRia6HFBYa45dXwqn0vZvUa/nR8gHpjFk63gXsyG0gPH+Gtt2DNlbEU3EE2XMZE7j6o7QUO108wGPoE6lWKhnYb31nTk6PN210DT+Aa/lC5iG/pX0SZ932I5uWY6iQbBxHb+aRn4t3ASPauqgxXjF+LCbGSvY67m3b8bFE6K3ITz9be6kpnzt/o9HqeFYYB6SQLi2Lc83ys1buUjX1MjBVwcP8Uuvam+E72jVnpQn+J6PoKkPHgp7Jo5PYQJVW0l+bQmT2JRx/4LKTqA4nB/+2HMOK8DcS+W+z2KTB+gF7+AcwM7cNh36ced3HOztC4S7jtxvh3/s/wI+cgXuptwe7cAH1S4D6ak8dJoNOZGC97WbzIoCuUjfZdXjATO/P3diqZgHZAr5Ba66oWtbMiNrYJQKZpImeRw9otVMtZVKulZJPcpXOJAyfZtIOYd9LCOg26NPE5ZCjQ094qhjdapBgLf/XiCbx88jJWWsdw6CDbvLWKUj6HIFPCK794BQ8dPYSeYmF7QcWts+u4Xevg3ugGfTaByu7haHkcFc6h4a6iWsjhIBVc/06HdCRT6jq4yDGydQXPhl2CqtgE2Nx6SN0N82N2ZpPmLmj0Al5RSNQ18nDfkrU8BQRn1usnLzAyeXFQmhxgO70WZD2X7GbEBKpIoQngXMTigCtdonFg5alVC3k9oaBVGvnWeotIfA9y2RRuXr+Gex96FMvLqxitFjG7XMf5c2dQKBQxOVrFN5/7EkrU323bQ1YKYDi3gVwNEMed7IQP+hp+tG6g3ac7E+RKgMsRkVJi71ls3AtvHuMf89FVne45eEoOmpFKfK44wlB1cVasUGl2k3MaISQiZl1S6KrS+ubFxRZNTK/cW2PRf00OplgxH0JlZJSL6CJFuZev0sYVUnhw22502w1MTG6Hmc6iwFku6hGe+6Ov0kKKjbkhZFOUXVRGPS2Nm6md2KCMXaTsbFJpqVqMYZO+m+tjkUHgpgvzMSC+ZNMybamUDKuUfJHuVjXG3y95si21tni6U81utyIOV5umXeWARayqaGONVZTFGVCQbHAiQxALmM3AFZvvwvgPYMQXCWQj0NyzzP4yBpjCUrOMXQcfw8Lts3CDLNLGZpKsQjnZhXCvvoat9K72vmdJiSEGnSaTZCJPvj/bttGjijNVBdftkFIWGKf8nDACJikkToT47lIeVzsEt9BLrquz4kjOrjYLIXaAZUW6+//NJIhtZUkcV/dJ1NfaFA1aFrstHRHFfkh0MVIZgpgFm+mM2MoiQJuCI+LPZM61Qpmnx3OsyhA59gDvOgnZeQs5SsX8+DDWlt6FlSthxJpKNgyEPQwo+zJM6EgtRdGwZRPIyArCdIiTDpvGI6+nsFWNUdEi3EdAFMdwkqphlZX9SR2opNs4Ur2CdTzI95mkTXczGAr5MIiT8xVRn5gaO9lSjjeRWmw4EsCh3goq+MulFKZNH/+BYiJLpeQTpYPAx9zsLIok/JwpE+d4wZiVEpvvDFqc3MdEYGEeYjobjdbOVp5Cv7WBnneOck6l6R5Dj6AlGfmkXV1KRM3mddZn0Z3YD8VxkjYVh+KERriSgbGUeAJIRisWx54RUqScFA3IDxopvNuTUekXuVbKWCbIY/fJ5DChNfSUmOXN1sbdQGPxYEx0t7lFLrhu9UA6hU8XdcpJCaZQTtTAGbqdG9eu4Kc//Ske++TvYdvWrXf3pTO4dvMOkVGcD2eofNZhZsqoDFFJNR0mSyWgeYioeCypzPK1qIGzFCsuR0XnZ5YGwCSV1Yjut9DS91MZRdDYvmJhBoPWeG0v0pIZLKpusmk47xI42QXjxJk0KWjZpUWNPWhykDx3EvEa4kDuIzObtLV4u3z3v3Gy2agW6FP/ZcWg6SdISVaimUUbiRNBPVWieLCxsXITs0t1euAMTp8+zXbW8PjDh3H1+jrNUQvZW3PsChef+cyTRPMSdLeUeNJYcIY4GRR/xEaBJK4boldh2y+9CS07wdbOJ4fbMnW8ItPuBSoKfJ8miee8NKojE+f6Yj6jRD6KD11y7oKSlFjS5J/JoZeMPs2GykSklMHmwUD8YbridRr19Q6QtQQ4IV4i+VO7MqsBZ27QE6d0CoazlHO9UdpGOo2gi7w1hGUime7fRCW7nd6YlyCCl8rDpDYxP51kR1NNCS3uwWXrqsmuoTgFUBPhktk4D7m3AXf6aQz8OSz3VnCxfxRXBg52EZEtrud98n2D18tx3UJ9JamTEkhIAlaUzRb2nSh5eiBjimPSJotnouPnkqPd336IvLRDqasKeycOomiv2bbriImWIYO1GGg4Oo0rtGNFuqaRoWzyzJZCEx77KZjKe6ilOZ/q/ahU08li3EBs1jL74kYCPKjJxYMsuuKz0NlkjsUiJFLOoLwP2d4byKycR7xlK+brPl5tqyhrIlAkrSpOC2rq33Xph6lWSmhxc2QFIouHcQpCfpb+D271duKU8xlk1N6m7OCLNqipp4n0qhm8A2ijnJ4R+tT9yXmR0KTixChwNDyQ6iQp7Q4ayVdFLQg2xGhYh688AJsUpSavFkWmZSSliWfTfC5IF8dr4igmdpJNeqF5xSMPPh2O57Dly4dQrH8Ao7qd86liTJvDejSMskIQpACJ707e7xxqM2keTYMfGxQ9bvLUjzgeWrWHcXMwzT7sfUhWsrIMtkhr+CfVHmRX+z30paNwHA8pwcNEZzUWp+l9mFI/keGueLSQPZCim2qEKta9M6yixZkf5sLsBGHFAZsQKEFMypFS6POPvwmNrFYqaWdx8C0WKYIwmRy5Mg4vtxPawt9gV8bFv6rUcSzbSLjWiTR83IMLIgUOW1ZXXNxTeAfbjOt0dXEyQsLg1HtVNIJhriVKqiv+9nnDL5Vsvod+KpDSiAaXmfUFzElXGPwq8jTsmqAfzquGJgxFSDdx0uDiOxtpfL+ukLd1/owVF9SgGJtP6gXifIkUQ3rIy1XOmHh4hYhLsNJlMTrk3FBsGenJU3xC0Qz0IZbgOsLeDMrmYfxxNcAzpQYGBDmRaOl3gk1zPDQ8VH4FBaVOBzaS8LBoa04u7jjbccO+hzM/SN7jci1FNcJezvfZdgpqL56nx1xCXR2gG91COrZQl7aiKk+zwjF6dgtGVuxxLaFDo2BhFDltK8GpA0ccjLOOerq4CXbQkr3pOBwkT/mA4yGekI2TZdNlES9UQVOUjz2qK2Gd9IxFVDoOs3sVV5QXCFYFPKyOwaos4ketYXjkfuHFkeC+ClPu42DhN0TyBn6y9s84OuIIgfzOoMTppkOUFxpbgKRAuDrb+ZGceNQpwlt9A/J6OI9Frc52I0z4W8h3Mq5Hl3gjh/NKPqZVe/viZayu53DpzjDuX38LD9jrWHFGsLjaoKCPceESObXTS0yETNBDcvwWJk/rRIGTtHMgjImwigpbnqZfVFzSTUgDavEww/a+H/OOhZke3x+exzalkTxhEP2tNhYShcPBERKjdru/S6SaVNX72/qrhjjbIjfTaiY6ktXdn/bx1aKNc6zukk/msNQaFtwZzmeXsL0tOU8tK3lklAraQnGx77fUihiyiijWdEjdVWgmq5Sh+afGdehbS6U8Spkceu4a5nAHuwz6YLeOWN7U4GrU5XwpkMwqO95mQJx5laMkHk1uLm8+mJIew3hnFt8dHGd0p3DLrbF9RUDeR1paVxzKzC243j/AUXM+7AGTDhDKKxx4cCh/c2ywB9Mefl438GIrRbkaQt0m7aZQT2ERt5E3HKSTdt6R7DNR++Hw6CRsW8Hqho1t1QZSmWtYCyehuHQrXQJb1sTU1ipkX8ess4zV8AaGtSmMGiPo+RubuxMMVjbIyQGBLBDXzSRCRKNeNtl/V8Iy0rxWSesna3+hewxZJjrLYKMPBSsEqEfQW3Qm2JHEhYQdpKSD7MhkkejpjZCgJcOn8chQiLzAYAUljZhh8giz6oRtDMsjGFK2EM3EloQ4QBa6eS2hEeoW2rQmNtoytKBDHzyBlY5DYwFcnx2gkHPwyL4yrrqnQQjBw+ZzuGqfICbMYVI+xGtwQUYmOUDnKpKWVtiMUfI4MitCifhagzZPLWKCM+iS66tiG+cuwn7kgRR+pxmUSEl0blRSwaYtSM6iy/oKPl1+DTd795BFDkINu+ja7AjaxxFjU5WJ8NTZ+BxpKIft8TRJOYeN7jUqn3VUzD2cM6DnhKhVs9gxnkOn08Atct7e/GUWrofsAZsqaCKxlY24Ry7UcIO8rhK4XFYzzgUEwRQ5nMpLPI9BGalE1MviwI4eXOyIehQyz8bnCZxZvOHtRYay0YkMsoZGrUxk54gJRBAq1Y3FA6ctHLYu43L3oHi6g/cKSYMURxzJC91pzA62wOB7FAbqe3e3ODcf995UXAZRTjxrlTx6TxGhSGwNghWlBjNJ1OOCQ3kYCqkrVD/APH3solbiYmyqoCb96kXowSmUURBPgWBdPo+GtIAhc5zomUeruca5C5LTRvFYRCCOZ2XxXLVPTuyjk5tGOZfFtsZpHLVyyQ7okLGAPdZFInGP1dOTs11RowYV0TSR8YulEh7MhqScONknk9n6t+xpnO08xNdmE2GUPGZIkR747CQ/Tqgr+Z5K61VV9if0AfJkRsvwLVksSXewGN3GEN3TVmEssIL3uNBMQF0dZ1CnKisyWRvuGRTkRQx7Eu70xqD4FSZwgBl7FW42g3zRQLsXoNnt0B56sDKkjVSKyBzye8SM1DKc9DQ6axlcSCvYCA3s1zews/ACQueTGJeOY4Hj8N16mtig4ak8ZWw8xoB9vD8I+HqFs77J8+Lzt3tYuPtQuy6Og53N8oqdEVUoqSA8xZbI0ee2OcM2+kGTQKZjnAKBCphipIA17R5Y/hLryHlRJmDGPtrOJTT8LjqUpha9bI0VvE0TPkJ5OJTKwxS/CkCg6IqHUt1BYtDTmTyzTkIxDFiRnOyQ6vlR9sIZjDTehZ99GOe7e+iLGziQMlFSO+gTV6q0eX9SWya9t+i3R5PjlBHxWDJ59+MF6F3zL4Imcnvu5tatOiFkJBc7QIligi2lkl7IEgZVlmhTnwt3qVtn3RfYFja2Kl+gYhK7E7bYCcaALa9QMWkMbDy/QpNBNYMj0DIDAshtBLaJ4VwZNXrugSsn3hVUaQo/M4JCKLw1Xmdopw9r9jrejg7jSkD68x5GKU2O9T0Gl8JXqnXcjN7GFn8MO0wfHTvCGoM1pH949+63QRupzUqrgbILA2mSIqHN/vaSU/i0cMRqBv3kIZAN1tRioMOstFA84jVCOHDx6jjy4VyitgrmDs5OCTn/HNwU0HJcLug86WCSBFlJ/LaiU+mIRwUFeAgQY+U1olHoBbDNfcgUTuFrah0vGUM42SX/qyq7Q8I9GSFbV/DDtXF8Pj+BM66OF+msWiT6vBx97JPvHxe0xvZWQ4anRqvJd3l9gYfkyjAxkKp4EFe4EhrqrZSaEQEtiJrJc1kKAw68JbZ+BTl9OFFWoVSFr1ZpwuvsgjyOq08kSslP0kjlHXgEpejuL2pQ2VFn+5SOwk3Z8QTk8NcM8iqO5kbxl00Jcwx0mhq4z6442d6CupvDz1oxqUlOQKjwjwj2w0EnKE2Us9JUJHraSnSoT0qQqYBsV/x2ippoY5lXd6iB/UjUPEoWGlAxJb+dQkQPkj0pJxETLrV4FuI3X0wGoyb7U4GcTiykoKZYPAHE/wnnJGZauC5ZKyT/j5URXr6JD5xN/byXsnBcE5ZSx/ZUAZZKwKRctIg8+f+HYD/0Yal+JC9dne1Y+VxICmknvyKXszLJ7yR4bL/ySJp0xep5m7+zJIvTVrEhz6+GNoK+e4tioU+VNk15mmHdarzuMtL+W7ClA8lrFZqGSDgfvl88tC0eZhMPqCoEIj2+CikYkNooapwrmCs8hj2U09NVsUWrohEJBJZwb3qAsxT/M45wRUCM/6+P7v8VYACIdKWETzpE4QAAAABJRU5ErkJggg=="},4830:t=>{"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAKdBJREFUeNpkm3mMXNl53U/Vq6pX+7539b43u5v7To5mRjOaReNZPLEiW5KtwAYcAw4cwX8kjTiAYcQBYhhxEhtInMR2rAwk2ZZkWbJmH2o2Dsnm0mTvzd67q7r2fd9z7utR/kiG4ohkN+u9e+/3nfM7995RPf3lq5FKuW1ZW12FwaDBzMlRoNtCeD8Cj7cXJqsJdqMW792+g1SmAJPRjJnxcTRbXTx30otuW4+3l/cgowa3ywudToed7W1oNWrIOhkmgx5Ohx2tVht7+7uwWu0IBYNwOc3IZkvwe3sQi4Yh6UyoNAs4iO7D6/bBpDeiXFbh5JAXv3Cpjh8v1PDuJwcopo+gM8hodvQ4OXMZP3rn71HKFXFqdgaxdBy//OIIBkau49/+6XdQKOWh4Q90+b92C10Vihq73RxUdxvIJwqQgl5USmXUqyUMj4xAqzUjHDlA2+WA3eyA392DZqMOh5kvU23B7dTCZmnCEzGgkAMf0AJUDWzvHeKZJ76EJ594Eql4GPGjHXSNRly/No5Op8tnxGDU2/BgfwXJdAanpk8hUyhi8WAHLfF1Pj8WT3LeVbjS58KNhQ56eqz4+mtfxr2Ha/jLv/whXn7teSRSG2jw7/3r3/ldzP2r3+f3F/Df/+I/4j/9zx8jn01AZ3aiXa1A1eqIMXPUXYs0Mjnwu26nS17Z2EUlX4HRrIZGo+UDgshk0sjnC8jnCrBaDHC5XNBptXBYzUhnk3CY7PB4zLBZG/A69LBbJEjtChw2J65ceRqvvfJNDkBCsdzFZf7+hedf42cEUCjy91dfhM3hwvzdD3Bycha1ehsHh/usAAeO4lFOpBNff/IJFLtqLBx2Uc5nEPKVoebKetx+BPq8+PTmm3jx2efxp//52/ju974Dr6cPOpMP/+WP/hiy1wkVlxScwE6rBWWZO92i1N/fM5fLZeRoPIZus4UgZzTk90FWSVCruWBqMQE6NOoF5HJp1GoVbO2sQ6vTwG32YWWthMhRDs1qGQFvCLMnAnyQFtFoFouL8ygU0mwVLba311nSW0ilwqjWSlhaesB3qMNu1aBcaaLDHwZZx19XUanV8OL0BGSLFTvZDLqVKLqSk9+hwUCwhr7eEdx/dA/1VgaJdAFfuPYaJ/QKPC47/ttf/Tlu3boJyWYC1F2oOOZuhwPu8AntTkN6+okzHHBWTmfDODE9DIvByG/qQs3vdFq87MUOTp8cwOuv/jbGhiYQCgSU/gr5RjA6cQEWqwFmkxXluhatbj9nqI1aJYVSqYtEfBMGfZttUMHS4m1O1DInZxPLS7fZvxH4/Q5OhhVuTwiL6wtYXlvC1v4exvjiF06excN4AupGFpKkhctuQ7UlI5ys8tc5dPg8t3sY0WQC+1ufYmx4DD/66U/xe3/wb6DxOrhQKihVLH502spKd1sc8NCge272xEW5v3cIep3E1TTCYrYhy6bMF8uYGNLC6+3nzxn2RR4zU+cxM30BraYaaq0Fs6dOo9nWctXqOHXmCirFDbZKDtEYe9xlZp8HsbH9mP1dhIo/6vUWnC4PrDYLq6UMncbOnq3h0aM7fKcuen09ODc0jJ18GZJaUioqy/dQ8Wu5bBw5toNabeaA2kgXWjgx0YeBnjo+uHEX//6//ik61AotF63TavI9WMZt9m+7DbUkifE3NE88+RWMjVF1G20+uIxMOo0M+/Pv3/o+Jvor8AZPYDvcwce3/5h/twnrAyurwI/xET1SkW3c2A9xcjIoZKLoNMtUZBsV2ASNLorJsWsolevQSGpYzRb4vD5OaBf1ZhPtdhWNWht29vH+4QqmqPw+XwC6bgcenZrKnYKGz0tTyevlMqoVTo5eho86YjI0sRKJ4fadfTz/9Chmrl7HxmEYbb3ERTMpwqjmM7tiVVmpKlHXXGkVnUOanT0xZ9Ab5PW1R8jm49jdfYyHD+/CxhIaG3Kj2dRjbW2Ziq2GyaRDLLGN8ME+Bvr9eO6ChM2tLWzspOGwmNkGdQwNDqFei3EFe6CXdOzVZeym0nj2yaeV0hK932U/abh6JrMXh5w0q0XmhNig5Z9Bq4ff7qAL1NDRmGDkc9Voc6JULGEXjo6O0GrkcWpymivrwNigBYfhLm7MP0CpXuPANJzMNttAUp4jVlesdLet6HRDWlibn3vr/fdko1nFF67Qa8OKyBxEUvA4ZQqRCzt7cRTKec6aFrNTp9mzGnqeiuU+CoM6jrurVc68k8rupz+XuJIaZNMNbG3usO86uLO+BLOsgUmmPnAFc5kYGg0dPVvL39dhNjopbnQDln2906BnV+E22nHt2W/i4CCMCoXsJNuoURMvrYVscLNdXHA6Nbh39wAauQebiQhSdJNmoynsh/3KgQp1VgbbEf3L8uaAW1JnrlFtyDaXBYOhIZSKLKF6E06bGpNDduwdVoRUIxKJ0FI8ULPPK6063DauiMGGmf4OYrkqBjj4Rl2N1c1d9lqJgzAjEm0hkcsqAnh6fBiBgB/RxL4CK/19kygVjiiKGiSSSU5AnaBRxy7h5CEn6vT0GSr+GMoNLQFoii1iQjA0gi9+6Z/Rx7MYp5bsH1LEDjYwMTGD9+/dJ7g0qMTt4wE2KVSqrjLgToODbSo/G5r+wQGMDHhhN5mQzsXZfwE8XFxiT5noh03E43U0umX4HE7I2i7SqSisJiety4ul9U10a148MRvEcnIFPcFeRax6gyoMDVFkChr4g276uRFWrtj+/gHKJbAdhumlXbZHB6lkjRNVR5cWYjR1cGF2Eh6bjEFnDW+88T9gtKupyhasP6adVYFsahnjg2Hcm1/Cuz8L4/Skja1mRKFWRI0TZqJWdBoNVlpN2BDVWRhHR+lnYU3St776xblmoyWnSx2avgkuYp1ARIe1hM3dJCRCSMjnh8NpQ7GYw1hoED6bA5FUBNoucTGpw0jwFH7wdz/Fh2sbsLstSBIShgJBnGD5xzNZFEv7mD05BqPRgpmZcdrjAR8eQ4j05GZl6WQ+o8+Bs+MB2CQD7esQ0WKdPQmS3h4XqYrhXj1s5iwODx6jtzeIcHiXE5Vly4fYYlXaYglF0p+WRa+nDlQ5OyohWgI+uoolC2tqSC67bu7UcEDWWypU6SxxLYfzMzaKVj+OYh3aTIIiwNWqFHCUTPEhLejNelZHjSvZR46NgIWE58+fw5//9Q2sLR4h2ONGOlPH/cUi3vroIVfhLAZCDiQzOQT8A+wlGemkCvlMFRbChYUraGJvNzLAj2+vYDdRRDxN/+3UqQd97GsLNjaS+ODjQ/YryAKzdBIDzpwkExjBHo9g0DFOu7PgIJOggDoU4aqVWRJ8dwFPx8JFH96pFOc+ebAh95CjR/o1OHdCj62DDpYf59AT6AVdhL1WYDWoiZh5yCx9NWeNqs/B16BTa7C4sQEtH/KrXzwJieHg9VdH8MO37uPjGwuYnezDH/7ev8A//PhTTmYHtVIFAwMj1A/Rm8NU3T0c7O+z1Dv0ZDVKtSpJyo/enpBiKQGiqyR18NdvvIdMuYg/+L2vI3zUJSuoYbb2QijRo8UYmT0DB9vsoJhVaE0lacgHLQ68pfj/cUlzhS+cHZqbPjEuR44qtAIn6acPH998QIbO8UOOMDIyyxkssgdNFCIjmhykhi9SLddQIGenCSN0efYgUG+r8eS0FYHhPq7cDJLJLQJJjSu5y1YJMTDQdpo5ZIiossGEQE8vWm0JFgpgmD5ullqwEmaOCvToSgZ9oX70ceD/4U/+ih5sxm/+2knMnLjKl7eglI8ind9jyWc4IWY0WHEBbwDxYh679GiaP/1XrVAjfk5dyoDPjM999aUX5fMzJ2gT/KBSimlIz+8xcKYE1nVhsof4wTuKz+q0MnKcjBa5W0ubqnAC8kwsLiLmeoRM3S5hxheCZAiwxCS89e48q6WIL1w6BZuB7Gx3kdAYTkI9KFZapDk1Gi0Dpqi6rUYXMxefo/o76BRdTE5dhNc3xJXV4vx5J/vYiL/83mfQq6uo1svYDG8TLQsIl9JKXHUTcfVGGRtMeMKRqtUm37PJ6EkvF/7fpS0Fh+xz6VJZzmTKTDkduO01HCS6WCXsmygyRcK/EIDp6fMKCuYI84LIRcYtk4BYLTBw5QWGBrwW9I06SWssOUJGl6sSi6UxOEhxcliQjhU4kBJGxsdw59EKPrp5Bx6fB8loFD1uD0q0K63ZjkQiDjd7d3B4BKsbRyS2IQRdUdycDyu0VSoVOEk16kwQO7v7pLAc4SOLB0uLXBAVgkE/alzpfo8X/b0BilkV7aZYaFVDKqIyd/vOkrywvMW+yGN6vB/zi0la0iGGuQo6nZ4PXUGDK3rh9GWFxvIscRHwmywXUdoWKodWJxi8CS0nY341A5teBQP79Mq1MchyAn/0J+/gzsPHeLR5gFv3lvDeR/N8yT1IlLxXr8/i4doDusI6Hi18xDmsQNvOM2is4o3vfRcnRmtIphrIUuTGh0JKMFAxdiYSSSQTjLC5BuoN6opBA4nvNOQOwqnVYHZ4mBY4iG1iZ77AaMkoImk08lwt05BbXP6VlRQuXxqCjTm3zDAv/G0/HKM658jRXYQPI/wziX3VizhTSr1Zh8NuVcq8UmvC55H5wUCZwjG/vIagw4eefh92DgtUe5KWw4Q4Ca7a0lIPDGiTnMa9VkTSObz5yYISFNqEhHSqxB43skfrVHg1vK4gFtfyfJYGZpuLzC4qkdZISFk6pGBRB0QNXz83hQvnzxBIjsgKNoyfmMVHC4+wvX/ISWQ/t9nD7pBtrpiuyKKprz85Ap/bhtsLMXjJrek0bYiI1tfXy5L0spSq2D3YwkjfMMYI+7XKcaJJp/O0oRzOnu5h+avp1w3UlPCtohf3IZJIQWcw4/WXriIUdOLXf+PX8Y2vfxUvXB5jbHyEv33rHvWijK++ehWlag43PlxGh/rwK688DyNL97PlMEIePSDb8L2f3sJegkJJxjZQBMWW0+zYCCw6lRJdfR4/lT9KrbAjODCEFK3pgPzdpPpLKq7w7OmBucE+n7x/mMIrL53C1l4R4XiWDy4yBRUYxSSKE+ufBTo82MeMbMBH9+5ie3ebYTxAUaNd5bNKv1sZuu20pwiVs3egjyAxRDrTsvQTuPtgFfFoGsGAHR9+/AHWlzYwGXLj7m6OxJXFyy9eoy1podEaceXiDKaHg7B2a9hPVbHP9soSXxe3D7G7tMcsncPG8i42jxJw+0OY5nuJkC/aTuzSqNluA30DqLP0P1t6SJyNiZ0tIdYNaWysZ25qfFSWbXZOWh3jA3a89/FjRBi+U2TiAa5mf3CYq1ZCIORjT/RhaWWd4B5kH3fZ4wb+NHG2bawEgZ9F9puKvw7CQ+XeWdtHQ8/popgkiKr1epXhRIZZBHu7F2OzX1B2OL74xFOkJg+pyUE9sKHfwhKkurY5CT/52R167T6SFKa+EyG89sw1cnOVYaFCOEog6NUpky12WnboJquRXZwj5ZXJ/PvJI0j882q1LoCrIT1x9czc/mFUdjKQbx/mYLd28My1IXJwh/akwytf/holX43pqVnoZYvy88L5a3j9ta9hmB5ttXgR6p+E0eyA2zOKqdnLCPZOYHdrHXn2da/PhVLyAP4hrnwU2D08xPmhHpw4dQ55tZZsnMfa6jrto8LBGpBkHjdRsGROisblRya2gsNoDMlYVfHSqxfH2HZAb8CJIvOBpO4oVScgSbSFUPgKVblJRxkb6EemyARGiypXahxHoyH9k1eenWPdyx/evEnC2se95RjL0o7f/9YZQrqDYKBliZgI+14F3ndoV8lkVEHCEqlp4cEtOBj6U6k4vIE+9PWfwjIzcLW0yjIvIlFmIM81cW7cDo2pAReLy+V0IzD7IrxOP1bX12hpNSazEJz6rrJ/1mEDtbQBdGQvQ4uaKj2IJdpPhaHg2oUxasIeOloH7i/v4cQES5+Tk8sU6LNt+J0MNgEf42sSQ8FBJqxebB7uoU7Pr5TKDU2LSaLKuKXTtglp9E+G8ftrUfzFdzUsVQ3Gh4/g0Nfx4N4d9gh71ObHGkPCp3feh0yS8drdfNgeFbZKsdjBB+9+Hzs765gYmyA3u2AwpdAyuSlODUz3SOg5fwlvvDWPpOpTpWXW1lbx4uUpeAJerK8/YrmbIZvdtLcoXAYOvt1PSNHjV15O4/HOPhGX2Xh8FrcWwihHsoh6zbASRelIHIOEO7TXUo3Vybws+t5IcKo1uOKAQl7S6Ih37jC2J6coBGUWudViglXWYZ4f6PeomWQCTEomKm6afVqjNR0xgrkoPr2QOSGVekVZESPhw0QoEEYverRYqFHQHHDZmLi0NRwxFlbTKvakCRtHRYaHVcbRPEaNzNvNMintkJ+hZkhYgS/Yj2fPa2Fp38J+OsNW8TNEDKCaZQRkiGEhY2UvjATLNZsqYptwY7ZamdwK2D0iS/P/y20VQ4SGLG5DVSWzkh5TpQkevoB1zuVyymNDU1h9fIAej5GrpsWXnx7FGJl4cTmNla0EMnlRTg72uBs3fvZI6bczZy8SM4/pq7evD/39A0qgt5mNHKwely9P4LP5HL773X/ES896YPI9R/rRwyJ3sM6Q/82nJ7Gxd4Rvv7lABW0yUbmQK4mNPSacFgVQ50THmIMsVk83hoO9NZhZgSoK2c2HK8RLhl0+TzTpUSRN3y5jgElNx7+QP8pDY9XhzOkTSDFqbm5vi6DRkH755Stzgb4T8mEsg9khNV64Po7piSE0q0YcJSg6BAc96WVi7DphXoR28cE6YmUakfABTs+eUzbtzQauiEWH5dUlPF7bI2E9CZNzlgO3UWg82NjRYX03DqtbVIaerTKGCj3yrZUMjDodzp25gPc+vIOJySkUOYHf/9FbmBg5R1R9iljoxMbaAunvsRJS7DYnGTqN+HaWY6ByyRIpiz7NVS0Uq2jxm0xmFQZpjRGS0Md3byn83q43GpoMB1Z8vIThYIkiZMajNda/zYgHC3eYQ2lFHIy6rYEvQ3phijbxa81WhrZQwyjR02nusk97OKAwjtZ3MDvdi+ZwFEZTmciXJgBlyMvnMW3hA6nE2/thjLC/+VsktE789jdPw0YRczicyJWb+PiTeRyF4xgb9LKqokxuD9FHpU+mqCVOI+mug7WNdXzh7AwrRZBdDtcvXcQhafAn799Bu8UoyPz73NMncXl2Fj+4fR8aJj09eaJeKEFjZ79Osh/ttKC1XIxwVIHD0MagzyLOAuCwmmDiBwxZKErphrKxnWd8s9K3hRWEWRlWJ4Vk1o3d3Sh79wA/eXsJNo8KX36un5BQZCw0KbuJB+FDaoSFJa/HnXv30BcMKsc42+xHDX3a5bQpgxX/jAwN4NSZU9hJNvHZnU/htFMnWBlCmCwG+nkpz7a7Qh2IoVGLK6ILageXFx0GmZ3NGL7x8qu43Ozi4TtvUkA9KDDVSdNjjrlySyt3ZB9f3K5sw4TDEQwSMHpcTiSYLSvsFavHjUQshturzMjDHkZgPYHETgRMo1Y/Yj7N46PPcvjO39xCItngs/MY7hOpqoYbH91COLqHR49us4qKuL+4iH4rFV4u4p27y/jwxnv48JNPUaTS68gDbqcDp/qd+PTBGk6dmmKI8RAP96kbbq5gCxuxKG6s7CKVzjIgTCCWS+Jn97ZQzrdZuqLhNYgfJvDJ3RU8e3UELrkFA7OCRW9oSKH+0FyR8bDRbuH+0gpaKg20DA9NtQFbRMG7S4QGMqlncAo2nQPFozBmTwVw5aoDlcohHj46wBvfWcRHn2ySm41UaQcuXejBs0+dIAXVUK1ZECfu3Z7nKnEFjWYtRl1anO13YSmapQKbcGKsF5LGwECS5PeW8dK1GXg9Tvyvv30fb779MwpWh347gBIIFpEtFBoS1rbjrK4UtuJ5qjRd4CDOz9AouxvKlg4roRTNkP0j+J2vvIovnb6E3t7+hvTPf+tbc+2OWnYQ80KhIb6UDyOjM4gc7rKENLh69Sn2TwILj+7D7BvE9QsX4SI/y1qxDVtkAgpicrKPHH4GX/nFizR/E3K5DrJFP0tNRrdZgppeePrEFIFGjx6nFdM+O9YLLWwlO6wiKyYmJvHyS6/j/oP7qKejuDgRwo/ubEEmREAlEW42oKLyTg042UYOLG0z9O/FodZrkWMwKeRyzNEmJaeLVESwFv8G9DpkiKMHLOXnXnwely4/3ZBOnpya63brcqmSoqjUlD1psfGt1Uj03S6iR7t4+/2f4vHuDuq1FD68t4A//5v3EPLPYrrvNKw6meU/gNkzL6FYGsXmVo5+J0NYt8dlgcs/iJMnryCTjBNFx1Gh34fGzkESG21pqvnJGbiNMqLRMMzswxeuTOPiF56gj5KjGQbcpCYz9eIuxStfruBrv/QCPphfQWQnTtbWQhI/qUPKYEVO5gQdHwarlBChMmpxuHpIvg7TgS40VMPjzsLVC+ctYQK3xG+ePXkdDx7Mo1TOo9ls0NBtgkGZh+tEyxY9ThxWWWGy9uACAd2uyzNCMnScfIoTypmVDHj8+DFDRx8KRM8YQ3qQgnHv7jw/+yyDgV4AMJW/hvWHn8JiMzCRtaAiNg6H/IDZQ3igkhNgtkgrf/if/4IeH+Lfk7G2swenTaLQFVHK5KHiCoojFXFQpowRypGo2MpRSlv8QsVntcRpBIX2137jpaJ0+uzUXLVclM1GG0PBU1TZIpEvhq3DAxxQgTudBjl3gn12EpMTJ5k3g0hmasintzE7nkMvGXhxgxWh1SmHcG16YS5XUkJA5ChGgRviBGwS8/JKX4rqebRwD7I4dhHnRuoaMhxAU63BaiyO7UgOd+8tYzeSJBJ2+T4VJQ6K/pSFvZicyoZDvds63nrlwFoUsk7reLBq4mNHnCmxOkQeFN+hoc93WOaP1nYbqq985akC+dgiIl4kvIWt3TWMjk7DZLEpOwdOmw2DvQPKqX8iGcZPb7xLC1Hja794BeWqBudngIPDOD1UbKsGsLq6q3jo5tYGdFT8LNHQxP5zun0IOcSpQBZVhgJlF7GZwtjoLHKVCjKFNObnP+PryyxFPbKMp9euXcGLzzyJSiGOCEHjz779JrJ0jIHhfmU1EwwsEkW21ego27EtQki91YRW7Ke1m0jV6spOSJvVA3FGXG0VydJjc8HggLy5uXS8TRMIIdTDD2wdHzEWK0U8eHSLvVFmefLBjHMvPXuOcGNDPGeit1mUiCbJIa5GCWa5CVnfoqipkE7HaUNlOExdjA77MeixUFzMBAMTmvUUJzCCQ9pHT38/1TkKN3Xj9OQwyvyax+rE1GQPVtaXaGePaTUSbbODe0t7TEI56ouOgaVOm+ooOKuhHRlJWzqWvtcu7qO4oTaZ4XURamwOJd3Vu52G5p0PPsHAUAAXL1zG3fv3KEwNxGIRfPDhDZYQZ6/TUk4GVSote7kCp9XHXmbwRwV6qcmHOqGVplBIPaaHy7D5PFhj5PO77Sx/F9WSbcEgbxNfMxuwcViGURaH6XZk8+vKlYR7t2+J8zrliOT9Owu0sjKf6eNg9/G/f/wJarQqqiMdYxQGTlg2lUU8oVVKuZBNH9uQIlPg4LU4IFWJ3jUyzOhIYwZGTjtJzsQJ0PT3ubG+8ZCCEEc0HMPzz7yAX3r9mywYPWEhSjLSweWwYmzkJNW+rmy+FQp5KnIVHqaYdqvE3JtQtoCaHYn9usayXkZtIIjRvkH4p6fhcjkQS8WgqqcpcgZWDV9SZeZEORQxLJaYiJwBxDmQaqWNoQHCAlNOLC763oeD8i50tJ27i0di55G9f9ybJpNJARlJOTbqKG3SFCf//ExxxaHOrx1rWUeZFH+POEmhFTzcTEOcLhpssnLr5ihaUkLB1EgEA4NnYbM7IXKziQJbLmeJc10sPHxAGhqnOIXx9tvv48mrX0Jk9yER0IKL589Az/ISJwq1ekPZtDdRbITQSJUc0bTG51Xp+U6GnQqtawrxKGMkE9NTly+gRTt597N57O6n0GWZmyl2XQ5ScQmtSsm1DdqniSImSrheq1EPOor/SiJaCeFSdZQDB2FTHfXxkWmM6q9yBK2FM7MBi8NupoJWlPtYI/2j/PUBavyQWMYKIfpbO1vIFJsYHfLhifNT2HicYs/n+GcpCpuffaxlgH+AE5MTGGJPVip1FPJprlY/ByXz6zpQdOFhNNze3kSqaYbFLiGaJSLmCSKLy+gZ8mKU+vHmjU8JDCmwDxSx0dBr21wlNT9DK4tF6SgF7Pf5aFFZNKgzJnK08ORMuUT/bkMlvl/gBwfdLjfQx88OBWxFza+9fo5JRUal2mBsc6FWreCdG2/jIFJCjsLVIildPDGNqdFB/PDGTbhzCVjNg/Q/cVGkhHNk3XbLhjc/fBt6Ws1hOIFirkzSKqLRrMJhtyteqSFt2Z0etA1uEMFQrzShY7auto14/8fvKJUXDkdxp77AuKeGhgTW5Yp1JZUyWHF1Qatnb6qPT/fbrLhymSVLbbHbtLh6immrpMWNe0V+j6QcwovRdluKKfN7JMQ4cM38yhH2jhqckTZ9r8gPOT4sGx4KwkKgSGc0uL++wfL045Vnz6LPr8bbN7ZA71aQ0GkLKacPBo1KOe3Tm2VlFVT1kuLJ4nphuVJAX19AuYa4ubtFG2rh6TMnsV+jlVCg7CO9yO3FCCRkYccxNLTZi0J4FGYStcmfEu1QbMUKAhN2IzbuZZ0R+QonQWfj9xWVWzsi+4pj0jbL3kPxvH75DO6tbuNgcw9SRyfPsS9kibRjNImVUFHyZeXYUtyX0EridM+Oe49WMNBjIU05GbLZzwz8hZI4PcwoD43GI+jxBWAz6JT9LYF9nANYqIzVZh0pCpJONiCfJ7FRsETG7fESOLpG8rQBSbZTgbFOERghTDg+8ft8xIroiLbo0F8tJg0rx4S2Qsxq8PVx7dxZ7BNPw3tJPltS/jYlAwZDBwGmuu1wGbVCvSH1j/rnWCZyrpQTGwYUBT0ajRbJqMBSJDA4LZzMBnKHBQqPnn3gUJj2iElKq1MpJxRdKno8tqsIh9hxEdswnbak+GO1Xid6CigQx5ZmpiU7J6SEteU1DPo7ELe3Cjk1+twMGtou4oR9BQ21P2fizy+X8R1UXIyBPicH3mTfHm+9CtHSs38PGV2392OchOPbg922ODGkLZHkjmIF0hwXQZYb6rw4EmXgHxsZZDoyUNU60HGVesmyDmZTcZSxJ85bKV02zmyWnngQSaPEPiyxrFstYQ82voQeWoK63mLn6/FBBAGxA1mnSueLOXh8ffy9CSsrFKTEDieC2VfjxKkTZkJIWamG62em8fRz50l5ZnTqx7dxxKCF6On0BoRcOhj4Z5FEQ8nCTWJqKZ9hJ6gQiSVRzuSozsdtIFDTwor1+KyssKZCZkYj2dvqNc/VWy3Zx8gmzlabVNdefx9e//Iv0hu9xDY1futXfxP/9LVp+tgU9ilmv/DC68oHXjr/pHJh7DCyB79/iIPIIZcpcnZVXH0OnkEhnUnATFvr7xnF2sZ95caewWjFYNDNyesiVc1iiWHD7PTjxaee4PPzuH1vXTm8U9OSOpwIARA2tpDTTKFqtImhTShnJ8TKLrGxVCrx+X7ldkKTFdXiZFksWiY6PWSDHeWm2HI2UgY0DbXBrFdePhqLMh1V+AUJLrubcFFRLnMJgSiXE8S2BsuiowjI8soDRj8XfL4gBe8Itx7dRLlVZXkPY4f2VaqWYGEYWVtdUVh3evQc/868ci04SPM3Wl2sJA3mlx/jk4/X0BMK4AcfPsAb3/8HfPsHH1PBG/RTrZKqhISJMGAw0DHI2GEOVlw7/PntOnHpo1uu8v3j8Pp72DJmZYVlgkqt60Aiz37ukBiJzV1OhOQbcs2pJbXcqreJdgZChoHIqML8/XlcOnuNNDWAR4s/wsSwEYtrdeVGXB992myU8PGn/4Ct/UN0iG56fQf9XOXx4QkUiwkEfF4kWGLPffFVpDJHOAhvQySyJh88PTXJDAxshg/5fVZ4vH58/NEGkXQXlRYthaup3LES4kzRbNOGxCllsabiajaUq4zKzTrlZk6bwGSGpFzJ6sLKONv6fCLK1TZhha1HMhQYqpwt2R2muXKxJksdLcR2UJNWJA7BB3sH+TCZKSWDHpKO1TaM/v6zxM0kzp4+S4Fq4s78bfZySzF/ib2fyqURJE6aWT5Wpi1vcIi4uM+S36KCh5SoWSMVDfT3YsTnwN9+vMqVkHCHgSCXonwZ9YrgfM6DyioKqhLYWBbqXhWDlZRbRQp8iyMA8vzkqA9+pw1b22E4PR7F0sTtBDEx4kKOxKpU7l6KjXinzzo3PjgsZ/JZ5URdy5nJF0uIH0X4IosE/RKZWIe/+8kn8NiS5NvHqJU26YNq/Oz2Kg4TYTjIvV6qd07sVbPEr5x/FoVyDg+XbuL2/dvwONw0frPCzeLmgACGDFf/0kQQ3r4uljarVH5akgjqYh3oAqBHd7kC4kKowGQNV93uZPlKWgYII/M0+9IgMR/riZZtxPIl1Nl+pXJBSUbi2lKdKi5sTgCM6nijoCHNnB6Zq1Xrco7BX8RDBz1XXNVd34wq/x3Cv/uXT+PmvTW8+9GWcrn0i5dGYHNo+OI59rqOgkAryWZZ0l2Cvhkh7zgqxQoWl28rK+91eJU95wbVWuhCINirDPrThXWMB9V47tIlttE0Plt8wChnVW76nDxzCk9cvY4jxstKnjDRVTOAGDA75lN2OapER4GPIgc3qh36d4vWBwUtW0x7gjxtLO0qVVzAkIhkojXUKnVDI+udFJpVJiIzJkZC7MksX7iK6Uk3XntmisCxie/94yaMTjUWHh/AZR3AYTTDl9nGlTMOfOub36D41JiBG4QRwgEtqUSAOH/mGZgpID7ybiqVYu7dx+CQgw/twh/oIQ0xaRE1U/UT+NmtPyMV0cPtKpweDeGlF76kAMbOwRpuxVIw+q24dKKfgMPPJ4vv7STQKDcVolKLG/uiF8UqCsSmtZaZy+vsXZfXiyIrR5xwaDTHraIZD3VxkSJiMpJY+IHhIyNKRL+xQSeVr4bvv7tFuVfRV3W4xt4tl9K0pg2ubAff/uEq3K5rePmZa1jdiijX/cXugs1k4Cq0FO/UaMXl8QpLOKvExPW1RRKaiJRGoqIMmWlp/3AH3WwZEW0HQdrjxs4OJno9MLPnLQwQT5waJU9VaVFaGJmozHSSDJOT2K8Tfa5cOlN1j21b3KeUdbQmYnEySR/2KRMhrleJbCydPj00V6o05QcrWdx8EFfOfUx6C+YXq/jOjz6BzqKGnUnq4tQsxilI0UQcm/vbFAeHQjhLKxvwu5JYXVnAo7VNzExN4MHWTdSYeTeW7uOTWzeoqDWUixnl3pe620Q+E2Mf5xCOPOTnlmFTh5AnNqYKOfzur34DMxOj+PT+e0jmk9CTzhJx4qIsdl0FubWJkDla6PElcKXnVce7lMpl0s83AoT4CUsV/y2FuJguaK9OCpKC/QNz1bpWFkceDSalWrkNpzXIEujAbNKSp2swERH7/T5GxYSyg2kQMYwrZuAKFst1CpIOQa8Ke4dqRsMANiKLXBGuDjVARauziht8bfYWV8HnEygqLKIOv6cPFXr/ZMhBfx7hAItYZXQUe2cL66ussh4cxUvYS5TQFwwoQWSFGVnwuFLG/88/ykp//o8odUGMoo8bdBQrhYyDbkiBgGmur6dHthJAJFWbL+GBuJje4qoE/AH2rJVe6UGasy+2f8T9RZfTwdlU/sMn2K1GxBNF+q+Tk2EmyDMGsvz3DtlnBFsTy5vApCQbwcLiDmSeJa1sDlSbbI8UM7SFbL2LYlfCZ+8v4PHBHoZpXX2BEHbIwSV6bSSVw36ywGRWZevpPg8X3f9rXfj5Jo8C4p9f+1f2qiWubA01lrjL4Wyo/W6fJZfLMGTz5e1WpHPEQ3pXgxahowWEAr1KImlwsG6ni3/JDQ19bXxslJFQAyv7ot0VK97BU5fHEU4Wsby1BVVLQ9oycRJrVFPRpweKNRSLBSWj1sucfdpJlKtXqulw9eJZ3H30GJJHi6+/9gqmxqf59Q7jnZlWxLSn1ij3JnVUaTEIMa7jf6nw/y91V6Ez4Qxi1cUWb4eTls1lLBq/f+yIS27JFVL8MBtGR8cVv9zaXUQrcUTltRz/Fy60GIfVzghpIllpsLXz+DifinuxRL1yzcpe0aLXx3RUD/GpLWWDrl4TV3ebLGU/tcGg7ISI+1X9/BaL1YnLVFUjFfbWehHnJmc4yWl+n8SJS1DQdBig6ITzFSSLdSW6tlme4mavEKLO59f8BXPjc8E6Hu9xaSuCpuxcq5TkR28u/h8BBgBsrHA6uKZEqwAAAABJRU5ErkJggg=="},7322:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2724%27 height=%2724%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill-rule=%27evenodd%27 fill=%27%23fff%27%3E %3Cpath d=%27M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0%27/%3E %3C/svg%3E"},7481:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2724%27 height=%2724%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill-rule=%27evenodd%27%3E %3Cpath d=%27M4 10a6 6 0 1 0 12 0 6 6 0 1 0-12 0m5-3a1 1 0 1 0 2 0 1 1 0 1 0-2 0m0 3a1 1 0 1 1 2 0v3a1 1 0 1 1-2 0%27/%3E %3C/svg%3E"},8424:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23000%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 display=%27none%27/%3E %3C/svg%3E"},85:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23333%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 display=%27none%27/%3E %3C/svg%3E"},1948:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%2333b5e5%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27 display=%27none%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 display=%27none%27/%3E %3C/svg%3E"},5002:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%2333b5e5%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 display=%27none%27/%3E %3C/svg%3E"},756:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23666%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 fill=%27red%27/%3E %3C/svg%3E"},5324:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23999%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 fill=%27red%27/%3E %3C/svg%3E"},5178:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23aaa%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 fill=%27red%27/%3E %3C/svg%3E"},3678:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23e54e33%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27 display=%27none%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 display=%27none%27/%3E %3C/svg%3E"},5057:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23e58978%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 display=%27none%27/%3E %3C/svg%3E"},5030:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 20 20%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23fff%27%3E %3Cpath d=%27M10 4C9 4 9 5 9 5v.1A5 5 0 0 0 5.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 0 0 9 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 0 0 3.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0 0 11 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 1 1 0-7z%27/%3E %3Ccircle id=%27dot%27 cx=%2710%27 cy=%2710%27 r=%272%27/%3E %3Cpath id=%27stroke%27 d=%27M14 5l1 1-9 9-1-1 9-9z%27 display=%27none%27/%3E %3C/svg%3E"},9480:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23000%27%3E %3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z%27/%3E %3C/svg%3E"},4850:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23000%27%3E %3Cpath d=%27M10.5 14l4-8 4 8h-8z%27/%3E %3Cpath id=%27south%27 d=%27M10.5 16l4 8 4-8h-8z%27 fill=%27%23ccc%27/%3E %3C/svg%3E"},5019:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23000%27%3E %3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z%27/%3E %3C/svg%3E"},5947:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23000%27%3E %3Cpath d=%27M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z%27/%3E %3C/svg%3E"},9360:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23000%27%3E %3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z%27/%3E %3C/svg%3E"},9353:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23333%27%3E %3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z%27/%3E %3C/svg%3E"},3561:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23333%27%3E %3Cpath d=%27M10.5 14l4-8 4 8h-8z%27/%3E %3Cpath id=%27south%27 d=%27M10.5 16l4 8 4-8h-8z%27 fill=%27%23ccc%27/%3E %3C/svg%3E"},1037:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23333%27%3E %3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z%27/%3E %3C/svg%3E"},6771:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23333%27%3E %3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z%27/%3E %3C/svg%3E"},9981:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23fff%27%3E %3Cpath d=%27M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z%27/%3E %3C/svg%3E"},6200:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23fff%27%3E %3Cpath d=%27M10.5 14l4-8 4 8h-8z%27/%3E %3Cpath id=%27south%27 d=%27M10.5 16l4 8 4-8h-8z%27 fill=%27%23999%27/%3E %3C/svg%3E"},7274:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23fff%27%3E %3Cpath d=%27M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z%27/%3E %3C/svg%3E"},6377:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23fff%27%3E %3Cpath d=%27M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z%27/%3E %3C/svg%3E"},3393:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27 fill=%27%23fff%27%3E %3Cpath d=%27M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z%27/%3E %3C/svg%3E"},5393:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2729%27 height=%2729%27 viewBox=%270 0 29 29%27 xmlns=%27http://www.w3.org/2000/svg%27%3E %3Cpath d=%27M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z%27/%3E %3C/svg%3E"},3580:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2788%27 height=%2723%27 viewBox=%270 0 88 23%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 fill-rule=%27evenodd%27%3E %3Cdefs%3E %3Cpath id=%27logo%27 d=%27M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z%27/%3E %3Cpath id=%27text%27 d=%27M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z%27/%3E %3C/defs%3E %3Cmask id=%27clip%27%3E %3Crect x=%270%27 y=%270%27 width=%27100%25%27 height=%27100%25%27 fill=%27white%27/%3E %3Cuse xlink:href=%27%23logo%27/%3E %3Cuse xlink:href=%27%23text%27/%3E %3C/mask%3E %3Cg id=%27outline%27 opacity=%270.3%27 stroke=%27%23000%27 stroke-width=%273%27%3E %3Ccircle mask=%27url%28%23clip%29%27 cx=%2711.5%27 cy=%2711.5%27 r=%279.25%27/%3E %3Cuse xlink:href=%27%23text%27 mask=%27url%28%23clip%29%27/%3E %3C/g%3E %3Cg id=%27fill%27 opacity=%270.9%27 fill=%27%23fff%27%3E %3Cuse xlink:href=%27%23logo%27/%3E %3Cuse xlink:href=%27%23text%27/%3E %3C/g%3E %3C/svg%3E"},2531:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2788%27 height=%2723%27 viewBox=%270 0 88 23%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 fill-rule=%27evenodd%27%3E %3Cdefs%3E %3Cpath id=%27logo%27 d=%27M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z%27/%3E %3Cpath id=%27text%27 d=%27M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z%27/%3E %3C/defs%3E %3Cmask id=%27clip%27%3E %3Crect x=%270%27 y=%270%27 width=%27100%25%27 height=%27100%25%27 fill=%27white%27/%3E %3Cuse xlink:href=%27%23logo%27/%3E %3Cuse xlink:href=%27%23text%27/%3E %3C/mask%3E %3Cg id=%27outline%27 opacity=%271%27 stroke=%27%23000%27 stroke-width=%273%27%3E %3Ccircle mask=%27url%28%23clip%29%27 cx=%2711.5%27 cy=%2711.5%27 r=%279.25%27/%3E %3Cuse xlink:href=%27%23text%27 mask=%27url%28%23clip%29%27/%3E %3C/g%3E %3Cg id=%27fill%27 opacity=%271%27 fill=%27%23fff%27%3E %3Cuse xlink:href=%27%23logo%27/%3E %3Cuse xlink:href=%27%23text%27/%3E %3C/g%3E %3C/svg%3E"},7397:t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2788%27 height=%2723%27 viewBox=%270 0 88 23%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 fill-rule=%27evenodd%27%3E %3Cdefs%3E %3Cpath id=%27logo%27 d=%27M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z%27/%3E %3Cpath id=%27text%27 d=%27M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z%27/%3E %3C/defs%3E %3Cmask id=%27clip%27%3E %3Crect x=%270%27 y=%270%27 width=%27100%25%27 height=%27100%25%27 fill=%27white%27/%3E %3Cuse xlink:href=%27%23logo%27/%3E %3Cuse xlink:href=%27%23text%27/%3E %3C/mask%3E %3Cg id=%27outline%27 opacity=%271%27 stroke=%27%23fff%27 stroke-width=%273%27 fill=%27%23fff%27%3E %3Ccircle mask=%27url%28%23clip%29%27 cx=%2711.5%27 cy=%2711.5%27 r=%279.25%27/%3E %3Cuse xlink:href=%27%23text%27 mask=%27url%28%23clip%29%27/%3E %3C/g%3E %3Cg id=%27fill%27 opacity=%271%27 fill=%27%23000%27%3E %3Cuse xlink:href=%27%23logo%27/%3E %3Cuse xlink:href=%27%23text%27/%3E %3C/g%3E %3C/svg%3E"},1420:t=>{"use strict";t.exports='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="32" height="24" viewBox="0 0 32 24"><polygon points="0,0 32,0 16,24" style="fill: rgb%28138, 138, 138%29"></polygon></svg>'},3609:t=>{"use strict";t.exports=jQuery}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,i.amdO={},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i.b=document.baseURI||self.location.href,(()=>{"use strict";var t=i(3609),e=i.n(t),n=i(2316),r=i.n(n),o=i(1570),a=i(7588),s=i.n(a),l=i(3935),c=i.n(l),u=i(3360),h=i.n(u),d=i(6486),p=i(6624),f=i.n(p),m=i(9669),g=i.n(m);const _=r().Router.extend({routes:{campaign:"defaultAction","campaign/:campaignId":"campaignAction","campaign/:campaignId/dmap":"dMapAction",distribution:"distributionAction",monitor:"monitorAction","campaign/:campaignId/monitor":"campaignMonitorAction","driver/:campaignId":"driverMonitorAction",report:"reportAction","report/:taskId":"reportAction",admin:"adminAction","admin/gtu":"availableGTUAction","print/:campaignId/:printType":"printAction","campaign/:campaignId/:taskName/:taskId/edit":"gtuEditAction","campaign/:campaignId/:taskName/:taskId/monitor":"gtuMonitorAction","campaign/import":"importCampaign","frame/:page":"frameAction","frame/*page?*queryString":"frameAction","*actions":"defaultAction"},defaultAction:function(){var t=i(2300).Z,e=i(4018).Z,n=new t;n.fetch().then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:e,params:{collection:n}}})}))},frameAction:function(t,e){var n="../"+t;e&&(n+="?"+e),window.open(n,"_blank","resizable=yes,status=yes,toolbar=no,scrollbars=yes,menubar=no,location=no"),r().history.history.back(-2)},campaignAction:function(t){g().get(`campaign/${t}/submap`).then((t=>{let e=i(9797).Z,n=t?.data?.data??{};h().publish({channel:"View",topic:"loadView",data:{view:e,params:{campaign:n,registeredTopic:{},registeredEvents:[]},options:{showMenu:!1,showUser:!0,showSearch:!1,showZipSearch:!0,pageTitle:`Campaign Map - ${n.ClientCode} ${n.ClientName}`}}})}))},dMapAction:function(t){g().get(`campaign/${t}/dmap`).then((t=>{let e=i(6596).Z,n=t?.data?.data??{};h().publish({channel:"View",topic:"loadView",data:{view:e,params:{campaign:n,registeredTopic:{},registeredEvents:[]},options:{showMenu:!1,showUser:!0,showSearch:!1,showZipSearch:!0,pageTitle:`Distribution Map - ${n.ClientCode} ${n.ClientName}`}}})}))},distributionAction:function(){let t=i(2300).Z,e=i(3321).Z,n=new t;n.fetchForDistribution().then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:e,params:{collection:n}}})}))},monitorAction:function(){let t=i(2300).Z,e=i(1952).Z,n=new t;n.fetchForTask().then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:e,params:{collection:n}}})}))},gtuMonitorAction:function(t,e,n){let r=i(594).Z,o=i(1859).Z,a=i(8552).Z,s=i(3179).Z,l=new a,c=new r({Id:n});c.fetch().then((()=>{let t=new o({CampaignId:c.get("CampaignId"),SubMapId:c.get("SubMapId"),DMapId:c.get("DMapId")});f().all([t.fetchBoundary(),t.fetchAllGtu(),l.fetchGtuWithStatusByTask(n)]).then((()=>{let e=`GTU Monitor - ${c.get("ClientName")}, ${c.get("ClientCode")}: ${c.get("Name")}`;h().publish({channel:"View",topic:"loadView",data:{view:s,params:{dmap:t,gtu:l,task:c}},options:{showMenu:!1,showUser:!1,showSearch:!1,pageTitle:e}})}))}))},driverMonitorAction:function(t){var e=i(3709).Z,n=i(1149).Z,r=i(5724).Z,o=new n,a=new r;o.loadWithAllTask(t).then((()=>new(f())(((t,e)=>{let n=!0;if(o.get("Tasks").each((t=>{if(0==t.get("IsFinished"))return n=!1,!1})),n)throw new OperationalError("task is closed");return t()})).then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:e,params:{model:o,geo:a},options:{showMenu:!1,showUser:!1,showSearch:!1,pageTitle:"GTU Campaign Monitor"}}})})).catch((t=>{let e=i(6211).Z;h().publish({channel:"View",topic:"loadView",data:{view:e,options:{showMenu:!1,showUser:!1,showSearch:!1,pageTitle:"GTU Campaign Monitor"}}})}))))},campaignMonitorAction:function(t){var e=i(5304).Z,n=i(1149).Z,r=i(5724).Z,o=new n,a=new r;o.loadWithAllTask(t).then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:e,params:{model:o,geo:a},options:{showMenu:!1,showUser:!0,showSearch:!1,pageTitle:"GTU Campaign Monitor"}}})}))},reportAction:function(t){i(1149).Z;let e=i(2300).Z,n=i(8664).Z,r=new e;r.fetchForReport().then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:n,params:{collection:r,taskId:t}}})}))},adminAction:function(){let t=i(7434).Z;h().publish({channel:"View",topic:"loadView",data:{view:t}})},importCampaign:function(){let t=i(2300).Z,e=i(2413).Z;h().publish({channel:"View",topic:"loadView",data:{view:e,params:{collection:new t}}})},printAction:function(t,e){switch(e){case"campaign":var n=i(1474).Z,r=i(9686).Z;(o=new n).fetchForCampaignMap(t).then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:r,params:{collection:o},options:{showMenu:!1,showUser:!1,showSearch:!1,pageTitle:"Timm Print Preview"}}})}));break;case"distribution":n=i(1474).Z,r=i(3942).Z,(o=new n).fetchForDistributionMap(t).then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:r,params:{collection:o},options:{showMenu:!1,showUser:!1,showSearch:!1,pageTitle:"Timm Print Preview"}}})}));break;case"report":var o;n=i(1474).Z,r=i(2598).Z,(o=new n).fetchForReportMap(t).then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:r,params:{collection:o},options:{showMenu:!1,showUser:!1,showSearch:!1,pageTitle:"Timm Print Preview"}}})}))}},gtuEditAction:function(t,e,n){let r=i(594).Z,o=i(1859).Z,a=i(8552).Z,s=i(5230).Z,l=new a,c=new r({Id:n});c.fetch().then((()=>{let t=new o({CampaignId:c.get("CampaignId"),SubMapId:c.get("SubMapId"),DMapId:c.get("DMapId")});f().all([t.fetchBoundary(),t.fetchGtuForEdit(),l.fetchByTask(n)]).then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:s,params:{dmap:t,gtu:l,task:c}}})}))}))},availableGTUAction:function(){let t=i(8552).Z,e=i(9522).Z,n=new t;n.fetch().then((()=>{h().publish({channel:"View",topic:"loadView",data:{view:e,params:{collection:n},options:{showSearch:!1}}})}))}});var y=i(189),v=(i(456),i(4184)),b=i.n(v),x=i(5086);function w(){return w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},w.apply(this,arguments)}var E=s().createClass({displayName:"MenuItem",mixins:[x.ZP],getInitialState:function(){return{active:!1}},getDefaultProps:function(){return{address:null,icon:null,name:null}},render:function(){return s().createElement("li",null,s().createElement("a",{className:this.state.active?"active":"",href:"#"+this.props.address},s().createElement("i",{className:this.props.icon}),s().createElement("span",{className:"menu-text"}," ",this.props.name)))}});const M=s().createClass({displayName:"menu",mixins:[x.ZP],getInitialState:function(){return{open:!1}},getDefaultProps:function(){return{menu:[{key:"campaign",icon:"fa fa-trophy",address:"campaign",name:"Campaign"},{key:"distribution",icon:"fa fa-map",address:"distribution",name:"Distribution Maps"},{key:"monitor",icon:"fa fa-truck",address:"monitor",name:"GPS Monitor"},{key:"report",icon:"fa fa-file-pdf-o",address:"report",name:"Reports"}]}},closeMenu:function(){this.setState({open:!1})},switch:function(){this.setState({open:!this.state.open})},render:function(){var t=b()({sidebar:!0,"off-canvas":!0,"position-left":!0,"is-open":this.state.open});return s().createElement("div",{className:t,"data-off-canvas":!0,"data-position":"left"},s().createElement("ul",{className:"menu vertical",onClick:this.closeMenu},this.props.menu.map((function(t){return s().createElement(E,w({key:t.key},t))})),s().createElement("li",null,s().createElement("a",{href:"#admin"},s().createElement("i",{className:"fa fa-gear"}),s().createElement("span",{className:"menu-text"},"  Administration")),s().createElement("ul",{className:"submenu menu vertical"},s().createElement("li",null,s().createElement("a",{href:"#frame/Users.aspx"},s().createElement("span",{className:"menu-text"},"User Management"))),s().createElement("li",null,s().createElement("a",{href:"#frame/NonDeliverables.aspx"},s().createElement("span",{className:"menu-text"},"Non-Deliverables"))),s().createElement("li",null,s().createElement("a",{href:"#frame/GtuAdmin.aspx?AssignNameToGTUFlag=true"},s().createElement("span",{className:"menu-text"},"GTU Management"))),s().createElement("li",null,s().createElement("a",{href:"#frame/AvailableGTUList.aspx"},s().createElement("span",{className:"menu-text"},"GTU Available List"))),s().createElement("li",null,s().createElement("a",{href:"#frame/AdminGtuToBag.aspx"},s().createElement("span",{className:"menu-text"},"GTU bag Management "))),s().createElement("li",null,s().createElement("a",{href:"#frame/AdminGtuBagToAuditor.aspx"},s().createElement("span",{className:"menu-text"},"Assign GTU-Bags to Auditors"))),s().createElement("li",null,s().createElement("a",{href:"#frame/AdminDistributorCompany.aspx"},s().createElement("span",{className:"menu-text"},"Distributor Management")))))))}}),T=s().createBackboneClass({mixins:[x.ZP],componentDidMount:function(){$("#userMenu").foundation()},onLogout:function(){this.getModel().logout().always((function(){window.location.reload(!0)}))},render:function(){return this.getModel(),s().createElement("div",{className:"title-bar-right"},s().createElement("a",{href:"javascript:;",onClick:this.onLogout},s().createElement("span",{className:"hide-for-small-only"},s().createElement("small",null,"Welcome, ",this.getModel().get("FullName"),"  ")),s().createElement("i",{className:"fa fa-sign-out",style:{position:"relative",top:"2px"}})))}});var S=i(4241);const k=s().createBackboneClass({mixins:[x.ZP,s().BackboneMixin("user","change:FullName")],getInitialState:function(){return{mainView:null,mainParams:null,dialogView:null,dialogParams:null,dialogSize:"small",dialogCustomClass:"",dialogModalView:null,dialogModalParams:null,dialogModalSize:"small",dialogModalCustomClass:"",loading:!1,pageTitle:"TIMM System",showMenu:null,showSearch:null,showZipSearch:null,showUser:null,fullTextSearchTimeout:null,zipSearchTimeout:null}},componentDidMount:function(){var t=this;this.subscribe("loadView",(function(e){var n=e.options;t.setState({pageTitle:(0,d.has)(n,"pageTitle")?n.pageTitle:"TIMM System",showMenu:!(0,d.has)(n,"showMenu")||n.showMenu,showSearch:!(0,d.has)(n,"showSearch")||n.showSearch,showZipSearch:!!(0,d.has)(n,"showZipSearch")&&n.showZipSearch,showUser:!(0,d.has)(n,"showUser")||n.showUser,mainView:e.view,mainParams:e.params})})),this.subscribe("showDialog",(function(e){if(e){t.setState({dialogView:e.view,dialogParams:e.params});var n=e.options;t.setState({dialogSize:(0,d.has)(n,"size")?n.size:"small",dialogCustomClass:(0,d.has)(n,"customClass")?n.customClass:""})}else t.setState({dialogView:null,dialogParams:null,dialogSize:null,dialogCustomClass:null})})),this.subscribe("showDialogModal",(function(e){if(e){t.setState({dialogModalView:e.view,dialogModalParams:e.params});var n=e.options;t.setState({dialogModalSize:(0,d.has)(n,"size")?n.size:"small",dialogModalCustomClass:(0,d.has)(n,"customClass")?n.customClass:""})}else t.setState({dialogModalView:null,dialogModalParams:null,dialogModalSize:null,dialogModalCustomClass:null})}));var n=0,i=null;this.subscribe("showLoading",(function(){n++,window.clearTimeout(i),i=window.setTimeout((function(){t.setState({loading:!0})}),500)})),this.subscribe("hideLoading",(function(){n--,window.setTimeout((function(){n<=0&&(window.clearTimeout(i),t.setState({loading:!1}),n=0)}),300)})),e()(window).on("resize",(function(){e()(".off-canvas-wrapper-inner").height(e()(window).height()),t.publish("Global.Window.Resize",{width:e()(window).width(),height:e()(window).height()})})),e()(window).trigger("resize"),e()(window).on("click",(function(){t.publish("Global.Window.Click")}))},componentDidUpdate:function(){var t=!1;this.state.dialogView&&Foundation?(e()(".dialog").foundation(),e()(".dialog").foundation("open"),t=!0):(e()(".dialog").foundation(),e()(".dialog").foundation("close")),this.state.dialogModalView&&Foundation?(e()(".dialogModal").foundation(),e()(".dialogModal").foundation("open"),t=!0):(e()(".dialogModal").foundation(),e()(".dialogModal").foundation("close")),t||e()(".reveal-overlay").css({display:"none"}),e()("html").removeClass("is-reveal-open"),e()("iframe").height(e()(window).height())},fullTextSearch:function(t){var e=this;clearTimeout(this.state.fullTextSearchTimeout);var n=t.currentTarget.value;this.state.fullTextSearchTimeout=setTimeout((function(){e.publish({channel:"View",topic:"search",data:n})}),500)},onKeyUpZipSearch:function(t){if("Enter"===t.key||13===t.keyCode){var e=t.currentTarget.value;clearTimeout(this.state.zipSearchTimeout),this.publish({channel:"View",topic:"Search.Zip",data:e})}},zipSearch:function(t){var e=this;clearTimeout(this.state.zipSearchTimeout);var n=t.currentTarget.value;this.state.zipSearchTimeout=setTimeout((function(){e.publish({channel:"View",topic:"Search.Zip",data:n})}),500)},menuSwitch:function(){this.refs.sideMenu&&this.refs.sideMenu.switch()},getMainView:function(){return this.state.mainView?s().isValidElement(this.state.mainView)?this.state.mainView:s().createFactory(this.state.mainView)(this.state.mainParams):null},onCloseDialog:function(){this.publish("showDialog")},onCloseDialogModal:function(){this.publish("showDialogModal")},getDialogView:function(t,e,n){if(t){if((0,d.isString)(t)){var i=t;return s().createElement("div",{className:"row"},s().createElement("div",{className:"small-12 columns"},s().createElement("p",null," "),s().createElement("h5",null,i),s().createElement("p",null," ")),s().createElement("div",{className:"small-12 columns"},s().createElement("div",{className:"button-group float-right"},s().createElement("a",{href:"javascript:;",className:"button tiny",onClick:n},"Okay"))),s().createElement("button",{onClick:n,className:"close-button","data-close":!0,"aria-label":"Close reveal",type:"button"},s().createElement("span",{"aria-hidden":"true"},"×")))}return s().isValidElement(t)?t:s().createFactory(t)((0,d.extend)(e,{ref:"DialogView"}))}return null},render:function(){this.getModel();var t=this.getMainView(),e=this.getDialogView(this.state.dialogView,this.state.dialogParams,this.onCloseDialog),n=b()("reveal dialog ".concat(this.state.dialogSize," ").concat(this.state.dialogCustomClass),{hide:null==e}),i=this.getDialogView(this.state.dialogModalView,this.state.dialogModalParams,this.onCloseDialogModal),r=b()("reveal dialogModal ".concat(this.state.dialogModalSize," ").concat(this.state.dialogModalCustomClass),{hide:null==i});if(!0===this.state.showMenu)var o="left-menu",a=s().createElement(M,{ref:"sideMenu"});else o="",a=null;if(!0===this.state.showSearch)var l=s().createElement("span",{className:"title-bar-center"},s().createElement("div",{className:"topSearchBar hide-for-small-only"},s().createElement("input",{type:"text",placeholder:"Search",onChange:this.fullTextSearch})));else l=null;if(!0===this.state.showUser)var c=s().createElement(T,{model:this.props.user});else c=null;var u=this.state.loading?"block":"none",h=null;return this.state.showZipSearch&&(h=s().createElement("span",{className:"title-bar-center"},s().createElement("div",{className:"row align-center"},s().createElement("div",{className:"column small-4"},s().createElement("div",{className:"topSearchBar hide-for-small-only"},s().createElement("input",{type:"text",placeholder:"Search zip code",onChange:this.zipSearch,onKeyUp:this.onKeyUpZipSearch})))))),s().createElement("div",null,a,s().createElement("div",{className:"main off-canvas-content "+o,"data-off-canvas-content":!0},s().createElement("div",{className:"title-bar"},s().createElement("div",{className:"title-bar-left"},s().createElement("button",{"aria-expanded":"true",className:"menu-icon",type:"button",onClick:this.menuSwitch}),s().createElement("span",{className:"title-text"},this.state.pageTitle)),c,l,h),t,s().createElement("div",{id:"google-map-wrapper"},s().createElement("div",{id:"google-map",className:"google-map"}))),s().createElement("div",{key:"dialog",className:n,"data-reveal":!0,"data-options":"closeOnClick: false; closeOnEsc: false;"},e),s().createElement("div",{key:"dialogModal",className:r,"data-reveal":!0,"data-options":"closeOnClick: false; closeOnEsc: false;"},i),s().createElement("div",{className:"overlayer",style:{display:u}},s().createElement(S.Z,null)))}});e()(document).ajaxSend((function(t,e,n){!0!==n.quite&&h().publish({channel:"View",topic:"showLoading"})})),e()(document).ajaxComplete((function(t,e,n){!0!==n.quite&&h().publish({channel:"View",topic:"hideLoading"})})),g().interceptors.request.use((function(t){return(t?.showLoading??!0)&&h().publish({channel:"View",topic:"showLoading"}),t}),(function(t){return h().publish({channel:"View",topic:"hideLoading"}),f().reject(t)})),g().interceptors.response.use((function(t){return h().publish({channel:"View",topic:"hideLoading"}),t}),(function(t){return h().publish({channel:"View",topic:"hideLoading"}),f().reject(t)}));var C=r().sync;r().sync=function(t,e,n){return n.url||(n.url=(0,d.isFunction)(e.url)?e.url():e.url),n.url||(n.url=e.urlRoot),n.url="./api/"+n.url,C(t,e,n)};let I=new URL("./api/",`${location.protocol}//${location.host}${location.pathname}`);g().defaults.baseURL=I.toString();var L=new y.Z;L.fetchCurrentUser().then((function(t){if(!t&&!(0,d.startsWith)(window.location.hash,"#driver"))return window.location="./login.html",f().reject();var e=s().createFactory((0,o.w)(k))({user:L});return c().render(e,document.getElementById("main-container")),(new _).on("route",(function(){})),r().history.start(),f().resolve()}))})(),(()=>{"use strict";var t=i(3379),e=i.n(t),n=i(7795),r=i.n(n),o=i(569),a=i.n(o),s=i(3565),l=i.n(s),c=i(9216),u=i.n(c),h=i(4589),d=i.n(h),p=i(1733),f={};f.styleTagTransform=d(),f.setAttributes=l(),f.insert=a().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=u(),e()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals})(),(()=>{"use strict";var t=i(3379),e=i.n(t),n=i(7795),r=i.n(n),o=i(569),a=i.n(o),s=i(3565),l=i.n(s),c=i(9216),u=i.n(c),h=i(4589),d=i.n(h),p=i(3190),f={};f.styleTagTransform=d(),f.setAttributes=l(),f.insert=a().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=u(),e()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals})()})();